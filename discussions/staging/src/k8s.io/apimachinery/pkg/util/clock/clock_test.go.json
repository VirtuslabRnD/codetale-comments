[
  {
    "id" : "d4aca079-1a43-4d9d-aad6-5b998feebd2d",
    "prId" : 80955,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/80955#pullrequestreview-280332462",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "75c074df-f9bb-471f-9cd4-1b42c465e559",
        "parentId" : null,
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "Any reason why you opted to embed this unit test? It feels cleaner to me to unit test `FakePassiveClock` separately. The code is basically already there to do that, so it would be a relatively smallish change.\r\n```\r\nfunc TestFakePassiveClock(t *testing.T) {\r\n    startTime := time.Now()\r\n    pc := NewFakeClock(startTime)\r\n\tt1 := time.Now()\r\n\tt2 := t1.Add(time.Hour)\r\n\tpc.SetTime(t1)\r\n\ttx := pc.Now()\r\n\tif tx != t1 {\r\n\t\tt.Errorf(\"SetTime(%#+v); Now() => %#+v\", t1, tx)\r\n\t}\r\n\tdx := pc.Since(t1)\r\n\tif dx != 0 {\r\n\t\tt.Errorf(\"Since() => %v\", dx)\r\n\t}\r\n\tpc.SetTime(t2)\r\n\tdx = pc.Since(t1)\r\n\tif dx != time.Hour {\r\n\t\tt.Errorf(\"Since() => %v\", dx)\r\n\t}\r\n\ttx = pc.Now()\r\n\tif tx != t2 {\r\n\t\tt.Errorf(\"Now() => %#+v\", tx)\r\n\t}\r\n}\r\n```\r\n\r\n... and then you can get rid of the two lines in this test case.",
        "createdAt" : "2019-08-27T05:07:26Z",
        "updatedAt" : "2019-08-27T14:34:31Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      },
      {
        "id" : "29a9e29d-f033-42dc-b306-ca13797b6f26",
        "parentId" : "75c074df-f9bb-471f-9cd4-1b42c465e559",
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "Or actually, since SetTime isn't actually a part of the PassiveClock interface, maybe it would be better if the unit test only actually tested the Since functionality. It would be a smaller unit test which properly instantiated a FakePassiveClock and verified that comparisons with Since worked as intended. \r\n\r\nThe part in `exercisePassiveClock` which tests correct comparisons after `SetTime` is invoked is superfluous with the [existing unit test](https://github.com/kubernetes/kubernetes/blob/release-1.15/staging/src/k8s.io/apimachinery/pkg/util/clock/clock_test.go#L46-L49).",
        "createdAt" : "2019-08-27T05:22:13Z",
        "updatedAt" : "2019-08-27T14:34:31Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      },
      {
        "id" : "99db256d-02e4-4d24-9afc-64918831b423",
        "parentId" : "75c074df-f9bb-471f-9cd4-1b42c465e559",
        "authorId" : "7a59a326-58b3-4590-b70a-297d2e27daa5",
        "body" : "Oh!  I forgot to write TestFakePassiveClock.  That and TestFakeClock use the factored out exercisePassiveClock.\r\n\r\nI just pushed a revision that added the overlooked test (which revealed that I also forgot to write FakePassiveClock::Set).",
        "createdAt" : "2019-08-27T14:31:02Z",
        "updatedAt" : "2019-08-27T14:34:31Z",
        "lastEditedBy" : "7a59a326-58b3-4590-b70a-297d2e27daa5",
        "tags" : [
        ]
      },
      {
        "id" : "28fbe822-c07f-4520-b666-637767c2e35d",
        "parentId" : "75c074df-f9bb-471f-9cd4-1b42c465e559",
        "authorId" : "7a59a326-58b3-4590-b70a-297d2e27daa5",
        "body" : ".. and another rev that removed the redundant part of TestFakeClock",
        "createdAt" : "2019-08-27T14:34:53Z",
        "updatedAt" : "2019-08-27T14:34:53Z",
        "lastEditedBy" : "7a59a326-58b3-4590-b70a-297d2e27daa5",
        "tags" : [
        ]
      },
      {
        "id" : "cfa46385-07ea-46af-8081-149585cea279",
        "parentId" : "75c074df-f9bb-471f-9cd4-1b42c465e559",
        "authorId" : "7a59a326-58b3-4590-b70a-297d2e27daa5",
        "body" : "SetTime is not part of any clock interface, it is a method on the Fake implementations.",
        "createdAt" : "2019-08-27T14:37:44Z",
        "updatedAt" : "2019-08-27T14:37:44Z",
        "lastEditedBy" : "7a59a326-58b3-4590-b70a-297d2e27daa5",
        "tags" : [
        ]
      },
      {
        "id" : "92e68522-68fc-4a98-aff4-6841eabbef74",
        "parentId" : "75c074df-f9bb-471f-9cd4-1b42c465e559",
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "That makes sense, I'll take another look now.",
        "createdAt" : "2019-08-27T16:48:46Z",
        "updatedAt" : "2019-08-27T16:48:47Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      }
    ],
    "commit" : "2e2e6b82e0c55294164de51b22b319fa2728a301",
    "line" : 41,
    "diffHunk" : "@@ -1,1 +71,75 @@\tstartTime := time.Now()\n\ttc := NewFakeClock(startTime)\n\texercisePassiveClock(t, tc)\n\ttc.SetTime(startTime)\n\ttc.Step(time.Second)"
  },
  {
    "id" : "b3c4c187-d03f-4078-a527-d9bf6297b394",
    "prId" : 78808,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/78808#pullrequestreview-247709698",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c4c4896a-d58e-46d4-a27e-82d6f8d0e402",
        "parentId" : null,
        "authorId" : "b15d5707-82a8-4448-b49d-a2d6502b10f9",
        "body" : "Shouldn't this also check for `false` because `oneSec` has already fired?",
        "createdAt" : "2019-06-10T16:22:32Z",
        "updatedAt" : "2019-06-27T15:42:09Z",
        "lastEditedBy" : "b15d5707-82a8-4448-b49d-a2d6502b10f9",
        "tags" : [
        ]
      },
      {
        "id" : "01477a1b-46bb-45a0-8a5c-56e05f24d37c",
        "parentId" : "c4c4896a-d58e-46d4-a27e-82d6f8d0e402",
        "authorId" : "b15d5707-82a8-4448-b49d-a2d6502b10f9",
        "body" : "EDIT: nevermind!",
        "createdAt" : "2019-06-10T16:25:18Z",
        "updatedAt" : "2019-06-27T15:42:09Z",
        "lastEditedBy" : "b15d5707-82a8-4448-b49d-a2d6502b10f9",
        "tags" : [
        ]
      }
    ],
    "commit" : "3e898d69210918433fd0cd0aa89392faac61b83a",
    "line" : 58,
    "diffHunk" : "@@ -1,1 +172,176 @@\tdefault:\n\t}\n\tif oneSec.Stop() {\n\t\tt.Errorf(\"Expected oneSec.Stop() to return false\")\n\t}"
  }
]