[
  {
    "id" : "5ca932f9-deb7-4c54-adcd-b2b6a0ec70bb",
    "prId" : 98841,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/98841#pullrequestreview-603829018",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6bef863b-eb12-4d57-bcaa-9bea05151bcd",
        "parentId" : null,
        "authorId" : "13c01cb8-6052-4a98-b6fd-20d3acd6332f",
        "body" : "Would it be possible to extend `NewServiceUnavailable` so that it could be used with `errors.Is` and `errors.As` method?\r\n\r\nI have opened[ a PR](https://github.com/kubernetes/kubernetes/pull/92291) that adds a retry mechanism to the `aggregator`. The idea was to intercept errors returned from the round trippers and interpret them. Here is an example - https://github.com/kubernetes/kubernetes/pull/92291/files?file-filters%5B%5D=.go#diff-ffaa928dbabab1da2e82594be1620b945b37f7fc7256ec1c067abb9af412c4a3R196\r\n\r\nDoes it make sense ?",
        "createdAt" : "2021-02-08T13:43:14Z",
        "updatedAt" : "2021-02-08T13:43:15Z",
        "lastEditedBy" : "13c01cb8-6052-4a98-b6fd-20d3acd6332f",
        "tags" : [
        ]
      },
      {
        "id" : "5b50ea3f-88b0-4d2f-83a3-d694a4245c12",
        "parentId" : "6bef863b-eb12-4d57-bcaa-9bea05151bcd",
        "authorId" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "body" : "Got it.  We can extend the [StatusError](https://github.com/kubernetes/kubernetes/blob/838bb6a56760a2abf03bbd42ab3e3a53ed58df13/staging/src/k8s.io/apimachinery/pkg/api/errors/errors.go#L35),\r\n   * adding a new field to record the original error\r\n   * adding helper functions to create StatusError with original error.\r\n   * adding a Unwrap() method\r\n\r\nStatusError is used in many places, we should change its interface with caution. We can begin with making a local extension in k8s.io/apimachinery/pkg/util/proxy, and merge it back when it's mature.\r\n\r\nIs this PR breaking existing code though? The PR you linked is still open. It would be hard to justify the complexity of the extension if we don't have a real use case.",
        "createdAt" : "2021-02-11T00:42:41Z",
        "updatedAt" : "2021-02-11T00:42:42Z",
        "lastEditedBy" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "tags" : [
        ]
      },
      {
        "id" : "55a0b97e-ea64-4566-a364-237a87cea267",
        "parentId" : "6bef863b-eb12-4d57-bcaa-9bea05151bcd",
        "authorId" : "13c01cb8-6052-4a98-b6fd-20d3acd6332f",
        "body" : "I think that we should follow the standard golang way and add an Unwrap() method.\r\n\r\n> Is this PR breaking existing code though? The PR you linked is still open. It would be hard to justify the complexity of the extension if we don't have a real use case.\r\n\r\nYou are right, this PR won't break existing code it will be just a little harder in the future. I'm okay with merging.",
        "createdAt" : "2021-03-04T08:34:16Z",
        "updatedAt" : "2021-03-04T08:34:16Z",
        "lastEditedBy" : "13c01cb8-6052-4a98-b6fd-20d3acd6332f",
        "tags" : [
        ]
      }
    ],
    "commit" : "9aebae2f6a1a0fcb393dc8d3e17899800883d44a",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +103,107 @@\n\tif err != nil {\n\t\treturn nil, errors.NewServiceUnavailable(fmt.Sprintf(\"error trying to reach service: %v\", err))\n\t}\n"
  },
  {
    "id" : "153e1aa2-91aa-458d-98d3-a6fb16cbceff",
    "prId" : 76551,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/76551#pullrequestreview-228675026",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "863c1c5d-a7d4-45c3-931b-624b3096f6d0",
        "parentId" : null,
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "This whole response rewriting thing was a huge mistake, I'm not super excited to add bells and whistles. @deads2k thoughts? I guess this is at least a small, targeted change...\r\n\r\nPlease update the TODO statement and add a test.",
        "createdAt" : "2019-04-15T20:55:07Z",
        "updatedAt" : "2019-05-29T19:52:33Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      },
      {
        "id" : "8de12ea8-c3f4-4dbf-8aef-d543c6725c25",
        "parentId" : "863c1c5d-a7d4-45c3-931b-624b3096f6d0",
        "authorId" : "e9ccec4a-f0c0-4820-a947-6050b5de65a5",
        "body" : "Updated\r\nThanks",
        "createdAt" : "2019-04-19T12:18:08Z",
        "updatedAt" : "2019-05-29T19:52:33Z",
        "lastEditedBy" : "e9ccec4a-f0c0-4820-a947-6050b5de65a5",
        "tags" : [
        ]
      }
    ],
    "commit" : "9337ed703240ce1c59121d090578563e9a140a8a",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +233,237 @@\t\tdefer gzw.Close()\n\t\twriter = gzw\n\tcase \"deflate\":\n\t\tvar err error\n\t\treader = flate.NewReader(reader)"
  },
  {
    "id" : "d29a8a4f-0e51-410a-8e5a-c1fff9b5eaaa",
    "prId" : 52556,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/52556#pullrequestreview-71373471",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "953a3df5-8b27-4bbd-8181-a57648e13617",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "Thanks. An example's worth a thousand words. ",
        "createdAt" : "2017-10-24T01:07:48Z",
        "updatedAt" : "2017-10-24T01:08:00Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "4a5b9dd70ee9467b514c5317d8921e73e6756995",
    "line" : 24,
    "diffHunk" : "@@ -1,1 +140,144 @@\t}\n\n\t// Example:\n\t//      When API server processes a proxy request to a service (e.g. /api/v1/namespace/foo/service/bar/proxy/),\n\t//      the sourceURL.Host (i.e. req.URL.Host) is the endpoint IP address of the service. The"
  }
]