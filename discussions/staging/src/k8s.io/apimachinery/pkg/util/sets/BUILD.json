[
  {
    "id" : "71de3c0b-06e0-4ab5-bab2-89f2d76db7f8",
    "prId" : 89430,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/89430#pullrequestreview-381582046",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "14dc96e5-f45f-45ac-bb59-93ebaeb76137",
        "parentId" : null,
        "authorId" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "body" : "this seems a bit surprising",
        "createdAt" : "2020-03-25T19:16:41Z",
        "updatedAt" : "2020-03-25T19:16:41Z",
        "lastEditedBy" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "tags" : [
        ]
      },
      {
        "id" : "5fb6537f-e428-4f01-9120-2429c756179f",
        "parentId" : "14dc96e5-f45f-45ac-bb59-93ebaeb76137",
        "authorId" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "body" : "I mentioned this above. Changes related to gopath are expected. We fixed go_genrule in kubernetes/repo-infra#122 to set things up properly.",
        "createdAt" : "2020-03-25T19:17:43Z",
        "updatedAt" : "2020-03-25T19:17:43Z",
        "lastEditedBy" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "tags" : [
        ]
      },
      {
        "id" : "9879ead3-f3b1-4b4b-a787-6ef0b557bb64",
        "parentId" : "14dc96e5-f45f-45ac-bb59-93ebaeb76137",
        "authorId" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "body" : "In GOPATH I would still expect this to be `k8s.io/kubernetes/{vendor,staging/...}/apimachinery/` to refer to the one in this directory tree as opposed to the staged copy at some other version.",
        "createdAt" : "2020-03-25T21:14:40Z",
        "updatedAt" : "2020-03-25T21:14:40Z",
        "lastEditedBy" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "tags" : [
        ]
      },
      {
        "id" : "fbb4962d-110c-42d0-a6a8-82b99e85518d",
        "parentId" : "14dc96e5-f45f-45ac-bb59-93ebaeb76137",
        "authorId" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "body" : "It doesn't really. It has worked so far because we don't have a go.mod in the build sandbox. It wouldn't work if the go genrule commands were run unsandboxed. These commands both fail in the KUBE_ROOT:\r\n```\r\ngo list k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/util/sets\r\ngo list -mod=vendor k8s.io/kubernetes/vendor/k8s.io/apimachinery/pkg/util/sets\r\n```\r\nThe change kubernetes/repo-infra#122 was specifically meant to allow go_genrule invocations to match the invocations of the ./hack code-gen:\r\n\r\nhttps://github.com/kubernetes/kubernetes/blob/c4fd09d80a3cbcb11d202b78987ad66ab4fd9904/hack/update-codegen.sh#L65-L69\r\n\r\n```golang\r\n$ (cd \"${KUBE_ROOT}/staging/src\"; find k8s.io/api -name types.go -print0 | xargs -0 -n1 dirname | sort)\r\nk8s.io/api/admissionregistration/v1\r\nk8s.io/api/admissionregistration/v1beta1\r\nk8s.io/api/admission/v1\r\nk8s.io/api/admission/v1beta1\r\nk8s.io/api/apps/v1\r\nk8s.io/api/apps/v1beta1\r\nk8s.io/api/apps/v1beta2\r\nk8s.io/api/auditregistration/v1alpha1\r\nk8s.io/api/authentication/v1\r\nk8s.io/api/authentication/v1beta1\r\nk8s.io/api/authorization/v1\r\nk8s.io/api/authorization/v1beta1\r\n...\r\n```\r\nIsn't this better?",
        "createdAt" : "2020-03-25T22:27:22Z",
        "updatedAt" : "2020-03-25T22:27:22Z",
        "lastEditedBy" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "tags" : [
        ]
      }
    ],
    "commit" : "59e2a09549bd4aba945c9978942fa1b13dd88574",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +39,43 @@    cmd = \"\"\"\n$(location //vendor/k8s.io/code-generator/cmd/set-gen) \\\n    --input-dirs k8s.io/apimachinery/pkg/util/sets/types \\\n    --output-base $$(dirname $$(dirname $(location :byte.go))) \\\n    --go-header-file $(location //hack/boilerplate:boilerplate.generatego.txt) \\"
  },
  {
    "id" : "5563609f-f6b0-4423-b187-8f676e1df19e",
    "prId" : 38990,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/38990#pullrequestreview-36675006",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b8135526-7a6b-4de0-b284-01acae1db253",
        "parentId" : null,
        "authorId" : "c532215f-ed76-4a19-b066-8676d269eaf1",
        "body" : "Can we delete these files?",
        "createdAt" : "2017-05-02T18:12:10Z",
        "updatedAt" : "2017-05-02T18:12:10Z",
        "lastEditedBy" : "c532215f-ed76-4a19-b066-8676d269eaf1",
        "tags" : [
        ]
      },
      {
        "id" : "aee7f2c8-1960-4077-939b-69c968196fc3",
        "parentId" : "b8135526-7a6b-4de0-b284-01acae1db253",
        "authorId" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "body" : "Not until we don't use go build.",
        "createdAt" : "2017-05-07T22:22:39Z",
        "updatedAt" : "2017-05-07T22:22:39Z",
        "lastEditedBy" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "tags" : [
        ]
      }
    ],
    "commit" : "ff4a814cce42c5c6610d4c61d6c5b796826bc231",
    "line" : 18,
    "diffHunk" : "@@ -1,1 +13,17 @@    name = \"go_default_library\",\n    srcs = [\n        \"byte.go\",\n        \"doc.go\",\n        \"empty.go\","
  }
]