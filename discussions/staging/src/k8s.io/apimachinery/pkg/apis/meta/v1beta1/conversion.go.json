[
  {
    "id" : "93d6cea9-c8ae-4747-b365-860a3e1bfd73",
    "prId" : 89926,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/89926#pullrequestreview-389305844",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "edaf87d7-0b51-4042-bd77-9adf2e375f5a",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "what did the reflective conversion do with TypeMeta? did it ignore it or preserve it?",
        "createdAt" : "2020-04-07T15:38:36Z",
        "updatedAt" : "2020-04-07T15:38:36Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "8012592a-39a5-4c81-882a-c350033bb023",
        "parentId" : "edaf87d7-0b51-4042-bd77-9adf2e375f5a",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "I guess you ask about ListMeta? For ListMeta, it's being copied.\r\n\r\nThat said, for TypeMeta, unless I misunderstand something, we have a bit of a mess.\r\n- auto-generated conversions are ignoring it\r\n- there is also manual conversion to ignore it, but it's NOT registered anywhere:\r\nhttps://github.com/kubernetes/kubernetes/blob/master/staging/src/k8s.io/apimachinery/pkg/apis/meta/v1/conversion.go#L132\r\n- default converter is copying it (because unless there isn't a registered conversion, it's copying everything)\r\n- convertToVersion is setting it:\r\nhttps://github.com/kubernetes/kubernetes/blob/master/staging/src/k8s.io/apimachinery/pkg/runtime/scheme.go#L531\r\nhttps://github.com/kubernetes/kubernetes/blob/master/staging/src/k8s.io/apimachinery/pkg/runtime/scheme_test.go#L124\r\nSo I guess we need to clean it up at some point (though I'm not sure what is the right thing to do here...)",
        "createdAt" : "2020-04-07T16:02:16Z",
        "updatedAt" : "2020-04-07T16:02:17Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "2aad5379-0804-46d4-8d95-56b32501e905",
        "parentId" : "edaf87d7-0b51-4042-bd77-9adf2e375f5a",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "I was asking about TypeMeta, just happened to click on this line. Can you verify that getting PartialMetadataList in v1 and v1beta1 gets returned with the correct kind/apiVersion?",
        "createdAt" : "2020-04-07T16:12:57Z",
        "updatedAt" : "2020-04-07T16:12:58Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "1d829792-430b-41f2-818c-921c4b0b85d9",
        "parentId" : "edaf87d7-0b51-4042-bd77-9adf2e375f5a",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "stuff like curl -H \"Accept: application/json;as=PartialObjectMetadataList;g=meta.k8s.io;v=v1beta1\" localhost:8080/api/v1/pods have TypeMeta set (both with my PR and without)\r\n\r\nIt seems to be because ConvertToVersion is used to serve those and it sets it explicitly:\r\nhttps://github.com/kubernetes/kubernetes/blob/master/staging/src/k8s.io/apimachinery/pkg/runtime/scheme.go#L531\r\n",
        "createdAt" : "2020-04-07T16:45:49Z",
        "updatedAt" : "2020-04-07T16:45:49Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "3583af54-b0b1-4103-9dd5-deb81f1cff74",
        "parentId" : "edaf87d7-0b51-4042-bd77-9adf2e375f5a",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "thanks for checking",
        "createdAt" : "2020-04-07T16:49:29Z",
        "updatedAt" : "2020-04-07T16:49:29Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "101221be339e6cc37302a7a7713834d5f8dd8ce1",
    "line" : 25,
    "diffHunk" : "@@ -1,1 +34,38 @@// Convert_v1beta1_PartialObjectMetadataList_To_v1_PartialObjectMetadataList allows converting PartialObjectMetadataList between versions\nfunc Convert_v1beta1_PartialObjectMetadataList_To_v1_PartialObjectMetadataList(in *PartialObjectMetadataList, out *v1.PartialObjectMetadataList, s conversion.Scope) error {\n\tout.ListMeta = in.ListMeta\n\tout.Items = *(*[]v1.PartialObjectMetadata)(unsafe.Pointer(&in.Items))\n\treturn nil"
  }
]