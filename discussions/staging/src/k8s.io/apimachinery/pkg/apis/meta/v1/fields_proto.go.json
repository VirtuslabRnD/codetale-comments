[
  {
    "id" : "1fb3146a-93eb-4c4b-9917-c1e81140a08b",
    "prId" : 80730,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/80730#pullrequestreview-270922027",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f235c058-c30c-486b-9021-39db92bd685f",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "I'm having a hard time following this... some comments might help.\r\n\r\nif I'm reading this correctly, we expect this to be the normal path (since we should not encounter persisted alpha data)\r\n\r\ndoes that mean our preferred proto format (serialized to proto tag 2) is a byte array of json? I didn't realize that's where we ended up.",
        "createdAt" : "2019-08-02T03:30:27Z",
        "updatedAt" : "2019-08-02T03:36:09Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "1651e726-b682-4db1-a148-92c5de7a6c40",
        "parentId" : "f235c058-c30c-486b-9021-39db92bd685f",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "this also potentially forces another allocation of len(p.Raw), since Fields#UnmarshalJSON just appends non-null bytes to the Raw field (with `f.Raw = append(f.Raw[0:0], b...)`).\r\n\r\nWould this work better?\r\n\r\n```go\r\nm.Raw = nil\r\nif !bytes.Equal(p.Raw, []byte(\"null\")) {\r\n  m.Raw = p.Raw\r\n}\r\nreturn\r\n```",
        "createdAt" : "2019-08-02T03:39:34Z",
        "updatedAt" : "2019-08-02T03:39:48Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "993f32e2-d14b-4d4b-a59f-ad35aac92858",
        "parentId" : "f235c058-c30c-486b-9021-39db92bd685f",
        "authorId" : "37324129-fa96-456d-92ea-e5f9b41f8c7f",
        "body" : "And a follow up for this too",
        "createdAt" : "2019-08-05T18:06:02Z",
        "updatedAt" : "2019-08-05T18:06:02Z",
        "lastEditedBy" : "37324129-fa96-456d-92ea-e5f9b41f8c7f",
        "tags" : [
        ]
      }
    ],
    "commit" : "87f8ba5c81192bf8e383dff42b4f8ddc0be2ff63",
    "line" : 61,
    "diffHunk" : "@@ -1,1 +59,63 @@\t}\n\tif len(p.Map) == 0 {\n\t\treturn json.Unmarshal(p.Raw, &m)\n\t}\n\tb, err := json.Marshal(&p.Map)"
  },
  {
    "id" : "7879fe80-4f82-4b36-abf8-57c83173c721",
    "prId" : 80730,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/80730#pullrequestreview-270921252",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c27bfc9e-2d12-4c15-816e-c62c08fbc7c1",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "same question here, should we just do `m.Raw = b` at this point?",
        "createdAt" : "2019-08-02T03:40:39Z",
        "updatedAt" : "2019-08-02T03:40:40Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "c07a475f-2179-41aa-ab58-f5bccaa96006",
        "parentId" : "c27bfc9e-2d12-4c15-816e-c62c08fbc7c1",
        "authorId" : "37324129-fa96-456d-92ea-e5f9b41f8c7f",
        "body" : "Sure we can do that. I was originally thinking this would keep the two serializations in line, and if i make the change you suggested above then it would be the same as changing it here, just one less function call",
        "createdAt" : "2019-08-05T18:04:23Z",
        "updatedAt" : "2019-08-05T18:04:41Z",
        "lastEditedBy" : "37324129-fa96-456d-92ea-e5f9b41f8c7f",
        "tags" : [
        ]
      }
    ],
    "commit" : "87f8ba5c81192bf8e383dff42b4f8ddc0be2ff63",
    "line" : 67,
    "diffHunk" : "@@ -1,1 +65,69 @@\t\treturn err\n\t}\n\treturn json.Unmarshal(b, &m)\n}\n"
  }
]