[
  {
    "id" : "1690c1f2-e584-4dd2-8616-0d2cd58db451",
    "prId" : 79636,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/79636#pullrequestreview-257601814",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cce25721-9552-4d45-b9f2-4957716159ac",
        "parentId" : null,
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "AdditionalProperties? ",
        "createdAt" : "2019-07-02T13:55:27Z",
        "updatedAt" : "2019-07-03T16:18:26Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "e66e5726-8cc3-4d03-895d-53d16fe0d385",
        "parentId" : "cce25721-9552-4d45-b9f2-4957716159ac",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "or is that one fine because kubectl will switch to the map case and then start fresh for the map values?",
        "createdAt" : "2019-07-02T13:59:02Z",
        "updatedAt" : "2019-07-03T16:18:26Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "439ff959-cd64-4240-8c5c-6be48ecbda92",
        "parentId" : "cce25721-9552-4d45-b9f2-4957716159ac",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "correct, kubectl doesn't have issues with unknown keys when additionalProperties are set",
        "createdAt" : "2019-07-02T13:59:39Z",
        "updatedAt" : "2019-07-03T16:18:26Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "9d1dd643-7e27-47e2-b6ef-43fdd1ac4f3b",
        "parentId" : "cce25721-9552-4d45-b9f2-4957716159ac",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "We have an publishing kubectl e2e test, don't we? Can we add that there?",
        "createdAt" : "2019-07-02T14:58:24Z",
        "updatedAt" : "2019-07-03T16:18:26Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "17f272d3-fc45-4154-a4b6-62d980184f01",
        "parentId" : "cce25721-9552-4d45-b9f2-4957716159ac",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "added tests for it at the root and in a nested field",
        "createdAt" : "2019-07-03T16:21:18Z",
        "updatedAt" : "2019-07-03T16:21:18Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "990c656adbb35e907f56b869a4c4ecddb583f0c5",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +70,74 @@\t\t\t\ts.Items = nil\n\t\t\t\ts.Properties = nil\n\n\t\t\t\tchanged = true\n\t\t\t}"
  },
  {
    "id" : "666577e8-d96f-456f-9ca4-5dff2fc9d986",
    "prId" : 74804,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/74804#pullrequestreview-209688277",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8a38784c-a8fd-45f8-84f1-36126ebb7d7b",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "do we have a test that `type:[\"object\",\"null\"], properties: ...` behaves correctly? (the only difference between this and the previous behavior is that properties is preserved, right?)",
        "createdAt" : "2019-03-01T16:35:51Z",
        "updatedAt" : "2019-03-01T17:11:56Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "3476119e-a5b2-416d-bc70-9b47a23b2757",
        "parentId" : "8a38784c-a8fd-45f8-84f1-36126ebb7d7b",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "It lets us go here: https://github.com/kubernetes/kube-openapi/blob/master/pkg/util/proto/document.go#L238. So it is handled the same way as `\r\ntype:\"object\", properties: ..` for the non-null case. The null case is always accepted in kube-openapi validation as far as I see, so nullable=true is implied.\r\n\r\nI have started a follow-up TODO list in the description. I would like to have e2e tests with CRDs for these cases.",
        "createdAt" : "2019-03-01T17:06:42Z",
        "updatedAt" : "2019-03-01T17:11:56Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      }
    ],
    "commit" : "5209f3af8d1e4a8c69e3274f96a2a012a3774cc5",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +64,68 @@\n\t\tswitch {\n\t\tcase len(p.Type) == 2 && (p.Type[0] == \"null\" || p.Type[1] == \"null\"):\n\t\t\t// https://github.com/kubernetes/kube-openapi/pull/143/files#diff-ce77fea74b9dd098045004410023e0c3R219\n\t\t\tp.Type = nil"
  }
]