[
  {
    "id" : "ea4874aa-171b-4235-b6be-7ecc09abd0f2",
    "prId" : 71192,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/71192#pullrequestreview-210457678",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ce9b7794-dbf1-4538-95d0-d8efb4dbab07",
        "parentId" : null,
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "this is not enough: if a version is renamed, none changed, the length stays the same. But we would have to update the spec.",
        "createdAt" : "2019-03-04T16:48:31Z",
        "updatedAt" : "2019-03-07T04:37:11Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "5b38f120-9697-423e-be26-a0982b303d7a",
        "parentId" : "ce9b7794-dbf1-4538-95d0-d8efb4dbab07",
        "authorId" : "695b6860-569c-4e63-a215-7342e2279a94",
        "body" : "fixed the condition for `anyChanged` and added a test",
        "createdAt" : "2019-03-05T01:47:21Z",
        "updatedAt" : "2019-03-07T04:37:11Z",
        "lastEditedBy" : "695b6860-569c-4e63-a215-7342e2279a94",
        "tags" : [
        ]
      }
    ],
    "commit" : "54b99413b2b58f50561b6fba20c47af979fec77e",
    "line" : 165,
    "diffHunk" : "@@ -1,1 +163,167 @@\t\t}\n\t}\n\tif !anyChanged && len(oldSpecs) == len(newSpecs) {\n\t\treturn nil\n\t}"
  },
  {
    "id" : "42794f15-b4e1-4a1a-ab06-0a885aa09fc5",
    "prId" : 71192,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/71192#pullrequestreview-211382190",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "764d1e36-28da-4afd-88b6-1bd2a42f64d3",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "if it was previously served and is no longer served, oldSpecs could contain stale versions, right? need to check if oldSpecs[v.Name] is set, and if so, delete it and set anyChanged = true.",
        "createdAt" : "2019-03-06T17:14:25Z",
        "updatedAt" : "2019-03-07T04:37:11Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "1093131a-3930-44df-9f8c-eff2dd7ceb73",
        "parentId" : "764d1e36-28da-4afd-88b6-1bd2a42f64d3",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "also, add a test that would have caught this (flip a previously served version to unserved and ensure it gets removed from oldSpecs)",
        "createdAt" : "2019-03-06T17:16:56Z",
        "updatedAt" : "2019-03-07T04:37:11Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "ff1248f2-3f05-4770-b60c-c71665724f5e",
        "parentId" : "764d1e36-28da-4afd-88b6-1bd2a42f64d3",
        "authorId" : "695b6860-569c-4e63-a215-7342e2279a94",
        "body" : "we check `len(oldSpecs) == len(newSpecs)` so it should be caught. will add a test for this",
        "createdAt" : "2019-03-06T17:53:08Z",
        "updatedAt" : "2019-03-07T04:37:11Z",
        "lastEditedBy" : "695b6860-569c-4e63-a215-7342e2279a94",
        "tags" : [
        ]
      },
      {
        "id" : "aa428efc-7861-4d0e-9f81-3dce867d8bb8",
        "parentId" : "764d1e36-28da-4afd-88b6-1bd2a42f64d3",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "> we check len(oldSpecs) == len(newSpecs) so it should be caught\r\n\r\n~~that would catch that it needed updating, but it would never be removed~~\r\n\r\nnevermind, newSpecs overrides at the end of the method",
        "createdAt" : "2019-03-06T17:56:33Z",
        "updatedAt" : "2019-03-07T04:37:11Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "54b99413b2b58f50561b6fba20c47af979fec77e",
    "line" : 153,
    "diffHunk" : "@@ -1,1 +151,155 @@\tanyChanged := false\n\tfor _, v := range crd.Spec.Versions {\n\t\tif !v.Served {\n\t\t\tcontinue\n\t\t}"
  },
  {
    "id" : "1159763d-dbd7-438e-b0e9-c536bdb78356",
    "prId" : 71192,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/71192#pullrequestreview-211382612",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c6e71120-e564-4dea-a108-3a19dd981b80",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "iterating over two maps produces an unstable order. does `mergeSpecs` require consistent order to produce stable output?",
        "createdAt" : "2019-03-06T17:18:10Z",
        "updatedAt" : "2019-03-07T04:37:11Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "5c5bb27e-b272-4f6b-9907-7f2338d4afa0",
        "parentId" : "c6e71120-e564-4dea-a108-3a19dd981b80",
        "authorId" : "695b6860-569c-4e63-a215-7342e2279a94",
        "body" : "no it doesn't. OpenAPI `Definitions` and `Paths` are maps and we assume no conflict in the keys (key comes from defined GVK)",
        "createdAt" : "2019-03-06T17:57:24Z",
        "updatedAt" : "2019-03-07T04:37:11Z",
        "lastEditedBy" : "695b6860-569c-4e63-a215-7342e2279a94",
        "tags" : [
        ]
      }
    ],
    "commit" : "54b99413b2b58f50561b6fba20c47af979fec77e",
    "line" : 180,
    "diffHunk" : "@@ -1,1 +178,182 @@\tfor _, versionSpecs := range c.crdSpecs {\n\t\tfor _, s := range versionSpecs {\n\t\t\tcrdSpecs = append(crdSpecs, s)\n\t\t}\n\t}"
  }
]