[
  {
    "id" : "21b1da02-cd14-4ac7-8add-4d9a8cf565b3",
    "prId" : 79604,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/79604#pullrequestreview-273287183",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5a663bb3-dcf7-4f25-b4fc-767b7bb41545",
        "parentId" : null,
        "authorId" : "695b6860-569c-4e63-a215-7342e2279a94",
        "body" : "put `v1` first? We aren't consistent in our code base. Similar problems in\r\n- pkg/apis/coordination/install/install.go\r\n- pkg/apis/admissionregistration/install/install.go\r\n- staging/src/k8s.io/kubectl/pkg/scheme/install.go\r\n\r\nedit: I'm not sure if it matters though. I tried locally and both the discovery doc and kubectl prefer v1",
        "createdAt" : "2019-08-08T21:06:54Z",
        "updatedAt" : "2019-08-16T17:15:10Z",
        "lastEditedBy" : "695b6860-569c-4e63-a215-7342e2279a94",
        "tags" : [
        ]
      },
      {
        "id" : "acf130bb-039d-4540-9b43-98b3cdea3ff2",
        "parentId" : "5a663bb3-dcf7-4f25-b4fc-767b7bb41545",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "This was to prefer encoding to v1beta1 for storage",
        "createdAt" : "2019-08-08T23:43:04Z",
        "updatedAt" : "2019-08-16T17:15:10Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "3cd2c8d9-0cfe-40b9-abd8-d6fa30b78f43",
        "parentId" : "5a663bb3-dcf7-4f25-b4fc-767b7bb41545",
        "authorId" : "695b6860-569c-4e63-a215-7342e2279a94",
        "body" : "I thought the storage version was controlled by `EncodeVersioner`, which we manually set v1beta1 for [CRD](https://github.com/kubernetes/kubernetes/blob/aecc1e829c54969c2c959bd9a7f374c3539d7980/cmd/kube-apiserver/app/apiextensions.go#L66). I see generally the storage version is inferred from the [Schema](https://github.com/kubernetes/kubernetes/blob/aecc1e829c54969c2c959bd9a7f374c3539d7980/staging/src/k8s.io/apiserver/pkg/server/storage/storage_factory.go#L271) and then gets fed to `EncodeVersioner`",
        "createdAt" : "2019-08-09T00:40:07Z",
        "updatedAt" : "2019-08-16T17:15:10Z",
        "lastEditedBy" : "695b6860-569c-4e63-a215-7342e2279a94",
        "tags" : [
        ]
      },
      {
        "id" : "c68c69ec-a749-4465-81ed-f595950d5194",
        "parentId" : "5a663bb3-dcf7-4f25-b4fc-767b7bb41545",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "discovery/kubectl are controlled by the priority set in apiservices. you're right that the encode versioner controls storage (and the etcd integration test verifies we're storing in the expected version).\r\n\r\nThis controls what version someone using this scheme would get if they asked the scheme to encode an internal version and didn't specify a target external version. Sticking with v1beta1 for the first release v1 is available is reasonable.",
        "createdAt" : "2019-08-09T03:25:36Z",
        "updatedAt" : "2019-08-16T17:15:10Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "4d08a08d-2b2d-4a28-a45c-ef8ca07c37e4",
        "parentId" : "5a663bb3-dcf7-4f25-b4fc-767b7bb41545",
        "authorId" : "695b6860-569c-4e63-a215-7342e2279a94",
        "body" : "Thanks for the explanation",
        "createdAt" : "2019-08-09T18:09:22Z",
        "updatedAt" : "2019-08-16T17:15:10Z",
        "lastEditedBy" : "695b6860-569c-4e63-a215-7342e2279a94",
        "tags" : [
        ]
      }
    ],
    "commit" : "aa05715c0ef01762f2349f49324489a84429e8a8",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +30,34 @@\tutilruntime.Must(v1beta1.AddToScheme(scheme))\n\tutilruntime.Must(v1.AddToScheme(scheme))\n\tutilruntime.Must(scheme.SetVersionPriority(v1beta1.SchemeGroupVersion, v1.SchemeGroupVersion))\n}"
  }
]