[
  {
    "id" : "93bf34f9-f102-4bd4-9853-a9881019bf6a",
    "prId" : 95423,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/95423#pullrequestreview-514859789",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "151c7226-4239-465e-8208-a9e7c43e7cb1",
        "parentId" : null,
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "this looks wrong. We have to drop non-nullable nulls in a step before defaulting. This normalization is independent from defaulting (following the KEP). Then this case here should not show up at all.",
        "createdAt" : "2020-10-19T13:12:35Z",
        "updatedAt" : "2020-11-06T03:49:50Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "11db29e0-ce75-4bc5-b8b2-81830f23f0a9",
        "parentId" : "151c7226-4239-465e-8208-a9e7c43e7cb1",
        "authorId" : "a139439a-9f9e-4518-b4f3-9c602d956c57",
        "body" : "Actually, the reason I do that is that we won't drop non-nullable nulls in lists and we'll default these.",
        "createdAt" : "2020-10-19T15:23:12Z",
        "updatedAt" : "2020-11-06T03:49:50Z",
        "lastEditedBy" : "a139439a-9f9e-4518-b4f3-9c602d956c57",
        "tags" : [
        ]
      },
      {
        "id" : "bc36e502-41a4-400d-ba69-f16d3b87a8bc",
        "parentId" : "151c7226-4239-465e-8208-a9e7c43e7cb1",
        "authorId" : "a139439a-9f9e-4518-b4f3-9c602d956c57",
        "body" : "Also, yeah, I haven't implemented the \"drop non-nullable nulls\" yet, that's coming, this is still wip :-)",
        "createdAt" : "2020-10-19T15:25:53Z",
        "updatedAt" : "2020-11-06T03:49:50Z",
        "lastEditedBy" : "a139439a-9f9e-4518-b4f3-9c602d956c57",
        "tags" : [
        ]
      },
      {
        "id" : "29fc7d90-6359-42d1-a1ba-c7e53688161f",
        "parentId" : "151c7226-4239-465e-8208-a9e7c43e7cb1",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : ":+1:\r\n\r\nWould add that here in the PR, not separately. Both steps are too related.",
        "createdAt" : "2020-10-22T09:17:11Z",
        "updatedAt" : "2020-11-06T03:49:50Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "e35f9e68-d8a2-4146-8168-263fafbb272a",
        "parentId" : "151c7226-4239-465e-8208-a9e7c43e7cb1",
        "authorId" : "a139439a-9f9e-4518-b4f3-9c602d956c57",
        "body" : "Yeah, I was planning on doing it in the same PR, that's why it's a wip. it's missing higher-level tests too.",
        "createdAt" : "2020-10-22T15:34:09Z",
        "updatedAt" : "2020-11-06T03:49:50Z",
        "lastEditedBy" : "a139439a-9f9e-4518-b4f3-9c602d956c57",
        "tags" : [
        ]
      }
    ],
    "commit" : "a5a3b52ccd0a102977c345c2d8e6f187079848d8",
    "line" : 22,
    "diffHunk" : "@@ -1,1 +43,47 @@\t\t\t\tcontinue\n\t\t\t}\n\t\t\tif _, found := x[k]; !found || isNonNullableNull(x[k], &prop) {\n\t\t\t\tx[k] = runtime.DeepCopyJSONValue(prop.Default.Object)\n\t\t\t}"
  },
  {
    "id" : "e47a3a5d-b0ed-4873-bb2a-7cfb3e9aa8ff",
    "prId" : 95423,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/95423#pullrequestreview-514521862",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ff1fc7b4-f2bb-4c94-81e1-7de8fc5556dd",
        "parentId" : null,
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "this case is interesting. Where would we drop these nulls if there is no default? Would we drop them? It's missing in the KEP!",
        "createdAt" : "2020-10-19T13:21:42Z",
        "updatedAt" : "2020-11-06T03:49:50Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "16dc8370-c7af-4419-b698-d1c506778009",
        "parentId" : "ff1fc7b4-f2bb-4c94-81e1-7de8fc5556dd",
        "authorId" : "a139439a-9f9e-4518-b4f3-9c602d956c57",
        "body" : "I don't think that's a different case. Whether we use a named property or an additional property shouldn't make a difference?",
        "createdAt" : "2020-10-19T15:23:53Z",
        "updatedAt" : "2020-11-06T03:49:50Z",
        "lastEditedBy" : "a139439a-9f9e-4518-b4f3-9c602d956c57",
        "tags" : [
        ]
      },
      {
        "id" : "b6efa475-5de9-4911-ab93-4adf3821ee55",
        "parentId" : "ff1fc7b4-f2bb-4c94-81e1-7de8fc5556dd",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "I agree that it is the same, but deserves a note in the KEP.",
        "createdAt" : "2020-10-22T09:16:13Z",
        "updatedAt" : "2020-11-06T03:49:50Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      }
    ],
    "commit" : "a5a3b52ccd0a102977c345c2d8e6f187079848d8",
    "line" : 35,
    "diffHunk" : "@@ -1,1 +53,57 @@\t\t\t\tif isNonNullableNull(x[k], s.AdditionalProperties.Structural) {\n\t\t\t\t\tx[k] = runtime.DeepCopyJSONValue(s.AdditionalProperties.Structural.Default.Object)\n\t\t\t\t}\n\t\t\t\tDefault(x[k], s.AdditionalProperties.Structural)\n\t\t\t}"
  },
  {
    "id" : "4877921f-9035-4740-a46c-ec21f41caf2e",
    "prId" : 95423,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/95423#pullrequestreview-524825222",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f0a94dec-3c64-493f-aaa9-fa7050b1dbd6",
        "parentId" : null,
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "you don't check that there is a default.",
        "createdAt" : "2020-10-19T13:22:16Z",
        "updatedAt" : "2020-11-06T03:49:50Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "344f5ff2-e07f-44b3-a2c4-17fc2fa02fac",
        "parentId" : "f0a94dec-3c64-493f-aaa9-fa7050b1dbd6",
        "authorId" : "a139439a-9f9e-4518-b4f3-9c602d956c57",
        "body" : "Does it matter? At that point, we know that `x[k]` is null, then that's going to reset it to null? That's a no-op.",
        "createdAt" : "2020-10-19T15:25:24Z",
        "updatedAt" : "2020-11-06T03:49:50Z",
        "lastEditedBy" : "a139439a-9f9e-4518-b4f3-9c602d956c57",
        "tags" : [
        ]
      },
      {
        "id" : "676c3752-1e9c-477c-bc14-f20048caeeb7",
        "parentId" : "f0a94dec-3c64-493f-aaa9-fa7050b1dbd6",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "don't we need to check if `s.AdditionalProperties.Structural` is non-nil so we don't panic? if so, add a unit test that would have caught this",
        "createdAt" : "2020-11-05T22:29:02Z",
        "updatedAt" : "2020-11-06T03:49:50Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "b8735eb9-1cc9-4e26-bd68-b55efa3d1a0b",
        "parentId" : "f0a94dec-3c64-493f-aaa9-fa7050b1dbd6",
        "authorId" : "a139439a-9f9e-4518-b4f3-9c602d956c57",
        "body" : "Yeah good point",
        "createdAt" : "2020-11-06T02:59:44Z",
        "updatedAt" : "2020-11-06T03:49:50Z",
        "lastEditedBy" : "a139439a-9f9e-4518-b4f3-9c602d956c57",
        "tags" : [
        ]
      }
    ],
    "commit" : "a5a3b52ccd0a102977c345c2d8e6f187079848d8",
    "line" : 34,
    "diffHunk" : "@@ -1,1 +52,56 @@\t\t\t} else if s.AdditionalProperties != nil {\n\t\t\t\tif isNonNullableNull(x[k], s.AdditionalProperties.Structural) {\n\t\t\t\t\tx[k] = runtime.DeepCopyJSONValue(s.AdditionalProperties.Structural.Default.Object)\n\t\t\t\t}\n\t\t\t\tDefault(x[k], s.AdditionalProperties.Structural)"
  },
  {
    "id" : "3f69f34b-c920-43df-aac0-eceb1ccc3003",
    "prId" : 95423,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/95423#pullrequestreview-511753711",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4af862f7-8df9-4de7-bd50-7010e9d969af",
        "parentId" : null,
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "you don't check that there is a default.",
        "createdAt" : "2020-10-19T13:22:25Z",
        "updatedAt" : "2020-11-06T03:49:50Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      }
    ],
    "commit" : "a5a3b52ccd0a102977c345c2d8e6f187079848d8",
    "line" : 44,
    "diffHunk" : "@@ -1,1 +60,64 @@\t\tfor i := range x {\n\t\t\tif isNonNullableNull(x[i], s.Items) {\n\t\t\t\tx[i] = runtime.DeepCopyJSONValue(s.Items.Default.Object)\n\t\t\t}\n\t\t\tDefault(x[i], s.Items)"
  },
  {
    "id" : "279a24f2-eba6-48b2-9113-a134dcaef3b5",
    "prId" : 95423,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/95423#pullrequestreview-522300395",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bf24b1e9-35c3-4d9a-a8c2-a34b2b2d12d6",
        "parentId" : null,
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "what about my previous comment that this case should never happen?",
        "createdAt" : "2020-11-03T09:03:14Z",
        "updatedAt" : "2020-11-06T03:49:50Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "890d6cf5-9bfa-451d-bfca-11d3ac7848e7",
        "parentId" : "bf24b1e9-35c3-4d9a-a8c2-a34b2b2d12d6",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "Nvmd. `PruneNulls` ignores these nulls. Maybe add a comment here: `// PruneNulls leaves exactly these non-nullable nulls with default in the object`",
        "createdAt" : "2020-11-03T09:11:51Z",
        "updatedAt" : "2020-11-06T03:49:50Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      }
    ],
    "commit" : "a5a3b52ccd0a102977c345c2d8e6f187079848d8",
    "line" : 22,
    "diffHunk" : "@@ -1,1 +43,47 @@\t\t\t\tcontinue\n\t\t\t}\n\t\t\tif _, found := x[k]; !found || isNonNullableNull(x[k], &prop) {\n\t\t\t\tx[k] = runtime.DeepCopyJSONValue(prop.Default.Object)\n\t\t\t}"
  }
]