[
  {
    "id" : "191e30dd-3559-4c5a-8a15-dd62d53078d3",
    "prId" : 70021,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/70021#pullrequestreview-169662985",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3dd5ae61-61d6-4cbd-bdad-bcf95d65b982",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "@tallclair do we have any data about how these defaults fared with the existing webhooks?",
        "createdAt" : "2018-10-26T14:55:35Z",
        "updatedAt" : "2018-11-09T22:38:32Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "00e81fcb-2ff2-4a1e-bda3-8e425ab776dc",
        "parentId" : "3dd5ae61-61d6-4cbd-bdad-bcf95d65b982",
        "authorId" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "body" : "The buffers have been bumped up a few times for better scalability, but I explicitly asked to shrink them for the dynamic backends. It's generally a tradeoff between apiserver performance, dropped events, and backend performance.\r\n\r\nMaybe @x13n or @loburm can chime in.",
        "createdAt" : "2018-10-26T23:03:31Z",
        "updatedAt" : "2018-11-09T22:38:32Z",
        "lastEditedBy" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "tags" : [
        ]
      },
      {
        "id" : "4519d6cb-2543-40d7-bd32-e4833b61046b",
        "parentId" : "3dd5ae61-61d6-4cbd-bdad-bcf95d65b982",
        "authorId" : "e2aaf386-2908-41e6-860b-bcb2cffa1cc7",
        "body" : "So each dynamic webhook backend will have a separate buffer? Don't we worry that multiple dynamic audit backends will lead to apiserver OOMing fairly quickly?",
        "createdAt" : "2018-10-29T10:07:26Z",
        "updatedAt" : "2018-11-09T22:38:32Z",
        "lastEditedBy" : "e2aaf386-2908-41e6-860b-bcb2cffa1cc7",
        "tags" : [
        ]
      },
      {
        "id" : "5913de61-2078-4351-973d-8c4a8519d3f2",
        "parentId" : "3dd5ae61-61d6-4cbd-bdad-bcf95d65b982",
        "authorId" : "5191e81d-8ec6-4a27-a48d-aba90da9ff08",
        "body" : "As it currently stands, each webhook would have its own buffer but they would share event pointers. After the buffers the event would be shallow copied and then have the policy enforced. Part of this work is being added in the second PR",
        "createdAt" : "2018-10-29T14:34:58Z",
        "updatedAt" : "2018-11-09T22:38:32Z",
        "lastEditedBy" : "5191e81d-8ec6-4a27-a48d-aba90da9ff08",
        "tags" : [
        ]
      },
      {
        "id" : "04c2221e-a172-438c-b0ba-2b517e78b635",
        "parentId" : "3dd5ae61-61d6-4cbd-bdad-bcf95d65b982",
        "authorId" : "e2aaf386-2908-41e6-860b-bcb2cffa1cc7",
        "body" : "Thanks for explaining! These defaults seem reasonable to me then.",
        "createdAt" : "2018-10-30T08:53:07Z",
        "updatedAt" : "2018-11-09T22:38:32Z",
        "lastEditedBy" : "e2aaf386-2908-41e6-860b-bcb2cffa1cc7",
        "tags" : [
        ]
      }
    ],
    "commit" : "54fd930d0e74635fc2a8318cc79d1b055d252d44",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +24,28 @@\nconst (\n\t// Default configuration values for ModeBatch when applied to a dynamic plugin\n\tdefaultBatchBufferSize    = 5000             // Buffer up to 5000 events before starting discarding.\n\tdefaultBatchMaxSize       = 400              // Only send up to 400 events at a time."
  }
]