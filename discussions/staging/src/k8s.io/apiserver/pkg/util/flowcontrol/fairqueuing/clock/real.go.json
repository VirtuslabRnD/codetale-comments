[
  {
    "id" : "528241ab-4ad3-4178-a663-5a37e9dbb820",
    "prId" : 103830,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/103830#pullrequestreview-714014569",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cef90830-1d63-4574-84b1-96e8c5766249",
        "parentId" : null,
        "authorId" : "3e6e337f-0beb-4609-abc3-11b8e8cf5688",
        "body" : "if we want to optimize the case for `d == 0`:\r\n```\r\nfunc (RealEventClock) EventAfterDuration(f EventFunc, d time.Duration) {\r\n   if d <= 0 {\r\n      go f(time.Now())\r\n      return\r\n   }\r\n  \r\n   ch := time.After(d)\r\n   go func() {\r\n\t\tt := <-ch\r\n\t\tf(t)\r\n   }()\r\n```\r\n\r\nand then `EventAfterTime` can become a simple passthrough\r\n```\r\nfunc (r RealEventClock) EventAfterTime(f EventFunc, t time.Time) {\r\n\tnow := time.Now()\r\n\td := t.Sub(now)\r\n\tr.EventAfterDuration(f, d)\r\n}\r\n```\r\n",
        "createdAt" : "2021-07-23T16:52:22Z",
        "updatedAt" : "2021-07-23T17:00:25Z",
        "lastEditedBy" : "3e6e337f-0beb-4609-abc3-11b8e8cf5688",
        "tags" : [
        ]
      },
      {
        "id" : "e9e17985-c860-4be5-8622-83a2324f466d",
        "parentId" : "cef90830-1d63-4574-84b1-96e8c5766249",
        "authorId" : "3e6e337f-0beb-4609-abc3-11b8e8cf5688",
        "body" : "I just realized it's a move, so you can ignore the above comment",
        "createdAt" : "2021-07-23T17:00:55Z",
        "updatedAt" : "2021-07-23T17:00:56Z",
        "lastEditedBy" : "3e6e337f-0beb-4609-abc3-11b8e8cf5688",
        "tags" : [
        ]
      },
      {
        "id" : "d469c1ec-fb8b-48a2-9fbd-a7740efea44f",
        "parentId" : "cef90830-1d63-4574-84b1-96e8c5766249",
        "authorId" : "7a59a326-58b3-4590-b70a-297d2e27daa5",
        "body" : "We can still improve the code.  I have made EventAfterTime a pure pass-through, the special case code was never needed.",
        "createdAt" : "2021-07-23T18:06:41Z",
        "updatedAt" : "2021-07-23T18:06:41Z",
        "lastEditedBy" : "7a59a326-58b3-4590-b70a-297d2e27daa5",
        "tags" : [
        ]
      }
    ],
    "commit" : "dcb298c9552de44e27ed52f5e2b58a0dd7cd8d54",
    "line" : 32,
    "diffHunk" : "@@ -1,1 +30,34 @@// EventAfterDuration schedules an EventFunc\nfunc (RealEventClock) EventAfterDuration(f EventFunc, d time.Duration) {\n\tch := time.After(d)\n\tgo func() {\n\t\tt := <-ch"
  },
  {
    "id" : "240ce283-b0bf-4961-9a00-ca4ffac6bb7f",
    "prId" : 103830,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/103830#pullrequestreview-714014569",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "024fdc1b-71e3-4a62-bddc-0b8ea211c53d",
        "parentId" : null,
        "authorId" : "3e6e337f-0beb-4609-abc3-11b8e8cf5688",
        "body" : "if we want to optimize the case for `d == 0`:\r\n```\r\nfunc (RealEventClock) EventAfterDuration(f EventFunc, d time.Duration) {\r\n   if d <= 0 {\r\n      go f(time.Now())\r\n      return\r\n   }\r\n  \r\n   ch := time.After(d)\r\n   go func() {\r\n\t\tt := <-ch\r\n\t\tf(t)\r\n   }()\r\n```\r\n\r\nand then `EventAfterTime` can become a simple passthrough\r\n```\r\nfunc (r RealEventClock) EventAfterTime(f EventFunc, t time.Time) {\r\n\tnow := time.Now()\r\n\td := t.Sub(now)\r\n\tr.EventAfterDuration(f, d)\r\n}\r\n```\r\n",
        "createdAt" : "2021-07-23T16:52:22Z",
        "updatedAt" : "2021-07-23T17:00:25Z",
        "lastEditedBy" : "3e6e337f-0beb-4609-abc3-11b8e8cf5688",
        "tags" : [
        ]
      },
      {
        "id" : "04671e03-5225-4bae-9eed-b56a397adf2c",
        "parentId" : "024fdc1b-71e3-4a62-bddc-0b8ea211c53d",
        "authorId" : "3e6e337f-0beb-4609-abc3-11b8e8cf5688",
        "body" : "I just realized it's a move, so you can ignore the above comment",
        "createdAt" : "2021-07-23T17:00:55Z",
        "updatedAt" : "2021-07-23T17:00:56Z",
        "lastEditedBy" : "3e6e337f-0beb-4609-abc3-11b8e8cf5688",
        "tags" : [
        ]
      },
      {
        "id" : "410bef48-468c-4dcc-9282-54e1b3484651",
        "parentId" : "024fdc1b-71e3-4a62-bddc-0b8ea211c53d",
        "authorId" : "7a59a326-58b3-4590-b70a-297d2e27daa5",
        "body" : "We can still improve the code.  I have made EventAfterTime a pure pass-through, the special case code was never needed.",
        "createdAt" : "2021-07-23T18:06:41Z",
        "updatedAt" : "2021-07-23T18:06:41Z",
        "lastEditedBy" : "7a59a326-58b3-4590-b70a-297d2e27daa5",
        "tags" : [
        ]
      }
    ],
    "commit" : "dcb298c9552de44e27ed52f5e2b58a0dd7cd8d54",
    "line" : 32,
    "diffHunk" : "@@ -1,1 +30,34 @@// EventAfterDuration schedules an EventFunc\nfunc (RealEventClock) EventAfterDuration(f EventFunc, d time.Duration) {\n\tch := time.After(d)\n\tgo func() {\n\t\tt := <-ch"
  }
]