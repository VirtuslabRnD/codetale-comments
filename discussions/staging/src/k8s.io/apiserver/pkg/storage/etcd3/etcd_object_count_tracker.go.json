[
  {
    "id" : "5767e7d1-c3f7-4d87-9428-65d4bde9a710",
    "prId" : 102998,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/102998#pullrequestreview-702439755",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "677a5033-67fc-4a1e-9554-ea66342b501a",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "the key passed in is *not* {group}.{resource}, it is the etcd prefix (e.g. `/registry/services/specs`)",
        "createdAt" : "2021-07-08T19:05:25Z",
        "updatedAt" : "2021-07-08T19:06:35Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "6faa744f-860e-4fba-b5d6-e1c0347b74b6",
        "parentId" : "677a5033-67fc-4a1e-9554-ea66342b501a",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "see https://github.com/kubernetes/kubernetes/blob/master/staging/src/k8s.io/apiserver/pkg/registry/generic/registry/store.go#L1427-L1438 ... the etcd prefix is passed into Count(), the resource is passed into the metrics function",
        "createdAt" : "2021-07-08T19:06:33Z",
        "updatedAt" : "2021-07-08T19:06:35Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "4f6cf5c5-520d-467d-b25a-aae9688641d0",
        "parentId" : "677a5033-67fc-4a1e-9554-ea66342b501a",
        "authorId" : "3e6e337f-0beb-4609-abc3-11b8e8cf5688",
        "body" : "my bad, i overlooked it. so we can revert it cc @wojtek-t ",
        "createdAt" : "2021-07-08T19:43:21Z",
        "updatedAt" : "2021-07-08T19:43:21Z",
        "lastEditedBy" : "3e6e337f-0beb-4609-abc3-11b8e8cf5688",
        "tags" : [
        ]
      },
      {
        "id" : "2acb7bdd-59bc-488d-b639-782d59f95d63",
        "parentId" : "677a5033-67fc-4a1e-9554-ea66342b501a",
        "authorId" : "3e6e337f-0beb-4609-abc3-11b8e8cf5688",
        "body" : "i think parsing the metrics registry is probably the best alternative, i don't think there is good way to get to the resource name from the prefix inside the decorator `Count` function. \r\n",
        "createdAt" : "2021-07-08T19:46:13Z",
        "updatedAt" : "2021-07-08T19:46:13Z",
        "lastEditedBy" : "3e6e337f-0beb-4609-abc3-11b8e8cf5688",
        "tags" : [
        ]
      }
    ],
    "commit" : "1002b0d163dd948334f10b0e25d0e91d253791e8",
    "line" : 49,
    "diffHunk" : "@@ -1,1 +47,51 @@}\n\nfunc (s *objectCountTracker) Count(key string) (int64, error) {\n\tcount, err := s.Interface.Count(key)\n\tif s.callback == nil {"
  }
]