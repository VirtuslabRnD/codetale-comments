[
  {
    "id" : "796fc374-587c-44ee-afd7-f00fdff926e1",
    "prId" : 70021,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/70021#pullrequestreview-172804618",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5ddfee96-43ce-4378-ac66-9788c2144325",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "this is just duplicating the logic in the enforceLevel function, and won't catch new fields showing up in audit events, unconsidered.\r\n\r\nI expected a test more like this:\r\n```go\r\nswitch tc.level {\r\ncase audit.LevelNone:\r\n\trequire.Nil(t, ev)\r\ncase audit.LevelMetadata:\r\n\texpected := &audit.Event{\r\n\t\tTypeMeta:                 originalEvent.TypeMeta,\r\n\t\tLevel:                    tc.level,\r\n\t\tAuditID:                  originalEvent.AuditID,\r\n\t\tStage:                    originalEvent.Stage,\r\n\t\tRequestURI:               originalEvent.RequestURI,\r\n\t\tVerb:                     originalEvent.Verb,\r\n\t\tUser:                     originalEvent.User,\r\n\t\tImpersonatedUser:         originalEvent.ImpersonatedUser,\r\n\t\tSourceIPs:                originalEvent.SourceIPs,\r\n\t\tUserAgent:                originalEvent.UserAgent,\r\n\t\tObjectRef:                originalEvent.ObjectRef,\r\n\t\tResponseStatus:           originalEvent.ResponseStatus,\r\n\t\tRequestReceivedTimestamp: originalEvent.RequestReceivedTimestamp,\r\n\t\tStageTimestamp:           originalEvent.StageTimestamp,\r\n\t\tAnnotations:              originalEvent.Annotations,\r\n\t\tRequestObject:            nil,\r\n\t\tResponseObject:           nil,\r\n\t}\r\n\trequire.Equal(t, expected, ev)\r\ncase audit.LevelRequest:\r\n\texpected := &audit.Event{\r\n\t\tTypeMeta:                 originalEvent.TypeMeta,\r\n\t\tLevel:                    tc.level,\r\n\t\tAuditID:                  originalEvent.AuditID,\r\n\t\tStage:                    originalEvent.Stage,\r\n\t\tRequestURI:               originalEvent.RequestURI,\r\n\t\tVerb:                     originalEvent.Verb,\r\n\t\tUser:                     originalEvent.User,\r\n\t\tImpersonatedUser:         originalEvent.ImpersonatedUser,\r\n\t\tSourceIPs:                originalEvent.SourceIPs,\r\n\t\tUserAgent:                originalEvent.UserAgent,\r\n\t\tObjectRef:                originalEvent.ObjectRef,\r\n\t\tResponseStatus:           originalEvent.ResponseStatus,\r\n\t\tRequestReceivedTimestamp: originalEvent.RequestReceivedTimestamp,\r\n\t\tStageTimestamp:           originalEvent.StageTimestamp,\r\n\t\tAnnotations:              originalEvent.Annotations,\r\n\t\tRequestObject:            originalEvent.RequestObject,\r\n\t\tResponseObject:           nil,\r\n\t}\r\n\trequire.Equal(t, expected, ev)\r\ncase audit.LevelRequestResponse:\r\n\texpected := originalEvent.DeepCopy()\r\n\texpected.Level = tc.level\r\n\trequire.Equal(t, expected, ev)\r\ndefault:\r\n\tt.Errorf(\"unknown level %q\", ev.Level)\r\n}\r\n```",
        "createdAt" : "2018-11-08T04:45:49Z",
        "updatedAt" : "2018-11-09T22:38:32Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "54fd930d0e74635fc2a8318cc79d1b055d252d44",
    "line" : 92,
    "diffHunk" : "@@ -1,1 +90,94 @@\t\t\t\tcase audit.LevelNone:\n\t\t\t\t\trequire.Nil(t, ev)\n\t\t\t\tcase audit.LevelMetadata:\n\t\t\t\t\texpected := &audit.Event{\n\t\t\t\t\t\tTypeMeta:                 e.TypeMeta,"
  }
]