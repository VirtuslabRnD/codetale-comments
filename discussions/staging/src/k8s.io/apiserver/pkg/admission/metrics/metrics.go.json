[
  {
    "id" : "be4b3dd2-fd93-4bdc-a7d5-242a3cbd1a04",
    "prId" : 101208,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/101208#pullrequestreview-682268262",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c3da827a-d3e7-4855-af05-d95a79277252",
        "parentId" : null,
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "hm, I'd expect a bucket right at 1s (that's the longest I think a well behaved webhook should be taking). The 5.0 bucket doesn't follow the pattern of the past increases, which are x5 or x4 each time. It might be useful to know the difference between 10s (terrible performance) and 20-29s (absolutely unacceptable). I don't think this is blocking, feel free to make a follow-up.",
        "createdAt" : "2021-06-11T23:31:49Z",
        "updatedAt" : "2021-06-11T23:31:49Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      }
    ],
    "commit" : "ae90e6b9a1f1e9e7704feeefa8723c15f2afa61e",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +47,51 @@var (\n\t// Use buckets ranging from 5 ms to 10 seconds (admission webhooks timeout at 30 seconds by default).\n\tlatencyBuckets       = []float64{0.005, 0.025, 0.1, 0.5, 2.5, 5.0, 10.0}\n\tlatencySummaryMaxAge = 5 * time.Hour\n"
  },
  {
    "id" : "b34241cc-787a-430a-bb7b-5874d145048a",
    "prId" : 101208,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/101208#pullrequestreview-683517342",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "608115e1-b77d-4143-a9e1-5851a3254249",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "how is a namespace label not a cardinality problem here? O(10,000) unique namespaces are envisioned in https://github.com/kubernetes/community/blob/master/sig-scalability/configs-and-limits/thresholds.md",
        "createdAt" : "2021-06-15T02:52:53Z",
        "updatedAt" : "2021-06-15T02:52:53Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "324f776a-f0ac-4c72-8781-e7e009ff49a3",
        "parentId" : "608115e1-b77d-4143-a9e1-5851a3254249",
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "10k namespaces would be an exceptional case which we can remedy by leveraging https://github.com/kubernetes/enhancements/issues/2305. It's also an existing concern with request metrics which have far greater potential issues for cardinality (which we can also sidestep by explicitly setting bounds for label values). ",
        "createdAt" : "2021-06-15T03:03:38Z",
        "updatedAt" : "2021-06-15T03:03:38Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      }
    ],
    "commit" : "ae90e6b9a1f1e9e7704feeefa8723c15f2afa61e",
    "line" : 16,
    "diffHunk" : "@@ -1,1 +127,131 @@\t// Each step is identified by a distinct type label value.\n\tstep := newMetricSet(\"step\",\n\t\t[]string{\"type\", \"operation\", \"rejected\", \"namespace\"},\n\t\t\"Admission sub-step %s, broken out for each operation and API resource and step type (validate or admit).\", true)\n"
  },
  {
    "id" : "2786e924-a2f6-4983-88e9-3c480b714428",
    "prId" : 81399,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/81399#pullrequestreview-281184033",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2354d7a8-b66f-40f0-bfaf-b89134bd0486",
        "parentId" : null,
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "caused by?\r\n\r\nwhich causes?",
        "createdAt" : "2019-08-29T01:55:43Z",
        "updatedAt" : "2019-08-29T22:30:48Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      }
    ],
    "commit" : "620f5f2c587971be50cb27bb2a2d35209b3dc058",
    "line" : 12,
    "diffHunk" : "@@ -1,1 +36,40 @@\n\t// WebhookRejectionCallingWebhookError identifies a calling webhook error which causes\n\t// a webhook admission to reject a request\n\tWebhookRejectionCallingWebhookError WebhookRejectionErrorType = \"calling_webhook_error\"\n\t// WebhookRejectionAPIServerInternalError identifies an apiserver internal error which"
  },
  {
    "id" : "aee9efa3-5d46-46c3-9a4e-cbc4af6ee6ad",
    "prId" : 81399,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/81399#pullrequestreview-281330463",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ed72ea3d-b795-47a5-9d7a-2ed1891ee22d",
        "parentId" : null,
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "Is rejection the right term? If the failure_policy is ignore, then some of these do not actually cause a rejection, right?",
        "createdAt" : "2019-08-29T01:58:27Z",
        "updatedAt" : "2019-08-29T22:30:48Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      },
      {
        "id" : "3165c244-22fc-4dd8-9b37-bceed236817f",
        "parentId" : "ed72ea3d-b795-47a5-9d7a-2ed1891ee22d",
        "authorId" : "695b6860-569c-4e63-a215-7342e2279a94",
        "body" : "I think it's fine, since this type is defined inside the metrics package to breakdown potential causes for webhook rejections. \r\n\r\nThere are API requests that trigger calling-webhook-error but get allowed given \"ignore\" failure policy, but the `webhook_rejection_count` metrics doesn't track those cases",
        "createdAt" : "2019-08-29T09:27:29Z",
        "updatedAt" : "2019-08-29T22:30:48Z",
        "lastEditedBy" : "695b6860-569c-4e63-a215-7342e2279a94",
        "tags" : [
        ]
      }
    ],
    "commit" : "620f5f2c587971be50cb27bb2a2d35209b3dc058",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +28,32 @@)\n\n// WebhookRejectionErrorType defines different error types that happen in a webhook rejection.\ntype WebhookRejectionErrorType string\n"
  },
  {
    "id" : "9b74850b-c528-4e87-be82-d4350c3794dd",
    "prId" : 72343,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/72343#pullrequestreview-195403639",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1a444a9b-ef41-4578-9121-f7e8bb2a77fe",
        "parentId" : null,
        "authorId" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "body" : "Add which k8s version these will be removed in here in the help string?",
        "createdAt" : "2019-01-22T21:20:49Z",
        "updatedAt" : "2019-01-22T21:20:49Z",
        "lastEditedBy" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "tags" : [
        ]
      },
      {
        "id" : "a745df6e-9a79-4277-a06c-cf82ae628af7",
        "parentId" : "1a444a9b-ef41-4578-9121-f7e8bb2a77fe",
        "authorId" : "a472aa4a-c4f7-4692-bc21-708257a1dacc",
        "body" : "This is consistent with the deprecation warning in other metrics we have deprecated.\r\nBut surely, we will announce the metrics migration/deprecation plan in release notes or in other ways.\r\ncc @brancz ",
        "createdAt" : "2019-01-23T01:35:08Z",
        "updatedAt" : "2019-01-23T01:35:08Z",
        "lastEditedBy" : "a472aa4a-c4f7-4692-bc21-708257a1dacc",
        "tags" : [
        ]
      },
      {
        "id" : "442d0b74-7c27-4c40-b7ca-68a7f0275dc5",
        "parentId" : "1a444a9b-ef41-4578-9121-f7e8bb2a77fe",
        "authorId" : "4108cff4-d61c-4717-862b-6c3be3b73be2",
        "body" : "1.14 the \"old\" metrics are deprecated and 1.15 is targeted for removal. Let's explicitly document this in the KEP.",
        "createdAt" : "2019-01-23T08:56:31Z",
        "updatedAt" : "2019-01-23T09:00:16Z",
        "lastEditedBy" : "4108cff4-d61c-4717-862b-6c3be3b73be2",
        "tags" : [
        ]
      }
    ],
    "commit" : "d9c57e74076ea8bacbba4628eb9c994c165270bf",
    "line" : 32,
    "diffHunk" : "@@ -1,1 +178,182 @@\t\t\t\tSubsystem: subsystem,\n\t\t\t\tName:      fmt.Sprintf(\"%s_admission_latencies_milliseconds_summary\", name),\n\t\t\t\tHelp:      fmt.Sprintf(\"(Deprecated) \"+helpTemplate, \"latency summary in milliseconds\"),\n\t\t\t\tMaxAge:    latencySummaryMaxAge,\n\t\t\t},"
  },
  {
    "id" : "03daa2f3-bc16-40b4-a7ce-d2fb2f9f0260",
    "prId" : 55938,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/55938#pullrequestreview-77428910",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "380702a6-994b-49d3-b708-3e58d24719ee",
        "parentId" : null,
        "authorId" : "c29e1906-5f0b-4d7b-af8b-d664805e8c8e",
        "body" : "Nice wrap. ",
        "createdAt" : "2017-11-17T13:13:05Z",
        "updatedAt" : "2017-11-20T14:32:41Z",
        "lastEditedBy" : "c29e1906-5f0b-4d7b-af8b-d664805e8c8e",
        "tags" : [
        ]
      }
    ],
    "commit" : "baba0c827bfddfdc56b69c88e19406966ef900a2",
    "line" : 56,
    "diffHunk" : "@@ -1,1 +68,72 @@\n// pluginHandlerWithMetrics decorates a admission handler with metrics.\ntype pluginHandlerWithMetrics struct {\n\tadmission.Interface\n\tobserver    ObserverFunc"
  }
]