[
  {
    "id" : "5dcb66c2-59da-4029-8307-c920ed197f01",
    "prId" : 77022,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/77022#pullrequestreview-230639563",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "77b0a3bd-d33e-4ae9-a789-b4016e9e56a8",
        "parentId" : null,
        "authorId" : "bc182326-9017-48d6-8ee0-4609046c1366",
        "body" : "what if we pass a status w/ \"200\" status.Code __and__ \"success\" status.Status? do we need to override the status to failure/unknown?",
        "createdAt" : "2019-04-25T12:57:39Z",
        "updatedAt" : "2019-04-25T13:15:00Z",
        "lastEditedBy" : "bc182326-9017-48d6-8ee0-4609046c1366",
        "tags" : [
        ]
      },
      {
        "id" : "0aa3c691-a518-4aae-836d-1f6825f4ceb9",
        "parentId" : "77b0a3bd-d33e-4ae9-a789-b4016e9e56a8",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "I'll update these cases:\r\n* if it's set to \"Success\", that's nonsensical, so we should override.\r\n* if it's set to \"\", we can set to \"Failure\" (that happens later in the stack as well, but it doesn't hurt to set it here as well where we have more context)\r\n\r\nif it's set to something other than \"Success\" or \"Failure\", I'm really hesitant to mess with it",
        "createdAt" : "2019-04-25T13:07:36Z",
        "updatedAt" : "2019-04-25T13:15:00Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "7947d639-705c-43c8-970d-4efcdf85f47d",
        "parentId" : "77b0a3bd-d33e-4ae9-a789-b4016e9e56a8",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "updated",
        "createdAt" : "2019-04-25T13:14:56Z",
        "updatedAt" : "2019-04-25T13:15:00Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "50076439fccb4ed6cf7b59f6f4add279ee7751aa",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +36,40 @@\t// Make sure we don't return < 400 status codes along with a rejection\n\tif result.Code < http.StatusBadRequest {\n\t\tresult.Code = http.StatusBadRequest\n\t}\n\t// Make sure we don't return \"\" or \"Success\" status along with a rejection"
  },
  {
    "id" : "08f302b5-9cd3-4f23-90b3-4aee84e6cc2e",
    "prId" : 77022,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/77022#pullrequestreview-230643576",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6c009129-9247-458a-b050-4a9ef7d34c34",
        "parentId" : null,
        "authorId" : "bc182326-9017-48d6-8ee0-4609046c1366",
        "body" : "might be a stupid question: can the webhook return a status.Status w/ other random string \"FooBarABC\"?",
        "createdAt" : "2019-04-25T13:20:14Z",
        "updatedAt" : "2019-04-25T13:20:14Z",
        "lastEditedBy" : "bc182326-9017-48d6-8ee0-4609046c1366",
        "tags" : [
        ]
      },
      {
        "id" : "19ab2cfa-62e9-481d-b72c-bd9eaeb7dc4d",
        "parentId" : "6c009129-9247-458a-b050-4a9ef7d34c34",
        "authorId" : "bc182326-9017-48d6-8ee0-4609046c1366",
        "body" : "> if it's set to something other than \"Success\" or \"Failure\", I'm really hesitant to mess with it\r\n\r\noh i missed it. but it seems that a webhook can really fill any content to status ðŸ¤ª",
        "createdAt" : "2019-04-25T13:22:08Z",
        "updatedAt" : "2019-04-25T13:24:52Z",
        "lastEditedBy" : "bc182326-9017-48d6-8ee0-4609046c1366",
        "tags" : [
        ]
      }
    ],
    "commit" : "50076439fccb4ed6cf7b59f6f4add279ee7751aa",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +39,43 @@\t}\n\t// Make sure we don't return \"\" or \"Success\" status along with a rejection\n\tif result.Status == \"\" || result.Status == metav1.StatusSuccess {\n\t\tresult.Status = metav1.StatusFailure\n\t}"
  },
  {
    "id" : "3b1a790c-4fcb-44c6-bdda-a0abcb59c976",
    "prId" : 77022,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/77022#pullrequestreview-230987380",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8a358d0b-5421-4268-ab29-51dc473234d5",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "We talked about switching this to a 500 in the api-machinery call today, but the more I consider this, I think that would be misleading to the end user. The reason their request was rejected was because their request was judged to be bad, *not* because the server had some error.\r\n\r\nI see this as akin to what we do here:\r\nhttps://github.com/kubernetes/kubernetes/blob/7289c1e97aab6a1a81f78f3b9967314625afcdc8/staging/src/k8s.io/apiserver/pkg/endpoints/handlers/responsewriters/writers.go#L119-L126\r\n\r\nif we encounter a negotiation error in the process of trying to write an error response, we don't switch to a 500, we preserve the original error code",
        "createdAt" : "2019-04-26T03:25:34Z",
        "updatedAt" : "2019-04-26T03:25:34Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "f560f335-535a-4be7-b37c-df975b8f3f8b",
        "parentId" : "8a358d0b-5421-4268-ab29-51dc473234d5",
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "I personally find that argument compelling.",
        "createdAt" : "2019-04-26T05:48:29Z",
        "updatedAt" : "2019-04-26T05:48:30Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      }
    ],
    "commit" : "50076439fccb4ed6cf7b59f6f4add279ee7751aa",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +36,40 @@\t// Make sure we don't return < 400 status codes along with a rejection\n\tif result.Code < http.StatusBadRequest {\n\t\tresult.Code = http.StatusBadRequest\n\t}\n\t// Make sure we don't return \"\" or \"Success\" status along with a rejection"
  }
]