[
  {
    "id" : "cdc9031c-e766-4b9b-942b-cb4c1a32c18f",
    "prId" : 94942,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/94942#pullrequestreview-690899049",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3a91f65d-2aad-45bb-8e5d-80dfd78c131b",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "is a scheme allowed in this URL? if unspecified, what does it default to? does it use TLS or not? if it does, what TLS configuration is used? are things like `unix://...` supported?",
        "createdAt" : "2021-06-18T15:42:59Z",
        "updatedAt" : "2021-06-18T15:50:03Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "3377f3f9-6bae-434c-b4d2-279609a06e40",
        "parentId" : "3a91f65d-2aad-45bb-8e5d-80dfd78c131b",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "also, update doc for external config type with this info",
        "createdAt" : "2021-06-18T15:43:47Z",
        "updatedAt" : "2021-06-18T15:43:47Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "c16f6f13-89dc-4fc8-bda9-8d3117befb4c",
        "parentId" : "3a91f65d-2aad-45bb-8e5d-80dfd78c131b",
        "authorId" : "d2b16581-e7e9-48b8-9f76-6f6bcb9ec300",
        "body" : "It must adhere to https://github.com/grpc/grpc/blob/master/doc/naming.md, which allows unix, dns, and unix-abstract schemes.  It defaults to dns as described in the grpc naming doc.  Currently, we do not support TLS, but we could add that in the future.\r\n\r\nI updated the description to include those details.\r\n\r\nCan you point me to where the docs for external config types is?  I didn't see any other docs in k/k for other apiserver config types",
        "createdAt" : "2021-06-18T18:47:22Z",
        "updatedAt" : "2021-06-18T18:47:22Z",
        "lastEditedBy" : "d2b16581-e7e9-48b8-9f76-6f6bcb9ec300",
        "tags" : [
        ]
      },
      {
        "id" : "fab93af7-2034-4e49-8c60-81ffd3707c88",
        "parentId" : "3a91f65d-2aad-45bb-8e5d-80dfd78c131b",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "I just meant the serialized file - staging/src/k8s.io/apiserver/pkg/apis/apiserver/v1alpha1/types.go\r\n\r\nThat's typically what people look at since that matches the config file they're writing (e.g. https://pkg.go.dev/k8s.io/apiserver/pkg/apis/apiserver/v1alpha1#EgressSelectorConfiguration)",
        "createdAt" : "2021-06-23T05:25:43Z",
        "updatedAt" : "2021-06-23T05:25:43Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "3fa9bab0-3649-43e4-99b9-4e79b5887378",
        "parentId" : "3a91f65d-2aad-45bb-8e5d-80dfd78c131b",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "> It must adhere to https://github.com/grpc/grpc/blob/master/doc/naming.md, which allows unix, dns, and unix-abstract schemes. It defaults to dns as described in the grpc naming doc. Currently, we do not support TLS, but we could add that in the future.\r\n\r\nshould that be checked for in `validateEndpoint`? if something that parses as a URL but is malformed as a trace exporter endpoint is specified, does kube-apiserver fail to start or does it run in a degraded way?",
        "createdAt" : "2021-06-23T05:31:17Z",
        "updatedAt" : "2021-06-23T05:31:24Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "f87e46e2-e8bb-4e09-af47-be1c7a378857",
        "parentId" : "3a91f65d-2aad-45bb-8e5d-80dfd78c131b",
        "authorId" : "a531e2c7-8431-4d2a-aa6f-1fdc4b357779",
        "body" : "Validation already happens when the connection tries to be established from what I can tell. But we could provide a more clear error log msg with a `validateEndpoint` helper function. And in either case we should not fail or be degraded if tracing is misconfigured, agreed üëç ",
        "createdAt" : "2021-06-23T08:43:15Z",
        "updatedAt" : "2021-06-23T08:43:16Z",
        "lastEditedBy" : "a531e2c7-8431-4d2a-aa6f-1fdc4b357779",
        "tags" : [
        ]
      },
      {
        "id" : "5db3f725-258e-45ed-8a9a-efa39a69a355",
        "parentId" : "3a91f65d-2aad-45bb-8e5d-80dfd78c131b",
        "authorId" : "d2b16581-e7e9-48b8-9f76-6f6bcb9ec300",
        "body" : "If the endpoint isn't valid (or not reachable), opentelemetry will periodically try to reconnect.  While disconnected, it will buffer (by default up to ~2k) spans, and then drop spans after the buffer is full.  Other than using memory for buffering spans, there won't be any degraded behavior since sending spans is async from the serving path.\r\n\r\nI added some additional validation on the scheme.  Mostly, this will catch users that try and specify http(s) as the scheme.",
        "createdAt" : "2021-06-23T15:38:14Z",
        "updatedAt" : "2021-06-23T15:38:14Z",
        "lastEditedBy" : "d2b16581-e7e9-48b8-9f76-6f6bcb9ec300",
        "tags" : [
        ]
      },
      {
        "id" : "15834a57-2903-4cae-9868-76b127f9bd58",
        "parentId" : "3a91f65d-2aad-45bb-8e5d-80dfd78c131b",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "sounds good, those seem like likely errors it's good to catch early",
        "createdAt" : "2021-06-23T16:31:05Z",
        "updatedAt" : "2021-06-23T16:31:05Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "e4d060b8-5d98-4ae2-a348-3514408c8f38",
        "parentId" : "3a91f65d-2aad-45bb-8e5d-80dfd78c131b",
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "Yeah I agree with @liggitt, let's catch this at boot rather than at runtime.",
        "createdAt" : "2021-06-23T16:33:29Z",
        "updatedAt" : "2021-06-23T16:33:29Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      },
      {
        "id" : "711d50ce-c6f0-49b4-a8b7-46315b520c76",
        "parentId" : "3a91f65d-2aad-45bb-8e5d-80dfd78c131b",
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "or CRD load time or whatever that point is..",
        "createdAt" : "2021-06-23T16:34:33Z",
        "updatedAt" : "2021-06-23T16:34:33Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      }
    ],
    "commit" : "79550ed40c67a70534c1cb697e1fb7e7dbf96335",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +159,163 @@\t// The APIServer uses the egressType ControlPlane when sending data to the collector.\n\t// The syntax is defined in https://github.com/grpc/grpc/blob/master/doc/naming.md.\n\t// Defaults to the otlp grpc default, localhost:4317\n\t// The connection is insecure, and does not currently support TLS.\n\tEndpoint *string"
  },
  {
    "id" : "94b5c2b8-af37-4e5e-86e0-592a8f032205",
    "prId" : 87179,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/87179#pullrequestreview-360727646",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f507038c-7007-4a26-aa78-c0d70052620a",
        "parentId" : null,
        "authorId" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "body" : "Can we mention that GRPC+TCP is not supported at the moment?",
        "createdAt" : "2020-02-18T23:40:57Z",
        "updatedAt" : "2020-02-20T20:46:07Z",
        "lastEditedBy" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "tags" : [
        ]
      }
    ],
    "commit" : "d798ccbba166449971c8579dce57870abec9131b",
    "line" : 34,
    "diffHunk" : "@@ -1,1 +96,100 @@// Transport defines the transport configurations we use to dial to the konnectivity server\ntype Transport struct {\n\t// TCP is the TCP configuration for communicating with the konnectivity server via TCP\n\t// ProxyProtocol of GRPC is not supported with TCP transport at the moment\n\t// Requires at least one of TCP or UDS to be set"
  },
  {
    "id" : "539d03b1-7f35-4691-ab0c-039c57c5023e",
    "prId" : 78543,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/78543#pullrequestreview-269905352",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "50e8af67-1b51-45f9-9235-9ccda296ab57",
        "parentId" : null,
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "Can we lowercase them?\r\n\r\nInstead of Master/Cluster, how about control-plane-environment/nodes? Or something along those lines?",
        "createdAt" : "2019-07-31T23:17:43Z",
        "updatedAt" : "2019-08-07T06:10:31Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      },
      {
        "id" : "46c11971-9b61-4bb3-997a-727ae8bc437c",
        "parentId" : "50e8af67-1b51-45f9-9235-9ccda296ab57",
        "authorId" : "7aca96c2-45d7-4567-99be-0323d7556c55",
        "body" : "I tolower() on consumption so case is mostly irrelevant.",
        "createdAt" : "2019-08-01T22:11:42Z",
        "updatedAt" : "2019-08-07T06:10:31Z",
        "lastEditedBy" : "7aca96c2-45d7-4567-99be-0323d7556c55",
        "tags" : [
        ]
      },
      {
        "id" : "28cddc66-814b-459d-8fe9-be2a6c10c2f9",
        "parentId" : "50e8af67-1b51-45f9-9235-9ccda296ab57",
        "authorId" : "7aca96c2-45d7-4567-99be-0323d7556c55",
        "body" : "These names were specified in the KEP. (https://github.com/kubernetes/enhancements/blob/master/keps/sig-api-machinery/20190226-network-proxy.md#kubernetes-api-server-outbound-requests) Not sure how we feel about modifying what we specified there without reflecting it in the KEP.",
        "createdAt" : "2019-08-01T22:14:06Z",
        "updatedAt" : "2019-08-07T06:10:31Z",
        "lastEditedBy" : "7aca96c2-45d7-4567-99be-0323d7556c55",
        "tags" : [
        ]
      }
    ],
    "commit" : "ebb65c5f4c51340f42c260cf00bde8629ed68d74",
    "line" : 18,
    "diffHunk" : "@@ -1,1 +63,67 @@type EgressSelection struct {\n\t// Name is the name of the egress selection.\n\t// Currently supported values are \"Master\", \"Etcd\" and \"Cluster\"\n\tName string\n"
  }
]