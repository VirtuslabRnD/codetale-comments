[
  {
    "id" : "a2ec7d28-e002-4d3a-9388-fcf162998279",
    "prId" : 70556,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/70556#pullrequestreview-170919327",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c82b58be-a83a-4abe-bb66-4153398015ee",
        "parentId" : null,
        "authorId" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "body" : "Why did these indices change?",
        "createdAt" : "2018-11-01T22:21:52Z",
        "updatedAt" : "2018-11-02T00:03:08Z",
        "lastEditedBy" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "tags" : [
        ]
      },
      {
        "id" : "0baf0275-fbd0-4c70-a934-62539d6ef46a",
        "parentId" : "c82b58be-a83a-4abe-bb66-4153398015ee",
        "authorId" : "5191e81d-8ec6-4a27-a48d-aba90da9ff08",
        "body" : "So as the test stands when you save the events to the sink list you are just saving the pointer, that event goes on to be built up in the handler. The result is you have two pointers to the same final event. These tests were passing because the first event was changed to the `ResponseComplete` stage event, which is what these tests intended on targeting. ",
        "createdAt" : "2018-11-01T22:32:10Z",
        "updatedAt" : "2018-11-02T00:03:08Z",
        "lastEditedBy" : "5191e81d-8ec6-4a27-a48d-aba90da9ff08",
        "tags" : [
        ]
      },
      {
        "id" : "f6ab5ca3-c302-48fe-a19b-6c435dc13f86",
        "parentId" : "c82b58be-a83a-4abe-bb66-4153398015ee",
        "authorId" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "body" : "Got it, thanks! Should we add a check that verifies the event is the expected stage?",
        "createdAt" : "2018-11-01T22:48:51Z",
        "updatedAt" : "2018-11-02T00:03:08Z",
        "lastEditedBy" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "tags" : [
        ]
      },
      {
        "id" : "655f1055-730c-44ab-860e-44b6bac1f311",
        "parentId" : "c82b58be-a83a-4abe-bb66-4153398015ee",
        "authorId" : "5191e81d-8ec6-4a27-a48d-aba90da9ff08",
        "body" : "yep good idea",
        "createdAt" : "2018-11-01T22:50:35Z",
        "updatedAt" : "2018-11-02T00:03:08Z",
        "lastEditedBy" : "5191e81d-8ec6-4a27-a48d-aba90da9ff08",
        "tags" : [
        ]
      },
      {
        "id" : "027d4114-4f7c-4eef-a5f9-4470c48a46f6",
        "parentId" : "c82b58be-a83a-4abe-bb66-4153398015ee",
        "authorId" : "5191e81d-8ec6-4a27-a48d-aba90da9ff08",
        "body" : "ok updated, went the composable route",
        "createdAt" : "2018-11-01T23:05:37Z",
        "updatedAt" : "2018-11-02T00:03:08Z",
        "lastEditedBy" : "5191e81d-8ec6-4a27-a48d-aba90da9ff08",
        "tags" : [
        ]
      }
    ],
    "commit" : "5a84453e4eaab610e2af5346b948091a409327e2",
    "line" : 58,
    "diffHunk" : "@@ -1,1 +163,167 @@\t\t\t2,\n\t\t\t[]eventCheck{\n\t\t\t\tnoRequestBody(1),\n\t\t\t\tresponseBodyMatches(1, `{.*\"name\":\"c\".*}`),\n\t\t\t\texpectedStages(auditinternal.StageRequestReceived, auditinternal.StageResponseComplete),"
  },
  {
    "id" : "9c96ff69-27ae-4996-8f4e-ebc73d13916d",
    "prId" : 45766,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/45766#pullrequestreview-38770167",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c3197944-cccc-4325-a4b8-9758a9ec25ab",
        "parentId" : null,
        "authorId" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "body" : "nit: you can just create the server before your `for` loop, and then `test.req` doesn't need to be a function. A server should be able to handle auditing multiple requests :)",
        "createdAt" : "2017-05-17T17:19:47Z",
        "updatedAt" : "2017-05-23T09:23:09Z",
        "lastEditedBy" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "tags" : [
        ]
      },
      {
        "id" : "e77ac2db-160c-4ae3-8e07-697080f4b91a",
        "parentId" : "c3197944-cccc-4325-a4b8-9758a9ec25ab",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "had the impression this test framework for endpoint testing is pretty fragile and does fake plenty of stuff. Not sure I want to risk any side-effects.",
        "createdAt" : "2017-05-17T19:45:05Z",
        "updatedAt" : "2017-05-23T09:23:09Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "3b2de89b-b28b-473b-8d78-51dba5cfbebd",
        "parentId" : "c3197944-cccc-4325-a4b8-9758a9ec25ab",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "It wouldn't harm to have real integration tests in addition, this is really something between unit and integration.",
        "createdAt" : "2017-05-17T19:48:28Z",
        "updatedAt" : "2017-05-23T09:23:09Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      }
    ],
    "commit" : "9fdc36a47ada0bc34ee53b68edd085d368ed9012",
    "line" : 275,
    "diffHunk" : "@@ -1,1 +273,277 @@\t\t}, admissionControl, selfLinker, sink)\n\n\t\tserver := httptest.NewServer(handler)\n\t\tdefer server.Close()\n\t\tclient := http.Client{Timeout: 2 * time.Second}"
  }
]