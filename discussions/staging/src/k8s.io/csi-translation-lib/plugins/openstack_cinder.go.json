[
  {
    "id" : "050ca405-ce7d-4b8b-b80b-3f797c831a68",
    "prId" : 99367,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/99367#pullrequestreview-597364885",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "481fea4d-b3d7-4701-a087-dbcc5d1ee0c4",
        "parentId" : null,
        "authorId" : "d10fef96-5a18-44e7-b23e-735de7561af7",
        "body" : "Can you add a unit test in the intree_volume_test `TestTranslateTopologyFromCSIToInTree` to make sure the translation is as expected?\r\nI am less familiar with Cinder, does cinder not have a region topology label at all?",
        "createdAt" : "2021-02-23T18:43:51Z",
        "updatedAt" : "2021-02-24T13:15:24Z",
        "lastEditedBy" : "d10fef96-5a18-44e7-b23e-735de7561af7",
        "tags" : [
        ]
      },
      {
        "id" : "50ae607f-344a-4466-a99c-cc1a7f148009",
        "parentId" : "481fea4d-b3d7-4701-a087-dbcc5d1ee0c4",
        "authorId" : "d10fef96-5a18-44e7-b23e-735de7561af7",
        "body" : "Oh sorry, I saw the PR description now. I think if there is absolutely no way we can retrieve the info from the CSI PV object, then I think it is better that we double check with OpenStack team to see if a missing region topology label is okay. Because when the label admission controller is removed, this will be a regression from user perspective. @msau42 for any other thoughts.",
        "createdAt" : "2021-02-23T18:52:36Z",
        "updatedAt" : "2021-02-24T13:15:24Z",
        "lastEditedBy" : "d10fef96-5a18-44e7-b23e-735de7561af7",
        "tags" : [
        ]
      },
      {
        "id" : "fb38d37e-3637-4b48-b363-89e11bc22737",
        "parentId" : "481fea4d-b3d7-4701-a087-dbcc5d1ee0c4",
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "Yes it has region label.",
        "createdAt" : "2021-02-23T19:15:04Z",
        "updatedAt" : "2021-02-24T13:15:24Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      },
      {
        "id" : "a6dd81ad-af2c-4c00-a055-1e738a3960a4",
        "parentId" : "481fea4d-b3d7-4701-a087-dbcc5d1ee0c4",
        "authorId" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "body" : "For the other clouds, region is also just for labeling, so not having it will still function from a Kubernetes perspective. The only issue is if users were depending on that region label for other purposes.\r\n\r\nThis could potentially be addressed by deploying an admission webhook with the CSI driver or having the CSI driver return region as part of the topology.",
        "createdAt" : "2021-02-23T21:42:31Z",
        "updatedAt" : "2021-02-24T13:15:24Z",
        "lastEditedBy" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "tags" : [
        ]
      },
      {
        "id" : "1878481f-dbe9-499f-9735-9cd55c9be248",
        "parentId" : "481fea4d-b3d7-4701-a087-dbcc5d1ee0c4",
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "Added unit test as suggested, however, it's basically the same as `regionParser is missing and only zone labels get generated`, only with Cinder labels.",
        "createdAt" : "2021-02-24T11:13:32Z",
        "updatedAt" : "2021-02-24T13:15:24Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      }
    ],
    "commit" : "3b8159607df6f833db85fc435068284a2a1900ce",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +147,151 @@\t// translate CSI topology to In-tree topology for rollback compatibility.\n\t// It is not possible to guess Cinder Region from the Zone, therefore leave it empty.\n\tif err := translateTopologyFromCSIToInTree(pv, CinderTopologyKey, nil); err != nil {\n\t\treturn nil, fmt.Errorf(\"failed to translate topology. PV:%+v. Error:%v\", *pv, err)\n\t}"
  }
]