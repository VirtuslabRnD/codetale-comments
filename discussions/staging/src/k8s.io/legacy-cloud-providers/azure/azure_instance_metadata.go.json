[
  {
    "id" : "7eb3302b-1f12-4b2c-8b11-b03553ead0ab",
    "prId" : 100690,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/100690#pullrequestreview-630924265",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d0074c67-4e22-42f3-99e4-2aa0ef2aed35",
        "parentId" : null,
        "authorId" : "6dd71efb-88b1-4bb0-b30a-0df658362f14",
        "body" : "This is called `PublicIPMetadata` but field is named `privateIpAddress`, is that expected?",
        "createdAt" : "2021-04-07T17:54:39Z",
        "updatedAt" : "2021-04-07T18:14:50Z",
        "lastEditedBy" : "6dd71efb-88b1-4bb0-b30a-0df658362f14",
        "tags" : [
        ]
      },
      {
        "id" : "1436c80a-77d9-47d1-8dfa-d921e3fcc945",
        "parentId" : "d0074c67-4e22-42f3-99e4-2aa0ef2aed35",
        "authorId" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "body" : "yes, this is expected from the API definition",
        "createdAt" : "2021-04-08T02:17:21Z",
        "updatedAt" : "2021-04-08T02:17:21Z",
        "lastEditedBy" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "tags" : [
        ]
      }
    ],
    "commit" : "85daff0442b5afff6b332538cf81c62e38bf76bb",
    "line" : 29,
    "diffHunk" : "@@ -1,1 +95,99 @@type PublicIPMetadata struct {\n\tFrontendIPAddress string `json:\"frontendIpAddress,omitempty\"`\n\tPrivateIPAddress  string `json:\"privateIpAddress,omitempty\"`\n}\n"
  },
  {
    "id" : "b9f72973-df5c-4e01-8db7-bf918d014c2a",
    "prId" : 100690,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/100690#pullrequestreview-630924541",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e580c7be-a3de-4635-bbe5-8da7abf68436",
        "parentId" : null,
        "authorId" : "6dd71efb-88b1-4bb0-b30a-0df658362f14",
        "body" : "This could probably use some unit testing, but will defer to azure leads on it",
        "createdAt" : "2021-04-07T17:56:07Z",
        "updatedAt" : "2021-04-07T18:14:51Z",
        "lastEditedBy" : "6dd71efb-88b1-4bb0-b30a-0df658362f14",
        "tags" : [
        ]
      },
      {
        "id" : "f78ba4a3-f149-49b6-87fb-85e7ddcb0110",
        "parentId" : "e580c7be-a3de-4635-bbe5-8da7abf68436",
        "authorId" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "body" : "yes, it's already part of unit tests for public interfaces",
        "createdAt" : "2021-04-08T02:18:05Z",
        "updatedAt" : "2021-04-08T02:18:06Z",
        "lastEditedBy" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "tags" : [
        ]
      }
    ],
    "commit" : "85daff0442b5afff6b332538cf81c62e38bf76bb",
    "line" : 69,
    "diffHunk" : "@@ -1,1 +129,133 @@}\n\nfunc (ims *InstanceMetadataService) getMetadata(key string) (interface{}, error) {\n\tinstanceMetadata, err := ims.getInstanceMetadata(key)\n\tif err != nil {"
  },
  {
    "id" : "18ada8e5-1e27-4530-ab4e-55e5a26be24c",
    "prId" : 100690,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/100690#pullrequestreview-644945890",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "25eef84e-36d2-42a7-883e-c82282468e8c",
        "parentId" : null,
        "authorId" : "6dd71efb-88b1-4bb0-b30a-0df658362f14",
        "body" : "I'm not super familiar with Azure APIs, but appending an arbitrary IP to the network interface returned from instance metadata response seems a little odd. Is this a common practice? ",
        "createdAt" : "2021-04-07T18:14:41Z",
        "updatedAt" : "2021-04-07T18:14:51Z",
        "lastEditedBy" : "6dd71efb-88b1-4bb0-b30a-0df658362f14",
        "tags" : [
        ]
      },
      {
        "id" : "d1e81f18-edb2-4248-845f-9d398f89cf51",
        "parentId" : "25eef84e-36d2-42a7-883e-c82282468e8c",
        "authorId" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "body" : "it's not an arbitrary IP. The first IP of returned data is already the primary IP address, which would be used as Node's internal IP. so, the logic here is to find its matching public IP ",
        "createdAt" : "2021-04-08T02:19:53Z",
        "updatedAt" : "2021-04-08T02:19:54Z",
        "lastEditedBy" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "tags" : [
        ]
      },
      {
        "id" : "62a3ef62-0151-4037-a087-0781f49e19e3",
        "parentId" : "25eef84e-36d2-42a7-883e-c82282468e8c",
        "authorId" : "6dd71efb-88b1-4bb0-b30a-0df658362f14",
        "body" : "I see, but we're still merging the response from load balancer metadata into instance metadata right? Is that a common practice?",
        "createdAt" : "2021-04-26T17:37:52Z",
        "updatedAt" : "2021-04-26T17:38:05Z",
        "lastEditedBy" : "6dd71efb-88b1-4bb0-b30a-0df658362f14",
        "tags" : [
        ]
      }
    ],
    "commit" : "85daff0442b5afff6b332538cf81c62e38bf76bb",
    "line" : 95,
    "diffHunk" : "@@ -1,1 +155,159 @@\t\t\tfor _, pip := range publicIPs {\n\t\t\t\tif pip.PrivateIPAddress == netInterface.IPV4.IPAddress[0].PrivateIP {\n\t\t\t\t\tnetInterface.IPV4.IPAddress[0].PublicIP = pip.FrontendIPAddress\n\t\t\t\t\tbreak\n\t\t\t\t}"
  },
  {
    "id" : "3e9fda98-8b73-4c15-a80c-9f8ffc6325b3",
    "prId" : 100690,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/100690#pullrequestreview-654015059",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "758faea5-825d-4ab8-aa6f-379361dca495",
        "parentId" : null,
        "authorId" : "7aca96c2-45d7-4567-99be-0323d7556c55",
        "body" : "Might be nice to use a constant for primary ip index rather than just 0.",
        "createdAt" : "2021-05-06T17:28:50Z",
        "updatedAt" : "2021-05-06T17:28:51Z",
        "lastEditedBy" : "7aca96c2-45d7-4567-99be-0323d7556c55",
        "tags" : [
        ]
      },
      {
        "id" : "ba0b7568-5d93-4d9f-8577-b2de5a64a3a1",
        "parentId" : "758faea5-825d-4ab8-aa6f-379361dca495",
        "authorId" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "body" : "agreed, constant is better than magic number",
        "createdAt" : "2021-05-07T01:37:09Z",
        "updatedAt" : "2021-05-07T01:37:09Z",
        "lastEditedBy" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "tags" : [
        ]
      }
    ],
    "commit" : "85daff0442b5afff6b332538cf81c62e38bf76bb",
    "line" : 77,
    "diffHunk" : "@@ -1,1 +137,141 @@\tif instanceMetadata.Network != nil && len(instanceMetadata.Network.Interface) > 0 {\n\t\tnetInterface := instanceMetadata.Network.Interface[0]\n\t\tif (len(netInterface.IPV4.IPAddress) > 0 && len(netInterface.IPV4.IPAddress[0].PublicIP) > 0) ||\n\t\t\t(len(netInterface.IPV6.IPAddress) > 0 && len(netInterface.IPV6.IPAddress[0].PublicIP) > 0) {\n\t\t\t// Return if public IP address has already part of instance metadata."
  },
  {
    "id" : "36fc2094-61ae-4f77-8adc-2eeff46025d4",
    "prId" : 100690,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/100690#pullrequestreview-654015482",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "93314c77-a59d-4bee-899e-c0f30efcd873",
        "parentId" : null,
        "authorId" : "7aca96c2-45d7-4567-99be-0323d7556c55",
        "body" : "Close() can fail, might be nice to use an anonymous function so you can log any failures?",
        "createdAt" : "2021-05-06T17:33:25Z",
        "updatedAt" : "2021-05-06T17:33:25Z",
        "lastEditedBy" : "7aca96c2-45d7-4567-99be-0323d7556c55",
        "tags" : [
        ]
      },
      {
        "id" : "55a1c830-93b2-4f43-882b-31a1436ab71c",
        "parentId" : "93314c77-a59d-4bee-899e-c0f30efcd873",
        "authorId" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "body" : "good suggestion. would add a log later in case any failures happen.",
        "createdAt" : "2021-05-07T01:38:29Z",
        "updatedAt" : "2021-05-07T01:38:29Z",
        "lastEditedBy" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "tags" : [
        ]
      }
    ],
    "commit" : "85daff0442b5afff6b332538cf81c62e38bf76bb",
    "line" : 149,
    "diffHunk" : "@@ -1,1 +229,233 @@\t\treturn nil, err\n\t}\n\tdefer resp.Body.Close()\n\n\tif resp.StatusCode != http.StatusOK {"
  },
  {
    "id" : "caefda6a-19ae-466f-8a53-5a593bc1bdcf",
    "prId" : 81500,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/81500#pullrequestreview-275872523",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "04b62777-85d4-4b40-a440-d9036f19a4b2",
        "parentId" : null,
        "authorId" : "e0218e0a-9e55-43f5-8929-04673eea9015",
        "body" : "where is this `2019-03-11` version from?",
        "createdAt" : "2019-08-16T08:07:59Z",
        "updatedAt" : "2019-08-16T08:11:42Z",
        "lastEditedBy" : "e0218e0a-9e55-43f5-8929-04673eea9015",
        "tags" : [
        ]
      },
      {
        "id" : "4df568a5-fe2c-4059-8740-996c1849c27e",
        "parentId" : "04b62777-85d4-4b40-a440-d9036f19a4b2",
        "authorId" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "body" : "from IMDS documentation, https://docs.microsoft.com/en-us/azure/virtual-machines/windows/instance-metadata-service",
        "createdAt" : "2019-08-16T10:08:46Z",
        "updatedAt" : "2019-08-16T10:08:46Z",
        "lastEditedBy" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "tags" : [
        ]
      }
    ],
    "commit" : "bd85699544de45f8e1aa17955e78fcb1e2f89acd",
    "line" : 32,
    "diffHunk" : "@@ -1,1 +114,118 @@\tq := req.URL.Query()\n\tq.Add(\"format\", \"json\")\n\tq.Add(\"api-version\", \"2019-03-11\")\n\treq.URL.RawQuery = q.Encode()\n"
  }
]