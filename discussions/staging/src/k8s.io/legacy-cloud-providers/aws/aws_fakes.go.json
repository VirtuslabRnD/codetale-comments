[
  {
    "id" : "8e5284d5-ae8a-4879-a2a5-bfcebfcd4893",
    "prId" : 80747,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/80747#pullrequestreview-276643375",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1d2a9332-5050-4f0c-902e-426fecc39ed1",
        "parentId" : null,
        "authorId" : "4aab55a0-5299-4d58-b630-6d54a352dba8",
        "body" : "Really want a numeric sort here.",
        "createdAt" : "2019-08-19T12:35:51Z",
        "updatedAt" : "2019-08-19T14:14:24Z",
        "lastEditedBy" : "4aab55a0-5299-4d58-b630-6d54a352dba8",
        "tags" : [
        ]
      },
      {
        "id" : "dcf06ef2-1c98-4d51-9d39-cc99b9dec245",
        "parentId" : "1d2a9332-5050-4f0c-902e-426fecc39ed1",
        "authorId" : "c490e441-2b9f-41f2-8559-d47be0ea8836",
        "body" : "I should add a comment; this is specifically to emulate the observed behavior of AWS; it returns the interface MACs sorted lexically by MAC address, rather than in device-number order. (And in order to test the fix in `TestNodeAddressesWithMetadata`, we need `FakeMetadata` to return the MACs in non-device-number order.)",
        "createdAt" : "2019-08-19T13:46:42Z",
        "updatedAt" : "2019-08-19T14:14:24Z",
        "lastEditedBy" : "c490e441-2b9f-41f2-8559-d47be0ea8836",
        "tags" : [
        ]
      },
      {
        "id" : "bb9fbe0a-e7a4-4ce6-98a8-34968009de76",
        "parentId" : "1d2a9332-5050-4f0c-902e-426fecc39ed1",
        "authorId" : "4aab55a0-5299-4d58-b630-6d54a352dba8",
        "body" : "Understood; my point was that if you have more than 9 or 10 interfaces (which I guess doesn't really matter for testing), the sort needs to be numeric rather than lexical.\r\n\r\nDoes AWS make any promises about ordering of device numbers -- that that won't change, and in particular, that a lower-numbered device won't be added later?  If so, a link to that doc would be good; if not, perhaps a bug needs to be filed against AWS.",
        "createdAt" : "2019-08-19T14:07:15Z",
        "updatedAt" : "2019-08-19T14:14:24Z",
        "lastEditedBy" : "4aab55a0-5299-4d58-b630-6d54a352dba8",
        "tags" : [
        ]
      },
      {
        "id" : "30a379e3-6d19-462f-aeca-a3a64faa0938",
        "parentId" : "1d2a9332-5050-4f0c-902e-426fecc39ed1",
        "authorId" : "c490e441-2b9f-41f2-8559-d47be0ea8836",
        "body" : "No, I mean, the sorting isn't based on the device-number at all. We're just sorting the MAC addresses into alphabetical order by MAC address. Why would you want a list of MAC addresses in alphabetical order? I don't know, but that's apparently what AWS gives you.\r\n\r\n> Does AWS make any promises about ordering of device numbers\r\n\r\nhttps://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-metadata.html#instancedata-data-categories documents that `device-number` is\r\n\r\n> The unique device number associated with that interface. The device number corresponds to the device name; for example, a `device-number` of 2 is for the eth2 device. This category corresponds to the `DeviceIndex` and `device-index` fields that are used by the Amazon EC2 API and the EC2 commands for the AWS CLI. \r\n\r\nhttps://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-eni.html says that\r\n\r\n> Every instance in a VPC has a default network interface, called the primary network interface (eth0). You cannot detach a primary network interface from an instance. You can create and attach additional network interfaces.\r\n\r\nhttps://docs.aws.amazon.com/cli/latest/reference/ec2/attach-network-interface.html documents the CLI `attach-network-interface` command, which has a required `--device-index` parameter. So, when attaching a new network interface, you explicitly specify the device-number you want it to have. (So, technically, it's *not* guaranteed that a lower-numbered device won't be added later, since the admin could attach eth2 first and then eth1 after that. But if that happens it's because the admin wanted it to happen.)",
        "createdAt" : "2019-08-19T15:36:02Z",
        "updatedAt" : "2019-08-19T15:36:02Z",
        "lastEditedBy" : "c490e441-2b9f-41f2-8559-d47be0ea8836",
        "tags" : [
        ]
      }
    ],
    "commit" : "a4bac275faa56fc44ba1564b9954c0f24d288428",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +341,345 @@\t\t\tmacs := make([]string, len(m.aws.networkInterfacesMacs))\n\t\t\tcopy(macs, m.aws.networkInterfacesMacs)\n\t\t\tsort.Strings(macs)\n\t\t\treturn strings.Join(macs, \"/\\n\") + \"/\\n\", nil\n\t\t}"
  }
]