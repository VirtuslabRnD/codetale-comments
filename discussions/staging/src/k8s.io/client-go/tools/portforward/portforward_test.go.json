[
  {
    "id" : "5d65366e-4d6f-49e2-a521-f49e58ccf561",
    "prId" : 70931,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/70931#pullrequestreview-174662569",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c6a1db9b-78ea-4fde-a414-d961635d1199",
        "parentId" : null,
        "authorId" : "695b6860-569c-4e63-a215-7342e2279a94",
        "body" : "I wonder if it's a bug or if we don't care. \r\n\r\nFor this testcase, when address `\"localhost\"` was processed, the \"output\" addresses should have been\r\n```\r\n{protocol: \"tcp4\", address: \"127.0.0.1\", failureMode: \"all\"},\r\n{protocol: \"tcp6\", address: \"::1\", failureMode: \"all\"},\r\n```\r\nHowever the consequent address `\"127.0.0.1\"` gets processed and overrides the `failureMode` of 127.0.0.1 to `\"any\"`.\r\n\r\nI can imagine the reverse case can also happen. It's orthogonal to this PR so I won't hold it",
        "createdAt" : "2018-11-14T00:43:30Z",
        "updatedAt" : "2019-02-10T12:49:30Z",
        "lastEditedBy" : "695b6860-569c-4e63-a215-7342e2279a94",
        "tags" : [
        ]
      },
      {
        "id" : "a3208148-197e-4f59-9d1f-5dcdefe611fe",
        "parentId" : "c6a1db9b-78ea-4fde-a414-d961635d1199",
        "authorId" : "cfd6a67f-20c0-448d-9cbf-8d0ffbc2a74f",
        "body" : "@rowleyajI this is related to [this conversation](https://github.com/kubernetes/kubernetes/pull/46517/files#r179165644) in the original PR about how to handle failures and it seems to be expected behaviour:\r\n\r\n* if someone specifies the addresses explicitly - then command should fail if any of the address fail (covered by this test case)\r\n* If no addresses specified explicitly (`localhost`), then allow to silently fail one of them",
        "createdAt" : "2018-11-14T00:54:28Z",
        "updatedAt" : "2019-02-10T12:49:30Z",
        "lastEditedBy" : "cfd6a67f-20c0-448d-9cbf-8d0ffbc2a74f",
        "tags" : [
        ]
      },
      {
        "id" : "f899b822-1810-4576-96e4-518833cf9f3b",
        "parentId" : "c6a1db9b-78ea-4fde-a414-d961635d1199",
        "authorId" : "695b6860-569c-4e63-a215-7342e2279a94",
        "body" : "Right. I'm not convinced that the current implementation is the final goal based on the conversation. But for the current implementation, imagine the two scenarios: \r\n\r\n1. input addresses: `\"localhost\", \"127.0.0.1\", \"::1\"`; output addresses would be \r\n```\r\n{protocol: \"tcp4\", address: \"127.0.0.1\", failureMode: \"any\"},\r\n{protocol: \"tcp6\", address: \"::1\", failureMode: \"any\"},\r\n```\r\n2. input addresses: `\"127.0.0.1\", \"::1\", \"localhost\"`; output addresses would be \r\n```\r\n{protocol: \"tcp4\", address: \"127.0.0.1\", failureMode: \"all\"},\r\n{protocol: \"tcp6\", address: \"::1\", failureMode: \"all\"},\r\n```\r\n\r\nMaybe this problem goes away when we sort out how we want the bind failure logic to work eventually.  \r\n\r\nI'm thinking open an issue to continue the discussion in https://github.com/kubernetes/kubernetes/pull/46517/files#r179165644",
        "createdAt" : "2018-11-14T01:06:26Z",
        "updatedAt" : "2019-02-10T12:49:30Z",
        "lastEditedBy" : "695b6860-569c-4e63-a215-7342e2279a94",
        "tags" : [
        ]
      },
      {
        "id" : "9a6f2334-5b7f-49da-88f8-854df18fecfe",
        "parentId" : "c6a1db9b-78ea-4fde-a414-d961635d1199",
        "authorId" : "cfd6a67f-20c0-448d-9cbf-8d0ffbc2a74f",
        "body" : "Yeah, you are right. The special case for `localhost` at the end overrides previously set values.\r\n\r\nPlease, cc me on the issue, once created.",
        "createdAt" : "2018-11-14T01:19:21Z",
        "updatedAt" : "2019-02-10T12:49:30Z",
        "lastEditedBy" : "cfd6a67f-20c0-448d-9cbf-8d0ffbc2a74f",
        "tags" : [
        ]
      }
    ],
    "commit" : "4ee2010111af602988bf9bedf66d1a0c36419b09",
    "line" : 1,
    "diffHunk" : "@@ -1,1 +81,85 @@\t\t\texpectedAddresses: []listenAddress{\n\t\t\t\t{protocol: \"tcp4\", address: \"127.0.0.1\", failureMode: \"any\"},\n\t\t\t\t{protocol: \"tcp6\", address: \"::1\", failureMode: \"all\"},\n\t\t\t},\n\t\t},"
  }
]