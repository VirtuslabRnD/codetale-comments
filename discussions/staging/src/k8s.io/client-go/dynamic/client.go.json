[
  {
    "id" : "79a4be3e-add8-4954-8d85-718830fa6d98",
    "prId" : 56717,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/56717#pullrequestreview-96254469",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fd70cf74-1285-4997-89a6-4794e73b8537",
        "parentId" : null,
        "authorId" : "fa530650-5886-4415-a42f-0dee2e0e9ae3",
        "body" : "Which subresources support List?",
        "createdAt" : "2018-02-13T07:22:13Z",
        "updatedAt" : "2018-02-13T07:31:36Z",
        "lastEditedBy" : "fa530650-5886-4415-a42f-0dee2e0e9ae3",
        "tags" : [
        ]
      },
      {
        "id" : "deccee5e-656b-42be-b690-5917e1fc0e94",
        "parentId" : "fd70cf74-1285-4997-89a6-4794e73b8537",
        "authorId" : "695b6860-569c-4e63-a215-7342e2279a94",
        "body" : "I'm not aware of any based on [api discovery](https://github.com/kubernetes/kubernetes/pull/57171/files#diff-e79f254ff9fd86bebf69fdaa20843c2f). This change is in `Get` (github has some weird display problem :) ).",
        "createdAt" : "2018-02-13T18:33:38Z",
        "updatedAt" : "2018-02-13T18:33:38Z",
        "lastEditedBy" : "695b6860-569c-4e63-a215-7342e2279a94",
        "tags" : [
        ]
      },
      {
        "id" : "fe59d646-fe1e-4dd7-9d64-ec3e9a0589c9",
        "parentId" : "fd70cf74-1285-4997-89a6-4794e73b8537",
        "authorId" : "fa530650-5886-4415-a42f-0dee2e0e9ae3",
        "body" : "Oops, yes. :)",
        "createdAt" : "2018-02-13T18:43:23Z",
        "updatedAt" : "2018-02-13T18:43:23Z",
        "lastEditedBy" : "fa530650-5886-4415-a42f-0dee2e0e9ae3",
        "tags" : [
        ]
      }
    ],
    "commit" : "e10cdb3b0f42bafcdf1d1a95e6fb14cbfe2b4ab7",
    "line" : 24,
    "diffHunk" : "@@ -1,1 +180,184 @@\t}\n\tresult := new(unstructured.Unstructured)\n\tresourceName, subresourceName := rc.parseResourceSubresourceName()\n\terr := rc.cl.Get().\n\t\tNamespaceIfScoped(rc.ns, rc.resource.Namespaced)."
  },
  {
    "id" : "7a5f05ba-7ce2-438c-89d9-a6ff1c2b78fb",
    "prId" : 56717,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/56717#pullrequestreview-96255148",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d39298b8-11e3-47f9-9f63-dbb1de5702ac",
        "parentId" : null,
        "authorId" : "fa530650-5886-4415-a42f-0dee2e0e9ae3",
        "body" : "How about adding explicit methods like `UpdateStatus()`, etc instead of deriving the name? It would keep it backward compatible too.\r\n\r\nI had added `UpdateStatus` and modified `Patch` to support subresources in https://github.com/kubernetes/kubernetes/pull/55168/commits/c961ac4b3e4c2f90c434eaa54b18acff90057d06#diff-781d9a2143af0fe2be85e527bf53626a.",
        "createdAt" : "2018-02-13T07:24:19Z",
        "updatedAt" : "2018-02-13T07:31:36Z",
        "lastEditedBy" : "fa530650-5886-4415-a42f-0dee2e0e9ae3",
        "tags" : [
        ]
      },
      {
        "id" : "21b28549-05f8-4812-9059-1ee224b11c4a",
        "parentId" : "d39298b8-11e3-47f9-9f63-dbb1de5702ac",
        "authorId" : "fa530650-5886-4415-a42f-0dee2e0e9ae3",
        "body" : "That's how we do in typed clients:\r\n\r\nhttps://github.com/kubernetes/kubernetes/blob/ae0f45e855381d3731f8e66e536d1ad093ea9948/pkg/client/clientset_generated/internalclientset/typed/apps/internalversion/statefulset.go#L35-L47",
        "createdAt" : "2018-02-13T07:26:22Z",
        "updatedAt" : "2018-02-13T07:31:36Z",
        "lastEditedBy" : "fa530650-5886-4415-a42f-0dee2e0e9ae3",
        "tags" : [
        ]
      },
      {
        "id" : "cb2d1bbf-09b5-4489-8804-a9b4f8e64910",
        "parentId" : "d39298b8-11e3-47f9-9f63-dbb1de5702ac",
        "authorId" : "695b6860-569c-4e63-a215-7342e2279a94",
        "body" : "We also need to support `Update` for other subresources like `certificates.k8s.io/v1beta1/certificatesigningrequests/{name}/approval` and `v1/namespaces/{name}/finalize`.",
        "createdAt" : "2018-02-13T18:45:29Z",
        "updatedAt" : "2018-02-13T18:45:29Z",
        "lastEditedBy" : "695b6860-569c-4e63-a215-7342e2279a94",
        "tags" : [
        ]
      }
    ],
    "commit" : "e10cdb3b0f42bafcdf1d1a95e6fb14cbfe2b4ab7",
    "line" : 73,
    "diffHunk" : "@@ -1,1 +255,259 @@\t\tNamespaceIfScoped(rc.ns, rc.resource.Namespaced).\n\t\tResource(resourceName).\n\t\tSubResource(subresourceName...).\n\t\t// NOTE: Currently our system assumes every subresource object has the same\n\t\t//\t name as the parent resource object. E.g. a pods/binding object having"
  },
  {
    "id" : "d72281f5-e44f-4601-bc97-5686b9809272",
    "prId" : 56717,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/56717#pullrequestreview-96377702",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f75a2738-d850-4de4-9954-e21c12108bc3",
        "parentId" : null,
        "authorId" : "fa530650-5886-4415-a42f-0dee2e0e9ae3",
        "body" : "Would be better to have `subresources` as an argument...that's how we do in typed clients.\r\n\r\nhttps://github.com/kubernetes/kubernetes/blob/ae0f45e855381d3731f8e66e536d1ad093ea9948/pkg/client/clientset_generated/internalclientset/typed/apps/internalversion/statefulset.go#L164-L176",
        "createdAt" : "2018-02-13T07:25:35Z",
        "updatedAt" : "2018-02-13T07:31:36Z",
        "lastEditedBy" : "fa530650-5886-4415-a42f-0dee2e0e9ae3",
        "tags" : [
        ]
      },
      {
        "id" : "2a04ff23-2ce0-40b8-943e-bfdfd333a092",
        "parentId" : "f75a2738-d850-4de4-9954-e21c12108bc3",
        "authorId" : "695b6860-569c-4e63-a215-7342e2279a94",
        "body" : "I agree that we should emulate typed clients behavior in dynamic client.\r\n\r\nHowever, I think `rc.resource.Name` (which is a `metav1.APIResource.Name`) should allow names containing '/', e.g. `pods/binding`, to reflect what we are serving in api discovery: \r\n    {\r\n      \"name\": \"pods/binding\",\r\n      \"singularName\": \"\",\r\n      \"namespaced\": true,\r\n      \"kind\": \"Binding\",\r\n      \"verbs\": [\r\n        \"create\"\r\n      ]\r\n    },\r\n\r\nIn that case, should we parse `rc.resource.Name` and change `Resource(rc.resource.Name).` into `Resource(resourceName).`? ",
        "createdAt" : "2018-02-13T19:26:19Z",
        "updatedAt" : "2018-02-13T19:26:20Z",
        "lastEditedBy" : "695b6860-569c-4e63-a215-7342e2279a94",
        "tags" : [
        ]
      },
      {
        "id" : "0a8d4a07-13b7-4117-971b-e54e27098d2c",
        "parentId" : "f75a2738-d850-4de4-9954-e21c12108bc3",
        "authorId" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "body" : "@roycaihw can you try what happens if user creates a clientpool, and then call [clientpool.ClientForGroupVersionResource()](https://github.com/kubernetes/client-go/blob/master/dynamic/client_pool.go#L82) with a subresource? Can the restmapper handle subresource?",
        "createdAt" : "2018-02-13T21:12:36Z",
        "updatedAt" : "2018-02-13T21:12:37Z",
        "lastEditedBy" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "tags" : [
        ]
      },
      {
        "id" : "e05429cb-2f5b-41f8-b6c9-d4398e577800",
        "parentId" : "f75a2738-d850-4de4-9954-e21c12108bc3",
        "authorId" : "695b6860-569c-4e63-a215-7342e2279a94",
        "body" : "Yes, the restmapper can handle subresource: https://github.com/kubernetes/kubernetes/pull/57171/commits/9f9ec171152b2b5ce0ab2da6ad90bba4935627e2#diff-b9e0984a44b8dbba37804e9a762ea6cbR89. It seems to return a client for GV if Group and Version exist https://github.com/kubernetes/kubernetes/blob/92e4d3da0076f923a45d54d69c84e91ac6a61a55/staging/src/k8s.io/client-go/dynamic/client_pool.go#L86",
        "createdAt" : "2018-02-13T21:43:30Z",
        "updatedAt" : "2018-02-13T21:46:35Z",
        "lastEditedBy" : "695b6860-569c-4e63-a215-7342e2279a94",
        "tags" : [
        ]
      },
      {
        "id" : "7f05d4fb-3de7-4528-9bd6-766e19bba6d0",
        "parentId" : "f75a2738-d850-4de4-9954-e21c12108bc3",
        "authorId" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "body" : "@nikhita a common use case is constructing the dynamic client with the result returned by the discovery client. In this case, it's convenient if the [client.Resource(resource, namespace)](https://github.com/kubernetes/client-go/blob/master/dynamic/client.go#L122) allows `resource` to be in the form of `resource/subresource`. Typed clients don't have this use case so I think we can tolerate the discrepancy.",
        "createdAt" : "2018-02-13T22:07:14Z",
        "updatedAt" : "2018-02-13T22:07:14Z",
        "lastEditedBy" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "tags" : [
        ]
      },
      {
        "id" : "b8acd475-6917-4fce-84a3-3d70ecf23a7b",
        "parentId" : "f75a2738-d850-4de4-9954-e21c12108bc3",
        "authorId" : "fa530650-5886-4415-a42f-0dee2e0e9ae3",
        "body" : ":+1:",
        "createdAt" : "2018-02-14T03:36:31Z",
        "updatedAt" : "2018-02-14T03:36:31Z",
        "lastEditedBy" : "fa530650-5886-4415-a42f-0dee2e0e9ae3",
        "tags" : [
        ]
      }
    ],
    "commit" : "e10cdb3b0f42bafcdf1d1a95e6fb14cbfe2b4ab7",
    "line" : 90,
    "diffHunk" : "@@ -1,1 +287,291 @@\t\tNamespaceIfScoped(rc.ns, rc.resource.Namespaced).\n\t\tResource(resourceName).\n\t\tSubResource(subresourceName...).\n\t\tName(name).\n\t\tBody(data)."
  }
]