[
  {
    "id" : "0075dab9-854e-44b9-a183-3b4f5b19b5ab",
    "prId" : 102217,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/102217#pullrequestreview-669561293",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c944a756-8d46-4f96-9237-bc01b30480ab",
        "parentId" : null,
        "authorId" : "fa477146-9a47-4754-b38c-de8062e65e13",
        "body" : "Pushing this case into a generic `NextRetry` makes it error prone. I don't see a check of the request verb to ensure it's a GET.  I can accept that a GET should be retriable on a 5xx series error, but other http verbs cannot automatically retried on 5xx in all cases.  Some action may have been taken before the failure that would make an auto-replay unpredictable.  I could probably buy 503 given its usage for, \"you didn't get to your endpoint\" from the aggregator.\r\n\r\nI think if you split the check for GET requests and non-GETs you can keep the generic `NextRetry` function.",
        "createdAt" : "2021-05-26T13:51:25Z",
        "updatedAt" : "2021-05-26T13:56:38Z",
        "lastEditedBy" : "fa477146-9a47-4754-b38c-de8062e65e13",
        "tags" : [
        ]
      },
      {
        "id" : "3d525ed2-cbb6-4aff-ba60-71e7f3e3fd6a",
        "parentId" : "c944a756-8d46-4f96-9237-bc01b30480ab",
        "authorId" : "3e6e337f-0beb-4609-abc3-11b8e8cf5688",
        "body" : "```\r\nit would retry only if StatusCode == 429 or StatusCode >= 500 and the response has a Retry-After header with an integer value.\r\n```\r\n\r\nThis was resolved in kube slack - https://kubernetes.slack.com/archives/C0EG7JC6T/p1622037135027600",
        "createdAt" : "2021-05-26T21:34:52Z",
        "updatedAt" : "2021-05-26T21:34:53Z",
        "lastEditedBy" : "3e6e337f-0beb-4609-abc3-11b8e8cf5688",
        "tags" : [
        ]
      }
    ],
    "commit" : "5fdf196b4e9bbba036a43f4c3b5d9ed8af1672cc",
    "line" : 179,
    "diffHunk" : "@@ -1,1 +177,181 @@\tswitch r := resp.StatusCode; {\n\t// any 500 error code and 429 can trigger a wait\n\tcase r == http.StatusTooManyRequests, r >= 500:\n\tdefault:\n\t\treturn 0, false"
  }
]