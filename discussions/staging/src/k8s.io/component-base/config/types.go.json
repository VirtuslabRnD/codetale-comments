[
  {
    "id" : "8e2fdd2e-2e89-40bd-8771-0cdbc6e3e34e",
    "prId" : 80681,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/80681#pullrequestreview-267974037",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "68f7fa0d-b7b3-479e-8007-0fea1c041dc3",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "adding these fields (and corresponding flags) makes the scheduler configuration (which has its own lockObjectName/Namespace fields already) ambiguous. As part of adding these, we have to resolve that ambiguity in the scheduler config.\r\n\r\nWe could do the following in the scheduler config:\r\n1. change the scheduler [lock-object-name/namespace flags to bind to the new struct fields](https://github.com/kubernetes/kubernetes/blob/master/cmd/kube-scheduler/app/options/deprecated.go#L61-L62), mark the flags as deprecated in favor of the new flags\r\n2. remove the [LockObjectName/LockObjectNamespace fields from the internal scheduler configuration type](https://github.com/kubernetes/kubernetes/blob/master/pkg/scheduler/apis/config/types.go#L141-L144) (leave the fields in the external configuration type for compatibility)\r\n3. mark the [LockObjectName/LockObjectNamespace fields in the external scheduler configuration type](https://github.com/kubernetes/kubernetes/blob/master/staging/src/k8s.io/kube-scheduler/config/v1alpha1/types.go#L137-L140) as deprecated in favor of the new standard fields\r\n4. modify the [scheduler configuration defaulting](https://github.com/kubernetes/kubernetes/blob/master/pkg/scheduler/apis/config/v1alpha1/defaults.go#L81-L86) to only default the LockObjectName/LockObjectNamespace fields if the new fields are not set\r\n5. modify the [scheduler configuration conversion](https://github.com/kubernetes/kubernetes/blob/master/pkg/scheduler/apis/config/v1alpha1/zz_generated.conversion.go#L198-L224) to implement custom conversion methods to do the following:\r\n    * Convert_v1alpha1_KubeSchedulerConfiguration_To_config_KubeSchedulerConfiguration\r\n      * call autoConvert_v1alpha1_KubeSchedulerConfiguration_To_config_KubeSchedulerConfiguration, then:\r\n      * If only one of LockObjectName/ResourceName is set (or if they are both set and match), copy that to internal ResourceName\r\n      * If only one of LockObjectNamespace/ResourceNamespace is set (or if they are both set and match), copy that to internal ResourceNamespace\r\n      * If old/new fields are both set and do not match, error\r\n    * Convert_config_KubeSchedulerConfiguration_To_v1alpha1_KubeSchedulerConfiguration:\r\n      * call autoConvert_config_KubeSchedulerConfiguration_To_v1alpha1_KubeSchedulerConfiguration, then:\r\n      * Copy internal ResourceName to external LockObjectName and ResourceName\r\n      * Copy internal ResourceNamespace to external LockObjectNamespace and ResourceNamespace",
        "createdAt" : "2019-07-29T14:41:41Z",
        "updatedAt" : "2019-08-03T03:47:02Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "718bd961-bcf0-4602-8dc4-7725ef02f612",
        "parentId" : "68f7fa0d-b7b3-479e-8007-0fea1c041dc3",
        "authorId" : "20555cdb-65b0-41d0-aea2-5598a3439d50",
        "body" : "Addressed the comment.",
        "createdAt" : "2019-07-29T18:52:49Z",
        "updatedAt" : "2019-08-03T03:47:02Z",
        "lastEditedBy" : "20555cdb-65b0-41d0-aea2-5598a3439d50",
        "tags" : [
        ]
      }
    ],
    "commit" : "41a435a812690431f9f449f08fe28967a8aed582",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +68,72 @@\t// resourceName indicates the namespace of resource object that will be used to lock\n\t// during leader election cycles.\n\tResourceNamespace string\n}\n"
  }
]