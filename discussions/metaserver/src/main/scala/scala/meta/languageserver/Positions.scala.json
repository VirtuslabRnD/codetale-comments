[
  {
    "id" : "b7ada426-820b-4a4a-9093-0deba7824a87",
    "prId" : 23,
    "prUrl" : "https://github.com/scalameta/metals/pull/23#pullrequestreview-75942893",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c77a9b86-c394-417c-a522-31026469f68d",
        "parentId" : null,
        "authorId" : "d46783d7-7caa-4c3b-a17a-33eb363c3983",
        "body" : "An alternative suggestion in a completely different style.  Nothing wrong with this one though if you want to keep it.  Ignore my lack of filename in the IllegalArgumentExceptions, I just whipped this up in a worksheet.\r\n\r\n```scala\r\ndef pos(content: String, line: Int, col: Int): Int = {\r\n  val (lineCount, pos) = content\r\n    .linesWithSeparators\r\n    .take(line + 1)\r\n    .foldLeft((0, 0)){ (accum, str) =>\r\n      val (lineNum, charCount) = accum\r\n      if (lineNum < line) {\r\n        (lineNum + 1, charCount + str.length)\r\n      } else {\r\n        require(str.length >= col, \"Line is not long enough\")\r\n        (lineNum + 1, charCount + col)\r\n      }\r\n    }\r\n  require(lineCount == line + 1, \"Not enough lines\")\r\n  pos\r\n}\r\n```",
        "createdAt" : "2017-11-11T18:22:49Z",
        "updatedAt" : "2017-11-14T20:08:40Z",
        "lastEditedBy" : "d46783d7-7caa-4c3b-a17a-33eb363c3983",
        "tags" : [
        ]
      },
      {
        "id" : "06e4a76b-cdf4-40ac-a0da-5805303311bd",
        "parentId" : "c77a9b86-c394-417c-a522-31026469f68d",
        "authorId" : "cea3c370-4fa4-4787-a40c-c406eb22d8b2",
        "body" : "This method is on a fairly critical path since it's run for every start/end point during completions. `foldLeft` + tuples creates a lot of unnecessary allocations compared to the while loops. \r\n\r\nHowever, I just found out that scala.meta.Input has an internal `private lazy val cachedLineIndices: Array[Int]` which allows you to get the offset of a line in from an array lookup. I've refactored to use this instead of rolling our own.",
        "createdAt" : "2017-11-11T21:47:25Z",
        "updatedAt" : "2017-11-14T20:08:40Z",
        "lastEditedBy" : "cea3c370-4fa4-4787-a40c-c406eb22d8b2",
        "tags" : [
        ]
      }
    ],
    "commit" : "5e9272f240feb4f00bdea5ee50e2808699cd0d0e",
    "line" : 48,
    "diffHunk" : "@@ -1,1 +46,50 @@  }\n\n}"
  }
]