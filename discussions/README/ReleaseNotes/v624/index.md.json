[
  {
    "id" : "172b13a4-7182-4b47-aa67-9b47d2e342d1",
    "prId" : 6340,
    "prUrl" : "https://github.com/root-project/root/pull/6340#pullrequestreview-487724035",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b4f02361-0047-4fd4-92b8-5f1f6ece336b",
        "parentId" : null,
        "authorId" : "ec1903c5-44e7-4fb1-bee9-25de61836fba",
        "body" : "Suggest to mention both methods, because I think the first one might be more helpful than global control in certain situations.\r\n\r\n`tbb::task_scheduler_init`. Instead, parallelism can be controlled in two ways:\r\n- Set ROOT's parallelism level:\r\n```cpp\r\n  // Method 1:\r\n  ROOT::EnableImplicitMT(2);\r\n  ROOT::TThreadExecutor p1; // ROOT's parallelism level is initialised to 2\r\n  \r\n  // Method 2:\r\n  ROOT::TThreadExecutor p2(8); // ROOT's parallelism level is initialised to 8.\r\n```\r\n  The advantage of this method is that other TBB tasks can run concurrently with ROOT's tasks.\r\n- Set TBB's global parallelism level using `tbb::global_control`:\r\n```cpp\r\n  //tbb::task_scheduler_init init(2); // does not affect the number of threads ROOT will use anymore\r\n\r\n  tbb::global_control c(tbb::global_control::max_allowed_parallelism, 2);\r\n  ROOT::TThreadExecutor p1;  // will use 2 threads\r\n  ROOT::TThreadExecutor p2(/*nThreads=*/8); // will still use 2 threads\r\n```",
        "createdAt" : "2020-09-11T17:19:15Z",
        "updatedAt" : "2020-09-15T17:19:13Z",
        "lastEditedBy" : "ec1903c5-44e7-4fb1-bee9-25de61836fba",
        "tags" : [
        ]
      },
      {
        "id" : "e863ec61-f255-4274-aa88-bdde58827826",
        "parentId" : "b4f02361-0047-4fd4-92b8-5f1f6ece336b",
        "authorId" : "ec1903c5-44e7-4fb1-bee9-25de61836fba",
        "body" : "I wanted to make a suggestion, but github doesn't understand nesting of ``` for both code and the suggestion ...",
        "createdAt" : "2020-09-11T17:20:35Z",
        "updatedAt" : "2020-09-15T17:19:13Z",
        "lastEditedBy" : "ec1903c5-44e7-4fb1-bee9-25de61836fba",
        "tags" : [
        ]
      },
      {
        "id" : "51c973c5-ca12-4522-bf11-b09c3d7d5b5d",
        "parentId" : "b4f02361-0047-4fd4-92b8-5f1f6ece336b",
        "authorId" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "body" : "isn't that more for documentation than for release notes? people look at release notes to see what changed, and the behavior of `ROOT::EnableImplicitMT` didn't change.\r\n\r\nI could add a paragraph in the docs somewhere (where?) about ROOT and parallelism and point to that from the release notes.",
        "createdAt" : "2020-09-14T10:47:35Z",
        "updatedAt" : "2020-09-15T17:19:13Z",
        "lastEditedBy" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "tags" : [
        ]
      },
      {
        "id" : "9ef0770a-12ad-4326-a790-738a478b9a9d",
        "parentId" : "b4f02361-0047-4fd4-92b8-5f1f6ece336b",
        "authorId" : "ec1903c5-44e7-4fb1-bee9-25de61836fba",
        "body" : "Good idea. Maybe we ask during the team meeting?",
        "createdAt" : "2020-09-14T12:56:08Z",
        "updatedAt" : "2020-09-15T17:19:13Z",
        "lastEditedBy" : "ec1903c5-44e7-4fb1-bee9-25de61836fba",
        "tags" : [
        ]
      }
    ],
    "commit" : "663a4655074f1dd7dbf1d1b9dd35d41317e23d72",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +55,59 @@  ROOT::TThreadExecutor p1;  // will use 2 threads\n  ROOT::TThreadExecutor p2(/*nThreads=*/8); // will still use 2 threads\n```\n\nNote that the preferred way to steer ROOT's concurrency level is still through `[ROOT::EnableImplicitMT](https://root.cern/doc/master/namespaceROOT.html#a06f2b8b216b615e5abbc872c9feff40f)` or by passing the appropriate parameter to executors' constructors, as in `[TThreadExecutor::TThreadExecutor](https://root.cern/doc/master/classROOT_1_1TThreadExecutor.html#ac7783d52c56cc7875d3954cf212247bb)`."
  },
  {
    "id" : "edeb903e-dc03-4a32-b283-059bd79ff268",
    "prId" : 6340,
    "prUrl" : "https://github.com/root-project/root/pull/6340#pullrequestreview-488866835",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e439f08b-b4f8-4a98-8375-d445520f3875",
        "parentId" : null,
        "authorId" : "ec1903c5-44e7-4fb1-bee9-25de61836fba",
        "body" : "```suggestion\r\nNote that it is generally preferred to control ROOT's parallelism using [ROOT::EnableImplicitMT()](https://root.cern/doc/master/namespaceROOT.html#a06f2b8b216b615e5abbc872c9feff40f).\r\n```",
        "createdAt" : "2020-09-15T16:36:33Z",
        "updatedAt" : "2020-09-15T17:19:13Z",
        "lastEditedBy" : "ec1903c5-44e7-4fb1-bee9-25de61836fba",
        "tags" : [
        ]
      }
    ],
    "commit" : "663a4655074f1dd7dbf1d1b9dd35d41317e23d72",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +56,60 @@  ROOT::TThreadExecutor p2(/*nThreads=*/8); // will still use 2 threads\n```\n\nNote that the preferred way to steer ROOT's concurrency level is still through `[ROOT::EnableImplicitMT](https://root.cern/doc/master/namespaceROOT.html#a06f2b8b216b615e5abbc872c9feff40f)` or by passing the appropriate parameter to executors' constructors, as in `[TThreadExecutor::TThreadExecutor](https://root.cern/doc/master/classROOT_1_1TThreadExecutor.html#ac7783d52c56cc7875d3954cf212247bb)`.\n"
  }
]