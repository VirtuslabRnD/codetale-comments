[
  {
    "id" : "31eb071e-879b-4bcf-ad13-af502159d766",
    "prId" : 5582,
    "prUrl" : "https://github.com/apache/kafka/pull/5582#pullrequestreview-163913547",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8ed992c0-2059-44bc-9f6b-827939fadd2d",
        "parentId" : null,
        "authorId" : "b4936a15-698a-496e-85a1-b1e229b4986b",
        "body" : "why?",
        "createdAt" : "2018-10-10T10:56:47Z",
        "updatedAt" : "2018-10-25T19:47:00Z",
        "lastEditedBy" : "b4936a15-698a-496e-85a1-b1e229b4986b",
        "tags" : [
        ]
      },
      {
        "id" : "bc9a5ff7-e8ff-469a-9f66-6618e7529967",
        "parentId" : "8ed992c0-2059-44bc-9f6b-827939fadd2d",
        "authorId" : "e0554c25-f6f3-4e49-a325-bcc5d4dc5fb2",
        "body" : "Good question!  There was a comment above that method that stated:\r\n```\r\n        // Check that we can serialize, deserialize and serialize again\r\n        // We don't check for equality or hashCode because it is likely to fail for any response containing a HashMap\r\n```\r\n I didn't think about it much; I just read that comment and figured that since I'm making a change to `SaslAuthenticateRequest` and `SaslAuthenticateResponse` and they don't contain a `HashMap` I could -- and should -- test for equality and hashCode.\r\n\r\nBut now that you ask, and I do spend the time to think about it, it seems that testing equality and hashCode doesn't provide the value I thought it would (and that the comment seemed to imply that it would except for the annoying tendency of a HashMap to screw up the results)!  All we would be testing for is to make sure the result of serializing a request to a `Struct` can be deserialized back to a request and then serialized again to an equivalent `Struct`.  In other words, it doesn't actually test that the serialization code (i.e. `SaslAuthenticateResponse.toStruct()`) is working perfectly -- the equality and hashCode tests will still succeed even if that code serializes a field incorrectly because the same field will be serialized incorrectly both times (for example).\r\n\r\nNote that incorrect serialization would presumably be caught indirectly via failure of other unit or integration tests.\r\n\r\nWhat maybe has to change here is the original comment.  Should I adjusted it?",
        "createdAt" : "2018-10-11T16:49:37Z",
        "updatedAt" : "2018-10-25T19:47:00Z",
        "lastEditedBy" : "e0554c25-f6f3-4e49-a325-bcc5d4dc5fb2",
        "tags" : [
        ]
      }
    ],
    "commit" : "9c30b80b2b29b7f5c86af21fd19fc520cfe798db",
    "line" : 20,
    "diffHunk" : "@@ -1,1 +355,359 @@    private void checkRequest(AbstractRequest req, boolean checkEqualityAndHashCode) throws Exception {\n        // Check that we can serialize, deserialize and serialize again\n        // Check for equality and hashCode only if indicated\n        Struct struct = req.toStruct();\n        AbstractRequest deserialized = (AbstractRequest) deserialize(req, struct, req.version());"
  }
]