[
  {
    "id" : "d544319b-fd68-43e9-b4d2-d162cb897fcf",
    "prId" : 7967,
    "prUrl" : "https://github.com/apache/kafka/pull/7967#pullrequestreview-344953426",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "126ad05a-a8f0-4a06-abee-49e57866854f",
        "parentId" : null,
        "authorId" : "0c73d886-f3da-4107-8045-92d8e3c8fb75",
        "body" : "I stepped through this test a few times.\r\n```\r\n                public Void call() throws Exception {\r\n                    System.out.println(\"allocating\");\r\n                    assertThrows(KafkaException.class, () -> pool.allocate(1, Long.MAX_VALUE));\r\n                    System.out.println(\"allocated\");\r\n```\r\nBufferPool is already closed by the time work#call is executed:\r\n```\r\nclosing\r\nallocating\r\nallocating\r\nallocated\r\nallocated\r\n```\r\nSo the test doesn't exercise line 150 in BufferPool.\r\n",
        "createdAt" : "2020-01-18T15:40:16Z",
        "updatedAt" : "2020-01-18T15:40:16Z",
        "lastEditedBy" : "0c73d886-f3da-4107-8045-92d8e3c8fb75",
        "tags" : [
        ]
      },
      {
        "id" : "879918bf-4f21-4fe6-aa9e-56932d021deb",
        "parentId" : "126ad05a-a8f0-4a06-abee-49e57866854f",
        "authorId" : "98b12f1a-2624-4608-85a1-ec49503fd316",
        "body" : "Good find, thank you. I've opened https://github.com/apache/kafka/pull/7982 to resolve this.",
        "createdAt" : "2020-01-18T17:26:55Z",
        "updatedAt" : "2020-01-18T17:26:56Z",
        "lastEditedBy" : "98b12f1a-2624-4608-85a1-ec49503fd316",
        "tags" : [
        ]
      }
    ],
    "commit" : "4c63d11596d51b9ddd8907fc23eefdb1f0588306",
    "line" : 76,
    "diffHunk" : "@@ -1,1 +419,423 @@        assertEquals(\"Allocation shouldn't have happened yet, waiting on memory\", numWorkers, completed.getCount());\n\n        // Close the buffer pool. This should notify all waiters.\n        pool.close();\n"
  }
]