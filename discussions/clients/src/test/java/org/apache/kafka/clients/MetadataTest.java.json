[
  {
    "id" : "644c3c1a-fe4d-47d2-af62-6b50cbd75dfe",
    "prId" : 5027,
    "prUrl" : "https://github.com/apache/kafka/pull/5027#pullrequestreview-121586884",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9d70226c-d7c2-460c-a8e5-f7b2f8153f94",
        "parentId" : null,
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "Don't we need to update this?",
        "createdAt" : "2018-05-18T21:10:15Z",
        "updatedAt" : "2018-07-20T20:23:18Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      },
      {
        "id" : "0d003527-ca53-4a48-af88-9244245bf199",
        "parentId" : "9d70226c-d7c2-460c-a8e5-f7b2f8153f94",
        "authorId" : "93b1c273-8917-4547-bd53-5101f22161c0",
        "body" : "Related to the other comment - `Metadata#update` throws `IllegalStateException` when invoked after `close`.",
        "createdAt" : "2018-05-18T22:17:06Z",
        "updatedAt" : "2018-07-20T20:23:18Z",
        "lastEditedBy" : "93b1c273-8917-4547-bd53-5101f22161c0",
        "tags" : [
        ]
      }
    ],
    "commit" : "a2ba5e2150f77331eebebcfdeb56e84bf747cb5b",
    "line" : 39,
    "diffHunk" : "@@ -1,1 +103,107 @@    }\n\n    @Test(expected = IllegalStateException.class)\n    public void testMetadataUpdateAfterClose() {\n        metadata.close();"
  },
  {
    "id" : "5a8efc18-07f2-45d7-beda-8fe76fa9c8d3",
    "prId" : 5027,
    "prUrl" : "https://github.com/apache/kafka/pull/5027#pullrequestreview-121595262",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "44cf4c91-0232-43b4-b807-04a41455c3b7",
        "parentId" : null,
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "Hmm.. The old logic would let us continue fetching in the case of a timeout. Do you think that was not intentional?",
        "createdAt" : "2018-05-18T21:23:53Z",
        "updatedAt" : "2018-07-20T20:23:18Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      },
      {
        "id" : "747bf500-52aa-4d3c-adff-bf82bb73590e",
        "parentId" : "44cf4c91-0232-43b4-b807-04a41455c3b7",
        "authorId" : "93b1c273-8917-4547-bd53-5101f22161c0",
        "body" : "Even if we continued fetching, we would have failed the test at the end. `tearDown()` checks if we saw any background errors and fails the test if we did, so I thought that this change should be reasonable. Let me know if you think otherwise.",
        "createdAt" : "2018-05-18T23:15:09Z",
        "updatedAt" : "2018-07-20T20:23:18Z",
        "lastEditedBy" : "93b1c273-8917-4547-bd53-5101f22161c0",
        "tags" : [
        ]
      }
    ],
    "commit" : "a2ba5e2150f77331eebebcfdeb56e84bf747cb5b",
    "line" : 61,
    "diffHunk" : "@@ -1,1 +442,446 @@        Thread thread = new Thread() {\n            public void run() {\n                try {\n                    while (metadata.fetch().partitionsForTopic(topic).isEmpty())\n                        metadata.awaitUpdate(metadata.requestUpdate(), maxWaitMs);"
  }
]