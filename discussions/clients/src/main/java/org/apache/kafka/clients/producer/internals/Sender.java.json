[
  {
    "id" : "7562ff92-5c5c-4b09-80ad-f276a84f83dd",
    "prId" : 4842,
    "prUrl" : "https://github.com/apache/kafka/pull/4842#pullrequestreview-110612031",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c6525936-db8c-45b7-be11-506b16d42ec9",
        "parentId" : null,
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "The problem was basically that `initiateClose` set `running` to true, which prevented the transactional request from being sent. That in turn kept batched records stuck in the accumulator and prevented shutdown from completing.",
        "createdAt" : "2018-04-09T20:35:18Z",
        "updatedAt" : "2018-04-09T20:36:05Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      },
      {
        "id" : "91db41a6-e9e8-4310-9448-2282227d1284",
        "parentId" : "c6525936-db8c-45b7-be11-506b16d42ec9",
        "authorId" : "0e2392fc-5c22-4c17-aa96-3025239a3098",
        "body" : "nit (for documentation): `initiateClose` would set running to `false`.",
        "createdAt" : "2018-04-09T20:51:03Z",
        "updatedAt" : "2018-04-09T20:51:04Z",
        "lastEditedBy" : "0e2392fc-5c22-4c17-aa96-3025239a3098",
        "tags" : [
        ]
      }
    ],
    "commit" : "838bd87e8ba5954bc0db115f5c8ae7be7d03bf87",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +330,334 @@\n        AbstractRequest.Builder<?> requestBuilder = nextRequestHandler.requestBuilder();\n        while (!forceClose) {\n            Node targetNode = null;\n            try {"
  },
  {
    "id" : "17b5ceb1-c886-4e50-a931-d7b60619c600",
    "prId" : 5270,
    "prUrl" : "https://github.com/apache/kafka/pull/5270#pullrequestreview-140441821",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6e6a491a-a43c-41a1-af27-1aecc2637a82",
        "parentId" : null,
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "If `batches` is empty, should we remove the list from `inFlightBatches`?",
        "createdAt" : "2018-07-25T06:10:12Z",
        "updatedAt" : "2018-07-26T15:53:34Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      },
      {
        "id" : "4bd040ed-1e1e-49e2-883b-40940dce3a31",
        "parentId" : "6e6a491a-a43c-41a1-af27-1aecc2637a82",
        "authorId" : "a962e9bb-bf94-4294-b23c-d279e1e69019",
        "body" : "updated the change to remove the list from `inFlightBatches` when it is empty. ",
        "createdAt" : "2018-07-25T18:25:05Z",
        "updatedAt" : "2018-07-26T15:53:34Z",
        "lastEditedBy" : "a962e9bb-bf94-4294-b23c-d279e1e69019",
        "tags" : [
        ]
      }
    ],
    "commit" : "b9aa6b1706e2e374c20d710567a64b0328fe3119",
    "line" : 39,
    "diffHunk" : "@@ -1,1 +164,168 @@    public void maybeRemoveFromInflightBatches(ProducerBatch batch) {\n        List<ProducerBatch> batches = inFlightBatches.get(batch.topicPartition);\n        if (batches != null) {\n            batches.remove(batch);\n            if (batches.isEmpty()) {"
  }
]