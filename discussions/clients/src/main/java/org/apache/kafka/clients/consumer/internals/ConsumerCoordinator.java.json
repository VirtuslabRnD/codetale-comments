[
  {
    "id" : "6671866e-3f4c-4d12-a9fe-4afb289ff7cc",
    "prId" : 4326,
    "prUrl" : "https://github.com/apache/kafka/pull/4326#pullrequestreview-148319429",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3ae1a272-160a-4ff8-a15b-31fbbec3e16a",
        "parentId" : null,
        "authorId" : "3e414f4e-e846-4984-a05e-2537617c5141",
        "body" : "This modification can lead to repeated commit offset because of nextAutoCommitDeadline has not increased. Could someone tell me this is normal or correct me if I am wrong",
        "createdAt" : "2018-08-22T03:03:44Z",
        "updatedAt" : "2018-08-22T03:18:45Z",
        "lastEditedBy" : "3e414f4e-e846-4984-a05e-2537617c5141",
        "tags" : [
        ]
      }
    ],
    "commit" : "d5426e18c6c8136578819b36e66bc663a547ddf5",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +626,630 @@\n    public void maybeAutoCommitOffsetsAsync(long now) {\n        if (autoCommitEnabled && now >= nextAutoCommitDeadline) {\n            doAutoCommitOffsetsAsync();\n        }"
  },
  {
    "id" : "2c32c672-16f3-4724-85f4-6219736b1433",
    "prId" : 4855,
    "prUrl" : "https://github.com/apache/kafka/pull/4855#pullrequestreview-123424401",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b4454c7d-ce3f-46d3-8221-e0616abd7305",
        "parentId" : null,
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "Same comment as before. We can skip the time system calls by passing the current time since the common case is that no work needs to be done here.",
        "createdAt" : "2018-05-25T16:37:44Z",
        "updatedAt" : "2018-05-26T00:00:49Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      }
    ],
    "commit" : "c3fce0f22e8b12e03475212b2bf07e69bc230362",
    "line" : 62,
    "diffHunk" : "@@ -1,1 +302,306 @@     * @return true iff the operation succeeded\n     */\n    public boolean poll(final long timeoutMs) {\n        final long startTime = time.milliseconds();\n        long elapsed = 0L;"
  },
  {
    "id" : "f3b31834-794f-4e57-b4a8-d406a4d40eff",
    "prId" : 4855,
    "prUrl" : "https://github.com/apache/kafka/pull/4855#pullrequestreview-123564019",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a5b43e6d-ff28-4c3d-b1e4-f065329ee250",
        "parentId" : null,
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "I guess it's tough to avoid blocking here. All of this would be considerably easier if we moved the rebalance to the background thread. Another improvement for another time.",
        "createdAt" : "2018-05-26T18:37:58Z",
        "updatedAt" : "2018-05-26T18:38:50Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      }
    ],
    "commit" : "c3fce0f22e8b12e03475212b2bf07e69bc230362",
    "line" : 139,
    "diffHunk" : "@@ -1,1 +395,399 @@        // update metadata (if needed) and keep track of the metadata used for assignment so that\n        // we can check after rebalance completion whether anything has changed\n        if (!client.ensureFreshMetadata(Long.MAX_VALUE)) throw new TimeoutException();\n\n        isLeader = true;"
  },
  {
    "id" : "06b15bbc-788d-4672-a79a-69786d7430d7",
    "prId" : 4855,
    "prUrl" : "https://github.com/apache/kafka/pull/4855#pullrequestreview-124078456",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "31947692-17b7-4eee-a83e-d5c329f4b07a",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "The names here are a bit misleading, maybe we can fix them in https://github.com/apache/kafka/pull/5087? cc @hachikuji . I'm thinking `requestedPartitions` and `requestedGeneration`?",
        "createdAt" : "2018-05-29T16:46:07Z",
        "updatedAt" : "2018-05-29T16:49:07Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      }
    ],
    "commit" : "c3fce0f22e8b12e03475212b2bf07e69bc230362",
    "line" : 16,
    "diffHunk" : "@@ -1,1 +92,96 @@\n    private static class PendingCommittedOffsetRequest {\n        private final Set<TopicPartition> request;\n        private final Generation generation;\n        private final RequestFuture<Map<TopicPartition, OffsetAndMetadata>> response;"
  },
  {
    "id" : "7494aeb2-15f7-44d5-b62b-0025b58018ec",
    "prId" : 4855,
    "prUrl" : "https://github.com/apache/kafka/pull/4855#pullrequestreview-124078456",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5dc8b301-9597-48fd-aa43-bd7436488175",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "We have three `remainingTimeAtLeastZero` functions, in AbstractCoordinator, ConsumerCoordinator and KafkaConsumer. Is it intentional? If not we could leave just one to avoid unintentional code divergence in the future. cc @vvcephei ",
        "createdAt" : "2018-05-29T16:48:02Z",
        "updatedAt" : "2018-05-29T16:49:07Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      }
    ],
    "commit" : "c3fce0f22e8b12e03475212b2bf07e69bc230362",
    "line" : 124,
    "diffHunk" : "@@ -1,1 +353,357 @@    }\n\n    private long remainingTimeAtLeastZero(final long timeoutMs, final long elapsed) {\n        return Math.max(0, timeoutMs - elapsed);\n    }"
  }
]