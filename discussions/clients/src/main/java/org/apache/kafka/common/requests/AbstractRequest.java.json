[
  {
    "id" : "313a908e-c893-47ec-a74c-234eb7b29a4b",
    "prId" : 7409,
    "prUrl" : "https://github.com/apache/kafka/pull/7409#pullrequestreview-546577475",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "eb5c06fc-8976-4b9b-8357-33facf0e4b60",
        "parentId" : null,
        "authorId" : "0f776378-bb23-4193-9bb0-1db5973f3781",
        "body" : "How about moving this method to test code? ```MessageTestUtil``` could be a good place. ",
        "createdAt" : "2020-12-04T14:40:15Z",
        "updatedAt" : "2020-12-04T15:46:21Z",
        "lastEditedBy" : "0f776378-bb23-4193-9bb0-1db5973f3781",
        "tags" : [
        ]
      },
      {
        "id" : "763d47ec-ef8d-4aa6-9153-b021e96c82c4",
        "parentId" : "eb5c06fc-8976-4b9b-8357-33facf0e4b60",
        "authorId" : "0f776378-bb23-4193-9bb0-1db5973f3781",
        "body" : "ditto for following \"Visible for testing\" code",
        "createdAt" : "2020-12-04T14:41:53Z",
        "updatedAt" : "2020-12-04T15:46:21Z",
        "lastEditedBy" : "0f776378-bb23-4193-9bb0-1db5973f3781",
        "tags" : [
        ]
      },
      {
        "id" : "d8a047db-c658-4099-b754-57591808cec8",
        "parentId" : "eb5c06fc-8976-4b9b-8357-33facf0e4b60",
        "authorId" : "0f776378-bb23-4193-9bb0-1db5973f3781",
        "body" : "BTW, this method is duplicate to TestUtils#serializeRequestHeader",
        "createdAt" : "2020-12-04T15:38:07Z",
        "updatedAt" : "2020-12-04T15:46:21Z",
        "lastEditedBy" : "0f776378-bb23-4193-9bb0-1db5973f3781",
        "tags" : [
        ]
      },
      {
        "id" : "ee4bee13-3155-4e26-8cae-2f030dcd6bf4",
        "parentId" : "eb5c06fc-8976-4b9b-8357-33facf0e4b60",
        "authorId" : "d8c7cf80-a55a-474c-a4f4-f60a9efda52c",
        "body" : "This method serializes the request with the header while the test method serializes the header only. So, not a duplicate, right? Personally, I think it's useful for the class to be symmetric: it can parse from a buffer and serialize to a buffer. Do you have a concern that it may be misused?",
        "createdAt" : "2020-12-04T16:13:01Z",
        "updatedAt" : "2020-12-04T16:13:01Z",
        "lastEditedBy" : "d8c7cf80-a55a-474c-a4f4-f60a9efda52c",
        "tags" : [
        ]
      },
      {
        "id" : "17ff19ab-5097-42a7-b7ce-7a3e13426308",
        "parentId" : "eb5c06fc-8976-4b9b-8357-33facf0e4b60",
        "authorId" : "d8c7cf80-a55a-474c-a4f4-f60a9efda52c",
        "body" : "There is a reasonable argument that `serializeBody` is the counterpart to `parse` though and this particular method doesn't have to be here. I can buy that.",
        "createdAt" : "2020-12-04T16:14:32Z",
        "updatedAt" : "2020-12-04T16:14:32Z",
        "lastEditedBy" : "d8c7cf80-a55a-474c-a4f4-f60a9efda52c",
        "tags" : [
        ]
      },
      {
        "id" : "97f7443b-603b-42a2-8158-8aa763fd8221",
        "parentId" : "eb5c06fc-8976-4b9b-8357-33facf0e4b60",
        "authorId" : "0f776378-bb23-4193-9bb0-1db5973f3781",
        "body" : "> Do you have a concern that it may be misused?\r\n\r\nyes. Also the various serialization methods are a bit chaos to me :(",
        "createdAt" : "2020-12-04T16:19:02Z",
        "updatedAt" : "2020-12-04T16:19:10Z",
        "lastEditedBy" : "0f776378-bb23-4193-9bb0-1db5973f3781",
        "tags" : [
        ]
      },
      {
        "id" : "6ba61453-2301-4af0-b262-ee19fe8164ff",
        "parentId" : "eb5c06fc-8976-4b9b-8357-33facf0e4b60",
        "authorId" : "0f776378-bb23-4193-9bb0-1db5973f3781",
        "body" : "Maybe we should move all testing-only serialization to a single utils (in test scope). I grep \"static ByteBuffer\" + \"request/response\" and ```MessageUtils```, ```MessageTestUtil```, ```RequestUtils``` and ```TestUtils``` have similar method interface.",
        "createdAt" : "2020-12-04T16:30:02Z",
        "updatedAt" : "2020-12-04T16:30:02Z",
        "lastEditedBy" : "0f776378-bb23-4193-9bb0-1db5973f3781",
        "tags" : [
        ]
      },
      {
        "id" : "61c3d2a6-a39b-41d2-bdde-89312409a7ed",
        "parentId" : "eb5c06fc-8976-4b9b-8357-33facf0e4b60",
        "authorId" : "d8c7cf80-a55a-474c-a4f4-f60a9efda52c",
        "body" : "I have a refactoring that consolidates the logic around `Send`. But I think that would be best done in a separate PR since this PR is really massive. Since these methods are all in internal classes and are only used by tests, I suggest we keep them as they are for now and tackle these nits in the follow up PR.",
        "createdAt" : "2020-12-07T22:05:29Z",
        "updatedAt" : "2020-12-07T22:05:29Z",
        "lastEditedBy" : "d8c7cf80-a55a-474c-a4f4-f60a9efda52c",
        "tags" : [
        ]
      },
      {
        "id" : "c4d77b8c-b65c-42f1-b49d-8162cbd0819d",
        "parentId" : "eb5c06fc-8976-4b9b-8357-33facf0e4b60",
        "authorId" : "d8c7cf80-a55a-474c-a4f4-f60a9efda52c",
        "body" : "I have these changes locally, so I can submit them immediately after.",
        "createdAt" : "2020-12-07T22:06:27Z",
        "updatedAt" : "2020-12-07T22:06:27Z",
        "lastEditedBy" : "d8c7cf80-a55a-474c-a4f4-f60a9efda52c",
        "tags" : [
        ]
      }
    ],
    "commit" : "ad0e0d534090ffe2bec563592f556f4e2c7ed06a",
    "line" : 57,
    "diffHunk" : "@@ -1,1 +103,107 @@\n    // Visible for testing\n    public final ByteBuffer serializeWithHeader(RequestHeader header) {\n        return RequestUtils.serialize(header.data(), header.headerVersion(), data(), version);\n    }"
  },
  {
    "id" : "14782528-282b-4ddc-88f3-f10a9313a826",
    "prId" : 7409,
    "prUrl" : "https://github.com/apache/kafka/pull/7409#pullrequestreview-546575579",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b6052c3e-8a3c-42b3-94de-fbea1d4309b0",
        "parentId" : null,
        "authorId" : "0f776378-bb23-4193-9bb0-1db5973f3781",
        "body" : "Is this toString variety still useful?",
        "createdAt" : "2020-12-04T14:44:42Z",
        "updatedAt" : "2020-12-04T15:46:21Z",
        "lastEditedBy" : "0f776378-bb23-4193-9bb0-1db5973f3781",
        "tags" : [
        ]
      },
      {
        "id" : "97194eea-d723-4c6b-a3de-cd72a9110efe",
        "parentId" : "b6052c3e-8a3c-42b3-94de-fbea1d4309b0",
        "authorId" : "d8c7cf80-a55a-474c-a4f4-f60a9efda52c",
        "body" : "I think so. Do you think it's not?",
        "createdAt" : "2020-12-04T15:57:40Z",
        "updatedAt" : "2020-12-04T15:57:41Z",
        "lastEditedBy" : "d8c7cf80-a55a-474c-a4f4-f60a9efda52c",
        "tags" : [
        ]
      },
      {
        "id" : "d8219635-146c-4981-baee-8f8980b88b67",
        "parentId" : "b6052c3e-8a3c-42b3-94de-fbea1d4309b0",
        "authorId" : "d8c7cf80-a55a-474c-a4f4-f60a9efda52c",
        "body" : "Sorry, what do you mean by `variety`? The `verbose` boolean? Yes, that is useful for things like fetch and produce.",
        "createdAt" : "2020-12-04T15:58:06Z",
        "updatedAt" : "2020-12-04T15:58:06Z",
        "lastEditedBy" : "d8c7cf80-a55a-474c-a4f4-f60a9efda52c",
        "tags" : [
        ]
      },
      {
        "id" : "38ac1661-eb65-4496-8eda-97a2bc9342e3",
        "parentId" : "b6052c3e-8a3c-42b3-94de-fbea1d4309b0",
        "authorId" : "0f776378-bb23-4193-9bb0-1db5973f3781",
        "body" : "It seems only ```ProduceRequest``` does produce verbose string. Maybe we can remove the ```toString(boolean verbose)``` as most requests does not generate verbose string. Also, ```ProduceRequest``` should override ```toString()``` to generate a verbose string always. ",
        "createdAt" : "2020-12-04T16:05:03Z",
        "updatedAt" : "2020-12-04T16:05:03Z",
        "lastEditedBy" : "0f776378-bb23-4193-9bb0-1db5973f3781",
        "tags" : [
        ]
      },
      {
        "id" : "37bf1913-0d7f-4273-89c7-20434448056a",
        "parentId" : "b6052c3e-8a3c-42b3-94de-fbea1d4309b0",
        "authorId" : "d8c7cf80-a55a-474c-a4f4-f60a9efda52c",
        "body" : "The verbosity flag is used for request logging. Produce and fetch are the most important ones. The rest can be ignored. I don't see the benefit in removing this functionality.",
        "createdAt" : "2020-12-07T22:03:49Z",
        "updatedAt" : "2020-12-07T22:03:50Z",
        "lastEditedBy" : "d8c7cf80-a55a-474c-a4f4-f60a9efda52c",
        "tags" : [
        ]
      }
    ],
    "commit" : "ad0e0d534090ffe2bec563592f556f4e2c7ed06a",
    "line" : 76,
    "diffHunk" : "@@ -1,1 +120,124 @@\n    public String toString(boolean verbose) {\n        return data().toString();\n    }\n"
  }
]