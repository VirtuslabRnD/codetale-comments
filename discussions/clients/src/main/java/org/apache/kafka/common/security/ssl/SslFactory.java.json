[
  {
    "id" : "aa4a3837-ecd2-499c-9d09-8e64face0440",
    "prId" : 4263,
    "prUrl" : "https://github.com/apache/kafka/pull/4263#pullrequestreview-85102648",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f54b8558-a8d5-4a79-b422-c83c68da60f5",
        "parentId" : null,
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "Can you explain why we need this check? Aren't we already checking the result of `getHandshakeStatus()`? ",
        "createdAt" : "2017-12-20T22:04:14Z",
        "updatedAt" : "2018-01-19T13:34:10Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      },
      {
        "id" : "ae0617f1-59c8-472d-8929-0487f7887f15",
        "parentId" : "f54b8558-a8d5-4a79-b422-c83c68da60f5",
        "authorId" : "b4936a15-698a-496e-85a1-b1e229b4986b",
        "body" : "I am not sure we hit this case, but I wanted to be cautious. It is because both handshake result and sslEngine store handshake status and they may not be the same.",
        "createdAt" : "2017-12-21T15:54:35Z",
        "updatedAt" : "2018-01-19T13:34:10Z",
        "lastEditedBy" : "b4936a15-698a-496e-85a1-b1e229b4986b",
        "tags" : [
        ]
      }
    ],
    "commit" : "7d7e19562c3db9e224ad0933b90f58446641c527",
    "line" : 328,
    "diffHunk" : "@@ -1,1 +389,393 @@                        return;\n                    case NOT_HANDSHAKING:\n                        if (handshakeResult.getHandshakeStatus() != SSLEngineResult.HandshakeStatus.FINISHED)\n                            throw new SSLException(\"Did not finish handshake\");\n                        return;"
  },
  {
    "id" : "acf0544d-e437-4306-a6fe-90f2168e4487",
    "prId" : 4263,
    "prUrl" : "https://github.com/apache/kafka/pull/4263#pullrequestreview-85100900",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "000a7836-a55a-44dd-91ea-4580cf65fff1",
        "parentId" : null,
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "As far as I can tell, every time we iterate the loop, we update `handshakeStatus`. Would it make sense to move its initialization to the first line in the loop and remove these updates?",
        "createdAt" : "2017-12-20T22:05:27Z",
        "updatedAt" : "2018-01-19T13:34:10Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      },
      {
        "id" : "eff80d5c-05f9-4d42-a744-65e29d105313",
        "parentId" : "000a7836-a55a-44dd-91ea-4580cf65fff1",
        "authorId" : "b4936a15-698a-496e-85a1-b1e229b4986b",
        "body" : "For the `unwrap` case, we get the result from the handshake result of unwrap, so it is different from delegated tasks where the latest status is from the sslEngine. The logic here is the same as `SslTransportLayer` and that contains a lot more comments. Unfortunately it would be too messy to combine the two, so I tried to make this as small as possible.",
        "createdAt" : "2017-12-21T15:49:08Z",
        "updatedAt" : "2018-01-19T13:34:10Z",
        "lastEditedBy" : "b4936a15-698a-496e-85a1-b1e229b4986b",
        "tags" : [
        ]
      }
    ],
    "commit" : "7d7e19562c3db9e224ad0933b90f58446641c527",
    "line" : 323,
    "diffHunk" : "@@ -1,1 +384,388 @@                    case NEED_TASK:\n                        sslEngine.getDelegatedTask().run();\n                        handshakeStatus = sslEngine.getHandshakeStatus();\n                        break;\n                    case FINISHED:"
  }
]