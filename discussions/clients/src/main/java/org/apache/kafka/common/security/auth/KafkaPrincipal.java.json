[
  {
    "id" : "39a0c151-4f79-4404-bebb-a3da710249da",
    "prId" : 4524,
    "prUrl" : "https://github.com/apache/kafka/pull/4524#pullrequestreview-94092939",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5a8e770a-05a3-47c7-833f-a43739e8a27f",
        "parentId" : null,
        "authorId" : "915b2f67-05e6-4824-939a-398e7be58870",
        "body" : "Can we remove the unused constructor now?\r\nAlso, I think I mistakenly updated the hashcode method. I can submit a minor PR.",
        "createdAt" : "2018-02-05T14:55:18Z",
        "updatedAt" : "2018-02-07T09:20:52Z",
        "lastEditedBy" : "915b2f67-05e6-4824-939a-398e7be58870",
        "tags" : [
        ]
      },
      {
        "id" : "cc933cc0-ccea-4c17-bc7f-6577c3eb35eb",
        "parentId" : "5a8e770a-05a3-47c7-833f-a43739e8a27f",
        "authorId" : "b4936a15-698a-496e-85a1-b1e229b4986b",
        "body" : "@omkreddy Thanks for the review. Removed the unused constructor. I updated `hashcode` as well, but just to be sure: was it intentional not to compare `tokenAuthenticated` for `KafkaPrincipal#equals`?",
        "createdAt" : "2018-02-05T15:15:53Z",
        "updatedAt" : "2018-02-07T09:20:52Z",
        "lastEditedBy" : "b4936a15-698a-496e-85a1-b1e229b4986b",
        "tags" : [
        ]
      },
      {
        "id" : "52d5770b-cb74-408b-9004-9dd4978cdfd9",
        "parentId" : "5a8e770a-05a3-47c7-833f-a43739e8a27f",
        "authorId" : "915b2f67-05e6-4824-939a-398e7be58870",
        "body" : "Yes, it was intentional.  During authorization checks, we compare incoming session principal  with principals stored on acl cache/store.  tokenAuthenticated field has no meaning for stored acls/principals. So we are ignoring tokenAuthenticated while comparing principals.\r\n\r\nAnother option is to move tokenAuthenticated field to Session/RequestContext objects. This may require adding new tokenAuthenticated() method to Authenticator interface.\r\nLet me know if there are any other ideas. \r\n",
        "createdAt" : "2018-02-05T17:48:20Z",
        "updatedAt" : "2018-02-07T09:20:52Z",
        "lastEditedBy" : "915b2f67-05e6-4824-939a-398e7be58870",
        "tags" : [
        ]
      },
      {
        "id" : "323a7562-7688-43e2-ba0c-73f722a93720",
        "parentId" : "5a8e770a-05a3-47c7-833f-a43739e8a27f",
        "authorId" : "b4936a15-698a-496e-85a1-b1e229b4986b",
        "body" : "I had initially moved `tokenAuthenticated()` to `RequestContext`, but then moved it back to `KafkaPrincipal`. I was thinking that we may one day want to do something different with ACLs for token-authenticated principals. Or a custom ACL authorizer could deny some operations for token-authenticated principals, so it may be useful to keep it there.",
        "createdAt" : "2018-02-05T18:28:18Z",
        "updatedAt" : "2018-02-07T09:20:52Z",
        "lastEditedBy" : "b4936a15-698a-496e-85a1-b1e229b4986b",
        "tags" : [
        ]
      }
    ],
    "commit" : "9e8006c965231c323378c11a824e0493ae56d8f8",
    "line" : 30,
    "diffHunk" : "@@ -1,1 +99,103 @@    }\n\n    public void tokenAuthenticated(boolean tokenAuthenticated) {\n        this.tokenAuthenticated = tokenAuthenticated;\n    }"
  }
]