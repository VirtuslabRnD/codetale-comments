[
  {
    "id" : "8451bcdf-035e-417c-9abf-a9b199dde29d",
    "prId" : 7296,
    "prUrl" : "https://github.com/apache/kafka/pull/7296#pullrequestreview-297748873",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a9f2b168-0444-4159-8afa-df80e83cff57",
        "parentId" : null,
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "Not something we have to do here, but one way we could improve this in the future is by taking into account leader epoch information from individual partitions. We can ensure that epochs increase monotonically in order to prevent using stale information during retry. \r\n\r\nAnother thing we could do is reduce the topics we are fetching metadata for as the ListOffsets requests complete. Ideally we'd only be refetching metadata for topics with metadata errors.",
        "createdAt" : "2019-10-04T21:41:32Z",
        "updatedAt" : "2019-10-19T14:50:21Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      },
      {
        "id" : "8c0693f9-4cad-4e5c-8cde-57c3b2f401ff",
        "parentId" : "a9f2b168-0444-4159-8afa-df80e83cff57",
        "authorId" : "d31db46e-de6d-4fea-8dc5-6f7b17b636be",
        "body" : "Yes these improvements would be nice. At the moment, I've kept it very simple and just make it retry the full metadata request every time.",
        "createdAt" : "2019-10-04T22:47:58Z",
        "updatedAt" : "2019-10-19T14:50:21Z",
        "lastEditedBy" : "d31db46e-de6d-4fea-8dc5-6f7b17b636be",
        "tags" : [
        ]
      }
    ],
    "commit" : "adb3377352be6336d1586a4a160eedbcd5a9a021",
    "line" : 41,
    "diffHunk" : "@@ -1,1 +39,43 @@ * @param <O> The type of configuration option.\n */\npublic final class MetadataOperationContext<T, O extends AbstractOptions<O>> {\n    final private Collection<String> topics;\n    final private O options;"
  }
]