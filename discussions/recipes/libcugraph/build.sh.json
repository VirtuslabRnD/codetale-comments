[
  {
    "id" : "8b83dc96-b1bb-40c6-836a-61a6da6dd7ec",
    "prId" : 14546,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/14546#pullrequestreview-637232764",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "092b081f-c9e3-43c6-beba-91c1fdfb118c",
        "parentId" : null,
        "authorId" : "8acc2b00-986c-40be-a345-a0ce5205c09a",
        "body" : "Maybe this would help?\r\n\r\n```suggestion\r\n      -DDISABLE_DEPRECATION_WARNING=${BUILD_DISABLE_DEPRECATION_WARNING} \\\r\n      -DTHREADS_PREFER_PTHREAD_FLAG=TRUE \\\r\n```\r\n\r\nhttps://cmake.org/cmake/help/latest/module/FindThreads.html",
        "createdAt" : "2021-04-14T20:44:25Z",
        "updatedAt" : "2021-04-21T00:39:28Z",
        "lastEditedBy" : "8acc2b00-986c-40be-a345-a0ce5205c09a",
        "tags" : [
        ]
      },
      {
        "id" : "50af0c89-1206-4492-89ed-87fcbef31180",
        "parentId" : "092b081f-c9e3-43c6-beba-91c1fdfb118c",
        "authorId" : "5b4e3617-4732-4e34-a7c5-a5045ead13a3",
        "body" : "The output in the log you linked above was the last entry in the CMakeError.log, which was populated as cmake was attempting to find libpthreads. It later correctly found libpthread on it's own:\r\n![image](https://user-images.githubusercontent.com/3039903/114953636-64a9f700-9e1e-11eb-959c-81c64f6fe4cd.png)\r\nI think dumping the CMakeError.log was confusing here since it made it look like the root cause was related to the (expected) failed libpthreads check.  I've removed the line that dumps these logs, but maybe I can add formatting to make it more obvious that the last output of cmake to start with will be above the log dumps.",
        "createdAt" : "2021-04-16T00:14:18Z",
        "updatedAt" : "2021-04-21T00:39:28Z",
        "lastEditedBy" : "5b4e3617-4732-4e34-a7c5-a5045ead13a3",
        "tags" : [
        ]
      }
    ],
    "commit" : "75ef8ff5d2e04906cca332868d548ab6abc7d195",
    "line" : 41,
    "diffHunk" : "@@ -1,1 +39,43 @@cmake -DCMAKE_INSTALL_PREFIX=${INSTALL_PREFIX} \\\n      -DGPU_ARCHS=${GPU_ARCHS} \\\n      -DDISABLE_DEPRECATION_WARNING=${BUILD_DISABLE_DEPRECATION_WARNING} \\\n      -DCMAKE_BUILD_TYPE=${BUILD_TYPE} \\\n      -DBUILD_STATIC_FAISS=${BUILD_STATIC_FAISS} \\"
  },
  {
    "id" : "bc8ad893-ec41-40f4-bb1f-2cf0089c6b7d",
    "prId" : 14546,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/14546#pullrequestreview-637232764",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a5f1780f-a63c-4dae-a2ec-a2f69bd1273a",
        "parentId" : null,
        "authorId" : "a3f1fdb0-47ad-411e-b63d-af6fc71a1fa6",
        "body" : "Maybe this would help?\r\n\r\n```suggestion\r\n      -DDISABLE_DEPRECATION_WARNING=${BUILD_DISABLE_DEPRECATION_WARNING} \\\r\n      -DTHREADS_PREFER_PTHREAD_FLAG=TRUE \\\r\n```\r\n\r\nhttps://cmake.org/cmake/help/latest/module/FindThreads.html",
        "createdAt" : "2021-04-14T20:44:25Z",
        "updatedAt" : "2021-04-21T00:39:28Z",
        "lastEditedBy" : "a3f1fdb0-47ad-411e-b63d-af6fc71a1fa6",
        "tags" : [
        ]
      },
      {
        "id" : "b0ce0aee-cfd9-48f7-87da-ab6c671bd7e5",
        "parentId" : "a5f1780f-a63c-4dae-a2ec-a2f69bd1273a",
        "authorId" : "8a4a5da1-8e59-42d7-9397-cb59a466f413",
        "body" : "The output in the log you linked above was the last entry in the CMakeError.log, which was populated as cmake was attempting to find libpthreads. It later correctly found libpthread on it's own:\r\n![image](https://user-images.githubusercontent.com/3039903/114953636-64a9f700-9e1e-11eb-959c-81c64f6fe4cd.png)\r\nI think dumping the CMakeError.log was confusing here since it made it look like the root cause was related to the (expected) failed libpthreads check.  I've removed the line that dumps these logs, but maybe I can add formatting to make it more obvious that the last output of cmake to start with will be above the log dumps.",
        "createdAt" : "2021-04-16T00:14:18Z",
        "updatedAt" : "2021-04-21T00:39:28Z",
        "lastEditedBy" : "8a4a5da1-8e59-42d7-9397-cb59a466f413",
        "tags" : [
        ]
      }
    ],
    "commit" : "75ef8ff5d2e04906cca332868d548ab6abc7d195",
    "line" : 41,
    "diffHunk" : "@@ -1,1 +39,43 @@cmake -DCMAKE_INSTALL_PREFIX=${INSTALL_PREFIX} \\\n      -DGPU_ARCHS=${GPU_ARCHS} \\\n      -DDISABLE_DEPRECATION_WARNING=${BUILD_DISABLE_DEPRECATION_WARNING} \\\n      -DCMAKE_BUILD_TYPE=${BUILD_TYPE} \\\n      -DBUILD_STATIC_FAISS=${BUILD_STATIC_FAISS} \\"
  }
]