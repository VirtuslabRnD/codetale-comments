[
  {
    "id" : "88d14e8f-cbf5-4ee0-9ca6-17ed1a19dd21",
    "prId" : 10762,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/10762#pullrequestreview-357956851",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f23ede4f-a55c-43e0-933b-531e96b42e37",
        "parentId" : null,
        "authorId" : "4a3ee9f8-9e7c-459e-b715-28669578f2c0",
        "body" : "Probably need to add make here",
        "createdAt" : "2020-02-12T19:21:07Z",
        "updatedAt" : "2020-02-13T07:38:48Z",
        "lastEditedBy" : "4a3ee9f8-9e7c-459e-b715-28669578f2c0",
        "tags" : [
        ]
      },
      {
        "id" : "f652ff0b-2879-4819-8c24-b822077de18f",
        "parentId" : "f23ede4f-a55c-43e0-933b-531e96b42e37",
        "authorId" : "ea1e47cf-f93d-4a3f-9081-c08bf22838b6",
        "body" : "I'd love some guidance here actually. So I use\r\n\r\n```\r\ncmake \\\r\n    --build \"${BUILD_DIR}\" \\\r\n    --config Release \\\r\n    --target install\r\n```\r\n\r\nwhich means whatever the `CMAKE_GENERATOR` that was used during the configure step will get used during the build / install step.\r\n\r\nI've observed\r\n\r\n- Windows: `CMAKE_GENERATOR=NMake Makefiles`\r\n- macOS: ??\r\n- Linux: `CMAKE_GENERATOR=Unix Makefiles` (based on [this][1])\r\n\r\nHowever I am manually overriding on Windows to be `-G \"MinGW Makefiles\"`. So it seems I **do** need to depend on `make` (since `Unix Makefiles` is the default on macOS and Linux) and on Windows I need to depend on **something** that will ensure `mingw` is present. \r\n\r\nAfter reading a bit more, I think I was doing the \"wrong\" thing by relying on AppVeyor `%PATH%` manipulation to find `gfortran`. I also now realize what the `*_compiler` suffix actually does with the Jinja2 `compiler()` helper, so that on Windows when it prints\r\n\r\n```\r\n...\r\n(base) %SRC_DIR%>set \"fortran_compiler=flang\" \r\n...\r\n(base) %SRC_DIR%>set \"m2w64_fortran_compiler=m2w64-toolchain\" \r\n(base) %SRC_DIR%>set \"CMAKE_GENERATOR=NMake Makefiles\" \r\n...\r\n```\r\n\r\nThat means I should be using `{{ compiler(\"m2w64_fortran\") }}`.\r\n\r\n[1]: https://docs.conda.io/projects/conda-build/en/latest/user-guide/environment-variables.html",
        "createdAt" : "2020-02-13T05:07:43Z",
        "updatedAt" : "2020-02-13T07:38:48Z",
        "lastEditedBy" : "ea1e47cf-f93d-4a3f-9081-c08bf22838b6",
        "tags" : [
        ]
      }
    ],
    "commit" : "e02473c02d5a59973afd348f4a880a46bb75f096",
    "line" : 20,
    "diffHunk" : "@@ -1,1 +18,22 @@requirements:\n  build:\n    - cmake\n    - {{ compiler(\"fortran\") }}        # [linux or osx]\n    - make                             # [linux or osx]"
  }
]