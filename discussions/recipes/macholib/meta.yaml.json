[
  {
    "id" : "90633da5-e5e6-436c-9a92-d204d134975d",
    "prId" : 4213,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/4213#pullrequestreview-71045640",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "23364681-8e9c-413d-9f7c-eb65325d1e3b",
        "parentId" : null,
        "authorId" : "a3f1fdb0-47ad-411e-b63d-af6fc71a1fa6",
        "body" : "Not sure that this makes sense given the library is designed to parse macOS libraries. According the [trove classifier]( https://bitbucket.org/ronaldoussoren/macholib/src/53d85321baffbfd7d911572b5d37fbaa53056e5a/setup.cfg?at=default&fileviewer=file-view-default#setup.cfg-18 ), it seems the author only intends for this to work on macOS.",
        "createdAt" : "2017-10-22T17:58:35Z",
        "updatedAt" : "2017-10-22T21:49:55Z",
        "lastEditedBy" : "a3f1fdb0-47ad-411e-b63d-af6fc71a1fa6",
        "tags" : [
        ]
      },
      {
        "id" : "416c277d-c6d5-46d4-8d18-4c4ab424f23f",
        "parentId" : "23364681-8e9c-413d-9f7c-eb65325d1e3b",
        "authorId" : "3921f978-6ed8-4e1a-b966-727aa18f8dc2",
        "body" : "From the readme: \"Though this tool targets a platform specific file format, it is pure python code that is platform and endian independent.\" I think the classifier was just applied somewhat incorrectly....",
        "createdAt" : "2017-10-22T18:41:52Z",
        "updatedAt" : "2017-10-22T21:49:55Z",
        "lastEditedBy" : "3921f978-6ed8-4e1a-b966-727aa18f8dc2",
        "tags" : [
        ]
      },
      {
        "id" : "164f3715-5512-496b-bde1-50ce553b1bb6",
        "parentId" : "23364681-8e9c-413d-9f7c-eb65325d1e3b",
        "authorId" : "60916771-9540-4ffd-af68-4285b7141808",
        "body" : "Yes, that's why I thought it might be ok making this noarch. Another reason is that PyInstaller (that we were trying to package) [specifies macholib as dependency](https://github.com/pyinstaller/pyinstaller/blob/162fe92d5e852ba526332b916de621363a5f2995/setup.py#L25) for all OSs. So since it appears to be also installing it in CI, I wasn't sure that not providing it e.g. on Linux would work (it might just raise an import error)...",
        "createdAt" : "2017-10-22T21:32:26Z",
        "updatedAt" : "2017-10-22T21:49:55Z",
        "lastEditedBy" : "60916771-9540-4ffd-af68-4285b7141808",
        "tags" : [
        ]
      }
    ],
    "commit" : "63790e5334a5bc002dbc3f1159edd6589aa38e0f",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +13,17 @@\nbuild:\n  noarch: python\n  number: 0\n  script: python setup.py install --single-version-externally-managed --record record.txt"
  },
  {
    "id" : "ae9ddfee-1a8e-4565-85e8-560e92a118d3",
    "prId" : 4213,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/4213#pullrequestreview-71520969",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fe156a95-ea4d-4016-b1c8-6ffe0425a783",
        "parentId" : null,
        "authorId" : "3921f978-6ed8-4e1a-b966-727aa18f8dc2",
        "body" : "Could you also add a `commands` section that tests the `macho_find`, `macho_standalone`, and/or `macho_dump` scripts? These might require [adding `entry_point`s](https://conda.io/docs/user-guide/tasks/build-packages/define-metadata.html#python-entry-points) to the recipe to work.",
        "createdAt" : "2017-10-22T18:41:10Z",
        "updatedAt" : "2017-10-22T21:49:55Z",
        "lastEditedBy" : "3921f978-6ed8-4e1a-b966-727aa18f8dc2",
        "tags" : [
        ]
      },
      {
        "id" : "2da658f1-ad80-46f1-b1e6-8cb02501137e",
        "parentId" : "fe156a95-ea4d-4016-b1c8-6ffe0425a783",
        "authorId" : "60916771-9540-4ffd-af68-4285b7141808",
        "body" : "@dougalsutherland [Those entry points are deprecated (for the last 3 versions)](https://bitbucket.org/ronaldoussoren/macholib/src/121a955388293c67570d755598091bca5262fbb9/macholib/macho_dump.py?at=macholib-1.6.0&fileviewer=file-view-default#macho_dump.py-41) in favour of the code in `__main__.py`.\r\n\r\n I have added some `commands` tests with `python -m macholib find ...` as suggested in the deprecation message. I imagine one would need to run on some mac files to get a meaningful output though...",
        "createdAt" : "2017-10-22T21:46:34Z",
        "updatedAt" : "2017-10-22T21:49:55Z",
        "lastEditedBy" : "60916771-9540-4ffd-af68-4285b7141808",
        "tags" : [
        ]
      },
      {
        "id" : "99b2d484-b789-43e2-9d62-8a773b1cbed8",
        "parentId" : "fe156a95-ea4d-4016-b1c8-6ffe0425a783",
        "authorId" : "60916771-9540-4ffd-af68-4285b7141808",
        "body" : "Looking at CI, `python -m macholib standalone /tmp/` [doesn't exist with a status 0 in CircleCI](https://circleci.com/gh/conda-forge/staged-recipes/20821?utm_campaign=vcs-integration-link&utm_medium=referral&utm_source=github-build-link) because,\r\n```\r\n/tmp/ does not look like an app bundle\r\n```\r\nthe `python -m macholib dump` also needs some specific files. The only one that can be run without those files is `python -m macholib find DIR`, I removed the other two.",
        "createdAt" : "2017-10-22T21:53:07Z",
        "updatedAt" : "2017-10-23T16:28:07Z",
        "lastEditedBy" : "60916771-9540-4ffd-af68-4285b7141808",
        "tags" : [
        ]
      },
      {
        "id" : "7b89fc05-5b92-4284-b13f-fa80fe3b9ca9",
        "parentId" : "fe156a95-ea4d-4016-b1c8-6ffe0425a783",
        "authorId" : "a3f1fdb0-47ad-411e-b63d-af6fc71a1fa6",
        "body" : "Do they take `--help` or something like that?",
        "createdAt" : "2017-10-22T21:54:30Z",
        "updatedAt" : "2017-10-22T21:54:30Z",
        "lastEditedBy" : "a3f1fdb0-47ad-411e-b63d-af6fc71a1fa6",
        "tags" : [
        ]
      },
      {
        "id" : "36f3ad1c-6ca4-48e4-bf85-62ad866f9092",
        "parentId" : "fe156a95-ea4d-4016-b1c8-6ffe0425a783",
        "authorId" : "60916771-9540-4ffd-af68-4285b7141808",
        "body" : "I don't think so (it's not built with `argparse`),\r\n```bash\r\n% python -m macholib standalone --help || echo \"FAILED\"\r\n/home/rth/.miniconda3/envs/test7-env/lib/python3.6/site-packages/macholib/__main__.py: --help does not look like an app bundle\r\nFAILED\r\n% python -m macholib standalone -h || echo \"FAILED\"\r\n/home/rth/.miniconda3/envs/test7-env/lib/python3.6/site-packages/macholib/__main__.py: -h does not look like an app bundle\r\nFAILED\r\n% python -m macholib standalone || echo \"FAILED\" \r\nUsage:\r\n  python -mmacholib dump FILE ...\r\n  python -mmacholib find DIR ...\r\n  python -mmacholib standalone DIR ...\r\nFAILED\r\n% python -m macholib --help || echo \"FAILED\"\r\nUsage:\r\n  python -mmacholib dump FILE ...\r\n  python -mmacholib find DIR ...\r\n  python -mmacholib standalone DIR ...\r\nFAILED\r\n```\r\n\r\n**Edit:** my point is that the [exit status](https://unix.stackexchange.com/questions/24684/confusing-use-of-and-operators) seems for be bad even for showing help.",
        "createdAt" : "2017-10-22T22:20:45Z",
        "updatedAt" : "2017-10-22T22:27:08Z",
        "lastEditedBy" : "60916771-9540-4ffd-af68-4285b7141808",
        "tags" : [
        ]
      },
      {
        "id" : "65657eb5-66b7-4f33-ae56-52b8f32f0d48",
        "parentId" : "fe156a95-ea4d-4016-b1c8-6ffe0425a783",
        "authorId" : "a3f1fdb0-47ad-411e-b63d-af6fc71a1fa6",
        "body" : "Referring to [this]( https://bitbucket.org/ronaldoussoren/macholib/src/53d85321baffbfd7d911572b5d37fbaa53056e5a/macholib/__main__.py?at=default&fileviewer=file-view-default#__main__.py-73:74 )? Yeah that doesn't look good. Not much we can do.\r\n\r\nBesides one test already exercise that the file exists and can be called. So seems fine to me.",
        "createdAt" : "2017-10-23T01:50:20Z",
        "updatedAt" : "2017-10-23T01:50:20Z",
        "lastEditedBy" : "a3f1fdb0-47ad-411e-b63d-af6fc71a1fa6",
        "tags" : [
        ]
      },
      {
        "id" : "9150cfd3-f808-4288-bc5f-ac3d36797ca2",
        "parentId" : "fe156a95-ea4d-4016-b1c8-6ffe0425a783",
        "authorId" : "a3f1fdb0-47ad-411e-b63d-af6fc71a1fa6",
        "body" : "FWIW raised this [issue]( https://bitbucket.org/ronaldoussoren/macholib/issues/23/add-help-option-with-clean-exit-status ) to get a normal `help` option.",
        "createdAt" : "2017-10-24T13:38:54Z",
        "updatedAt" : "2017-10-24T13:38:55Z",
        "lastEditedBy" : "a3f1fdb0-47ad-411e-b63d-af6fc71a1fa6",
        "tags" : [
        ]
      }
    ],
    "commit" : "63790e5334a5bc002dbc3f1159edd6589aa38e0f",
    "line" : 29,
    "diffHunk" : "@@ -1,1 +27,31 @@test:\n  imports:\n    - macholib\n  commands:\n    - python -m macholib find /tmp/"
  }
]