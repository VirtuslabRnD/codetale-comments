[
  {
    "id" : "438cfe57-cd7e-41b4-b277-1ca0a053cc5e",
    "prId" : 11341,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/11341#pullrequestreview-397756468",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5d97f583-edd4-417d-96ff-0ba8174e9106",
        "parentId" : null,
        "authorId" : "93a361c3-34f7-4e52-a7f9-28c8ec69c910",
        "body" : "This is going to stomp on any existing eups installs that are active. So for example, if a user has a global eups distrribution installed outside of conda, this command will mess that up. You need to backup any env vars that setups.sh is going to override.",
        "createdAt" : "2020-04-21T21:19:42Z",
        "updatedAt" : "2020-04-30T15:58:16Z",
        "lastEditedBy" : "93a361c3-34f7-4e52-a7f9-28c8ec69c910",
        "tags" : [
        ]
      },
      {
        "id" : "1601e721-c479-4a15-8eea-92bfab781acc",
        "parentId" : "5d97f583-edd4-417d-96ff-0ba8174e9106",
        "authorId" : "93a361c3-34f7-4e52-a7f9-28c8ec69c910",
        "body" : "You need to backup any other env vars eups might touch too. This should include at least LD_LIBRARY_PATH, DYLD_LIBRARY_PATH on osx, etc.",
        "createdAt" : "2020-04-21T21:27:26Z",
        "updatedAt" : "2020-04-30T15:58:16Z",
        "lastEditedBy" : "93a361c3-34f7-4e52-a7f9-28c8ec69c910",
        "tags" : [
        ]
      },
      {
        "id" : "28c0f0d4-a8c1-455c-a74c-e669dccaf899",
        "parentId" : "5d97f583-edd4-417d-96ff-0ba8174e9106",
        "authorId" : "93a361c3-34f7-4e52-a7f9-28c8ec69c910",
        "body" : "One more thing here. The activate and deactivate scripts are called in lexicographical order. This means this script will be called after clang but before any gnu compilers. This is something to think about. You might want to inspect the compiler activation packages to figure out what you might be stepping on. Generally stepping on env vars from them is a no-no as they have to be intact for the system to work. \r\n\r\nAs an aside, I got lucky when I did this because `s` comes after `c` and `g`! ;p",
        "createdAt" : "2020-04-21T21:45:08Z",
        "updatedAt" : "2020-04-30T15:58:16Z",
        "lastEditedBy" : "93a361c3-34f7-4e52-a7f9-28c8ec69c910",
        "tags" : [
        ]
      },
      {
        "id" : "3412e0e9-0877-4e21-adcd-4ef1fde69e24",
        "parentId" : "5d97f583-edd4-417d-96ff-0ba8174e9106",
        "authorId" : "b2faa635-0727-47c4-8df3-9d1d771d0662",
        "body" : "Unfortunately, eups is general enough that it can modify any arbitrary environment variable.  Should we attempt to preserve and restore the entire _status quo ante_ environment (e.g. in a special file)?",
        "createdAt" : "2020-04-21T22:41:05Z",
        "updatedAt" : "2020-04-30T15:58:16Z",
        "lastEditedBy" : "b2faa635-0727-47c4-8df3-9d1d771d0662",
        "tags" : [
        ]
      },
      {
        "id" : "7a64918e-aa43-4b2c-959a-f6df9fa3d4e8",
        "parentId" : "5d97f583-edd4-417d-96ff-0ba8174e9106",
        "authorId" : "93a361c3-34f7-4e52-a7f9-28c8ec69c910",
        "body" : "Ah I was confused between eups and eups distrib. Letâ€™s just preserve the env vars explicitly uses by eups itself. We can punt the preservation of env vars related to specific packages to those packages. ",
        "createdAt" : "2020-04-22T00:05:02Z",
        "updatedAt" : "2020-04-30T15:58:16Z",
        "lastEditedBy" : "93a361c3-34f7-4e52-a7f9-28c8ec69c910",
        "tags" : [
        ]
      }
    ],
    "commit" : "7770ec687c14709612333d58339044e01fb3ef5f",
    "line" : 35,
    "diffHunk" : "@@ -1,1 +33,37 @@# initializing eups\nEUPS_DIR=\"${CONDA_PREFIX}/eups\"\nsource \"${EUPS_DIR}/bin/setups.sh\"\nexport -f setup\nexport -f unsetup"
  }
]