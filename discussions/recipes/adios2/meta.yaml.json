[
  {
    "id" : "dfb79d4b-8938-4808-b257-cc7936818d2d",
    "prId" : 8526,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/8526#pullrequestreview-256712805",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cc597355-35c7-42b1-8ad4-5b8c89e04da8",
        "parentId" : null,
        "authorId" : "4a3ee9f8-9e7c-459e-b715-28669578f2c0",
        "body" : "This doesn't seem like the right way to do this.",
        "createdAt" : "2019-07-01T15:53:53Z",
        "updatedAt" : "2019-07-01T17:46:16Z",
        "lastEditedBy" : "4a3ee9f8-9e7c-459e-b715-28669578f2c0",
        "tags" : [
        ]
      },
      {
        "id" : "1340dd88-bcf7-43b4-983a-e746707d8d19",
        "parentId" : "cc597355-35c7-42b1-8ad4-5b8c89e04da8",
        "authorId" : "16cb85cf-8b80-4b5f-94a5-d1f1fd05b613",
        "body" : "Not? That's how @minrk showed it to me (hdf5, h5py et al.). We increase the build number for nompi variants to select them by default.",
        "createdAt" : "2019-07-01T15:58:52Z",
        "updatedAt" : "2019-07-01T17:46:16Z",
        "lastEditedBy" : "16cb85cf-8b80-4b5f-94a5-d1f1fd05b613",
        "tags" : [
        ]
      },
      {
        "id" : "1fc71c50-e9ab-46b4-8487-80c674393dc9",
        "parentId" : "cc597355-35c7-42b1-8ad4-5b8c89e04da8",
        "authorId" : "4a3ee9f8-9e7c-459e-b715-28669578f2c0",
        "body" : "Really?  That is kinda nuts.",
        "createdAt" : "2019-07-01T16:09:38Z",
        "updatedAt" : "2019-07-01T17:46:16Z",
        "lastEditedBy" : "4a3ee9f8-9e7c-459e-b715-28669578f2c0",
        "tags" : [
        ]
      },
      {
        "id" : "37d14471-a19f-470c-bf91-12c41c5837f9",
        "parentId" : "cc597355-35c7-42b1-8ad4-5b8c89e04da8",
        "authorId" : "4a3ee9f8-9e7c-459e-b715-28669578f2c0",
        "body" : "We don't have documentation for this do we?",
        "createdAt" : "2019-07-01T16:09:54Z",
        "updatedAt" : "2019-07-01T17:46:16Z",
        "lastEditedBy" : "4a3ee9f8-9e7c-459e-b715-28669578f2c0",
        "tags" : [
        ]
      },
      {
        "id" : "525c817c-2ef3-483a-8081-0e99db5147ae",
        "parentId" : "cc597355-35c7-42b1-8ad4-5b8c89e04da8",
        "authorId" : "16cb85cf-8b80-4b5f-94a5-d1f1fd05b613",
        "body" : "Somewhat, I am just following recently explored best practices:\r\n- https://hackmd.io/ry4uI0thTs2q_b4mAQd_qg\r\n- https://github.com/conda-forge/adios-feedstock/pull/12#discussion_r245610080\r\n- https://github.com/conda-forge/hdf5-feedstock/blob/master/recipe/meta.yaml\r\n- https://github.com/conda-forge/h5py-feedstock/blob/master/recipe/meta.yaml\r\n\r\nBumping the build number with an offset actually sounds quite legit to me.",
        "createdAt" : "2019-07-01T16:51:52Z",
        "updatedAt" : "2019-07-01T17:46:16Z",
        "lastEditedBy" : "16cb85cf-8b80-4b5f-94a5-d1f1fd05b613",
        "tags" : [
        ]
      },
      {
        "id" : "b04c106b-13e2-4569-8647-1a8980a2a2f5",
        "parentId" : "cc597355-35c7-42b1-8ad4-5b8c89e04da8",
        "authorId" : "d838053f-6fcd-47a0-a593-accf1cf846b0",
        "body" : "I think this way of doing things is causing issues in the solver with multi output recipes that depend on packages with MPI variants. I've not managed to make sense of it yet but these builds show it:\r\n* https://dev.azure.com/conda-forge/feedstock-builds/_build/results?buildId=45775\r\n* https://dev.azure.com/conda-forge/feedstock-builds/_build/results?buildId=45278\r\n",
        "createdAt" : "2019-07-01T19:29:35Z",
        "updatedAt" : "2019-07-01T19:29:36Z",
        "lastEditedBy" : "d838053f-6fcd-47a0-a593-accf1cf846b0",
        "tags" : [
        ]
      },
      {
        "id" : "47c5fe09-fbe4-44de-9a2d-8315069b1440",
        "parentId" : "cc597355-35c7-42b1-8ad4-5b8c89e04da8",
        "authorId" : "f25192a7-a725-4dcf-81a7-9b3da467860c",
        "body" : "> We don't have documentation for this do we?\r\n\r\nIt's [in the docs](https://conda-forge.org/docs/maintainer/knowledge_base.html#message-passing-interface-mpi)\r\n\r\nBuild offset is the only way to indicate preference in the solver that I'm aware of that works for existing packages. Note that the original and first-implemented plan was to use track_features to deprioritize, but this does not work for packages that have ever been published before, but I think it might work for *new* packages, or packages where all previous builds have been fully revoked or hotfixed.\r\n\r\nIn most cases, packages that require MPI express no preference, but it's more complicated when you have three variants and want users to opt-in to MPI (e.g. hdf5). Conda still has no ability to express preferences in a natural way, so any solution is going to be a bit wonky until there's a real solution. For that reason, I might recommend avoiding a 'preference' unless it's important to avoid picking up a variant in certain circumstances, at least until there's a better way.",
        "createdAt" : "2019-07-02T07:37:58Z",
        "updatedAt" : "2019-07-02T08:11:33Z",
        "lastEditedBy" : "f25192a7-a725-4dcf-81a7-9b3da467860c",
        "tags" : [
        ]
      }
    ],
    "commit" : "78cf899998c02fcf1dc84272ac43abb60c49937a",
    "line" : 12,
    "diffHunk" : "@@ -1,1 +10,14 @@{% if mpi == 'nompi' %}\n{% set build = build + 100 %}\n{% endif %}\n\npackage:"
  }
]