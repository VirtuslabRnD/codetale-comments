[
  {
    "id" : "e43162b6-c434-43fc-aa49-be514fabbd50",
    "prId" : 3361,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/3361#pullrequestreview-52729303",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3c236fbb-4e29-4bcb-8770-0d58846eec75",
        "parentId" : null,
        "authorId" : "fa18c2b0-9128-4c2b-b6e0-433b177f7cf1",
        "body" : "Try adding, `-D MPI_EXEC_PRE_NUMPROCS_FLAGS=--allow-run-as-root`",
        "createdAt" : "2017-07-27T17:16:39Z",
        "updatedAt" : "2017-08-24T03:55:43Z",
        "lastEditedBy" : "fa18c2b0-9128-4c2b-b6e0-433b177f7cf1",
        "tags" : [
        ]
      },
      {
        "id" : "9031db70-0640-4e37-ba36-08a36e27334e",
        "parentId" : "3c236fbb-4e29-4bcb-8770-0d58846eec75",
        "authorId" : "304eb781-6142-44e8-815c-02eee20d7623",
        "body" : "So how will this help?",
        "createdAt" : "2017-07-27T17:21:48Z",
        "updatedAt" : "2017-08-24T03:55:43Z",
        "lastEditedBy" : "304eb781-6142-44e8-815c-02eee20d7623",
        "tags" : [
        ]
      },
      {
        "id" : "87fea52f-edd0-4b64-840d-589ba793b0b1",
        "parentId" : "3c236fbb-4e29-4bcb-8770-0d58846eec75",
        "authorId" : "fa18c2b0-9128-4c2b-b6e0-433b177f7cf1",
        "body" : "Tests fail with the message below because we are running as root in the docker container,\r\n```\r\n--------------------------------------------------------------------------\r\nmpiexec has detected an attempt to run as root.\r\nRunning at root is *strongly* discouraged as any mistake (e.g., in\r\ndefining TMPDIR) or bug can result in catastrophic damage to the OS\r\nfile system, leaving your system in an unusable state.\r\n\r\nYou can override this protection by adding the --allow-run-as-root\r\noption to your cmd line. However, we reiterate our strong advice\r\nagainst doing so - please do so at your own risk.\r\n--------------------------------------------------------------------------\r\n```",
        "createdAt" : "2017-07-27T17:23:32Z",
        "updatedAt" : "2017-08-24T03:55:43Z",
        "lastEditedBy" : "fa18c2b0-9128-4c2b-b6e0-433b177f7cf1",
        "tags" : [
        ]
      },
      {
        "id" : "68dc1035-61c1-40d9-b5ce-fea55b792a31",
        "parentId" : "3c236fbb-4e29-4bcb-8770-0d58846eec75",
        "authorId" : "fa18c2b0-9128-4c2b-b6e0-433b177f7cf1",
        "body" : "Also add `-D MPI_EXEC_MAX_NUMPROCS=$CPU_COUNT` to limit the number of processes that are used in travis-ci.",
        "createdAt" : "2017-07-27T17:33:33Z",
        "updatedAt" : "2017-08-24T03:55:43Z",
        "lastEditedBy" : "fa18c2b0-9128-4c2b-b6e0-433b177f7cf1",
        "tags" : [
        ]
      }
    ],
    "commit" : "b6cdaf347981f43485b5ba558da8401b55abd865",
    "line" : 20,
    "diffHunk" : "@@ -1,1 +18,22 @@  -D TPL_ENABLE_MPI:BOOL=ON \\\n  -D MPI_BASE_DIR:PATH=$PREFIX \\\n  -D MPI_EXEC:FILEPATH=$PREFIX/bin/mpiexec \\\n  -D MPI_EXEC_PRE_NUMPROCS_FLAGS:STRING=\"$MPI_FLAGS\" \\\n  -D PYTHON_EXECUTABLE:FILEPATH=$PYTHON \\"
  }
]