[
  {
    "id" : "495a1dd4-a06e-4e05-b8a7-e74a6b2f3656",
    "prId" : 12417,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/12417#pullrequestreview-470706808",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "53122a7d-65c8-4a35-99c0-22210ddd7fa8",
        "parentId" : null,
        "authorId" : "43fc678a-cc3a-4707-8540-4c6397651b46",
        "body" : "Unless `yaqd-core` and `smbus2` are actually required at build-time (they don't appear to be, based on the `pyproject.toml`) then they don't need to be in `host:`",
        "createdAt" : "2020-08-18T19:15:25Z",
        "updatedAt" : "2020-08-18T19:15:25Z",
        "lastEditedBy" : "43fc678a-cc3a-4707-8540-4c6397651b46",
        "tags" : [
        ]
      },
      {
        "id" : "435da965-cb18-416f-8321-00e1bde431d0",
        "parentId" : "53122a7d-65c8-4a35-99c0-22210ddd7fa8",
        "authorId" : "5071809d-5368-4b28-b81b-761b2aa16839",
        "body" : "@dopplershift flit (our build system) requires all dependencies at build time",
        "createdAt" : "2020-08-18T19:17:33Z",
        "updatedAt" : "2020-08-18T19:17:33Z",
        "lastEditedBy" : "5071809d-5368-4b28-b81b-761b2aa16839",
        "tags" : [
        ]
      },
      {
        "id" : "81281cba-bdce-4b3d-a814-3bd48981a273",
        "parentId" : "53122a7d-65c8-4a35-99c0-22210ddd7fa8",
        "authorId" : "43fc678a-cc3a-4707-8540-4c6397651b46",
        "body" : "Alright, good to know.",
        "createdAt" : "2020-08-18T19:21:43Z",
        "updatedAt" : "2020-08-18T19:21:43Z",
        "lastEditedBy" : "43fc678a-cc3a-4707-8540-4c6397651b46",
        "tags" : [
        ]
      },
      {
        "id" : "54591c92-956b-4696-b13d-bcb9bdc03dca",
        "parentId" : "53122a7d-65c8-4a35-99c0-22210ddd7fa8",
        "authorId" : "43fc678a-cc3a-4707-8540-4c6397651b46",
        "body" : "That doesn't seem to be how conda-forge packages them: https://github.com/conda-forge/gidgethub-feedstock/blob/master/recipe/meta.yaml\r\n\r\nLooks like you can install with `{{ PYTHON }} -m flit install --deps=none`",
        "createdAt" : "2020-08-18T19:57:16Z",
        "updatedAt" : "2020-08-18T19:57:16Z",
        "lastEditedBy" : "43fc678a-cc3a-4707-8540-4c6397651b46",
        "tags" : [
        ]
      },
      {
        "id" : "66989ae9-c82f-4739-94f7-f86112694a87",
        "parentId" : "53122a7d-65c8-4a35-99c0-22210ddd7fa8",
        "authorId" : "5071809d-5368-4b28-b81b-761b2aa16839",
        "body" : ":thinking: hmm, that's a new one to me\r\n\r\nhere's my understanding: flit needs to install the package enough to import it, because flit extracts the `__version__` and package-level `__doc__` by import\r\n\r\nI think that gidgethub gets away with not having dependencies at install time because the submodules are lazy-imported---that is, you interact with them using `from gidgethub import x`. So `import gidgethub` itself actually doesn't need any of the dependencies.\r\n\r\n`yaqd-ti`'s [`__init__.py`](https://gitlab.com/yaq/yaqd-ti/-/blob/master/yaqd_ti/__init__.py) explicitly imports everything, so `import yaqd_ti` will fail if `yaqd-core` and `smbus2` are missing... :confounded: \r\n\r\nI will note that [all of the other yaq feedstocks](https://github.com/search?q=org%3Aconda-forge+yaq&unscoped_q=yaq) do include dependencies at build time, so if that's a problem it's one that we have to correct in many places.\r\n\r\nI maintain upstream, so I _can_ change this behavior by modifying `yaqd-ti`'s `__init__`, what do you think?",
        "createdAt" : "2020-08-19T03:42:47Z",
        "updatedAt" : "2020-08-19T03:42:47Z",
        "lastEditedBy" : "5071809d-5368-4b28-b81b-761b2aa16839",
        "tags" : [
        ]
      },
      {
        "id" : "f3e44e99-3fe1-4e66-bab1-00c76ddd8e74",
        "parentId" : "53122a7d-65c8-4a35-99c0-22210ddd7fa8",
        "authorId" : "43fc678a-cc3a-4707-8540-4c6397651b46",
        "body" : "Well, I was trying to see how other packages do it. Clearly, there's a decently wide gamut of how things using flit are packaged on conda-forge. I think we can just merge.",
        "createdAt" : "2020-08-19T17:53:18Z",
        "updatedAt" : "2020-08-19T17:53:18Z",
        "lastEditedBy" : "43fc678a-cc3a-4707-8540-4c6397651b46",
        "tags" : [
        ]
      }
    ],
    "commit" : "25e490758263120b8c0f3a1c5f9bf989da99223a",
    "line" : 25,
    "diffHunk" : "@@ -1,1 +23,27 @@    - pip\n    - flit\n    - yaqd-core >=2020.06.3\n    - smbus2\n  run:"
  }
]