[
  {
    "id" : "4b846773-d5e3-40b1-b464-073bbb115544",
    "prId" : 11781,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/11781#pullrequestreview-423017366",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7afa078c-690b-492f-b9c3-bc3fd3924d29",
        "parentId" : null,
        "authorId" : "4a3ee9f8-9e7c-459e-b715-28669578f2c0",
        "body" : "These should have CDTs",
        "createdAt" : "2020-06-02T19:43:13Z",
        "updatedAt" : "2020-06-02T20:05:39Z",
        "lastEditedBy" : "4a3ee9f8-9e7c-459e-b715-28669578f2c0",
        "tags" : [
        ]
      },
      {
        "id" : "dccc6bbe-b4b3-4a6b-984f-e8160fec226d",
        "parentId" : "7afa078c-690b-492f-b9c3-bc3fd3924d29",
        "authorId" : "778ee1ba-f7e3-4db6-b494-65c59f833806",
        "body" : "I don't think it's necessary to add these as CDTs, because they aren't necessary for building.  They are run-time dependencies of `gtk3`, though.  There is an [ongoing discussion regarding how downstream gtk3 dependents][1] should handle these, but for now we are simply listing them in `yum_requirements.txt`.\r\n\r\n[1]: https://github.com/conda-forge/gtk3-feedstock/issues/7",
        "createdAt" : "2020-06-02T19:47:53Z",
        "updatedAt" : "2020-06-02T20:07:03Z",
        "lastEditedBy" : "778ee1ba-f7e3-4db6-b494-65c59f833806",
        "tags" : [
        ]
      },
      {
        "id" : "5d3d1d73-e9c6-4d80-a351-16867adb54f4",
        "parentId" : "7afa078c-690b-492f-b9c3-bc3fd3924d29",
        "authorId" : "4a3ee9f8-9e7c-459e-b715-28669578f2c0",
        "body" : "If they are only run time deps, do you need them at all?",
        "createdAt" : "2020-06-02T19:51:06Z",
        "updatedAt" : "2020-06-02T20:05:39Z",
        "lastEditedBy" : "4a3ee9f8-9e7c-459e-b715-28669578f2c0",
        "tags" : [
        ]
      },
      {
        "id" : "746225da-291a-46a6-b8c9-b9d763b2cbf3",
        "parentId" : "7afa078c-690b-492f-b9c3-bc3fd3924d29",
        "authorId" : "778ee1ba-f7e3-4db6-b494-65c59f833806",
        "body" : "I'm trying to remember the error... I think the DSO checks failed somehow.  Let me temporarily remove `yum_requirements.txt` to reproduce the error.",
        "createdAt" : "2020-06-02T19:53:46Z",
        "updatedAt" : "2020-06-02T20:05:39Z",
        "lastEditedBy" : "778ee1ba-f7e3-4db6-b494-65c59f833806",
        "tags" : [
        ]
      },
      {
        "id" : "18e2c484-89f3-4f18-bc83-cf512cf62604",
        "parentId" : "7afa078c-690b-492f-b9c3-bc3fd3924d29",
        "authorId" : "778ee1ba-f7e3-4db6-b494-65c59f833806",
        "body" : "Oh wait, it's mentioned in that linked discussion.  It turns out that `gtk3` has a `post-link.sh` script, and that script fails if the Xorg dependencies are missing.\r\n\r\nSo the failure occurs in this feedstock during the test phase.",
        "createdAt" : "2020-06-02T19:58:05Z",
        "updatedAt" : "2020-06-02T20:05:39Z",
        "lastEditedBy" : "778ee1ba-f7e3-4db6-b494-65c59f833806",
        "tags" : [
        ]
      },
      {
        "id" : "ec83d83c-7ef7-4932-9a69-b7480c900027",
        "parentId" : "7afa078c-690b-492f-b9c3-bc3fd3924d29",
        "authorId" : "778ee1ba-f7e3-4db6-b494-65c59f833806",
        "body" : "Yep, the failure is in the `gtk3` post-link script:\r\n\r\n<details>\r\n\r\n<summary>post-link error</summary>\r\n\r\n```\r\nPreparing transaction: ...working... done\r\nVerifying transaction: ...working... done\r\nExecuting transaction: ...working... done\r\nERROR conda.core.link:_execute(700): An error occurred while installing package 'conda-forge::gtk3-3.24.18-h45fd312_1'.\r\nRolling back transaction: ...working... done\r\nTraceback (most recent call last):\r\n  File \"/home/conda/.ci_support/build_all.py\", line 133, in <module>\r\n    build_all(args.recipes_dir, args.arch)\r\n  File \"/home/conda/.ci_support/build_all.py\", line 66, in build_all\r\n    build_folders(recipes_dir, new_comp_folders, arch, channel_urls)\r\n  File \"/home/conda/.ci_support/build_all.py\", line 123, in build_folders\r\n    conda_build.api.build([recipe], config=get_config(arch, channel_urls))\r\n  File \"/opt/conda/lib/python3.7/site-packages/conda_build/api.py\", line 209, in build\r\n    notest=notest, need_source_download=need_source_download, variants=variants)\r\n  File \"/opt/conda/lib/python3.7/site-packages/conda_build/build.py\", line 2864, in build_tree\r\n    notest=notest,\r\n  File \"/opt/conda/lib/python3.7/site-packages/conda_build/build.py\", line 1911, in build\r\n    create_build_envs(top_level_pkg, notest)\r\n  File \"/opt/conda/lib/python3.7/site-packages/conda_build/build.py\", line 1751, in create_build_envs\r\n    is_conda=m.name() == 'conda')\r\n  File \"/opt/conda/lib/python3.7/site-packages/conda_build/environ.py\", line 875, in create_env\r\n    execute_actions(actions, index)\r\n  File \"/opt/conda/lib/python3.7/site-packages/conda/common/io.py\", line 88, in decorated\r\n    return f(*args, **kwds)\r\n  File \"/opt/conda/lib/python3.7/site-packages/conda/plan.py\", line 321, in execute_actions\r\n    execute_instructions(plan, index, verbose)\r\n  File \"/opt/conda/lib/python3.7/site-packages/conda/plan.py\", line 533, in execute_instructions\r\n    cmd(state, arg)\r\n  File \"/opt/conda/lib/python3.7/site-packages/conda/instructions.py\", line 73, in UNLINKLINKTRANSACTION_CMD\r\n    unlink_link_transaction.execute()\r\n  File \"/opt/conda/lib/python3.7/site-packages/conda/core/link.py\", line 249, in execute\r\n    self._execute(tuple(concat(interleave(itervalues(self.prefix_action_groups)))))\r\n  File \"/opt/conda/lib/python3.7/site-packages/conda/core/link.py\", line 716, in _execute\r\n    rollback_excs,\r\nconda.CondaMultiError: post-link script failed for package conda-forge::gtk3-3.24.18-h45fd312_1\r\nlocation of failed script: /home/conda/staged-recipes/build_artifacts/stoken_1591127839206/_h_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_plac/bin/.gtk3-post-link.sh\r\n==> script messages <==\r\n<None>\r\n==> script output <==\r\nstdout: \r\nstderr: /home/conda/staged-recipes/build_artifacts/stoken_1591127839206/_h_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_plac/bin/gtk-query-immodules-3.0: error while loading shared libraries: libXi.so.6: cannot open shared object file: No such file or directory\r\n\r\nreturn code: 127\r\n\r\n```\r\n\r\n</details>",
        "createdAt" : "2020-06-02T20:04:45Z",
        "updatedAt" : "2020-06-02T20:05:39Z",
        "lastEditedBy" : "778ee1ba-f7e3-4db6-b494-65c59f833806",
        "tags" : [
        ]
      }
    ],
    "commit" : "beb094c75bc8391575fe0c5b501102ec4b753730",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +7,11 @@libXi\nlibXinerama\nlibXrandr"
  }
]