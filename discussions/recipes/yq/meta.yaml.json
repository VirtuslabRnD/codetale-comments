[
  {
    "id" : "cecd5ccf-a595-43c0-8f0e-750533c71b07",
    "prId" : 5470,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/5470#pullrequestreview-108230040",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ccbbd09d-e9ea-4c8c-b62e-e3c2c194aa9f",
        "parentId" : null,
        "authorId" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "body" : "Upstream is not including the License file in src package",
        "createdAt" : "2018-03-25T18:16:16Z",
        "updatedAt" : "2018-03-25T18:20:10Z",
        "lastEditedBy" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "tags" : [
        ]
      },
      {
        "id" : "76c99004-001c-4cd7-bdbd-c465360379b4",
        "parentId" : "ccbbd09d-e9ea-4c8c-b62e-e3c2c194aa9f",
        "authorId" : "a3f1fdb0-47ad-411e-b63d-af6fc71a1fa6",
        "body" : "Could you please raise an issue to ask them if they could include the license?",
        "createdAt" : "2018-03-29T02:39:35Z",
        "updatedAt" : "2018-03-29T02:39:35Z",
        "lastEditedBy" : "a3f1fdb0-47ad-411e-b63d-af6fc71a1fa6",
        "tags" : [
        ]
      },
      {
        "id" : "9da51d95-4fc5-4da1-ba25-240a9bb3c835",
        "parentId" : "ccbbd09d-e9ea-4c8c-b62e-e3c2c194aa9f",
        "authorId" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "body" : "I opened the issue: c.f. kislyuk/yq#24",
        "createdAt" : "2018-03-29T23:03:09Z",
        "updatedAt" : "2018-03-29T23:03:10Z",
        "lastEditedBy" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "tags" : [
        ]
      }
    ],
    "commit" : "1cf0aa2000abefb7df28843feef95b771536f2be",
    "line" : 43,
    "diffHunk" : "@@ -1,1 +41,45 @@  license: Apache-2.0\n  license_family: Apache\n  license_file: '{{ environ[\"RECIPE_DIR\"] }}/LICENSE'\n  summary: 'jq wrapper for YAML and XML documents'\n"
  },
  {
    "id" : "247570ad-766d-47ba-84bb-299e8576301f",
    "prId" : 5470,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/5470#pullrequestreview-108351915",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "01405e38-e2ae-4acb-b9af-47d0c4c7378b",
        "parentId" : null,
        "authorId" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "body" : "upstream is using \"scripts\" instead of entry-points. This is preventing the noarch builds to pass the tests.",
        "createdAt" : "2018-03-25T18:18:25Z",
        "updatedAt" : "2018-03-25T18:20:10Z",
        "lastEditedBy" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "tags" : [
        ]
      },
      {
        "id" : "38a9f541-a82a-4f05-9f6b-017beaa1e2a5",
        "parentId" : "01405e38-e2ae-4acb-b9af-47d0c4c7378b",
        "authorId" : "3921f978-6ed8-4e1a-b966-727aa18f8dc2",
        "body" : "Is this enough to fix it? Looking at https://github.com/conda/conda-build/pull/2672/files, half of the change supposedly needed to fix it is just this, but there's also some metadata change, and I don't know whether that matters.",
        "createdAt" : "2018-03-29T13:17:43Z",
        "updatedAt" : "2018-03-29T13:17:43Z",
        "lastEditedBy" : "3921f978-6ed8-4e1a-b966-727aa18f8dc2",
        "tags" : [
        ]
      },
      {
        "id" : "b0e6a25d-c71e-4df1-9c87-22fbdbc7d5a3",
        "parentId" : "01405e38-e2ae-4acb-b9af-47d0c4c7378b",
        "authorId" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "body" : "I don't think the metadata issue matters. However, I ran the test again and this is what I get if I build it using `noarch: python`\r\n\r\n```\r\nTEST START: /data/conda-bld/noarch/yq-2.4.1-py_0.tar.bz2\r\nDeleting work directory, /data/conda-bld/yq_1522365327801/work/yq-2.4.1\r\nINFO:filelock:Lock 140650291855032 acquired on /opt/conda/locks/L29wdC9jb25kYS9wa2dz\r\nINFO:filelock:Lock 140650291854976 acquired on /opt/conda/locks/L2RhdGEvY29uZGEtYmxk\r\nINFO:filelock:Lock 140650291855032 released on /opt/conda/locks/L29wdC9jb25kYS9wa2dz\r\nINFO:filelock:Lock 140650291854976 released on /opt/conda/locks/L2RhdGEvY29uZGEtYmxk\r\n\r\nThe following NEW packages will be INSTALLED:\r\n\r\n    ca-certificates: 2018.1.18-0      conda-forge\r\n    certifi:         2018.1.18-py36_0 conda-forge\r\n    jq:              1.5-4            conda-forge\r\n    ncurses:         5.9-10           conda-forge\r\n    oniguruma:       6.8.0-0          conda-forge\r\n    openssl:         1.0.2n-0         conda-forge\r\n    pip:             9.0.1-py36_1     conda-forge\r\n    python:          3.6.4-0          conda-forge\r\n    pyyaml:          3.12-py36_1      conda-forge\r\n    readline:        7.0-0            conda-forge\r\n    setuptools:      39.0.1-py36_0    conda-forge\r\n    sqlite:          3.20.1-2         conda-forge\r\n    tk:              8.6.7-0          conda-forge\r\n    wheel:           0.30.0-py36_2    conda-forge\r\n    xmltodict:       0.11.0-py36_0    conda-forge\r\n    xz:              5.2.3-0          conda-forge\r\n    yaml:            0.1.7-0          conda-forge\r\n    yq:              2.4.1-py_0       local      \r\n    zlib:            1.2.11-0         conda-forge\r\n\r\n\r\nWARNING: conda-build appears to be out of date. You have version 2.1.18 but the\r\nlatest version is 3.7.2. Run\r\n\r\nconda update -n root conda-build\r\n\r\nto get the latest version.\r\n\r\n+ source /opt/conda/bin/activate /data/conda-bld/yq_1522365327801/_t_env\r\n+ /data/conda-bld/yq_1522365327801/_t_env/bin/python -s /data/conda-bld/yq_1522365327801/test_tmp/run_test.py\r\nimport: 'yq'\r\n+ /bin/bash -x -e /data/conda-bld/yq_1522365327801/test_tmp/run_test.sh\r\n+ ls -la /data/conda-bld/yq_1522365327801/_t_env/bin/yq /data/conda-bld/yq_1522365327801/_t_env/bin/xq\r\n-rw-rw-r--. 1 conda conda 100 Mar 29 23:15 /data/conda-bld/yq_1522365327801/_t_env/bin/xq\r\n-rw-rw-r--. 1 conda conda 101 Mar 29 23:15 /data/conda-bld/yq_1522365327801/_t_env/bin/yq\r\n+ yq --help\r\n/data/conda-bld/yq_1522365327801/test_tmp/run_test.sh: line 4: /data/conda-bld/yq_1522365327801/_t_env/bin/yq: Permission denied\r\nTESTS FAILED: yq-2.4.1-py_0.tar.bz2\r\n```\r\n\r\nAnother option is for me to patch the source code and replace `scripts` with `entry-points`. If you want me to do that, I am happy to do it post-merge.",
        "createdAt" : "2018-03-29T23:18:50Z",
        "updatedAt" : "2018-03-29T23:18:50Z",
        "lastEditedBy" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "tags" : [
        ]
      },
      {
        "id" : "ba787b6f-15df-498a-931f-ac3305a38854",
        "parentId" : "01405e38-e2ae-4acb-b9af-47d0c4c7378b",
        "authorId" : "3921f978-6ed8-4e1a-b966-727aa18f8dc2",
        "body" : "Oh, I missed that this wasn't `noarch: python`. It probably could be but for the scripts issue; if it's easy to replace with entry points and make it noarch, that would be a good thing to do in the feedstock. Merging now though.",
        "createdAt" : "2018-03-30T15:01:54Z",
        "updatedAt" : "2018-03-30T15:01:54Z",
        "lastEditedBy" : "3921f978-6ed8-4e1a-b966-727aa18f8dc2",
        "tags" : [
        ]
      }
    ],
    "commit" : "1cf0aa2000abefb7df28843feef95b771536f2be",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +17,21 @@  script: \n    - python -m pip install --no-deps --ignore-installed .\n    - chmod 755 $PREFIX/bin/{y,x}q\n\nrequirements:"
  },
  {
    "id" : "388f2d95-1beb-46bc-bf80-8095c4ca65aa",
    "prId" : 5470,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/5470#pullrequestreview-108252542",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "98946b84-fb72-4892-8086-24d2e9bfd08a",
        "parentId" : null,
        "authorId" : "a3f1fdb0-47ad-411e-b63d-af6fc71a1fa6",
        "body" : "Guessing this is because we don't have a Windows build of `jq` yet. Is that correct?",
        "createdAt" : "2018-03-29T02:40:26Z",
        "updatedAt" : "2018-03-29T02:40:26Z",
        "lastEditedBy" : "a3f1fdb0-47ad-411e-b63d-af6fc71a1fa6",
        "tags" : [
        ]
      },
      {
        "id" : "a83bf7b5-9037-4ae9-ad31-cfdc146e3a41",
        "parentId" : "98946b84-fb72-4892-8086-24d2e9bfd08a",
        "authorId" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "body" : "Yes, that is correct.",
        "createdAt" : "2018-03-29T23:05:00Z",
        "updatedAt" : "2018-03-29T23:05:00Z",
        "lastEditedBy" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "tags" : [
        ]
      },
      {
        "id" : "959609b3-ac45-4cd2-af99-41eecee48a9e",
        "parentId" : "98946b84-fb72-4892-8086-24d2e9bfd08a",
        "authorId" : "a3f1fdb0-47ad-411e-b63d-af6fc71a1fa6",
        "body" : "xref: https://github.com/conda-forge/jq-feedstock/issues/3",
        "createdAt" : "2018-03-30T02:31:35Z",
        "updatedAt" : "2018-03-30T02:31:35Z",
        "lastEditedBy" : "a3f1fdb0-47ad-411e-b63d-af6fc71a1fa6",
        "tags" : [
        ]
      }
    ],
    "commit" : "1cf0aa2000abefb7df28843feef95b771536f2be",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +13,17 @@\nbuild:\n  skip: True  # [win]\n  number: 0\n  script: "
  },
  {
    "id" : "2f465c86-2805-4307-ab2c-c8f36b9dfeaf",
    "prId" : 5470,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/5470#pullrequestreview-107910304",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0c84e657-42ca-4dac-80c1-2b297e69bdf2",
        "parentId" : null,
        "authorId" : "a3f1fdb0-47ad-411e-b63d-af6fc71a1fa6",
        "body" : "Clever test. :)",
        "createdAt" : "2018-03-29T02:41:11Z",
        "updatedAt" : "2018-03-29T02:41:11Z",
        "lastEditedBy" : "a3f1fdb0-47ad-411e-b63d-af6fc71a1fa6",
        "tags" : [
        ]
      }
    ],
    "commit" : "1cf0aa2000abefb7df28843feef95b771536f2be",
    "line" : 37,
    "diffHunk" : "@@ -1,1 +35,39 @@    - yq --help\n    - xq --help\n    - test $(cat $RECIPE_DIR/meta.yaml | yq -r .package.name) = 'yq'\n\nabout:"
  }
]