[
  {
    "id" : "13309163-5d55-4487-9529-8859b56ef22f",
    "prId" : 14167,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/14167#pullrequestreview-626296772",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "87fd6cbc-85bc-4d04-95bd-52adb5186c8e",
        "parentId" : null,
        "authorId" : "5d6fca57-7bb4-4726-8c24-42355caef265",
        "body" : "@rhyspoulton, the following might be a good change to make to not duplicate the version number/tag for each release:\r\n\r\n```suggestion\r\n{% set version = \"v9r0\" %}\r\n\r\n# handle Virgo version number format\r\n{% set semver_version = version|\r\n    replace('v', '', 1)|\r\n    replace('r', '.', 1)|\r\n    replace('p', '.', 1)\r\n %}\r\n\r\npackage:\r\n  name: {{ name|lower }}\r\n  version: {{ semver_version }}\r\n\r\nsource:\r\n  url: https://git.ligo.org/virgo/virgoapp/{{ name }}/-/archive/{{ version }}/{{ name }}-{{ version }}.tar.gz\r\n```\r\n\r\n(not that I fixed a typo in the tarball URL: `Cgf`)",
        "createdAt" : "2021-04-01T09:28:45Z",
        "updatedAt" : "2021-04-01T09:28:45Z",
        "lastEditedBy" : "5d6fca57-7bb4-4726-8c24-42355caef265",
        "tags" : [
        ]
      },
      {
        "id" : "bf418737-cbb0-4fe8-95ec-4258abd8d9f0",
        "parentId" : "87fd6cbc-85bc-4d04-95bd-52adb5186c8e",
        "authorId" : "8287bb88-a861-41a0-8263-fa463ac384cd",
        "body" : "Yes, this update makes sense, I take it that this will need to be an update since it is already merged?",
        "createdAt" : "2021-04-01T09:57:29Z",
        "updatedAt" : "2021-04-01T09:57:30Z",
        "lastEditedBy" : "8287bb88-a861-41a0-8263-fa463ac384cd",
        "tags" : [
        ]
      },
      {
        "id" : "e222d409-d4f9-4b04-901c-c37c29370473",
        "parentId" : "87fd6cbc-85bc-4d04-95bd-52adb5186c8e",
        "authorId" : "8287bb88-a861-41a0-8263-fa463ac384cd",
        "body" : "```suggestion\r\n{% set name = \"cfg\" %}\r\n{% set version = \"v9r0\" %}\r\n\r\n# handle Virgo version number format\r\n{% if 'p' in version %}\r\n  {% set semver_version = version|\r\n      replace('v', '', 1)|\r\n      replace('r', '.', 1)|\r\n      replace('p', '.', 1)\r\n  %}\r\n{% else %}\r\n  {% set semver_version = version|\r\n      replace('v', '', 1)|\r\n      replace('r', '.', 1)\r\n      + '.0'\r\n  %}\r\n{% endif %}\r\n\r\npackage:\r\n  name: \"{{ name|lower }}\"\r\n  version: \"{{ semver_version }}\"\r\nsource:\r\n  url: https://git.ligo.org/virgo/virgoapp/{{ name }}/-/archive/{{ version }}/{{ name }}-{{ version }}.tar.gz\r\n```\r\n\r\nI needed to add an if-else since when there is `p0` in the Virgo version this is often just dropped. So in the case when `p` does not exist in the Virgo version then just add a `.0` to the version number.",
        "createdAt" : "2021-04-01T12:37:07Z",
        "updatedAt" : "2021-04-01T12:37:08Z",
        "lastEditedBy" : "8287bb88-a861-41a0-8263-fa463ac384cd",
        "tags" : [
        ]
      },
      {
        "id" : "ba4c55e3-c23e-4514-a634-92bf5062c668",
        "parentId" : "87fd6cbc-85bc-4d04-95bd-52adb5186c8e",
        "authorId" : "5d6fca57-7bb4-4726-8c24-42355caef265",
        "body" : "I would personally not include the `if-else` statement, since some packages do ship versions without a trailing patch version `.0`. If they want to include a patch version, they should include it in the upstream tag.",
        "createdAt" : "2021-04-01T13:35:45Z",
        "updatedAt" : "2021-04-01T13:35:45Z",
        "lastEditedBy" : "5d6fca57-7bb4-4726-8c24-42355caef265",
        "tags" : [
        ]
      },
      {
        "id" : "2b5ab842-6235-4004-9956-71efcd54d173",
        "parentId" : "87fd6cbc-85bc-4d04-95bd-52adb5186c8e",
        "authorId" : "8287bb88-a861-41a0-8263-fa463ac384cd",
        "body" : "When I use the original (no `if-else`) version I get the following error when the version check is done (this is the main reason why I added the `if-else`):\r\n`pkg-config --print-errors --exact-version 9.0 cfg`\r\n`Requested 'cfg = 9.0' but version of cfg is 9.0.0`\r\nIt seems to be dependent on how the version defined in the `.pc` file (which in the case of Virgo software gets it from the `meson.build` or `CMakeLists.txt` file).\r\nI am not sure of the best way to deal with this, any ideas?\r\n",
        "createdAt" : "2021-04-01T13:56:03Z",
        "updatedAt" : "2021-04-01T13:56:03Z",
        "lastEditedBy" : "8287bb88-a861-41a0-8263-fa463ac384cd",
        "tags" : [
        ]
      },
      {
        "id" : "ccab148c-2420-414a-9c37-472544759cff",
        "parentId" : "87fd6cbc-85bc-4d04-95bd-52adb5186c8e",
        "authorId" : "5d6fca57-7bb4-4726-8c24-42355caef265",
        "body" : "Ok, so the authors themselves are inconsistent between the tag and the semantic version number, great. What you have is the best solution then.",
        "createdAt" : "2021-04-01T13:57:22Z",
        "updatedAt" : "2021-04-01T13:57:23Z",
        "lastEditedBy" : "5d6fca57-7bb4-4726-8c24-42355caef265",
        "tags" : [
        ]
      }
    ],
    "commit" : "02d143cd247d86fb94af6d27c3b3804eb99cdd9f",
    "line" : 10,
    "diffHunk" : "@@ -1,1 +8,12 @@\nsource:\n   url: https://git.ligo.org/virgo/virgoapp/Cfg/-/archive/{{ tag }}/Cgf-{{ tag }}.tar.gz\n   sha256: 40ff7b98d515e754a2d6d0a2eebdd995483a63a4fa7c3b804ea79c7b9ca5bb24\n"
  },
  {
    "id" : "badfcb47-6777-4827-b831-eec237309573",
    "prId" : 14167,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/14167#pullrequestreview-626072179",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c109e1fa-6686-4070-9bbd-b8b11d040f1e",
        "parentId" : null,
        "authorId" : "5d6fca57-7bb4-4726-8c24-42355caef265",
        "body" : "I think you copied this from the `framel` feedstock, but since I wrote that I figured out a much more elegant version:\r\n\r\n```suggestion\r\n    - pkg-config --print-errors --exact-version ${PKG_VERSION} ${PKG_NAME}  # [unix]\r\n```",
        "createdAt" : "2021-04-01T09:30:07Z",
        "updatedAt" : "2021-04-01T09:30:07Z",
        "lastEditedBy" : "5d6fca57-7bb4-4726-8c24-42355caef265",
        "tags" : [
        ]
      }
    ],
    "commit" : "02d143cd247d86fb94af6d27c3b3804eb99cdd9f",
    "line" : 35,
    "diffHunk" : "@@ -1,1 +33,37 @@  commands:\n    - test -r ${PREFIX}/lib/libcfg.so\n    - test \"$(pkg-config --print-errors --modversion cfg)\" == \"${PKG_VERSION}\"  # [unix]\n\nabout:"
  },
  {
    "id" : "168569c7-17db-4ba9-b890-4485d6ce3870",
    "prId" : 14167,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/14167#pullrequestreview-626296772",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1af29405-3f42-4a9c-b779-5c77793f4e65",
        "parentId" : null,
        "authorId" : "95383998-4cee-419b-8e0e-30292709e0a6",
        "body" : "@rhyspoulton, the following might be a good change to make to not duplicate the version number/tag for each release:\r\n\r\n```suggestion\r\n{% set version = \"v9r0\" %}\r\n\r\n# handle Virgo version number format\r\n{% set semver_version = version|\r\n    replace('v', '', 1)|\r\n    replace('r', '.', 1)|\r\n    replace('p', '.', 1)\r\n %}\r\n\r\npackage:\r\n  name: {{ name|lower }}\r\n  version: {{ semver_version }}\r\n\r\nsource:\r\n  url: https://git.ligo.org/virgo/virgoapp/{{ name }}/-/archive/{{ version }}/{{ name }}-{{ version }}.tar.gz\r\n```\r\n\r\n(not that I fixed a typo in the tarball URL: `Cgf`)",
        "createdAt" : "2021-04-01T09:28:45Z",
        "updatedAt" : "2021-04-01T09:28:45Z",
        "lastEditedBy" : "95383998-4cee-419b-8e0e-30292709e0a6",
        "tags" : [
        ]
      },
      {
        "id" : "787290a9-6d72-4cce-972e-d76ee77dab67",
        "parentId" : "1af29405-3f42-4a9c-b779-5c77793f4e65",
        "authorId" : "9c941deb-9e03-4358-b57b-b3bf38274ea2",
        "body" : "Yes, this update makes sense, I take it that this will need to be an update since it is already merged?",
        "createdAt" : "2021-04-01T09:57:29Z",
        "updatedAt" : "2021-04-01T09:57:30Z",
        "lastEditedBy" : "9c941deb-9e03-4358-b57b-b3bf38274ea2",
        "tags" : [
        ]
      },
      {
        "id" : "f841f09e-ee8e-4b8f-91de-01733c2415bb",
        "parentId" : "1af29405-3f42-4a9c-b779-5c77793f4e65",
        "authorId" : "9c941deb-9e03-4358-b57b-b3bf38274ea2",
        "body" : "```suggestion\r\n{% set name = \"cfg\" %}\r\n{% set version = \"v9r0\" %}\r\n\r\n# handle Virgo version number format\r\n{% if 'p' in version %}\r\n  {% set semver_version = version|\r\n      replace('v', '', 1)|\r\n      replace('r', '.', 1)|\r\n      replace('p', '.', 1)\r\n  %}\r\n{% else %}\r\n  {% set semver_version = version|\r\n      replace('v', '', 1)|\r\n      replace('r', '.', 1)\r\n      + '.0'\r\n  %}\r\n{% endif %}\r\n\r\npackage:\r\n  name: \"{{ name|lower }}\"\r\n  version: \"{{ semver_version }}\"\r\nsource:\r\n  url: https://git.ligo.org/virgo/virgoapp/{{ name }}/-/archive/{{ version }}/{{ name }}-{{ version }}.tar.gz\r\n```\r\n\r\nI needed to add an if-else since when there is `p0` in the Virgo version this is often just dropped. So in the case when `p` does not exist in the Virgo version then just add a `.0` to the version number.",
        "createdAt" : "2021-04-01T12:37:07Z",
        "updatedAt" : "2021-04-01T12:37:08Z",
        "lastEditedBy" : "9c941deb-9e03-4358-b57b-b3bf38274ea2",
        "tags" : [
        ]
      },
      {
        "id" : "bd238815-41ec-4a06-96d2-a9bea2213f35",
        "parentId" : "1af29405-3f42-4a9c-b779-5c77793f4e65",
        "authorId" : "95383998-4cee-419b-8e0e-30292709e0a6",
        "body" : "I would personally not include the `if-else` statement, since some packages do ship versions without a trailing patch version `.0`. If they want to include a patch version, they should include it in the upstream tag.",
        "createdAt" : "2021-04-01T13:35:45Z",
        "updatedAt" : "2021-04-01T13:35:45Z",
        "lastEditedBy" : "95383998-4cee-419b-8e0e-30292709e0a6",
        "tags" : [
        ]
      },
      {
        "id" : "4ff0964e-287b-466f-aba1-8daa5522ad1b",
        "parentId" : "1af29405-3f42-4a9c-b779-5c77793f4e65",
        "authorId" : "9c941deb-9e03-4358-b57b-b3bf38274ea2",
        "body" : "When I use the original (no `if-else`) version I get the following error when the version check is done (this is the main reason why I added the `if-else`):\r\n`pkg-config --print-errors --exact-version 9.0 cfg`\r\n`Requested 'cfg = 9.0' but version of cfg is 9.0.0`\r\nIt seems to be dependent on how the version defined in the `.pc` file (which in the case of Virgo software gets it from the `meson.build` or `CMakeLists.txt` file).\r\nI am not sure of the best way to deal with this, any ideas?\r\n",
        "createdAt" : "2021-04-01T13:56:03Z",
        "updatedAt" : "2021-04-01T13:56:03Z",
        "lastEditedBy" : "9c941deb-9e03-4358-b57b-b3bf38274ea2",
        "tags" : [
        ]
      },
      {
        "id" : "11e33d7c-0b81-4448-bcfb-2d0b6adab3cb",
        "parentId" : "1af29405-3f42-4a9c-b779-5c77793f4e65",
        "authorId" : "95383998-4cee-419b-8e0e-30292709e0a6",
        "body" : "Ok, so the authors themselves are inconsistent between the tag and the semantic version number, great. What you have is the best solution then.",
        "createdAt" : "2021-04-01T13:57:22Z",
        "updatedAt" : "2021-04-01T13:57:23Z",
        "lastEditedBy" : "95383998-4cee-419b-8e0e-30292709e0a6",
        "tags" : [
        ]
      }
    ],
    "commit" : "02d143cd247d86fb94af6d27c3b3804eb99cdd9f",
    "line" : 10,
    "diffHunk" : "@@ -1,1 +8,12 @@\nsource:\n   url: https://git.ligo.org/virgo/virgoapp/Cfg/-/archive/{{ tag }}/Cgf-{{ tag }}.tar.gz\n   sha256: 40ff7b98d515e754a2d6d0a2eebdd995483a63a4fa7c3b804ea79c7b9ca5bb24\n"
  },
  {
    "id" : "15f75ba6-f1c0-491f-a8d6-51c5b855c817",
    "prId" : 14167,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/14167#pullrequestreview-626072179",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cc06e927-4a75-4496-a558-035c75754e3c",
        "parentId" : null,
        "authorId" : "95383998-4cee-419b-8e0e-30292709e0a6",
        "body" : "I think you copied this from the `framel` feedstock, but since I wrote that I figured out a much more elegant version:\r\n\r\n```suggestion\r\n    - pkg-config --print-errors --exact-version ${PKG_VERSION} ${PKG_NAME}  # [unix]\r\n```",
        "createdAt" : "2021-04-01T09:30:07Z",
        "updatedAt" : "2021-04-01T09:30:07Z",
        "lastEditedBy" : "95383998-4cee-419b-8e0e-30292709e0a6",
        "tags" : [
        ]
      }
    ],
    "commit" : "02d143cd247d86fb94af6d27c3b3804eb99cdd9f",
    "line" : 35,
    "diffHunk" : "@@ -1,1 +33,37 @@  commands:\n    - test -r ${PREFIX}/lib/libcfg.so\n    - test \"$(pkg-config --print-errors --modversion cfg)\" == \"${PKG_VERSION}\"  # [unix]\n\nabout:"
  }
]