[
  {
    "id" : "70e06b80-bb57-4e1f-ae46-8e497a4735d8",
    "prId" : 2249,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/2249#pullrequestreview-17844132",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b4face49-d4da-40bd-b5fd-1e7ba6566e8a",
        "parentId" : null,
        "authorId" : "085a9c6b-569e-49bd-9434-7f128372cf0c",
        "body" : "Is `pytest-runner` required to build the package?",
        "createdAt" : "2017-01-19T15:51:51Z",
        "updatedAt" : "2017-01-19T15:57:23Z",
        "lastEditedBy" : "085a9c6b-569e-49bd-9434-7f128372cf0c",
        "tags" : [
        ]
      },
      {
        "id" : "1e6f5fad-0dff-4ac5-a644-d4f12bbeae24",
        "parentId" : "b4face49-d4da-40bd-b5fd-1e7ba6566e8a",
        "authorId" : "e7d1071d-22fa-455d-bb95-a7d12593dac2",
        "body" : "It's required in the package's setup.py, and I got a \"downloads are disabled\" error without it. Can investigate the whole call chain further if you want, but it conda-build failed locally without it.",
        "createdAt" : "2017-01-19T15:55:16Z",
        "updatedAt" : "2017-01-19T15:57:23Z",
        "lastEditedBy" : "e7d1071d-22fa-455d-bb95-a7d12593dac2",
        "tags" : [
        ]
      },
      {
        "id" : "a81bf527-ce72-4b9c-83ce-c439388b3cf9",
        "parentId" : "b4face49-d4da-40bd-b5fd-1e7ba6566e8a",
        "authorId" : "085a9c6b-569e-49bd-9434-7f128372cf0c",
        "body" : "Ok, sounds good. ",
        "createdAt" : "2017-01-19T16:00:05Z",
        "updatedAt" : "2017-01-19T16:00:05Z",
        "lastEditedBy" : "085a9c6b-569e-49bd-9434-7f128372cf0c",
        "tags" : [
        ]
      },
      {
        "id" : "47153efb-d540-4d88-b2cd-3f55bae90625",
        "parentId" : "b4face49-d4da-40bd-b5fd-1e7ba6566e8a",
        "authorId" : "a3f1fdb0-47ad-411e-b63d-af6fc71a1fa6",
        "body" : "Yeah, `pytest-runner` is often in `setup_requires` if it is used. So this makes sense to have it in `build`.\r\n\r\nThough seeing `requests` in `build` is weird. I see that was added recently. Is there a reason for having it in `build`/`setup_requires`?\r\n\r\nxref: https://github.com/psychopy/pyosf/pull/4",
        "createdAt" : "2017-01-21T00:07:09Z",
        "updatedAt" : "2017-01-21T00:07:09Z",
        "lastEditedBy" : "a3f1fdb0-47ad-411e-b63d-af6fc71a1fa6",
        "tags" : [
        ]
      },
      {
        "id" : "7b486097-7364-4ee2-937f-9c02457185c6",
        "parentId" : "b4face49-d4da-40bd-b5fd-1e7ba6566e8a",
        "authorId" : "085a9c6b-569e-49bd-9434-7f128372cf0c",
        "body" : "I figured that it was because the `setup.py` imports the package and might trigger an import of `requests` in a submodule, but I haven't tested this. ",
        "createdAt" : "2017-01-21T01:19:46Z",
        "updatedAt" : "2017-01-21T01:19:47Z",
        "lastEditedBy" : "085a9c6b-569e-49bd-9434-7f128372cf0c",
        "tags" : [
        ]
      },
      {
        "id" : "75c8facf-95a0-4fcd-a5b1-a261460565b1",
        "parentId" : "b4face49-d4da-40bd-b5fd-1e7ba6566e8a",
        "authorId" : "e7d1071d-22fa-455d-bb95-a7d12593dac2",
        "body" : "Yep - that's exactly what happens:\r\n\r\n```\r\nBUILD START (revised): pyosf-1.0.4-py27_0\r\nPackage: pyosf-1.0.4-py27_0\r\nsource tree in: /Users/kastman/miniconda/conda-bld/pyosf_1484961713816/work/pyosf-1.0.4\r\n+ source /Users/kastman/miniconda/bin/activate /Users/kastman/miniconda/conda-bld/pyosf_1484961713816/_b_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_pla\r\n+ python setup.py install --single-version-externally-managed --record record.txt\r\nTraceback (most recent call last):\r\n  File \"setup.py\", line 11, in <module>\r\n    from pyosf import __version__\r\n  File \"/Users/kastman/miniconda/conda-bld/pyosf_1484961713816/work/pyosf-1.0.4/pyosf/__init__.py\", line 9, in <module>\r\n    from .remote import Session, TokenStorage\r\n  File \"/Users/kastman/miniconda/conda-bld/pyosf_1484961713816/work/pyosf-1.0.4/pyosf/remote.py\", line 18, in <module>\r\n    import requests\r\nImportError: No module named requests\r\n```",
        "createdAt" : "2017-01-21T01:23:54Z",
        "updatedAt" : "2017-01-21T01:23:55Z",
        "lastEditedBy" : "e7d1071d-22fa-455d-bb95-a7d12593dac2",
        "tags" : [
        ]
      },
      {
        "id" : "11ca9300-df40-4806-971d-639f2a550ba7",
        "parentId" : "b4face49-d4da-40bd-b5fd-1e7ba6566e8a",
        "authorId" : "e7d1071d-22fa-455d-bb95-a7d12593dac2",
        "body" : "I guess I'm not sure why dependencies in both the build and install environments should be surprising - maybe I'm not understanding the difference between the two?",
        "createdAt" : "2017-01-21T01:29:03Z",
        "updatedAt" : "2017-01-21T01:29:03Z",
        "lastEditedBy" : "e7d1071d-22fa-455d-bb95-a7d12593dac2",
        "tags" : [
        ]
      },
      {
        "id" : "fe611c3e-37b3-43f3-b7d1-a6a2af20c9c0",
        "parentId" : "b4face49-d4da-40bd-b5fd-1e7ba6566e8a",
        "authorId" : "a3f1fdb0-47ad-411e-b63d-af6fc71a1fa6",
        "body" : "To be clear, I'm not surprised that one needs to add this to `build` if it is in `setup_requires` in the first place. However, I am surprised that it is in `setup_requires`. What is `requests` doing when the package is building?",
        "createdAt" : "2017-01-22T20:17:21Z",
        "updatedAt" : "2017-01-22T20:17:21Z",
        "lastEditedBy" : "a3f1fdb0-47ad-411e-b63d-af6fc71a1fa6",
        "tags" : [
        ]
      },
      {
        "id" : "9c603add-ab3f-41e4-a438-8cdb8e9084e7",
        "parentId" : "b4face49-d4da-40bd-b5fd-1e7ba6566e8a",
        "authorId" : "e7d1071d-22fa-455d-bb95-a7d12593dac2",
        "body" : "Seems like ``requests`` isn't doing anything, it just has to be there. What happens is that ``setup.py`` gets the version from importing the module ``pyosf.__version__``, but that ends up importing ``__init__``, and the whole rest of the module with all its dependencies.\r\n\r\nIs it worth changing the version upstream? ",
        "createdAt" : "2017-01-23T01:01:07Z",
        "updatedAt" : "2017-01-23T01:01:07Z",
        "lastEditedBy" : "e7d1071d-22fa-455d-bb95-a7d12593dac2",
        "tags" : [
        ]
      }
    ],
    "commit" : "5ee1bebbb76e140c2451faf10f600372257b2792",
    "line" : 23,
    "diffHunk" : "@@ -1,1 +21,25 @@    - setuptools\n    - requests\n    - pytest-runner\n  run:\n    - python"
  }
]