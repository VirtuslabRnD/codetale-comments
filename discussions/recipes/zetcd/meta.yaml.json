[
  {
    "id" : "3b29efda-916f-432f-9aef-8827ccc85ad3",
    "prId" : 8919,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/8919#pullrequestreview-269364877",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a0d92585-c4be-40f8-8ba5-c9d021cedf42",
        "parentId" : null,
        "authorId" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "body" : "`pkg_src` controls the directory where we will be cloning the git repo or unpacking the `tar.gz` file. \r\n\r\nI used the fact that we have Jinja2 templates to rename the `etcd-io` directory to `coreos` as you had done in your build scripts.",
        "createdAt" : "2019-08-01T02:04:06Z",
        "updatedAt" : "2019-08-01T13:58:54Z",
        "lastEditedBy" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "tags" : [
        ]
      }
    ],
    "commit" : "841ab82f68c58765f1875ca830bc2e6d957aece2",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +3,7 @@\n{% set name = import_path.split('/')[-1] %}\n{% set pkg_src = ('src/'+import_path).replace('etcd-io',\n                                              'coreos').replace(\"/\", \"\\\\\" if win else \"/\") %}\n"
  },
  {
    "id" : "e53254d7-99c4-4da5-b05a-01c22e4f74d2",
    "prId" : 8919,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/8919#pullrequestreview-269621378",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0a797e50-d8e5-40bb-a855-d0c585683287",
        "parentId" : null,
        "authorId" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "body" : "`pushd` is a command that works well both in Windows and Linux.",
        "createdAt" : "2019-08-01T02:05:03Z",
        "updatedAt" : "2019-08-01T13:58:54Z",
        "lastEditedBy" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "tags" : [
        ]
      },
      {
        "id" : "9602a692-73d9-4673-8c9a-8a1636a605d6",
        "parentId" : "0a797e50-d8e5-40bb-a855-d0c585683287",
        "authorId" : "efe02b2c-f8cf-42e3-9e0e-10ef9d7ca31a",
        "body" : " the name replacement at `pkg_src` is one of hell of a magic",
        "createdAt" : "2019-08-01T13:34:58Z",
        "updatedAt" : "2019-08-01T13:58:54Z",
        "lastEditedBy" : "efe02b2c-f8cf-42e3-9e0e-10ef9d7ca31a",
        "tags" : [
        ]
      }
    ],
    "commit" : "841ab82f68c58765f1875ca830bc2e6d957aece2",
    "line" : 20,
    "diffHunk" : "@@ -1,1 +18,22 @@  number: 0\n  script:\n    - pushd {{ pkg_src }}\n    - go install -v\n        -ldflags \"-w -X {{pkg_src}}/version.Version={{ version }} -X {{pkg_src}}/version.SHA={{ GIT_FULL_HASH }}\""
  },
  {
    "id" : "516ac28a-4382-45ff-86be-10fb48a1899b",
    "prId" : 8919,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/8919#pullrequestreview-269364877",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5a6bdd43-c4a1-41eb-913a-a0a79f323672",
        "parentId" : null,
        "authorId" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "body" : "I replaced the linux environment variables with the Jinja equivalents, pkg_src, version and [GIT_FULL_HASH](https://docs.conda.io/projects/conda-build/en/latest/user-guide/environment-variables.html?highlight=environment#git-environment-variables). By using Jinja here we can avoid creating additional lines for Windows and Unix.",
        "createdAt" : "2019-08-01T02:08:04Z",
        "updatedAt" : "2019-08-01T13:58:54Z",
        "lastEditedBy" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "tags" : [
        ]
      }
    ],
    "commit" : "841ab82f68c58765f1875ca830bc2e6d957aece2",
    "line" : 22,
    "diffHunk" : "@@ -1,1 +20,24 @@    - pushd {{ pkg_src }}\n    - go install -v\n        -ldflags \"-w -X {{pkg_src}}/version.Version={{ version }} -X {{pkg_src}}/version.SHA={{ GIT_FULL_HASH }}\"\n        ./cmd/...\n"
  },
  {
    "id" : "3c3d2285-190f-4717-8b53-5288f72cf565",
    "prId" : 8919,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/8919#pullrequestreview-269364877",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "dc49ab63-1510-4ee4-acb8-5bb090b247d2",
        "parentId" : null,
        "authorId" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "body" : "Instead of building zetcd, zkctl and zkboom separately, we can leverage go's 'recursive' build capability with ./cmd/...",
        "createdAt" : "2019-08-01T02:09:10Z",
        "updatedAt" : "2019-08-01T13:58:54Z",
        "lastEditedBy" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "tags" : [
        ]
      }
    ],
    "commit" : "841ab82f68c58765f1875ca830bc2e6d957aece2",
    "line" : 23,
    "diffHunk" : "@@ -1,1 +21,25 @@    - go install -v\n        -ldflags \"-w -X {{pkg_src}}/version.Version={{ version }} -X {{pkg_src}}/version.SHA={{ GIT_FULL_HASH }}\"\n        ./cmd/...\n\nrequirements:"
  },
  {
    "id" : "aab696d6-065d-4346-9a04-9abb2a656032",
    "prId" : 8919,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/8919#pullrequestreview-269622625",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d21cde3b-885b-4bba-8e5b-b78b2ba519cf",
        "parentId" : null,
        "authorId" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "body" : "Use `go install` instead of `go build` so that the resulting binaries get automatically installed into PREFIX/bin. This is consistent for Windows and Linux.",
        "createdAt" : "2019-08-01T02:09:58Z",
        "updatedAt" : "2019-08-01T13:58:54Z",
        "lastEditedBy" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "tags" : [
        ]
      },
      {
        "id" : "c6aa9e91-4666-466c-87ef-5422fbdbfd00",
        "parentId" : "d21cde3b-885b-4bba-8e5b-b78b2ba519cf",
        "authorId" : "efe02b2c-f8cf-42e3-9e0e-10ef9d7ca31a",
        "body" : "cool. so, no need to point out the output path to `PREFIX/bin` since `go install` will take of that? duly noted, on this one.  ",
        "createdAt" : "2019-08-01T13:36:46Z",
        "updatedAt" : "2019-08-01T13:58:54Z",
        "lastEditedBy" : "efe02b2c-f8cf-42e3-9e0e-10ef9d7ca31a",
        "tags" : [
        ]
      }
    ],
    "commit" : "841ab82f68c58765f1875ca830bc2e6d957aece2",
    "line" : 21,
    "diffHunk" : "@@ -1,1 +19,23 @@  script:\n    - pushd {{ pkg_src }}\n    - go install -v\n        -ldflags \"-w -X {{pkg_src}}/version.Version={{ version }} -X {{pkg_src}}/version.SHA={{ GIT_FULL_HASH }}\"\n        ./cmd/..."
  },
  {
    "id" : "a05f7823-434d-472b-892f-7ff9d42165e0",
    "prId" : 8919,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/8919#pullrequestreview-269364877",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e6ff435f-1a15-4702-a811-c3a827f116fb",
        "parentId" : null,
        "authorId" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "body" : "It looks like zetcd returns a non-zero value even if we invoke it with --help. So we switch the test to just ensure that it is available in the path.",
        "createdAt" : "2019-08-01T02:11:03Z",
        "updatedAt" : "2019-08-01T13:58:54Z",
        "lastEditedBy" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "tags" : [
        ]
      }
    ],
    "commit" : "841ab82f68c58765f1875ca830bc2e6d957aece2",
    "line" : 32,
    "diffHunk" : "@@ -1,1 +30,34 @@  commands:\n      - which zetcd  # [not win]\n      - where zetcd  # [win]\n      - zkctl --help\n      - zkboom --help"
  },
  {
    "id" : "bea83250-db7b-445d-9f34-913124c16f0c",
    "prId" : 8919,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/8919#pullrequestreview-269820853",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fec601b2-86bc-481e-9a8c-b6cee0cc2029",
        "parentId" : null,
        "authorId" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "body" : "I actually made a mistake here, it should have been {{ import_path }} instead of {{ pkg_src}}.",
        "createdAt" : "2019-08-01T19:06:19Z",
        "updatedAt" : "2019-08-01T19:07:16Z",
        "lastEditedBy" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "tags" : [
        ]
      }
    ],
    "commit" : "841ab82f68c58765f1875ca830bc2e6d957aece2",
    "line" : 22,
    "diffHunk" : "@@ -1,1 +20,24 @@    - pushd {{ pkg_src }}\n    - go install -v\n        -ldflags \"-w -X {{pkg_src}}/version.Version={{ version }} -X {{pkg_src}}/version.SHA={{ GIT_FULL_HASH }}\"\n        ./cmd/...\n"
  },
  {
    "id" : "46a6ace9-c30c-45b5-8ef2-f577b85c454c",
    "prId" : 8919,
    "prUrl" : "https://github.com/conda-forge/staged-recipes/pull/8919#pullrequestreview-269820853",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9337bb38-decc-4a06-aefb-bef3f8304655",
        "parentId" : null,
        "authorId" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "body" : "we should have removed the `v` in front of version here.",
        "createdAt" : "2019-08-01T19:06:41Z",
        "updatedAt" : "2019-08-01T19:07:16Z",
        "lastEditedBy" : "f1f932c6-0dea-4f1c-815a-adb7bc17b4db",
        "tags" : [
        ]
      }
    ],
    "commit" : "841ab82f68c58765f1875ca830bc2e6d957aece2",
    "line" : 10,
    "diffHunk" : "@@ -1,1 +8,12 @@package:\n  name: {{ name|lower }}\n  version: v{{ version }}\n\nsource:"
  }
]