[
  {
    "id" : "3b87e93c-01de-4e47-881d-18cb47c67ba6",
    "prId" : 33,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "294415ec-2c33-4ba6-a38e-2f6ba9fb2f3b",
        "parentId" : null,
        "authorId" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "body" : "How would we find it otherwise? Put it in the repo?\n",
        "createdAt" : "2015-11-08T18:24:59Z",
        "updatedAt" : "2015-11-08T18:24:59Z",
        "lastEditedBy" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "tags" : [
        ]
      },
      {
        "id" : "d1d23646-675a-4f53-b1f8-6053f96b439b",
        "parentId" : "294415ec-2c33-4ba6-a38e-2f6ba9fb2f3b",
        "authorId" : "0a6b99c1-e18d-4971-abe3-b52228030462",
        "body" : "We can download it to a known location, similar to how engine.git downloads the Dart SDK to `//third_parth/dart-sdk/dart-sdk`.\n",
        "createdAt" : "2015-11-08T18:50:38Z",
        "updatedAt" : "2015-11-08T18:50:38Z",
        "lastEditedBy" : "0a6b99c1-e18d-4971-abe3-b52228030462",
        "tags" : [
        ]
      }
    ],
    "commit" : "dbee5c01e9859d9fa56942ab57be53aaa8931f45",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +11,15 @@\n# TODO(abarth): We shouldn't require dart to be on the user's path.\nDART=dart\n\nif [ \"$FLUTTER_TOOLS_DIR/pubspec.yaml\" -nt \"$FLUTTER_TOOLS_DIR/pubspec.lock\" ]; then"
  },
  {
    "id" : "d4f03f3f-f434-4ba3-9b4e-e927263e7e80",
    "prId" : 1483,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "112a9821-4928-4a8b-b218-18eac67f6468",
        "parentId" : null,
        "authorId" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "body" : "we should presumably do this in the flutter.bat file also\n",
        "createdAt" : "2016-01-30T01:13:14Z",
        "updatedAt" : "2016-02-01T21:11:34Z",
        "lastEditedBy" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "tags" : [
        ]
      },
      {
        "id" : "531901f7-811c-49c6-8d14-a5d9c15b2e13",
        "parentId" : "112a9821-4928-4a8b-b218-18eac67f6468",
        "authorId" : "1dfcfd37-1c96-47ca-8167-0cce6cd12366",
        "body" : "good catch, I've implemented this, not sure how to test it though\n",
        "createdAt" : "2016-02-01T20:28:29Z",
        "updatedAt" : "2016-02-01T21:11:34Z",
        "lastEditedBy" : "1dfcfd37-1c96-47ca-8167-0cce6cd12366",
        "tags" : [
        ]
      }
    ],
    "commit" : "beaffecb7be37477f254defad121585af6e496cf",
    "line" : 12,
    "diffHunk" : "@@ -1,1 +20,24 @@  echo Updating flutter tool...\n  (cd \"$FLUTTER_TOOLS_DIR\"; pub get > /dev/null)\n  (cd \"$FLUTTER_DIR\"; pub get > /dev/null)  # Allows us to check if sky_engine's REVISION is correct\n  $DART --snapshot=\"$SNAPSHOT_PATH\" --package-root=\"$FLUTTER_TOOLS_DIR/packages\" \"$SCRIPT_PATH\"\n  echo -n $REVISION > \"$STAMP_PATH\""
  },
  {
    "id" : "6667ce8c-a260-4ed3-bb13-230ffe55294b",
    "prId" : 1647,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f42a4a80-1963-40f1-89d2-11851765773c",
        "parentId" : null,
        "authorId" : "0a6b99c1-e18d-4971-abe3-b52228030462",
        "body" : "This skips the `pub get` steps, but I guess we're assuming that dev mode people will know to do those.\n\nAlso, you're losing the exit code.  Maybe `exit $?` ?\n",
        "createdAt" : "2016-02-06T06:07:48Z",
        "updatedAt" : "2016-02-06T06:30:00Z",
        "lastEditedBy" : "0a6b99c1-e18d-4971-abe3-b52228030462",
        "tags" : [
        ]
      },
      {
        "id" : "cee9f556-c35b-4546-9019-6d509692d276",
        "parentId" : "f42a4a80-1963-40f1-89d2-11851765773c",
        "authorId" : "0fc1222a-8e68-4923-bf2e-18203f0657f2",
        "body" : "Ah, I missed the pub get step. That may be something that we depend on flutter devs running? I run `./dev/update_packages.dart --upgrade` periodically.\n\nWe're still in the `set -e` part of the script, so the above line will exit on non-zero codes.\n",
        "createdAt" : "2016-02-06T06:18:38Z",
        "updatedAt" : "2016-02-06T06:30:00Z",
        "lastEditedBy" : "0fc1222a-8e68-4923-bf2e-18203f0657f2",
        "tags" : [
        ]
      },
      {
        "id" : "6cd96201-8719-4612-b58c-2a5a083fba6c",
        "parentId" : "f42a4a80-1963-40f1-89d2-11851765773c",
        "authorId" : "0a6b99c1-e18d-4971-abe3-b52228030462",
        "body" : "I wouldn't worry too much about the `pub get` steps.  `./dev/update_packages.dart` covers that use case as you say.  Yay for `-e`\n",
        "createdAt" : "2016-02-06T06:22:48Z",
        "updatedAt" : "2016-02-06T06:30:00Z",
        "lastEditedBy" : "0a6b99c1-e18d-4971-abe3-b52228030462",
        "tags" : [
        ]
      }
    ],
    "commit" : "7425f60614997cf848500aff90565272709a554f",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +18,22 @@if [ -n $FLUTTER_DEV ]; then\n  $DART --checked --package-root=\"$FLUTTER_TOOLS_DIR/packages\" \"$SCRIPT_PATH\" \"$@\"\n  exit 0\nfi\n"
  },
  {
    "id" : "a61076c7-986a-4b8a-90f6-02026b644d61",
    "prId" : 2847,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1b80ca4e-455f-409f-ad55-051e73c0c6d8",
        "parentId" : null,
        "authorId" : "0a6b99c1-e18d-4971-abe3-b52228030462",
        "body" : "These nested `\"` don't mess things up?\n",
        "createdAt" : "2016-03-23T17:58:44Z",
        "updatedAt" : "2016-03-23T17:58:44Z",
        "lastEditedBy" : "0a6b99c1-e18d-4971-abe3-b52228030462",
        "tags" : [
        ]
      }
    ],
    "commit" : "e10b74cd24557202109e8891e9364e77e3f40aef",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +10,14 @@  while [ -h \"$file\" ]; do\n    # On Mac OS, readlink -f doesn't work.\n    file=\"$(readlink \"$file\")\"\n  done\n  echo \"$file\""
  },
  {
    "id" : "e0b40a8f-885f-4517-b63e-745356ddb732",
    "prId" : 5991,
    "prUrl" : "https://github.com/flutter/flutter/pull/5991#pullrequestreview-1215035",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f2a34c31-32fa-4366-8aec-84495f364c14",
        "parentId" : null,
        "authorId" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "body" : "what other warnings might this one day mute? I'm worried we're going to miss early warnings of potential breakage...\n",
        "createdAt" : "2016-09-22T19:33:47Z",
        "updatedAt" : "2016-09-22T19:33:47Z",
        "lastEditedBy" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "tags" : [
        ]
      }
    ],
    "commit" : "a36c929f064ea4a8890f1a4fbb587c19b6085ca9",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +42,46 @@    echo Building flutter tool...\n    FLUTTER_DIR=\"$FLUTTER_ROOT/packages/flutter\"\n    (cd \"$FLUTTER_TOOLS_DIR\"; \"../../bin/cache/dart-sdk/bin/pub\" get --verbosity=error --no-packages-dir)\n    \"$DART\" --snapshot=\"$SNAPSHOT_PATH\" --packages=\"$FLUTTER_TOOLS_DIR/.packages\" \"$SCRIPT_PATH\"\n    echo $REVISION > \"$STAMP_PATH\""
  },
  {
    "id" : "59c201c6-e508-49a5-99f5-76cb3c453fe1",
    "prId" : 13248,
    "prUrl" : "https://github.com/flutter/flutter/pull/13248#pullrequestreview-80038234",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "32d213d3-32ae-4f94-9356-b771e8fd78ee",
        "parentId" : null,
        "authorId" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "body" : "oh man, this shell script is getting out of hand",
        "createdAt" : "2017-11-29T23:48:13Z",
        "updatedAt" : "2017-12-05T19:58:52Z",
        "lastEditedBy" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "tags" : [
        ]
      }
    ],
    "commit" : "cfa08afd7eb4cc217227d32cb513f14fd3622ebf",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +34,38 @@}\n\nfunction upgrade_flutter () {\n  if hash flock 2>/dev/null; then\n    flock 3 # ensures that we don't simultaneously update Dart in multiple parallel instances"
  },
  {
    "id" : "8771bd6f-8de2-478e-ad06-c2b7f2fccfa8",
    "prId" : 14061,
    "prUrl" : "https://github.com/flutter/flutter/pull/14061#pullrequestreview-89244820",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "aadd15cd-814d-4f30-84d5-3d78e78eb2d4",
        "parentId" : null,
        "authorId" : "d61ab95a-0bf0-4571-9098-19991dd821ca",
        "body" : "Does this need to be mirrored in the Windows version of the script (`flutter.bat`)?",
        "createdAt" : "2018-01-16T17:55:21Z",
        "updatedAt" : "2018-01-18T01:43:25Z",
        "lastEditedBy" : "d61ab95a-0bf0-4571-9098-19991dd821ca",
        "tags" : [
        ]
      },
      {
        "id" : "b124f577-fd25-46b8-8a96-ed81cc62f02e",
        "parentId" : "aadd15cd-814d-4f30-84d5-3d78e78eb2d4",
        "authorId" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "body" : "Added:\r\n```bat\r\n    IF EXIST \"%FLUTTER_ROOT%\\version\" DEL %FLUTTER_ROOT%\\version\r\n```\r\n...just after `:do_snapshot`.",
        "createdAt" : "2018-01-16T20:29:02Z",
        "updatedAt" : "2018-01-18T01:43:25Z",
        "lastEditedBy" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "tags" : [
        ]
      },
      {
        "id" : "ec314c0a-ea57-4682-8471-fbb82a91af7b",
        "parentId" : "aadd15cd-814d-4f30-84d5-3d78e78eb2d4",
        "authorId" : "d61ab95a-0bf0-4571-9098-19991dd821ca",
        "body" : "You probably want the argument to DEL in quotes as well, just in case there are spaces in FLUTTER_ROOT.",
        "createdAt" : "2018-01-16T20:54:27Z",
        "updatedAt" : "2018-01-18T01:43:25Z",
        "lastEditedBy" : "d61ab95a-0bf0-4571-9098-19991dd821ca",
        "tags" : [
        ]
      }
    ],
    "commit" : "a49c3fee60d6833b052ee23b700b844ff28b792f",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +74,78 @@  local revision=`(cd \"$FLUTTER_ROOT\"; git rev-parse HEAD)`\n  if [ ! -f \"$SNAPSHOT_PATH\" ] || [ ! -s \"$STAMP_PATH\" ] || [ `cat \"$STAMP_PATH\"` != \"$revision\" ] || [ \"$FLUTTER_TOOLS_DIR/pubspec.yaml\" -nt \"$FLUTTER_TOOLS_DIR/pubspec.lock\" ]; then\n    rm -f \"$FLUTTER_ROOT/version\"\n    mkdir -p \"$FLUTTER_ROOT/bin/cache\"\n    touch \"$FLUTTER_ROOT/bin/cache/.dartignore\""
  },
  {
    "id" : "569637bc-e4f6-4053-a224-f6c32c2ed375",
    "prId" : 14157,
    "prUrl" : "https://github.com/flutter/flutter/pull/14157#pullrequestreview-89869108",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "17f29494-81df-4f9f-83a6-abf48f1e1516",
        "parentId" : null,
        "authorId" : "e5b211cf-78fa-4274-badd-de8c9a41b4e0",
        "body" : "I did the extremely dumb change, but maybe the better fix is:\r\n\r\n```sh\r\nif [ \"$FLUTTER_ROOT\" == $( git rev-parse --show-toplevel ) ]; then\r\n```",
        "createdAt" : "2018-01-18T05:28:01Z",
        "updatedAt" : "2018-01-18T05:31:16Z",
        "lastEditedBy" : "e5b211cf-78fa-4274-badd-de8c9a41b4e0",
        "tags" : [
        ]
      },
      {
        "id" : "4d6ad8fe-a596-4617-a2af-6519198c380b",
        "parentId" : "17f29494-81df-4f9f-83a6-abf48f1e1516",
        "authorId" : "e51c798e-576f-47fe-bcd8-577d78e2a5a1",
        "body" : "Since this bit of the code isn't guaranteed to be run from within `$FLUTTER_ROOT` you'd need a `cd \"$FLUTTER_ROOT\"` in the subshell command, similar to what's on line 42. I think using a `-e` check is sufficient as a reasonable heuristic here (and is equivalent to what we do on Windows [here](https://github.com/flutter/flutter/blob/master/bin/flutter.bat#L39).",
        "createdAt" : "2018-01-18T17:35:32Z",
        "updatedAt" : "2018-01-18T17:36:29Z",
        "lastEditedBy" : "e51c798e-576f-47fe-bcd8-577d78e2a5a1",
        "tags" : [
        ]
      }
    ],
    "commit" : "1880ea46ee1d0dc607d18f0958422417d52ef6ae",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +94,98 @@fi\n# Test if the flutter directory is a git clone (otherwise git rev-parse HEAD would fail)\nif [ ! -e \"$FLUTTER_ROOT/.git\" ]; then\n  echo \"Error: The Flutter directory is not a clone of the GitHub project.\"\n  exit 1"
  }
]