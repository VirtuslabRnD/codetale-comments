[
  {
    "id" : "84c43e71-ec2f-4556-be83-125d22eb5299",
    "prId" : 12023,
    "prUrl" : "https://github.com/apache/airflow/pull/12023#pullrequestreview-521742658",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "79c87f4b-a915-49c5-895a-78a0b460d617",
        "parentId" : null,
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "It is not difficult to load setup.py in order to \"normally\" access it from within Python. \r\n```\r\nfrom importlib import util\r\nimport os\r\nspec = util.spec_from_file_location(\"setup\", os.path.join('setup.py'))\r\nmod = util.module_from_spec(spec)\r\nreturn mod.EXTRAS_REQUIREMENTS\r\n```\r\n Combined with Jinja this can allow you to generate a complete list automatically. See: https://github.com/apache/airflow/blob/master/docs/configurations-ref.rst",
        "createdAt" : "2020-11-02T14:24:00Z",
        "updatedAt" : "2020-11-02T14:24:00Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      },
      {
        "id" : "ff196ff9-23dd-4724-a5bb-aa9aaa7812f6",
        "parentId" : "79c87f4b-a915-49c5-895a-78a0b460d617",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "I actually advise against it.\r\n\r\n It happened not more than once when I tried to import setup.py  in pre-commits and due to some \"magic\" (version reading for example), it failed pretty bad if you did not modify sys.path. ",
        "createdAt" : "2020-11-02T14:28:09Z",
        "updatedAt" : "2020-11-02T14:28:09Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      },
      {
        "id" : "542c1e2b-9506-4344-8fbc-fc9ac6a03f45",
        "parentId" : "79c87f4b-a915-49c5-895a-78a0b460d617",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "I think using regexp in this case is \"good enough\" ",
        "createdAt" : "2020-11-02T14:28:43Z",
        "updatedAt" : "2020-11-02T14:28:43Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      },
      {
        "id" : "45ab4171-f84a-4afe-a473-b187a3fff3b4",
        "parentId" : "79c87f4b-a915-49c5-895a-78a0b460d617",
        "authorId" : "a587eb9b-0229-4598-b2fd-e37318d5bede",
        "body" : "@mik-laj I tried smth similar while working on this issue:\r\n\r\n```\r\n> AIRFLOW_SOURCES_DIR = os.path.join(dirname(__file__), os.pardir, os.pardir, os.pardir)\r\n> sys.path.insert(0, AIRFLOW_SOURCES_DIR)\r\n> from setup import EXTRAS_REQUIREMENTS\r\n```\r\n\r\nThe struggle is here:\r\n\r\n```\r\n> pprint(EXTRAS_REQUIREMENTS)\r\n 'apache.atlas': ['atlasclient>=0.1.2'],\r\n 'apache.beam': ['apache-beam[gcp]'],\r\n 'apache.cassandra': ['cassandra-driver>=3.13.0,<3.21.0'],\r\n 'apache.druid': ['pydruid>=0.4.1'],\r\n```\r\n\r\nas you can see this `Dict` forms a 'package'â€“'dependencies' association. I can't tell anymore which are aliases (having the same list of dependencies doesn't sound like a valid proof).\r\n\r\nI commented this out in the original pull-request but forgot to mention it after I re-do it. Sorry.",
        "createdAt" : "2020-11-02T15:38:12Z",
        "updatedAt" : "2020-11-02T15:38:13Z",
        "lastEditedBy" : "a587eb9b-0229-4598-b2fd-e37318d5bede",
        "tags" : [
        ]
      }
    ],
    "commit" : "9a3829b578924908fe073b3c17f3d502444370b7",
    "line" : 61,
    "diffHunk" : "@@ -1,1 +59,63 @@            extras_dict[package] = []\n        extras_dict[package].append(alias)\n    return extras_dict\n\n"
  },
  {
    "id" : "9e72b592-3e15-45b1-a0f7-4b7e37912aed",
    "prId" : 12218,
    "prUrl" : "https://github.com/apache/airflow/pull/12218#pullrequestreview-526713131",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1161ee2b-49a9-4270-83f3-bdef014435d5",
        "parentId" : null,
        "authorId" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "body" : "I did not expected that we will adopt rich so fast ðŸš€ ",
        "createdAt" : "2020-11-09T22:37:28Z",
        "updatedAt" : "2020-11-09T23:31:07Z",
        "lastEditedBy" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "tags" : [
        ]
      },
      {
        "id" : "95bd3bf6-dba7-4904-b6cd-aa63299f241a",
        "parentId" : "1161ee2b-49a9-4270-83f3-bdef014435d5",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "I love rich, I am going to plug it in everywhere I can in Airflow :D",
        "createdAt" : "2020-11-09T22:40:35Z",
        "updatedAt" : "2020-11-09T23:31:07Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      }
    ],
    "commit" : "acc79ad58c2eb1468feb0b04189ab7a07b55c199",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +29,33 @@from rich import print as rprint\nfrom rich.console import Console\nfrom rich.table import Table\n\nAIRFLOW_SOURCES_DIR = os.path.join(dirname(__file__), os.pardir, os.pardir, os.pardir)"
  }
]