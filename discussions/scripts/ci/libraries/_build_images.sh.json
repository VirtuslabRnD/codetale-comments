[
  {
    "id" : "9c6d95fc-dd83-4ffa-b957-94385016f66e",
    "prId" : 10390,
    "prUrl" : "https://github.com/apache/airflow/pull/10390#pullrequestreview-470190563",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fb792477-4c24-4277-a98a-cc8264e0e158",
        "parentId" : null,
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "What values can the variable ``DETECTED_TERMINAL`` have?  I can see that this variable is always set to `/dev/tty`. Did I miss something?\r\n",
        "createdAt" : "2020-08-19T01:57:09Z",
        "updatedAt" : "2020-08-19T01:57:10Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      },
      {
        "id" : "c7de9147-565c-4d98-8859-f0fa52dd8ef4",
        "parentId" : "fb792477-4c24-4277-a98a-cc8264e0e158",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "it can be /dev/tty if we cannot detect therminal with $(tty) (which happens inside pre-commit on git commit (it is always non-interactive by design)",
        "createdAt" : "2020-08-19T07:06:57Z",
        "updatedAt" : "2020-08-19T07:06:58Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      },
      {
        "id" : "3c773ac5-6eb2-4fc8-ad31-abc0bf41c013",
        "parentId" : "fb792477-4c24-4277-a98a-cc8264e0e158",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "it can be /dev/tty if we cannot detect therminal with $(tty) (which happens inside pre-commit on git commit (it is always non-interactive by design)\r\n```\r\nelif [[ ${DETECTED_TERMINAL:=$(tty)} != \"not a tty\" ]]; then\r\n````",
        "createdAt" : "2020-08-19T07:06:58Z",
        "updatedAt" : "2020-08-19T07:06:58Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      },
      {
        "id" : "6f5cf524-8144-4386-9700-4a01bc55dc89",
        "parentId" : "fb792477-4c24-4277-a98a-cc8264e0e158",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "The whole thing is about trying to print progress to most likely terminal i fbuild happens insde pre-commit inside `git commit command - it won't always succeed but in vast majority of cases of developer workstation  - it will",
        "createdAt" : "2020-08-19T07:25:11Z",
        "updatedAt" : "2020-08-19T07:25:11Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "ff4b32ed4572a828b51003f3cc077a98a6a01d66",
    "line" : 169,
    "diffHunk" : "@@ -1,1 +562,566 @@        kill -HUP \"${SPIN_PID}\" || true\n        wait \"${SPIN_PID}\" || true\n        echo > \"${DETECTED_TERMINAL}\"\n    fi\n    if [[ -n ${DETECTED_TERMINAL:=\"\"} ]]; then"
  },
  {
    "id" : "3271b548-0de5-408b-8619-b631dcf1015e",
    "prId" : 11535,
    "prUrl" : "https://github.com/apache/airflow/pull/11535#pullrequestreview-511172637",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4a277be0-e5ba-4825-8587-d6fa662532d2",
        "parentId" : null,
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "```suggestion\r\n        traps::add_trap '$(kill \"${SPIN_PID}\" || true)' EXIT HUP INT TERM\r\n```\r\n\r\nDoes it not need `\"` for expansion?",
        "createdAt" : "2020-10-18T17:04:24Z",
        "updatedAt" : "2020-10-18T17:04:24Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "faa022cd-9e93-4fc2-9a72-8d73da61410c",
        "parentId" : "4a277be0-e5ba-4825-8587-d6fa662532d2",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "Example with single quote:\r\n\r\n```\r\n❯ a=\"x\"\r\n❯ echo '$a'\r\n$a\r\n❯ echo '${a}'\r\n${a}\r\n❯ echo \"${a}\"\r\nx\r\n❯ e\r\n```",
        "createdAt" : "2020-10-18T17:04:48Z",
        "updatedAt" : "2020-10-18T17:05:27Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "ebd829c2-92cd-4927-b3f6-9c14eacbd646",
        "parentId" : "4a277be0-e5ba-4825-8587-d6fa662532d2",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Nope. It is entirely correct. Look where the scope of ' starts/ends.\r\n\r\nI want the SPIN_PID to be resolved at the time when the add_trap command line parameter gets evaluated. The solution you proposed will make it evaluated at the moment trap will be executed.\r\n\r\n```\r\nSPIN_PID=10\r\ntraps::add_trap '$(kill '${SPIN_PID}' || true)' EXIT HUP INT TERM\r\n```\r\nwill be evaluated to \r\n\r\n```\r\ntraps::add_trap '$(kill 10 || true)' EXIT HUP INT TERM\r\n```\r\n\r\nSimply the ${SPIN_PID} is between the two '-delimite striings  \r\n\r\nAnd this is exactly what I want. ",
        "createdAt" : "2020-10-18T19:07:23Z",
        "updatedAt" : "2020-10-18T19:07:23Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "f6590d9dc0196856935b0df649e4944bedf6eeda",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +521,525 @@        SPIN_PID=$!\n        # shellcheck disable=SC2064,SC2016\n        traps::add_trap '$(kill '${SPIN_PID}' || true)' EXIT HUP INT TERM\n    fi\n    push_pull_remove_images::pull_ci_images_if_needed"
  },
  {
    "id" : "6e1f817a-346c-4fec-8e77-0cb6fd92ff07",
    "prId" : 16586,
    "prUrl" : "https://github.com/apache/airflow/pull/16586#pullrequestreview-689479694",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d8bd328c-332d-4a2f-9e8c-3f2338a9f97f",
        "parentId" : null,
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "This is because GitHub added authentication via GITHUB_TOKEN in the meantime, so we do not need to configure the secret personal token any more.",
        "createdAt" : "2021-06-22T13:06:11Z",
        "updatedAt" : "2021-06-22T13:06:17Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "15660ca132233cf330cda7444ff79c15f15a1da6",
    "line" : 29,
    "diffHunk" : "@@ -1,1 +427,431 @@function build_images::configure_docker_registry() {\n    if [[ ${USE_GITHUB_REGISTRY} == \"true\" ]]; then\n        local token=\"${GITHUB_TOKEN}\"\n        if [[ -z \"${token}\" ]] ; then\n            verbosity::print_info"
  }
]