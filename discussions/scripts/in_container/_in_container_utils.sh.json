[
  {
    "id" : "02b29fcf-3a82-4d1b-b07c-12f47200b751",
    "prId" : 10651,
    "prUrl" : "https://github.com/apache/airflow/pull/10651#pullrequestreview-478470430",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3f5027fc-7be3-4d73-a770-11dbd4f433c7",
        "parentId" : null,
        "authorId" : "e29ffafb-ac51-434b-b9e0-af262caae1ee",
        "body" : "You need to duplicate the code from `_traps.sh`? Is there no better way?",
        "createdAt" : "2020-08-31T08:29:30Z",
        "updatedAt" : "2020-08-31T10:42:08Z",
        "lastEditedBy" : "e29ffafb-ac51-434b-b9e0-af262caae1ee",
        "tags" : [
        ]
      },
      {
        "id" : "f4e06d09-c81c-42c6-93b3-82b9399215eb",
        "parentId" : "3f5027fc-7be3-4d73-a770-11dbd4f433c7",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Not really. The problem is that there are no common parts between the \"in_container\" and \"out_container\" stuff. We are even excluding the non-in-container scripts when we prepare the images, to make sure that what we run outside of the container is not run inside (by default). I think it's important to keep that separation. This is a really small piece of code that does not really require maintenance - kind of a \"util\" class (and a nice one to have at that - since we already use traps in several places and traps - unfortunately - in shell scripts are simply replacing previous traps rather than add to them.",
        "createdAt" : "2020-08-31T09:50:37Z",
        "updatedAt" : "2020-08-31T10:42:08Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "24c81aa9168fecff71f2ac8bc1abd575bdcc76fd",
    "line" : 24,
    "diffHunk" : "@@ -1,1 +37,41 @@    done\n}\n\nfunction assert_in_container() {\n    export VERBOSE=${VERBOSE:=\"false\"}"
  },
  {
    "id" : "c12c374b-b841-406a-ae2a-8ef75ed8decb",
    "prId" : 12082,
    "prUrl" : "https://github.com/apache/airflow/pull/12082#pullrequestreview-525126647",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5b9bed3b-f6ff-4230-bd48-b9e57692c4ed",
        "parentId" : null,
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "@ashb Removed werkzeug. It was needed before we got constraints and I checked that everything installs just fine down to 1.10.2 version.",
        "createdAt" : "2020-11-06T12:58:33Z",
        "updatedAt" : "2020-11-09T10:55:03Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "40a587d871f61f999029e16c652762ae8d536438",
    "line" : 10,
    "diffHunk" : "@@ -1,1 +264,268 @@    else\n        INSTALLS=(\"apache-airflow==${1}\")\n        pip install --upgrade \"${INSTALLS[@]}\"\n    fi\n}"
  },
  {
    "id" : "e01ddb08-9a8c-4751-a095-2c15f5ef8159",
    "prId" : 15723,
    "prUrl" : "https://github.com/apache/airflow/pull/15723#pullrequestreview-655000690",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "334d835a-df8c-4cde-88c6-61d9732b8747",
        "parentId" : null,
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "I thought this want needed and we could get setuptools to output the right name directly with a flag to the `egginfo` command?",
        "createdAt" : "2021-05-08T14:24:24Z",
        "updatedAt" : "2021-05-08T16:53:28Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "d34af84b-ad27-4cbb-9adf-a8b717bca926",
        "parentId" : "334d835a-df8c-4cde-88c6-61d9732b8747",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Unfortunately not :(. Setuptools/egg_info keep the name of packge and version in sync and we need the case where they are different.\r\n\r\nWe need to rename the packages to contain *rc*  when we want to do the trick where package name contains `rc` but internally it has no tag (so where we publish RCs to SVN) . In this case `--tag-build` is not helpful (we do not use it to keep the \"target\" version\" in the package metadata). \r\n\r\nThe `--tag-build` command is only used in case of PyPI RC* packages (where the name + version have to match) as well as when we release (potentially) alpha/beta (in this case also name of package and metadata version are in sync). But the RCs we put in SVN have no `--tag-build` at all but have to be named wih rc.\r\n\r\nWe could potentially simply change our convention and keep the \"target\" package name in sync with version in rc* directories, but I think that would be confusing when you download it - so better to keep it as is IMHO.\r\n\r\nNo egg_info command is helpful here.\r\n\r\n```\r\nOptions for 'egg_info' command:\r\n  --egg-base (-e)   directory containing .egg-info directories (default: top\r\n                    of the source tree)\r\n  --tag-date (-d)   Add date stamp (e.g. 20050528) to version number\r\n  --tag-build (-b)  Specify explicit tag to add to version number\r\n  --no-date (-D)    Don't include date stamp [default]\r\n```\r\n",
        "createdAt" : "2021-05-08T15:21:49Z",
        "updatedAt" : "2021-05-08T16:53:28Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "094ef54b7aadb0ed89c9fa1446965630756f13aa",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +562,566 @@}\n\nfunction rename_packages_if_needed() {\n    cd \"${AIRFLOW_SOURCES}\" || exit 1\n    pushd dist >/dev/null 2>&1 || exit 1"
  }
]