[
  {
    "id" : "efa6c936-2c3e-46c4-af38-e503f1b91c2b",
    "prId" : 12878,
    "prUrl" : "https://github.com/apache/airflow/pull/12878#pullrequestreview-546083608",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1bf5419f-42f3-4981-b724-bfae627ea80c",
        "parentId" : null,
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "I'm not sure I agree with this -- if we aren't running airflow, we likely want to do something else, often related to debugging.\r\n\r\n\r\nHmm.",
        "createdAt" : "2020-12-07T11:56:33Z",
        "updatedAt" : "2020-12-07T11:56:34Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "aa68219f-86fc-446c-aa90-1e1360294c7b",
        "parentId" : "1bf5419f-42f3-4981-b724-bfae627ea80c",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Oh this didn't actually change behaviour/in fact it's better now. NM :) ",
        "createdAt" : "2020-12-07T11:57:18Z",
        "updatedAt" : "2020-12-07T11:57:18Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "4d3937a4-5ed2-4798-90dd-a7493c91945b",
        "parentId" : "1bf5419f-42f3-4981-b724-bfae627ea80c",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Yeah. you can always NOT pass the SQL variables.",
        "createdAt" : "2020-12-07T12:00:41Z",
        "updatedAt" : "2020-12-07T12:00:41Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      },
      {
        "id" : "3e2f4b25-ad1e-486c-bc56-7e047b0d1bd7",
        "parentId" : "1bf5419f-42f3-4981-b724-bfae627ea80c",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "And this is written now in this sequence in the docs -> I updated the \"what happens in entrypoint\" docs and made sure that the sequence of things described there corresponds to the entrypoint script",
        "createdAt" : "2020-12-07T12:02:18Z",
        "updatedAt" : "2020-12-07T12:02:30Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "d438d50ed37159fd141b4786a93a124775df4dad",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +112,116 @@fi\n\n# The Bash and python commands still should verify the basic connections so they are run after the\n# DB check but before the broker check\nif [[ ${AIRFLOW_COMMAND} == \"bash\" ]]; then"
  },
  {
    "id" : "3d6f4498-eac7-440c-b2dd-f6116289c973",
    "prId" : 13424,
    "prUrl" : "https://github.com/apache/airflow/pull/13424#pullrequestreview-560604827",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7634b2e2-57c0-4977-b921-bd660b2926d4",
        "parentId" : null,
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "```suggestion\r\n# and use the IP in NC and add '-n' switch to disable any DNS use.\r\n```",
        "createdAt" : "2021-01-01T20:45:00Z",
        "updatedAt" : "2021-01-01T23:36:06Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "4a609de44cba0e589b60d217c103ac90598c922e",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +27,31 @@# randomly with docker-compose in Github Actions.\n# Since we are not using reverse lookup elsewhere, we can perform forward lookup in python\n# And use the IP in NC and add '-n' switch to disable any DNS use.\n# Even if this message might be harmless, it might hide the real reason for the problem\n# Which is the long time needed to start some services, seeing this message might be totally misleading"
  },
  {
    "id" : "1f596249-7369-4255-9508-af292051763b",
    "prId" : 15162,
    "prUrl" : "https://github.com/apache/airflow/pull/15162#pullrequestreview-627458095",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5758399f-5535-47fd-9b6b-c48fbdf74838",
        "parentId" : null,
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "I turned it into warning only if 'airflow' user is used and GID is not 0. This should be quite nice for the users:\r\n\r\n* existing helm charts will work\r\n* it's rather OK to run airflow with any GID as long as you are never going to use the arbitrary UID for already created directories\r\n* we clearly warn the users and they will see it in their log files that GID=0 is the \"recommended\" way.",
        "createdAt" : "2021-04-03T13:31:18Z",
        "updatedAt" : "2021-04-03T23:59:48Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "b6ef788370c04a448c969785ec76fb89f6d27d20",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +249,253 @@    fi\n    if [[ $(id -u) == \"50000\" ]]; then\n        >&2 echo\n        >&2 echo \"WARNING! You should run the image with GID (Group ID) set to 0\"\n        >&2 echo \"         even if you use 'airflow' user (UID=50000)\""
  },
  {
    "id" : "f0e12d96-49e3-41fc-9b1e-141a5a812c5e",
    "prId" : 16170,
    "prUrl" : "https://github.com/apache/airflow/pull/16170#pullrequestreview-671870325",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ca6203d5-27b2-46dc-aa46-aec687095350",
        "parentId" : null,
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "I wonder if it is worth adding a warning here that this option has a drastic impact on performance and recommend migrating to the standard method. It will be most painful if the user is to use the `airflow.sh` script as it has been optimized for speed and this option will have a significant impact on it.",
        "createdAt" : "2021-05-30T22:34:23Z",
        "updatedAt" : "2021-05-30T22:34:23Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      },
      {
        "id" : "2637c0b1-44a1-412b-967a-d2e76496e6eb",
        "parentId" : "ca6203d5-27b2-46dc-aa46-aec687095350",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Added",
        "createdAt" : "2021-05-30T22:35:59Z",
        "updatedAt" : "2021-05-30T22:35:59Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      },
      {
        "id" : "350471c2-04a1-48c8-b7ca-64fa77cb6e9b",
        "parentId" : "ca6203d5-27b2-46dc-aa46-aec687095350",
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "```\r\n        >&2 echo \"The container installs new packages at startup. For a better performance/less network overhead, consider bake dependencies to image.\"\r\n```",
        "createdAt" : "2021-05-30T22:36:50Z",
        "updatedAt" : "2021-05-30T22:37:00Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      }
    ],
    "commit" : "150a48d46b2a7c5b8111f51ecaaac266d6734c83",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +325,329 @@    >&2 echo \"         of adding dependencies.\"\n    >&2 echo\n    pip install --no-cache-dir --user \"${_PIP_ADDITIONAL_REQUIREMENTS=}\"\nfi\n"
  },
  {
    "id" : "4c0456a5-3336-4311-b566-300630822aac",
    "prId" : 16170,
    "prUrl" : "https://github.com/apache/airflow/pull/16170#pullrequestreview-671870628",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2f4ea79f-b8c0-44b9-9563-c9430612e89c",
        "parentId" : null,
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "```suggestion\r\n    >&2 echo \"The container installs new packages at startup. For a better performance/less network overhead, consider bake dependencies to image.\"\r\n    pip install --no-cache-dir --user \"${_PIP_ADDITIONAL_REQUIREMENTS=}\"\r\n```",
        "createdAt" : "2021-05-30T22:39:15Z",
        "updatedAt" : "2021-05-30T22:39:15Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      },
      {
        "id" : "92e2023a-0f44-42f1-94b7-2d624d9738d7",
        "parentId" : "2f4ea79f-b8c0-44b9-9563-c9430612e89c",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Already added in the meantime",
        "createdAt" : "2021-05-30T22:41:35Z",
        "updatedAt" : "2021-05-30T22:41:35Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "150a48d46b2a7c5b8111f51ecaaac266d6734c83",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +325,329 @@    >&2 echo \"         of adding dependencies.\"\n    >&2 echo\n    pip install --no-cache-dir --user \"${_PIP_ADDITIONAL_REQUIREMENTS=}\"\nfi\n"
  },
  {
    "id" : "16dfb463-87ae-428d-bf0b-bbbfc8fef3fa",
    "prId" : 16170,
    "prUrl" : "https://github.com/apache/airflow/pull/16170#pullrequestreview-671870509",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "86d184c3-62e6-44c3-8e69-09bc199d1701",
        "parentId" : null,
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "```suggestion\r\n    echo \"!!! WARNING !!! installing requirements with _PIP_ADDITIONAL_REQUIREMENTS is for testing only!!!!\"\r\n    echo \r\n    echo \"Installing dependencies this way has serious performance implications\"\r\n    echo\r\n    echo \"For production usage make sure to add dependencies to your image\"\r\n    echo\r\n    pip install --no-cache-dir --user \"${_PIP_ADDITIONAL_REQUIREMENTS=}\"\r\n```",
        "createdAt" : "2021-05-30T22:39:41Z",
        "updatedAt" : "2021-05-30T22:39:42Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "150a48d46b2a7c5b8111f51ecaaac266d6734c83",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +325,329 @@    >&2 echo \"         of adding dependencies.\"\n    >&2 echo\n    pip install --no-cache-dir --user \"${_PIP_ADDITIONAL_REQUIREMENTS=}\"\nfi\n"
  },
  {
    "id" : "71b3341b-8d59-43a4-b844-f648781348cb",
    "prId" : 16170,
    "prUrl" : "https://github.com/apache/airflow/pull/16170#pullrequestreview-672466537",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "36df8217-d00f-40d5-b154-c7cbb2567adb",
        "parentId" : null,
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "What is the status of the warning? Should we add it or not?",
        "createdAt" : "2021-05-31T17:15:07Z",
        "updatedAt" : "2021-05-31T17:15:08Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      },
      {
        "id" : "c057b340-10b0-4672-be96-f256f0125c60",
        "parentId" : "36df8217-d00f-40d5-b154-c7cbb2567adb",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Ah. I forgot about it.. Sorry. Adding it now.",
        "createdAt" : "2021-05-31T17:21:00Z",
        "updatedAt" : "2021-05-31T17:21:00Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      },
      {
        "id" : "726b5bb2-7817-4487-b44e-14bc69561fe1",
        "parentId" : "36df8217-d00f-40d5-b154-c7cbb2567adb",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Added! Thanks for reminding me @mik-laj !",
        "createdAt" : "2021-05-31T17:26:22Z",
        "updatedAt" : "2021-05-31T17:26:22Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      },
      {
        "id" : "119154e0-d6f9-4cb6-ad4b-d4b2dfc953e4",
        "parentId" : "36df8217-d00f-40d5-b154-c7cbb2567adb",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "I think it was lost during rebase :(",
        "createdAt" : "2021-05-31T17:30:21Z",
        "updatedAt" : "2021-05-31T17:30:28Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "150a48d46b2a7c5b8111f51ecaaac266d6734c83",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +327,331 @@    pip install --no-cache-dir --user \"${_PIP_ADDITIONAL_REQUIREMENTS=}\"\nfi\n\n\n# The `bash` and `python` commands should also verify the basic connections"
  },
  {
    "id" : "0d7f581f-483e-400a-9e61-a0361ea6ba57",
    "prId" : 16382,
    "prUrl" : "https://github.com/apache/airflow/pull/16382#pullrequestreview-681733526",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "981a4f9f-c835-4368-8e79-65c61f014e7e",
        "parentId" : null,
        "authorId" : "a5092e56-4956-45ec-9914-ecec6b63df73",
        "body" : "Does this work for `_PIP_ADDITIONAL_REQUIREMENTS=\"foo>1\"`, or does it redirect? We probably need some documentation on this if the user needs to quote each requirements on their own.",
        "createdAt" : "2021-06-11T10:55:06Z",
        "updatedAt" : "2021-06-11T10:55:06Z",
        "lastEditedBy" : "a5092e56-4956-45ec-9914-ecec6b63df73",
        "tags" : [
        ]
      },
      {
        "id" : "36271bed-a2de-4456-92d8-8761ca0c4c99",
        "parentId" : "981a4f9f-c835-4368-8e79-65c61f014e7e",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "It will work. We are using bash as interpreter and redirect only works when it is not passed via variable:\r\n\r\n```\r\nexport _PIP_ADDITIONAL_REQUIREMENTS=\"pip<20.2.2 setuptools\"\r\nθ60° [jarek:~] 32s $ pip install --no-cache-dir --user ${_PIP_ADDITIONAL_REQUIREMENTS}\r\nCollecting pip<20.2.2\r\n  Downloading pip-20.2.1-py2.py3-none-any.whl (1.5 MB)\r\n     |████████████████████████████████| 1.5 MB 1.2 MB/s \r\nRequirement already satisfied: setuptools in ./.pyenv/versions/3.7.9/lib/python3.7/site-packages (47.1.0)\r\nInstalling collected packages: pip\r\n  WARNING: Value for scheme.headers does not match. Please report this to <https://github.com/pypa/pip/issues/9617>\r\n  distutils: /home/jarek/.local/include/python3.7m/pip\r\n  sysconfig: /home/jarek/.local/include/python3.7/pip\r\n  WARNING: Additional context:\r\n  user = True\r\n  home = None\r\n  root = None\r\n  prefix = None\r\nWARNING: Value for scheme.headers does not match. Please report this to <https://github.com/pypa/pip/issues/9617>\r\ndistutils: /home/jarek/.local/include/python3.7m/UNKNOWN\r\nsysconfig: /home/jarek/.local/include/python3.7\r\nWARNING: Additional context:\r\nuser = True\r\nhome = None\r\nroot = None\r\nprefix = None\r\nSuccessfully installed pip-20.2.1\r\nWARNING: You are using pip version 21.1; however, version 21.1.2 is available.\r\nYou should consider upgrading via the '/home/jarek/.pyenv/versions/3.7.9/bin/python3.7 -m pip install --upgrade pip' command.\r\nθ61° [jarek:~] 41s $ pip install --no-cache-dir --user ${_PIP_ADDITIONAL_REQUIREMENTS}\r\n\r\n```",
        "createdAt" : "2021-06-11T11:34:46Z",
        "updatedAt" : "2021-06-11T11:34:46Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "4fd59cc81961b94aeda8139127e26c6ee772d6df",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +325,329 @@    >&2 echo \"         of adding dependencies.\"\n    >&2 echo\n    pip install --no-cache-dir --user ${_PIP_ADDITIONAL_REQUIREMENTS}\nfi\n"
  }
]