[
  {
    "id" : "e5008ec5-92f6-4e74-b3aa-7b913e97a129",
    "prId" : 704,
    "prUrl" : "https://github.com/zio/zio/pull/704#pullrequestreview-219822717",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bcf77da0-41b4-48c4-98d3-75e3b0b77635",
        "parentId" : null,
        "authorId" : "05793de5-8cbe-49ba-90b1-8ef51f2dd854",
        "body" : "if (t != null) IO.succeed(v) else if ... else ...\r\n\r\nwill generate less bytecode\r\n\r\n",
        "createdAt" : "2019-03-28T02:14:00Z",
        "updatedAt" : "2019-03-28T02:14:20Z",
        "lastEditedBy" : "05793de5-8cbe-49ba-90b1-8ef51f2dd854",
        "tags" : [
        ]
      },
      {
        "id" : "7a2ce57b-120d-4e2b-9166-0b6063f8e690",
        "parentId" : "bcf77da0-41b4-48c4-98d3-75e3b0b77635",
        "authorId" : "4faba7a9-1e8a-45c1-ac7e-85943a971e3a",
        "body" : "I have other result:\r\n```\r\nt match {\r\n  case null =>\r\n    IO.succeed(v)\r\n  case e: CompletionException =>\r\n    IO.fail(e.getCause)\r\n  case t: Throwable =>\r\n    IO.fail(t)\r\n}\r\n\r\npublic static final void $anonfun$unsafeCompletionStageToIO$2(scala.Function1, java.lang.Object, java.lang.Throwable);\r\n  Code:\r\n     0: aload_2\r\n     1: ifnonnull     15\r\n     4: getstatic     #38                 // Field scalaz/zio/IO$.MODULE$:Lscalaz/zio/IO$;\r\n     7: aload_1\r\n     8: invokevirtual #182                // Method scalaz/zio/IO$.succeed:(Ljava/lang/Object;)Lscalaz/zio/ZIO;\r\n    11: astore_3\r\n    12: goto          67\r\n    15: aload_2\r\n    16: instanceof    #184                // class java/util/concurrent/CompletionException\r\n    19: ifeq          43\r\n    22: aload_2\r\n    23: checkcast     #184                // class java/util/concurrent/CompletionException\r\n    26: astore        4\r\n    28: getstatic     #38                 // Field scalaz/zio/IO$.MODULE$:Lscalaz/zio/IO$;\r\n    31: aload         4\r\n    33: invokevirtual #188                // Method java/util/concurrent/CompletionException.getCause:()Ljava/lang/Throwable;\r\n    36: invokevirtual #191                // Method scalaz/zio/IO$.fail:(Ljava/lang/Object;)Lscalaz/zio/ZIO;\r\n    39: astore_3\r\n    40: goto          67\r\n    43: aload_2\r\n    44: ifnull        58\r\n    47: getstatic     #38                 // Field scalaz/zio/IO$.MODULE$:Lscalaz/zio/IO$;\r\n    50: aload_2\r\n    51: invokevirtual #191                // Method scalaz/zio/IO$.fail:(Ljava/lang/Object;)Lscalaz/zio/ZIO;\r\n    54: astore_3\r\n    55: goto          67\r\n    58: new           #193                // class scala/MatchError\r\n    61: dup\r\n    62: aload_2\r\n    63: invokespecial #196                // Method scala/MatchError.\"<init>\":(Ljava/lang/Object;)V\r\n    66: athrow\r\n    67: aload_0\r\n    68: aload_3\r\n    69: invokeinterface #200,  2          // InterfaceMethod scala/Function1.apply:(Ljava/lang/Object;)Ljava/lang/Object;\r\n    74: pop\r\n    75: return\r\n```\r\n\r\n```\r\nif (t == null) IO.succeed(v)\r\nelse t match {\r\n  case e: CompletionException =>\r\n    IO.fail(e.getCause)\r\n  case t: Throwable =>\r\n    IO.fail(t)\r\n}\r\n\r\npublic static final void $anonfun$unsafeCompletionStageToIO$2(scala.Function1, java.lang.Object, java.lang.Throwable);\r\n  Code:\r\n     0: aload_2\r\n     1: ifnonnull     14\r\n     4: getstatic     #38                 // Field scalaz/zio/IO$.MODULE$:Lscalaz/zio/IO$;\r\n     7: aload_1\r\n     8: invokevirtual #182                // Method scalaz/zio/IO$.succeed:(Ljava/lang/Object;)Lscalaz/zio/ZIO;\r\n    11: goto          67\r\n    14: aload_2\r\n    15: instanceof    #184                // class java/util/concurrent/CompletionException\r\n    18: ifeq          42\r\n    21: aload_2\r\n    22: checkcast     #184                // class java/util/concurrent/CompletionException\r\n    25: astore        5\r\n    27: getstatic     #38                 // Field scalaz/zio/IO$.MODULE$:Lscalaz/zio/IO$;\r\n    30: aload         5\r\n    32: invokevirtual #188                // Method java/util/concurrent/CompletionException.getCause:()Ljava/lang/Throwable;\r\n    35: invokevirtual #191                // Method scalaz/zio/IO$.fail:(Ljava/lang/Object;)Lscalaz/zio/ZIO;\r\n    38: astore_3\r\n    39: goto          66\r\n    42: aload_2\r\n    43: ifnull        57\r\n    46: getstatic     #38                 // Field scalaz/zio/IO$.MODULE$:Lscalaz/zio/IO$;\r\n    49: aload_2\r\n    50: invokevirtual #191                // Method scalaz/zio/IO$.fail:(Ljava/lang/Object;)Lscalaz/zio/ZIO;\r\n    53: astore_3\r\n    54: goto          66\r\n    57: new           #193                // class scala/MatchError\r\n    60: dup\r\n    61: aload_2\r\n    62: invokespecial #196                // Method scala/MatchError.\"<init>\":(Ljava/lang/Object;)V\r\n    65: athrow\r\n    66: aload_3\r\n    67: astore        4\r\n    69: aload_0\r\n    70: aload         4\r\n    72: invokeinterface #200,  2          // InterfaceMethod scala/Function1.apply:(Ljava/lang/Object;)Ljava/lang/Object;\r\n    77: pop\r\n    78: return\r\n```",
        "createdAt" : "2019-03-28T03:51:02Z",
        "updatedAt" : "2019-03-28T03:51:02Z",
        "lastEditedBy" : "4faba7a9-1e8a-45c1-ac7e-85943a971e3a",
        "tags" : [
        ]
      }
    ],
    "commit" : "6600de953396f58195ad01b24fcddd3ab1a4d729",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +32,36 @@        val _ = cs.handle[Unit] { (v: A, t: Throwable) =>\n          val io = t match {\n            case null =>\n              IO.succeed(v)\n            case e: CompletionException =>"
  }
]