[
  {
    "id" : "21e46faa-5281-4aaa-a036-6fc04646a525",
    "prId" : 18528,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/18528#pullrequestreview-466337567",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "eba5e42e-f3b4-44d6-89de-0b103627e1cd",
        "parentId" : null,
        "authorId" : "e286e399-a847-4b77-8052-d1ba61e04074",
        "body" : "Please, check also the following method:\r\n```suggestion\r\n\t\tconst user = Users.findOneById(this.userId);\r\n\t\tif (!user) {\r\n\t\t\tthrow new Error('error-user-not-found');\r\n\t\t}\r\n\r\n\t\tif (!canAccessRoom(room, user)) {\r\n\t\t\tthrow new Error('error-not-allowed');\r\n\t\t}\r\n```",
        "createdAt" : "2020-08-12T23:17:45Z",
        "updatedAt" : "2020-08-20T20:52:16Z",
        "lastEditedBy" : "e286e399-a847-4b77-8052-d1ba61e04074",
        "tags" : [
        ]
      }
    ],
    "commit" : "ece6b314f0ba7ee88e8e779833a298bbfbb148dc",
    "line" : 21,
    "diffHunk" : "@@ -1,1 +190,194 @@\t\t\t\tnewVisitorId: String,\n\t\t\t});\n\n\t\t\tconst { rid, newVisitorId, oldVisitorId } = this.bodyParams;\n"
  },
  {
    "id" : "2d2376ca-b03c-440d-9bd3-978985e1d6b4",
    "prId" : 18528,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/18528#pullrequestreview-467798218",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5025591a-e99d-4fc8-a180-ee856007cfa0",
        "parentId" : null,
        "authorId" : "e286e399-a847-4b77-8052-d1ba61e04074",
        "body" : "Since you're requesting the `oldVisitorId` here, you need to check if it matches with the current room visitor before replacing the current room visitor.",
        "createdAt" : "2020-08-14T13:37:25Z",
        "updatedAt" : "2020-08-20T20:52:16Z",
        "lastEditedBy" : "e286e399-a847-4b77-8052-d1ba61e04074",
        "tags" : [
        ]
      },
      {
        "id" : "9f6fe77c-b2c9-471e-8317-63d427b29554",
        "parentId" : "5025591a-e99d-4fc8-a180-ee856007cfa0",
        "authorId" : "2491d7cd-a9b5-4520-8c24-7c13b370f008",
        "body" : "Added this change in the latest commit",
        "createdAt" : "2020-08-14T18:37:37Z",
        "updatedAt" : "2020-08-20T20:52:16Z",
        "lastEditedBy" : "2491d7cd-a9b5-4520-8c24-7c13b370f008",
        "tags" : [
        ]
      }
    ],
    "commit" : "ece6b314f0ba7ee88e8e779833a298bbfbb148dc",
    "line" : 18,
    "diffHunk" : "@@ -1,1 +187,191 @@\t\t\tcheck(this.bodyParams, {\n\t\t\t\trid: String,\n\t\t\t\toldVisitorId: String,\n\t\t\t\tnewVisitorId: String,\n\t\t\t});"
  }
]