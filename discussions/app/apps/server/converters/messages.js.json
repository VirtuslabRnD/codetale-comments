[
  {
    "id" : "87c2a4a1-c7d1-4e64-ba6e-a703aafea9e2",
    "prId" : 17050,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/17050#pullrequestreview-391184017",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8c2da832-3244-40d4-8714-992d18c12534",
        "parentId" : null,
        "authorId" : "abb054e6-b771-4069-83f6-eac631c0a29d",
        "body" : "Can you please describe the motivation for this change? It may be better to validate this somewhere else ðŸ¤” ",
        "createdAt" : "2020-04-08T20:09:26Z",
        "updatedAt" : "2020-04-29T00:22:53Z",
        "lastEditedBy" : "abb054e6-b771-4069-83f6-eac631c0a29d",
        "tags" : [
        ]
      },
      {
        "id" : "c0e93347-ba18-48e9-a4cf-5f5f7bd58e37",
        "parentId" : "8c2da832-3244-40d4-8714-992d18c12534",
        "authorId" : "d662aabf-06e8-46f9-a6fb-6ccb7bf9606b",
        "body" : "yes, I wrote an app to test it before. I found that if the message doesn't contain the room property will cause the server to crash.",
        "createdAt" : "2020-04-09T05:08:15Z",
        "updatedAt" : "2020-04-29T00:22:53Z",
        "lastEditedBy" : "d662aabf-06e8-46f9-a6fb-6ccb7bf9606b",
        "tags" : [
        ]
      },
      {
        "id" : "7a8d0645-251f-4e08-af46-663e972e824f",
        "parentId" : "8c2da832-3244-40d4-8714-992d18c12534",
        "authorId" : "d662aabf-06e8-46f9-a6fb-6ccb7bf9606b",
        "body" : "https://github.com/RocketChat/Rocket.Chat/blob/6a101befc94b2310d797db8df343ee78160f7e4f/app/apps/server/converters/messages.js#L85 Here we use the `room.id` directly. If the room is `undefined`, an undefined error will be thrown.",
        "createdAt" : "2020-04-09T05:10:49Z",
        "updatedAt" : "2020-04-29T00:22:53Z",
        "lastEditedBy" : "d662aabf-06e8-46f9-a6fb-6ccb7bf9606b",
        "tags" : [
        ]
      },
      {
        "id" : "2d728476-b020-4fc2-b534-3b78bbb72e47",
        "parentId" : "8c2da832-3244-40d4-8714-992d18c12534",
        "authorId" : "abb054e6-b771-4069-83f6-eac631c0a29d",
        "body" : "Right, I was confused that his might be a business validation that is out of the responsibility of the converter, but since it impacts directly the function, then it's in the right place :)",
        "createdAt" : "2020-04-09T22:59:14Z",
        "updatedAt" : "2020-04-29T00:22:53Z",
        "lastEditedBy" : "abb054e6-b771-4069-83f6-eac631c0a29d",
        "tags" : [
        ]
      }
    ],
    "commit" : "afab3859e12d3e7c57e0fb9a9e0e6e4ae3a4ef9f",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +79,83 @@\n\tconvertAppMessage(message) {\n\t\tif (!message || !message.room) {\n\t\t\treturn undefined;\n\t\t}"
  }
]