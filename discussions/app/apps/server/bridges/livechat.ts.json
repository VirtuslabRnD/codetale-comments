[
  {
    "id" : "d9aa6c61-2cb4-4301-9149-9de8f531daed",
    "prId" : 22772,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/22772#pullrequestreview-716210080",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b8f87744-fedd-46c8-a9fb-869d70989431",
        "parentId" : null,
        "authorId" : "e286e399-a847-4b77-8052-d1ba61e04074",
        "body" : "The **username** needs to be optional too. When it comes to Omnichannel, it doesn't make much sense to request this information, the serverside handles this following the format `@guest-XXX` .\r\n\r\nCurrently, every App is using a different approach to create usernames and this is not a good UX.",
        "createdAt" : "2021-07-27T16:21:03Z",
        "updatedAt" : "2021-07-27T16:21:03Z",
        "lastEditedBy" : "e286e399-a847-4b77-8052-d1ba61e04074",
        "tags" : [
        ]
      },
      {
        "id" : "41249303-6dcc-415c-981b-7b53db9b41b1",
        "parentId" : "b8f87744-fedd-46c8-a9fb-869d70989431",
        "authorId" : "2491d7cd-a9b5-4520-8c24-7c13b370f008",
        "body" : "This would require a new release on the apps-engine side to make the username property in `IVisitor` object optional, so we can take this up as a separate task in the next release",
        "createdAt" : "2021-07-27T17:37:54Z",
        "updatedAt" : "2021-07-27T17:37:54Z",
        "lastEditedBy" : "2491d7cd-a9b5-4520-8c24-7c13b370f008",
        "tags" : [
        ]
      },
      {
        "id" : "f89b92f1-f5ac-41a4-bf26-5c780684a045",
        "parentId" : "b8f87744-fedd-46c8-a9fb-869d70989431",
        "authorId" : "abb054e6-b771-4069-83f6-eac631c0a29d",
        "body" : "Changing this would break the compatibility of the API, so we'll most definitely want to avoid that kind of change ☹️  But by checking [the source code of the function](https://github.com/RocketChat/Rocket.Chat/blob/apps/change-storage-strategy/app/livechat/server/lib/Livechat.js#L260) it looks like just setting `visitor.username = ''` would be enough to trigger the behavior",
        "createdAt" : "2021-07-27T17:49:51Z",
        "updatedAt" : "2021-07-27T17:50:16Z",
        "lastEditedBy" : "abb054e6-b771-4069-83f6-eac631c0a29d",
        "tags" : [
        ]
      }
    ],
    "commit" : "9e15293f8e4beed94731872addee9b5bea312004",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +128,132 @@\t\t\tconnectionData: undefined,\n\t\t\tphone: {},\n\t\t\tid: visitor.id,\n\t\t};\n"
  },
  {
    "id" : "d13f4c62-14a9-43cb-9303-01857bf603b0",
    "prId" : 22772,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/22772#pullrequestreview-716210080",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "846360da-d367-462d-8be1-c5893495106f",
        "parentId" : null,
        "authorId" : "e286e399-a847-4b77-8052-d1ba61e04074",
        "body" : "The **username** needs to be optional too. When it comes to Omnichannel, it doesn't make much sense to request this information, the serverside handles this following the format `@guest-XXX` .\r\n\r\nCurrently, every App is using a different approach to create usernames and this is not a good UX.",
        "createdAt" : "2021-07-27T16:21:03Z",
        "updatedAt" : "2021-07-27T16:21:03Z",
        "lastEditedBy" : "e286e399-a847-4b77-8052-d1ba61e04074",
        "tags" : [
        ]
      },
      {
        "id" : "d4a6ab0e-78fb-4977-b3db-8139be4d9f01",
        "parentId" : "846360da-d367-462d-8be1-c5893495106f",
        "authorId" : "2491d7cd-a9b5-4520-8c24-7c13b370f008",
        "body" : "This would require a new release on the apps-engine side to make the username property in `IVisitor` object optional, so we can take this up as a separate task in the next release",
        "createdAt" : "2021-07-27T17:37:54Z",
        "updatedAt" : "2021-07-27T17:37:54Z",
        "lastEditedBy" : "2491d7cd-a9b5-4520-8c24-7c13b370f008",
        "tags" : [
        ]
      },
      {
        "id" : "860053aa-4ae4-4039-9607-bab428bb37fa",
        "parentId" : "846360da-d367-462d-8be1-c5893495106f",
        "authorId" : "abb054e6-b771-4069-83f6-eac631c0a29d",
        "body" : "Changing this would break the compatibility of the API, so we'll most definitely want to avoid that kind of change ☹️  But by checking [the source code of the function](https://github.com/RocketChat/Rocket.Chat/blob/apps/change-storage-strategy/app/livechat/server/lib/Livechat.js#L260) it looks like just setting `visitor.username = ''` would be enough to trigger the behavior",
        "createdAt" : "2021-07-27T17:49:51Z",
        "updatedAt" : "2021-07-27T17:50:16Z",
        "lastEditedBy" : "abb054e6-b771-4069-83f6-eac631c0a29d",
        "tags" : [
        ]
      }
    ],
    "commit" : "9e15293f8e4beed94731872addee9b5bea312004",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +128,132 @@\t\t\tconnectionData: undefined,\n\t\t\tphone: {},\n\t\t\tid: visitor.id,\n\t\t};\n"
  },
  {
    "id" : "82289c26-f28c-47db-882b-707ddd97194d",
    "prId" : 22772,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/22772#pullrequestreview-716210080",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "81b4ee78-35ed-4554-b4a5-ec8ffe45e0c6",
        "parentId" : null,
        "authorId" : "e286e399-a847-4b77-8052-d1ba61e04074",
        "body" : "The **username** needs to be optional too. When it comes to Omnichannel, it doesn't make much sense to request this information, the serverside handles this following the format `@guest-XXX` .\r\n\r\nCurrently, every App is using a different approach to create usernames and this is not a good UX.",
        "createdAt" : "2021-07-27T16:21:03Z",
        "updatedAt" : "2021-07-27T16:21:03Z",
        "lastEditedBy" : "e286e399-a847-4b77-8052-d1ba61e04074",
        "tags" : [
        ]
      },
      {
        "id" : "ba672f81-8cd5-4d10-905e-6b94e26052e6",
        "parentId" : "81b4ee78-35ed-4554-b4a5-ec8ffe45e0c6",
        "authorId" : "2491d7cd-a9b5-4520-8c24-7c13b370f008",
        "body" : "This would require a new release on the apps-engine side to make the username property in `IVisitor` object optional, so we can take this up as a separate task in the next release",
        "createdAt" : "2021-07-27T17:37:54Z",
        "updatedAt" : "2021-07-27T17:37:54Z",
        "lastEditedBy" : "2491d7cd-a9b5-4520-8c24-7c13b370f008",
        "tags" : [
        ]
      },
      {
        "id" : "805d5189-e13b-4069-8a10-eabeabe3457b",
        "parentId" : "81b4ee78-35ed-4554-b4a5-ec8ffe45e0c6",
        "authorId" : "abb054e6-b771-4069-83f6-eac631c0a29d",
        "body" : "Changing this would break the compatibility of the API, so we'll most definitely want to avoid that kind of change ☹️  But by checking [the source code of the function](https://github.com/RocketChat/Rocket.Chat/blob/apps/change-storage-strategy/app/livechat/server/lib/Livechat.js#L260) it looks like just setting `visitor.username = ''` would be enough to trigger the behavior",
        "createdAt" : "2021-07-27T17:49:51Z",
        "updatedAt" : "2021-07-27T17:50:16Z",
        "lastEditedBy" : "abb054e6-b771-4069-83f6-eac631c0a29d",
        "tags" : [
        ]
      }
    ],
    "commit" : "9e15293f8e4beed94731872addee9b5bea312004",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +128,132 @@\t\t\tconnectionData: undefined,\n\t\t\tphone: {},\n\t\t\tid: visitor.id,\n\t\t};\n"
  }
]