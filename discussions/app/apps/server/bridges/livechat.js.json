[
  {
    "id" : "e400be70-c4cd-46a9-89a7-04b8d15daa85",
    "prId" : 17918,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/17918#pullrequestreview-434213222",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "59d491c0-cf22-4fcb-8b1c-fbb0edeaac28",
        "parentId" : null,
        "authorId" : "e286e399-a847-4b77-8052-d1ba61e04074",
        "body" : "```suggestion\r\n\t\tif (!appUser) {\r\n\t\t\tthrow new Error('Invalid user, cannot transfer');\r\n\t\t}\r\n\t\tconst { _id, username, name, type } = appUser;\r\n\t\tconst transferredBy = {\r\n\t\t\t_id,\r\n\t\t\tusername,\r\n\t\t\tname,\r\n\t\t\ttype,\r\n\t\t}\t\t\r\n```",
        "createdAt" : "2020-06-19T11:15:39Z",
        "updatedAt" : "2020-06-19T17:11:33Z",
        "lastEditedBy" : "e286e399-a847-4b77-8052-d1ba61e04074",
        "tags" : [
        ]
      },
      {
        "id" : "e1c97b12-5d75-4478-a999-b4cf54e446cc",
        "parentId" : "59d491c0-cf22-4fcb-8b1c-fbb0edeaac28",
        "authorId" : "2491d7cd-a9b5-4520-8c24-7c13b370f008",
        "body" : "Incorporated this change in the latest commit. REF https://github.com/RocketChat/Rocket.Chat/pull/17918/commits/997469ff029f7d9a9f3de1c5e4195219723233ad\r\nThanks for the review :smile: ",
        "createdAt" : "2020-06-19T16:42:33Z",
        "updatedAt" : "2020-06-19T17:11:33Z",
        "lastEditedBy" : "2491d7cd-a9b5-4520-8c24-7c13b370f008",
        "tags" : [
        ]
      }
    ],
    "commit" : "4ca6ce66efdf2b05d2018517489acb8017b8be0e",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +140,144 @@\t\t}\n\t\tconst { _id, username, name, type } = appUser;\n\t\tconst transferredBy = {\n\t\t\t_id,\n\t\t\tusername,"
  },
  {
    "id" : "8b9059de-ca0f-427f-a32a-623cee2ab8cb",
    "prId" : 15837,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/15837#pullrequestreview-321896489",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b8bbc847-4c0a-49f9-a059-be519480637a",
        "parentId" : null,
        "authorId" : "d662aabf-06e8-46f9-a6fb-6ccb7bf9606b",
        "body" : "üëç",
        "createdAt" : "2019-11-23T06:08:31Z",
        "updatedAt" : "2019-12-02T17:05:54Z",
        "lastEditedBy" : "d662aabf-06e8-46f9-a6fb-6ccb7bf9606b",
        "tags" : [
        ]
      }
    ],
    "commit" : "3e4d9c170f6ea54c274544866f205827f15aec1c",
    "line" : 32,
    "diffHunk" : "@@ -1,1 +58,62 @@\t\t\tconst user = Users.getAgentInfo(agent.id);\n\t\t\tagentRoom = Object.assign({}, { agentId: user._id });\n\t\t}\n\n\t\tconst result = await getRoom({"
  },
  {
    "id" : "75bb04a8-b119-4748-8d01-f1f12a780828",
    "prId" : 14626,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/14626#pullrequestreview-242779373",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3a2caf7d-0a0c-43d8-9ff6-9eeb71218f19",
        "parentId" : null,
        "authorId" : "409df6ab-3b03-4605-a9f9-90ba7bb0018e",
        "body" : "The `token` field identifies that the message has been sent by the visitor, but we'll need to send messages when the sender is the `agent`, so I think we can't apply this verification here.",
        "createdAt" : "2019-05-28T01:55:30Z",
        "updatedAt" : "2019-09-21T01:17:55Z",
        "lastEditedBy" : "409df6ab-3b03-4605-a9f9-90ba7bb0018e",
        "tags" : [
        ]
      },
      {
        "id" : "fc3cb376-ea8b-4b62-a7d0-bb158e7003fc",
        "parentId" : "3a2caf7d-0a0c-43d8-9ff6-9eeb71218f19",
        "authorId" : "abb054e6-b771-4069-83f6-eac631c0a29d",
        "body" : "Yes, but in the Apps-Engine side of things, if you build a `ILivechatMessage` without a properly setup visitor, it uses the message bridge instead.\r\n\r\nhttps://github.com/RocketChat/Rocket.Chat.Apps-engine/pull/124/files#diff-711aff22ec7b2768c210714fac791d47R74\r\n\r\nWould you say that's a good pattern?",
        "createdAt" : "2019-05-28T15:45:58Z",
        "updatedAt" : "2019-09-21T01:17:55Z",
        "lastEditedBy" : "abb054e6-b771-4069-83f6-eac631c0a29d",
        "tags" : [
        ]
      },
      {
        "id" : "f01f8c56-4a9f-4acd-9709-427d23122662",
        "parentId" : "3a2caf7d-0a0c-43d8-9ff6-9eeb71218f19",
        "authorId" : "409df6ab-3b03-4605-a9f9-90ba7bb0018e",
        "body" : "Ohh nevermind.. I didn't know about that approach.\r\nCool!",
        "createdAt" : "2019-05-28T16:18:57Z",
        "updatedAt" : "2019-09-21T01:17:55Z",
        "lastEditedBy" : "409df6ab-3b03-4605-a9f9-90ba7bb0018e",
        "tags" : [
        ]
      }
    ],
    "commit" : "a9b24a008fbaa9ece0479c7e6b73ba3e28b1be68",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +15,19 @@\t\tthis.orch.debugLog(`The App ${ appId } is creating a new message.`);\n\n\t\tif (!message.token) {\n\t\t\tthrow new Error('Invalid token for livechat message');\n\t\t}"
  }
]