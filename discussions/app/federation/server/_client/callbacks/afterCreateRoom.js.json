[
  {
    "id" : "0a9e107b-0b0e-4ae4-bafb-4e4c302756ef",
    "prId" : 15206,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/15206#pullrequestreview-277517738",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bfc82dff-e82f-4c44-9c06-ac12718589c0",
        "parentId" : null,
        "authorId" : "61ddb048-36d3-4039-ab51-6db005c8c855",
        "body" : "No need to `Promise.await` as `deleteRoom` runs in a Fiber\r\n\r\n```suggestion\r\n\t\tdeleteRoom(room._id);\r\n```",
        "createdAt" : "2019-08-21T01:24:55Z",
        "updatedAt" : "2019-08-21T01:24:55Z",
        "lastEditedBy" : "61ddb048-36d3-4039-ab51-6db005c8c855",
        "tags" : [
        ]
      }
    ],
    "commit" : "70a0d664c21298f7a25642dac4102ffe04341ecf",
    "line" : 72,
    "diffHunk" : "@@ -1,1 +70,74 @@\t\tawait run(room, users, subscriptions);\n\t} catch (err) {\n\t\tPromise.await(deleteRoom(room._id));\n\n\t\tlogger.client.error(`afterCreateRoom => room=${ JSON.stringify(room, null, 2) } => Could not create federated room: ${ err }`);"
  },
  {
    "id" : "37f5c08a-a67d-47dc-a545-99b30e1c93e1",
    "prId" : 15206,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/15206#pullrequestreview-277518175",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3114603f-a0b8-42e2-96aa-b9a5eac6b3c7",
        "parentId" : null,
        "authorId" : "61ddb048-36d3-4039-ab51-6db005c8c855",
        "body" : "this function can be renamed to `doAfterCreateRoom` and exported directly from here:\r\n```suggestion\r\nexport async function doAfterCreateRoom(room, users, subscriptions) {\r\n```",
        "createdAt" : "2019-08-21T01:27:14Z",
        "updatedAt" : "2019-08-21T01:27:14Z",
        "lastEditedBy" : "61ddb048-36d3-4039-ab51-6db005c8c855",
        "tags" : [
        ]
      }
    ],
    "commit" : "70a0d664c21298f7a25642dac4102ffe04341ecf",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +6,10 @@import { deleteRoom } from '../../../../lib/server/functions';\n\nasync function run(room, users, subscriptions) {\n\t//\n\t// Genesis"
  },
  {
    "id" : "ec3db1c9-58b9-432c-b139-a3bced6357f7",
    "prId" : 15206,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/15206#pullrequestreview-277518251",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2ae2191b-6c70-4d17-a111-940cf47a2fc2",
        "parentId" : null,
        "authorId" : "61ddb048-36d3-4039-ab51-6db005c8c855",
        "body" : "this can be removed after renaming function `run`",
        "createdAt" : "2019-08-21T01:27:37Z",
        "updatedAt" : "2019-08-21T01:27:37Z",
        "lastEditedBy" : "61ddb048-36d3-4039-ab51-6db005c8c855",
        "tags" : [
        ]
      }
    ],
    "commit" : "70a0d664c21298f7a25642dac4102ffe04341ecf",
    "line" : 80,
    "diffHunk" : "@@ -1,1 +78,82 @@}\n\nexport const doAfterCreateRoom = run;\n\ncallbacks.add('afterCreateRoom', (roomOwner, room) => Promise.await(afterCreateRoom(roomOwner, room)), callbacks.priority.LOW, 'federation-after-create-room');"
  }
]