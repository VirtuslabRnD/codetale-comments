[
  {
    "id" : "1637cca3-13c1-4d2d-987e-2eeaf6cfa43e",
    "prId" : 17666,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/17666#pullrequestreview-415769180",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0ffd827e-d0b8-4c54-afff-f9c30b9e3186",
        "parentId" : null,
        "authorId" : "61ddb048-36d3-4039-ab51-6db005c8c855",
        "body" : "we're missing an index at least for `closedAt` field.\r\n\r\nmaybe it's important to have one for `servedBy` as well.",
        "createdAt" : "2020-05-20T21:54:45Z",
        "updatedAt" : "2020-05-21T02:40:18Z",
        "lastEditedBy" : "61ddb048-36d3-4039-ab51-6db005c8c855",
        "tags" : [
        ]
      },
      {
        "id" : "14ee0e3b-8c06-4d49-a32f-43e61bbffbb2",
        "parentId" : "0ffd827e-d0b8-4c54-afff-f9c30b9e3186",
        "authorId" : "e286e399-a847-4b77-8052-d1ba61e04074",
        "body" : "Actually [the index already exists](https://github.com/RocketChat/Rocket.Chat/blob/develop/app/models/server/models/Rooms.js#L24) but its creation wasn't implemented on the `LivechatRoom` model.\r\nNow I moved the index creation call to the `LivechatRoom` model and I added a new index for the `servedBy` field as well.",
        "createdAt" : "2020-05-20T22:53:59Z",
        "updatedAt" : "2020-05-21T02:40:18Z",
        "lastEditedBy" : "e286e399-a847-4b77-8052-d1ba61e04074",
        "tags" : [
        ]
      }
    ],
    "commit" : "50f5821efa6dc5f793e6172f05b4d1670e802fd9",
    "line" : 21,
    "diffHunk" : "@@ -1,1 +175,179 @@\t\t};\n\n\t\toptions.sort = { closedAt: -1 };\n\t\treturn this.findOne(query, options);\n\t}"
  },
  {
    "id" : "f7b30711-38ee-4ea3-997f-7c445e26c310",
    "prId" : 15840,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/15840#pullrequestreview-334139315",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d7aaaa26-5a8c-4817-8cb8-847df86ba2b9",
        "parentId" : null,
        "authorId" : "409df6ab-3b03-4605-a9f9-90ba7bb0018e",
        "body" : "I think you should do this on `Livechat.saveRoomInfo`, as well as you do on `Livechat.saveGuest` method.",
        "createdAt" : "2019-12-18T18:28:48Z",
        "updatedAt" : "2020-01-10T16:03:59Z",
        "lastEditedBy" : "409df6ab-3b03-4605-a9f9-90ba7bb0018e",
        "tags" : [
        ]
      }
    ],
    "commit" : "9e7705a1cdf4b325b3855468a79ea91e5a455ebb",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +87,91 @@\t\t}\n\n\t\tif (livechatData) {\n\t\t\tObject.keys(livechatData).forEach((key) => {\n\t\t\t\tconst value = s.trim(livechatData[key]);"
  }
]