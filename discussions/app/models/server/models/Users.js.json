[
  {
    "id" : "7ea736ff-a48f-401d-ac0f-939c400339d3",
    "prId" : 22611,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/22611#pullrequestreview-705438005",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c025a436-16f2-495f-8b6c-72e7033e46ae",
        "parentId" : null,
        "authorId" : "e286e399-a847-4b77-8052-d1ba61e04074",
        "body" : "Why not just return a list of usernames?\r\nYou are processing the list of users returned here anyway, which introduces another step in the stack.",
        "createdAt" : "2021-07-13T16:33:01Z",
        "updatedAt" : "2021-07-13T16:34:24Z",
        "lastEditedBy" : "e286e399-a847-4b77-8052-d1ba61e04074",
        "tags" : [
        ]
      },
      {
        "id" : "e7e65470-cff9-4819-b3e9-5a9d13ad239c",
        "parentId" : "c025a436-16f2-495f-8b6c-72e7033e46ae",
        "authorId" : "34fde88b-e8d3-4125-af3a-0d4cc8bd83a8",
        "body" : "We can yes. This would imply we won't use the query for anything else in the future (apart from fetching usernames), is that's fine, i'll make the change. ",
        "createdAt" : "2021-07-13T16:59:59Z",
        "updatedAt" : "2021-07-13T17:02:02Z",
        "lastEditedBy" : "34fde88b-e8d3-4125-af3a-0d4cc8bd83a8",
        "tags" : [
        ]
      }
    ],
    "commit" : "4e03fa20572d859b2db092d71ad9f8a282bda591",
    "line" : 90,
    "diffHunk" : "@@ -1,1 +283,287 @@\t\t\t\t},\n\t\t\t},\n\t\t]).toArray();\n\t}\n"
  },
  {
    "id" : "580358a1-1109-40ab-8f2d-3a1a75468981",
    "prId" : 22611,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/22611#pullrequestreview-710261386",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "afae6d39-b02b-4da1-beef-2bc6b7cd23d4",
        "parentId" : null,
        "authorId" : "2491d7cd-a9b5-4520-8c24-7c13b370f008",
        "body" : "```suggestion\r\n\t\tconst unavailableAgents = this.getUnavailableAgents(null, extraQuery).map((u) => u.username);\r\n```\r\nThe getUnavailableAgents method isn't async so I don't think we need to resolve a promise here\r\n\r\n",
        "createdAt" : "2021-07-20T07:30:30Z",
        "updatedAt" : "2021-07-20T07:30:30Z",
        "lastEditedBy" : "2491d7cd-a9b5-4520-8c24-7c13b370f008",
        "tags" : [
        ]
      }
    ],
    "commit" : "4e03fa20572d859b2db092d71ad9f8a282bda591",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +181,185 @@\tgetNextAgent(ignoreAgentId, extraQuery) { // TODO: Create class Agent\n\t\t// fetch all unavailable agents, and exclude them from the selection\n\t\tconst unavailableAgents = Promise.await(this.getUnavailableAgents(null, extraQuery)).map((u) => u.username);\n\t\tconst extraFilters = {\n\t\t\t...ignoreAgentId && { _id: { $ne: ignoreAgentId } },"
  },
  {
    "id" : "9cf8fe3b-243e-4da5-bc1c-fe31cef5ce3e",
    "prId" : 16849,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/16849#pullrequestreview-373697278",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c6c648ae-95a7-46d7-8e51-a0034779d59f",
        "parentId" : null,
        "authorId" : "b46a28c1-01dc-4bcc-aa52-d54e9985c838",
        "body" : "`roles` is an array, is it correct?",
        "createdAt" : "2020-03-12T16:10:55Z",
        "updatedAt" : "2020-03-12T16:11:07Z",
        "lastEditedBy" : "b46a28c1-01dc-4bcc-aa52-d54e9985c838",
        "tags" : [
        ]
      }
    ],
    "commit" : "75dceeb46e5179aff2d6419a7ef7807e36619be5",
    "line" : 11,
    "diffHunk" : "@@ -1,1 +981,985 @@\t\t\t$or: [neverActive, idleTooLong],\n\t\t\tactive: true,\n\t\t\troles: role,\n\t\t};\n"
  }
]