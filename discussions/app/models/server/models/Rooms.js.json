[
  {
    "id" : "437bc500-bc99-4933-83f6-952df3f8e00b",
    "prId" : 21687,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/21687#pullrequestreview-663604668",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5975207d-39cb-4320-9d50-0a00a99cd29e",
        "parentId" : null,
        "authorId" : "34fde88b-e8d3-4125-af3a-0d4cc8bd83a8",
        "body" : "Do you need this check? Shouldn't an empty regex match everything anyways? ðŸ‘€ ",
        "createdAt" : "2021-05-17T16:13:32Z",
        "updatedAt" : "2021-05-17T16:13:43Z",
        "lastEditedBy" : "34fde88b-e8d3-4125-af3a-0d4cc8bd83a8",
        "tags" : [
        ]
      },
      {
        "id" : "692a98e6-3b09-498c-91a3-2d662ef6e358",
        "parentId" : "5975207d-39cb-4320-9d50-0a00a99cd29e",
        "authorId" : "61ddb048-36d3-4039-ab51-6db005c8c855",
        "body" : "indeed it matches everything anyways, but I wonder if the database will actually try to match everything against the RegExp, so since we know we want everything I _think_ it is better to not even send it to db",
        "createdAt" : "2021-05-17T16:28:14Z",
        "updatedAt" : "2021-05-17T16:28:14Z",
        "lastEditedBy" : "61ddb048-36d3-4039-ab51-6db005c8c855",
        "tags" : [
        ]
      },
      {
        "id" : "72bb16cf-ca00-42f4-a31e-ce8e8ee3662c",
        "parentId" : "5975207d-39cb-4320-9d50-0a00a99cd29e",
        "authorId" : "34fde88b-e8d3-4125-af3a-0d4cc8bd83a8",
        "body" : "ðŸ¤” that's a fair point. It looks like for a small collection with index, it'll prefer the IXSCAN, while for bigger ones, it will only attempt to use the index when the regex is /^.../\r\n\r\nAgree that it's better to not to send it at all. ",
        "createdAt" : "2021-05-19T19:53:51Z",
        "updatedAt" : "2021-05-19T19:53:52Z",
        "lastEditedBy" : "34fde88b-e8d3-4125-af3a-0d4cc8bd83a8",
        "tags" : [
        ]
      }
    ],
    "commit" : "d453e962510b823179acab66f814349cb5270564",
    "line" : 40,
    "diffHunk" : "@@ -1,1 +577,581 @@\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t...searchTerm ? [{\n\t\t\t\t\t$or: [{\n\t\t\t\t\t\tname: searchTerm,"
  },
  {
    "id" : "9ff3792a-1a29-4bff-82ec-4884f5ce10d4",
    "prId" : 21684,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/21684#pullrequestreview-641183393",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e8e3b8b3-710a-4552-9698-799f19da1c23",
        "parentId" : null,
        "authorId" : "61ddb048-36d3-4039-ab51-6db005c8c855",
        "body" : "this will probably make event multiple DM rooms as read only.. which I'm not sure is the desired behavior ðŸ¤” ",
        "createdAt" : "2021-04-20T21:13:22Z",
        "updatedAt" : "2021-04-21T05:10:37Z",
        "lastEditedBy" : "61ddb048-36d3-4039-ab51-6db005c8c855",
        "tags" : [
        ]
      },
      {
        "id" : "131c1a1d-63ac-49ea-ac9f-326d08086174",
        "parentId" : "e8e3b8b3-710a-4552-9698-799f19da1c23",
        "authorId" : "34fde88b-e8d3-4125-af3a-0d4cc8bd83a8",
        "body" : "Well, it should mark all the direct conversations with the deactivated user as readonly ðŸ¤” ",
        "createdAt" : "2021-04-20T21:21:20Z",
        "updatedAt" : "2021-04-21T05:10:37Z",
        "lastEditedBy" : "34fde88b-e8d3-4125-af3a-0d4cc8bd83a8",
        "tags" : [
        ]
      },
      {
        "id" : "b3d6ef99-24b3-4ae4-a0bc-50a7dd43e093",
        "parentId" : "e8e3b8b3-710a-4552-9698-799f19da1c23",
        "authorId" : "61ddb048-36d3-4039-ab51-6db005c8c855",
        "body" : "right, is that behavior expected? like if I'm talking to 5 different people, if one of them gets deactivated, should the whole conversation be locked up? this might be already better than what we have today though =)",
        "createdAt" : "2021-04-20T21:54:35Z",
        "updatedAt" : "2021-04-21T05:10:37Z",
        "lastEditedBy" : "61ddb048-36d3-4039-ab51-6db005c8c855",
        "tags" : [
        ]
      },
      {
        "id" : "966c8348-d623-4236-acf2-25726a1b4126",
        "parentId" : "e8e3b8b3-710a-4552-9698-799f19da1c23",
        "authorId" : "61ddb048-36d3-4039-ab51-6db005c8c855",
        "body" : "oh, and I just realised, what if a user get re-activated? this `update` will make room available again even if there are other users still not active on that multi DM..\r\n\r\nlet's say there is a multi DM with users: `userA`, `userB` and `userC`.. if `userA` is deactivated, it will change that DM to read only.. then after that `userB` get deactivated as well, the room stays read only.. if `userA` is activated again, the DM should keep as read only, since `userB` is still not active.",
        "createdAt" : "2021-04-20T22:00:09Z",
        "updatedAt" : "2021-04-21T05:10:37Z",
        "lastEditedBy" : "61ddb048-36d3-4039-ab51-6db005c8c855",
        "tags" : [
        ]
      },
      {
        "id" : "f4a9536f-620c-4afc-b517-5576a3060591",
        "parentId" : "e8e3b8b3-710a-4552-9698-799f19da1c23",
        "authorId" : "34fde88b-e8d3-4125-af3a-0d4cc8bd83a8",
        "body" : "ðŸ¤” I think we can refine to the point where if a conversation is between 2 and one is locked, the whole conversation should be locked. But if it's between more people, then it shouldn't be locked away, even if there are deactivated members,\r\n\r\nRegarding the second, yes ðŸ˜¬ I didn't consider multi dms for this haha I thought that was a different type of room. ",
        "createdAt" : "2021-04-21T14:44:13Z",
        "updatedAt" : "2021-04-21T15:12:32Z",
        "lastEditedBy" : "34fde88b-e8d3-4125-af3a-0d4cc8bd83a8",
        "tags" : [
        ]
      }
    ],
    "commit" : "9b0c95dd504b8e53ca2ffd2e42fba858a5ea3c5e",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +232,236 @@\tsetReadOnlyByUserId(_id, readOnly, reactWhenReadOnly) {\n\t\tconst query = {\n\t\t\tuids: _id,\n\t\t\tt: 'd',\n\t\t};"
  },
  {
    "id" : "4136ada5-951d-4307-95cb-399531c298c7",
    "prId" : 16025,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/16025#pullrequestreview-339813110",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e546ecf8-ca7f-46bd-9807-5a2c293d3a0a",
        "parentId" : null,
        "authorId" : "9e666942-cd54-4d1b-8cc7-4188822a684b",
        "body" : "since you decided to use 2 methods to deal with default an defaultFavorite you should respect the rule and only set defaultFavorite if `default: true`",
        "createdAt" : "2020-01-08T11:59:03Z",
        "updatedAt" : "2020-04-13T18:24:43Z",
        "lastEditedBy" : "9e666942-cd54-4d1b-8cc7-4188822a684b",
        "tags" : [
        ]
      }
    ],
    "commit" : "8497dbf66fcdc0814814ad33bf5384ccec846ccb",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +916,920 @@\n\tsaveFavoriteById(_id, favorite, defaultValue) {\n\t\tconst query = { _id };\n\n\t\tconst update = {"
  },
  {
    "id" : "54968a76-8699-4063-9078-960aaaa5e377",
    "prId" : 16025,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/16025#pullrequestreview-339813110",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ff8605cc-ab7c-4c8d-8f61-72354d150d3d",
        "parentId" : null,
        "authorId" : "9e666942-cd54-4d1b-8cc7-4188822a684b",
        "body" : "if default === false ... unset defaultFavorite",
        "createdAt" : "2020-01-08T11:59:05Z",
        "updatedAt" : "2020-04-13T18:24:43Z",
        "lastEditedBy" : "9e666942-cd54-4d1b-8cc7-4188822a684b",
        "tags" : [
        ]
      }
    ],
    "commit" : "8497dbf66fcdc0814814ad33bf5384ccec846ccb",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +908,912 @@\t\tconst update = {\n\t\t\t$set: {\n\t\t\t\tdefault: defaultValue,\n\t\t\t},\n\t\t};"
  }
]