[
  {
    "id" : "3cffd747-ea0f-4767-bba3-6fb74df66d12",
    "prId" : 22611,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/22611#pullrequestreview-710620817",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bce01ac3-4ec0-462e-8a3d-a7ecd60ee0c1",
        "parentId" : null,
        "authorId" : "2491d7cd-a9b5-4520-8c24-7c13b370f008",
        "body" : "```suggestion\r\n\t\tconst currentUnavailableAgents = Users.getUnavailableAgents(departmentId, extraQuery).map((u) => u.username);\r\n```\r\n\r\nThe `getUnavailableAgents` method isn't async so I don't think we need to resolve a promise here",
        "createdAt" : "2021-07-20T07:29:42Z",
        "updatedAt" : "2021-07-20T07:29:43Z",
        "lastEditedBy" : "2491d7cd-a9b5-4520-8c24-7c13b370f008",
        "tags" : [
        ]
      },
      {
        "id" : "3874b81b-2be2-489c-bc14-bdedd9904aac",
        "parentId" : "bce01ac3-4ec0-462e-8a3d-a7ecd60ee0c1",
        "authorId" : "34fde88b-e8d3-4125-af3a-0d4cc8bd83a8",
        "body" : "afaik, `rawCollection` queries are not handled by meteor, so you always need to wait for them ðŸ˜¬ even when they're on a Meteor Model.",
        "createdAt" : "2021-07-20T13:37:33Z",
        "updatedAt" : "2021-07-20T13:37:33Z",
        "lastEditedBy" : "34fde88b-e8d3-4125-af3a-0d4cc8bd83a8",
        "tags" : [
        ]
      },
      {
        "id" : "3928023f-c083-4524-9301-6fc0d47239f1",
        "parentId" : "bce01ac3-4ec0-462e-8a3d-a7ecd60ee0c1",
        "authorId" : "2491d7cd-a9b5-4520-8c24-7c13b370f008",
        "body" : "Oh okay, I wasn't aware of this and will need to look into it deeper. But for now we can keep it since its not causing any harm ",
        "createdAt" : "2021-07-20T13:49:30Z",
        "updatedAt" : "2021-07-20T13:49:31Z",
        "lastEditedBy" : "2491d7cd-a9b5-4520-8c24-7c13b370f008",
        "tags" : [
        ]
      },
      {
        "id" : "1f7d3904-de94-4702-8547-36efc3447326",
        "parentId" : "bce01ac3-4ec0-462e-8a3d-a7ecd60ee0c1",
        "authorId" : "34fde88b-e8d3-4125-af3a-0d4cc8bd83a8",
        "body" : "Thanks man! ",
        "createdAt" : "2021-07-20T14:04:19Z",
        "updatedAt" : "2021-07-20T14:04:19Z",
        "lastEditedBy" : "34fde88b-e8d3-4125-af3a-0d4cc8bd83a8",
        "tags" : [
        ]
      }
    ],
    "commit" : "4e03fa20572d859b2db092d71ad9f8a282bda591",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +67,71 @@\n\t\t// get fully booked agents, to ignore them from the query\n\t\tconst currentUnavailableAgents = Promise.await(Users.getUnavailableAgents(departmentId, extraQuery)).map((u) => u.username);\n\n\t\tconst query = {"
  },
  {
    "id" : "b9c6900a-4dd7-4a87-baef-b8f746e5bdc3",
    "prId" : 17049,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/17049#pullrequestreview-383313543",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e0cb2013-b7d8-45ee-93be-be08bbd19496",
        "parentId" : null,
        "authorId" : "e286e399-a847-4b77-8052-d1ba61e04074",
        "body" : "This implementation is OK, but I found some calls to the `saveAgents` method that is not passing the `departmentEnabled`, like here:https://github.com/RocketChat/Rocket.Chat/blob/develop/app/models/server/models/LivechatDepartment.js#L84\r\nIs that supposed to be okay?\r\n\r\nMy suggestion is to find the departments passed through the `departments = []` parameter in order to get the `departmentEnabled` property.",
        "createdAt" : "2020-03-28T21:45:06Z",
        "updatedAt" : "2020-07-21T02:55:11Z",
        "lastEditedBy" : "e286e399-a847-4b77-8052-d1ba61e04074",
        "tags" : [
        ]
      }
    ],
    "commit" : "b6c1bc321f2a164eff291bca2fb6218af17c79aa",
    "line" : 12,
    "diffHunk" : "@@ -1,1 +36,40 @@\t\t\t$set: {\n\t\t\t\tusername: agent.username,\n\t\t\t\tdepartmentEnabled: agent.departmentEnabled,\n\t\t\t\tcount: parseInt(agent.count),\n\t\t\t\torder: parseInt(agent.order),"
  }
]