[
  {
    "id" : "183464c2-1eef-4c0d-9adc-f645b023f919",
    "prId" : 13820,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/13820#pullrequestreview-219095355",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0e077368-916c-48fb-828e-76b8894380d0",
        "parentId" : null,
        "authorId" : "6b2de464-07b6-478f-bdd0-b8707d59c1c1",
        "body" : "Don't we inform cloud about the unregistration?",
        "createdAt" : "2019-03-25T13:07:42Z",
        "updatedAt" : "2019-03-28T22:39:59Z",
        "lastEditedBy" : "6b2de464-07b6-478f-bdd0-b8707d59c1c1",
        "tags" : [
        ]
      },
      {
        "id" : "8fe00a36-a31f-4e45-a93b-8426d728b788",
        "parentId" : "0e077368-916c-48fb-828e-76b8894380d0",
        "authorId" : "beb0c9ad-a917-4bb6-948e-12669fdc6784",
        "body" : "No because this isn't actually unregistering.  This just would stop the usage of the token.  Effectively cutting off their cloud services.  To unregister we are going to force to do via the cloud console that way they are fully authenticated as the account owner and not just a server admin",
        "createdAt" : "2019-03-25T16:26:50Z",
        "updatedAt" : "2019-03-28T22:39:59Z",
        "lastEditedBy" : "beb0c9ad-a917-4bb6-948e-12669fdc6784",
        "tags" : [
        ]
      },
      {
        "id" : "492b5a90-4d5e-4947-a3ec-bfe847813a63",
        "parentId" : "0e077368-916c-48fb-828e-76b8894380d0",
        "authorId" : "beb0c9ad-a917-4bb6-948e-12669fdc6784",
        "body" : "Ah sorry didn't look closely enough at which code segment this was.   This is actually executed after the refresh token is rejected by cloud which causes Rocket.Chat to remove all of these values and effectively is unregistered.\r\n\r\nSo they unregister on cloud.  The token is no good.  They try to get access token.  Get rejected so then this is executed to clear out all of the stuff and treat as an unregistered server",
        "createdAt" : "2019-03-26T18:49:48Z",
        "updatedAt" : "2019-03-28T22:39:59Z",
        "lastEditedBy" : "beb0c9ad-a917-4bb6-948e-12669fdc6784",
        "tags" : [
        ]
      }
    ],
    "commit" : "b4d049c64208c48571e2893b233ceef6194b2173",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +17,21 @@\n\t// So doesn't try to register again automatically\n\tSettings.updateValueById('Register_Server', false);\n\n\treturn true;"
  }
]