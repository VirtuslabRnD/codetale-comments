[
  {
    "id" : "b7f7b3fb-6e7c-4332-b8dd-a425d362ea23",
    "prId" : 18562,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/18562#pullrequestreview-472646069",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "425e0632-26c0-4766-bfbb-0456a98daf9c",
        "parentId" : null,
        "authorId" : "61ddb048-36d3-4039-ab51-6db005c8c855",
        "body" : "I guess this is one of the bad habits that optional chaining introduces, with this change the code is now checking twice if `response` is defined.. IMO we should avoid this and in this case we could use a single `if` to check if `response.statusCode` exists:\r\n\r\n```javascript\r\n\t\t\tif (response?.statusCode) {\r\n\t\t\t\tif (response.statusCode === 406) {\r\n\t\t\t\t\tlogger.info('removing push token', token);\r\n\t\t\t\t\tappTokensCollection.remove({\r\n\t\t\t\t\t\t$or: [{\r\n\t\t\t\t\t\t\t'token.apn': token,\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t'token.gcm': token,\r\n\t\t\t\t\t\t}],\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (response.statusCode === 401) {\r\n\t\t\t\t\tlogger.warn('Error sending push to gateway (not authorized)', response);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n...\r\n```\r\n",
        "createdAt" : "2020-08-14T17:29:44Z",
        "updatedAt" : "2020-08-14T17:29:44Z",
        "lastEditedBy" : "61ddb048-36d3-4039-ab51-6db005c8c855",
        "tags" : [
        ]
      },
      {
        "id" : "173314a6-5f8a-40f0-ad11-ca98e0e08538",
        "parentId" : "425e0632-26c0-4766-bfbb-0456a98daf9c",
        "authorId" : "9e666942-cd54-4d1b-8cc7-4188822a684b",
        "body" : "I agree, sometimes this feature leads us not to question if some structures are correct, for example here, why would the respose be empty ?, maybe the error of this being tested first ... I saw it a lot on the coffescript code and I dont like it... try to write using ifs or ternaries before, and maybe these questions would appear ðŸ¤” ",
        "createdAt" : "2020-08-21T16:56:07Z",
        "updatedAt" : "2020-08-21T16:56:07Z",
        "lastEditedBy" : "9e666942-cd54-4d1b-8cc7-4188822a684b",
        "tags" : [
        ]
      }
    ],
    "commit" : "136e099aa79b476e1bf3b1f3c3d50057837c15ac",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +129,133 @@\t\t\t}\n\n\t\t\tif (response?.statusCode === 401) {\n\t\t\t\tlogger.warn('Error sending push to gateway (not authorized)', response);\n\t\t\t\treturn;"
  }
]