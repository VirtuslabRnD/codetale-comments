[
  {
    "id" : "3e313769-9e61-482b-a75a-78789aaa6d25",
    "prId" : 4737,
    "prUrl" : "https://github.com/apache/kafka/pull/4737#pullrequestreview-109948863",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ae35e1c8-6fc7-46fd-8d4e-80cdb8f1d797",
        "parentId" : null,
        "authorId" : "e235ea82-83a9-41e5-8e3a-15b2e1b6f350",
        "body" : "It looks like before moving this code into a separate method, we handled PENDING ManagedTaskState. Or this state is not possible when we are in this method? Maybe we should check and throw an exception in that case? Also, what if the task is in STOPPING state?",
        "createdAt" : "2018-04-05T23:05:25Z",
        "updatedAt" : "2018-04-06T21:44:50Z",
        "lastEditedBy" : "e235ea82-83a9-41e5-8e3a-15b2e1b6f350",
        "tags" : [
        ]
      },
      {
        "id" : "fdea4c2e-5c58-488e-8064-e585f659d10a",
        "parentId" : "ae35e1c8-6fc7-46fd-8d4e-80cdb8f1d797",
        "authorId" : "514c0afb-8649-4fd9-a6ea-ee9e1b695274",
        "body" : "> It looks like before moving this code into a separate method, we handled PENDING ManagedTaskState. Or this state is not possible when we are in this method?\r\n\r\nYes, PENDING is impossible here because at that point the worker hasn't been started.\r\n\r\n> Also, what if the task is in STOPPING state?\r\n\r\nThere's no additional action needed in that case.\r\n\r\nThe only transition here is that if one worker fails while a task is RUNNING, the task will transition into STOPPING and the other workers will be stopped.  There is nothing to do if the task isn't RUNNING.\r\n\r\nActually, come to think of it, we should probably not start stopping the other tasks unless the first worker stopped with an error.",
        "createdAt" : "2018-04-06T05:17:22Z",
        "updatedAt" : "2018-04-06T21:44:50Z",
        "lastEditedBy" : "514c0afb-8649-4fd9-a6ea-ee9e1b695274",
        "tags" : [
        ]
      }
    ],
    "commit" : "774a39f4d2c26998f1b314a0590f19fefae773d3",
    "line" : 236,
    "diffHunk" : "@@ -1,1 +516,520 @@                nodeManagers.get(workerName).stopWorker(task.id);\n            }\n        }\n    }\n"
  }
]