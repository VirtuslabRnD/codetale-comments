[
  {
    "id" : "58c92061-4a11-42ba-ab25-e8f1c54952b3",
    "prId" : 1793,
    "prUrl" : "https://github.com/scalameta/scalameta/pull/1793#pullrequestreview-166484640",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5e71269e-d90d-4ca7-9bac-dc913b37940b",
        "parentId" : null,
        "authorId" : "ea0dbf4f-66ef-40cf-8eb0-f1a5ed3d2711",
        "body" : "Neither traversers are stack safe. However, there is a particular file in the Kafka repo that causes the existing traverser to blow up the stack (bug?): https://github.com/apache/kafka/blob/trunk/core/src/main/scala/kafka/server/KafkaConfig.scala:\r\n```\r\nException in thread \"main\" java.lang.StackOverflowError\r\n\tat scala.meta.Term$Apply$TermApplyImpl.args(Trees.scala:81)\r\n\tat scala.meta.Term$Apply$TermApplyImpl.args(Trees.scala:81)\r\n\tat scala.meta.Term$Apply$TermApplyImpl.args(Trees.scala:81)\r\n```\r\n\r\nI also benchmarked a stack-safe traverser but turned out to be 30-50% slower than this one. ",
        "createdAt" : "2018-10-07T17:29:06Z",
        "updatedAt" : "2018-10-14T19:32:32Z",
        "lastEditedBy" : "ea0dbf4f-66ef-40cf-8eb0-f1a5ed3d2711",
        "tags" : [
        ]
      },
      {
        "id" : "f9721962-5ef3-4060-9f0d-b082db81b5c8",
        "parentId" : "5e71269e-d90d-4ca7-9bac-dc913b37940b",
        "authorId" : "bd90d0d4-3cfe-485f-b03d-29764e6b2eae",
        "body" : "It's normal that users need to increase the stack size to use scalameta, we probably don't do a good enough job at documenting it however ðŸ¤” ",
        "createdAt" : "2018-10-19T11:37:30Z",
        "updatedAt" : "2018-10-19T11:41:00Z",
        "lastEditedBy" : "bd90d0d4-3cfe-485f-b03d-29764e6b2eae",
        "tags" : [
        ]
      }
    ],
    "commit" : "a495e7edce914ba3ebe507f904124d27aceba367",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +3,7 @@\nprivate[meta] class SimpleTraverser {\n  def apply(tree: Tree): Unit = tree.children.foreach(apply)\n}"
  },
  {
    "id" : "c2eced59-bd01-460d-ba73-a2cdf9a96476",
    "prId" : 1793,
    "prUrl" : "https://github.com/scalameta/scalameta/pull/1793#pullrequestreview-162455769",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "836bbc8d-5c83-47e1-914f-1ca12a19f7d7",
        "parentId" : null,
        "authorId" : "56d6821a-439f-4d87-aba8-a6368926dbc5",
        "body" : "How about we get rid of the autogenerated Traverser altogether? Then SimpleTraverser would simply become Traverser.",
        "createdAt" : "2018-10-08T01:50:17Z",
        "updatedAt" : "2018-10-14T19:32:32Z",
        "lastEditedBy" : "56d6821a-439f-4d87-aba8-a6368926dbc5",
        "tags" : [
        ]
      },
      {
        "id" : "433d79e4-8cd3-4afc-b95a-9dc0832faa40",
        "parentId" : "836bbc8d-5c83-47e1-914f-1ca12a19f7d7",
        "authorId" : "bd90d0d4-3cfe-485f-b03d-29764e6b2eae",
        "body" : "That would be a breaking change since `Traverser` has `apply(Option[Tree])` and `apply(List[Tree])`. I think it's worth considering removing `Traverser` for v5 but that is hopefully at least one year from now so I don't think it's worth prioritizing at the moment.",
        "createdAt" : "2018-10-08T08:12:34Z",
        "updatedAt" : "2018-10-14T19:32:32Z",
        "lastEditedBy" : "bd90d0d4-3cfe-485f-b03d-29764e6b2eae",
        "tags" : [
        ]
      },
      {
        "id" : "b41ae72d-9ad1-469f-8528-0302454af47a",
        "parentId" : "836bbc8d-5c83-47e1-914f-1ca12a19f7d7",
        "authorId" : "ea0dbf4f-66ef-40cf-8eb0-f1a5ed3d2711",
        "body" : "done",
        "createdAt" : "2018-10-08T12:53:43Z",
        "updatedAt" : "2018-10-14T19:32:32Z",
        "lastEditedBy" : "ea0dbf4f-66ef-40cf-8eb0-f1a5ed3d2711",
        "tags" : [
        ]
      }
    ],
    "commit" : "a495e7edce914ba3ebe507f904124d27aceba367",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +3,7 @@\nprivate[meta] class SimpleTraverser {\n  def apply(tree: Tree): Unit = tree.children.foreach(apply)\n}"
  },
  {
    "id" : "7cf8f93f-5b57-4ef5-972f-6919fbe13259",
    "prId" : 1793,
    "prUrl" : "https://github.com/scalameta/scalameta/pull/1793#pullrequestreview-166486090",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "30405be0-0b45-4474-8120-b1f4c83daea8",
        "parentId" : null,
        "authorId" : "bd90d0d4-3cfe-485f-b03d-29764e6b2eae",
        "body" : "I will follow up with a PR to make this class public so that users can extend it to implement custom traversals like documented here https://scalameta.org/docs/trees/guide.html#custom-traversals",
        "createdAt" : "2018-10-19T11:43:10Z",
        "updatedAt" : "2018-10-19T11:43:10Z",
        "lastEditedBy" : "bd90d0d4-3cfe-485f-b03d-29764e6b2eae",
        "tags" : [
        ]
      }
    ],
    "commit" : "a495e7edce914ba3ebe507f904124d27aceba367",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +2,6 @@package transversers\n\nprivate[meta] class SimpleTraverser {\n  def apply(tree: Tree): Unit = tree.children.foreach(apply)\n}"
  }
]