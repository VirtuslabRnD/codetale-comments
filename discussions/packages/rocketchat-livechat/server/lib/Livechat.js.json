[
  {
    "id" : "96998d2d-4080-41d6-aefa-cd2d970962df",
    "prId" : 11900,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/11900#pullrequestreview-666203123",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f42946a2-4d9b-4032-9559-b707a7d4d415",
        "parentId" : null,
        "authorId" : "9b7d2929-1751-4a11-adc3-c6913dcc0e0d",
        "body" : "What happens if using TLD like .photography?",
        "createdAt" : "2021-05-22T18:39:31Z",
        "updatedAt" : "2021-05-22T18:39:31Z",
        "lastEditedBy" : "9b7d2929-1751-4a11-adc3-c6913dcc0e0d",
        "tags" : [
        ]
      }
    ],
    "commit" : "9db82b15b8c1fc217c9f5462d8d8fcaa210c75f0",
    "line" : 192,
    "diffHunk" : "@@ -1,1 +804,808 @@\t\thtml = `${ html }</div>`;\n\n\t\tlet fromEmail = RocketChat.settings.get('From_Email').match(/\\b[A-Z0-9._%+-]+@(?:[A-Z0-9-]+\\.)+[A-Z]{2,4}\\b/i);\n\n\t\tif (fromEmail) {"
  },
  {
    "id" : "58d7776f-501a-42fd-9e34-1f2111f3dcb3",
    "prId" : 10091,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/10091#pullrequestreview-103524417",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "47bf2d0b-c6a1-4eb9-826e-7c3219db5dcf",
        "parentId" : null,
        "authorId" : "61ddb048-36d3-4039-ab51-6db005c8c855",
        "body" : "you don't need to receive `roomId` here.. we can rely on `RocketChat.models.Rooms.findOneOpenByVisitorToken` to get visitor's current room.",
        "createdAt" : "2018-03-12T13:22:22Z",
        "updatedAt" : "2018-06-05T19:08:40Z",
        "lastEditedBy" : "61ddb048-36d3-4039-ab51-6db005c8c855",
        "tags" : [
        ]
      },
      {
        "id" : "5bf989ff-0b44-45dc-be5a-eb58d43751d1",
        "parentId" : "47bf2d0b-c6a1-4eb9-826e-7c3219db5dcf",
        "authorId" : "409df6ab-3b03-4605-a9f9-90ba7bb0018e",
        "body" : "@sampaiodiego, the `RocketChat.models.Rooms.findOneOpenByVisitorToken` has a `roomId` parameter, due to this I changed the `savePageHistory` to get this parameter.\r\nHow can I call the `RocketChat.models.Rooms.findOneOpenByVisitorToken` method if I don't pass the `roomId` parameter?\r\nI'm sorry if I'm making a mistake but I think this parameter is necessary.",
        "createdAt" : "2018-03-12T13:46:04Z",
        "updatedAt" : "2018-06-05T19:08:40Z",
        "lastEditedBy" : "409df6ab-3b03-4605-a9f9-90ba7bb0018e",
        "tags" : [
        ]
      },
      {
        "id" : "87b09658-93eb-493f-97a3-8993d0d3db47",
        "parentId" : "47bf2d0b-c6a1-4eb9-826e-7c3219db5dcf",
        "authorId" : "61ddb048-36d3-4039-ab51-6db005c8c855",
        "body" : "you're correct @renatobecker .. I didn't notice `RocketChat.models.Rooms.findOneOpenByVisitorToken ` has a `roomId` parameter as well. ðŸ˜‰ \r\nI'll give this PR a whole review to see how we could still save visitor's navigation history without a room.",
        "createdAt" : "2018-03-13T17:03:53Z",
        "updatedAt" : "2018-06-05T19:08:40Z",
        "lastEditedBy" : "61ddb048-36d3-4039-ab51-6db005c8c855",
        "tags" : [
        ]
      }
    ],
    "commit" : "b350a0b54d4970fef5d000308cd60ac587f7ad54",
    "line" : 16,
    "diffHunk" : "@@ -1,1 +320,324 @@\t},\n\n\tsavePageHistory(token, roomId, pageInfo) {\n\t\tif (pageInfo.change === RocketChat.Livechat.historyMonitorType) {\n"
  },
  {
    "id" : "511a74ca-5e77-46fe-b237-1b605785ab42",
    "prId" : 9107,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/9107#pullrequestreview-84843705",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "33d8d659-aa5c-4df3-9d44-5b380ff71518",
        "parentId" : null,
        "authorId" : "9e666942-cd54-4d1b-8cc7-4188822a684b",
        "body" : "ðŸ¤”  something like:\r\n```javascript\r\nconst departments = RocketChat.models.LivechatDepartment.findEnabledWithAgents();\r\n return departments.fetch().find(dept => {\r\n \tif (!dept.showOnRegistration) { return false; }\r\n \tif (!onlineRequired) { return true; }\r\n \tconst onlineAgents = RocketChat.models.LivechatDepartmentAgents.getOnlineForDepartment(dept._id);\r\n \treturn onlineAgents.count() > 0\r\n });\r\n\r\n```",
        "createdAt" : "2017-12-20T17:52:14Z",
        "updatedAt" : "2017-12-27T20:26:22Z",
        "lastEditedBy" : "9e666942-cd54-4d1b-8cc7-4188822a684b",
        "tags" : [
        ]
      }
    ],
    "commit" : "35aeedba9adcb8a80fff1b5f569fe6785bebf990",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +62,66 @@\t\t}\n\t},\n\tgetRequiredDepartment(onlineRequired = true) {\n\t\tconst departments = RocketChat.models.LivechatDepartment.findEnabledWithAgents();\n"
  }
]