[
  {
    "id" : "f4e933f8-8d6f-46c0-98b0-0132565648eb",
    "prId" : 3675,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "61e71e1b-95e4-41ad-a178-78c09c65e892",
        "parentId" : null,
        "authorId" : "6b2de464-07b6-478f-bdd0-b8707d59c1c1",
        "body" : "Can you stop the autorun? `Tracker.autorun (c) ->` then you call `c.stop()` after your if.\n",
        "createdAt" : "2016-07-06T14:27:23Z",
        "updatedAt" : "2016-07-06T14:27:23Z",
        "lastEditedBy" : "6b2de464-07b6-478f-bdd0-b8707d59c1c1",
        "tags" : [
        ]
      },
      {
        "id" : "034a21ca-a8fd-4da2-ace5-5cd3c6f8de10",
        "parentId" : "61e71e1b-95e4-41ad-a178-78c09c65e892",
        "authorId" : "fb5a4474-5628-4bbe-8849-4e2550a69e13",
        "body" : "Sorry, I'm not sure I understand what you're saying. The autorun needs to keep running if a user isn't logged in yet (ie. Meteor.userId() is false), but will be logged in soon, say in the case of Sandstorm where login takes ~50ms. Stopping it would defeat the purpose, I think?\n\nThe concept for this was copied from https://github.com/RocketChat/Rocket.Chat/blob/a5cb22bb0017f4c39654bf1e2895ae64acb0339b/client/notifications/notification.coffee where you're already doing this logic.\n",
        "createdAt" : "2016-07-06T18:18:37Z",
        "updatedAt" : "2016-07-06T18:18:37Z",
        "lastEditedBy" : "fb5a4474-5628-4bbe-8849-4e2550a69e13",
        "tags" : [
        ]
      },
      {
        "id" : "38675766-ccd7-465d-a273-eda69bcf8bff",
        "parentId" : "61e71e1b-95e4-41ad-a178-78c09c65e892",
        "authorId" : "fb5a4474-5628-4bbe-8849-4e2550a69e13",
        "body" : "Nevermind, I see what you're saying now. Stop the autorun once the if block has run once.\n",
        "createdAt" : "2016-07-06T18:20:05Z",
        "updatedAt" : "2016-07-06T18:20:05Z",
        "lastEditedBy" : "fb5a4474-5628-4bbe-8849-4e2550a69e13",
        "tags" : [
        ]
      },
      {
        "id" : "7ce6cfe9-c03c-4bc9-a9fc-a575e5f9a486",
        "parentId" : "61e71e1b-95e4-41ad-a178-78c09c65e892",
        "authorId" : "6b2de464-07b6-478f-bdd0-b8707d59c1c1",
        "body" : "Ok, no problem, we can keep this ðŸ˜„ \n",
        "createdAt" : "2016-07-06T18:20:12Z",
        "updatedAt" : "2016-07-06T18:20:12Z",
        "lastEditedBy" : "6b2de464-07b6-478f-bdd0-b8707d59c1c1",
        "tags" : [
        ]
      },
      {
        "id" : "a0313a75-3afb-44e3-83cf-414b9bf081ab",
        "parentId" : "61e71e1b-95e4-41ad-a178-78c09c65e892",
        "authorId" : "6b2de464-07b6-478f-bdd0-b8707d59c1c1",
        "body" : "Yes, but we can keep like the other code, I need to improve the Notification class to handle this automatically \n",
        "createdAt" : "2016-07-06T18:21:31Z",
        "updatedAt" : "2016-07-06T18:21:31Z",
        "lastEditedBy" : "6b2de464-07b6-478f-bdd0-b8707d59c1c1",
        "tags" : [
        ]
      },
      {
        "id" : "3221b0bb-65e2-47ce-afc2-b8d150b8bb2e",
        "parentId" : "61e71e1b-95e4-41ad-a178-78c09c65e892",
        "authorId" : "fb5a4474-5628-4bbe-8849-4e2550a69e13",
        "body" : "Ya, I'd agree. This logic seems better placed in `onUser`, but I was a bit hesitant as an outside contributor to go changing core methods without a firm understanding of the code base :smile: \n",
        "createdAt" : "2016-07-06T18:26:30Z",
        "updatedAt" : "2016-07-06T18:26:30Z",
        "lastEditedBy" : "fb5a4474-5628-4bbe-8849-4e2550a69e13",
        "tags" : [
        ]
      }
    ],
    "commit" : "6ce683bd5e82960714f171cf2d58f5e41434a67c",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +804,808 @@\nMeteor.startup ->\n\tTracker.autorun ->\n\t\tif Meteor.userId()\n\t\t\tRocketChat.Notifications.onUser 'webrtc', (type, data) =>"
  }
]