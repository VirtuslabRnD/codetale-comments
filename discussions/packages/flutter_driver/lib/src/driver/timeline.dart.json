[
  {
    "id" : "592298ba-f5b2-4cf3-9968-ba3541b46f03",
    "prId" : 55763,
    "prUrl" : "https://github.com/flutter/flutter/pull/55763#pullrequestreview-401331223",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "03693fc6-3c38-4152-8aa9-89afcc1c0746",
        "parentId" : null,
        "authorId" : "56d84530-1d58-4dbf-af8a-6916988ae943",
        "body" : "I just tried running this on my favorite benchmark and got a null exception here. Apparently not all events have timestamps and so you need to do something special to compare events with null timestamps (null should be sorted as less than everything else, maybe?)",
        "createdAt" : "2020-04-27T21:03:45Z",
        "updatedAt" : "2020-04-27T21:03:51Z",
        "lastEditedBy" : "56d84530-1d58-4dbf-af8a-6916988ae943",
        "tags" : [
        ]
      },
      {
        "id" : "c1234313-9eee-48d4-a338-a4789dd0aaa3",
        "parentId" : "03693fc6-3c38-4152-8aa9-89afcc1c0746",
        "authorId" : "56d84530-1d58-4dbf-af8a-6916988ae943",
        "body" : "It looks like all of the events in the timeline I was processing that had null timestamps were the \"thread_name\" events at the beginning of the log.",
        "createdAt" : "2020-04-27T21:13:47Z",
        "updatedAt" : "2020-04-27T21:13:48Z",
        "lastEditedBy" : "56d84530-1d58-4dbf-af8a-6916988ae943",
        "tags" : [
        ]
      }
    ],
    "commit" : "c4f4edfb94f4eb92c1628246512484f0fd42d25b",
    "line" : 35,
    "diffHunk" : "@@ -1,1 +133,137 @@\n  timelineEvents.sort((TimelineEvent e1, TimelineEvent e2) {\n    return e1.timestampMicros.compareTo(e2.timestampMicros);\n  });\n"
  },
  {
    "id" : "eb5d1918-e296-4a9c-acc8-cae502903376",
    "prId" : 55771,
    "prUrl" : "https://github.com/flutter/flutter/pull/55771#pullrequestreview-401359206",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "18d80351-726e-4431-ac18-383752ebb0eb",
        "parentId" : null,
        "authorId" : "56d84530-1d58-4dbf-af8a-6916988ae943",
        "body" : "if nulls are not common then we are performing 3 null tests per call. Nesting could reduce that to 2.\r\n\r\nAnother idea is setting the timestampMicros to 0 (or -1) on construction? (Though it hides the fact that some events didn't have a timestamp. At least with -1, that would be an invalid value given that the field is meant to be time since beginning of tracing).\r\n\r\nOr doing a null == 0 test on the saved values and then just falling into the compareTo method?\r\n\r\nOr having a fake getter for nonNullTimestampMicros (or \"sortingMetric\")?",
        "createdAt" : "2020-04-27T21:39:26Z",
        "updatedAt" : "2020-04-27T22:33:13Z",
        "lastEditedBy" : "56d84530-1d58-4dbf-af8a-6916988ae943",
        "tags" : [
        ]
      },
      {
        "id" : "d9a97dd4-1db8-46cc-9da5-a1e6c0074a72",
        "parentId" : "18d80351-726e-4431-ac18-383752ebb0eb",
        "authorId" : "56d84530-1d58-4dbf-af8a-6916988ae943",
        "body" : "What about a helper function:\r\n\r\n```\r\nint nullsFirstCompare(num a, num b) {\r\n  if (a == null) {\r\n    return b == null ? 0 : -1;\r\n  }\r\n  return b == null ? 1 : a.compareTo(b);\r\n}\r\n```\r\n(Just discovered that dart doesn't consider \"+1\" to be a valid number...)",
        "createdAt" : "2020-04-27T21:41:53Z",
        "updatedAt" : "2020-04-27T22:33:13Z",
        "lastEditedBy" : "56d84530-1d58-4dbf-af8a-6916988ae943",
        "tags" : [
        ]
      },
      {
        "id" : "c48c06c1-2d32-4b32-9b2a-b868b0682aab",
        "parentId" : "18d80351-726e-4431-ac18-383752ebb0eb",
        "authorId" : "9d0a4821-6e3a-4276-827f-88b855cd3ae1",
        "body" : "nested them :-)",
        "createdAt" : "2020-04-27T22:01:24Z",
        "updatedAt" : "2020-04-27T22:33:13Z",
        "lastEditedBy" : "9d0a4821-6e3a-4276-827f-88b855cd3ae1",
        "tags" : [
        ]
      }
    ],
    "commit" : "2d0aa85df0e7ef5fe03e2cb993e0a3d6cd079629",
    "line" : 46,
    "diffHunk" : "@@ -1,1 +144,148 @@      return 1;\n    } else {\n      return ts1.compareTo(ts2);\n    }\n  });"
  },
  {
    "id" : "73601d1e-4fb5-41e2-a504-55bcffef176a",
    "prId" : 74856,
    "prUrl" : "https://github.com/flutter/flutter/pull/74856#pullrequestreview-577912015",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1a1cc563-f139-4ba2-a784-331bb05ffbae",
        "parentId" : null,
        "authorId" : "d61ab95a-0bf0-4571-9098-19991dd821ca",
        "body" : "It's surprising that this can be null. Can we document that? Or should it always be an (sometimes empty) list?",
        "createdAt" : "2021-01-28T00:06:19Z",
        "updatedAt" : "2021-01-28T05:40:54Z",
        "lastEditedBy" : "d61ab95a-0bf0-4571-9098-19991dd821ca",
        "tags" : [
        ]
      },
      {
        "id" : "ab2defd6-85b7-45e4-be98-77da81988bc9",
        "parentId" : "1a1cc563-f139-4ba2-a784-331bb05ffbae",
        "authorId" : "db47316c-0a85-441a-8891-3b84e8bfe474",
        "body" : "Hmm. I'm pretty sure the method that parses this was written in an overly cautious way. I was going to not change it, but I'm realizing now that it can only return null if another thing thatisn't allowed to be null (`json`) was null. I'm going to change it.",
        "createdAt" : "2021-01-28T01:12:34Z",
        "updatedAt" : "2021-01-28T05:40:54Z",
        "lastEditedBy" : "db47316c-0a85-441a-8891-3b84e8bfe474",
        "tags" : [
        ]
      },
      {
        "id" : "da9d6076-6b0d-42f5-a9df-f02ea9ff78dc",
        "parentId" : "1a1cc563-f139-4ba2-a784-331bb05ffbae",
        "authorId" : "db47316c-0a85-441a-8891-3b84e8bfe474",
        "body" : "I was wrong.\r\n\r\nThis can be null if the trace events are null in the JSON. I'll document it for now.",
        "createdAt" : "2021-01-28T01:13:48Z",
        "updatedAt" : "2021-01-28T05:40:54Z",
        "lastEditedBy" : "db47316c-0a85-441a-8891-3b84e8bfe474",
        "tags" : [
        ]
      },
      {
        "id" : "4256a83a-8d13-4b81-b3fb-438c0c99f9e4",
        "parentId" : "1a1cc563-f139-4ba2-a784-331bb05ffbae",
        "authorId" : "db47316c-0a85-441a-8891-3b84e8bfe474",
        "body" : "I think changing it to an empty list would be fine, but would like to do that separately from this migration in case anything depends on this behavior.",
        "createdAt" : "2021-01-28T01:16:32Z",
        "updatedAt" : "2021-01-28T05:40:54Z",
        "lastEditedBy" : "db47316c-0a85-441a-8891-3b84e8bfe474",
        "tags" : [
        ]
      }
    ],
    "commit" : "2b90b2dfdcfed9da8368b938af9f3dc382d32966",
    "line" : 16,
    "diffHunk" : "@@ -1,1 +26,30 @@  ///\n  /// This will be null if there are are no \"traceEvents\" in the [json].\n  final List<TimelineEvent>? events;\n}\n"
  }
]