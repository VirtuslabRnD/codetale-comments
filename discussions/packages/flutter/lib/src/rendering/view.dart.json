[
  {
    "id" : "f2baab23-85fa-4cdf-b262-1db5ea5b1ae6",
    "prId" : 17129,
    "prUrl" : "https://github.com/flutter/flutter/pull/17129#pullrequestreview-116448241",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "57ee25d3-0edb-4801-8388-e8af778a2972",
        "parentId" : null,
        "authorId" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "body" : "we should unit test this change to make sure we don't regress it",
        "createdAt" : "2018-04-30T20:19:20Z",
        "updatedAt" : "2018-04-30T21:28:18Z",
        "lastEditedBy" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "tags" : [
        ]
      },
      {
        "id" : "6ed29d47-c064-4b7b-bfd7-48e85d3b9598",
        "parentId" : "57ee25d3-0edb-4801-8388-e8af778a2972",
        "authorId" : "1dc608b7-5634-49db-a2de-36dd357356e8",
        "body" : "Done",
        "createdAt" : "2018-04-30T21:45:07Z",
        "updatedAt" : "2018-04-30T21:45:07Z",
        "lastEditedBy" : "1dc608b7-5634-49db-a2de-36dd357356e8",
        "tags" : [
        ]
      }
    ],
    "commit" : "a0005a555d24d75921ae2738942048ded97dbdf8",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +186,190 @@\n  @override\n  Rect get paintBounds => Offset.zero & (size * configuration.devicePixelRatio);\n\n  @override"
  },
  {
    "id" : "d2a0bf11-5a55-4ba2-b056-1abe7491ab2a",
    "prId" : 59883,
    "prUrl" : "https://github.com/flutter/flutter/pull/59883#pullrequestreview-441250844",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e02330d7-8e55-4fa9-b78f-5501b893246f",
        "parentId" : null,
        "authorId" : "d61ab95a-0bf0-4571-9098-19991dd821ca",
        "body" : "Why do we still need to have a separate hit testing pass for mouse events? Can that not be integrated with the regular hit testing now as well?",
        "createdAt" : "2020-06-30T22:23:57Z",
        "updatedAt" : "2020-07-06T20:06:33Z",
        "lastEditedBy" : "d61ab95a-0bf0-4571-9098-19991dd821ca",
        "tags" : [
        ]
      },
      {
        "id" : "48ae97f3-4ece-41c5-a106-f8f0a36d0f3f",
        "parentId" : "e02330d7-8e55-4fa9-b78f-5501b893246f",
        "authorId" : "5ad28324-7a27-4eb5-87df-c2d51dd6c21e",
        "body" : "Without mouse,\r\n\r\n* During hover events, no regular hit test is done.\r\n* During down events, a regular hit test is done, so this is an extra pass, but down events happen at such a low frequency that we might not really care.\r\n* During move events, no regular hit test is done (the result of down events is reused).\r\n\r\nConclusion: The only \"extra pass\" is the ones at down events, which do not really matter.",
        "createdAt" : "2020-07-01T22:21:27Z",
        "updatedAt" : "2020-07-06T20:06:33Z",
        "lastEditedBy" : "5ad28324-7a27-4eb5-87df-c2d51dd6c21e",
        "tags" : [
        ]
      },
      {
        "id" : "c79dc782-2695-434e-b3cd-183388ac0bfa",
        "parentId" : "e02330d7-8e55-4fa9-b78f-5501b893246f",
        "authorId" : "d61ab95a-0bf0-4571-9098-19991dd821ca",
        "body" : "I am more concerned about the extra code complexity that we have to deal with because the paths are not unified. ",
        "createdAt" : "2020-07-01T22:48:02Z",
        "updatedAt" : "2020-07-06T20:06:33Z",
        "lastEditedBy" : "d61ab95a-0bf0-4571-9098-19991dd821ca",
        "tags" : [
        ]
      },
      {
        "id" : "d0b8ecf0-626c-4e9c-90e0-a842faa356e2",
        "parentId" : "e02330d7-8e55-4fa9-b78f-5501b893246f",
        "authorId" : "5ad28324-7a27-4eb5-87df-c2d51dd6c21e",
        "body" : "If the mouse device update is triggered by a pointer event, then the code path is indeed more complicated than necessary: \r\n```\r\n\r\nGestureBinding.dispatchEvent -> PointerRouter.route -> MouseTracker._handleEvent -> hit test\r\n```\r\nMaybe we could've done the hit test at `GestureBinding.dispatchEvent` and pass it all the way to `MouseTracker._handleEvent`.\r\n\r\nBut the mouse device update can also be triggered after every frame, during the post-frame callbacks:\r\n```\r\nSchedulerBinding.handleDrawFrame -> MouseTracker._updateAllDevices -> hit test\r\n```\r\nIn this case `MouseTracker` have to initiate a hit test for each device, without the participation of `GestureBinding` at all. \r\n\r\nI'm not saying that a much more unified structure can not be achieved at all, but for now I'd rather touch as few things as possible in order to see the performance impact of the current PR.",
        "createdAt" : "2020-07-01T23:10:40Z",
        "updatedAt" : "2020-07-06T20:06:33Z",
        "lastEditedBy" : "5ad28324-7a27-4eb5-87df-c2d51dd6c21e",
        "tags" : [
        ]
      }
    ],
    "commit" : "1a8ed4afae7a150ba57466a04ad680f20282ebf2",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +200,204 @@  ///    [AnnotatedRegionLayer]s annotated for mouse tracking.\n  Iterable<MouseTrackerAnnotation> hitTestMouseTrackers(Offset position) {\n    // Layer hit testing is done using device pixels, so we have to convert\n    // the logical coordinates of the event location back to device pixels\n    // here."
  }
]