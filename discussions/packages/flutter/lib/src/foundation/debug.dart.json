[
  {
    "id" : "b66073e2-50da-4d56-9c91-7a4bc64b38fb",
    "prId" : 17977,
    "prUrl" : "https://github.com/flutter/flutter/pull/17977#pullrequestreview-124091110",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bd6bf879-af54-4669-8a9c-e9acbe9cf163",
        "parentId" : null,
        "authorId" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "body" : "docs should mention that this runs the code synchronously, since it's not necessarily obvious.",
        "createdAt" : "2018-05-29T17:20:37Z",
        "updatedAt" : "2018-05-29T17:20:37Z",
        "lastEditedBy" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "tags" : [
        ]
      }
    ],
    "commit" : "e671d66080b45a9764036178b40fe6a8978aaa74",
    "line" : 25,
    "diffHunk" : "@@ -1,1 +44,48 @@///\n/// Returns the result of running [action], wrapped in a `Future` if the action\n/// was synchronous.\nFuture<T> debugInstrumentAction<T>(String description, FutureOr<T> action()) {\n  if (!debugInstrumentationEnabled)"
  },
  {
    "id" : "d4cfbd9e-3605-4f7d-ae0f-0ef03cf180b4",
    "prId" : 17977,
    "prUrl" : "https://github.com/flutter/flutter/pull/17977#pullrequestreview-124092299",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cf965bc2-7add-4c72-88c4-6028bdef621d",
        "parentId" : null,
        "authorId" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "body" : "these asserts aren't really saving you much. You're still doing a try/finally block, still comparing the results' types, still creating futures, etc. The overhead saved by not doing the stopwatch part is _de minimis_.\r\n\r\nIf we want to ignore the flag in release builds, use a pattern like:\r\n\r\n```dart\r\n  bool instrument = false;\r\n  assert(() { instrument = debugInstrumentationEnabled; return true; });\r\n  if (instrument) {\r\n    // ...\r\n  } else {\r\n    // ...\r\n  }\r\n```\r\n\r\nThat way the instrumented code will get optimised out entirely in release builds.",
        "createdAt" : "2018-05-29T17:23:40Z",
        "updatedAt" : "2018-05-29T17:23:41Z",
        "lastEditedBy" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "tags" : [
        ]
      }
    ],
    "commit" : "e671d66080b45a9764036178b40fe6a8978aaa74",
    "line" : 31,
    "diffHunk" : "@@ -1,1 +50,54 @@\n  Stopwatch stopwatch;\n  assert(() {\n    stopwatch = new Stopwatch()..start();\n    return true;"
  },
  {
    "id" : "53388b7a-f8ee-4f18-878e-8a6af68766c7",
    "prId" : 17977,
    "prUrl" : "https://github.com/flutter/flutter/pull/17977#pullrequestreview-124092567",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f4e6c967-2344-4906-888c-b2e3f56b774c",
        "parentId" : null,
        "authorId" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "body" : "for everyone's sanity I recommend deciding if action should return a Future or not, and just supporting that option, not both.\r\n\r\nIf you really have to support both, I'd have two different methods rather than shoe-horning it into one.",
        "createdAt" : "2018-05-29T17:24:23Z",
        "updatedAt" : "2018-05-29T17:24:23Z",
        "lastEditedBy" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "tags" : [
        ]
      }
    ],
    "commit" : "e671d66080b45a9764036178b40fe6a8978aaa74",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +45,49 @@/// Returns the result of running [action], wrapped in a `Future` if the action\n/// was synchronous.\nFuture<T> debugInstrumentAction<T>(String description, FutureOr<T> action()) {\n  if (!debugInstrumentationEnabled)\n    return new Future<T>.value(action());"
  },
  {
    "id" : "469be2ee-829d-458e-980c-91932915acc6",
    "prId" : 17977,
    "prUrl" : "https://github.com/flutter/flutter/pull/17977#pullrequestreview-124093188",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b1e65fde-829b-4f97-99a7-89255f587af7",
        "parentId" : null,
        "authorId" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "body" : "Consider also reporting this to the `Timeline`.",
        "createdAt" : "2018-05-29T17:25:43Z",
        "updatedAt" : "2018-05-29T17:25:43Z",
        "lastEditedBy" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "tags" : [
        ]
      },
      {
        "id" : "1bf818b2-7ef0-4c54-9f02-f16153f29a67",
        "parentId" : "b1e65fde-829b-4f97-99a7-89255f587af7",
        "authorId" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "body" : "(If you want to only do that in profile and debug builds, you can use `profile()`.)",
        "createdAt" : "2018-05-29T17:26:00Z",
        "updatedAt" : "2018-05-29T17:26:00Z",
        "lastEditedBy" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "tags" : [
        ]
      }
    ],
    "commit" : "e671d66080b45a9764036178b40fe6a8978aaa74",
    "line" : 56,
    "diffHunk" : "@@ -1,1 +75,79 @@  }\n  return returnResult;\n}\n\n/// Arguments to whitelist [Timeline] events in order to be shown in the"
  }
]