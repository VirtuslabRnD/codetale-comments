[
  {
    "id" : "12e48cc1-059c-420b-98c8-d059ff96b5a1",
    "prId" : 9216,
    "prUrl" : "https://github.com/flutter/flutter/pull/9216#pullrequestreview-31808189",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "631e00fc-8bcf-4981-ac85-100e3697e626",
        "parentId" : null,
        "authorId" : "1dfcfd37-1c96-47ca-8167-0cce6cd12366",
        "body" : "If we had the plugin registry code happen in FlutterActivity's onCreate we could do this automatically for all created FlutterActivities. It would be more robust to developers accidentally deleting the auto-registration code, or the registry API changing and breaking client apps.\r\n\r\nAnother possibility that's maybe better long-term is for the registry to be owned by the FlutterApplication with lifecycle callbacks rather than having registration code happen in Activity onCreate. This is useful for plugins that want to do something when the application is running but has no visible activities (e.g. push messaging). It's fine if this is beyond the scope of what you're trying to do with change, but the nice thing about moving plugin registration out of the client code is that we'd be able to do it invisibly without breaking apps.\r\n\r\n/cc @goderbauer \r\n\r\nThere might be an issue where we can't compile FlutterActivity/FlutterApplication into the Flutter engine because it references a dynamically generated class. One way to resolve this would be to have a generic registry in engine that maintains a Map of class names to registered plugins, and applications that want to call methods of a plugin can call a method on the plugin registry that look up a plugin of a particular class.",
        "createdAt" : "2017-04-05T15:43:27Z",
        "updatedAt" : "2017-04-10T12:12:52Z",
        "lastEditedBy" : "1dfcfd37-1c96-47ca-8167-0cce6cd12366",
        "tags" : [
        ]
      },
      {
        "id" : "5e96c3aa-f88c-48aa-9b82-17f800cb02d3",
        "parentId" : "631e00fc-8bcf-4981-ac85-100e3697e626",
        "authorId" : "dacba9b5-733a-4327-87ba-af0a979de161",
        "body" : "@mravn-google will look into this, see #9215.",
        "createdAt" : "2017-04-10T10:42:03Z",
        "updatedAt" : "2017-04-10T12:12:52Z",
        "lastEditedBy" : "dacba9b5-733a-4327-87ba-af0a979de161",
        "tags" : [
        ]
      }
    ],
    "commit" : "41a6d0ad203970db42321d49ab296c368a4fb795",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +12,16 @@        super.onCreate(savedInstanceState);\n        pluginRegistry = new PluginRegistry();\n        pluginRegistry.registerAll(this);\n    }\n}"
  }
]