[
  {
    "id" : "8fd2248f-51ba-4061-896b-1d133d2dd1f3",
    "prId" : 38632,
    "prUrl" : "https://github.com/flutter/flutter/pull/38632#pullrequestreview-278054143",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "18a3c134-25be-435a-9ee0-fdb8300d11be",
        "parentId" : null,
        "authorId" : "d52883f5-8a4d-4c6e-bdb8-a6bb4b749a07",
        "body" : "Now is  a good opportunity to get rid of this prefix as well if we want to do so, I'm not sure what is it useful for...",
        "createdAt" : "2019-08-20T17:31:08Z",
        "updatedAt" : "2019-08-28T19:42:33Z",
        "lastEditedBy" : "d52883f5-8a4d-4c6e-bdb8-a6bb4b749a07",
        "tags" : [
        ]
      },
      {
        "id" : "324cfc24-2b8a-4ea2-9116-7729eae6f32b",
        "parentId" : "18a3c134-25be-435a-9ee0-fdb8300d11be",
        "authorId" : "a37bcf63-7713-4b5b-8625-f91c635e284e",
        "body" : "We can't AFAICT; see [this comment](https://github.com/flutter/flutter/pull/38632#discussion_r315001504)",
        "createdAt" : "2019-08-20T18:08:35Z",
        "updatedAt" : "2019-08-28T19:42:33Z",
        "lastEditedBy" : "a37bcf63-7713-4b5b-8625-f91c635e284e",
        "tags" : [
        ]
      },
      {
        "id" : "15345a60-c277-4f79-bf92-34af324432b1",
        "parentId" : "18a3c134-25be-435a-9ee0-fdb8300d11be",
        "authorId" : "d52883f5-8a4d-4c6e-bdb8-a6bb4b749a07",
        "body" : "Though we won't be breaking any existing code if we do it right now, we would make the migration that have to happen anyway harder (I'd think not by much).\r\n\r\nOn a related note - Stuart do you think it would be useful to have a (potentially optional) `fileName` parameter here and for macOS?",
        "createdAt" : "2019-08-20T22:38:26Z",
        "updatedAt" : "2019-08-28T19:42:33Z",
        "lastEditedBy" : "d52883f5-8a4d-4c6e-bdb8-a6bb4b749a07",
        "tags" : [
        ]
      },
      {
        "id" : "44c9432e-3e74-4551-b681-689ba6394789",
        "parentId" : "18a3c134-25be-435a-9ee0-fdb8300d11be",
        "authorId" : "a37bcf63-7713-4b5b-8625-f91c635e284e",
        "body" : "> Though we won't be breaking any existing code if we do it right now, we would make the migration that have to happen anyway harder (I'd think not by much).\r\n\r\nI don't follow. If you remove the parameter, then it's impossible to describe existing ObjC plugins using the new format. Are you suggesting we require everyone to rename their source files when migrating?\r\n\r\n> On a related note - Stuart do you think it would be useful to have a (potentially optional) `fileName` parameter here and for macOS?\r\n\r\nIt's not clear to me how replacing `classPrefix` with `fileName` helps; it seems like the net effect is that we are still stuck with an extra parameter that we would rather not have, but with the added downside that migration between old and new formats is less obvious.\r\n\r\nI don't want it for macOS; I can't see any compelling non-legacy reason to support custom filenames for source files when the convention of filename=class name is simple, and widely used in general.",
        "createdAt" : "2019-08-20T23:11:15Z",
        "updatedAt" : "2019-08-28T19:42:33Z",
        "lastEditedBy" : "a37bcf63-7713-4b5b-8625-f91c635e284e",
        "tags" : [
        ]
      },
      {
        "id" : "a543dbb8-dedd-4b04-974d-af03ebbacf77",
        "parentId" : "18a3c134-25be-435a-9ee0-fdb8300d11be",
        "authorId" : "d52883f5-8a4d-4c6e-bdb8-a6bb4b749a07",
        "body" : "> > Though we won't be breaking any existing code if we do it right now, we would make the migration that have to happen anyway harder (I'd think not by much).\r\n> \r\n> I don't follow. If you remove the parameter, then it's impossible to describe existing ObjC plugins using the new format. Are you suggesting we require everyone to rename their source files when migrating?\r\n\r\nYes.\r\n\r\n> \r\n> > On a related note - Stuart do you think it would be useful to have a (potentially optional) `fileName` parameter here and for macOS?\r\n> \r\n> It's not clear to me how replacing `classPrefix` with `fileName` helps; it seems like the net effect is that we are still stuck with an extra parameter that we would rather not have, but with the added downside that migration between old and new formats is less obvious.\r\n> \r\n> I don't want it for macOS; I can't see any compelling non-legacy reason to support custom filenames for source files when the convention of filename=class name is simple, and widely used in general.\r\n\r\nMakes sense, I didn't have a preference here, just wanted to check because if we would want to eventually support that we should not introduce extra migration pain right now.\r\n",
        "createdAt" : "2019-08-20T23:20:35Z",
        "updatedAt" : "2019-08-28T19:42:33Z",
        "lastEditedBy" : "d52883f5-8a4d-4c6e-bdb8-a6bb4b749a07",
        "tags" : [
        ]
      },
      {
        "id" : "83833836-b2dd-4df8-9382-febbd0f743b7",
        "parentId" : "18a3c134-25be-435a-9ee0-fdb8300d11be",
        "authorId" : "a37bcf63-7713-4b5b-8625-f91c635e284e",
        "body" : "If you're okay with including a file rename step in the migration for most existing plugins, then I would agree with removing classPrefix. (The plugin template for language=objc would need to be updated accordingly.) That would need to be prominently documented somewhere.",
        "createdAt" : "2019-08-20T23:31:15Z",
        "updatedAt" : "2019-08-28T19:42:33Z",
        "lastEditedBy" : "a37bcf63-7713-4b5b-8625-f91c635e284e",
        "tags" : [
        ]
      },
      {
        "id" : "53963732-d16f-4aba-a347-4544a1619d82",
        "parentId" : "18a3c134-25be-435a-9ee0-fdb8300d11be",
        "authorId" : "d52883f5-8a4d-4c6e-bdb8-a6bb4b749a07",
        "body" : "Let's start without `classPrefix`, when this PR makes it to stable we essentially start a \"soft migration\" period (as we still support the old schema). If we learn that the migration is too painful we could later add `classPrefix` (it shouldn't be breaking for plugins that already migrated without `classPrefix`).\r\n\r\nWe will definitely need documentation and announcements around this migration.",
        "createdAt" : "2019-08-21T20:19:40Z",
        "updatedAt" : "2019-08-28T19:42:33Z",
        "lastEditedBy" : "d52883f5-8a4d-4c6e-bdb8-a6bb4b749a07",
        "tags" : [
        ]
      },
      {
        "id" : "32f17e11-d6ce-4b0a-a15b-1d308117b49c",
        "parentId" : "18a3c134-25be-435a-9ee0-fdb8300d11be",
        "authorId" : "a37bcf63-7713-4b5b-8625-f91c635e284e",
        "body" : "> Let's start without `classPrefix`\r\n\r\nThen we'll need to change the `objc` plugin template (even though it's no longer the default, it can still be selected) to create the files with the prefixes included in the same PR that changes the `pubspec.yaml` in the template. (Which doesn't need to be this PR, but if it's not going to be, then let's get an issue tracking that so it doesn't get forgotten.)",
        "createdAt" : "2019-08-21T20:29:23Z",
        "updatedAt" : "2019-08-28T19:42:33Z",
        "lastEditedBy" : "a37bcf63-7713-4b5b-8625-f91c635e284e",
        "tags" : [
        ]
      }
    ],
    "commit" : "3de247d8d8f7ba858bd5b7b15f7886954fc6afc2",
    "line" : 98,
    "diffHunk" : "@@ -1,1 +96,100 @@    return <String, dynamic>{\n      'name': name,\n      'prefix': classPrefix,\n      'class': pluginClass,\n    };"
  },
  {
    "id" : "66225cda-6b28-4b94-a67f-2545a80a6277",
    "prId" : 41666,
    "prUrl" : "https://github.com/flutter/flutter/pull/41666#pullrequestreview-296621950",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "04722a7f-cfe3-40ee-9dee-331b25316b4f",
        "parentId" : null,
        "authorId" : "d6f7761b-a6b2-4acf-aad8-3e23f36d584d",
        "body" : "Is this path synthesizable from `package` and `pluginClass`? If so, it might be a good idea to define a synthetic `get` method at the appropriate place. Otherwise it is technically possible that the path disagrees with the package and class.",
        "createdAt" : "2019-10-02T22:53:19Z",
        "updatedAt" : "2019-10-04T02:11:31Z",
        "lastEditedBy" : "d6f7761b-a6b2-4acf-aad8-3e23f36d584d",
        "tags" : [
        ]
      },
      {
        "id" : "5d78e8c3-42c2-49e0-acf7-21afc0f99a65",
        "parentId" : "04722a7f-cfe3-40ee-9dee-331b25316b4f",
        "authorId" : "26bed5e6-ee43-49f6-93fd-a565b3ee8889",
        "body" : "I documented this property in `AndroidPlugin`.  This is the plugin's absolute path within the pub cache.",
        "createdAt" : "2019-10-03T03:00:41Z",
        "updatedAt" : "2019-10-04T02:11:31Z",
        "lastEditedBy" : "26bed5e6-ee43-49f6-93fd-a565b3ee8889",
        "tags" : [
        ]
      }
    ],
    "commit" : "23859eab7d54c7845f8e8e6aeb2f56a9615aa4cc",
    "line" : 30,
    "diffHunk" : "@@ -1,1 +35,39 @@      package: yaml['package'],\n      pluginClass: yaml['pluginClass'],\n      pluginPath: pluginPath,\n    );\n  }"
  },
  {
    "id" : "1e63033f-d61a-4ae8-8bf2-78281ebe5c20",
    "prId" : 44214,
    "prUrl" : "https://github.com/flutter/flutter/pull/44214#pullrequestreview-312070650",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a7ec4335-257c-4b40-bf9b-3f6599db0551",
        "parentId" : null,
        "authorId" : "291e083f-dfb6-49b2-b8f5-2f0ce7f9b936",
        "body" : "ohhhh I like this, nice",
        "createdAt" : "2019-11-05T21:56:55Z",
        "updatedAt" : "2019-11-06T21:09:54Z",
        "lastEditedBy" : "291e083f-dfb6-49b2-b8f5-2f0ce7f9b936",
        "tags" : [
        ]
      }
    ],
    "commit" : "b00e134d4476938441f3a6474541fe417f9b344c",
    "line" : 35,
    "diffHunk" : "@@ -1,1 +121,125 @@      supportedEmbeddings.add('1');\n    }\n    if (mainClassContent.contains('PluginRegistry')\n        && mainClassContent.contains('registerWith')) {\n      supportedEmbeddings.add('1');"
  },
  {
    "id" : "081fb68d-d793-4a27-af3a-037501a9f6ce",
    "prId" : 48104,
    "prUrl" : "https://github.com/flutter/flutter/pull/48104#pullrequestreview-338270513",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8b85e30a-f445-40c8-b647-e4fcc4d94896",
        "parentId" : null,
        "authorId" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "body" : "assert `mainClassCandidates.length <= 2`",
        "createdAt" : "2020-01-03T09:36:09Z",
        "updatedAt" : "2020-01-09T23:51:13Z",
        "lastEditedBy" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "tags" : [
        ]
      },
      {
        "id" : "7d5118e6-c902-461f-b267-a61114c0bbe1",
        "parentId" : "8b85e30a-f445-40c8-b647-e4fcc4d94896",
        "authorId" : "26bed5e6-ee43-49f6-93fd-a565b3ee8889",
        "body" : "ðŸ‘done",
        "createdAt" : "2020-01-03T20:53:56Z",
        "updatedAt" : "2020-01-09T23:51:13Z",
        "lastEditedBy" : "26bed5e6-ee43-49f6-93fd-a565b3ee8889",
        "tags" : [
        ]
      }
    ],
    "commit" : "2cc3f312121749682d05f100bf74492e5dd7f211",
    "line" : 43,
    "diffHunk" : "@@ -1,1 +113,117 @@    if (!mainClassFound) {\n      assert(mainClassCandidates.length <= 2);\n      throwToolExit(\n        'The plugin `$name` doesn\\'t have a main class defined in ${mainClassCandidates.join(' or ')}. '\n        'This is likely to due to an incorrect `androidPackage: $package` or `mainClass` entry in the plugin\\'s pubspec.yaml.\\n'"
  },
  {
    "id" : "1ebf3bba-9ece-428d-8cef-966d04d75c11",
    "prId" : 48104,
    "prUrl" : "https://github.com/flutter/flutter/pull/48104#pullrequestreview-338270374",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "aa9e95d4-4dd9-457a-84c4-137795c244f7",
        "parentId" : null,
        "authorId" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "body" : "looks like this isn't tested",
        "createdAt" : "2020-01-03T09:38:15Z",
        "updatedAt" : "2020-01-09T23:51:13Z",
        "lastEditedBy" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "tags" : [
        ]
      },
      {
        "id" : "5d18acb8-685b-4961-843e-be06d8035493",
        "parentId" : "aa9e95d4-4dd9-457a-84c4-137795c244f7",
        "authorId" : "26bed5e6-ee43-49f6-93fd-a565b3ee8889",
        "body" : "done :)",
        "createdAt" : "2020-01-03T20:53:28Z",
        "updatedAt" : "2020-01-09T23:51:13Z",
        "lastEditedBy" : "26bed5e6-ee43-49f6-93fd-a565b3ee8889",
        "tags" : [
        ]
      }
    ],
    "commit" : "2cc3f312121749682d05f100bf74492e5dd7f211",
    "line" : 58,
    "diffHunk" : "@@ -1,1 +126,130 @@    } on FileSystemException {\n      throwToolExit(\n        'Couldn\\'t read file ${mainPluginClass.path} even though it exists. '\n        'Please verify that this file has read permission and try again.'\n      );"
  }
]