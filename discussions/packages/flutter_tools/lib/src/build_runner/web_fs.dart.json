[
  {
    "id" : "ce518c86-9d0f-420a-b28d-c07d83cc1cd3",
    "prId" : 39189,
    "prUrl" : "https://github.com/flutter/flutter/pull/39189#pullrequestreview-280557051",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c5635c0a-d433-4814-ae64-c8d931b77f3c",
        "parentId" : null,
        "authorId" : "8e61038c-e0e3-49db-a5f4-64b67a3393e5",
        "body" : "Instead of making `_assetHandler` return a function, have you considered passing a closure here?\r\n```dart\r\ncascade = cascade.add((Request request) => _assetHandler(request, flutterProject));\r\n```\r\nand then, `_assetHandler` could look like this:\r\n```dart\r\nstatic Future<Response> _assetHandler(Request request, FlutterProject flutterProject) {\r\n  if (request.url.path.contains('stack_trace_mapper')) {\r\n    // ...\r\n  }\r\n  // ...\r\n}\r\n```",
        "createdAt" : "2019-08-27T23:11:00Z",
        "updatedAt" : "2019-08-27T23:11:51Z",
        "lastEditedBy" : "8e61038c-e0e3-49db-a5f4-64b67a3393e5",
        "tags" : [
        ]
      },
      {
        "id" : "cfe26301-482c-4082-8e38-3e61bd266c9e",
        "parentId" : "c5635c0a-d433-4814-ae64-c8d931b77f3c",
        "authorId" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "body" : "I thought about it, but then I ended up doing more filesystem operations overall.",
        "createdAt" : "2019-08-28T02:07:34Z",
        "updatedAt" : "2019-08-28T02:07:34Z",
        "lastEditedBy" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "tags" : [
        ]
      }
    ],
    "commit" : "6d56c4daf5d961df1cf8919982db3021af21f066",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +211,215 @@    Cascade cascade = Cascade();\n    cascade = cascade.add(handler);\n    cascade = cascade.add(_assetHandler(flutterProject));\n    final HttpServer server = await httpMultiServerFactory(_kHostName, port);\n    shelf_io.serveRequests(server, cascade.handler);"
  },
  {
    "id" : "5de035cb-b2fb-44c2-b4f0-5d246fd7a626",
    "prId" : 39558,
    "prUrl" : "https://github.com/flutter/flutter/pull/39558#pullrequestreview-283220581",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "79894e47-11ca-4311-83cc-c69abda1534a",
        "parentId" : null,
        "authorId" : "73331f56-e4bc-4bcf-b2d6-8bec206f8b87",
        "body" : "This is coming from the dart VM. It wouldn't happen if the entrypoint wasn't under `lib/`.\r\n\r\nWe might want to file a request to allow us to silence this or something.",
        "createdAt" : "2019-09-03T19:45:32Z",
        "updatedAt" : "2019-09-03T19:45:55Z",
        "lastEditedBy" : "73331f56-e4bc-4bcf-b2d6-8bec206f8b87",
        "tags" : [
        ]
      }
    ],
    "commit" : "486db0eee1217a80e47ad888ea64b34666d554e9",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +299,303 @@\n  // TODO(jonahwilliams): find a way to get build checks working for flutter for web.\n  static const String _ignoredLine1 = 'Warning: Interpreting this as package URI';\n  static const String _ignoredLine2 = 'build_script.dart was not found in the asset graph, incremental builds will not work';\n  static const String _ignoredLine3 = 'have your dependencies specified fully in your pubspec.yaml';"
  },
  {
    "id" : "06b0dbfe-6d3f-40c3-9151-b8b7afe15581",
    "prId" : 39558,
    "prUrl" : "https://github.com/flutter/flutter/pull/39558#pullrequestreview-283222523",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a607cd5d-ee76-4b6f-9588-afd1f0cc1c37",
        "parentId" : null,
        "authorId" : "73331f56-e4bc-4bcf-b2d6-8bec206f8b87",
        "body" : "cc @jakemac53 - I wonder if we should suppress this line ourselves if the `--skip-build-script-check` flag is used?",
        "createdAt" : "2019-09-03T19:45:52Z",
        "updatedAt" : "2019-09-03T19:45:55Z",
        "lastEditedBy" : "73331f56-e4bc-4bcf-b2d6-8bec206f8b87",
        "tags" : [
        ]
      },
      {
        "id" : "c5ef0e1a-c612-4833-b34f-2cbd2b25c792",
        "parentId" : "a607cd5d-ee76-4b6f-9588-afd1f0cc1c37",
        "authorId" : "1e73ec3f-3dcd-4cbc-b476-0d1c629cd277",
        "body" : "Ya, that seems like it would make sense.",
        "createdAt" : "2019-09-03T19:49:33Z",
        "updatedAt" : "2019-09-03T19:49:34Z",
        "lastEditedBy" : "1e73ec3f-3dcd-4cbc-b476-0d1c629cd277",
        "tags" : [
        ]
      }
    ],
    "commit" : "486db0eee1217a80e47ad888ea64b34666d554e9",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +300,304 @@  // TODO(jonahwilliams): find a way to get build checks working for flutter for web.\n  static const String _ignoredLine1 = 'Warning: Interpreting this as package URI';\n  static const String _ignoredLine2 = 'build_script.dart was not found in the asset graph, incremental builds will not work';\n  static const String _ignoredLine3 = 'have your dependencies specified fully in your pubspec.yaml';\n"
  },
  {
    "id" : "46e2b6a2-c3e5-432e-8968-e42f3e8e7cfe",
    "prId" : 39558,
    "prUrl" : "https://github.com/flutter/flutter/pull/39558#pullrequestreview-283223616",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "031d8a09-9995-4fd7-b63f-07906523c56f",
        "parentId" : null,
        "authorId" : "1e73ec3f-3dcd-4cbc-b476-0d1c629cd277",
        "body" : "I thought this was a non-goal? Given that it is shipped with the sdk and we invalidate the build if the SDK version changes.",
        "createdAt" : "2019-09-03T19:51:53Z",
        "updatedAt" : "2019-09-03T19:51:53Z",
        "lastEditedBy" : "1e73ec3f-3dcd-4cbc-b476-0d1c629cd277",
        "tags" : [
        ]
      }
    ],
    "commit" : "486db0eee1217a80e47ad888ea64b34666d554e9",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +298,302 @@  const BuildDaemonCreator();\n\n  // TODO(jonahwilliams): find a way to get build checks working for flutter for web.\n  static const String _ignoredLine1 = 'Warning: Interpreting this as package URI';\n  static const String _ignoredLine2 = 'build_script.dart was not found in the asset graph, incremental builds will not work';"
  },
  {
    "id" : "a44ea65f-5ebc-48dc-8213-04be5bfe8b82",
    "prId" : 39628,
    "prUrl" : "https://github.com/flutter/flutter/pull/39628#pullrequestreview-282321202",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7c6b5ff5-56b6-4991-b5ae-64329a7e5cac",
        "parentId" : null,
        "authorId" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "body" : "D'oh",
        "createdAt" : "2019-08-31T22:06:48Z",
        "updatedAt" : "2019-09-03T00:38:46Z",
        "lastEditedBy" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "tags" : [
        ]
      }
    ],
    "commit" : "198d50998daad9de66daadbfeb04d759530dbcc8",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +41,45 @@\n/// A factory for creating a [Dwds] instance.\nDwdsFactory get dwdsFactory => context.get<DwdsFactory>() ?? Dwds.start;\n\n/// The [BuildDaemonCreator] instance."
  },
  {
    "id" : "d329fbe0-d824-4035-bb1e-a3dafd37491a",
    "prId" : 39752,
    "prUrl" : "https://github.com/flutter/flutter/pull/39752#pullrequestreview-283112250",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "856fe38d-498f-4249-9654-d28156de37ae",
        "parentId" : null,
        "authorId" : "0fc1222a-8e68-4923-bf2e-18203f0657f2",
        "body" : "Perhaps reference the relevant bug?",
        "createdAt" : "2019-09-03T16:16:43Z",
        "updatedAt" : "2019-09-03T16:20:29Z",
        "lastEditedBy" : "0fc1222a-8e68-4923-bf2e-18203f0657f2",
        "tags" : [
        ]
      },
      {
        "id" : "044da718-bf3f-4c69-abaf-a37a87f936d1",
        "parentId" : "856fe38d-498f-4249-9654-d28156de37ae",
        "authorId" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "body" : "Done",
        "createdAt" : "2019-09-03T16:20:33Z",
        "updatedAt" : "2019-09-03T16:20:34Z",
        "lastEditedBy" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "tags" : [
        ]
      }
    ],
    "commit" : "f3df0c86769f4edcccbbf3f48f955455327bc135",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +120,124 @@  /// Recompile the web application and return whether this was successful.\n  Future<bool> recompile() async {\n    // TODO(jonahwilliams): build_daemon is still watching for sources, which means we can\n    // easily miss changes when hot restart is triggered by IDEs. Until we fix this, add a\n    // delay to allow filesystem watches to gather all required source files. This duration"
  },
  {
    "id" : "59b01fcb-8ba1-45b9-9aec-847b1574f76d",
    "prId" : 39774,
    "prUrl" : "https://github.com/flutter/flutter/pull/39774#pullrequestreview-283249460",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7bfb77d1-06e8-4165-8567-604b9b91e520",
        "parentId" : null,
        "authorId" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "body" : "Oops, this isn't correct for windows",
        "createdAt" : "2019-09-03T20:37:21Z",
        "updatedAt" : "2019-09-03T20:42:30Z",
        "lastEditedBy" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "tags" : [
        ]
      },
      {
        "id" : "204fe172-9eea-4deb-9f4f-5d3de5f30a09",
        "parentId" : "7bfb77d1-06e8-4165-8567-604b9b91e520",
        "authorId" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "body" : "Fixed",
        "createdAt" : "2019-09-03T20:42:36Z",
        "updatedAt" : "2019-09-03T20:42:36Z",
        "lastEditedBy" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "tags" : [
        ]
      }
    ],
    "commit" : "d15bbb176421510d185b52fec2c08d7c657793d4",
    "line" : 29,
    "diffHunk" : "@@ -1,1 +289,293 @@\n        // Handle sdk requests that have mangled urls from engine build.\n        if (request.url.path.contains('flutter_web_sdk')) {\n          // Note: the request is a uri and not a file path, so they always use `/`.\n          final String sdkPath = fs.path.joinAll(request.url.path.split('flutter_web_sdk/').last.split('/'));"
  },
  {
    "id" : "784de6a9-1952-461c-b6a5-0b92177cbc16",
    "prId" : 39776,
    "prUrl" : "https://github.com/flutter/flutter/pull/39776#pullrequestreview-284963116",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "13c4cd6a-6858-42e4-97cd-58ebf9f7b810",
        "parentId" : null,
        "authorId" : "5acfd23a-9807-467c-8f5c-9b4c4052927b",
        "body" : "nit: async not needed.",
        "createdAt" : "2019-09-06T15:49:32Z",
        "updatedAt" : "2019-09-06T15:49:32Z",
        "lastEditedBy" : "5acfd23a-9807-467c-8f5c-9b4c4052927b",
        "tags" : [
        ]
      },
      {
        "id" : "43367caf-6bfe-4361-a2f7-3dea8efbe901",
        "parentId" : "13c4cd6a-6858-42e4-97cd-58ebf9f7b810",
        "authorId" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "body" : "I'll remove in https://github.com/flutter/flutter/pull/39951",
        "createdAt" : "2019-09-06T16:13:43Z",
        "updatedAt" : "2019-09-06T16:13:43Z",
        "lastEditedBy" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "tags" : [
        ]
      }
    ],
    "commit" : "d4078e5a3365fd91ef77dfc622c8c3edbc60c414",
    "line" : 16,
    "diffHunk" : "@@ -1,1 +104,108 @@\n  /// Retrieve the [DebugConnection] for the current application.\n  Future<DebugConnection> runAndDebug() async {\n    final Completer<DebugConnection> firstConnection = Completer<DebugConnection>();\n    _connectedApps =  _dwds.connectedApps.listen((AppConnection appConnection) async {"
  },
  {
    "id" : "351ee9f3-9b1e-45d2-8bff-cb6c1519dc81",
    "prId" : 39951,
    "prUrl" : "https://github.com/flutter/flutter/pull/39951#pullrequestreview-286489021",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1268c78d-6cee-4570-a933-9d4a66234c4c",
        "parentId" : null,
        "authorId" : "ac2c92fd-803c-4666-96b1-db1044c762c5",
        "body" : "Should we do `if (file.existsSync())` instead of a catch-all? We probably don't want to lose exception information for things we do not expect to happen.",
        "createdAt" : "2019-09-10T23:27:27Z",
        "updatedAt" : "2019-09-10T23:33:41Z",
        "lastEditedBy" : "ac2c92fd-803c-4666-96b1-db1044c762c5",
        "tags" : [
        ]
      },
      {
        "id" : "d5f864bf-c5a9-44c3-b014-b83972c0f78d",
        "parentId" : "1268c78d-6cee-4570-a933-9d4a66234c4c",
        "authorId" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "body" : "Right! we can check for files before we read them ... I forgot that. Fixed",
        "createdAt" : "2019-09-10T23:33:58Z",
        "updatedAt" : "2019-09-10T23:33:58Z",
        "lastEditedBy" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "tags" : [
        ]
      }
    ],
    "commit" : "d1f696ad81ffe233edfd7d46d8db4b3fbeb34f75",
    "line" : 163,
    "diffHunk" : "@@ -1,1 +319,323 @@          return Response.ok(file.readAsBytesSync());\n        } else {\n          return Response.notFound('');\n        }\n      }"
  },
  {
    "id" : "48f0eaa6-e4e4-4e80-899c-e0897d4218ef",
    "prId" : 41386,
    "prUrl" : "https://github.com/flutter/flutter/pull/41386#pullrequestreview-293884009",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c8780c7f-af4e-4b04-ba14-42d6cbf79fd8",
        "parentId" : null,
        "authorId" : "ac2c92fd-803c-4666-96b1-db1044c762c5",
        "body" : "Should we place some basic protection in place for preventing serving files outside the project directory? Unless `resolveUri` already does it, of course.",
        "createdAt" : "2019-09-26T17:03:48Z",
        "updatedAt" : "2019-09-26T17:14:07Z",
        "lastEditedBy" : "ac2c92fd-803c-4666-96b1-db1044c762c5",
        "tags" : [
        ]
      },
      {
        "id" : "c1450061-94bc-4f87-8c3b-c79a8a51311d",
        "parentId" : "c8780c7f-af4e-4b04-ba14-42d6cbf79fd8",
        "authorId" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "body" : "You cannot send a relative uri so this should not be a problem regardless",
        "createdAt" : "2019-09-26T17:26:53Z",
        "updatedAt" : "2019-09-26T17:26:54Z",
        "lastEditedBy" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "tags" : [
        ]
      }
    ],
    "commit" : "45f16152569fb9aa630c6cd142f73366e75c7a98",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +267,271 @@  Future<Response> handle(Request request) async {\n    if (request.url.path.endsWith('.html')) {\n      final Uri htmlUri = flutterProject.web.directory.uri.resolveUri(request.url);\n      final File htmlFile = fs.file(htmlUri);\n      if (htmlFile.existsSync()) {"
  },
  {
    "id" : "3caaef2e-8f59-43bc-81ba-f68d409444c8",
    "prId" : 41386,
    "prUrl" : "https://github.com/flutter/flutter/pull/41386#pullrequestreview-293885592",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9ff22b72-d0f5-4cac-8b36-90952d0b9778",
        "parentId" : null,
        "authorId" : "ca9efae2-2bf8-426e-9b8e-d11f86f60cb9",
        "body" : "This is a complicated file handler.\r\n\r\nShelf also has static handlers that can serve all files out of a directory, which might make this logic a little simpler.",
        "createdAt" : "2019-09-26T17:22:19Z",
        "updatedAt" : "2019-09-26T17:22:54Z",
        "lastEditedBy" : "ca9efae2-2bf8-426e-9b8e-d11f86f60cb9",
        "tags" : [
        ]
      },
      {
        "id" : "347e5360-1b83-4bd8-95cb-156605a85da3",
        "parentId" : "9ff22b72-d0f5-4cac-8b36-90952d0b9778",
        "authorId" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "body" : "Agreed, but as a long term goal I would like to remove our `shelf` dependency",
        "createdAt" : "2019-09-26T17:29:34Z",
        "updatedAt" : "2019-09-26T17:29:34Z",
        "lastEditedBy" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "tags" : [
        ]
      }
    ],
    "commit" : "45f16152569fb9aa630c6cd142f73366e75c7a98",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +266,270 @@\n  Future<Response> handle(Request request) async {\n    if (request.url.path.endsWith('.html')) {\n      final Uri htmlUri = flutterProject.web.directory.uri.resolveUri(request.url);\n      final File htmlFile = fs.file(htmlUri);"
  },
  {
    "id" : "073253da-8caf-4d70-bc7f-1ca15f97a97e",
    "prId" : 41447,
    "prUrl" : "https://github.com/flutter/flutter/pull/41447#pullrequestreview-295274015",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1ddf3dc9-d4b6-4019-815a-54c6988771fb",
        "parentId" : null,
        "authorId" : "ac2c92fd-803c-4666-96b1-db1044c762c5",
        "body" : "Is there a difference between \"first\" and \"initial\" builds?",
        "createdAt" : "2019-09-30T19:27:33Z",
        "updatedAt" : "2019-09-30T23:03:30Z",
        "lastEditedBy" : "ac2c92fd-803c-4666-96b1-db1044c762c5",
        "tags" : [
        ]
      },
      {
        "id" : "ea67efb7-e979-4237-8e23-7623783970d6",
        "parentId" : "1ddf3dc9-d4b6-4019-815a-54c6988771fb",
        "authorId" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "body" : "Fixed the names so that it is clear they are related",
        "createdAt" : "2019-09-30T21:56:15Z",
        "updatedAt" : "2019-09-30T23:03:30Z",
        "lastEditedBy" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "tags" : [
        ]
      }
    ],
    "commit" : "81ea4b5b996eb84382c9fe947ba2c8dfce357afa",
    "line" : 145,
    "diffHunk" : "@@ -1,1 +244,248 @@        });\n      // Start the build daemon and run an initial build.\n      firstBuild = client.buildResults.listen((BuildResults buildResults) {\n        if (firstBuildCompleter.isCompleted) {\n          return;"
  },
  {
    "id" : "debefa45-59db-4324-8532-2c2d2b38897b",
    "prId" : 42701,
    "prUrl" : "https://github.com/flutter/flutter/pull/42701#pullrequestreview-302135542",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ef9966bf-11bc-40c7-9603-e61a5df2f2dc",
        "parentId" : null,
        "authorId" : "8e61038c-e0e3-49db-a5f4-64b67a3393e5",
        "body" : "The argument seems to be expecting only the header bytes but we are sending the whole file. Is that not an issue?",
        "createdAt" : "2019-10-15T19:07:36Z",
        "updatedAt" : "2019-10-15T19:12:52Z",
        "lastEditedBy" : "8e61038c-e0e3-49db-a5f4-64b67a3393e5",
        "tags" : [
        ]
      },
      {
        "id" : "7e7e04b8-0621-464c-90bf-d5aae8b7fa33",
        "parentId" : "ef9966bf-11bc-40c7-9603-e61a5df2f2dc",
        "authorId" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "body" : "We're already reading the bytes so I was going to reuse the same buffer",
        "createdAt" : "2019-10-15T19:12:32Z",
        "updatedAt" : "2019-10-15T19:12:52Z",
        "lastEditedBy" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "tags" : [
        ]
      }
    ],
    "commit" : "08c506ecbc801d347113abc84f06f967dfe7fb9e",
    "line" : 24,
    "diffHunk" : "@@ -1,1 +507,511 @@        // Fallback to \"application/octet-stream\" on null which\n        // makes no claims as to the structure of the data.\n        final String mimeType = mime.lookupMimeType(file.path, headerBytes: bytes)\n          ?? 'application/octet-stream';\n        return Response.ok(bytes, headers: <String, String>{"
  }
]