[
  {
    "id" : "8aa2d19f-3511-4561-b00d-49a9b09abb81",
    "prId" : 61003,
    "prUrl" : "https://github.com/flutter/flutter/pull/61003#pullrequestreview-444316855",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bfb5126c-fef5-4c22-92df-5d5adcf77d9a",
        "parentId" : null,
        "authorId" : "7ae842f7-1029-4528-8bf6-8472584744ed",
        "body" : "can this be `testWithoutContext()`?",
        "createdAt" : "2020-07-07T23:28:04Z",
        "updatedAt" : "2020-07-07T23:28:04Z",
        "lastEditedBy" : "7ae842f7-1029-4528-8bf6-8472584744ed",
        "tags" : [
        ]
      },
      {
        "id" : "07e8d47c-a1f9-4b90-b45a-60891b28dbbf",
        "parentId" : "bfb5126c-fef5-4c22-92df-5d5adcf77d9a",
        "authorId" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "body" : "All of the createTestCommandRunner tests hit the context due to FlutterCommand. I started refactoring things out, but I got stuck on output preferences and rolled it back a while ago",
        "createdAt" : "2020-07-07T23:29:31Z",
        "updatedAt" : "2020-07-07T23:29:31Z",
        "lastEditedBy" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "tags" : [
        ]
      }
    ],
    "commit" : "e03925b0e5b66d28a5ce58a996c4a361886d65c3",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +38,42 @@  });\n\n  testUsingContext('precache should acquire lock', () async {\n    final Platform platform = FakePlatform(environment: <String, String>{});\n    final PrecacheCommand command = PrecacheCommand("
  },
  {
    "id" : "4fc264c8-ba2d-4e30-848e-ef448b8da608",
    "prId" : 81475,
    "prUrl" : "https://github.com/flutter/flutter/pull/81475#pullrequestreview-649416673",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5547a8b7-f1b8-4a3f-8660-21f7908ac49d",
        "parentId" : null,
        "authorId" : "7ae842f7-1029-4528-8bf6-8472584744ed",
        "body" : "I'm just curious, does this command not release the lock before exiting?",
        "createdAt" : "2021-04-30T16:40:34Z",
        "updatedAt" : "2021-04-30T17:07:11Z",
        "lastEditedBy" : "7ae842f7-1029-4528-8bf6-8472584744ed",
        "tags" : [
        ]
      },
      {
        "id" : "b5a4d2dd-f388-4b48-99a5-cf08692c6315",
        "parentId" : "5547a8b7-f1b8-4a3f-8660-21f7908ac49d",
        "authorId" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "body" : "It does - this test is just asserting that the command locked it at the start",
        "createdAt" : "2021-04-30T16:42:52Z",
        "updatedAt" : "2021-04-30T17:07:11Z",
        "lastEditedBy" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "tags" : [
        ]
      },
      {
        "id" : "9d374dad-3939-4ff5-84a2-293de59a94fc",
        "parentId" : "5547a8b7-f1b8-4a3f-8660-21f7908ac49d",
        "authorId" : "7ae842f7-1029-4528-8bf6-8472584744ed",
        "body" : "Does `await`-ing `runner.run()` not block until the command exits?",
        "createdAt" : "2021-04-30T16:51:37Z",
        "updatedAt" : "2021-04-30T17:07:11Z",
        "lastEditedBy" : "7ae842f7-1029-4528-8bf6-8472584744ed",
        "tags" : [
        ]
      },
      {
        "id" : "8bb14937-c382-4436-b3f0-b30d1f24355b",
        "parentId" : "5547a8b7-f1b8-4a3f-8660-21f7908ac49d",
        "authorId" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "body" : "the command never exits in the test scripts",
        "createdAt" : "2021-04-30T16:56:52Z",
        "updatedAt" : "2021-04-30T17:07:11Z",
        "lastEditedBy" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "tags" : [
        ]
      },
      {
        "id" : "daa036c1-f6e9-4289-a1cf-65b5f68851aa",
        "parentId" : "5547a8b7-f1b8-4a3f-8660-21f7908ac49d",
        "authorId" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "body" : "but the cache should be unlocked - I will update the expectation so that is clear",
        "createdAt" : "2021-04-30T16:57:15Z",
        "updatedAt" : "2021-04-30T17:07:11Z",
        "lastEditedBy" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "tags" : [
        ]
      },
      {
        "id" : "688ef8d4-fcbd-4411-bdc8-3bff230e2781",
        "parentId" : "5547a8b7-f1b8-4a3f-8660-21f7908ac49d",
        "authorId" : "7ae842f7-1029-4528-8bf6-8472584744ed",
        "body" : "TIL",
        "createdAt" : "2021-04-30T17:02:51Z",
        "updatedAt" : "2021-04-30T17:07:11Z",
        "lastEditedBy" : "7ae842f7-1029-4528-8bf6-8472584744ed",
        "tags" : [
        ]
      },
      {
        "id" : "0abd4384-237a-448d-8160-f41f05dff0a1",
        "parentId" : "5547a8b7-f1b8-4a3f-8660-21f7908ac49d",
        "authorId" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "body" : "ahh, actually no - the command acquires the lock but the release is managed by the runner elsewhere during shutdown or Cache.releaseLockEarly",
        "createdAt" : "2021-04-30T17:06:11Z",
        "updatedAt" : "2021-04-30T17:07:14Z",
        "lastEditedBy" : "e73873df-c6ef-4dd5-ad17-dc7a574dcf0b",
        "tags" : [
        ]
      }
    ],
    "commit" : "d89f2f052da34fa3379d69cf95cb4bfd421e1157",
    "line" : 38,
    "diffHunk" : "@@ -1,1 +34,38 @@    await createTestCommandRunner(command).run(const <String>['precache']);\n\n    expect(cache.locked, true);\n  });\n"
  }
]