[
  {
    "id" : "082f941a-51f8-439d-bd2f-e747c20c90ea",
    "prId" : 39338,
    "prUrl" : "https://github.com/flutter/flutter/pull/39338#pullrequestreview-280422219",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "14fe68b5-0111-4e55-98f9-345ec76e439b",
        "parentId" : null,
        "authorId" : "db47316c-0a85-441a-8891-3b84e8bfe474",
        "body" : "Two concerns:\r\n\r\n1. If the tester crashes somewhere in here, we're leaving garbage behind on the user's FS. but it should get regenerated right?\r\n2. If the user decides to delete their snapshot between 1178 and this line for some random reason, this will throw an exception. I would see this happening if I did `flutter test`, realized I had changes in the tool I hadn't rebuilt, and did my own little `rm-fluttertool` script that removes this. Probably not very common but can we guard against it?\r\n\r\nAlternatively, could we solve both these concerns by telling the tester to always look at a specific snapshot file we create and do our best to clean up?",
        "createdAt" : "2019-08-27T18:24:58Z",
        "updatedAt" : "2019-08-27T18:24:58Z",
        "lastEditedBy" : "db47316c-0a85-441a-8891-3b84e8bfe474",
        "tags" : [
        ]
      },
      {
        "id" : "72aaefe4-1219-4a46-b823-662c64b4f979",
        "parentId" : "14fe68b5-0111-4e55-98f9-345ec76e439b",
        "authorId" : "5acfd23a-9807-467c-8f5c-9b4c4052927b",
        "body" : "(1): The cleanup happens in a `tearDownAll()`, which is probably the best we can do when using `package:test`. the `tearDownAll()` callback will only fail to run if the Dart VM crashes.\r\n(2): I'm okay with the test failing in this scenario.\r\n\r\nThe tool has some sanity checks that cause it to complain if it isn't running from source, or from the snapshot that lives at bin/cache/flutter_tools.snapshot that I'd like to retain.",
        "createdAt" : "2019-08-27T19:29:31Z",
        "updatedAt" : "2019-08-27T19:29:31Z",
        "lastEditedBy" : "5acfd23a-9807-467c-8f5c-9b4c4052927b",
        "tags" : [
        ]
      }
    ],
    "commit" : "555937f26d22ff0841ad491b78208c3cbf1817e3",
    "line" : 98,
    "diffHunk" : "@@ -1,1 +1177,1181 @@  final File snapshotFile = fs.file(flutterToolsSnapshotPath);\n  if (snapshotFile.existsSync()) {\n    snapshotFile.renameSync(flutterToolsSnapshotPath + '.bak');\n  }\n"
  }
]