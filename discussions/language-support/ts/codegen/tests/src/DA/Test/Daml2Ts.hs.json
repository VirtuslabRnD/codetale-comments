[
  {
    "id" : "ed089fc7-a3b7-40e3-81af-0ba2a12ef71d",
    "prId" : 5243,
    "prUrl" : "https://github.com/digital-asset/daml/pull/5243",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e63ac665-9cfa-48e7-9510-7afc1bffda45",
        "parentId" : null,
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "We already have `assertInfixOf` in `DA.Test.Util`. Maybe just add a `msg argument to that instead of duplicating it here?",
        "createdAt" : "2020-03-27T10:49:39Z",
        "updatedAt" : "2020-03-27T10:50:09Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      },
      {
        "id" : "45abb17b-12c5-4f6e-aead-b8d7b4f7df65",
        "parentId" : "e63ac665-9cfa-48e7-9510-7afc1bffda45",
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "Good catch. Fixed in https://github.com/digital-asset/daml/pull/5245. The actual message is not really important.",
        "createdAt" : "2020-03-27T11:29:35Z",
        "updatedAt" : "2020-03-27T11:29:52Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      }
    ],
    "commit" : "a89d638a6d26e87992a2f9238dc3fee338e27ed8",
    "line" : 140,
    "diffHunk" : "@@ -1,1 +294,298 @@      assertEqual (\"The content of file '\" ++ file ++ \"' does not match\") expectedContent actualContent\n\n    assertIsInfixOf :: String -> String -> String -> IO ()\n    assertIsInfixOf msg x y =\n      assertBool (msg ++ \"\\nexpected infix: \" ++ show x ++ \"\\nbut got: \" ++ show y) (x `isInfixOf` y)"
  },
  {
    "id" : "7c80f4f2-2e8b-427f-873c-2738e1b4ed38",
    "prId" : 5218,
    "prUrl" : "https://github.com/digital-asset/daml/pull/5218",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5022c16b-eedb-4a79-a926-14466caa967b",
        "parentId" : null,
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "We write once here in the test and use it for all the packages.",
        "createdAt" : "2020-03-26T16:40:01Z",
        "updatedAt" : "2020-03-26T18:18:26Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      }
    ],
    "commit" : "0abe93a6fc31745849983ecd333eea94a1ba62f5",
    "line" : 53,
    "diffHunk" : "@@ -1,1 +220,224 @@            , \"name\" .= (\"daml2ts\" :: T.Text)\n            , \"version\" .= (\"0.0.0\" :: T.Text)\n            ]\n        BSL.writeFile \".eslintrc.json\" $ encode $\n          object"
  },
  {
    "id" : "1a129a77-2752-4aaf-8608-cfb31d9f0876",
    "prId" : 5201,
    "prUrl" : "https://github.com/digital-asset/daml/pull/5201",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7c4cadad-781f-41b7-b7f4-922d76eed5fc",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "I'm surprised this test actually passes. There is no `DAVL.ts` in v5, there's only `DAVL/V5.ts`. Can you please investigate?",
        "createdAt" : "2020-03-26T07:04:55Z",
        "updatedAt" : "2020-03-26T07:06:34Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "ce5f06fe-2072-440f-bdda-b057d0281fed",
        "parentId" : "7c4cadad-781f-41b7-b7f4-922d76eed5fc",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "Indeed, it's there : https://raw.githubusercontent.com/digital-asset/davl/51d3977be2ab22f7f4434fd4692ca2e17a7cce23/v5/daml/DAVL.daml. I can only suppose that v5 changed in more recent commits?",
        "createdAt" : "2020-03-26T09:12:52Z",
        "updatedAt" : "2020-03-26T09:12:52Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      },
      {
        "id" : "85999060-42d2-4466-aaf5-6433ac931721",
        "parentId" : "7c4cadad-781f-41b7-b7f4-922d76eed5fc",
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "Oh, that explains it. Thanks. Let's move to a newer version of DAVL in another PR.",
        "createdAt" : "2020-03-26T09:18:26Z",
        "updatedAt" : "2020-03-26T09:18:26Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "cfd258e9-2c13-4e5c-8c10-908e7ca61986",
        "parentId" : "7c4cadad-781f-41b7-b7f4-922d76eed5fc",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "You got it. I shall take care of it.",
        "createdAt" : "2020-03-26T09:38:57Z",
        "updatedAt" : "2020-03-26T09:38:57Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      }
    ],
    "commit" : "11b735477a2393f77f4bc62c52d05aa4017f59d1",
    "line" : 101,
    "diffHunk" : "@@ -1,1 +207,211 @@          [\"-o\", daml2tsDir]\n        mapM_ (assertTsFileExists (daml2tsDir </> \"davl-0.0.4\")) [ \"index\", \"DAVL\" ]\n        mapM_ (assertTsFileExists (daml2tsDir </> \"davl-0.0.5\")) [ \"index\", \"DAVL\" ]\n        mapM_ (assertTsFileExists (daml2tsDir </> \"davl-upgrade-v4-v5-0.0.5\")) [ \"index\", \"Upgrade\" ]\n      step \"eslint...\""
  },
  {
    "id" : "859b1a70-a233-4bb3-bbe0-0c8c079b2176",
    "prId" : 5201,
    "prUrl" : "https://github.com/digital-asset/daml/pull/5201",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4980a490-dd83-425e-af18-24514fd3011e",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "```suggestion\r\n      assertFileExists (proj </> \"lib\" </> file <.> \"d.ts\")\r\n```",
        "createdAt" : "2020-03-26T07:05:38Z",
        "updatedAt" : "2020-03-26T07:06:34Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      }
    ],
    "commit" : "11b735477a2393f77f4bc62c52d05aa4017f59d1",
    "line" : 147,
    "diffHunk" : "@@ -1,1 +270,274 @@      assertFileExists (proj </> \"src\" </> file <.> \"ts\")\n      assertFileExists (proj </> \"lib\" </> file <.> \"js\")\n      assertFileExists (proj </> \"lib\" </> file <.> \".d.ts\")\n        where\n          assertFileExists :: FilePath -> IO ()"
  },
  {
    "id" : "422c8276-b388-4ef2-bbcf-a31674ec448f",
    "prId" : 5171,
    "prUrl" : "https://github.com/digital-asset/daml/pull/5171",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a7a0207e-3ffe-4cca-98dd-7ce9a1eccdab",
        "parentId" : null,
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "We should probably lift these constants to the type of the file for easy maintenance as we do in `TsCodeGenMain.hs`.",
        "createdAt" : "2020-03-25T16:42:33Z",
        "updatedAt" : "2020-03-25T16:45:52Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      },
      {
        "id" : "fb4f80ff-69ab-4806-b37e-b5971732b09a",
        "parentId" : "a7a0207e-3ffe-4cca-98dd-7ce9a1eccdab",
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "I agree.",
        "createdAt" : "2020-03-25T17:44:38Z",
        "updatedAt" : "2020-03-25T17:50:50Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "7132d4d2-5cee-480a-a74f-5710bb5baa48",
        "parentId" : "a7a0207e-3ffe-4cca-98dd-7ce9a1eccdab",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "Done.",
        "createdAt" : "2020-03-25T20:08:03Z",
        "updatedAt" : "2020-03-25T20:08:03Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      }
    ],
    "commit" : "ede39c0bc7b73401d689c75f3f46feb6f2c5843f",
    "line" : 155,
    "diffHunk" : "@@ -1,1 +207,211 @@      step \"eslint...\"\n      withCurrentDirectory daml2tsDir $ do\n        pkgs <- (\\\\ [\"package.json\", \"node_modules\"]) <$> listDirectory daml2tsDir\n        BSL.writeFile \"package.json\" $ encode (\n          object"
  },
  {
    "id" : "ed337400-0da1-47bf-968d-f111b84e8ae8",
    "prId" : 5171,
    "prUrl" : "https://github.com/digital-asset/daml/pull/5171",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7be231aa-4d00-4dd7-9fe4-6bf075b0d9eb",
        "parentId" : null,
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "Note this.",
        "createdAt" : "2020-03-25T17:09:11Z",
        "updatedAt" : "2020-03-25T17:09:16Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      },
      {
        "id" : "29d093dc-54da-4acd-a838-b79f905e513a",
        "parentId" : "7be231aa-4d00-4dd7-9fe4-6bf075b0d9eb",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "Tracking in issue https://github.com/digital-asset/daml/issues/5196",
        "createdAt" : "2020-03-25T19:21:38Z",
        "updatedAt" : "2020-03-25T19:21:39Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      }
    ],
    "commit" : "ede39c0bc7b73401d689c75f3f46feb6f2c5843f",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +35,39 @@    davl <- locateRunfiles (\"davl\" </> \"released\")\n    -- TODO (SF,2020-03-24): Factor out 'withEnv' from\n    -- 'DA/DamlAssistant/Tests.hs' into a library function and use it here.\n    oldPath <- getSearchPath\n    setEnv \"PATH\" (intercalate [searchPathSeparator] $ takeDirectory yarn : oldPath) True"
  },
  {
    "id" : "f6061eb9-8e63-4d85-847c-d899e5ebeab2",
    "prId" : 5171,
    "prUrl" : "https://github.com/digital-asset/daml/pull/5171",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7606795d-c864-4cf8-9b15-0d87a3fe574f",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "Why not make\r\n```haskell\r\nsetupWorkspace = do\r\n  copyDirectory\r\n  writePackageJson\r\n```\r\nMaybe under the name `setupYarnEnvironment` or something similar?",
        "createdAt" : "2020-03-25T17:39:46Z",
        "updatedAt" : "2020-03-25T17:50:50Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "8e08d6ba-9831-4fe4-a8a8-419eb7e6df36",
        "parentId" : "7606795d-c864-4cf8-9b15-0d87a3fe574f",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "Ok",
        "createdAt" : "2020-03-25T19:27:10Z",
        "updatedAt" : "2020-03-25T19:27:10Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      }
    ],
    "commit" : "ede39c0bc7b73401d689c75f3f46feb6f2c5843f",
    "line" : 50,
    "diffHunk" : "@@ -1,1 +145,149 @@        step \"daml2ts...\"\n        copyDirectory damlTypes \"daml-types\"\n        writePackageJson\n        (exitCode, _, err) <- readProcessWithExitCode daml2ts ([groverDar, superGroverDar] ++ [\"-o\", daml2tsDir]) \"\"\n        assertBool \"A different names for same package error was expected.\" (exitCode /= ExitSuccess && isJust (stripInfix \"Different names ('grover-1.0' and 'super-grover-1.0') for the same package detected\" err))"
  },
  {
    "id" : "00fc1a2d-fcc1-4d8c-b1b3-853fe3d4cb29",
    "prId" : 5171,
    "prUrl" : "https://github.com/digital-asset/daml/pull/5171",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "99c8b5dc-af20-4dfd-9c3a-6cdcc7e439ab",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "We should also check for `index.*`. It might make sense to have a function like\r\n```haskell\r\nassertTsFileExists dir file = do\r\n  assertFileExists (dir </> \"src\" </> file <.> \"ts\")\r\n  assertFileExists (dir </> \"lib\" </> file <.> \"js\")\r\n  assertFileExists (dir </> \"lib\" </> file <.> \"d.ts\")\r\n```\r\nand call\r\n```haskell\r\nmapM_ (assertTsFileExists groverTs) [\"index\", \"Grover\", \"packageId\"]\r\n```\r\nThat would be beneficial below as well.",
        "createdAt" : "2020-03-25T17:43:42Z",
        "updatedAt" : "2020-03-25T17:50:50Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "f21c408c-8746-454d-86c7-94d498221764",
        "parentId" : "99c8b5dc-af20-4dfd-9c3a-6cdcc7e439ab",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "This is a very nice idea. Done.",
        "createdAt" : "2020-03-25T20:07:42Z",
        "updatedAt" : "2020-03-25T20:07:43Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      }
    ],
    "commit" : "ede39c0bc7b73401d689c75f3f46feb6f2c5843f",
    "line" : 109,
    "diffHunk" : "@@ -1,1 +183,187 @@        assertFileExists (groverTsSrc </> \"packageId.ts\")\n        assertFileExists (groverTsLib </> \"packageId.js\")\n        assertFileExists (groverTsLib </> \"packageId.d.ts\")\n\n  , testCaseSteps \"DAVL test\" $ \\step -> withTempDir $ \\here -> do"
  },
  {
    "id" : "d384cabf-d83a-4ba7-9c03-a72cefb6ac35",
    "prId" : 5171,
    "prUrl" : "https://github.com/digital-asset/daml/pull/5171",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4e2d8958-0f18-4a59-9eec-1b32a17eb549",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "We have the functionality of setting up the yarn environment for tests twice now. Here and way further up. We should factor that out, probably in a followup PR.",
        "createdAt" : "2020-03-25T17:47:33Z",
        "updatedAt" : "2020-03-25T17:50:50Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "f0819f1a-5cd9-4ef9-89df-b6fc7177fc14",
        "parentId" : "4e2d8958-0f18-4a59-9eec-1b32a17eb549",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "Well yes, we have two occasions to write json:\r\n(1)\r\n```haskell\r\n        BSL.writeFile \"package.json\" $ encode (\r\n          object\r\n            [ \"private\" .= True\r\n            , \"devDependencies\" .= pkgDevDependencies configConsts\r\n            , \"workspaces\" .= pkgs\r\n            , \"name\" .= (\"daml2ts\" :: T.Text)\r\n            , \"version\" .= (\"0.0.0\" :: T.Text)\r\n            ])\r\n```\r\n(2)\r\n```haskell\r\n    writePackageJson :: IO ()\r\n    writePackageJson = BSL.writeFile \"package.json\" $ encode packageJson\r\n      where\r\n        packageJson = object\r\n          [ \"private\" .= True\r\n          , \"workspaces\" .= ([\"daml2ts\"] :: [T.Text])\r\n          , \"resolutions\" .= HMS.fromList ([(\"@daml/types\", \"file:daml-types\")] :: [(T.Text, T.Text)])\r\n          ]\r\n```\r\nAlthough similar, they do have very different contents. Do you still feel this deserves refactoring?",
        "createdAt" : "2020-03-25T20:22:42Z",
        "updatedAt" : "2020-03-25T20:22:42Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      },
      {
        "id" : "367eea66-b288-4be4-99f3-bf1046623e96",
        "parentId" : "4e2d8958-0f18-4a59-9eec-1b32a17eb549",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "Oh wait! I think you mean we do something similar in the DAML assistant too. Yes, we should definitely factor this out then. I'll put it on the stack with the 2 notes below.",
        "createdAt" : "2020-03-25T20:35:35Z",
        "updatedAt" : "2020-03-25T20:35:35Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      }
    ],
    "commit" : "ede39c0bc7b73401d689c75f3f46feb6f2c5843f",
    "line" : 221,
    "diffHunk" : "@@ -1,1 +264,268 @@          , \"workspaces\" .= ([\"daml2ts\"] :: [T.Text])\n          , \"resolutions\" .= HMS.fromList ([(\"@daml/types\", \"file:daml-types\")] :: [(T.Text, T.Text)])\n          ]\n\n    assertFileExists :: FilePath -> IO ()"
  },
  {
    "id" : "df5fa67c-0a04-4dae-97d7-16de67cb9dfe",
    "prId" : 5171,
    "prUrl" : "https://github.com/digital-asset/daml/pull/5171",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b0777f9e-b6ce-4199-be9d-dd26caa33f7b",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "I have a suspicion that this only works because we write too much in the `package.json` file for every package. I'm fine with keeping it in there for now and remove it in a followup PR.",
        "createdAt" : "2020-03-25T17:48:38Z",
        "updatedAt" : "2020-03-25T17:50:50Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "f6cb7692-180a-4748-a941-cfe8c985433f",
        "parentId" : "b0777f9e-b6ce-4199-be9d-dd26caa33f7b",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "I hope your suspicions are unfounded.\r\n```haskell\r\n\r\n    packageJson :: Value\r\n    packageJson = object\r\n      [ \"name\" .= (\"daml2ts\" :: T.Text)\r\n      , \"version\" .= version\r\n      , \"dependencies\" .= pkgDependencies config\r\n      , \"devDependencies\" .= pkgDevDependencies config\r\n      ]\r\n```\r\nwhere,\r\n```haskell\r\nconfigConsts :: T.Text -> ConfigConsts\r\nconfigConsts sdkVersion = ConfigConsts\r\n  { pkgDependencies = HMS.fromList\r\n      [ (NpmPackageName \"@mojotech/json-type-validation\", NpmPackageVersion \"^3.1.0\")\r\n      , (NpmPackageName \"@daml/types\", NpmPackageVersion sdkVersion)\r\n      ]\r\n  , pkgDevDependencies = HMS.fromList\r\n      [ (NpmPackageName \"typescript\", NpmPackageVersion \"~3.7.3\")\r\n      ]\r\n  , pkgScripts = HMS.fromList\r\n      [ (ScriptName \"build\", Script \"tsc\")\r\n      , (ScriptName \"lint\", Script \"eslint --ext .ts --max-warnings 0 src/\")\r\n      ]\r\n  }\r\n```\r\nLet me know!",
        "createdAt" : "2020-03-25T20:09:57Z",
        "updatedAt" : "2020-03-25T20:09:57Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      },
      {
        "id" : "654bb0bc-b0f6-4c9c-9c3e-23fd544692a5",
        "parentId" : "b0777f9e-b6ce-4199-be9d-dd26caa33f7b",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "Related : I do observe that the `pkgDependencies` are not required for the lint test (in `Daml2ts.hs`). Removing those in this PR.",
        "createdAt" : "2020-03-25T20:14:19Z",
        "updatedAt" : "2020-03-25T20:26:14Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      },
      {
        "id" : "aef5a1ad-8c91-4bda-9559-ef8288e6159a",
        "parentId" : "b0777f9e-b6ce-4199-be9d-dd26caa33f7b",
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "Does that mean we can delete `pkgScripts`? Let's do that then! 🔥",
        "createdAt" : "2020-03-25T21:11:25Z",
        "updatedAt" : "2020-03-25T21:11:25Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "d2b5c7ca-ea1e-4670-bcca-3b37648f7172",
        "parentId" : "b0777f9e-b6ce-4199-be9d-dd26caa33f7b",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "Done.",
        "createdAt" : "2020-03-25T23:22:35Z",
        "updatedAt" : "2020-03-25T23:22:35Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      }
    ],
    "commit" : "ede39c0bc7b73401d689c75f3f46feb6f2c5843f",
    "line" : 175,
    "diffHunk" : "@@ -1,1 +227,231 @@        callProcessSilent yarn [\"install\", \"--pure-lockfile\"]\n        callProcessSilent yarn [\"workspaces\", \"run\", \"lint\"]\n  ]\n  where\n    buildProject :: [String] -> IO ()"
  },
  {
    "id" : "bc519889-576c-439c-8fc5-ecf488f80986",
    "prId" : 5127,
    "prUrl" : "https://github.com/digital-asset/daml/pull/5127",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8bf95767-c367-4e73-a33e-cc48f8d3668c",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "Wouldn't it make more sense to update the tests to reflect the new package ids?",
        "createdAt" : "2020-03-24T09:56:54Z",
        "updatedAt" : "2020-03-24T09:57:25Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "5e8f8b69-cb87-41e9-93d2-777c4fd260cc",
        "parentId" : "8bf95767-c367-4e73-a33e-cc48f8d3668c",
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "No, this test is verifying the error message you get if you have two packages with different names but the same package id. `daml build` won’t produce such packages anymore with DAML-LF 1.8 since the package name ends up in the metadata  so the package id is actually different. We could manually patch the `MANIFEST.MF` but that doesn’t really solve anything since `daml2ts` should switch to using the package metadata anyway.",
        "createdAt" : "2020-03-24T10:02:09Z",
        "updatedAt" : "2020-03-24T10:02:10Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      },
      {
        "id" : "3a8f73e1-2b91-47f5-98aa-a0ee2f828ee7",
        "parentId" : "8bf95767-c367-4e73-a33e-cc48f8d3668c",
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "I see. That makes sense. Thanks for the explanation.",
        "createdAt" : "2020-03-24T12:20:32Z",
        "updatedAt" : "2020-03-24T12:20:33Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      }
    ],
    "commit" : "90ae2e310abee6cb956a5652e6dfda332a9c5023",
    "line" : 31,
    "diffHunk" : "@@ -1,1 +97,101 @@      createDirectoryIfMissing True groverDaml\n      -- Locked to DAML-LF 1.7 since we get different package ids due to\n      -- package metadata in DAML-LF 1.8.\n      withCurrentDirectory grover $ do\n        writeFileUTF8 (groverDaml </> \"Grover.daml\") $ unlines"
  },
  {
    "id" : "2d51888c-78a9-4dba-85e5-bc360455d357",
    "prId" : 5098,
    "prUrl" : "https://github.com/digital-asset/daml/pull/5098",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "83514839-cb1d-471e-8cdb-5584072dbcde",
        "parentId" : null,
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "An integration test seems a bit overkill (as opposed to just testing a library function that parses the JSON) but given that you already wrote it let’s just keep it for now.",
        "createdAt" : "2020-03-19T18:34:37Z",
        "updatedAt" : "2020-03-19T18:34:43Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      }
    ],
    "commit" : "89312882f256fc1cc54ac6d03a1692bcf561dfb2",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +135,139 @@        assertBool \"A different names for same package error was expected.\" (exitCode /= ExitSuccess && isJust (stripInfix \"Different names ('grover-1.0' and 'super-grover-1.0') for the same package detected\" err))\n\n  , testCaseSteps \"Bad package.json test\" $ \\step -> withTempDir $ \\here -> do\n      let grover = here </> \"grover\"\n          groverDaml = grover </> \"daml\""
  },
  {
    "id" : "f3a040a4-2faf-4640-b1b2-f7d426d11e35",
    "prId" : 4799,
    "prUrl" : "https://github.com/digital-asset/daml/pull/4799",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4664540b-c65a-4d9b-be3e-2a311150db4f",
        "parentId" : null,
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "This is impossible to review, can we please separate refactorings (e.g. factoring out the creation of `daml.yaml` which really should also go into a library since we want it from other tests) from the actual changes that here?",
        "createdAt" : "2020-03-04T08:08:48Z",
        "updatedAt" : "2020-03-04T19:19:03Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      }
    ],
    "commit" : "516a9a33965e2db029a67edd5bcf173e1f360b77",
    "line" : 252,
    "diffHunk" : "@@ -1,1 +68,72 @@          groverDar = grover </> \".daml\" </> \"dist\" </> \"grover-1.0.dar\"\n      createDirectoryIfMissing True groverDaml\n      withCurrentDirectory grover $ do\n        writeFileUTF8 (grover </> \"daml\" </> \"Grover.daml\") $ unlines\n          [ \"module Grover where\""
  },
  {
    "id" : "2b0bf8d3-df38-458c-a1a1-bdaddc69e29b",
    "prId" : 4799,
    "prUrl" : "https://github.com/digital-asset/daml/pull/4799",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ac9f7fe1-e327-4291-af86-88b5c112df80",
        "parentId" : null,
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "This doesn’t look right, you removed the `exitFailure`at the end.",
        "createdAt" : "2020-03-04T08:28:24Z",
        "updatedAt" : "2020-03-04T19:19:03Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      },
      {
        "id" : "a350d276-54cc-4d75-8692-28de01d186ad",
        "parentId" : "ac9f7fe1-e327-4291-af86-88b5c112df80",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "genuine bug. thank-you.",
        "createdAt" : "2020-03-04T13:58:52Z",
        "updatedAt" : "2020-03-04T19:19:03Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      }
    ],
    "commit" : "516a9a33965e2db029a67edd5bcf173e1f360b77",
    "line" : 673,
    "diffHunk" : "@@ -1,1 +225,229 @@          hPutStrLn stderr $ \"Failure: Command \\\"\" <> cmd <> \" \" <> unwords args <> \"\\\" exited with \" <> show exitCode\n          hPutStrLn stderr $ unlines [\"stdout:\", out]\n          hPutStrLn stderr $ unlines [\"stderr: \", err]\n          exitFailure\n"
  },
  {
    "id" : "60c9f397-1529-4518-b73d-5a202b657cb7",
    "prId" : 4688,
    "prUrl" : "https://github.com/digital-asset/daml/pull/4688",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "eebfaf59-cd49-40f5-ab8a-0526cd467384",
        "parentId" : null,
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "We already have `copyDirectory` in `DA.Daml.Project.Util` which contrary this function should work properly if the directory structure is nested (presumably that’s not the case now but that’s easy to change accidentally). `daml-project-config` is a bit of a weird place for it to live so feel free to move it to `da-hs-base` or something.",
        "createdAt" : "2020-02-25T13:09:04Z",
        "updatedAt" : "2020-02-25T13:29:12Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      },
      {
        "id" : "70d97c8d-c2fb-4faa-997e-f77d2b9f4c2b",
        "parentId" : "eebfaf59-cd49-40f5-ab8a-0526cd467384",
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "@shayne-fletcher Can you please take care of that in a follow-up PR?",
        "createdAt" : "2020-02-25T13:11:14Z",
        "updatedAt" : "2020-02-25T13:29:12Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "1b8e3e48-c43e-4725-a80f-a3dac84522d2",
        "parentId" : "eebfaf59-cd49-40f5-ab8a-0526cd467384",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "@hurryabit Sure thing.",
        "createdAt" : "2020-02-25T13:18:41Z",
        "updatedAt" : "2020-02-25T13:29:12Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      }
    ],
    "commit" : "4dca90686a128314706aebbfc49167494289ec4a",
    "line" : 27,
    "diffHunk" : "@@ -1,1 +44,48 @@  withCurrentDirectory rootDir $ yarnProject' yarn [\"install\"]\n  where\n    copyDirectory from to = do\n      createDirectoryIfMissing True to\n      files <- listDirectory from"
  },
  {
    "id" : "ce56c162-444c-473f-be91-8cf7b34fa310",
    "prId" : 4676,
    "prUrl" : "https://github.com/digital-asset/daml/pull/4676",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8cc80cf4-c1d6-4bc1-8aca-f00aa7a7a7d5",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "Ultimately, we need to depend on `0.0.0-SNAPSHOT` here and include the library in a way similar to the `build-and-lint` test.",
        "createdAt" : "2020-02-24T18:01:29Z",
        "updatedAt" : "2020-02-24T18:51:53Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "3d6f861e-783b-49a5-94ab-0391cb7f4f59",
        "parentId" : "8cc80cf4-c1d6-4bc1-8aca-f00aa7a7a7d5",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "Not sure about this. Let's discuss.",
        "createdAt" : "2020-02-24T18:53:23Z",
        "updatedAt" : "2020-02-24T18:53:23Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      },
      {
        "id" : "bf4d0169-ba2a-43ad-b64d-cdff8a1584e1",
        "parentId" : "8cc80cf4-c1d6-4bc1-8aca-f00aa7a7a7d5",
        "authorId" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "body" : "If that discussion hasn't happened yet, I'd like to participate.",
        "createdAt" : "2020-02-25T09:09:59Z",
        "updatedAt" : "2020-02-25T09:09:59Z",
        "lastEditedBy" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "tags" : [
        ]
      },
      {
        "id" : "060740f7-fa67-48da-aa6a-4450f6870fb9",
        "parentId" : "8cc80cf4-c1d6-4bc1-8aca-f00aa7a7a7d5",
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "I don't there's a lot to discuss. Here's my proposal on how to fix the issue: https://github.com/digital-asset/daml/pull/4688",
        "createdAt" : "2020-02-25T13:09:26Z",
        "updatedAt" : "2020-02-25T13:09:27Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      }
    ],
    "commit" : "df2dd894a6a254c34571bf3d97b86e3f39121069",
    "line" : 423,
    "diffHunk" : "@@ -1,1 +477,481 @@            , \"  \\\"license\\\": \\\"Apache-2.0\\\",\"\n            , \"  \\\"dependencies\\\": {\"\n            , \"    \\\"@daml/types\\\": \\\"\" <> sdkVersion <> \"\\\",\"\n            , \"    \\\"@mojotech/json-type-validation\\\": \\\"^3.1.0\\\"\"\n            , \"  },\""
  },
  {
    "id" : "073e394b-b2ff-468f-81cf-dbe951c90710",
    "prId" : 4658,
    "prUrl" : "https://github.com/digital-asset/daml/pull/4658",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "58b1cfc7-fff2-4740-b7d3-78b140adc9e3",
        "parentId" : null,
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "Do we need all of this? I would expect that `devDependencies` don’t matter and probably a lot of the scripts also don’t matter.",
        "createdAt" : "2020-02-21T18:23:41Z",
        "updatedAt" : "2020-02-22T00:57:51Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      },
      {
        "id" : "addbc2b6-b833-473f-ade9-e3e7cb6dc6bd",
        "parentId" : "58b1cfc7-fff2-4740-b7d3-78b140adc9e3",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "I haven't attempted to trim it. I just followed Martin's suggestion and imported it wholesale from davl",
        "createdAt" : "2020-02-21T18:33:47Z",
        "updatedAt" : "2020-02-22T00:57:51Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      },
      {
        "id" : "3173f6ef-e903-4fd5-8931-c353b6335312",
        "parentId" : "58b1cfc7-fff2-4740-b7d3-78b140adc9e3",
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "Sounds reasonable, then let’s keep it.",
        "createdAt" : "2020-02-21T18:40:22Z",
        "updatedAt" : "2020-02-22T00:57:51Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      },
      {
        "id" : "8db2efd0-7034-436c-8d4e-e9f9032ee039",
        "parentId" : "58b1cfc7-fff2-4740-b7d3-78b140adc9e3",
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "I suggest we run the linter here too. This way we gain some confidence we generate good TS.",
        "createdAt" : "2020-02-24T08:34:43Z",
        "updatedAt" : "2020-02-24T08:42:23Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "b2ea7b9d-0dfe-44b4-8a9a-be248184f674",
        "parentId" : "58b1cfc7-fff2-4740-b7d3-78b140adc9e3",
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "We should also consider moving the linter config in a separate file, I think it's called `.eslintrc.json`.",
        "createdAt" : "2020-02-24T08:38:21Z",
        "updatedAt" : "2020-02-24T08:42:24Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "b065953b-b1f8-4800-a2f4-8eeb3303d27a",
        "parentId" : "58b1cfc7-fff2-4740-b7d3-78b140adc9e3",
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "@shayne-fletcher Here's a PR demoing the target state on DAVL: https://github.com/digital-asset/davl/pull/202",
        "createdAt" : "2020-02-24T11:34:13Z",
        "updatedAt" : "2020-02-24T11:34:25Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      }
    ],
    "commit" : "2fe5f13e0244d38e16379868ab482be336171b59",
    "line" : 232,
    "diffHunk" : "@@ -1,1 +428,432 @@        , \"    \\\"lint\\\": \\\"eslint --ext .js,.ts src/ --max-warnings 0\\\"\"\n        , \"  },\"\n        , \"  \\\"eslintConfig\\\": {\"\n        , \"    \\\"extends\\\": [\"\n        , \"      \\\"eslint:recommended\\\",\""
  },
  {
    "id" : "1b3e94b2-45af-4414-a9e3-b26f9a4de7a6",
    "prId" : 4658,
    "prUrl" : "https://github.com/digital-asset/daml/pull/4658",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "63e71968-0822-494c-ad2e-64abf7058bb8",
        "parentId" : null,
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "```suggestion\r\n      assertBool \"'Grover.ts' was created.\" . not =<< doesFileExist (charliesRestaurantTs </> \"src\" </> \"grover-1.0\" </> \"Grover.ts\")\r\n```\r\n```suggestion\r\n      assertBool \"'Grover.ts' was  not created.\" . not =<< doesFileExist (charliesRestaurantTs </> \"src\" </> \"grover-1.0\" </> \"Grover.ts\")\r\n```",
        "createdAt" : "2020-02-21T18:26:14Z",
        "updatedAt" : "2020-02-22T00:57:51Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      },
      {
        "id" : "681a421c-a5d1-4c12-8fd8-db7d1ab8e323",
        "parentId" : "63e71968-0822-494c-ad2e-64abf7058bb8",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "No, it's right as is I think. The logic is reversed. We are testing that the file has not been created. This is because the `Grover.dar` has not been included so `Grover.ts` is under it's package name, not the main-package name `grover-1.0` at this point.",
        "createdAt" : "2020-02-21T18:32:05Z",
        "updatedAt" : "2020-02-22T00:57:51Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      }
    ],
    "commit" : "2fe5f13e0244d38e16379868ab482be336171b59",
    "line" : 92,
    "diffHunk" : "@@ -1,1 +161,165 @@      assertBool \"'CharliesRestaurant.ts' was not created.\" =<< doesFileExist (charliesRestaurantTs </> \"src\" </> \"charlies-restaurant-1.0\" </> \"CharliesRestaurant.ts\")\n      assertBool \"'packageId.ts' was not created.\" =<< doesFileExist (charliesRestaurantTs </> \"src\" </> \"charlies-restaurant-1.0\" </> \"packageId.ts\")\n      assertBool \"'Grover.ts' was created.\" . not =<< doesFileExist (charliesRestaurantTs </> \"src\" </> \"grover-1.0\" </> \"Grover.ts\")\n      removeDirectoryRecursive charliesRestaurantTs\n      assertBool \"'charlies-restaurant-ts' should not exist.\" . not =<< doesDirectoryExist charliesRestaurantTs"
  },
  {
    "id" : "ffcddea3-c376-4597-b0d3-e9596887b770",
    "prId" : 4658,
    "prUrl" : "https://github.com/digital-asset/daml/pull/4658",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b90e3333-41ac-43dc-94cb-8aa6bfe37b35",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "I'd be interested to see if we can remove this. The generated code should not use anything from the `dom`, not even `console`.",
        "createdAt" : "2020-02-24T08:32:41Z",
        "updatedAt" : "2020-02-24T08:42:23Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "fa1e910c-f8dd-4c5b-9d96-ccad9621ac96",
        "parentId" : "b90e3333-41ac-43dc-94cb-8aa6bfe37b35",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "Appears we can. Removed.",
        "createdAt" : "2020-02-24T14:47:00Z",
        "updatedAt" : "2020-02-24T14:47:00Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      }
    ],
    "commit" : "2fe5f13e0244d38e16379868ab482be336171b59",
    "line" : 197,
    "diffHunk" : "@@ -1,1 +393,397 @@    , \"    \\\"target\\\": \\\"es5\\\",\"\n    , \"    \\\"lib\\\": [\"\n    , \"      \\\"dom\\\",\"\n    , \"      \\\"es2015\\\"\"\n    , \"     ],\""
  },
  {
    "id" : "f19b6066-55d2-4b7e-85f8-6bdb790a1c71",
    "prId" : 4658,
    "prUrl" : "https://github.com/digital-asset/daml/pull/4658",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cfebc4a9-2edf-4e77-827a-0762f85e6d54",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "That should be the version of the current SDK.",
        "createdAt" : "2020-02-24T08:36:32Z",
        "updatedAt" : "2020-02-24T08:42:23Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "96969a20-3aab-4277-8993-2cf87c908945",
        "parentId" : "cfebc4a9-2edf-4e77-827a-0762f85e6d54",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "Well spotted.",
        "createdAt" : "2020-02-24T14:41:51Z",
        "updatedAt" : "2020-02-24T14:41:52Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      }
    ],
    "commit" : "2fe5f13e0244d38e16379868ab482be336171b59",
    "line" : 219,
    "diffHunk" : "@@ -1,1 +415,419 @@        , \"  \\\"private\\\": true,\"\n        , \"  \\\"name\\\": \\\"\" <> name <> \"\\\",\"\n        , \"  \\\"version\\\": \\\"0.13.53\\\",\"\n        , \"  \\\"description\\\": \\\"Produced by daml2ts\\\",\"\n        , \"  \\\"license\\\": \\\"Apache-2.0\\\",\""
  },
  {
    "id" : "ff453897-c1f9-4217-bc21-9f5cc63be297",
    "prId" : 4658,
    "prUrl" : "https://github.com/digital-asset/daml/pull/4658",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ff711af7-c53d-41cc-aed0-357544defcd9",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "We don't want to compile in watch mode here.",
        "createdAt" : "2020-02-24T08:36:57Z",
        "updatedAt" : "2020-02-24T08:42:24Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "c14c2310-5fd9-44db-8f64-3eb26edfa2f2",
        "parentId" : "ff711af7-c53d-41cc-aed0-357544defcd9",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "Yep. Removing.",
        "createdAt" : "2020-02-24T14:43:34Z",
        "updatedAt" : "2020-02-24T14:43:34Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      }
    ],
    "commit" : "2fe5f13e0244d38e16379868ab482be336171b59",
    "line" : 228,
    "diffHunk" : "@@ -1,1 +424,428 @@        , \"  \\\"scripts\\\": {\"\n        , \"    \\\"build\\\": \\\"tsc --build\\\",\"\n        , \"    \\\"build:watch\\\": \\\"tsc --build --watch\\\",\"\n        , \"    \\\"test\\\": \\\"true\\\",\"\n        , \"    \\\"lint\\\": \\\"eslint --ext .js,.ts src/ --max-warnings 0\\\"\""
  },
  {
    "id" : "122ce838-927a-4187-b2dc-9e076ec270c6",
    "prId" : 4658,
    "prUrl" : "https://github.com/digital-asset/daml/pull/4658",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e862a463-f400-4a3b-8553-91c30a3bc2b4",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "We don't need this here.",
        "createdAt" : "2020-02-24T08:37:26Z",
        "updatedAt" : "2020-02-24T08:42:24Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "22f12f0d-6e30-45b8-a5b7-27556628b0aa",
        "parentId" : "e862a463-f400-4a3b-8553-91c30a3bc2b4",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "Removing.",
        "createdAt" : "2020-02-24T14:44:14Z",
        "updatedAt" : "2020-02-24T14:44:14Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      }
    ],
    "commit" : "2fe5f13e0244d38e16379868ab482be336171b59",
    "line" : 229,
    "diffHunk" : "@@ -1,1 +425,429 @@        , \"    \\\"build\\\": \\\"tsc --build\\\",\"\n        , \"    \\\"build:watch\\\": \\\"tsc --build --watch\\\",\"\n        , \"    \\\"test\\\": \\\"true\\\",\"\n        , \"    \\\"lint\\\": \\\"eslint --ext .js,.ts src/ --max-warnings 0\\\"\"\n        , \"  },\""
  },
  {
    "id" : "c1abb78e-69aa-4762-ad34-77fffff99319",
    "prId" : 4658,
    "prUrl" : "https://github.com/digital-asset/daml/pull/4658",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "04bda876-3fc8-47ba-ac32-1d33b674eb04",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "That should be the current SDK version too.",
        "createdAt" : "2020-02-24T08:37:47Z",
        "updatedAt" : "2020-02-24T08:42:24Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "52b135a2-995b-4b33-8129-af51efccee65",
        "parentId" : "04bda876-3fc8-47ba-ac32-1d33b674eb04",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "Again, well spotted.",
        "createdAt" : "2020-02-24T14:42:09Z",
        "updatedAt" : "2020-02-24T14:42:10Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      },
      {
        "id" : "ac4a36ac-aaa2-42fa-bf1c-800324ab6524",
        "parentId" : "04bda876-3fc8-47ba-ac32-1d33b674eb04",
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "Actually, we might need `0.0.0-SNAPSHOT` here in order to use `@daml/types` from `HEAD`.  The `build-and-list` test should demonstrate how to depend on these.",
        "createdAt" : "2020-02-24T16:45:25Z",
        "updatedAt" : "2020-02-24T16:45:25Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      }
    ],
    "commit" : "2fe5f13e0244d38e16379868ab482be336171b59",
    "line" : 223,
    "diffHunk" : "@@ -1,1 +419,423 @@        , \"  \\\"license\\\": \\\"Apache-2.0\\\",\"\n        , \"  \\\"dependencies\\\": {\"\n        , \"    \\\"@daml/types\\\": \\\"0.13.53\\\",\"\n        , \"    \\\"@mojotech/json-type-validation\\\": \\\"^3.1.0\\\"\"\n        , \"  },\""
  },
  {
    "id" : "86ddbe56-44d5-44d1-9745-93f29229a80b",
    "prId" : 4658,
    "prUrl" : "https://github.com/digital-asset/daml/pull/4658",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "565fc2df-a65a-4bf1-aef0-4112640fa621",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "What do we need this one for?",
        "createdAt" : "2020-02-24T08:39:03Z",
        "updatedAt" : "2020-02-24T08:42:24Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "52914540-2505-4ba7-8d01-01e7619a7e0e",
        "parentId" : "565fc2df-a65a-4bf1-aef0-4112640fa621",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "We don't. Removing.",
        "createdAt" : "2020-02-24T14:23:27Z",
        "updatedAt" : "2020-02-24T14:23:27Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      },
      {
        "id" : "acda237d-7210-4402-baa9-3e0b12fe2fb0",
        "parentId" : "565fc2df-a65a-4bf1-aef0-4112640fa621",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "Actually, turns out we do. Need to write one for the `yarn install` step to work but otherwise don't if we `cd x&& yarn build`.",
        "createdAt" : "2020-02-24T14:29:23Z",
        "updatedAt" : "2020-02-24T14:29:24Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      },
      {
        "id" : "3b2ae926-b809-46cd-815a-5ac6c0a69e0e",
        "parentId" : "565fc2df-a65a-4bf1-aef0-4112640fa621",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "It turns out we really, really do in order to make our scheme of `yarn install` run once work.",
        "createdAt" : "2020-02-24T16:07:18Z",
        "updatedAt" : "2020-02-24T17:47:09Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      },
      {
        "id" : "ca6748c6-557f-4f11-ad1d-48403effa1fb",
        "parentId" : "565fc2df-a65a-4bf1-aef0-4112640fa621",
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "Is there a way to depend on the \"global\" `node_modules` directory we maintain with bazel? @aherrmann do you know the answer?\r\nIf there is, we might get away without using workspaces. If we have to use workspaces, I'd prefer to call `yarn build` and `yarn lint` from the directory containing the generated code rather than calling the `yarn workspaces run ...` versions, which also run over the `@dummy/dummy` package.",
        "createdAt" : "2020-02-24T16:48:18Z",
        "updatedAt" : "2020-02-24T16:48:18Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "b4b69a58-dace-4d9c-9b9b-0a18a0dafa31",
        "parentId" : "565fc2df-a65a-4bf1-aef0-4112640fa621",
        "authorId" : "0aa8e877-303a-4005-8f07-7003661da2a6",
        "body" : "@hurryabit You can depend on `\"@language_support_ts_deps//:node_modules\"` to put them into the sandbox. I'm not sure if there is a way to point yarn to another `node_modules` folder, if not you could create a symlink to put it in the right place.\r\n\r\nAlternatively, you could turn the `yarn lint` call into it's own `eslint_test` target. However, that would require some larger refactoring of this PR.",
        "createdAt" : "2020-02-25T08:42:36Z",
        "updatedAt" : "2020-02-25T08:42:36Z",
        "lastEditedBy" : "0aa8e877-303a-4005-8f07-7003661da2a6",
        "tags" : [
        ]
      }
    ],
    "commit" : "2fe5f13e0244d38e16379868ab482be336171b59",
    "line" : 262,
    "diffHunk" : "@@ -1,1 +458,462 @@\nwriteRootPackageJson :: FilePath -> String -> IO ()\nwriteRootPackageJson rootDir workspace =\n   writeFileUTF8 (rootDir </> \"package.json\") $ unlines\n     [ \"{\""
  },
  {
    "id" : "7c3b479b-e22a-47de-b750-4b6a37cb4e2d",
    "prId" : 4658,
    "prUrl" : "https://github.com/digital-asset/daml/pull/4658",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b254eff1-db71-4d36-aeb1-8544bc9ee0be",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "```suggestion\r\n        , \"  \\\"name\\\": \\\"@daml2ts/\" <> name <> \"\\\",\"\r\n```\r\nThis is what I've used in other place. I think ultimately we should move to `@daml.js/foo`.",
        "createdAt" : "2020-02-24T08:42:06Z",
        "updatedAt" : "2020-02-24T08:42:24Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "e3579930-e086-45a1-85e3-5f652678f45d",
        "parentId" : "b254eff1-db71-4d36-aeb1-8544bc9ee0be",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "Have gone with `@daml2ts` for now (tell me if you want that to be `@daml.js` for forward compatibility) also, derive the package name as the leaf of the directory containing the `src` folder - one less argument to pass.",
        "createdAt" : "2020-02-24T14:40:09Z",
        "updatedAt" : "2020-02-24T14:40:09Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      },
      {
        "id" : "67e74cd5-b174-4dbc-89e3-35f87cf84df9",
        "parentId" : "b254eff1-db71-4d36-aeb1-8544bc9ee0be",
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "Let's stay with `@daml2ts` for now.",
        "createdAt" : "2020-02-24T16:48:42Z",
        "updatedAt" : "2020-02-24T16:48:42Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      }
    ],
    "commit" : "2fe5f13e0244d38e16379868ab482be336171b59",
    "line" : 218,
    "diffHunk" : "@@ -1,1 +414,418 @@        [\"{\"\n        , \"  \\\"private\\\": true,\"\n        , \"  \\\"name\\\": \\\"\" <> name <> \"\\\",\"\n        , \"  \\\"version\\\": \\\"0.13.53\\\",\"\n        , \"  \\\"description\\\": \\\"Produced by daml2ts\\\",\""
  },
  {
    "id" : "88424eec-913e-4e45-8262-fbd22955fbff",
    "prId" : 4613,
    "prUrl" : "https://github.com/digital-asset/daml/pull/4613",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c600e32e-2395-4963-8aac-74db333909e5",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "We should probably clean the old output of `daml2ts` before we run it again and then make sure that the files from `CharliesRestaurant` were created again.",
        "createdAt" : "2020-02-19T21:56:53Z",
        "updatedAt" : "2020-02-19T23:15:36Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "dced37cf-3848-4a8a-a932-14e4b38f17db",
        "parentId" : "c600e32e-2395-4963-8aac-74db333909e5",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "Ok!",
        "createdAt" : "2020-02-19T22:07:28Z",
        "updatedAt" : "2020-02-19T23:15:36Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      }
    ],
    "commit" : "50ce067e81997115901457e48b83e65be6842714",
    "line" : 137,
    "diffHunk" : "@@ -1,1 +135,139 @@      createDirectoryIfMissing True charliesRestaurantTs\n      assertBool \"'charlies-restaurant-ts' should exist.\" =<< doesDirectoryExist charliesRestaurantTs\n      daml2tsProject [charliesRestaurantDar, groverDar] charliesRestaurantTs\n      assertBool \"'CharliesRestaurant.ts' was not created.\" =<< doesFileExist (charliesRestaurantTs </> \"charlies-restaurant-1.0\" </> \"CharliesRestaurant.ts\")\n      assertBool \"'packageId.ts' was not created.\" =<< doesFileExist (charliesRestaurantTs </> \"charlies-restaurant-1.0\" </> \"packageId.ts\")"
  },
  {
    "id" : "4517e253-9b98-43da-9776-7b021b9128d2",
    "prId" : 4613,
    "prUrl" : "https://github.com/digital-asset/daml/pull/4613",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8cdc0eb4-d006-42e8-8f36-28fb0d2bee2b",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "It would be great to check that there's no second version of the `Grover` package under its package hash. At least once we have actually implemented it.",
        "createdAt" : "2020-02-19T21:59:40Z",
        "updatedAt" : "2020-02-19T23:15:36Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "5d4ec4ca-e477-4dca-813a-38340e44b5cf",
        "parentId" : "8cdc0eb4-d006-42e8-8f36-28fb0d2bee2b",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "Yes. The tests will evolve with the improved implementation.",
        "createdAt" : "2020-02-19T22:07:54Z",
        "updatedAt" : "2020-02-19T23:15:36Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      }
    ],
    "commit" : "50ce067e81997115901457e48b83e65be6842714",
    "line" : 141,
    "diffHunk" : "@@ -1,1 +139,143 @@      assertBool \"'packageId.ts' was not created.\" =<< doesFileExist (charliesRestaurantTs </> \"charlies-restaurant-1.0\" </> \"packageId.ts\")\n      assertBool \"'Grover.ts' was not created.\" =<< doesFileExist (charliesRestaurantTs </> \"grover-1.0\" </> \"Grover.ts\")\n      assertBool \"'packageId.ts' was not created.\" =<< doesFileExist (charliesRestaurantTs </> \"grover-1.0\" </> \"packageId.ts\")\n\n  , testCaseSteps \"Package name collision test\" $ \\step -> withTempDir $ \\tmpDir -> do"
  },
  {
    "id" : "74eeaf6a-d50c-42dc-8f63-721a19688e45",
    "prId" : 4613,
    "prUrl" : "https://github.com/digital-asset/daml/pull/4613",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ec1a3fe7-f228-4886-ab13-04d3907d635d",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "I wonder if we should finally invest in some shared helpers to create all these `daml.yaml` files and the directories containing them. The packaging tests are already full of these repetitions...",
        "createdAt" : "2020-02-19T22:01:58Z",
        "updatedAt" : "2020-02-19T23:15:36Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "f34dc8cd-0865-4483-8c91-4def7dd34589",
        "parentId" : "ec1a3fe7-f228-4886-ab13-04d3907d635d",
        "authorId" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "body" : "Yes, there's a mini-library emerging. Maybe not today but soon.",
        "createdAt" : "2020-02-19T22:08:23Z",
        "updatedAt" : "2020-02-19T23:15:36Z",
        "lastEditedBy" : "be70ea6e-6fac-4058-8a37-3814d07afb64",
        "tags" : [
        ]
      }
    ],
    "commit" : "50ce067e81997115901457e48b83e65be6842714",
    "line" : 50,
    "diffHunk" : "@@ -1,1 +48,52 @@        , \"        return self\"\n        ]\n      writeFileUTF8 (grover </> \"daml.yaml\") $ unlines\n        [ \"sdk-version: \" <> sdkVersion\n        , \"name: grover\""
  }
]