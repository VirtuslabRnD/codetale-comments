[
  {
    "id" : "cb7da9d2-3b65-4583-8740-811e114568d6",
    "prId" : 8107,
    "prUrl" : "https://github.com/digital-asset/daml/pull/8107",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "eb3ebb0f-dfc6-49ba-808a-9b77eb05b63a",
        "parentId" : null,
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "I know it makes sense here but `unknown | undefined` still looks very weird :slightly_smiling_face: ",
        "createdAt" : "2020-11-30T12:26:18Z",
        "updatedAt" : "2020-11-30T12:26:45Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      },
      {
        "id" : "8aecf13d-3c01-4cea-bbea-57f8501ef824",
        "parentId" : "eb3ebb0f-dfc6-49ba-808a-9b77eb05b63a",
        "authorId" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "body" : "I guess it would be clearer if I could write:\r\n```\r\nwarnings?: unknown\r\n```\r\nbut for some reason our TS configuration does not allow that syntax in type declarations.",
        "createdAt" : "2020-11-30T12:53:22Z",
        "updatedAt" : "2020-11-30T12:53:23Z",
        "lastEditedBy" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "tags" : [
        ]
      }
    ],
    "commit" : "9ef77acd9ab74b4100e5099848ebf1c927623f70",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +170,174 @@  status: number;\n  result: unknown;\n  warnings: unknown | undefined;\n}\n"
  },
  {
    "id" : "f9e8f6ee-ec04-409d-a347-fc6f1097b260",
    "prId" : 8040,
    "prUrl" : "https://github.com/digital-asset/daml/pull/8040",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "47b75450-c1de-4d11-ad2e-fbff5953b4aa",
        "parentId" : null,
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "Ah good point, I had forgotten about that.",
        "createdAt" : "2020-11-24T09:53:04Z",
        "updatedAt" : "2020-11-24T14:34:38Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      }
    ],
    "commit" : "6856f16217ca4443fc526bb6270b3af4c146cffd",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +153,157 @@/** @internal\n *\n * Official documentation (docs/source/json-api/search-query-language.rst)\n * currently explicitly forbids the use of lists, textmaps and genmaps in\n * queries. As long as that restriction stays, there is no need for any kind of"
  },
  {
    "id" : "4e44bdb5-c63f-472c-91a3-42278caf0987",
    "prId" : 7801,
    "prUrl" : "https://github.com/digital-asset/daml/pull/7801",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7b021af6-4c7e-49b1-bc6e-b65aab65faf6",
        "parentId" : null,
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "Did you intend to keep this? Itâ€™s just `identity` on `query` with tons of warnings and `console.log`.",
        "createdAt" : "2020-11-10T13:14:34Z",
        "updatedAt" : "2020-11-12T10:25:15Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      },
      {
        "id" : "6eacd840-4bef-4f58-a089-549f318dbc43",
        "parentId" : "7b021af6-4c7e-49b1-bc6e-b65aab65faf6",
        "authorId" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "body" : "Not really, I had completely forgotten about it. I remember having trouble silencing the unused warning; the reason this function exists was to remind me that something has to be done about encoding queries at some point. I'll see if I can clean that up a little, and otherwise I'll turn that into a comment instead.",
        "createdAt" : "2020-11-11T15:38:27Z",
        "updatedAt" : "2020-11-12T10:25:15Z",
        "lastEditedBy" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "tags" : [
        ]
      }
    ],
    "commit" : "03a2359dab1deba28d016e518e9932fab4052c9d",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +151,155 @@// TODO(MH): Support comparison queries.\n\n/** @internal\n *\n */"
  },
  {
    "id" : "eb5b7491-bfbf-4526-9635-be8fb5039159",
    "prId" : 7801,
    "prUrl" : "https://github.com/digital-asset/daml/pull/7801",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "758ef325-c243-4750-af97-c071a9552633",
        "parentId" : null,
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "Perhaps worth adding a comment that this _should_ be implemented at some point and weâ€™re just leaving it out of this PR.",
        "createdAt" : "2020-11-11T17:53:26Z",
        "updatedAt" : "2020-11-12T10:25:15Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      },
      {
        "id" : "8e1c01ba-30ef-430d-80b9-452b32d76ddc",
        "parentId" : "758ef325-c243-4750-af97-c071a9552633",
        "authorId" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "body" : "ðŸ¤¦ Looks like I lost my TODO comment.",
        "createdAt" : "2020-11-12T10:03:52Z",
        "updatedAt" : "2020-11-12T10:25:15Z",
        "lastEditedBy" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "tags" : [
        ]
      }
    ],
    "commit" : "03a2359dab1deba28d016e518e9932fab4052c9d",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +156,160 @@function encodeQuery<T extends object, K, I extends string>(template: Template<T, K, I>, query?: Query<T>): unknown {\n  // TODO: actually implement this.\n  // I could not get the \"unused\" warning silenced, but this seems to count as \"used\"\n  [template];\n  return query;"
  },
  {
    "id" : "aeee7e00-c407-46d7-8573-a2714d58d180",
    "prId" : 7801,
    "prUrl" : "https://github.com/digital-asset/daml/pull/7801",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f110772b-119f-406a-bcb3-a5cc8ae1d780",
        "parentId" : null,
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "I feel like optional chaining should work for this somehow but Iâ€™m not sure how :thinking: ",
        "createdAt" : "2020-11-11T18:13:55Z",
        "updatedAt" : "2020-11-12T10:25:15Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      },
      {
        "id" : "9a655e20-4bd4-49ad-a008-e0f5b8a382d3",
        "parentId" : "f110772b-119f-406a-bcb3-a5cc8ae1d780",
        "authorId" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "body" : "It seems like [optional chaining in TypeScript](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html) is a bit object-centric: if what you want to do is access a property of the object (`o?.prop`), or call the object as a function (`o?.(args)`), it works, but I don't see a way to use it as an argument to something else. I may be missing something though; happy to take suggestions for making this better.",
        "createdAt" : "2020-11-12T10:12:39Z",
        "updatedAt" : "2020-11-12T10:25:15Z",
        "lastEditedBy" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "tags" : [
        ]
      },
      {
        "id" : "6ccdbe69-984a-459b-b45c-8cbf3be67f67",
        "parentId" : "f110772b-119f-406a-bcb3-a5cc8ae1d780",
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "Yeah I couldnâ€™t figure out a way to use optional chaining here either. I donâ€™t know why they donâ€™t just have an `fmap` :disappointed: ",
        "createdAt" : "2020-11-12T10:27:33Z",
        "updatedAt" : "2020-11-12T10:27:33Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      }
    ],
    "commit" : "03a2359dab1deba28d016e518e9932fab4052c9d",
    "line" : 93,
    "diffHunk" : "@@ -1,1 +722,726 @@    let lastContractId: ContractId<T> | null = null;\n    const request = [{templateId: template.templateId, key: template.keyEncode(key)}];\n    const reconnectRequest = (): object[] => [{...request[0], 'contractIdAtOffset': lastContractId && ContractId(template).encode(lastContractId)}]\n    const change = (contract: CreateEvent<T, K, I> | null, events: readonly Event<T, K, I>[]): CreateEvent<T, K, I> | null => {\n      for (const event of events) {"
  },
  {
    "id" : "b4895e2c-5b97-4655-97b1-2dcb6810ebe0",
    "prId" : 7404,
    "prUrl" : "https://github.com/digital-asset/daml/pull/7404",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b15d08fe-ebb7-4209-8ee6-db8fbf7137c4",
        "parentId" : null,
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "Is this synchronous, i.e., do the listeners actually receive the event before they are removed?",
        "createdAt" : "2020-09-16T08:57:48Z",
        "updatedAt" : "2020-09-16T09:56:20Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      },
      {
        "id" : "28e9cc71-ab6c-4831-8179-7f56c9327b37",
        "parentId" : "b15d08fe-ebb7-4209-8ee6-db8fbf7137c4",
        "authorId" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "body" : "Yes.",
        "createdAt" : "2020-09-16T09:41:39Z",
        "updatedAt" : "2020-09-16T09:56:20Z",
        "lastEditedBy" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "tags" : [
        ]
      }
    ],
    "commit" : "d0b4318b65d3ff40751a756b838044db7b29d2aa",
    "line" : 39,
    "diffHunk" : "@@ -1,1 +556,560 @@    const closeStream = (status: { code: number; reason: string }): void => {\n      streamClosed = true;\n      emitter.emit('close', status);\n      emitter.removeAllListeners();\n    };"
  },
  {
    "id" : "e4c84261-4682-4f35-a4b3-fa88596ba855",
    "prId" : 7404,
    "prUrl" : "https://github.com/digital-asset/daml/pull/7404",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5e472d43-d54b-4006-ad90-8e93e0c62c8a",
        "parentId" : null,
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "Is there a reason why you chose 4001 and 4000 or are those somewhat arbitrary choices?",
        "createdAt" : "2020-09-16T09:01:12Z",
        "updatedAt" : "2020-09-16T09:56:20Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      },
      {
        "id" : "b14f23bf-56d2-42b1-ada4-3b7742a9eac3",
        "parentId" : "5e472d43-d54b-4006-ad90-8e93e0c62c8a",
        "authorId" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "body" : "Somewhat arbitrary, but <4000 is reserved for the protocol, 4000+ is for applications.",
        "createdAt" : "2020-09-16T09:40:21Z",
        "updatedAt" : "2020-09-16T09:56:20Z",
        "lastEditedBy" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "tags" : [
        ]
      }
    ],
    "commit" : "d0b4318b65d3ff40751a756b838044db7b29d2aa",
    "line" : 56,
    "diffHunk" : "@@ -1,1 +573,577 @@        } else {\n          // ws has closed too quickly / never managed to connect: we give up\n          closeStream({code: 4001, reason: 'ws connection failed'});\n        }\n      } // no else: if the stream is closed we don't need to keep a ws"
  },
  {
    "id" : "f284069f-797d-4e9b-b5d7-bb6181fd801f",
    "prId" : 7084,
    "prUrl" : "https://github.com/digital-asset/daml/pull/7084",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "62983d43-5128-49e0-9045-1fa56d318f34",
        "parentId" : null,
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "You need to change how we handle reconnects. The JSON API can return a `null` offset when it was ledger begin but it only accepts strings. The only way to get a null offset is if there were literally no transactions, so we basically reset and treat this as the initial connect with no event. If you want to be safe, reset `state` to `init` although afaict this isnâ€™t necessary since the list of events will have been empty so we never called `change`.",
        "createdAt" : "2020-08-11T11:52:34Z",
        "updatedAt" : "2020-08-11T13:16:33Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      },
      {
        "id" : "5e9b8faf-15b1-4a77-bdfd-b78576683a18",
        "parentId" : "62983d43-5128-49e0-9045-1fa56d318f34",
        "authorId" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "body" : "Sorry not up to date on this issue. Is that considered correct behaviour from the JSON API? It seems really weird it would produce values it cannot consume, especially for a parameter that is specifically meant as \"this is an opaque thing you need to give back to me later on\".",
        "createdAt" : "2020-08-11T12:30:27Z",
        "updatedAt" : "2020-08-11T13:16:33Z",
        "lastEditedBy" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "tags" : [
        ]
      },
      {
        "id" : "95f02981-8884-4055-8221-500f7fa09928",
        "parentId" : "62983d43-5128-49e0-9045-1fa56d318f34",
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "Itâ€™s at least documented behavior. It seems reasonable to allow this but I would consider this a separate issue. Given that we can fix this only in the typescript libraries, I would fix it here for now.\r\n\r\nThere is also a bug in the JSON API where it returns `null` when it shouldnâ€™t but thatâ€™s a separate issue. The issue addressed here cannot be hit on Sandbox since it will never return ledger begin on the ACS (but other ledgers might).",
        "createdAt" : "2020-08-11T12:42:46Z",
        "updatedAt" : "2020-08-11T13:16:33Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      },
      {
        "id" : "dc679429-0ba0-4811-bdb1-79dfb1a7e49a",
        "parentId" : "62983d43-5128-49e0-9045-1fa56d318f34",
        "authorId" : "6bbb482c-d598-4c97-ac37-b89d94b27ee4",
        "body" : "So now we don't send the `offset` message when our last offset is `null`. My understanding is that this will start the stream from the very beginning of transactions which is correct here.",
        "createdAt" : "2020-08-11T13:16:12Z",
        "updatedAt" : "2020-08-11T13:16:33Z",
        "lastEditedBy" : "6bbb482c-d598-4c97-ac37-b89d94b27ee4",
        "tags" : [
        ]
      }
    ],
    "commit" : "28338100f26fe98c42cd5c9b26169151d0e5fbac",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +506,510 @@    let state = init;\n    let isReconnecting: boolean = false;\n    const emitter = new EventEmitter();\n    const onOpen = (): void => {\n      if (isReconnecting) {"
  },
  {
    "id" : "21ebccff-79be-47f0-b6bd-78a26117a773",
    "prId" : 7084,
    "prUrl" : "https://github.com/digital-asset/daml/pull/7084",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a820acb5-65c6-470c-9629-0c394f7226a1",
        "parentId" : null,
        "authorId" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "body" : "Do we have any case for distinguishing between undefined and null here? If not, could we simplify the type and not allow undefined, and start with `null` as the initial value?",
        "createdAt" : "2020-08-11T12:33:20Z",
        "updatedAt" : "2020-08-11T13:16:33Z",
        "lastEditedBy" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "tags" : [
        ]
      },
      {
        "id" : "f4284710-92fd-4411-8e24-936d1995fce2",
        "parentId" : "a820acb5-65c6-470c-9629-0c394f7226a1",
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "Quoting the comment from the source:\r\n```\r\n      // we try to reconnect if we could connect previously and we were live for at least\r\n      // 'reconnectThreshold'.\r\n```\r\nSo there is a difference, we will reconnect with `null` but not with `undefined`. The distinction here seems meaningful so I would argue for keeping it.",
        "createdAt" : "2020-08-11T12:47:12Z",
        "updatedAt" : "2020-08-11T13:16:33Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      }
    ],
    "commit" : "28338100f26fe98c42cd5c9b26169151d0e5fbac",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +503,507 @@    let ws = new WebSocket(this.wsBaseUrl + endpoint, protocols);\n    let isLiveSince: undefined | number = undefined;\n    let lastOffset: undefined | null | string = undefined;\n    let state = init;\n    let isReconnecting: boolean = false;"
  },
  {
    "id" : "7d99970b-bab1-4620-8fff-365a931bce13",
    "prId" : 7066,
    "prUrl" : "https://github.com/digital-asset/daml/pull/7066",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "82377aa2-825c-4858-84a2-79ac2b380099",
        "parentId" : null,
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "As far as I can tell, this is fully backwards compatible with `streamQuery`, i.e., any valid invocation of `streamQuery` is a valid invocation of `streamQueries` and will behave identical (in terms of performance, the request made to the JSON API and also the result returned to the user). Assuming that is correct, Iâ€™m leaning towards extending `streamQuery` instead of adding `streamQueries` and annoying our users with a deprecation cycle.\r\nWhat do you think?",
        "createdAt" : "2020-08-10T07:30:06Z",
        "updatedAt" : "2020-09-08T14:23:47Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      },
      {
        "id" : "d672adb5-e1b8-4f63-9363-1114b09dd4d2",
        "parentId" : "82377aa2-825c-4858-84a2-79ac2b380099",
        "authorId" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "body" : "That was also my impression at first. Based on the existing signature of `streamQuery`, I assumed existing invocations would look like either\r\n```typescript\r\nstreamQuery(templateId)\r\n```\r\nor\r\n```typescript\r\nstreamQuery(templateId, query)\r\n```\r\nand it felt like it would be very natural (and backwards compatible) to extend it to also support\r\n```typescript\r\nstreamQuery(templateId, query1, query2)\r\n```\r\nUnfortunately, the current signature also allows\r\n```typescript\r\nstreamQuery(templateId, undefined)\r\n```\r\nwhich means a backwards-compatible signature would have to look like\r\n```typescript\r\nstreamQuery<T extends object, K, I extends string>(\r\n     template: Template<T, K, I>,\r\n     query?: Query<T>,\r\n     ...queries: Query<T>[]\r\n): ...\r\n```\r\nwhich in turn would force the resulting code to handle the case of\r\n```typescript\r\nstreamQuery(templateId, undefined, query1, query2)\r\n```\r\nwhich just seemed wrong. So when I reached that point I decided deprecation was a better approach. I believe we are still at a stage where it is more important to have a nice API for new users than to not bother existing users, especially when there is a way to make the change through a backwards-compatible deprecation cycle. And I kinda like the new name better, for the new feature set.\r\n\r\nThat said, my knowledge of TypeScript is still very sparse at the moment, so I'm very open to the idea that there may be a way to preserve backwards compatibility _and_ get sane semantics for the new version and I'm just not aware of it.",
        "createdAt" : "2020-08-10T10:14:17Z",
        "updatedAt" : "2020-09-08T14:23:47Z",
        "lastEditedBy" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "tags" : [
        ]
      },
      {
        "id" : "b98312d4-e4a2-437c-9ae0-ca2b31a80395",
        "parentId" : "82377aa2-825c-4858-84a2-79ac2b380099",
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "Good point! I forgot that in JS passing fewer parameters is basically equivalent to passing `undefined` (not entirely, you can differentiate them but almost nobody does). I see the following options:\r\n\r\n1. Break the behavior on `streamQuery(templateId, undefined)` immediately. Technically a breaking change but I expect nobody to run into this and the fix is trivial.\r\n2. Filter out `undefined` for the first query parameter or maybe even all query parameters. Should be easy to implement and makes this non-breaking.\r\n3. 2 but simultaneously deprecate passing `undefined` (in that case, we should only filter it out from the first query). You can define multiple type signatures for one function in typescript. It might be possible to only deprecate one of them to get nice deprecation warnings. Alternatively, just throw a `console.log` at it.\r\n4. The solution proposed in this PR.\r\n\r\nIâ€™m leaning towards 3 as probably the safest option (I expect nobody will actually have to change anything) and we can get rid of the wart later. But Iâ€™m happy to be convinced here.",
        "createdAt" : "2020-08-10T12:16:23Z",
        "updatedAt" : "2020-09-08T14:23:47Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      },
      {
        "id" : "95dd6975-33a7-4b7e-bc69-2df4f6ed2234",
        "parentId" : "82377aa2-825c-4858-84a2-79ac2b380099",
        "authorId" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "body" : "> But Iâ€™m happy to be convinced here.\r\n\r\nWell then, allow me to try ðŸ™‚\r\n\r\nI suspect \"nobody\" is actually using the raw `streamQuery`, instead of going through the [react bindings](https://github.com/digital-asset/daml/blob/master/language-support/ts/daml-react/createLedgerContext.ts#L122), which, by the way, do explicitly pass `undefined`. But it's still part of our public API so let's assume breaking it is a bad thing.\r\n\r\nI believe option 1 is strictly inferior to this PR because it's a breaking change with no upgrade path: your code will just not compile if you try to upgrade. That seems bad. In comparison, this PR adds a new name and leaves the existing one completely unchanged. You can upgrade to the next version, then have some time to fix all the deprecation warnings while your app keeps working.\r\n\r\nOptions 2 and 3 seem very messy, and with the kind of mess that sticks. We'd be committing to an API with a singular name accepting a list of things that, according to their type, can be undefined, but with documentation saying they shouldn't be, and an implementation that makes them harmless for now. If we can indeed deprecate just one signature, we don't gain anything over this PR; if we can't, we'll end up with the downsides of 1 again later on. Or we'll live with the mess forever.\r\n\r\nI don't quite understand why we'd shy away from a clean deprecation cycle, especially for a source-based language. However, there is another option you have not mentioned: keep `streamQuery` and `streamFetchByKey` exactly as they are right now, and add the two new functions with no deprecation. I believe that leaves our API overall a little bit confusing and clearly overlapping, but if you don't like deprecations I think that's the best approach.",
        "createdAt" : "2020-08-10T14:54:42Z",
        "updatedAt" : "2020-09-08T14:23:47Z",
        "lastEditedBy" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "tags" : [
        ]
      },
      {
        "id" : "2a49164c-b99c-413f-aeac-a119e32af32d",
        "parentId" : "82377aa2-825c-4858-84a2-79ac2b380099",
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "Iâ€™m not really worried about the deprecation cycle. That seems very reasonable. What I am slightly worried about is what seems like a fairly redundant name change. In this case, it somewhat makes sense but it still feels pretty arbitrary (the endpoint name is singular as well). Consider the case where we didnâ€™t want to add more queries and just deprecate explicitly passing `undefined`. I have no idea what a sensible name would be there.\r\n\r\nAs for 3, we do gain something for the case where you explicitly pass a single query or donâ€™t pass a query both of which need changing in this PR but not if we can only deprecate passing `undefined` explicitly.",
        "createdAt" : "2020-08-10T15:17:09Z",
        "updatedAt" : "2020-09-08T14:23:47Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      },
      {
        "id" : "80d1f9ed-0fc4-48e8-b01a-b1881699cda1",
        "parentId" : "82377aa2-825c-4858-84a2-79ac2b380099",
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "That said, your point that most people do not use this directly is pretty convincing. It does raise the question of what we do with the hooks though.",
        "createdAt" : "2020-08-10T15:23:24Z",
        "updatedAt" : "2020-09-08T14:23:47Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      },
      {
        "id" : "32925695-575e-473a-9894-af1092ff4195",
        "parentId" : "82377aa2-825c-4858-84a2-79ac2b380099",
        "authorId" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "body" : "I personally think changing the name is a good thing, as that is what allows us to have a clean deprecation cycle where both versions can be present in parallel and consumers of the API can very easily spot which places need to be updated. I agree a good second name would be harder to find if you just wanted to remove the `undefined` option, but even then I would argue for a new `streamQuery2` method over changing the existing one. Maybe I'm weird, though.\r\n\r\nI think not having to change your code when the underlying behaviour has changed is actually a bad thing, so in my mind that counts against option 3.\r\n\r\nI'll take a look at the react bindings. Agree they probably need some sort of similar update.",
        "createdAt" : "2020-08-10T16:24:37Z",
        "updatedAt" : "2020-09-08T14:23:47Z",
        "lastEditedBy" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "tags" : [
        ]
      },
      {
        "id" : "ed6d1f7e-4ea3-410f-ac2b-eec940ed77ae",
        "parentId" : "82377aa2-825c-4858-84a2-79ac2b380099",
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "Alright then letâ€™s go with the new name here. I donâ€™t mind tackling the react bindings in a separate PR.",
        "createdAt" : "2020-08-10T16:28:06Z",
        "updatedAt" : "2020-09-08T14:23:47Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      }
    ],
    "commit" : "0ef0422dc9dbfe8749fff1b56b9a06706cecc569",
    "line" : 115,
    "diffHunk" : "@@ -1,1 +661,665 @@   * @typeparam I The contract id type.\n   */\n  streamQueries<T extends object, K, I extends string>(\n    template: Template<T, K, I>,\n    queries: Query<T>[],"
  },
  {
    "id" : "3f26fdb2-72eb-48b8-ab83-e9173f8fd5c8",
    "prId" : 7066,
    "prUrl" : "https://github.com/digital-asset/daml/pull/7066",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fc3b0181-d33b-4636-b830-2492bed5e953",
        "parentId" : null,
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "Are the underscores not sufficient to silence `no-unused-vars`?",
        "createdAt" : "2020-08-12T08:31:14Z",
        "updatedAt" : "2020-09-08T14:23:47Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      },
      {
        "id" : "71c9c559-0c70-4277-8a0a-9d2dd81fcf91",
        "parentId" : "fc3b0181-d33b-4636-b830-2492bed5e953",
        "authorId" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "body" : "Looks like they are, yes. I've removed the silencer for that one.",
        "createdAt" : "2020-08-14T17:50:44Z",
        "updatedAt" : "2020-09-08T14:23:47Z",
        "lastEditedBy" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "tags" : [
        ]
      },
      {
        "id" : "c311d8ad-15ee-4fc4-8a57-a4b2a4ee246c",
        "parentId" : "fc3b0181-d33b-4636-b830-2492bed5e953",
        "authorId" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "body" : "Ah, no, they are not. Sorry, had forgotten linting is part of test, not build.",
        "createdAt" : "2020-08-14T17:51:26Z",
        "updatedAt" : "2020-09-08T14:23:47Z",
        "lastEditedBy" : "8afc1e61-17e0-4309-b9ea-f0690fd56c47",
        "tags" : [
        ]
      },
      {
        "id" : "2aa68dab-b356-4654-a431-c418b22d4d9c",
        "parentId" : "fc3b0181-d33b-4636-b830-2492bed5e953",
        "authorId" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "body" : "Thanks for checking! I guess I was too used to this from Haskell. It looks like you can configure ignore patterns but thatâ€™s definitely something for a different PR if we want to do this at all.",
        "createdAt" : "2020-08-14T18:32:46Z",
        "updatedAt" : "2020-09-08T14:23:47Z",
        "lastEditedBy" : "7ddbf119-9fd4-4e95-b47a-aa60f2648372",
        "tags" : [
        ]
      }
    ],
    "commit" : "0ef0422dc9dbfe8749fff1b56b9a06706cecc569",
    "line" : 194,
    "diffHunk" : "@@ -1,1 +733,737 @@    function off(t: 'change', l: (v: V, events: readonly Event<T, K, I>[]) => void): void;\n    function off(t: 'close', l: (e: StreamCloseEvent) => void): void;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unused-vars, @typescript-eslint/no-empty-function\n    function off(_t: any, _l: any): any {}\n    // eslint-disable-next-line @typescript-eslint/no-empty-function"
  },
  {
    "id" : "68d28d30-31d6-4464-b83d-ffd030ff8e28",
    "prId" : 5416,
    "prUrl" : "https://github.com/digital-asset/daml/pull/5416",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4051b3ee-bd2c-437d-9a4d-53b9bf3000b8",
        "parentId" : null,
        "authorId" : "6bbb482c-d598-4c97-ac37-b89d94b27ee4",
        "body" : "@hurryabit I'm a bit confused why this has to be lazy. I tried to define `reconnectRequest` as a variable or a function of the contractId, but it wouldn't change the `contractIdAtOffset` field.",
        "createdAt" : "2020-04-06T17:43:37Z",
        "updatedAt" : "2020-04-14T10:01:56Z",
        "lastEditedBy" : "6bbb482c-d598-4c97-ac37-b89d94b27ee4",
        "tags" : [
        ]
      },
      {
        "id" : "4797ff26-e6b0-4209-980c-b5339908e51e",
        "parentId" : "4051b3ee-bd2c-437d-9a4d-53b9bf3000b8",
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "This can't be a variable since that would mean that you always use `null` for `lastContractId`, which is the value when we execute this line. What do you mean by \"a function of the contract id\" in this context?",
        "createdAt" : "2020-04-07T10:56:35Z",
        "updatedAt" : "2020-04-14T10:01:56Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "4d78ca89-a869-4297-8fb8-e8386ea59e63",
        "parentId" : "4051b3ee-bd2c-437d-9a4d-53b9bf3000b8",
        "authorId" : "6bbb482c-d598-4c97-ac37-b89d94b27ee4",
        "body" : "a function of type `contractId -> lastContractId`",
        "createdAt" : "2020-04-07T11:02:53Z",
        "updatedAt" : "2020-04-14T10:01:56Z",
        "lastEditedBy" : "6bbb482c-d598-4c97-ac37-b89d94b27ee4",
        "tags" : [
        ]
      }
    ],
    "commit" : "66ada6cd985bbd0ed3e23a2cc8ac9b3c1ff91066",
    "line" : 141,
    "diffHunk" : "@@ -1,1 +626,630 @@    let lastContractId: ContractId<T> | null = null;\n    const request = [{templateId: template.templateId, key}];\n    const reconnectRequest = (): object[] => [{...request[0], 'contractIdAtOffset': lastContractId}]\n    const change = (contract: CreateEvent<T, K, I> | null, events: readonly Event<T, K, I>[]): CreateEvent<T, K, I> | null => {\n      // NOTE(MH, #4564): We're very lenient here. We should not see a create"
  },
  {
    "id" : "263cb0b9-e1a1-45f9-97b3-a60b0eb5ab69",
    "prId" : 5416,
    "prUrl" : "https://github.com/digital-asset/daml/pull/5416",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6767dc5e-7bcb-47e4-8a08-601926c92ff6",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "I thought a bit more about this. I don't think we want to have been live for at least X seconds but rather have been connected for X seconds. Imagine your load balancer kills all connections after 1 minute and you set this threshold to 30 seconds. If it takes 40 seconds to go live because there's quite a lot of data coming from the ACS, we would not reconnect. But I would definitely consider a situation worthy of reconnecting.\r\n\r\nSince this is a non-breaking improvement, let's do it in a follow-up PR though.",
        "createdAt" : "2020-04-14T09:29:01Z",
        "updatedAt" : "2020-04-14T10:01:56Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      }
    ],
    "commit" : "66ada6cd985bbd0ed3e23a2cc8ac9b3c1ff91066",
    "line" : 97,
    "diffHunk" : "@@ -1,1 +545,549 @@      const now = new Date().getTime();\n      // we try to reconnect if we could connect previously and we were live for at least\n      // 'reconnectThreshold'.\n      if (lastOffset !== undefined && isLiveSince !== undefined && now - isLiveSince >= this.reconnectThreshold) {\n        isLiveSince = undefined;"
  },
  {
    "id" : "6af55f66-ce97-49ad-bf2b-b89b733a087d",
    "prId" : 5416,
    "prUrl" : "https://github.com/digital-asset/daml/pull/5416",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "da2620bf-eb4d-447f-9166-de7c49fd38d9",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "Let's better be safe than sorry:\r\n```suggestion\r\n        isReconnecting = true;\r\n        ws.removeEventListener('open', onOpen);\r\n        ws.removeEventListener('message', onMessage);\r\n        ws.removeEventListener('close', onClose);\r\n```",
        "createdAt" : "2020-04-14T09:31:25Z",
        "updatedAt" : "2020-04-14T10:01:56Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      }
    ],
    "commit" : "66ada6cd985bbd0ed3e23a2cc8ac9b3c1ff91066",
    "line" : 100,
    "diffHunk" : "@@ -1,1 +548,552 @@      if (lastOffset !== undefined && isLiveSince !== undefined && now - isLiveSince >= this.reconnectThreshold) {\n        isLiveSince = undefined;\n        isReconnecting = true;\n        ws = new WebSocket(this.wsBaseUrl + endpoint, protocols);\n        ws.addEventListener('open', onOpen);"
  },
  {
    "id" : "15017760-6b7b-468f-bada-be451625bb66",
    "prId" : 5416,
    "prUrl" : "https://github.com/digital-asset/daml/pull/5416",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e507950e-78d1-4120-b50f-8b533cba91c9",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "```suggestion\r\n    const reconnectRequest = (): object[] => [{...request[0], 'contractIdAtOffset': lastContractId}];\r\n```",
        "createdAt" : "2020-04-14T09:36:40Z",
        "updatedAt" : "2020-04-14T10:01:56Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      }
    ],
    "commit" : "66ada6cd985bbd0ed3e23a2cc8ac9b3c1ff91066",
    "line" : 141,
    "diffHunk" : "@@ -1,1 +626,630 @@    let lastContractId: ContractId<T> | null = null;\n    const request = [{templateId: template.templateId, key}];\n    const reconnectRequest = (): object[] => [{...request[0], 'contractIdAtOffset': lastContractId}]\n    const change = (contract: CreateEvent<T, K, I> | null, events: readonly Event<T, K, I>[]): CreateEvent<T, K, I> | null => {\n      // NOTE(MH, #4564): We're very lenient here. We should not see a create"
  },
  {
    "id" : "fc6fb0cf-8c3d-429b-8436-f71ed10edb7c",
    "prId" : 5416,
    "prUrl" : "https://github.com/digital-asset/daml/pull/5416",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "88cc499c-e613-4c5d-a4a9-db642c4161a0",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "I know I'm guilty of this myself... But I'm also still learning, particularly through reading code.\r\n```suggestion\r\n      lastContractId = contract !== null ? contract.contractId : null\r\n```",
        "createdAt" : "2020-04-14T09:37:52Z",
        "updatedAt" : "2020-04-14T10:01:56Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      }
    ],
    "commit" : "66ada6cd985bbd0ed3e23a2cc8ac9b3c1ff91066",
    "line" : 149,
    "diffHunk" : "@@ -1,1 +642,646 @@        }\n      }\n      lastContractId = contract ? contract.contractId : null\n      return contract;\n    }"
  },
  {
    "id" : "19b5cb45-f56a-4c9d-89e1-8f525219afc9",
    "prId" : 5416,
    "prUrl" : "https://github.com/digital-asset/daml/pull/5416",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8a2f9e76-5138-41c8-b9df-3c84acbd52f3",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "Why is this an array when `request` is not?",
        "createdAt" : "2020-04-14T09:38:10Z",
        "updatedAt" : "2020-04-14T10:01:56Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      }
    ],
    "commit" : "66ada6cd985bbd0ed3e23a2cc8ac9b3c1ff91066",
    "line" : 122,
    "diffHunk" : "@@ -1,1 +593,597 @@  ): Stream<T, K, I, readonly CreateEvent<T, K, I>[]> {\n    const request = {templateIds: [template.templateId], query};\n    const reconnectRequest = (): object[] => [request];\n    const change = (contracts: readonly CreateEvent<T, K, I>[], events: readonly Event<T, K, I>[]): CreateEvent<T, K, I>[] => {\n      const archiveEvents: Set<ContractId<T>> = new Set();"
  },
  {
    "id" : "a1a64836-207d-421b-889b-644459f1587a",
    "prId" : 5329,
    "prUrl" : "https://github.com/digital-asset/daml/pull/5329",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5970dd56-abbc-484f-9293-d818122f6405",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "We need an `off` function to deregister the handler for the `live` event as well.",
        "createdAt" : "2020-04-01T10:46:47Z",
        "updatedAt" : "2020-04-02T14:58:10Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      },
      {
        "id" : "0e4d29c3-9a92-4b92-85c2-656fec4c7e7b",
        "parentId" : "5970dd56-abbc-484f-9293-d818122f6405",
        "authorId" : "6bbb482c-d598-4c97-ac37-b89d94b27ee4",
        "body" : "added.",
        "createdAt" : "2020-04-01T11:28:06Z",
        "updatedAt" : "2020-04-02T14:58:10Z",
        "lastEditedBy" : "6bbb482c-d598-4c97-ac37-b89d94b27ee4",
        "tags" : [
        ]
      }
    ],
    "commit" : "cf712410e31ad7eed2645e4c306c4276b901b965",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +193,197 @@ */\nexport interface Stream<T extends object, K, I extends string, State> {\n  on(type: 'live', listener: (state: State) => void): void;\n  on(type: 'change', listener: (state: State, events: readonly Event<T, K, I>[]) => void): void;\n  on(type: 'close', listener: (closeEvent: StreamCloseEvent) => void): void;"
  },
  {
    "id" : "0f064e0b-6382-4713-a36f-0e4b25f86fb5",
    "prId" : 5329,
    "prUrl" : "https://github.com/digital-asset/daml/pull/5329",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a2ff516e-b35a-429b-8478-5c26b426b3b5",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "That is exactly what I had in mind. Awesome!",
        "createdAt" : "2020-04-02T09:30:16Z",
        "updatedAt" : "2020-04-02T14:58:10Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      }
    ],
    "commit" : "cf712410e31ad7eed2645e4c306c4276b901b965",
    "line" : 43,
    "diffHunk" : "@@ -1,1 +509,513 @@        if (isRecordWith('offset', json) && !isLive) {\n          isLive = true;\n          emitter.emit('live', state);\n        }\n      } else if (isRecordWith('warnings', json)) {"
  },
  {
    "id" : "cc4882ec-35bc-41c8-a14a-f7e97244a381",
    "prId" : 4993,
    "prUrl" : "https://github.com/digital-asset/daml/pull/4993",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a462e9f6-1214-4864-a9dd-bdfa20bfe36d",
        "parentId" : null,
        "authorId" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "body" : "This function is not exported. Does it show up in the generated docs or do we need to do something to hide it explicitly? Same in many places below.",
        "createdAt" : "2020-03-16T10:05:54Z",
        "updatedAt" : "2020-03-16T10:08:19Z",
        "lastEditedBy" : "695308fb-441d-4069-a1cc-f8c5944daace",
        "tags" : [
        ]
      }
    ],
    "commit" : "eb03a2fb12ffffc05a50686e27c9b62dc48c2bc5",
    "line" : 43,
    "diffHunk" : "@@ -1,1 +49,53 @@/**\n * Decoder for a [[CreateEvent]].\n */\nconst decodeCreateEvent = <T extends object, K, I extends string>(template: Template<T, K, I>): jtv.Decoder<CreateEvent<T, K, I>> => jtv.object({\n  templateId: jtv.constant(template.templateId),"
  },
  {
    "id" : "f51464cb-90e4-4969-b38c-ad391ef36478",
    "prId" : 4192,
    "prUrl" : "https://github.com/digital-asset/daml/pull/4192",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a3ed53b9-f990-4841-a110-f06900544af7",
        "parentId" : null,
        "authorId" : "4c501a40-3340-4f35-b66e-fcfb75e20f37",
        "body" : "```suggestion\r\n  async create<T extends object, K>(template: Template<T, K>, payload: T): Promise<CreateEvent<T, K>> {\r\n```\r\n\r\nSeems more in the spirit of the change, no?",
        "createdAt" : "2020-01-23T21:21:23Z",
        "updatedAt" : "2020-01-23T21:21:58Z",
        "lastEditedBy" : "4c501a40-3340-4f35-b66e-fcfb75e20f37",
        "tags" : [
        ]
      }
    ],
    "commit" : "57506288ad990fb12d56912dc7cd7978b9406ec5",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +155,159 @@   * Create a contract for a given template.\n   */\n  async create<T extends object, K>(template: Template<T, K>, contractPayload: T): Promise<CreateEvent<T, K>> {\n    const command = {\n      templateId: template.templateId,"
  },
  {
    "id" : "ac2fd99f-4681-4398-98a8-968124cbe396",
    "prId" : 4192,
    "prUrl" : "https://github.com/digital-asset/daml/pull/4192",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e38f8bdf-189e-4ad8-9d73-bd48bed9a805",
        "parentId" : null,
        "authorId" : "4c501a40-3340-4f35-b66e-fcfb75e20f37",
        "body" : "```suggestion\r\n      payload,\r\n```",
        "createdAt" : "2020-01-23T21:21:33Z",
        "updatedAt" : "2020-01-23T21:21:59Z",
        "lastEditedBy" : "4c501a40-3340-4f35-b66e-fcfb75e20f37",
        "tags" : [
        ]
      },
      {
        "id" : "982be2f0-9454-490c-ab17-168efe966458",
        "parentId" : "e38f8bdf-189e-4ad8-9d73-bd48bed9a805",
        "authorId" : "9da357e5-66f5-424f-b28c-d68ddac2a372",
        "body" : "I guess, it is just in a few other places, @hurryabit refers to the entire command as a payload.",
        "createdAt" : "2020-01-23T21:47:24Z",
        "updatedAt" : "2020-01-23T21:47:25Z",
        "lastEditedBy" : "9da357e5-66f5-424f-b28c-d68ddac2a372",
        "tags" : [
        ]
      },
      {
        "id" : "94e1f479-f68e-434a-99ee-42fdd027f79f",
        "parentId" : "e38f8bdf-189e-4ad8-9d73-bd48bed9a805",
        "authorId" : "4c501a40-3340-4f35-b66e-fcfb75e20f37",
        "body" : "Fair, well, whatever you think is best.",
        "createdAt" : "2020-01-23T21:48:22Z",
        "updatedAt" : "2020-01-23T21:48:22Z",
        "lastEditedBy" : "4c501a40-3340-4f35-b66e-fcfb75e20f37",
        "tags" : [
        ]
      }
    ],
    "commit" : "57506288ad990fb12d56912dc7cd7978b9406ec5",
    "line" : 10,
    "diffHunk" : "@@ -1,1 +158,162 @@    const command = {\n      templateId: template.templateId,\n      payload: contractPayload,\n    };\n    const json = await this.submit('command/create', command);"
  }
]