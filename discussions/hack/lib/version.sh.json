[
  {
    "id" : "e76d319a-dd20-4da5-be41-ab8642cef2af",
    "prId" : 81173,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/81173#pullrequestreview-277950188",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5cf0a2d6-7b1c-4bcc-9a11-869ec0f3b0f5",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "please open a follow up issue to collapse the kubectl pkg/version and consumers of the k8s.io/kubernetes/pkg/version onto component-base/version and remove as many of the duplicate packages as we can",
        "createdAt" : "2019-08-21T17:08:32Z",
        "updatedAt" : "2019-08-21T17:58:42Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "c2f035f7-ad63-4a43-9855-a21296c8781f",
        "parentId" : "5cf0a2d6-7b1c-4bcc-9a11-869ec0f3b0f5",
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "https://github.com/kubernetes/kubernetes/issues/81731",
        "createdAt" : "2019-08-21T17:26:05Z",
        "updatedAt" : "2019-08-21T17:58:42Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      }
    ],
    "commit" : "94b612fbd6bee1d88a3193763249d4244070dbee",
    "line" : 2,
    "diffHunk" : "@@ -1,1 +160,164 @@      \"-X '${KUBE_GO_PACKAGE}/pkg/version.${key}=${val}'\"\n      \"-X '${KUBE_GO_PACKAGE}/vendor/k8s.io/client-go/pkg/version.${key}=${val}'\"\n      \"-X '${KUBE_GO_PACKAGE}/vendor/k8s.io/kubectl/pkg/version.${key}=${val}'\"\n      \"-X '${KUBE_GO_PACKAGE}/cmd/kubeadm/app/version.${key}=${val}'\"\n      \"-X '${KUBE_GO_PACKAGE}/vendor/k8s.io/component-base/version.${key}=${val}'\""
  },
  {
    "id" : "02fcfcdd-062a-4328-abc2-8064d9c54b31",
    "prId" : 81173,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/81173#pullrequestreview-277959276",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "edc8ea7a-c374-42fa-ae07-fea9239d4b89",
        "parentId" : null,
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "@stealthybox this needs follow-ups in all of our components.",
        "createdAt" : "2019-08-21T17:29:08Z",
        "updatedAt" : "2019-08-21T17:58:42Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "806bcff3-4175-4d12-91dd-a8de697028fb",
        "parentId" : "edc8ea7a-c374-42fa-ae07-fea9239d4b89",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "i.e. use this, not pkg/version",
        "createdAt" : "2019-08-21T17:29:20Z",
        "updatedAt" : "2019-08-21T17:58:42Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "8fbc0ba8-8c69-4ac4-8636-9c66315c8be1",
        "parentId" : "edc8ea7a-c374-42fa-ae07-fea9239d4b89",
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "https://github.com/kubernetes/kubernetes/issues/81731",
        "createdAt" : "2019-08-21T17:41:51Z",
        "updatedAt" : "2019-08-21T17:58:42Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      },
      {
        "id" : "d59e04d0-def5-4a82-8a20-fa21a4e08ed5",
        "parentId" : "edc8ea7a-c374-42fa-ae07-fea9239d4b89",
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "Yeah, we have like a bazillion copies of this thing currently everywhere.",
        "createdAt" : "2019-08-21T17:42:21Z",
        "updatedAt" : "2019-08-21T17:58:42Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      }
    ],
    "commit" : "94b612fbd6bee1d88a3193763249d4244070dbee",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +162,166 @@      \"-X '${KUBE_GO_PACKAGE}/vendor/k8s.io/kubectl/pkg/version.${key}=${val}'\"\n      \"-X '${KUBE_GO_PACKAGE}/cmd/kubeadm/app/version.${key}=${val}'\"\n      \"-X '${KUBE_GO_PACKAGE}/vendor/k8s.io/component-base/version.${key}=${val}'\"\n    )\n  }"
  },
  {
    "id" : "9cfa6729-e7c2-4382-84e6-9654da91a5bd",
    "prId" : 79320,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/79320#pullrequestreview-253178287",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cd6c5153-7cc0-4017-a803-a0c502a0d0ad",
        "parentId" : null,
        "authorId" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "body" : "in particular I really don't think we want to try to do this in pure shell parameter substitution (not even sure if you can?) ... using `sed` here is immensely reasonable, so we disable the lint against unnecessary sed usage.\r\n\r\nthe shellcheck wiki entry has a similar example.",
        "createdAt" : "2019-06-24T02:29:09Z",
        "updatedAt" : "2019-06-26T16:20:29Z",
        "lastEditedBy" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "tags" : [
        ]
      }
    ],
    "commit" : "59c4eb2a3888d8d19134379369220bbcb86a393e",
    "line" : 22,
    "diffHunk" : "@@ -1,1 +82,86 @@        # shellcheck disable=SC2001\n        # We have distance to subversion (v1.1.0-subversion-1-gCommitHash)\n        KUBE_GIT_VERSION=$(echo \"${KUBE_GIT_VERSION}\" | sed \"s/-\\([0-9]\\{1,\\}\\)-g\\([0-9a-f]\\{14\\}\\)$/.\\1\\+\\2/\")\n      elif [[ \"${DASHES_IN_VERSION}\" == \"--\" ]] ; then\n        # shellcheck disable=SC2001"
  },
  {
    "id" : "3b9d9437-ba29-49c8-8937-25dce0f4f321",
    "prId" : 57420,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/57420#pullrequestreview-84789283",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d250ae73-821a-4287-9088-b6fa4222aa55",
        "parentId" : null,
        "authorId" : "afe30f83-d47d-46a2-a0cf-d6488ae19bc5",
        "body" : "As said in https://semver.org/\r\n\r\n> Identifiers MUST comprise only ASCII alphanumerics and hyphen [0-9A-Za-z-]",
        "createdAt" : "2017-12-20T14:50:10Z",
        "updatedAt" : "2017-12-20T14:50:10Z",
        "lastEditedBy" : "afe30f83-d47d-46a2-a0cf-d6488ae19bc5",
        "tags" : [
        ]
      },
      {
        "id" : "b864aaa3-67e6-4da1-956b-fef3eec66362",
        "parentId" : "d250ae73-821a-4287-9088-b6fa4222aa55",
        "authorId" : "3eccedfc-5c53-4555-94cb-69f2b56e485c",
        "body" : "This regex is not a very good representation for semver. The fix just allows metadata to be attached to the version to allow the minor and major versions to be parsed correctly. A separate PR should be created, IMO, to fix any issues with the regex itself.",
        "createdAt" : "2017-12-20T15:00:58Z",
        "updatedAt" : "2017-12-20T15:00:58Z",
        "lastEditedBy" : "3eccedfc-5c53-4555-94cb-69f2b56e485c",
        "tags" : [
        ]
      }
    ],
    "commit" : "63e2eacd22b5050140f9630d8ec430a54361d228",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +90,94 @@      # the \"major\" and \"minor\" versions and whether this is the exact tagged\n      # version or whether the tree is between two tagged versions.\n      if [[ \"${KUBE_GIT_VERSION}\" =~ ^v([0-9]+)\\.([0-9]+)(\\.[0-9]+)?([-].*)?([+].*)?$ ]]; then\n        KUBE_GIT_MAJOR=${BASH_REMATCH[1]}\n        KUBE_GIT_MINOR=${BASH_REMATCH[2]}"
  },
  {
    "id" : "f42e1136-13e3-4436-a252-0ba6e532adf2",
    "prId" : 57222,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/57222#pullrequestreview-84309817",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a18edabf-3800-4a6d-8058-1451f48b37a9",
        "parentId" : null,
        "authorId" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "body" : "maybe double-quote these, too?",
        "createdAt" : "2017-12-16T01:45:42Z",
        "updatedAt" : "2017-12-16T01:45:53Z",
        "lastEditedBy" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "tags" : [
        ]
      },
      {
        "id" : "877eb59e-ec39-4c49-a4b2-5f3a75c6b8a2",
        "parentId" : "a18edabf-3800-4a6d-8058-1451f48b37a9",
        "authorId" : "4be9515e-8170-46fe-b6fe-80361e5c022b",
        "body" : "you mean change it like this ?\r\n`local val=\"${2}\"`\r\n\r\nI tested it, it didn't make any change of the value here ...\r\n\r\nSeems only use single-quote to qoute the whole `importpath.name=value` like:\r\n`-X 'k8s.io/kubernetes/pkg/version.gitTreeState=git archive'` \r\nor only qoute the value like:\r\n`-X k8s.io/kubernetes/pkg/version.gitTreeState='git archive'` \r\ncould solve the problem of the value which included spaces.\r\n",
        "createdAt" : "2017-12-16T04:45:49Z",
        "updatedAt" : "2017-12-16T04:46:31Z",
        "lastEditedBy" : "4be9515e-8170-46fe-b6fe-80361e5c022b",
        "tags" : [
        ]
      },
      {
        "id" : "956e5914-4991-4732-b2e6-286a02e6de20",
        "parentId" : "a18edabf-3800-4a6d-8058-1451f48b37a9",
        "authorId" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "body" : "yeah, I think you're right - this PR is sufficient as-is. Thanks!",
        "createdAt" : "2017-12-19T00:09:14Z",
        "updatedAt" : "2017-12-19T00:09:14Z",
        "lastEditedBy" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "tags" : [
        ]
      }
    ],
    "commit" : "4a999d73e33d151bc0b6c55b32f4a849e91f1dc2",
    "line" : 1,
    "diffHunk" : "@@ -1,1 +131,135 @@kube::version::ldflag() {\n  local key=${1}\n  local val=${2}\n\n  # If you update these, also update the list pkg/version/def.bzl."
  },
  {
    "id" : "02f5c84f-5e4f-465a-834e-a26b36385587",
    "prId" : 11941,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "568c7297-7223-4510-bbad-207939cfeea6",
        "parentId" : null,
        "authorId" : "766f642e-1622-4803-803b-05ce306fc30e",
        "body" : "I think we want: `sed \"s/-\\([0-9]\\{1,\\}\\)-g\\([0-9a-f]\\{14\\}\\)$/-\\1\\+\\2/\")` (the only change is a single `.` to `-`)\n\nThe semver line 9 says that you may include `-` inside the prerelease information. On the release branch this would mean you get versions like `v1.0.2-2+abcdef`  which is semver happy.  On the master branch this would mean get versions like `v1.2.0-alpha.0-1+abcdef` which is also semver happy.\n",
        "createdAt" : "2015-07-31T00:29:40Z",
        "updatedAt" : "2015-07-31T00:30:09Z",
        "lastEditedBy" : "766f642e-1622-4803-803b-05ce306fc30e",
        "tags" : [
        ]
      },
      {
        "id" : "47375f0d-ca81-432d-a9e5-ca79a6942bc7",
        "parentId" : "568c7297-7223-4510-bbad-207939cfeea6",
        "authorId" : "766f642e-1622-4803-803b-05ce306fc30e",
        "body" : "/me can't decide in semver.org if `v1.0.0-0.11-0` > `v1.0.0-0.2-0`   is `semver` is only splitting on the `.` and doing alphabetic comparision between `11-0` and `2-0` something tells me it would give the \"wrong\" answer.  Then again, since nothing in the world actually seems to use semver, other than people, and people would do the right thing, maybe it doesn't matter?  Ugggh \n",
        "createdAt" : "2015-07-31T00:40:38Z",
        "updatedAt" : "2015-07-31T00:40:38Z",
        "lastEditedBy" : "766f642e-1622-4803-803b-05ce306fc30e",
        "tags" : [
        ]
      },
      {
        "id" : "af3c91a1-18cf-47a5-928d-96e9b47e4400",
        "parentId" : "568c7297-7223-4510-bbad-207939cfeea6",
        "authorId" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "body" : "Yeah, that's the issue. I got this intentionally right for master because we have some needs for continuous integration, so I really wanted `v1.2.0-alpha.0-1+abcdef` < `v1.2.0`.\n\nIt's not sure how much CI is going to happen on the release branch. Arguably more should. If you look at, say, the FreeBSD model, they have a hierarchy of CURRENT / STABLE / RELEASE, where STABLE is effectively this release branch. In that world, it would be useful if the build numbers that came off the release branch looked \"correct\", whatever that is.\n\nSomething like `v1.0.2-2+abcdef` is compliant, but it's strictly less than `v1.0.2`, hence my comment about a second tag (we could tag `v1.0.3-prerelease`). Which, thinking out loud, I have no idea where you even put the second tag, because I killed the \"dev\" version commit - I could bring that back just for the purpose of tagging, but it seemed like such a wasted commit when the scripts can do it for you.\n",
        "createdAt" : "2015-07-31T12:48:00Z",
        "updatedAt" : "2015-07-31T12:48:00Z",
        "lastEditedBy" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "tags" : [
        ]
      },
      {
        "id" : "8a79b46e-06f3-4ffe-bf99-51738ce5bfed",
        "parentId" : "568c7297-7223-4510-bbad-207939cfeea6",
        "authorId" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "body" : "I'm kind of inclined to punt and make it semver.org parseable but not correctly ordered for now, on the release branch.\n",
        "createdAt" : "2015-07-31T12:50:17Z",
        "updatedAt" : "2015-07-31T12:50:17Z",
        "lastEditedBy" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "tags" : [
        ]
      },
      {
        "id" : "baa2d62e-8fa6-4431-af63-53ff0197442d",
        "parentId" : "568c7297-7223-4510-bbad-207939cfeea6",
        "authorId" : "766f642e-1622-4803-803b-05ce306fc30e",
        "body" : "That sounds good to me. Lets do it. Commit. and Iterate. I've wasted enough of your time.\n",
        "createdAt" : "2015-07-31T14:14:12Z",
        "updatedAt" : "2015-07-31T14:14:12Z",
        "lastEditedBy" : "766f642e-1622-4803-803b-05ce306fc30e",
        "tags" : [
        ]
      },
      {
        "id" : "690aad6d-16b6-4a1e-a7ee-db060b65e132",
        "parentId" : "568c7297-7223-4510-bbad-207939cfeea6",
        "authorId" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "body" : "Er, I'm not sure that's the right change to the regex, for the `master` case. (Sorry, back actually at a computer now.) My goal was something like `v1.1.0-alpha.0.6+84c76d1142ea4d`. The numeric `.6` past the `.0` actually force it to sort numerically, whereas semver says that `.0-6` sorts lexically, so when you get to `.0-10`, it's obnoxious (without doing, say, `printf %010d` or something`).\n",
        "createdAt" : "2015-07-31T16:22:46Z",
        "updatedAt" : "2015-07-31T16:22:46Z",
        "lastEditedBy" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "tags" : [
        ]
      },
      {
        "id" : "784ec848-82d8-4a9b-958f-fe2a866616d3",
        "parentId" : "568c7297-7223-4510-bbad-207939cfeea6",
        "authorId" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "body" : "(Which is to say, maybe let's just go with the regex that's in the PR right now and figure out a better regex for the release branch later, also. `v1.0.1.1` might look funny, but hey.)\n",
        "createdAt" : "2015-07-31T16:27:37Z",
        "updatedAt" : "2015-07-31T16:27:37Z",
        "lastEditedBy" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "tags" : [
        ]
      }
    ],
    "commit" : "4363f14e774e2694c3b227a17f0ced49b3fd613d",
    "line" : 10,
    "diffHunk" : "@@ -1,1 +57,61 @@      # TODO: We continue calling this \"git version\" because so many\n      # downstream consumers are expecting it there.\n      KUBE_GIT_VERSION=$(echo \"${KUBE_GIT_VERSION}\" | sed \"s/-\\([0-9]\\{1,\\}\\)-g\\([0-9a-f]\\{14\\}\\)$/.\\1\\+\\2/\")\n      if [[ \"${KUBE_GIT_TREE_STATE}\" == \"dirty\" ]]; then\n        # git describe --dirty only considers changes to existing files, but"
  }
]