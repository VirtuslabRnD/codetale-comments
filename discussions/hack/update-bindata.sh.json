[
  {
    "id" : "c543354e-34c0-49cc-aed2-a223eb79c4a4",
    "prId" : 30787,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6809cf5b-692d-45e0-b262-6abe5b3d3546",
        "parentId" : null,
        "authorId" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "body" : "the real fix for this is to only run this when we actually need to. right now I think we're running this far more than necessary.\n",
        "createdAt" : "2016-09-08T23:08:50Z",
        "updatedAt" : "2016-10-04T02:42:31Z",
        "lastEditedBy" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "tags" : [
        ]
      },
      {
        "id" : "86cc5b6c-8643-47b3-883b-a2d65a164ab7",
        "parentId" : "6809cf5b-692d-45e0-b262-6abe5b3d3546",
        "authorId" : "e19009d8-ed5c-45bb-b5ce-4f8d956c6c45",
        "body" : "Yeah -- but that is probably more invasive.   This'll help contain the damage.\n",
        "createdAt" : "2016-09-13T16:51:12Z",
        "updatedAt" : "2016-10-04T02:42:31Z",
        "lastEditedBy" : "e19009d8-ed5c-45bb-b5ce-4f8d956c6c45",
        "tags" : [
        ]
      }
    ],
    "commit" : "d955f54918159630a331611672e3f226ce7bd5af",
    "line" : 27,
    "diffHunk" : "@@ -1,1 +47,51 @@gofmt -s -w \"${BINDATA_OUTPUT}.tmp\"\n\n# Here we compare and overwrite only if different to avoid updating the\n# timestamp and triggering a rebuild. The 'cat' redirect trick to preserve file\n# permissions of the target file."
  },
  {
    "id" : "b7a2f795-e978-45d3-9487-16991598d55e",
    "prId" : 29947,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "52274c1c-3b3c-4906-b338-4b667847a1e1",
        "parentId" : null,
        "authorId" : "a5be0b3b-3db2-4c99-a598-55f8708db5df",
        "body" : "IMO `GOPATH` should be the only pre-requisite, and GOBATH/bin should just be used as necessary.  but thats not a huge deal either way.\n",
        "createdAt" : "2016-08-03T01:20:20Z",
        "updatedAt" : "2016-08-03T20:24:08Z",
        "lastEditedBy" : "a5be0b3b-3db2-4c99-a598-55f8708db5df",
        "tags" : [
        ]
      },
      {
        "id" : "fdd77122-a719-4950-b277-6e080334c45e",
        "parentId" : "52274c1c-3b3c-4906-b338-4b667847a1e1",
        "authorId" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "body" : "I think the `GOPATH` in the build container has multiple components, so we can't just concatenate `go-bindata` to it and have it work, but I can check again.\n",
        "createdAt" : "2016-08-03T07:04:23Z",
        "updatedAt" : "2016-08-03T20:24:08Z",
        "lastEditedBy" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "tags" : [
        ]
      }
    ],
    "commit" : "42d2aca7bb6f35635988715cbff135f2f5744e88",
    "line" : 27,
    "diffHunk" : "@@ -1,1 +29,33 @@fi\n\nif ! which go-bindata &>/dev/null ; then\n\techo \"Cannot find go-bindata. Install with\"\n\techo \"  go get -u github.com/jteeuwen/go-bindata/go-bindata\""
  },
  {
    "id" : "49ee584d-6ca2-47c6-adb0-b8834e5ba9f9",
    "prId" : 25584,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f3cb69a2-6956-40db-a0fb-16316776b445",
        "parentId" : null,
        "authorId" : "5de211e4-9744-455e-9548-1a8e70ed1b2e",
        "body" : "identation\n",
        "createdAt" : "2016-05-23T17:12:16Z",
        "updatedAt" : "2016-07-29T18:35:37Z",
        "lastEditedBy" : "5de211e4-9744-455e-9548-1a8e70ed1b2e",
        "tags" : [
        ]
      }
    ],
    "commit" : "6166083c78063e719017ddd8fb2cf4882e3749bf",
    "line" : null,
    "diffHunk" : "@@ -1,1 +44,48 @@\techo \"for debugging, printing search for bindata files out...\"\n\tfind ${GOPATH} -name go-bindata\n\texit 5\nfi\n"
  },
  {
    "id" : "075dd812-4d50-4e7f-b93b-c69ffebc002a",
    "prId" : 25584,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "17327819-87ee-4a0e-899a-b691b3c733c5",
        "parentId" : null,
        "authorId" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "body" : "did you mean to add -d here? otherwise the `go install` on the next line is superfluous\n",
        "createdAt" : "2016-05-31T23:48:49Z",
        "updatedAt" : "2016-07-29T18:35:37Z",
        "lastEditedBy" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "tags" : [
        ]
      },
      {
        "id" : "4b4d1134-689c-48be-84a1-bbd53931dd30",
        "parentId" : "17327819-87ee-4a0e-899a-b691b3c733c5",
        "authorId" : "a5be0b3b-3db2-4c99-a598-55f8708db5df",
        "body" : "iirc `go get` can fail, but `go install` still needs to happen either way.  so these two accomodate all scenarios.\n",
        "createdAt" : "2016-06-01T17:03:56Z",
        "updatedAt" : "2016-07-29T18:35:37Z",
        "lastEditedBy" : "a5be0b3b-3db2-4c99-a598-55f8708db5df",
        "tags" : [
        ]
      },
      {
        "id" : "10842b5e-0b9d-4d58-a61e-43a7429f6a89",
        "parentId" : "17327819-87ee-4a0e-899a-b691b3c733c5",
        "authorId" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "body" : "but in the usual success case, we are effectively doing `go install` twice, since `go get` does an install by default.\n",
        "createdAt" : "2016-06-01T23:57:18Z",
        "updatedAt" : "2016-07-29T18:35:37Z",
        "lastEditedBy" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "tags" : [
        ]
      }
    ],
    "commit" : "6166083c78063e719017ddd8fb2cf4882e3749bf",
    "line" : null,
    "diffHunk" : "@@ -1,1 +37,41 @@fi\n\ngo get -u github.com/jteeuwen/go-bindata/... || echo \"go-bindata get failed, possibly already exists, proceeding\"\ngo install github.com/jteeuwen/go-bindata/... || echo \"go-bindata install may have failed, proceeding anyway...\"\n"
  },
  {
    "id" : "2d764436-2024-42e5-907c-f83bf0c7ba96",
    "prId" : 25584,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e1b786e1-94bf-4b25-b9a4-6ff8ad3202c7",
        "parentId" : null,
        "authorId" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "body" : "it looks like this is the default behavior. to avoid log spam, maybe delete?\n",
        "createdAt" : "2016-05-31T23:57:27Z",
        "updatedAt" : "2016-07-29T18:35:37Z",
        "lastEditedBy" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "tags" : [
        ]
      },
      {
        "id" : "0b5ffeed-a1ea-4d31-92cb-76beca00411e",
        "parentId" : "e1b786e1-94bf-4b25-b9a4-6ff8ad3202c7",
        "authorId" : "a5be0b3b-3db2-4c99-a598-55f8708db5df",
        "body" : "I deleted `set -x` (will push shortly) but i really think this should be included, as this is not something that is going to easily be debugged by others.\n",
        "createdAt" : "2016-06-01T16:42:02Z",
        "updatedAt" : "2016-07-29T18:35:37Z",
        "lastEditedBy" : "a5be0b3b-3db2-4c99-a598-55f8708db5df",
        "tags" : [
        ]
      }
    ],
    "commit" : "6166083c78063e719017ddd8fb2cf4882e3749bf",
    "line" : null,
    "diffHunk" : "@@ -1,1 +19,23 @@\nif [[ -z ${KUBE_ROOT} ]]; then\n\techo \"KUBE_ROOT not detected, setting default.\"\n\tKUBE_ROOT=\"../../../\"\nfi"
  },
  {
    "id" : "9f2b0fd4-f765-40d4-a4e8-2a60d7ce497b",
    "prId" : 25584,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "919db172-ce3d-4f45-9ea8-d55f5604509d",
        "parentId" : null,
        "authorId" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "body" : "I think this may be the only message we should normally echo\n",
        "createdAt" : "2016-05-31T23:58:39Z",
        "updatedAt" : "2016-07-29T18:35:37Z",
        "lastEditedBy" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "tags" : [
        ]
      }
    ],
    "commit" : "6166083c78063e719017ddd8fb2cf4882e3749bf",
    "line" : null,
    "diffHunk" : "@@ -1,1 +57,61 @@gofmt -s -w ${BINDATA_OUTPUT}\n\necho \"Generated bindata file : $(wc -l ${BINDATA_OUTPUT}) lines of lovely automated artifacts\""
  },
  {
    "id" : "899206b3-7fcd-469f-ac8a-d748d08134ce",
    "prId" : 25584,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "415fc32d-374e-4f0e-b20a-dfe2672838df",
        "parentId" : null,
        "authorId" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "body" : "I guess what I've been poorly trying to explain is that `KUBE_ROOT` is never set before calling this script, so the conditional and this message aren't very helpful. Look at the Jenkins build logs:\n\n```\nGo version: go version go1.6.2 linux/amd64\nKUBE_ROOT not detected, setting default.\n/go/src/k8s.io/kubernetes/test/e2e/framework\nGenerated bindata file : 11764 ../../..//test/e2e/generated/bindata.go lines of lovely automated artifacts\n```\n",
        "createdAt" : "2016-06-02T00:03:47Z",
        "updatedAt" : "2016-07-29T18:35:37Z",
        "lastEditedBy" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "tags" : [
        ]
      },
      {
        "id" : "ab0b60c4-7626-454d-bb8a-58f7650cec46",
        "parentId" : "415fc32d-374e-4f0e-b20a-dfe2672838df",
        "authorId" : "a5be0b3b-3db2-4c99-a598-55f8708db5df",
        "body" : "Yes but i was thinking if compiling kube from outside or from another place  those logs could be the difference between life and death :)?  \n",
        "createdAt" : "2016-06-02T10:08:37Z",
        "updatedAt" : "2016-07-29T18:35:37Z",
        "lastEditedBy" : "a5be0b3b-3db2-4c99-a598-55f8708db5df",
        "tags" : [
        ]
      },
      {
        "id" : "842ffe4f-977c-4d0c-a1c1-b332b9fd0c33",
        "parentId" : "415fc32d-374e-4f0e-b20a-dfe2672838df",
        "authorId" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "body" : "what's going to set KUBE_ROOT though? this script is only meant to be called from `go generate`, right?\n",
        "createdAt" : "2016-06-03T17:52:57Z",
        "updatedAt" : "2016-07-29T18:35:37Z",
        "lastEditedBy" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "tags" : [
        ]
      },
      {
        "id" : "10eb0cbd-9bb7-4a44-b72d-133adb70ab56",
        "parentId" : "415fc32d-374e-4f0e-b20a-dfe2672838df",
        "authorId" : "a5be0b3b-3db2-4c99-a598-55f8708db5df",
        "body" : "I could see consumer of kube setting kube_root and calling go generate maybe in a different manner.  go isn't aware of automatically using go generate, even though generate is standard packaged- so anyone compiling kube without using our scripts will possibly want to specify kube_root? For example if adding anything in the test/e2e path as a go dependency ...\n",
        "createdAt" : "2016-06-03T19:23:36Z",
        "updatedAt" : "2016-07-29T18:35:37Z",
        "lastEditedBy" : "a5be0b3b-3db2-4c99-a598-55f8708db5df",
        "tags" : [
        ]
      },
      {
        "id" : "2c480fef-4b65-4ca9-b9d0-38d3a6ec2562",
        "parentId" : "415fc32d-374e-4f0e-b20a-dfe2672838df",
        "authorId" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "body" : "can we maybe print out this message only if `KUBE_ROOT` _is_ set, then? since the common case is that it isn't set, I'd rather reduce log spam.\n\nalso the conditional on L20 should use the [[ ]] conditional form. and probably use a default for KUBE_ROOT, so\n\n``` shell\nif [[ -z \"${KUBE_ROOT:-} ]]; then\n```\n",
        "createdAt" : "2016-06-03T19:31:43Z",
        "updatedAt" : "2016-07-29T18:35:37Z",
        "lastEditedBy" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "tags" : [
        ]
      },
      {
        "id" : "85db713b-1d8c-446f-a96a-06075d2503d5",
        "parentId" : "415fc32d-374e-4f0e-b20a-dfe2672838df",
        "authorId" : "a5be0b3b-3db2-4c99-a598-55f8708db5df",
        "body" : "disagree b/c  UX advantage here is that people _not_ setting it explicitly are made aware.  After all, its a good thing to set :) .    but happy to change if you feel strongly.\n",
        "createdAt" : "2016-07-29T18:11:57Z",
        "updatedAt" : "2016-07-29T18:35:37Z",
        "lastEditedBy" : "a5be0b3b-3db2-4c99-a598-55f8708db5df",
        "tags" : [
        ]
      }
    ],
    "commit" : "6166083c78063e719017ddd8fb2cf4882e3749bf",
    "line" : null,
    "diffHunk" : "@@ -1,1 +19,23 @@\nif [[ -z ${KUBE_ROOT} ]]; then\n\techo \"KUBE_ROOT not detected, setting default.\"\n\tKUBE_ROOT=\"../../../\"\nfi"
  },
  {
    "id" : "76dcda8b-d5c8-4385-bfbc-cec352bcf9ef",
    "prId" : 25584,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a93fa449-6fd4-44c2-b526-d3d1f471faa2",
        "parentId" : null,
        "authorId" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "body" : "maybe `set -o nounset` too to catch bugs?\n",
        "createdAt" : "2016-06-03T19:32:29Z",
        "updatedAt" : "2016-07-29T18:35:37Z",
        "lastEditedBy" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "tags" : [
        ]
      },
      {
        "id" : "087a7ccf-52c9-4b3e-ad69-883bb124e423",
        "parentId" : "a93fa449-6fd4-44c2-b526-d3d1f471faa2",
        "authorId" : "a5be0b3b-3db2-4c99-a598-55f8708db5df",
        "body" : "done (below)\n",
        "createdAt" : "2016-07-29T18:14:14Z",
        "updatedAt" : "2016-07-29T20:25:12Z",
        "lastEditedBy" : "a5be0b3b-3db2-4c99-a598-55f8708db5df",
        "tags" : [
        ]
      }
    ],
    "commit" : "6166083c78063e719017ddd8fb2cf4882e3749bf",
    "line" : 18,
    "diffHunk" : "@@ -1,1 +16,20 @@\nset -o errexit\nset -o pipefail\n\nif [[ -z ${KUBE_ROOT} ]]; then"
  },
  {
    "id" : "a8ff5f63-0d66-4721-8449-a9b6a52d8bee",
    "prId" : 25584,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "04ce5f1f-f984-47e2-806d-772bb413aefa",
        "parentId" : null,
        "authorId" : "c532215f-ed76-4a19-b066-8676d269eaf1",
        "body" : "You can do `if [[ -z \"${KUBE_ROOT:-}\"]]` so that `nounset` doesn't get mad.\n",
        "createdAt" : "2016-07-29T20:40:29Z",
        "updatedAt" : "2016-07-29T20:40:29Z",
        "lastEditedBy" : "c532215f-ed76-4a19-b066-8676d269eaf1",
        "tags" : [
        ]
      },
      {
        "id" : "bcd62429-d8fa-4732-8296-3c6cf90d82f6",
        "parentId" : "04ce5f1f-f984-47e2-806d-772bb413aefa",
        "authorId" : "a5be0b3b-3db2-4c99-a598-55f8708db5df",
        "body" : "yup ; thats a good idea\n",
        "createdAt" : "2016-07-30T00:11:39Z",
        "updatedAt" : "2016-07-30T00:11:39Z",
        "lastEditedBy" : "a5be0b3b-3db2-4c99-a598-55f8708db5df",
        "tags" : [
        ]
      }
    ],
    "commit" : "6166083c78063e719017ddd8fb2cf4882e3749bf",
    "line" : 20,
    "diffHunk" : "@@ -1,1 +18,22 @@set -o pipefail\n\nif [[ -z ${KUBE_ROOT} ]]; then\n\techo \"KUBE_ROOT not detected, setting default.\"\n\tKUBE_ROOT=\"../../../\""
  },
  {
    "id" : "8f48caa1-0fc6-456a-9913-5e15df17e196",
    "prId" : 25584,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "597b91c8-989b-4b84-b5ac-24148b64b2ef",
        "parentId" : null,
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "@thockin has done a bunch of work to get our Makefile doing stuff like this automatically. The Makefile's topological sort ensures that it is always done when necessary and (depending how fancy) not done when unnecessary.\n\nI would strongly recommend that you produce either your own makefile for building the test job, or (probably better) add a rule in the main makefile.\n",
        "createdAt" : "2016-08-04T17:07:24Z",
        "updatedAt" : "2016-08-04T17:07:24Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      }
    ],
    "commit" : "6166083c78063e719017ddd8fb2cf4882e3749bf",
    "line" : 1,
    "diffHunk" : "@@ -1,1 +-1,3 @@#!/bin/bash\n\n# Copyright 2016 The Kubernetes Authors."
  }
]