[
  {
    "id" : "0222211c-c5dc-4c0e-b0df-1f28f094d8b6",
    "prId" : 22246,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f41b0e15-fe85-4d82-9904-c7ef1922bb31",
        "parentId" : null,
        "authorId" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "body" : "where did the changes to this file come from?\n",
        "createdAt" : "2016-03-02T17:12:22Z",
        "updatedAt" : "2016-03-02T17:12:22Z",
        "lastEditedBy" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "tags" : [
        ]
      },
      {
        "id" : "c9fe3daa-b571-4b75-94c2-e3ba490a036a",
        "parentId" : "f41b0e15-fe85-4d82-9904-c7ef1922bb31",
        "authorId" : "9ca65a79-fccf-40d2-8bf4-84a611116ce4",
        "body" : "Travis-ci built failed previously and suggested to run `hack/verify-flags-underscore.py -e > hack/verify-flags/exceptions.txt`. I think the reason is that the new flag we're introducing here \"kubelet_api_servers\" is also used by these scripts, but they're not related.\n",
        "createdAt" : "2016-03-02T17:51:12Z",
        "updatedAt" : "2016-03-02T17:51:12Z",
        "lastEditedBy" : "9ca65a79-fccf-40d2-8bf4-84a611116ce4",
        "tags" : [
        ]
      },
      {
        "id" : "acd0d86e-2fa1-4b22-9be4-7d9cb523d2f7",
        "parentId" : "f41b0e15-fe85-4d82-9904-c7ef1922bb31",
        "authorId" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "body" : "the flag that you're introducing doesn't use underscores...\n\nOn Wed, Mar 2, 2016 at 12:52 PM, Hai Huang notifications@github.com wrote:\n\n> In hack/verify-flags/exceptions.txt\n> https://github.com/kubernetes/kubernetes/pull/22246#discussion_r54761850\n> :\n> \n> > @@ -5,11 +5,13 @@ cluster/aws/templates/configure-vm-aws.sh:  # We set the hostname_override to th\n> >  cluster/aws/templates/configure-vm-aws.sh:  api_servers: '${API_SERVERS}'\n> >  cluster/aws/templates/configure-vm-aws.sh:  env-to-grains \"hostname_override\"\n> >  cluster/aws/templates/configure-vm-aws.sh:  env-to-grains \"runtime_config\"\n> > +cluster/aws/templates/configure-vm-aws.sh:  kubelet_api_servers: '${KUBELET_APISERVER}'\n> \n> Travis-ci built failed previously and suggested to run hack/verify-flags-underscore.py\n> -e > hack/verify-flags/exceptions.txt. I think the reason is that the new\n> flag we're introducing here \"kubelet_api_servers\" is also used by these\n> scripts, but they're not related.\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/kubernetes/kubernetes/pull/22246/files#r54761850.\n",
        "createdAt" : "2016-03-02T18:44:03Z",
        "updatedAt" : "2016-03-02T18:44:03Z",
        "lastEditedBy" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "tags" : [
        ]
      },
      {
        "id" : "84061e7f-4fe0-4a64-a895-991c72c72b2e",
        "parentId" : "f41b0e15-fe85-4d82-9904-c7ef1922bb31",
        "authorId" : "9ca65a79-fccf-40d2-8bf4-84a611116ce4",
        "body" : "I believe flag verification does normalization by converting all dashes ('-') to underscores ('_'). Here's an example: in hack/verify-flags/known-flags.txt, `api-servers` (with a dash) is defined as a known flag. In hack/verify-flags/exceptions.txt, the following lines are defined:\n\n```\ncluster/juju/charms/trusty/kubernetes/hooks/api-relation-changed:        api_servers = 'http://%s:%s' % (api_info[0], api_info[1])\ncluster/juju/charms/trusty/kubernetes/hooks/api-relation-changed:    api_servers = get_rel_hosts('api', rels, ('hostname', 'port'))\n```\n\nNotice that in both cases \"api_servers\" is with underscores. The same applies to the flag we're introducing here. If I misunderstood how this works, please let me know and I can correct it.\n",
        "createdAt" : "2016-03-03T02:10:26Z",
        "updatedAt" : "2016-03-03T02:10:26Z",
        "lastEditedBy" : "9ca65a79-fccf-40d2-8bf4-84a611116ce4",
        "tags" : [
        ]
      },
      {
        "id" : "25a9f968-a15d-4caf-8a16-b684dee57502",
        "parentId" : "f41b0e15-fe85-4d82-9904-c7ef1922bb31",
        "authorId" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "body" : "strange coincidence that cluster scripts you didn't modify happen to make use of similarly named variables, and that those authors didn't run the validation scripts for their commits. i'm not super-excited about picking up those changes as part of this PR unless we fail PR validation without them.\n",
        "createdAt" : "2016-03-03T04:25:58Z",
        "updatedAt" : "2016-03-03T04:25:58Z",
        "lastEditedBy" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "tags" : [
        ]
      },
      {
        "id" : "ac1389b8-7f67-4ecf-b74b-6fab5841fad1",
        "parentId" : "f41b0e15-fe85-4d82-9904-c7ef1922bb31",
        "authorId" : "9ca65a79-fccf-40d2-8bf4-84a611116ce4",
        "body" : "It did fail PR validation because of this, which is the reason I made the change here (following the instructions of the PR validation result).\n\nI want to clarify that the reason we need to make this change is because we are adding a flag \"--kubelet-api-servers\" in hacks/verify-flags/known-flags.txt, as this flag is relevant to one of the kubernetes components. The reason the cluster scripts' author didn't have to make this change is because they're adding this flag for a salt configuration file, see below:\n\n``` shell\ncat <<EOF >>/etc/salt/minion.d/grains.conf\n  kubelet_api_servers: '${KUBELET_APISERVER}'\n  cbr-cidr: 10.123.45.0/30\nEOF\n```\n\nThis is very different from what we're doing as they're defining flags not relevant to kubernetes. \n",
        "createdAt" : "2016-03-03T14:57:29Z",
        "updatedAt" : "2016-03-03T14:57:29Z",
        "lastEditedBy" : "9ca65a79-fccf-40d2-8bf4-84a611116ce4",
        "tags" : [
        ]
      },
      {
        "id" : "2477f5b2-4bfa-4822-89a7-e48a939e097f",
        "parentId" : "f41b0e15-fe85-4d82-9904-c7ef1922bb31",
        "authorId" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "body" : "Thanks for the breakdown. LGTM\n\nOn Thu, Mar 3, 2016 at 9:58 AM, Hai Huang notifications@github.com wrote:\n\n> In hack/verify-flags/exceptions.txt\n> https://github.com/kubernetes/kubernetes/pull/22246#discussion_r54890424\n> :\n> \n> > @@ -5,11 +5,13 @@ cluster/aws/templates/configure-vm-aws.sh:  # We set the hostname_override to th\n> >  cluster/aws/templates/configure-vm-aws.sh:  api_servers: '${API_SERVERS}'\n> >  cluster/aws/templates/configure-vm-aws.sh:  env-to-grains \"hostname_override\"\n> >  cluster/aws/templates/configure-vm-aws.sh:  env-to-grains \"runtime_config\"\n> > +cluster/aws/templates/configure-vm-aws.sh:  kubelet_api_servers: '${KUBELET_APISERVER}'\n> \n> It did fail PR validation because of this, which is the reason I made the\n> change here (following the instructions of the PR validation result).\n> \n> I want to clarify that the reason we need to make this change is because\n> we are adding a flag \"--kubelet-api-servers\" in\n> hacks/verify-flags/known-flags.txt, as this flag is relevant to one of the\n> kubernetes components. The reason the cluster scripts' author didn't have\n> to make this change is because they're adding this flag for a salt\n> configuration file, see below:\n> \n> cat <<EOF >>/etc/salt/minion.d/grains.conf  kubelet_api_servers: '${KUBELET_APISERVER}'  cbr-cidr: 10.123.45.0/30EOF\n> \n> This is very different from what we're doing as they're defining flags not\n> relevant to kubernetes.\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/kubernetes/kubernetes/pull/22246/files#r54890424.\n",
        "createdAt" : "2016-03-03T15:03:52Z",
        "updatedAt" : "2016-03-03T15:03:52Z",
        "lastEditedBy" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "tags" : [
        ]
      }
    ],
    "commit" : "15ffe5746d287e1f2999aa1ee12e8dc54445d84a",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +6,10 @@cluster/aws/templates/configure-vm-aws.sh:  env-to-grains \"hostname_override\"\ncluster/aws/templates/configure-vm-aws.sh:  env-to-grains \"runtime_config\"\ncluster/aws/templates/configure-vm-aws.sh:  kubelet_api_servers: '${KUBELET_APISERVER}'\ncluster/centos/util.sh:  local node_ip=${node#*@}\ncluster/gce/configure-vm.sh:  advertise_address: '${EXTERNAL_IP}'"
  },
  {
    "id" : "f2a5041f-a381-49ba-8333-c278fb0f6a53",
    "prId" : 20811,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ad4a1e70-9a14-4446-b73b-165b2df949bf",
        "parentId" : null,
        "authorId" : "3c437914-616b-4cfb-88a0-28dc812ff2b2",
        "body" : "please delete _output lines here - it's an artifact that shouldn't be there.\n",
        "createdAt" : "2016-02-08T16:28:48Z",
        "updatedAt" : "2016-02-10T11:32:24Z",
        "lastEditedBy" : "3c437914-616b-4cfb-88a0-28dc812ff2b2",
        "tags" : [
        ]
      },
      {
        "id" : "ab1bed73-8e5c-4d4c-997d-d751c909bb2e",
        "parentId" : "ad4a1e70-9a14-4446-b73b-165b2df949bf",
        "authorId" : "ab8bc7c5-233d-47c1-b03a-767fb930c021",
        "body" : "Done.\n",
        "createdAt" : "2016-02-10T12:04:25Z",
        "updatedAt" : "2016-02-10T12:04:25Z",
        "lastEditedBy" : "ab8bc7c5-233d-47c1-b03a-767fb930c021",
        "tags" : [
        ]
      }
    ],
    "commit" : "b7d72ef36df7454bc69563c6d7e5625ab0b63794",
    "line" : null,
    "diffHunk" : "@@ -1,1 +-1,3 @@Vagrantfile:      node_ip = $node_ips[n]\ncluster/addons/registry/images/Dockerfile:ADD run_proxy.sh /usr/bin/run_proxy\ncluster/addons/registry/images/Dockerfile:CMD [\"/usr/bin/run_proxy\"]"
  }
]