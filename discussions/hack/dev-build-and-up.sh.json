[
  {
    "id" : "530b3d15-ff79-458d-a7f9-14591b19fcd5",
    "prId" : 1532,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "86711774-7678-4ffb-842d-e75ec98d0b27",
        "parentId" : null,
        "authorId" : "fd5eb1fb-f30a-4735-908c-944e87d99845",
        "body" : "This doesn't work under `set -e`, so it needs to be fixed. But the 3 sets that make shell scripts reliable (well, at least as much as you can get) should always be present.\n\nFull script should be:\n\n``` shell\nset -o errexit\nset -o nounset\nset -o pipefail\n\nbasedir=$(dirname \"$0\")\nreadonly basedir\n\n\"${basedir}\"/../build/release.sh || {\n    echo \"Building the release failed!\" >&2\n    exit 1\n}\n\n# Now bring a new cluster up with that release.\n\"${basedir}\"/../cluster/kube-up.sh\n```\n\nSame comments apply to `hack/dev-build-and-push.sh`\n",
        "createdAt" : "2014-10-02T13:22:14Z",
        "updatedAt" : "2014-10-10T19:37:07Z",
        "lastEditedBy" : "fd5eb1fb-f30a-4735-908c-944e87d99845",
        "tags" : [
        ]
      },
      {
        "id" : "7aed5771-9c6d-4230-966f-55e4333f9cce",
        "parentId" : "86711774-7678-4ffb-842d-e75ec98d0b27",
        "authorId" : "e19009d8-ed5c-45bb-b5ce-4f8d956c6c45",
        "body" : "I went through and put the set of sets at the start of most every bash script.  Rip the bandaid off.\n",
        "createdAt" : "2014-10-03T22:44:43Z",
        "updatedAt" : "2014-10-10T19:37:07Z",
        "lastEditedBy" : "e19009d8-ed5c-45bb-b5ce-4f8d956c6c45",
        "tags" : [
        ]
      },
      {
        "id" : "f0b6db49-c201-43a4-bd4f-142bcedda11b",
        "parentId" : "86711774-7678-4ffb-842d-e75ec98d0b27",
        "authorId" : "fd5eb1fb-f30a-4735-908c-944e87d99845",
        "body" : "Awesome, thanks for taking the time!\n\n(BTW, let me know if you'd like me to send commits to address some of the issues I raise... The only thing I worry about is proper testing but I think at some point I'll need to get that figured out.)\n",
        "createdAt" : "2014-10-03T22:57:27Z",
        "updatedAt" : "2014-10-10T19:37:07Z",
        "lastEditedBy" : "fd5eb1fb-f30a-4735-908c-944e87d99845",
        "tags" : [
        ]
      },
      {
        "id" : "b8d8ce14-e46c-4735-8e0b-9baab0d441e4",
        "parentId" : "86711774-7678-4ffb-842d-e75ec98d0b27",
        "authorId" : "fd5eb1fb-f30a-4735-908c-944e87d99845",
        "body" : "That's excellent!!!\n\nThis will probably reduce my comments significantly on the next changes to these scripts :-D\n\nLet me know when it's ready for another look...\n\nCheers,\nFilipe\n",
        "createdAt" : "2014-10-03T22:58:00Z",
        "updatedAt" : "2014-10-10T19:37:07Z",
        "lastEditedBy" : "fd5eb1fb-f30a-4735-908c-944e87d99845",
        "tags" : [
        ]
      }
    ],
    "commit" : "272b9306c45c18effa5d92ef2e5bfa6263c88430",
    "line" : null,
    "diffHunk" : "@@ -1,1 +26,30 @@# Then build a release\n\"${KUBE_ROOT}/build/release.sh\"\nif [ \"$?\" != \"0\" ]; then\n        echo \"Building the release failed!\"\n        exit 1"
  },
  {
    "id" : "991d2bca-22bd-4e03-8c15-cd9151faa568",
    "prId" : 774,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d7486568-2cfd-4254-99b6-90180f381a43",
        "parentId" : null,
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "Should this actually be part of building a release? Do you ever want to build a release without triggering the autogeneration of the version file? (and first verifying locally that stuff builds...)\n",
        "createdAt" : "2014-08-04T21:01:44Z",
        "updatedAt" : "2014-08-04T21:01:44Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      },
      {
        "id" : "c5ee93b3-10ce-4d06-a748-d8bdff45e70b",
        "parentId" : "d7486568-2cfd-4254-99b6-90180f381a43",
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "It's not at all obvious that this is about autogenerated files.  Should we\nbust that out to a distinct step?  Why not just write a Makefile...\n\nOn Mon, Aug 4, 2014 at 2:01 PM, Daniel Smith notifications@github.com\nwrote:\n\n> In hack/dev-build-and-up.sh:\n> \n> > @@ -17,11 +17,17 @@\n> >  # This script will build a dev release and bring up a new cluster with that\n> >  # release.\n> > \n> > -# First build a release\n> > +# First build the binaries\n> > +$(dirname $0)/build-go.sh\n> \n> Should this actually be part of building a release? Do you ever want to\n> build a release without triggering the autogeneration of the version file?\n> (and first verifying locally that stuff builds...)\n> \n> ## \n> \n> Reply to this email directly or view it on GitHub\n> https://github.com/GoogleCloudPlatform/kubernetes/pull/774/files#r15780797\n> .\n",
        "createdAt" : "2014-08-04T21:06:35Z",
        "updatedAt" : "2014-08-04T21:06:35Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      }
    ],
    "commit" : "812d651b1bcc403d5e1dfdbb6bafbfe9b652c135",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +19,23 @@\n# First build the binaries\n$(dirname $0)/build-go.sh\nif [ \"$?\" != \"0\" ]; then\n        exit 1"
  }
]