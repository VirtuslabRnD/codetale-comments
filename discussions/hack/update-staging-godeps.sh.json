[
  {
    "id" : "3eb412ca-b2d2-413d-80d9-6fa30ada5035",
    "prId" : 46193,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/46193#pullrequestreview-41415563",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8d9633e8-a282-46b4-86b8-cca78d41a8f7",
        "parentId" : null,
        "authorId" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "body" : "I kinda wish we only copied output back if `DRY_RUN=false` (which would eliminate all of the `DRY_RUN` logic from `update-staging-godeps-dockerized.sh`), but I also recognize that that would make the `build/*` scripts more complicated.\r\n\r\n(no action needed, just a comment.)",
        "createdAt" : "2017-05-31T23:00:00Z",
        "updatedAt" : "2017-07-25T19:27:17Z",
        "lastEditedBy" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "tags" : [
        ]
      },
      {
        "id" : "aa8efff5-78ea-4b67-b509-bd5e214bc509",
        "parentId" : "8d9633e8-a282-46b4-86b8-cca78d41a8f7",
        "authorId" : "1256edc4-2c21-4b50-9371-9c0a50744653",
        "body" : "I'll think about this when I crack this open again for another pass and see if there's anything I can do to improve that logic.",
        "createdAt" : "2017-06-01T05:05:24Z",
        "updatedAt" : "2017-07-25T19:27:17Z",
        "lastEditedBy" : "1256edc4-2c21-4b50-9371-9c0a50744653",
        "tags" : [
        ]
      }
    ],
    "commit" : "2ee8983dafbb047871d673089f8b29758a07ba06",
    "line" : 84,
    "diffHunk" : "@@ -1,1 +25,29 @@kube::util::ensure_clean_working_dir\n\n# NOTE: All output from this script needs to be copied back to the calling\n# source tree.  This is managed in kube::build::copy_output in build/common.sh.\n# If the output set is changed update that function."
  },
  {
    "id" : "50747fa6-2518-4e60-aab9-164ceb870652",
    "prId" : 41987,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/41987#pullrequestreview-23819615",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d46507c0-5a48-46c7-858c-782aba095bd4",
        "parentId" : null,
        "authorId" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "body" : "If I have a different copy of apimachinery (or other dependencies prefixes k8s.io/) in ${GOPATH}, will godep save prefer that copy over the one in ${KUBE_ROOT}/staging?",
        "createdAt" : "2017-02-24T19:01:51Z",
        "updatedAt" : "2017-02-25T21:42:30Z",
        "lastEditedBy" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "tags" : [
        ]
      },
      {
        "id" : "fd583f27-1cd8-4b45-901e-e6c82b1c3f98",
        "parentId" : "d46507c0-5a48-46c7-858c-782aba095bd4",
        "authorId" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "body" : "i.e., Do you need something like https://github.com/kubernetes/kubernetes/pull/41987/files#diff-79c7edfbbe6b22642e05ac8c9cd431e7R124 before running `godep save`?",
        "createdAt" : "2017-02-24T19:12:42Z",
        "updatedAt" : "2017-02-25T21:42:30Z",
        "lastEditedBy" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "tags" : [
        ]
      },
      {
        "id" : "ffb565c7-3202-4839-bd02-3afa6b84a272",
        "parentId" : "d46507c0-5a48-46c7-858c-782aba095bd4",
        "authorId" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "body" : "Probably it doesn't hurt to have another copy in GOPATH, because the publish robot will rewrite the revision later. If that's the case, can we remove https://github.com/kubernetes/kubernetes/pull/41987/files#diff-79c7edfbbe6b22642e05ac8c9cd431e7R124?",
        "createdAt" : "2017-02-24T19:18:28Z",
        "updatedAt" : "2017-02-25T21:42:30Z",
        "lastEditedBy" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "tags" : [
        ]
      },
      {
        "id" : "71c7625a-03f6-495f-8cfb-e6659095287a",
        "parentId" : "d46507c0-5a48-46c7-858c-782aba095bd4",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "I think you are right. With `${TMP_GOPATH}:${KUBE_ROOT}/staging:${GOPATH}` we should get rid of the test above. Wondering why I didn't do that.",
        "createdAt" : "2017-02-24T20:51:15Z",
        "updatedAt" : "2017-02-25T21:42:30Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "e5e23782-fb3e-46db-8bd5-6ee9ab1c66aa",
        "parentId" : "d46507c0-5a48-46c7-858c-782aba095bd4",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "No, it does not work. Godep does not find the git repo if we change the order. So we also need the check for the apimachinery repo in the other script :-/",
        "createdAt" : "2017-02-24T20:58:38Z",
        "updatedAt" : "2017-02-25T21:42:30Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "80028424-f36d-4515-9758-999c97a1b750",
        "parentId" : "d46507c0-5a48-46c7-858c-782aba095bd4",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "Adding the check is not so easy, at least not with `go list`. In CI we have a clean GOPATH, so not lingering staging repos. So CI will catch any inconcistency. I propose we leave it as it is now. We can iterate later. @caesarxuchao wdyt?",
        "createdAt" : "2017-02-24T21:07:19Z",
        "updatedAt" : "2017-02-25T21:42:30Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "40c4f07a-39c5-4878-8c9c-ab6b2dbb4a7c",
        "parentId" : "d46507c0-5a48-46c7-858c-782aba095bd4",
        "authorId" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "body" : "Sure. Thanks.",
        "createdAt" : "2017-02-24T21:47:51Z",
        "updatedAt" : "2017-02-25T21:42:30Z",
        "lastEditedBy" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "tags" : [
        ]
      }
    ],
    "commit" : "0b079083582671b23b87856a35d2da7fdf70e7c5",
    "line" : 127,
    "diffHunk" : "@@ -1,1 +67,71 @@    echo \"Updating godeps for k8s.io/${repo}\"\n    rm -rf Godeps # remove the current Godeps.json so we always rebuild it\n    GOPATH=\"${TMP_GOPATH}:${GOPATH}:${KUBE_ROOT}/staging\" godep save ${V} ./... 2>&1 | sed 's/^/  /'\n\n    echo \"Rewriting Godeps.json to remove commits that don't really exist because we haven't pushed the prereqs yet\""
  }
]