[
  {
    "id" : "ba77127d-85ec-48a6-8a3d-8efd626d2604",
    "prId" : 4559,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/4559#pullrequestreview-706065000",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6db41481-22e3-4201-b387-2e815cdaa780",
        "parentId" : null,
        "authorId" : "52b26aee-f464-4ce0-af48-b29e1a3f86e2",
        "body" : "should this be:\r\n```\r\necho \"::set-output name=python-version::${python_version}.$latest_micro_version\"\r\n```",
        "createdAt" : "2021-07-14T08:55:58Z",
        "updatedAt" : "2021-07-14T08:55:58Z",
        "lastEditedBy" : "52b26aee-f464-4ce0-af48-b29e1a3f86e2",
        "tags" : [
        ]
      },
      {
        "id" : "9e65758e-2aea-4339-9e5e-01885946278e",
        "parentId" : "6db41481-22e3-4201-b387-2e815cdaa780",
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "Offline discussion: we agreed on the current code and variable name.",
        "createdAt" : "2021-07-14T09:40:29Z",
        "updatedAt" : "2021-07-14T09:40:29Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      }
    ],
    "commit" : "3021f48d13dee62ed95926fe08a895faa87fd815",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +82,86 @@          # create a conda environment for serving an MLflow model.\n          latest_micro_version=$($CONDA/bin/conda search python | grep -F $python_version | tail -1 | tr -s ' ' | cut -d' ' -f2)\n          echo \"::set-output name=python-version::$latest_micro_version\"\n      - uses: actions/setup-python@v2\n        with:"
  },
  {
    "id" : "76e2ebcf-aa18-4275-a940-59c832a41d29",
    "prId" : 4559,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/4559#pullrequestreview-706069218",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c008a307-54a6-4e9f-a19d-35d192c83d96",
        "parentId" : null,
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "The output of `conda search python` looks like this:\r\n\r\n```\r\npython                        3.6.10      h359304d_0  pkgs/main           \r\npython                        3.6.10      hc70fcce_1  pkgs/main           \r\npython                        3.6.10      hf48f09d_2  pkgs/main           \r\npython                        3.6.10      hfe9666f_1  pkgs/main           \r\npython                        3.6.12      h26836e1_2  pkgs/main           \r\npython                        3.6.13      h88f2d9e_0  pkgs/main           \r\npython                         3.7.0      hc167b69_0  pkgs/main           \r\npython                         3.7.1      haf84260_3  pkgs/main   \r\n```\r\n\r\n`grep -F $python_version`: Captures specified minor python versions (`-F` is required because `python_version` contains a dot)\r\n`tail -1`: Gets the last row\r\n`tr -s ' '`: Shrinks spaces between the columns\r\n`cut -d' ' -f2`: Splits the row with a space and gets the second element.",
        "createdAt" : "2021-07-14T09:45:02Z",
        "updatedAt" : "2021-07-14T10:54:31Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      }
    ],
    "commit" : "3021f48d13dee62ed95926fe08a895faa87fd815",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +81,85 @@          # Use a python version that exists on Anaconda to ensure `mlflow serve` can successfully\n          # create a conda environment for serving an MLflow model.\n          latest_micro_version=$($CONDA/bin/conda search python | grep -F $python_version | tail -1 | tr -s ' ' | cut -d' ' -f2)\n          echo \"::set-output name=python-version::$latest_micro_version\"\n      - uses: actions/setup-python@v2"
  },
  {
    "id" : "194cf867-3aa9-418b-8197-6cb5e86029fb",
    "prId" : 4513,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/4513#pullrequestreview-695935386",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "498ae24e-707c-4c72-8aac-e43389ff4e8c",
        "parentId" : null,
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "The following python versions are pre-installed in the ubuntu 20.04 image for GitHub Actions:\r\n\r\nhttps://github.com/actions/virtual-environments/blob/main/images/linux/Ubuntu2004-README.md#python\r\n\r\n```\r\n2.7.18\r\n3.5.10\r\n3.6.13\r\n3.7.10\r\n3.8.10\r\n3.9.5\r\n```\r\n\r\nIf we use one of these versions,  what `actions/setup-python@v2` does is just switch the active python version, which should be stabler than `conda install python=x.y`.",
        "createdAt" : "2021-06-30T10:04:16Z",
        "updatedAt" : "2021-06-30T10:09:44Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      }
    ],
    "commit" : "457654da65aad634dd01ca4cd9bf592476b4ce14",
    "line" : 23,
    "diffHunk" : "@@ -1,1 +67,71 @@      - uses: actions/setup-python@v2\n        with:\n          python-version: ${{ steps.get-python-version.outputs.python-version }}\n      - name: Get cache key\n        env:"
  },
  {
    "id" : "b04fa358-8691-49c9-b694-584bc92238d9",
    "prId" : 4513,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/4513#pullrequestreview-696149127",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6e9011e2-6c7d-41d7-90c7-648aba3c597c",
        "parentId" : null,
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "Tests for `mlflow serve` still require `conda`.",
        "createdAt" : "2021-06-30T13:18:24Z",
        "updatedAt" : "2021-06-30T13:18:24Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      }
    ],
    "commit" : "457654da65aad634dd01ca4cd9bf592476b4ce14",
    "line" : 40,
    "diffHunk" : "@@ -1,1 +102,106 @@      - name: Run tests\n        env:\n          MLFLOW_CONDA_HOME: /usr/share/miniconda\n          SPARK_LOCAL_IP: 127.0.0.1\n        run: |"
  },
  {
    "id" : "aefa0f4e-3925-495d-8907-886266c998f9",
    "prId" : 4418,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/4418#pullrequestreview-674109782",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "302e23ff-949a-4960-82e3-32f856c90a18",
        "parentId" : null,
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "Added `sklearn` to cache-required packages sicne it takes long (10 ~ 15 min) to build sklearn from the source.",
        "createdAt" : "2021-06-02T12:06:38Z",
        "updatedAt" : "2021-06-02T12:13:50Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      }
    ],
    "commit" : "400b8cb9e53b876190d4d43a37d6b2ea2a25fe81",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +77,81 @@      - uses: actions/cache@v2\n        # We only cache wheels that take long (> 10 min) to build\n        if: ${{ contains('pyspark, catboost, scikit-learn', matrix.package) && matrix.version == 'dev' }}\n        with:\n          path: /home/runner/.cache/wheels"
  },
  {
    "id" : "0d3790ca-ce89-4bc8-86b9-994fb4d5c233",
    "prId" : 4380,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/4380#pullrequestreview-665017574",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "085fdd26-35f6-4355-9cfe-4832f815970f",
        "parentId" : null,
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "For now, only dev sklearn requires python 3.7 but in the future, we might want to change this to the following when we drop Python 3.6 support:\r\n\r\n\r\n```suggestion\r\n          conda install python=3.7  # haven't tried this but this yet also it should work\r\n```",
        "createdAt" : "2021-05-21T01:19:26Z",
        "updatedAt" : "2021-05-21T06:32:11Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      }
    ],
    "commit" : "d1dffc6971de4f7ee8d798798a7f140db1a4aa6e",
    "line" : 10,
    "diffHunk" : "@@ -1,1 +65,69 @@            python_version=3.6\n          fi\n          conda install python=$python_version\n          python --version\n      - name: Get cache key"
  },
  {
    "id" : "332e0d3e-e9c1-4940-9da0-ee5d296f84ae",
    "prId" : 4287,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/4287#pullrequestreview-643168789",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1289f062-6112-461f-a2ff-0f7cc985a25a",
        "parentId" : null,
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "Just added this line to make it easier to debug failures in this step.",
        "createdAt" : "2021-04-23T10:47:50Z",
        "updatedAt" : "2021-04-27T14:15:47Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      }
    ],
    "commit" : "84d829ba1411b79f788604574c7243c4c259eafb",
    "line" : 23,
    "diffHunk" : "@@ -1,1 +80,84 @@          CACHE_DIR: /home/runner/.cache/wheels\n        run: |\n          set -x\n          pip install -e .\n          pip install -r dev/small-requirements.txt"
  },
  {
    "id" : "717d8e1a-491b-46ff-b398-bfc9b1425584",
    "prId" : 4287,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/4287#pullrequestreview-647760563",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "104e8f97-7b69-41cf-8adc-62a540426319",
        "parentId" : null,
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "Cache key looks like this: `ubuntu20-20210419.1-wheels-20210427-9e9891b7e99e56166e9a6e511cc7a92eb80a37e6a588b0b3a5233c6881e8c32d`\r\n\r\nCache gets refresed when at least one of the following has changed:\r\n\r\n1. os\r\n2. image version\r\n3. date\r\n4. install command\r\n\r\nI think `date` changes most frequently.",
        "createdAt" : "2021-04-28T05:34:54Z",
        "updatedAt" : "2021-04-29T01:33:50Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      },
      {
        "id" : "9609fc3a-eee7-47a9-bb47-d59d7b460a76",
        "parentId" : "104e8f97-7b69-41cf-8adc-62a540426319",
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "GitHub updates ubuntu images (about) weekly:\r\n\r\n![Screen Shot 2021-04-29 at 10 30 14](https://user-images.githubusercontent.com/17039389/116491915-f2351e80-a8d5-11eb-899f-2340f372b96c.png)\r\n\r\nRepo that manages virtual environments for GitHub Actions: https://github.com/actions/virtual-environments\r\n",
        "createdAt" : "2021-04-29T01:31:13Z",
        "updatedAt" : "2021-04-29T01:36:18Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      }
    ],
    "commit" : "84d829ba1411b79f788604574c7243c4c259eafb",
    "line" : 16,
    "diffHunk" : "@@ -1,1 +73,77 @@        with:\n          path: /home/runner/.cache/wheels\n          key: ${{ steps.get-cache-key.outputs.key }}\n          restore-keys: |\n            ${{ steps.get-cache-key.outputs.key }}"
  },
  {
    "id" : "e5eacc8a-0639-4898-beae-9d6997b617fe",
    "prId" : 4287,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/4287#pullrequestreview-647762056",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d008e739-f5a1-4ed9-9a42-5f567f42a6f8",
        "parentId" : null,
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "`ImageOS` and `ImageVersion` are pre-defined in the github actions virtual environment.",
        "createdAt" : "2021-04-29T01:37:05Z",
        "updatedAt" : "2021-04-29T01:37:05Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      }
    ],
    "commit" : "84d829ba1411b79f788604574c7243c4c259eafb",
    "line" : 11,
    "diffHunk" : "@@ -1,1 +68,72 @@          date=$(date -u \"+%Y%m%d\")\n          hash=$(echo -n \"$INSTALL_COMMAND\" | sha256sum)\n          echo \"::set-output name=key::$ImageOS-$ImageVersion-wheels-$date-$hash\"\n      - uses: actions/cache@v2\n        if: ${{ matrix.package == 'pyspark' && matrix.version == 'dev' }}"
  },
  {
    "id" : "76c98d70-333f-4f1a-a7b5-dcbc72a9f9e9",
    "prId" : 4287,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/4287#pullrequestreview-647762490",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6eb5f04d-e1c2-4be4-8aa8-ca24d217c724",
        "parentId" : null,
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "I first tried to put `${{ matrix.install }}` in the run step like below, but it didn't work out as I expected because it contains lots of special characters (e.g. quotes, linebreaks, etc.)\r\n\r\n```\r\nrun: |\r\n    install_command=\"${{ matrix.install }}\"\r\n```\r\n\r\nThen, I switched to using an environment variable.",
        "createdAt" : "2021-04-29T01:38:41Z",
        "updatedAt" : "2021-04-29T01:38:56Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      }
    ],
    "commit" : "84d829ba1411b79f788604574c7243c4c259eafb",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +63,67 @@      - name: Get cache key\n        env:\n          INSTALL_COMMAND: ${{ matrix.install }}\n        id: get-cache-key\n        run: |"
  },
  {
    "id" : "6606faf1-3eb4-44b2-be2b-338a46b1c05f",
    "prId" : 4285,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/4285#pullrequestreview-647782986",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "124a933e-f232-4494-91c9-b20508c35050",
        "parentId" : null,
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "Split the install-dependencies step to make it easier to debug.",
        "createdAt" : "2021-04-29T02:55:56Z",
        "updatedAt" : "2021-04-29T05:02:49Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      }
    ],
    "commit" : "7310e95e55dbece93705ed3ba35adcf8e9e98d79",
    "line" : 24,
    "diffHunk" : "@@ -1,1 +86,90 @@          CACHE_DIR: /home/runner/.cache/wheels\n        run: |\n          set -x\n          ${{ matrix.install }}\n      - name: Check package versions"
  },
  {
    "id" : "573d1255-20dc-45c6-8e01-5a67ff1ecae6",
    "prId" : 4119,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/4119#pullrequestreview-595394881",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "16cf200e-e8a9-4df2-b61a-d2c700b5c070",
        "parentId" : null,
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "Why do we need this change?",
        "createdAt" : "2021-02-19T23:52:03Z",
        "updatedAt" : "2021-03-03T08:09:54Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      },
      {
        "id" : "0962f81f-4467-4140-9ae0-9ad512f0f124",
        "parentId" : "16cf200e-e8a9-4df2-b61a-d2c700b5c070",
        "authorId" : "52b26aee-f464-4ce0-af48-b29e1a3f86e2",
        "body" : "I move ml-package-versions.yml into `mlflow` sub-directory. So that when install package, it will be installed inside the `.../site-package/mlflow/ml-package-versions.yml`\r\notherwise it will be installed in `.../site-package/ml-package-versions.yml`",
        "createdAt" : "2021-02-22T08:03:39Z",
        "updatedAt" : "2021-03-03T08:09:54Z",
        "lastEditedBy" : "52b26aee-f464-4ce0-af48-b29e1a3f86e2",
        "tags" : [
        ]
      },
      {
        "id" : "a58f9e50-d894-4108-9f93-3b77fbee840c",
        "parentId" : "16cf200e-e8a9-4df2-b61a-d2c700b5c070",
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "ah I missed that 😅",
        "createdAt" : "2021-02-22T14:20:23Z",
        "updatedAt" : "2021-03-03T08:09:54Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      }
    ],
    "commit" : "228d54cfc0b09d6b60302a9b2eadd85766bd9fa1",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +34,38 @@\n          if [ \"${{ github.event_name }}\" = \"pull_request\" ]; then\n            REF_VERSIONS_YAML=\"https://raw.githubusercontent.com/mlflow/mlflow/master/mlflow/ml-package-versions.yml\"\n            CHANGED_FILES=\"$(git diff --name-only master..HEAD)\"\n            python dev/set_matrix.py --ref-versions-yaml \"$REF_VERSIONS_YAML\" --changed-files \"$CHANGED_FILES\""
  }
]