[
  {
    "id" : "354ee7dc-0131-4a9d-b82c-74cdcf70710f",
    "prId" : 8265,
    "prUrl" : "https://github.com/apache/airflow/pull/8265#pullrequestreview-423841684",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6ca24eef-5e74-4b1f-9135-0d97723c09b5",
        "parentId" : null,
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "What changed between v1 and V2 out of interest?",
        "createdAt" : "2020-06-03T17:43:43Z",
        "updatedAt" : "2020-06-03T17:48:46Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "f3a04c5e-9be9-4f0f-b8c0-ab71c33fd7e7",
        "parentId" : "6ca24eef-5e74-4b1f-9135-0d97723c09b5",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Better compression mechanism on linux",
        "createdAt" : "2020-06-03T18:55:45Z",
        "updatedAt" : "2020-06-03T18:55:45Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      },
      {
        "id" : "ae268b27-5d36-470b-8f3f-452516f70b0e",
        "parentId" : "6ca24eef-5e74-4b1f-9135-0d97723c09b5",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "(at least that what made me to use it ) - it was released 5 days ago:\r\n\r\nhttps://github.com/actions/cache",
        "createdAt" : "2020-06-03T18:58:02Z",
        "updatedAt" : "2020-06-03T18:58:02Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "b7ab2df048187d91d334b2331b7687696202c16b",
    "line" : 33,
    "diffHunk" : "@@ -1,1 +56,60 @@          python-version: '3.x'\n      - name: Cache pre-commit env\n        uses: actions/cache@v2\n        env:\n          cache-name: cache-pre-commit-v2"
  },
  {
    "id" : "177f183b-14d9-428e-adf5-bc7accc5c588",
    "prId" : 8376,
    "prUrl" : "https://github.com/apache/airflow/pull/8376#pullrequestreview-394030431",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d8f944b2-e736-484b-a952-a0b05dc6062f",
        "parentId" : null,
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Is it possible to extract python version to variable ?  when we cherry-pick to 1.10 we use 3.5 as base version and it would be great to be able to change it in one place only. It was not possible in Travis, but maybe we can do it in GA? Maybe a global DEFAULT_PYTHON_VERSION env will do the job?",
        "createdAt" : "2020-04-15T18:33:01Z",
        "updatedAt" : "2020-04-15T18:42:15Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "3fd050cc15b436a2a656a3315829b49baef4f103",
    "line" : 43,
    "diffHunk" : "@@ -1,1 +41,45 @@    runs-on: ubuntu-latest\n    env:\n      PYTHON_VERSION: 3.6\n      AIRFLOW_MOUNT_SOURCE_DIR_FOR_STATIC_CHECKS: \"true\"\n      TRAVIS_JOB_NAME: \"Static\""
  },
  {
    "id" : "bf06e8a5-f021-40d5-9e4c-e44730a91721",
    "prId" : 8376,
    "prUrl" : "https://github.com/apache/airflow/pull/8376#pullrequestreview-394066565",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "838642b9-77c9-499d-b95c-8e6e2235d7e7",
        "parentId" : null,
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Maybe we can make the [3.6, 3.7] into variable as well? That would be great if we could :)",
        "createdAt" : "2020-04-15T18:35:48Z",
        "updatedAt" : "2020-04-15T18:42:15Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      },
      {
        "id" : "5afc0c57-fd0c-4461-9eb1-d5bb4110013c",
        "parentId" : "838642b9-77c9-499d-b95c-8e6e2235d7e7",
        "authorId" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "body" : "The best option would be to extract this logic to yaml template but Github Actions doesn't support it yet...",
        "createdAt" : "2020-04-15T19:21:25Z",
        "updatedAt" : "2020-04-15T19:21:25Z",
        "lastEditedBy" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "tags" : [
        ]
      }
    ],
    "commit" : "3fd050cc15b436a2a656a3315829b49baef4f103",
    "line" : 215,
    "diffHunk" : "@@ -1,1 +213,217 @@    strategy:\n      matrix:\n        python-version: [3.6, 3.7]\n    steps:\n      - uses: actions/checkout@master"
  },
  {
    "id" : "deaca2a2-2c6f-4281-869a-89849159eed8",
    "prId" : 8376,
    "prUrl" : "https://github.com/apache/airflow/pull/8376#pullrequestreview-394030431",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "59b6b2d5-80d8-4232-9561-3b93e363baef",
        "parentId" : null,
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Idea about getting rid of the unnecessary logs. ... I think in the current GA the \"ci_before_install.sh\" produces unnecessary logs that are not needed in 99% of cases.. And I think there is an  easy way to fix them: https://help.github.com/en/actions/configuring-and-managing-workflows/persisting-workflow-data-using-artifacts\r\n\r\nWe could redirect both stdout and stderr (> file.txt 2>&1)  to a file and upload it as artifact of the build . This way we have access to it if needed but it will not clutter the log of the \"real\" build.",
        "createdAt" : "2020-04-15T18:42:11Z",
        "updatedAt" : "2020-04-15T18:42:15Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "3fd050cc15b436a2a656a3315829b49baef4f103",
    "line" : 72,
    "diffHunk" : "@@ -1,1 +70,74 @@          python-version: ${{ env.PYTHON_VERSION }}\n      - name: \"Before install\"\n        run: ./scripts/ci/ci_before_install.sh\n      - name: \"Static checks tests\"\n        if: success()"
  },
  {
    "id" : "59d6d8d1-fd1b-4ce1-bfa8-cd78dc0c30f4",
    "prId" : 8391,
    "prUrl" : "https://github.com/apache/airflow/pull/8391#pullrequestreview-394266946",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6de57fb1-e0fb-420d-8373-7716d1a275d7",
        "parentId" : null,
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "I think this should still be just master or else it would try to run all the tests for commits pushed to v1-10-test too",
        "createdAt" : "2020-04-16T02:47:25Z",
        "updatedAt" : "2020-04-16T02:47:31Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "5cc48957-f036-4784-8d5c-ccd01c8e1be2",
        "parentId" : "6de57fb1-e0fb-420d-8373-7716d1a275d7",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Which is exactly what we want to achieve :)",
        "createdAt" : "2020-04-16T03:00:35Z",
        "updatedAt" : "2020-04-16T03:00:35Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "ebeab6d9816ff3dbad0310e331b7bba9beb8802a",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +21,25 @@on:\n  push:\n    branches: ['*']\n  pull_request:\n    branches: [master]"
  },
  {
    "id" : "c0525c92-045d-4130-b322-62e40c277e31",
    "prId" : 8549,
    "prUrl" : "https://github.com/apache/airflow/pull/8549#pullrequestreview-400425670",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "282451ed-ee0e-4901-9bf0-13b10a09390c",
        "parentId" : null,
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "Does this push to Master directly ??? If so, we shouldn't do that instead create a PR like the Dependency Bot",
        "createdAt" : "2020-04-25T11:41:14Z",
        "updatedAt" : "2020-04-25T19:51:01Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "54523f59-0358-4a47-8f61-86df747f4de1",
        "parentId" : "282451ed-ee0e-4901-9bf0-13b10a09390c",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "It only pushes nightly tag  - nothing else. I am adding an extra protection to make sure that this always  a good branch. But the whole idea is that this job pushes \"nighty-master\" tag after all the tests in nightly cron job are fine. I am also adding some comprehensive description of how the CI jobs work as different jobs have different purpose. Bear with me :)",
        "createdAt" : "2020-04-25T13:54:05Z",
        "updatedAt" : "2020-04-25T19:51:01Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      },
      {
        "id" : "aec971e7-cf41-420e-984a-f41c9cb8e1e5",
        "parentId" : "282451ed-ee0e-4901-9bf0-13b10a09390c",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "Sure",
        "createdAt" : "2020-04-25T13:55:49Z",
        "updatedAt" : "2020-04-25T19:51:01Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "b03cbd7c-185d-4a8b-9c51-645561875179",
        "parentId" : "282451ed-ee0e-4901-9bf0-13b10a09390c",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "There it goes @kaxil (and others) . Complete with description of the CI infrastructure we use and even a nice image showing the infrastructure.",
        "createdAt" : "2020-04-25T19:46:22Z",
        "updatedAt" : "2020-04-25T19:51:01Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "dac68d8b417c7f34386514f7ff756fb03f099055",
    "line" : 177,
    "diffHunk" : "@@ -1,1 +396,400 @@        with:\n          github_token: ${{ secrets.GITHUB_TOKEN }}\n          tags: true\n          force: true\n          branch: master"
  },
  {
    "id" : "85c43b55-8bac-4d3d-8f5d-2184b6f27976",
    "prId" : 8955,
    "prUrl" : "https://github.com/apache/airflow/pull/8955#pullrequestreview-416436206",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "18fb756c-e651-4af4-a42e-323e17711577",
        "parentId" : null,
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "v1-10-stable here too please",
        "createdAt" : "2020-05-21T19:36:48Z",
        "updatedAt" : "2020-05-21T19:36:55Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "006c2a6e-9446-476d-88a8-c47ac8774228",
        "parentId" : "18fb756c-e651-4af4-a42e-323e17711577",
        "authorId" : "b8b84983-5876-4ccf-886c-2449d94ca22f",
        "body" : "lol @ashb I just removed it based on @potiuk's suggestion",
        "createdAt" : "2020-05-21T19:37:31Z",
        "updatedAt" : "2020-05-21T19:37:31Z",
        "lastEditedBy" : "b8b84983-5876-4ccf-886c-2449d94ca22f",
        "tags" : [
        ]
      },
      {
        "id" : "8e46da8c-73dc-4f66-a2d6-e0493f04b250",
        "parentId" : "18fb756c-e651-4af4-a42e-323e17711577",
        "authorId" : "b8b84983-5876-4ccf-886c-2449d94ca22f",
        "body" : "https://github.com/apache/airflow/pull/8955#pullrequestreview-416431693",
        "createdAt" : "2020-05-21T19:37:45Z",
        "updatedAt" : "2020-05-21T19:37:45Z",
        "lastEditedBy" : "b8b84983-5876-4ccf-886c-2449d94ca22f",
        "tags" : [
        ]
      },
      {
        "id" : "caf99f12-295e-41e2-8e22-7e55e3168047",
        "parentId" : "18fb756c-e651-4af4-a42e-323e17711577",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "wait, just saw the comment. reading that",
        "createdAt" : "2020-05-21T19:37:55Z",
        "updatedAt" : "2020-05-21T19:37:55Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "200836f4-2b8e-4edd-ac12-c58f9810a128",
        "parentId" : "18fb756c-e651-4af4-a42e-323e17711577",
        "authorId" : "b8b84983-5876-4ccf-886c-2449d94ca22f",
        "body" : "It would appear that we now have what is called a Mexican standoff...",
        "createdAt" : "2020-05-21T19:38:11Z",
        "updatedAt" : "2020-05-21T19:38:21Z",
        "lastEditedBy" : "b8b84983-5876-4ccf-886c-2449d94ca22f",
        "tags" : [
        ]
      },
      {
        "id" : "5793080c-cccd-4a6e-8c36-925c2fada833",
        "parentId" : "18fb756c-e651-4af4-a42e-323e17711577",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "ah since they user the same image that's cool.",
        "createdAt" : "2020-05-21T19:38:36Z",
        "updatedAt" : "2020-05-21T19:38:36Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "1066a55a-d5d5-4c0b-bf3b-f43a768f54e1",
        "parentId" : "18fb756c-e651-4af4-a42e-323e17711577",
        "authorId" : "b8b84983-5876-4ccf-886c-2449d94ca22f",
        "body" : "https://youtu.be/BYUzax_34Iw?t=229",
        "createdAt" : "2020-05-21T19:40:07Z",
        "updatedAt" : "2020-05-21T19:40:08Z",
        "lastEditedBy" : "b8b84983-5876-4ccf-886c-2449d94ca22f",
        "tags" : [
        ]
      }
    ],
    "commit" : "5a730a7078e10b8f436cdbb46a942e17a37d75ef",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +361,365 @@    if: |\n      (github.ref == 'refs/heads/master' ||\n      github.ref == 'refs/heads/v1-10-test' ) &&\n      github.event_name != 'schedule'\n    strategy:"
  },
  {
    "id" : "00198ca1-3e54-4182-bbf1-fc74ae3a3d66",
    "prId" : 10891,
    "prUrl" : "https://github.com/apache/airflow/pull/10891#pullrequestreview-487214120",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6ce63cb0-1d33-404e-8249-ec53cfd7954f",
        "parentId" : null,
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "We should remove it from direct pushes until we diverge. Since we are going to rebase v2-0-test on master this will trigger unnecessary buld every time v2-0-test is rebased to master.",
        "createdAt" : "2020-09-12T08:16:04Z",
        "updatedAt" : "2020-12-09T18:46:24Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "0ec3c8153f7015b9bbe297dc482da2ea7e406cd3",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +22,26 @@    - cron: '28 0 * * *'\n  push:\n    branches: ['master', 'v1-10-test', 'v1-10-stable', 'v2-0-test']\n  pull_request:\n    branches: ['master', 'v1-10-test', 'v1-10-stable', 'v2-0-test']"
  },
  {
    "id" : "7e052b22-66ae-4134-a02a-175cf0c4ce06",
    "prId" : 10891,
    "prUrl" : "https://github.com/apache/airflow/pull/10891#pullrequestreview-487214120",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "628bcbcd-90bb-4f87-b91e-39fd43244275",
        "parentId" : null,
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Are we going to have PRs targeting v2-0-test now? I believe we only want to rebase v2-0-test periodically, but all the PRs should still go to master? In this case we do not need that - that woudl be harmful in fact because what do we do if someone starts making PR to v2-0-test and it is already behind master?",
        "createdAt" : "2020-09-12T08:17:47Z",
        "updatedAt" : "2020-12-09T18:46:24Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "0ec3c8153f7015b9bbe297dc482da2ea7e406cd3",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +24,28 @@    branches: ['master', 'v1-10-test', 'v1-10-stable', 'v2-0-test']\n  pull_request:\n    branches: ['master', 'v1-10-test', 'v1-10-stable', 'v2-0-test']\n\nenv:"
  },
  {
    "id" : "6a49a818-76f0-4079-b942-6b0ff79b4a5f",
    "prId" : 10891,
    "prUrl" : "https://github.com/apache/airflow/pull/10891#pullrequestreview-487214120",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c30eb978-24cd-4e01-a831-3f7184fcee18",
        "parentId" : null,
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "There is no need to add it here either. The effect of this change is that it will push images to githuib registry. We cannot have separate images (master/v2-0-test) for those two because this  is not \"Rebase-friendly\" we would have to keep a different branch name in the code for v2-0-test (as we keep _initialisation.sh (``export DEFAULT_BRANCH=\"master\" or \"DEFAULT_BRANCH=\"v1-10-test\").\r\n\r\nIf we want to continue rebasing rather than diverging, this has to remain  \"master\" in both branches. Then the master push and rebasing v2-0-test would effectively rebuild and re-push the same image.",
        "createdAt" : "2020-09-12T08:22:21Z",
        "updatedAt" : "2020-12-09T18:46:24Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "0ec3c8153f7015b9bbe297dc482da2ea7e406cd3",
    "line" : 18,
    "diffHunk" : "@@ -1,1 +923,927 @@    if: >\n      (github.ref == 'refs/heads/master' || github.ref == 'refs/heads/v1-10-test' ||\n      github.ref == 'refs/heads/v2-0-test') &&\n      github.event_name != 'schedule'\n    strategy:"
  },
  {
    "id" : "3545d25b-f715-4776-b288-bb1115b2052e",
    "prId" : 10891,
    "prUrl" : "https://github.com/apache/airflow/pull/10891#pullrequestreview-487214120",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1b9b1c35-4602-41e4-a1e4-dbf4c9fcb76d",
        "parentId" : null,
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Same here - until we continue rebasing this is not needed.",
        "createdAt" : "2020-09-12T08:24:08Z",
        "updatedAt" : "2020-12-09T18:46:24Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "0ec3c8153f7015b9bbe297dc482da2ea7e406cd3",
    "line" : 28,
    "diffHunk" : "@@ -1,1 +963,967 @@    if: >\n      (github.ref == 'refs/heads/master' || github.ref == 'refs/heads/v1-10-test' ||\n      github.ref == 'refs/heads/v2-0-test') &&\n      github.event_name != 'schedule'\n    strategy:"
  },
  {
    "id" : "35d5c7e3-04c5-43f4-b8f4-3f2f7c44d531",
    "prId" : 11487,
    "prUrl" : "https://github.com/apache/airflow/pull/11487#pullrequestreview-507285257",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c7869046-398b-4e37-9daa-44066fc9c541",
        "parentId" : null,
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "should we add `prepare-provider-packages` too ?",
        "createdAt" : "2020-10-13T10:20:28Z",
        "updatedAt" : "2020-10-13T12:19:03Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      }
    ],
    "commit" : "cc6a63833b52b067f675fa6c0f5220d41c09a8c5",
    "line" : 66,
    "diffHunk" : "@@ -1,1 +694,698 @@      - tests-mysql\n      - tests-kubernetes\n      - prepare-backport-provider-packages\n      - prepare-provider-packages\n      - prod-images"
  },
  {
    "id" : "700883e4-8188-4c3f-89ea-77ce4ed0a3bb",
    "prId" : 11541,
    "prUrl" : "https://github.com/apache/airflow/pull/11541#pullrequestreview-509245425",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c55c9e4d-185f-4419-a601-e1f707b70938",
        "parentId" : null,
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "(Not a change on this PR, but why do we care what repository we are for helm chart tests?)",
        "createdAt" : "2020-10-15T09:38:34Z",
        "updatedAt" : "2020-10-18T18:11:07Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "24e23934-cd06-4086-a358-fe2eadec7031",
        "parentId" : "c55c9e4d-185f-4419-a601-e1f707b70938",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "We exclude the workflow from running only for scheduled workflows (hence the || != schedule). Since we are using the CI builds nightly, if someone forks our repository, those scheduled builds (read further) executed also in forks. And several people pointed out that it is rather intrusive thing - to get people use their free jobs from GitHub actions on the forks. Public repos are free, but individuals have limits on a number of jobs and API calls per hour and running scheduled actions on someone else's fork is a bad idea. \r\n\r\nThat's why the recommendation (in many threads) was to only run scheduled workflows in the main repository doing this kind of if statement (it basically means the the workflow will run in you fork for pushes and PRs but not for schedules).\r\n\r\nThis is going to change soon however. It has not been publicly announced by GitHub on their web pages (also the fact that scheduled workflows run in forks was not an obvious thing) but I recently - 1st of October got an email stating that the policy, and we will be able to remove this if on October 27, 2020:\r\n\r\n> Updates to GitHub Actions usage policy: scheduled workflows in inactive and forked public repositories.\r\n\r\n> Scheduled workflows will be disabled by default in forks of public repos and in public repos with no activity for 60 consecutive days.\r\nWe’re making two changes to the usage policy for GitHub Actions. These changes will enable GitHub Actions to scale with the incredible adoption we’ve seen from the GitHub community. Here’s a quick overview:\r\n\r\n> Starting today, scheduled workflows will be disabled by default in new forks of public repositories.\r\nScheduled workflows will be disabled in public repos with no activity for 60 consecutive days.\r\nWe’re dedicated to helping the open source community be productive, which is why GitHub Actions is free for the 50 million developers who work with public repositories. These changes will help us ensure a great GitHub Actions experience for the next 50 million developers on GitHub.\r\n\r\n> To further evaluate how this will affect you, please read our FAQ below and contact GitHub Support if you run into any problems or need help. You can also always get up to date information about our usage policies in our Docs.\r\n\r\n> Thank you for using GitHub Actions 💙\r\n\r\n> What will happen to scheduled workflows in forks I already have?\r\n> If you already have scheduled workflows in forks of public repositories, they will be disabled on October 27, 2020. Repository owners will receive a reminder email 7 days prior and can choose to keep the workflows running at that time if they are needed.\r\n\r\n> I have inactive public repos, are my scheduled workflows being disabled?\r\nWe are not evaluating public repos for 60 consecutive days of inactivity until October 27, 2020. After that, public repos with 60 consecutive days of inactivity will have scheduled workflows disabled. Inactive repo owners will receive a reminder email 7 days before any workflows are disabled and can choose to keep them running at that time.\r\n\r\n> Can I re-enable disabled workflows?\r\nYes! You can easily re-enable any workflow that has been disabled by using the brand new feature to enable & disable workflows. You can enable a disabled workflow with a few clicks.",
        "createdAt" : "2020-10-15T10:41:41Z",
        "updatedAt" : "2020-10-18T18:11:07Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "429e302095acc56d3e707b0a2694375212c07ef5",
    "line" : 107,
    "diffHunk" : "@@ -1,1 +147,151 @@    if: >\n      needs.build-info.outputs.needs-helm-tests == 'true' &&\n      (github.repository == 'apache/airflow' || github.event_name != 'schedule')\n    steps:\n      - name: \"Checkout ${{ github.ref }} ( ${{ github.sha }} : merge commit ${{ github.merge_commit_sha }} )\""
  },
  {
    "id" : "92b9bfce-4937-4f51-bfdc-6359a5d687c7",
    "prId" : 11541,
    "prUrl" : "https://github.com/apache/airflow/pull/11541#pullrequestreview-511164914",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1e9be370-5c43-4768-8247-8bb8031317e1",
        "parentId" : null,
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "```suggestion\r\n          if [[ \"${GITHUB_REGISTRY_WAIT_FOR_IMAGE}\" == 'true' ]]; then\r\n```\r\n\r\nnot strictly needed ",
        "createdAt" : "2020-10-18T17:17:00Z",
        "updatedAt" : "2020-10-18T18:11:07Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "0294a961-5616-435c-b3dd-df61e2a39174",
        "parentId" : "1e9be370-5c43-4768-8247-8bb8031317e1",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Same here  - there are possibly few hundreds of places all over our code where \" no quote on the left side inside [[ ]] \" is  followed. I'd prefer to keep it - it makes the code a bit more readable.",
        "createdAt" : "2020-10-18T17:30:29Z",
        "updatedAt" : "2020-10-18T18:11:07Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "429e302095acc56d3e707b0a2694375212c07ef5",
    "line" : 77,
    "diffHunk" : "@@ -1,1 +121,125 @@        id: wait-for-image\n        run: |\n          if [[ ${GITHUB_REGISTRY_WAIT_FOR_IMAGE} == 'true' ]]; then\n              echo \"::set-output name=wait-for-image::true\"\n          else"
  },
  {
    "id" : "d0b1e361-0171-4d16-b57b-e230601c8fa4",
    "prId" : 11541,
    "prUrl" : "https://github.com/apache/airflow/pull/11541#pullrequestreview-511164937",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "082a34f0-29c5-411e-85c3-a8b8a0d988e1",
        "parentId" : null,
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "```suggestion\r\n          if [[ \"${EVENT_NAME}\" == \"pull_request\" ]]; then\r\n```",
        "createdAt" : "2020-10-18T17:17:09Z",
        "updatedAt" : "2020-10-18T18:11:07Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "cf1fee90-4fa0-40ba-807d-4f753e32d4cc",
        "parentId" : "082a34f0-29c5-411e-85c3-a8b8a0d988e1",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Same here",
        "createdAt" : "2020-10-18T17:30:46Z",
        "updatedAt" : "2020-10-18T18:11:07Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "429e302095acc56d3e707b0a2694375212c07ef5",
    "line" : 91,
    "diffHunk" : "@@ -1,1 +132,136 @@          MERGE_COMMIT_SHA: ${{ github.event.pull_request.merge_commit_sha }}\n        run: |\n          if [[ ${EVENT_NAME} == \"pull_request\" ]]; then\n            # Run selective checks\n            ./scripts/ci/selective_ci_checks.sh \"${MERGE_COMMIT_SHA}\""
  },
  {
    "id" : "5aa21f3e-95c6-4b65-b803-6eba718e08ab",
    "prId" : 11656,
    "prUrl" : "https://github.com/apache/airflow/pull/11656#pullrequestreview-511849266",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "14880670-b9e0-4fa5-bdf6-02bdf5af2836",
        "parentId" : null,
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Do we need this here? Haven't we already decided what we've built, and the commit in question will already be built. ",
        "createdAt" : "2020-10-19T13:36:52Z",
        "updatedAt" : "2020-10-19T20:19:17Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "1bd1276f-65f6-4e82-9b4e-69b6dbb75368",
        "parentId" : "14880670-b9e0-4fa5-bdf6-02bdf5af2836",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "We need to pull in the parent commit as well. By default checkout action pulls only teh one that is being built and we need the parent to get the list of changes.",
        "createdAt" : "2020-10-19T14:49:56Z",
        "updatedAt" : "2020-10-19T20:19:17Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "ecda421c26c7aeb6de98e39bcef5c56f316191ee",
    "line" : 170,
    "diffHunk" : "@@ -1,1 +263,267 @@        with:\n          ref: ${{ github.sha }}\n          fetch-depth: 2\n      - name: \"Static checks: basic checks only\"\n        run: |"
  },
  {
    "id" : "69dc89f8-bd34-46e7-bc7c-ba2ea735ae06",
    "prId" : 12018,
    "prUrl" : "https://github.com/apache/airflow/pull/12018#pullrequestreview-521223786",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f5611d7d-06e3-43d8-9709-45fd7c66dc5d",
        "parentId" : null,
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "This is an inconsistency I noticed - in the \"CI Build\" we've always showin \"apache/airflow\" here - which is the \"target repo', but we should show the source repo (i.e. head Repo). This has no effect as we are not using job names to match the duplicates in CI.yml, but it's good for consistency.  ",
        "createdAt" : "2020-11-01T13:11:01Z",
        "updatedAt" : "2020-11-01T16:47:06Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      },
      {
        "id" : "41621728-8e97-46dc-9680-3a848fa40487",
        "parentId" : "f5611d7d-06e3-43d8-9709-45fd7c66dc5d",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "And it nicely works:\r\n\r\n![Screenshot from 2020-11-01 14-12-00](https://user-images.githubusercontent.com/595491/97803908-92262e00-1c4c-11eb-9a7a-2ab52e248dca.png)\r\n",
        "createdAt" : "2020-11-01T13:14:45Z",
        "updatedAt" : "2020-11-01T16:47:06Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      },
      {
        "id" : "cfb02c7b-038c-4f9f-9998-c100cc76b18c",
        "parentId" : "f5611d7d-06e3-43d8-9709-45fd7c66dc5d",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "It used to be like that:\r\n\r\n![Screenshot from 2020-11-01 14-15-43](https://user-images.githubusercontent.com/595491/97803931-d9142380-1c4c-11eb-84a0-a2bb684fa4e4.png)\r\n",
        "createdAt" : "2020-11-01T13:16:43Z",
        "updatedAt" : "2020-11-01T16:47:06Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "bc353482e17f966bf9557193ec6403337fb219d8",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +108,112 @@      - name: >\n          Event: ${{ github.event_name }}\n          Repo: ${{ steps.source-run-info.outputs.sourceHeadRepo }}\n          Branch: ${{ github.head_ref }}\n          Run id: ${{ github.run_id }}"
  },
  {
    "id" : "05adb4b6-d8b3-4061-99ef-0fa0f2d18f58",
    "prId" : 12082,
    "prUrl" : "https://github.com/apache/airflow/pull/12082#pullrequestreview-525104776",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "51a3d5df-e6c5-403f-8eae-6ec5965a1a9d",
        "parentId" : null,
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "@ashb - > updated this to mimic the current situation with a/b releases",
        "createdAt" : "2020-11-06T12:24:14Z",
        "updatedAt" : "2020-11-09T10:55:03Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "40a587d871f61f999029e16c652762ae8d536438",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +381,385 @@      INSTALL_AIRFLOW_VERSION: \"wheel\"\n      PYTHON_MAJOR_MINOR_VERSION: ${{needs.build-info.outputs.defaultPythonVersion}}\n      VERSION_SUFFIX_FOR_PYPI: \"a2\"\n      VERSION_SUFFIX_FOR_SVN: \"a2\"\n    if: needs.build-info.outputs.image-build == 'true'"
  },
  {
    "id" : "bf94ff31-4369-4bcc-bc2d-24ddf74c6982",
    "prId" : 12417,
    "prUrl" : "https://github.com/apache/airflow/pull/12417#pullrequestreview-533146679",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "53337d1a-1cdf-495a-9e18-8741e0505639",
        "parentId" : null,
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Good point!",
        "createdAt" : "2020-11-18T06:53:41Z",
        "updatedAt" : "2020-11-18T12:03:09Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "8d3fac755300f2f92efece94cf989d0c9bc5efe7",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +781,785 @@          path: \".build/.kubernetes_venv*\"\n          key: \"venv-${{ env.cache-name }}-${{ github.job }}-${{ hashFiles('setup.py')\\\n-${{ hashFiles('setup.cfg') }}\\\n-${{ needs.build-info.outputs.defaultPythonVersion }}\"\n      - name: \"Cache bin folder with tools for kubernetes testing\""
  },
  {
    "id" : "f7f62968-4fb0-447d-abdf-7cecd3d865a5",
    "prId" : 12947,
    "prUrl" : "https://github.com/apache/airflow/pull/12947#pullrequestreview-548278718",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "515ecfcc-02f8-4db2-a183-af0307fea68b",
        "parentId" : null,
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "Docs for aws s3 sync command: https://docs.aws.amazon.com/cli/latest/reference/s3/sync.html",
        "createdAt" : "2020-12-09T15:07:07Z",
        "updatedAt" : "2020-12-10T13:22:46Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      }
    ],
    "commit" : "18405836a70507428c87029180d712b81e1d4802",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +355,359 @@          github.ref == 'refs/heads/master' && github.repository == 'apache/airflow' &&\n          github.event_name == 'push'\n        run: aws s3 sync --delete ./files/documentation s3://apache-airflow-docs\n\n  prepare-backport-provider-packages:"
  },
  {
    "id" : "2d04d3d2-985b-4756-81ea-cac9cf64ae47",
    "prId" : 13323,
    "prUrl" : "https://github.com/apache/airflow/pull/13323#pullrequestreview-558940158",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b33ee985-37fe-49f9-bd85-b51794bd1cff",
        "parentId" : null,
        "authorId" : "59d531be-9d1e-478d-99a0-6e20963d3e21",
        "body" : "May you share the reason behind this change?",
        "createdAt" : "2020-12-27T11:42:32Z",
        "updatedAt" : "2020-12-27T20:07:53Z",
        "lastEditedBy" : "59d531be-9d1e-478d-99a0-6e20963d3e21",
        "tags" : [
        ]
      },
      {
        "id" : "5b4e3af7-c602-4ab8-a6ee-157b915b2612",
        "parentId" : "b33ee985-37fe-49f9-bd85-b51794bd1cff",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Yeah. It was left-over from previous version of the action. I fixed all the warnings I encountered while making the change.",
        "createdAt" : "2020-12-27T16:16:21Z",
        "updatedAt" : "2020-12-27T20:07:53Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "574259901db98dd954ea956ab05a8fb2698d8f66",
    "line" : 53,
    "diffHunk" : "@@ -1,1 +396,400 @@        with:\n          name: airflow-backport-packages\n          path: \"./dist/apache*\"\n          retention-days: 7\n      - name: \"Upload readme artifacts\""
  },
  {
    "id" : "2549456d-2b4e-4859-85fb-5d94cb492d58",
    "prId" : 13562,
    "prUrl" : "https://github.com/apache/airflow/pull/13562#pullrequestreview-564196119",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1c297fd0-36f2-4fbc-92a3-e0f050cdd8e2",
        "parentId" : null,
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Add a comment saying why we are doing this please, becuase we _might_ be able to reverse this once we have self-hosted runners set up",
        "createdAt" : "2021-01-08T10:59:32Z",
        "updatedAt" : "2021-01-08T10:59:32Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "f3d5afd7-72a1-42ee-8cee-368df7f21aa6",
        "parentId" : "1c297fd0-36f2-4fbc-92a3-e0f050cdd8e2",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "I could add it, but I think this is a 'target' optimization. Even if  we switch to self-hosted runners, we want to keep  it in.\r\n\r\nCurrently our dependency model looks like:\r\n\r\n1) Workflow run  builds CI image -> once done CI Iimage waiting finishes and CI tests run\r\n\r\n2) in Worklflow Run PROD images are build using the CI images from step 1 (this is needed to build provider packages because prod images are build from packages now). \r\n\r\nStep 2) depends on 1), so there will never be the case that PROD images will be available before CI images.. So waiting for PROD images in parallel to CI images simply makes no sense.\r\n\r\n\r\n\r\n\r\n\r\n",
        "createdAt" : "2021-01-08T11:37:42Z",
        "updatedAt" : "2021-01-08T11:37:42Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "603db7d9bed81647527f483ee29009d18d90af62",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +835,839 @@    name: \"Wait for PROD images\"\n    runs-on: ubuntu-20.04\n    needs: [build-info, ci-images]\n    env:\n      BACKEND: sqlite"
  },
  {
    "id" : "b164a6b8-1b48-452f-9dfe-5c791c9a426f",
    "prId" : 13730,
    "prUrl" : "https://github.com/apache/airflow/pull/13730#pullrequestreview-570467053",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3617c39b-b08a-41d9-a9ce-72dec1c2c92e",
        "parentId" : null,
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "I think this can be replaced by a pre-requisite step (before build-info) that could produce a string output that will be used as \"fromJson()\" in the \"runs-on\". I can make a fixup with it.",
        "createdAt" : "2021-01-17T20:54:32Z",
        "updatedAt" : "2021-02-09T10:44:24Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      },
      {
        "id" : "4382fb91-2ece-4bca-aea6-a62ba6a1c54a",
        "parentId" : "3617c39b-b08a-41d9-a9ce-72dec1c2c92e",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "I thought about that but there is one major downside: that would have to run on \"public\" queues, meaning it would still be at the mercy of long queue time",
        "createdAt" : "2021-01-17T21:06:34Z",
        "updatedAt" : "2021-02-09T10:44:24Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "6c0da427-53bc-40e1-87b5-a91071c117ae",
        "parentId" : "3617c39b-b08a-41d9-a9ce-72dec1c2c92e",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Not really. See https://github.com/astronomer/airflow/pull/1197",
        "createdAt" : "2021-01-17T21:25:23Z",
        "updatedAt" : "2021-02-09T10:44:24Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      },
      {
        "id" : "449f16de-e070-4ca4-9b78-398c4c8a0668",
        "parentId" : "3617c39b-b08a-41d9-a9ce-72dec1c2c92e",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Ohhh I see, yeah cool.",
        "createdAt" : "2021-01-17T21:34:26Z",
        "updatedAt" : "2021-02-09T10:44:24Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "067ae65d-e6af-4bda-93ec-4a8650c78ce5",
        "parentId" : "3617c39b-b08a-41d9-a9ce-72dec1c2c92e",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Done in https://github.com/apache/airflow/pull/13730/commits/939a7fe948f2d917d1c1eca5100a1161cd5ab1b3\r\n\r\nI kept it in the \"Build Info\" job, as each job needs a new worker, so having a worker tied up to run a very simple shell script seemed wasteful, especially as this falls reasonably cleanly under the \"work out build info\" description of the existing step",
        "createdAt" : "2021-01-18T12:55:29Z",
        "updatedAt" : "2021-02-09T10:44:24Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "65b0531c-cea1-4968-99bc-53a821fa1307",
        "parentId" : "3617c39b-b08a-41d9-a9ce-72dec1c2c92e",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Yep. Easier indeed.",
        "createdAt" : "2021-01-18T12:58:48Z",
        "updatedAt" : "2021-02-09T10:44:24Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "01b7bbd0c8dec593b1064c2a1e360c7cb32881da",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +70,74 @@  build-info:\n    name: \"Build info\"\n    runs-on: >-\n      ${{ (\n        github.event_name == 'push' ||"
  },
  {
    "id" : "5f30d992-4f10-478e-91cb-89089a9e9b46",
    "prId" : 13730,
    "prUrl" : "https://github.com/apache/airflow/pull/13730#pullrequestreview-584730087",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "44f12183-2cf6-4016-acb0-74a996a43132",
        "parentId" : null,
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Nice",
        "createdAt" : "2021-02-05T21:46:39Z",
        "updatedAt" : "2021-02-09T10:44:24Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "01b7bbd0c8dec593b1064c2a1e360c7cb32881da",
    "line" : 29,
    "diffHunk" : "@@ -1,1 +120,124 @@      runsOn: ${{ steps.set-runs-on.outputs.runsOn }}\n    steps:\n      # Avoid having to specify the runs-on logic every time\n      - name: Set runs-on\n        id: set-runs-on"
  },
  {
    "id" : "8e32e892-1920-4736-9f0e-02fdab096f30",
    "prId" : 14718,
    "prUrl" : "https://github.com/apache/airflow/pull/14718#pullrequestreview-610154050",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fd9ce610-b6e9-4951-93da-607f8e47664b",
        "parentId" : null,
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "I guess we can remove this one? That turned out to be not working for forked PRs I believe?",
        "createdAt" : "2021-03-11T19:36:52Z",
        "updatedAt" : "2021-03-11T19:37:03Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "ece92d7c6a9626935e8e8f8399bb711f33830bee",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +27,31 @@\nenv:\n  AIRFLOW_COMMITERS: ${{ secrets.AIRFLOW_COMMITERS }}\n  MOUNT_SELECTED_LOCAL_SOURCES: \"false\"\n  FORCE_ANSWER_TO_QUESTIONS: \"yes\""
  },
  {
    "id" : "317c0b07-4f29-4d85-a7c6-d2e16c2df6bc",
    "prId" : 14996,
    "prUrl" : "https://github.com/apache/airflow/pull/14996#pullrequestreview-621083736",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bd5c7095-b69d-4d9c-9fd2-f951abe3e237",
        "parentId" : null,
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "Why not just the following:\r\n\r\n```suggestion\r\n    if: needs.build-info.outputs.image-build == 'true' && github.ref == 'refs/heads/master'\r\n```",
        "createdAt" : "2021-03-25T00:56:36Z",
        "updatedAt" : "2021-03-25T16:14:29Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "dfbb415d-b758-40a0-acc1-0ba3dbb151a1",
        "parentId" : "bd5c7095-b69d-4d9c-9fd2-f951abe3e237",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "OK. You asked this question, be prepared for the answer :). It's long, sorry, but GitHub did NOT make it easy.\r\n\r\nBeware. It's long even if the question is simple.\r\n\r\nThe problem is that if you are running direct push (i.e. merge to master) you have the actual master branch in `github.ref`, indeed, however it looks completely differently in other workflows.\r\n\r\nWhen you run `pull_request` workflow, github ref is something like `refs/pull/14996/merge`. In this case you should look for ``github.base_ref`` instead:\r\n```\r\ngithub.base_ref\tstring\tThe base_ref or target branch of the pull request in a workflow run. This property is\r\n only available when the event that triggers a workflow run is a pull_request.\r\n```\r\nAnd - of course - it is not documented. \r\n\r\nAnd  ... wait for it ..  base_ref is NOT set in direct pushes at all (i.e. when you merge) so if you would like to use this information, your condition will start looking like:\r\n\r\n```\r\nif github.event != 'pull_request' && github.base_ref == 'master' || github.ref == 'master'  \r\n```\r\n\r\nBut, unfortunately, this is just a beginning. I am not 100% sure if we are covered here because `github.ref` behaviour for`pull_request` workflows is not documented (many of the values in GitHub context are poorly documented or not documented at all and I had to reverse-engineer them). \r\n\r\nWhat's more - in `workflow_run`  workflow you have no information whatsoever what was the base branch (and for a change `workflow_run` for every push and every PR runs always with `master` github.ref, no matter what is the target branch. Not even when you query the \"source_run\" directly via GitHub API you can find the base branch. This is because (surprise-surprise) when you query the \"triggering\" workflow from the \"triggered\" one - you have no access to the \"context\" of the triggering run (obviously). You only can see whatever the API returns you and the last time when I checked there was no information about the \"base_branch\" there. It could have changed since though.\r\n\r\nSo what you have to do (I did not find a better way) is that you have to find the original PR via GitHub API and retrieve information from there. But in order to retrieve the information from there you need to iterate through open PRs and match the PR by branch + repo (I am already doing it to be able to push \"Status checks\" to the PR. Yes. I know, it is insane. But I could not find another way.\r\n\r\nIf you are adventurous and want to look yourself - in every job we have this step starting from \"Event \" ... where I dump the context - this makes reverse-engineering much easier (but none more pleasant).\r\n\r\nAFAIK there is no sane way to get the 'base\" branch.\r\n\r\nThat's why we have DEFAULT_BRANCH in _initialization.sh that we keep different in every branch and I am using it. And exposing it as \"output\" seems like much simpler thing to do.\r\n\r\nI would be super happy if you could find an easier way here.\r\n\r\n\r\n",
        "createdAt" : "2021-03-25T01:41:40Z",
        "updatedAt" : "2021-03-25T16:14:29Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      },
      {
        "id" : "49b3ae04-dca5-4e54-a83c-62c58ef08f97",
        "parentId" : "bd5c7095-b69d-4d9c-9fd2-f951abe3e237",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "At this point, I just hope GH Api become more mature and provide detailed info for use in workflows, any who as we don't know when it would happen let's merge this one in",
        "createdAt" : "2021-03-25T13:03:56Z",
        "updatedAt" : "2021-03-25T16:14:29Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      }
    ],
    "commit" : "d3bc0a119cef2317a9bd9119cc93a25d91924509",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +506,510 @@      matrix:\n        package-format: ['wheel', 'sdist']\n    if: needs.build-info.outputs.image-build == 'true' && needs.build-info.outputs.default-branch == 'master'\n    steps:\n      - name: \"Checkout ${{ github.ref }} ( ${{ github.sha }} )\""
  }
]