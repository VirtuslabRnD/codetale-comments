[
  {
    "id" : "62c441f2-3045-48ac-9181-a2a9c55a4a1f",
    "prId" : 4454,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b84f1043-14ee-43b2-8b95-4a2335b3b39c",
        "parentId" : null,
        "authorId" : "0e0ae9fd-53e5-41a6-8774-29bcec6001df",
        "body" : "needs `.. versionadded:: 1.9.0` see e.g. np.percentile\n",
        "createdAt" : "2014-05-30T12:01:20Z",
        "updatedAt" : "2014-06-06T08:40:51Z",
        "lastEditedBy" : "0e0ae9fd-53e5-41a6-8774-29bcec6001df",
        "tags" : [
        ]
      }
    ],
    "commit" : "7f8aae032a218ed609e23068d5aec128b0d6fe8e",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +32,36 @@        Additional arguments to `func1d`.\n    kwargs: any\n        Additional named arguments to `func1d`.\n\n        .. versionadded:: 1.9.0"
  },
  {
    "id" : "e3b4761c-2ae7-4625-8499-d61314f20e58",
    "prId" : 7918,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4a298e9f-4168-49bd-a95c-c8f425afe510",
        "parentId" : null,
        "authorId" : "1794b506-aeff-4fdc-9354-7fd193f97b33",
        "body" : "So, for this branch, I would suggest to run\n\n```\nres.__array_wrap__(outarr)\n```\n\njust after creating `outarr`.\n",
        "createdAt" : "2016-08-08T16:03:30Z",
        "updatedAt" : "2016-10-11T02:29:51Z",
        "lastEditedBy" : "1794b506-aeff-4fdc-9354-7fd193f97b33",
        "tags" : [
        ]
      }
    ],
    "commit" : "242da4168588dc9431077f67c8f5309ac986e3fc",
    "line" : null,
    "diffHunk" : "@@ -1,1 +111,115 @@    else:\n        res = asanyarray(res)\n        Ntot = product(outshape)\n        holdshape = outshape\n        outshape = list(arr.shape)"
  },
  {
    "id" : "55672938-dafb-415e-9888-a0936672a5c7",
    "prId" : 7918,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1be64ed3-e4a2-4700-a094-d2f67cd44fe8",
        "parentId" : null,
        "authorId" : "1794b506-aeff-4fdc-9354-7fd193f97b33",
        "body" : "Somewhat of an aside, but suppose one uses `func1d=np.mean`, then at least for astropy's `Quantity` class, what one gets is an `Quantity` array scalar as output. For any array scalar, `np.isscalar` returns `False`, so one ends up in this branch, but with an object that has `shape=()` and for which trying `len(a)` gives a `TypeError`:\n\n```\na = np.array(1)\na.shape\n# ()\nlen(a)\n# TypeError(...)\n```\n\nTo catch this, one has to make this branch aware of the possibility that `res.shape == ()`.\n",
        "createdAt" : "2016-08-08T16:07:46Z",
        "updatedAt" : "2016-10-11T02:29:51Z",
        "lastEditedBy" : "1794b506-aeff-4fdc-9354-7fd193f97b33",
        "tags" : [
        ]
      }
    ],
    "commit" : "242da4168588dc9431077f67c8f5309ac986e3fc",
    "line" : null,
    "diffHunk" : "@@ -1,1 +112,116 @@        res = asanyarray(res)\n        Ntot = product(outshape)\n        holdshape = outshape\n        outshape = list(arr.shape)\n        outshape[axis] = res.size"
  },
  {
    "id" : "0ae2169d-265e-4034-94ca-0efb63329104",
    "prId" : 8441,
    "prUrl" : "https://github.com/numpy/numpy/pull/8441#pullrequestreview-20726302",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8b69f3ce-b235-4ab3-ad83-12aab859c115",
        "parentId" : null,
        "authorId" : "1794b506-aeff-4fdc-9354-7fd193f97b33",
        "body" : "When I looked at this first, I thought you might consider using the (relatively new) `np.moveaxis`, i.e.,\r\n```\r\ninarr_view = moveaxis(inarr, axis, -1)\r\n```\r\nThis will not be any faster (as it just sets up a `transpose`, like here), but is perhaps clearer. As a side benefit, you can remove above the checks on the validity of `axis`, as `moveaxis` does those anyway.\r\n\r\nHowever, looking further down, it is not obvious `moveaxis` would work there, since `res.ndim` could in principle be >1-d (for which your code adds support, which I think is very nice!). But one could steal a bit from the `moveaxis` code and write here\r\n```\r\nin_permute = [n for n in range(nd) if n != axis] + [axis]\r\ninarr_view = transpose(arr, in_permute)\r\n```",
        "createdAt" : "2017-01-21T16:56:22Z",
        "updatedAt" : "2017-02-11T21:13:32Z",
        "lastEditedBy" : "1794b506-aeff-4fdc-9354-7fd193f97b33",
        "tags" : [
        ]
      },
      {
        "id" : "07d5041b-a310-4abe-b0d9-aebe1fb27416",
        "parentId" : "8b69f3ce-b235-4ab3-ad83-12aab859c115",
        "authorId" : "ab55dc5f-f626-43b1-ba83-3d8843d79a45",
        "body" : "Oh, good point. `moveaxis` works with multiple axes too, so should work in both cases.",
        "createdAt" : "2017-01-21T19:26:42Z",
        "updatedAt" : "2017-02-11T21:13:32Z",
        "lastEditedBy" : "ab55dc5f-f626-43b1-ba83-3d8843d79a45",
        "tags" : [
        ]
      },
      {
        "id" : "c0216cff-dbd2-4a03-9149-62960850be06",
        "parentId" : "8b69f3ce-b235-4ab3-ad83-12aab859c115",
        "authorId" : "576cec6e-8071-43f8-bce9-351a2589f050",
        "body" : "For restoring axes, you could maybe write something like:\r\n```python\r\nmoveaxis(pre_arr, [i + nd - 1 for i in range(res.ndim)],\r\n         [i + axis for i in range(res.ndim)])\r\n```\r\n\r\nI think this is a slight improvement in clarity over building up the permutation axes for transpose directly.",
        "createdAt" : "2017-01-21T21:49:33Z",
        "updatedAt" : "2017-02-11T21:13:32Z",
        "lastEditedBy" : "576cec6e-8071-43f8-bce9-351a2589f050",
        "tags" : [
        ]
      },
      {
        "id" : "299951d2-af6d-48cd-b075-9331e471453f",
        "parentId" : "8b69f3ce-b235-4ab3-ad83-12aab859c115",
        "authorId" : "ab55dc5f-f626-43b1-ba83-3d8843d79a45",
        "body" : "I think `moveaxis` should learn a shorthand for dest such that this would work:\r\n```\r\nmoveaxis(pre_arr, [i + nd - 1 for i in range(res.ndim)], axis)\r\n```\r\n\r\nIe, if dest is a scalar, move all the source axes to that location, in the order they were passed in src\r\n",
        "createdAt" : "2017-01-22T03:00:30Z",
        "updatedAt" : "2017-02-11T21:13:32Z",
        "lastEditedBy" : "ab55dc5f-f626-43b1-ba83-3d8843d79a45",
        "tags" : [
        ]
      },
      {
        "id" : "44432874-670d-40b0-b989-6b09750fe0f2",
        "parentId" : "8b69f3ce-b235-4ab3-ad83-12aab859c115",
        "authorId" : "ab55dc5f-f626-43b1-ba83-3d8843d79a45",
        "body" : "@shoyer: Based on @mhvk's revised opinion, are you happy for this to remain as it is? Any further pain-points blocking this being merged?",
        "createdAt" : "2017-02-08T10:31:20Z",
        "updatedAt" : "2017-02-11T21:13:32Z",
        "lastEditedBy" : "ab55dc5f-f626-43b1-ba83-3d8843d79a45",
        "tags" : [
        ]
      }
    ],
    "commit" : "d4bce016f19dd8c8e2761818741d1c4024a34f21",
    "line" : 95,
    "diffHunk" : "@@ -1,1 +103,107 @@\n    # arr, with the iteration axis at the end\n    in_dims = list(range(nd))\n    inarr_view = transpose(arr, in_dims[:axis] + in_dims[axis+1:] + [axis])\n"
  }
]