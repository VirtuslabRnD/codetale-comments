[
  {
    "id" : "3c97d8f0-b537-4f86-8d49-fb7b41d7d538",
    "prId" : 3534,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3f11c668-5f3c-4ce4-92ee-8687835590d4",
        "parentId" : null,
        "authorId" : "2035b7cb-d7e4-423a-a3b4-2c5117021872",
        "body" : "shouldn't there be a check if any(mask) and if not just return a, None to avoid any custom operations in functions using _replace_nan and comparing against None?\n",
        "createdAt" : "2013-07-19T17:00:52Z",
        "updatedAt" : "2013-08-14T22:00:55Z",
        "lastEditedBy" : "2035b7cb-d7e4-423a-a3b4-2c5117021872",
        "tags" : [
        ]
      },
      {
        "id" : "b11ca615-1def-4a76-aa7b-684657b3405c",
        "parentId" : "3f11c668-5f3c-4ce4-92ee-8687835590d4",
        "authorId" : "2035b7cb-d7e4-423a-a3b4-2c5117021872",
        "body" : "and do that before copying possibly?\n",
        "createdAt" : "2013-07-19T17:03:14Z",
        "updatedAt" : "2013-08-14T22:00:55Z",
        "lastEditedBy" : "2035b7cb-d7e4-423a-a3b4-2c5117021872",
        "tags" : [
        ]
      },
      {
        "id" : "a4aacd65-7811-4527-bc5d-fdb355d674ca",
        "parentId" : "3f11c668-5f3c-4ce4-92ee-8687835590d4",
        "authorId" : "e6b1ca39-8ea5-45f7-ae52-a080cee1181b",
        "body" : "That adds an extra mask.any() while perhaps avoiding a copy. The savings would depend on how often a copy is made. My assumption was that making a copy would be the usual thing when calling the nan-functions, but in the absence of actual data that is just speculation.\n",
        "createdAt" : "2013-08-01T20:12:54Z",
        "updatedAt" : "2013-08-14T22:00:55Z",
        "lastEditedBy" : "e6b1ca39-8ea5-45f7-ae52-a080cee1181b",
        "tags" : [
        ]
      }
    ],
    "commit" : "dc73e1b104cf59f936e3c2bb5cfc3c0e147f99de",
    "line" : 67,
    "diffHunk" : "@@ -1,1 +65,69 @@        a = np.array(a, subok=True)\n\n    mask = np.isnan(a)\n    np.copyto(a, val, where=mask)\n    return a, mask"
  },
  {
    "id" : "302f7e5e-0a47-4213-88cf-6791ec414118",
    "prId" : 3534,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a512afce-d9f9-4095-9eb7-1d4e09f2f7d8",
        "parentId" : null,
        "authorId" : "b0342685-bd89-441f-a04f-0e75db24c07f",
        "body" : "OK, I know this is a damn tiny corner cases... If we already have inf in this kind of function, the argmax may return the index to the NaN instead of the inf. Getting around it is likely tedious (would require getting the `mask.all(axis=axis)` by looking at the value of the mask `ind` points to instead), but should we note it in the docs?\n",
        "createdAt" : "2013-08-11T11:07:30Z",
        "updatedAt" : "2013-08-14T22:00:55Z",
        "lastEditedBy" : "b0342685-bd89-441f-a04f-0e75db24c07f",
        "tags" : [
        ]
      },
      {
        "id" : "1063f5c0-2b1a-4f61-826a-22715711f405",
        "parentId" : "a512afce-d9f9-4095-9eb7-1d4e09f2f7d8",
        "authorId" : "b0342685-bd89-441f-a04f-0e75db24c07f",
        "body" : "Ah, it would require both... first checking mask value and then a further inspection of `mask.all(axis=axis)`...\n",
        "createdAt" : "2013-08-11T11:09:36Z",
        "updatedAt" : "2013-08-14T22:00:55Z",
        "lastEditedBy" : "b0342685-bd89-441f-a04f-0e75db24c07f",
        "tags" : [
        ]
      },
      {
        "id" : "d85ebc81-a963-42c3-9fb5-141fd3731a7f",
        "parentId" : "a512afce-d9f9-4095-9eb7-1d4e09f2f7d8",
        "authorId" : "e6b1ca39-8ea5-45f7-ae52-a080cee1181b",
        "body" : "Hmm, good point. I think doing this can be made to depend on a having an inf value, so that should make most cases reasonable efficient.\n",
        "createdAt" : "2013-08-13T00:35:11Z",
        "updatedAt" : "2013-08-14T22:00:56Z",
        "lastEditedBy" : "e6b1ca39-8ea5-45f7-ae52-a080cee1181b",
        "tags" : [
        ]
      },
      {
        "id" : "c643bf45-57f3-41e1-98e6-e9b3f906ce1c",
        "parentId" : "a512afce-d9f9-4095-9eb7-1d4e09f2f7d8",
        "authorId" : "e6b1ca39-8ea5-45f7-ae52-a080cee1181b",
        "body" : "Or maybe not :(. Hmm...\n",
        "createdAt" : "2013-08-13T00:53:19Z",
        "updatedAt" : "2013-08-14T22:00:56Z",
        "lastEditedBy" : "e6b1ca39-8ea5-45f7-ae52-a080cee1181b",
        "tags" : [
        ]
      },
      {
        "id" : "ec6e9758-c4d1-4e1e-9d63-e564f134e8c9",
        "parentId" : "a512afce-d9f9-4095-9eb7-1d4e09f2f7d8",
        "authorId" : "e6b1ca39-8ea5-45f7-ae52-a080cee1181b",
        "body" : "I'm inclined to just document that is might be a problem. Because this stuff is much easier to do in C, the best solution is probably to have a C module of stat functions. The stat functions in _methods.py aren't that great either, and could use a C implementation. Maybe it is time to look at adapting and merging @kwgoodman work.\n",
        "createdAt" : "2013-08-13T04:03:56Z",
        "updatedAt" : "2013-08-14T22:00:56Z",
        "lastEditedBy" : "e6b1ca39-8ea5-45f7-ae52-a080cee1181b",
        "tags" : [
        ]
      }
    ],
    "commit" : "dc73e1b104cf59f936e3c2bb5cfc3c0e147f99de",
    "line" : 343,
    "diffHunk" : "@@ -1,1 +341,345 @@    # May later want to do something special for all nan slices.\n    mask = mask.all(axis=axis)\n    ind = np.argmin(a, axis)\n    if mask.any():\n        warnings.warn(\"All NaN axis detected.\", NanWarning)"
  }
]