[
  {
    "id" : "7e79911a-535d-4b8f-9ed1-d936fba38c05",
    "prId" : 10477,
    "prUrl" : "https://github.com/numpy/numpy/pull/10477#pullrequestreview-94143437",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7c1ffc63-1be0-45f9-9663-7ed610966c35",
        "parentId" : null,
        "authorId" : "ab55dc5f-f626-43b1-ba83-3d8843d79a45",
        "body" : "Should add a comment here explaining that these are messy because they are generated from the C file (and explain how to generate them)",
        "createdAt" : "2018-01-28T22:14:04Z",
        "updatedAt" : "2018-02-09T17:30:26Z",
        "lastEditedBy" : "ab55dc5f-f626-43b1-ba83-3d8843d79a45",
        "tags" : [
        ]
      },
      {
        "id" : "f1a99249-c909-4705-b471-ef5b1ed2bdbb",
        "parentId" : "7c1ffc63-1be0-45f9-9663-7ed610966c35",
        "authorId" : null,
        "body" : "As explained below, these are copypasted from `libf2c`, and the compiler will detect (and does detect) any missing/incorrect definitions (see all of the new warnings that the compiler previously missed). I this case, I don't believe that time should be spent on the aesthetic issue, but rather the compiler warnings (and in another PR).",
        "createdAt" : "2018-02-05T21:10:45Z",
        "updatedAt" : "2018-02-09T17:30:26Z",
        "lastEditedBy" : null,
        "tags" : [
        ]
      }
    ],
    "commit" : "6995bfe78b877f2a0c631faca77fc676e171bd18",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +215,219 @@#undef vax\n#endif\n\n/*  https://anonscm.debian.org/cgit/collab-maint/libf2c2.git/tree/f2ch.add  */\n"
  },
  {
    "id" : "56deca03-f173-4877-943b-e5d4d520ba84",
    "prId" : 10477,
    "prUrl" : "https://github.com/numpy/numpy/pull/10477#pullrequestreview-95499706",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "98b0e2a3-3a5b-46b2-aaaa-e2cec1260d9a",
        "parentId" : null,
        "authorId" : "ab55dc5f-f626-43b1-ba83-3d8843d79a45",
        "body" : "I'm a little wary of the fact that either:\r\n* You created this manually\r\n* You created this with an automated process that isn't documented in a way that can be repeated in future.\r\n\r\nShould we perhaps have the script check the list of headers in this file against the ones it removed from the source, and print out warnings/errors if some are missing?",
        "createdAt" : "2018-02-05T08:25:53Z",
        "updatedAt" : "2018-02-09T17:30:26Z",
        "lastEditedBy" : "ab55dc5f-f626-43b1-ba83-3d8843d79a45",
        "tags" : [
        ]
      },
      {
        "id" : "b7c9c288-11e1-4fa2-a104-5c08e5f20280",
        "parentId" : "98b0e2a3-3a5b-46b2-aaaa-e2cec1260d9a",
        "authorId" : null,
        "body" : "These headers come directly from `libf2c` (specifically, some random gh repository).\r\n\r\n> Should we perhaps have the script check the list of headers in this file against the ones it removed from the source, and print out warnings/errors if some are missing?\r\n\r\nThe compiler can check this as long as there are no inline prototypes (which is why inline prototypes are a really bad idea). The only script that we need to write is one which will remove the inline prototypes, which is what I have done here.",
        "createdAt" : "2018-02-05T21:07:17Z",
        "updatedAt" : "2018-02-09T17:30:26Z",
        "lastEditedBy" : null,
        "tags" : [
        ]
      },
      {
        "id" : "7a6fd3b1-02e9-4ac7-802c-b4161aaa9f78",
        "parentId" : "98b0e2a3-3a5b-46b2-aaaa-e2cec1260d9a",
        "authorId" : "ab55dc5f-f626-43b1-ba83-3d8843d79a45",
        "body" : "Can you link to that random repo? Does this include the `Subroutine` declarations too?",
        "createdAt" : "2018-02-09T06:15:18Z",
        "updatedAt" : "2018-02-09T17:30:26Z",
        "lastEditedBy" : "ab55dc5f-f626-43b1-ba83-3d8843d79a45",
        "tags" : [
        ]
      },
      {
        "id" : "c3d58f67-67a2-4655-9359-da16d4044241",
        "parentId" : "98b0e2a3-3a5b-46b2-aaaa-e2cec1260d9a",
        "authorId" : null,
        "body" : "I think it's [here](https://github.com/juanjosegarciaripoll/f2c/blob/master/include/f2c.h). But again, all that's required is to remove the inline prototypes and the compiler will check consistency. It's not required to trust that these definitions are correct.",
        "createdAt" : "2018-02-09T06:23:08Z",
        "updatedAt" : "2018-02-09T17:30:26Z",
        "lastEditedBy" : null,
        "tags" : [
        ]
      },
      {
        "id" : "56ab4343-d422-4e4e-98df-68dfad97df30",
        "parentId" : "98b0e2a3-3a5b-46b2-aaaa-e2cec1260d9a",
        "authorId" : "ab55dc5f-f626-43b1-ba83-3d8843d79a45",
        "body" : "> the compiler will check consistency. I\r\n\r\nIs that true if one is missing? (hence my question)\r\n\r\nThe one you link to [at juanjosegarciaripoll/f2c](https://github.com/juanjosegarciaripoll/f2c/blob/master/include/f2c.h) doesn't match the [debian package](\r\nhttps://anonscm.debian.org/cgit/collab-maint/f2c.git/tree/f2c.h)...",
        "createdAt" : "2018-02-09T07:14:21Z",
        "updatedAt" : "2018-02-09T17:30:26Z",
        "lastEditedBy" : "ab55dc5f-f626-43b1-ba83-3d8843d79a45",
        "tags" : [
        ]
      },
      {
        "id" : "a7aa8f62-d42e-4286-ba96-1f23abccf392",
        "parentId" : "98b0e2a3-3a5b-46b2-aaaa-e2cec1260d9a",
        "authorId" : null,
        "body" : "> Is that true if one is missing? (hence my question)\r\n\r\nYes. There is only a problem when the prototypes are inconsistently defined across multiple files.",
        "createdAt" : "2018-02-09T17:29:17Z",
        "updatedAt" : "2018-02-09T17:30:26Z",
        "lastEditedBy" : null,
        "tags" : [
        ]
      }
    ],
    "commit" : "6995bfe78b877f2a0c631faca77fc676e171bd18",
    "line" : 167,
    "diffHunk" : "@@ -1,1 +378,382 @@extern void z_log(doublecomplex *, doublecomplex *);\nextern void z_sin(doublecomplex *, doublecomplex *);\nextern void z_sqrt(doublecomplex *, doublecomplex *);\n\n#ifdef __cplusplus"
  },
  {
    "id" : "29fe19a3-f72b-44c7-a8ef-28045d1d393a",
    "prId" : 15218,
    "prUrl" : "https://github.com/numpy/numpy/pull/15218#pullrequestreview-337504738",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6f600502-dc42-47c6-afc8-2855211d674a",
        "parentId" : null,
        "authorId" : "ab55dc5f-f626-43b1-ba83-3d8843d79a45",
        "body" : "I'm a little surprised this is the case, but I assume it comes down to the definitions of functions from cblas?",
        "createdAt" : "2020-01-01T20:50:13Z",
        "updatedAt" : "2020-01-01T21:42:12Z",
        "lastEditedBy" : "ab55dc5f-f626-43b1-ba83-3d8843d79a45",
        "tags" : [
        ]
      },
      {
        "id" : "4a69fff6-c66d-41ca-985f-83f25928073d",
        "parentId" : "6f600502-dc42-47c6-afc8-2855211d674a",
        "authorId" : "48d7d71b-9655-46b2-9a18-7c1fba7837d0",
        "body" : "`npy_cblas.h` does not contain functions that have `logical` arguments, and numpy.linalg does not use such functions either. (LAPACK does however contain such functions, but the point is probably moot.)\r\n\r\nI think there is no standard for size of `logical` in Fortran. For gfortran, `-fdefault-integer-8` implies also LOGICAL is 8 bytes, and I think that's also true for ifort.\r\n\r\nThe \"canonical\" C API LAPACKE defines `lapack_logical` as `lapack_int`, also in its ILP64 configuration, https://github.com/Reference-LAPACK/lapack/blob/f24797e40e44c6d98ea7fa4e36bd1ec6c02c95e5/LAPACKE/include/lapacke_config.h#L46-L56 so I think precedent says it should be like that also here (even though it generally does not matter as the ABI is not exposed).",
        "createdAt" : "2020-01-01T21:26:22Z",
        "updatedAt" : "2020-01-01T21:42:12Z",
        "lastEditedBy" : "48d7d71b-9655-46b2-9a18-7c1fba7837d0",
        "tags" : [
        ]
      }
    ],
    "commit" : "a1d1e36f96c843e90348c4ff4cca6657d1a71b0e",
    "line" : 16,
    "diffHunk" : "@@ -1,1 +19,23 @@typedef struct { real r, i; } complex;\ntypedef struct { doublereal r, i; } doublecomplex;\ntypedef CBLAS_INT logical;\ntypedef short int shortlogical;\ntypedef char logical1;"
  },
  {
    "id" : "8b9468bb-d203-4c61-a939-5d5302108c52",
    "prId" : 15218,
    "prUrl" : "https://github.com/numpy/numpy/pull/15218#pullrequestreview-337503865",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f0e9e811-b096-41df-ae5f-5104f16acef8",
        "parentId" : null,
        "authorId" : "ab55dc5f-f626-43b1-ba83-3d8843d79a45",
        "body" : "Any idea what defines this function? Perhaps the definition should change. (`f2c.c`?)",
        "createdAt" : "2020-01-01T20:51:39Z",
        "updatedAt" : "2020-01-01T21:42:12Z",
        "lastEditedBy" : "ab55dc5f-f626-43b1-ba83-3d8843d79a45",
        "tags" : [
        ]
      },
      {
        "id" : "a2e3927f-ca87-4802-a627-94b91a95a52c",
        "parentId" : "f0e9e811-b096-41df-ae5f-5104f16acef8",
        "authorId" : "48d7d71b-9655-46b2-9a18-7c1fba7837d0",
        "body" : "The definition is like this in `f2c.c` (i.e. int instead of integer), and the function is unused.",
        "createdAt" : "2020-01-01T20:57:24Z",
        "updatedAt" : "2020-01-01T21:42:12Z",
        "lastEditedBy" : "48d7d71b-9655-46b2-9a18-7c1fba7837d0",
        "tags" : [
        ]
      }
    ],
    "commit" : "a1d1e36f96c843e90348c4ff4cca6657d1a71b0e",
    "line" : 38,
    "diffHunk" : "@@ -1,1 +355,359 @@extern integer s_rdfe(cilist *);\nextern integer s_rdue(cilist *);\nextern int s_rnge(char *, int, char *, int);\nextern integer s_rsfe(cilist *);\nextern integer s_rsfi(icilist *);"
  }
]