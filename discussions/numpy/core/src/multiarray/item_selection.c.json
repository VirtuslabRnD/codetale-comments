[
  {
    "id" : "1c655ae0-2f56-431a-92f3-1fd87bd823d6",
    "prId" : 2974,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cf05042b-0800-4ec6-94b6-ce4febc064ed",
        "parentId" : null,
        "authorId" : "762e53b3-7c6a-4fbb-8098-a2c522dd50a6",
        "body" : "If `PyErr_Occurred` is true, after a BEGIN_THREADS section, then doesn't that imply that someone violated the GIL usage rules? How could a PyErr be created if the GIL was dropped?\n",
        "createdAt" : "2013-02-10T21:40:36Z",
        "updatedAt" : "2013-02-10T21:40:36Z",
        "lastEditedBy" : "762e53b3-7c6a-4fbb-8098-a2c522dd50a6",
        "tags" : [
        ]
      },
      {
        "id" : "243aeb34-8a01-421a-80d7-c2aa13b34b41",
        "parentId" : "cf05042b-0800-4ec6-94b6-ce4febc064ed",
        "authorId" : "b0342685-bd89-441f-a04f-0e75db24c07f",
        "body" : "there is a goto fail before `NPY_BEGIN_THREADS_DESCR(PyArray_DESCR(op));`. Could special case that, but in LexSort there are a few of them.\n",
        "createdAt" : "2013-02-10T21:49:35Z",
        "updatedAt" : "2013-02-10T21:49:35Z",
        "lastEditedBy" : "b0342685-bd89-441f-a04f-0e75db24c07f",
        "tags" : [
        ]
      }
    ],
    "commit" : "2b76da387ef4c8a0317c80ce08e5bbab833b14e5",
    "line" : 56,
    "diffHunk" : "@@ -1,1 +891,895 @@ fail:\n    NPY_END_THREADS;\n    if (!PyErr_Occurred()) {\n        /* Out of memory during sorting or buffer creation */\n        PyErr_NoMemory();"
  },
  {
    "id" : "85ab5222-fb3a-4225-8bb3-aecb9bfee3fc",
    "prId" : 2974,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "db71399e-b663-49a9-930a-6272c4849e9e",
        "parentId" : null,
        "authorId" : "e6b1ca39-8ea5-45f7-ae52-a080cee1181b",
        "body" : "OK.\n",
        "createdAt" : "2013-02-11T02:20:08Z",
        "updatedAt" : "2013-02-11T02:20:08Z",
        "lastEditedBy" : "e6b1ca39-8ea5-45f7-ae52-a080cee1181b",
        "tags" : [
        ]
      }
    ],
    "commit" : "2b76da387ef4c8a0317c80ce08e5bbab833b14e5",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +751,755 @@    if (needcopy) {\n        char *buffer = PyDataMem_NEW(N*elsize);\n        if (buffer == NULL) {\n            goto fail;\n        }"
  },
  {
    "id" : "2200907a-cac5-4366-b928-2d48fd666ed1",
    "prId" : 2974,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "aecee6ba-f27b-45df-8c06-86c7753d6995",
        "parentId" : null,
        "authorId" : "e6b1ca39-8ea5-45f7-ae52-a080cee1181b",
        "body" : "I wonder if this should be `NPY_END_THREADS_DESCR(PyArray_DESCR(op))` since the threads were started based on dtype. It could also be moved up to before the fail gotos if that would make the code more readable, not sure about that though.\n",
        "createdAt" : "2013-02-11T02:29:18Z",
        "updatedAt" : "2013-02-11T02:29:18Z",
        "lastEditedBy" : "e6b1ca39-8ea5-45f7-ae52-a080cee1181b",
        "tags" : [
        ]
      }
    ],
    "commit" : "2b76da387ef4c8a0317c80ce08e5bbab833b14e5",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +788,792 @@ fail:\n    /* Out of memory during sorting or buffer creation */\n    NPY_END_THREADS;\n    PyErr_NoMemory();\n    Py_DECREF(it);"
  },
  {
    "id" : "54d3f01f-c94b-418c-b6cc-9d1a1186721a",
    "prId" : 2974,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1dce1513-a7f0-4c92-b89a-e6c357bc63d2",
        "parentId" : null,
        "authorId" : "e6b1ca39-8ea5-45f7-ae52-a080cee1181b",
        "body" : "Maybe we should return the actual error from the sort call.\n",
        "createdAt" : "2013-02-11T02:29:47Z",
        "updatedAt" : "2013-02-11T02:29:47Z",
        "lastEditedBy" : "e6b1ca39-8ea5-45f7-ae52-a080cee1181b",
        "tags" : [
        ]
      },
      {
        "id" : "afab8e79-83e3-4897-93ca-5b139d0d3cce",
        "parentId" : "1dce1513-a7f0-4c92-b89a-e6c357bc63d2",
        "authorId" : "e6b1ca39-8ea5-45f7-ae52-a080cee1181b",
        "body" : "Nah, doesn't look worth the trouble.\n",
        "createdAt" : "2013-02-11T02:36:54Z",
        "updatedAt" : "2013-02-11T02:36:54Z",
        "lastEditedBy" : "e6b1ca39-8ea5-45f7-ae52-a080cee1181b",
        "tags" : [
        ]
      }
    ],
    "commit" : "2b76da387ef4c8a0317c80ce08e5bbab833b14e5",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +791,795 @@    PyErr_NoMemory();\n    Py_DECREF(it);\n    return -1;\n}\n"
  },
  {
    "id" : "58fea242-7c63-47b7-a7c4-2a731a2be57d",
    "prId" : 3002,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9b76ecb4-61fa-4a5a-8ce0-f75ff6ad09a7",
        "parentId" : null,
        "authorId" : "e6b1ca39-8ea5-45f7-ae52-a080cee1181b",
        "body" : "Are these object pointers that are being moved, or larger items?\n",
        "createdAt" : "2013-02-23T15:58:35Z",
        "updatedAt" : "2013-02-25T00:02:02Z",
        "lastEditedBy" : "e6b1ca39-8ea5-45f7-ae52-a080cee1181b",
        "tags" : [
        ]
      },
      {
        "id" : "0e9f83cb-fd02-482b-a977-96ecc012f22b",
        "parentId" : "9b76ecb4-61fa-4a5a-8ce0-f75ff6ad09a7",
        "authorId" : "b0342685-bd89-441f-a04f-0e75db24c07f",
        "body" : "Those could be larger items in structured types.\n",
        "createdAt" : "2013-02-23T16:07:53Z",
        "updatedAt" : "2013-02-25T00:02:02Z",
        "lastEditedBy" : "b0342685-bd89-441f-a04f-0e75db24c07f",
        "tags" : [
        ]
      }
    ],
    "commit" : "230ee3aa201552a8a9fa13c4b319f68cbd504d85",
    "line" : 45,
    "diffHunk" : "@@ -1,1 +140,144 @@                            PyArray_Item_INCREF(tmp_src, PyArray_DESCR(self));\n                            PyArray_Item_XDECREF(dest, PyArray_DESCR(self));\n                            memmove(dest, tmp_src, itemsize);\n                            dest += itemsize;\n                            tmp_src += itemsize;"
  }
]