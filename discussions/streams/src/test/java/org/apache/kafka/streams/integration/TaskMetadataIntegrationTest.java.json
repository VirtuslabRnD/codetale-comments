[
  {
    "id" : "c57ac3e2-29aa-43d4-b129-b6e97b7b730e",
    "prId" : 10634,
    "prUrl" : "https://github.com/apache/kafka/pull/10634#pullrequestreview-655970090",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4de9dd08-afa7-4603-b2f2-efd8ef5b37b9",
        "parentId" : null,
        "authorId" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "body" : "```suggestion\r\n        processed = new AtomicBoolean(true);\r\n```",
        "createdAt" : "2021-05-09T01:44:28Z",
        "updatedAt" : "2021-05-10T19:05:56Z",
        "lastEditedBy" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "tags" : [
        ]
      },
      {
        "id" : "d667caa8-741e-4b57-ac98-afdb45db53cc",
        "parentId" : "4de9dd08-afa7-4603-b2f2-efd8ef5b37b9",
        "authorId" : "e4e906b3-d01a-4fe6-ad3e-ccca19a6df5c",
        "body" : "process makes more sense to me, because the flag controls the processing as well",
        "createdAt" : "2021-05-10T18:40:14Z",
        "updatedAt" : "2021-05-10T19:05:56Z",
        "lastEditedBy" : "e4e906b3-d01a-4fe6-ad3e-ccca19a6df5c",
        "tags" : [
        ]
      }
    ],
    "commit" : "a6a3f984983dc4f81f14ec9878d2c932a36e82a4",
    "line" : 94,
    "diffHunk" : "@@ -1,1 +92,96 @@        builder  = new StreamsBuilder();\n\n        process = new AtomicBoolean(true);\n        commit = new AtomicBoolean(true);\n"
  },
  {
    "id" : "a5a1ed2b-3403-4dfb-b187-e651c885b3a7",
    "prId" : 10634,
    "prUrl" : "https://github.com/apache/kafka/pull/10634#pullrequestreview-659410573",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7ca159db-0c9d-44bd-a6c5-d84dab9f90d6",
        "parentId" : null,
        "authorId" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "body" : "Is this just to prevent it from processing anything until you're ready to proceed? It seems like you can/are doing that just by controlling when to produce input messages and doing so one at a time\r\n\r\n(if that's accurate, then WDYT about renaming `process` to `processed` and flipping the boolean so it more clearly serves the purpose of indicating whether a record has yet been processed)",
        "createdAt" : "2021-05-09T01:45:56Z",
        "updatedAt" : "2021-05-10T19:05:56Z",
        "lastEditedBy" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "tags" : [
        ]
      },
      {
        "id" : "d8526e25-354b-4de6-9efe-f84c697939a2",
        "parentId" : "7ca159db-0c9d-44bd-a6c5-d84dab9f90d6",
        "authorId" : "e4e906b3-d01a-4fe6-ad3e-ccca19a6df5c",
        "body" : "I am thinking of it a gate for one at a time processing. `process` makes more sense to me but I guess that its also works as an flag that the processing has happened so if you feel strongly about it I can switch it ",
        "createdAt" : "2021-05-10T18:42:34Z",
        "updatedAt" : "2021-05-10T19:05:56Z",
        "lastEditedBy" : "e4e906b3-d01a-4fe6-ad3e-ccca19a6df5c",
        "tags" : [
        ]
      },
      {
        "id" : "4a34de68-199a-4b76-b328-a19484ebc775",
        "parentId" : "7ca159db-0c9d-44bd-a6c5-d84dab9f90d6",
        "authorId" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "body" : "No worries. I was only recommending to change the name if you stopped using it to gate the processing and just relied on producing messages to control when they could be processed, if you did want to do that. Either way is fine with me so you can just leave it as is",
        "createdAt" : "2021-05-14T00:56:54Z",
        "updatedAt" : "2021-05-14T00:56:55Z",
        "lastEditedBy" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "tags" : [
        ]
      }
    ],
    "commit" : "a6a3f984983dc4f81f14ec9878d2c932a36e82a4",
    "line" : 186,
    "diffHunk" : "@@ -1,1 +184,188 @@        @Override\n        public void process(final String key, final String value) {\n            while (!process.get()) {\n                try {\n                    wait(100);"
  },
  {
    "id" : "d805f407-2bfb-4b5a-9490-22294535e729",
    "prId" : 10634,
    "prUrl" : "https://github.com/apache/kafka/pull/10634#pullrequestreview-659988796",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a8b92c78-5f77-41c7-9320-715a1e815ffc",
        "parentId" : null,
        "authorId" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "body" : "Just curious, is there a reason for producing the messages one at a time, rather than all together at the beginning and then relying on `process` to gate when they can be processed?",
        "createdAt" : "2021-05-14T00:59:09Z",
        "updatedAt" : "2021-05-14T00:59:10Z",
        "lastEditedBy" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "tags" : [
        ]
      },
      {
        "id" : "e5a9572a-b48a-4989-a10c-faa1435bc609",
        "parentId" : "a8b92c78-5f77-41c7-9320-715a1e815ffc",
        "authorId" : "e4e906b3-d01a-4fe6-ad3e-ccca19a6df5c",
        "body" : "not really, I wrote the process gate first before I wanted to have more than one at a time. I think it makes the consumer have to poll multiple times as it alternates between the pollPhase and processing but I am not sure if that actually improves the test.",
        "createdAt" : "2021-05-14T16:09:15Z",
        "updatedAt" : "2021-05-14T16:09:16Z",
        "lastEditedBy" : "e4e906b3-d01a-4fe6-ad3e-ccca19a6df5c",
        "tags" : [
        ]
      }
    ],
    "commit" : "a6a3f984983dc4f81f14ec9878d2c932a36e82a4",
    "line" : 126,
    "diffHunk" : "@@ -1,1 +124,128 @@            process.set(true);\n\n            produceMessages(0L, inputTopic, \"test1\");\n            TestUtils.waitForCondition(() -> !process.get(), \"The record was not processed\");\n            TestUtils.waitForCondition(() -> taskMetadata.committedOffsets().get(topicPartition) == 2L, \"the record was processed\");"
  }
]