[
  {
    "id" : "c237662a-5c41-4b18-a6e7-679d8f151d3b",
    "prId" : 8440,
    "prUrl" : "https://github.com/apache/kafka/pull/8440#pullrequestreview-389490018",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9b4787db-9001-4194-aa9c-000a06f31da9",
        "parentId" : null,
        "authorId" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "body" : "Just increasing the wait time as small side improvement to spin less and reduce the output for debugging.",
        "createdAt" : "2020-04-07T21:05:39Z",
        "updatedAt" : "2020-04-14T23:37:49Z",
        "lastEditedBy" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "tags" : [
        ]
      }
    ],
    "commit" : "15e0b98ef384c15022ee76e6ca88b325567e31cb",
    "line" : 252,
    "diffHunk" : "@@ -1,1 +304,308 @@        boolean allRecordsReceived = false;\n        while (!allRecordsReceived && System.currentTimeMillis() < maxWaitTime) {\n            final ConsumerRecords<byte[], byte[]> receivedRecords = consumer.poll(Duration.ofSeconds(1L));\n\n            for (final ConsumerRecord<byte[], byte[]> record : receivedRecords) {"
  },
  {
    "id" : "49ee0d3b-893b-4139-99cf-e8d3c443b5af",
    "prId" : 8440,
    "prUrl" : "https://github.com/apache/kafka/pull/8440#pullrequestreview-389493152",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "59a0d17f-0adc-4b76-b486-09bf1403ceb4",
        "parentId" : null,
        "authorId" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "body" : "`seekToEnd()` will only reach the end-marker in read-committed mode, if there is no pending transaction.",
        "createdAt" : "2020-04-07T21:10:46Z",
        "updatedAt" : "2020-04-14T23:37:49Z",
        "lastEditedBy" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "tags" : [
        ]
      }
    ],
    "commit" : "15e0b98ef384c15022ee76e6ca88b325567e31cb",
    "line" : 301,
    "diffHunk" : "@@ -1,1 +590,594 @@        final long maxWaitTime = System.currentTimeMillis() + MAX_IDLE_TIME_MS;\n        while (!topicEndOffsets.isEmpty() && System.currentTimeMillis() < maxWaitTime) {\n            consumer.seekToEnd(partitions);\n\n            final Iterator<TopicPartition> iterator = partitions.iterator();"
  },
  {
    "id" : "d179683f-1ec7-4e17-947c-dce814c7fde3",
    "prId" : 8440,
    "prUrl" : "https://github.com/apache/kafka/pull/8440#pullrequestreview-390419745",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5ff6a759-511a-4dd8-af94-d3c21e5c5fb6",
        "parentId" : null,
        "authorId" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "body" : "Does this verification reflect in the actual system test?",
        "createdAt" : "2020-04-08T17:23:55Z",
        "updatedAt" : "2020-04-14T23:37:49Z",
        "lastEditedBy" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "tags" : [
        ]
      },
      {
        "id" : "1fbe652c-e990-4e36-87d3-25eb558e393a",
        "parentId" : "5ff6a759-511a-4dd8-af94-d3c21e5c5fb6",
        "authorId" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "body" : "It's a sanity check that we did not loose or duplicate any write.\r\n",
        "createdAt" : "2020-04-09T00:34:09Z",
        "updatedAt" : "2020-04-14T23:37:49Z",
        "lastEditedBy" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "tags" : [
        ]
      }
    ],
    "commit" : "15e0b98ef384c15022ee76e6ca88b325567e31cb",
    "line" : 126,
    "diffHunk" : "@@ -1,1 +137,141 @@\n            // verify offsets\n            for (final Map.Entry<Integer, List<Long>> offsetsOfPartition : offsets.entrySet()) {\n                offsetsOfPartition.getValue().sort(Long::compareTo);\n                for (int i = 0; i < offsetsOfPartition.getValue().size() - 1; ++i) {"
  },
  {
    "id" : "938d0e52-d9cc-4d34-8cdb-9db6a2743e1b",
    "prId" : 8440,
    "prUrl" : "https://github.com/apache/kafka/pull/8440#pullrequestreview-390421278",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3332c688-c11f-49f1-9f6d-e223c2d2dc27",
        "parentId" : null,
        "authorId" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "body" : "What does this `sleep` do?",
        "createdAt" : "2020-04-08T17:30:42Z",
        "updatedAt" : "2020-04-14T23:37:49Z",
        "lastEditedBy" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "tags" : [
        ]
      },
      {
        "id" : "b8b37ea7-3d42-434a-b0d4-791445f27e03",
        "parentId" : "3332c688-c11f-49f1-9f6d-e223c2d2dc27",
        "authorId" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "body" : "We don't want to \"busy loop\" calling `consumer.position()` -- the tx-timeout is 10 seconds and thus if we update `position()` (that is a broker round trip) once a seconds it seems sufficient.",
        "createdAt" : "2020-04-09T00:39:31Z",
        "updatedAt" : "2020-04-14T23:37:49Z",
        "lastEditedBy" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "tags" : [
        ]
      }
    ],
    "commit" : "15e0b98ef384c15022ee76e6ca88b325567e31cb",
    "line" : 347,
    "diffHunk" : "@@ -1,1 +607,611 @@                }\n            }\n            sleep(1000L);\n        }\n"
  }
]