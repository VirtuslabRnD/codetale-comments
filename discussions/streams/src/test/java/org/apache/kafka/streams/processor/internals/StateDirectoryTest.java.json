[
  {
    "id" : "47a7921b-7511-4c3e-9af3-054db12297a7",
    "prId" : 5961,
    "prUrl" : "https://github.com/apache/kafka/pull/5961#pullrequestreview-179440997",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5cd35693-9502-4cf5-bd63-9ca38a4588d4",
        "parentId" : null,
        "authorId" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "body" : "This is the actual fix.",
        "createdAt" : "2018-11-28T18:08:46Z",
        "updatedAt" : "2018-11-30T01:41:29Z",
        "lastEditedBy" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "tags" : [
        ]
      }
    ],
    "commit" : "11ec667f9c8f90aedff48e8a821342e35968ab82",
    "line" : 21,
    "diffHunk" : "@@ -1,1 +57,61 @@        stateDir = new File(TestUtils.IO_TMP_DIR, \"kafka-\" + TestUtils.randomString(5));\n        if (!createStateDirectory) {\n            cleanup();\n        }\n        directory = new StateDirectory("
  },
  {
    "id" : "a6f44fdf-b5a4-49ac-bd70-7ee0ad489042",
    "prId" : 8305,
    "prUrl" : "https://github.com/apache/kafka/pull/8305#pullrequestreview-375650657",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0c693061-a805-495d-b0e8-fb6ac09a8e9e",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "Good call.",
        "createdAt" : "2020-03-16T23:36:01Z",
        "updatedAt" : "2020-03-17T01:17:03Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      }
    ],
    "commit" : "54afbb624f1bd6d8dc30ce2868b8cd19c59174be",
    "line" : 73,
    "diffHunk" : "@@ -1,1 +332,336 @@        assertEquals(mkSet(taskDir1, taskDir2), Arrays.stream(\n            directory.listAllTaskDirectories()).collect(Collectors.toSet()));\n        assertEquals(Collections.emptySet(), Arrays.stream(\n            directory.listNonEmptyTaskDirectories()).collect(Collectors.toSet()));\n    }"
  },
  {
    "id" : "dc789360-bee3-43e1-b632-845cb0788203",
    "prId" : 9010,
    "prUrl" : "https://github.com/apache/kafka/pull/9010#pullrequestreview-446761802",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6a2b4782-12da-463f-9d02-b1440588f398",
        "parentId" : null,
        "authorId" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "body" : "Without the fix, this test fails like 100% of the time for me. (Kinda surprising -- seems that the disk IO operations give us nice thread context switches so we hit the issue reliably.)",
        "createdAt" : "2020-07-11T00:32:43Z",
        "updatedAt" : "2020-07-11T00:56:58Z",
        "lastEditedBy" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "tags" : [
        ]
      },
      {
        "id" : "cea3de59-5089-4355-b779-c37124812f6b",
        "parentId" : "6a2b4782-12da-463f-9d02-b1440588f398",
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "Huh, neat!",
        "createdAt" : "2020-07-11T00:42:17Z",
        "updatedAt" : "2020-07-11T00:56:58Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      },
      {
        "id" : "d4e0bb58-ea48-4fc9-ac59-ab4da843546a",
        "parentId" : "6a2b4782-12da-463f-9d02-b1440588f398",
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "In retrospect, this makes sense. The fs operations probably take an order of magnitude (at least) more time than the difference in time between starting the two threads. Thanks for adding it!",
        "createdAt" : "2020-07-11T00:46:06Z",
        "updatedAt" : "2020-07-11T00:56:58Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      }
    ],
    "commit" : "386fa7aba2636454ed6eaf798a5413ea49d77459",
    "line" : 30,
    "diffHunk" : "@@ -1,1 +513,517 @@\n    @Test\n    public void shouldNotFailWhenCreatingTaskDirectoryInParallel() throws Exception {\n        final TaskId taskId = new TaskId(0, 0);\n        final AtomicBoolean passed = new AtomicBoolean(true);"
  },
  {
    "id" : "c47de3ed-19f1-46f9-8948-06cc02662d54",
    "prId" : 10608,
    "prUrl" : "https://github.com/apache/kafka/pull/10608#pullrequestreview-647800376",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7c20418c-a32a-47c0-94e0-dca32e9a8736",
        "parentId" : null,
        "authorId" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "body" : "This test was originally added when we [fixed a bug ](https://github.com/apache/kafka/pull/9373/files#diff-beec0c6a88443677858de59258cf144238b4cbb352fe02a7375c0bbba929696aR311)where Streams was continuously attempting to clean \"empty\" task directories and logging the `\"Deleting obsolete state directory...\"` message. The root cause of this was that we couldn't delete the task directory itself due to the lock file, so we just left empty directories behind. This PR fixes that, so I adapted the PR to test this new functionality since the old test wouldn't really make sense any more",
        "createdAt" : "2021-04-29T04:02:36Z",
        "updatedAt" : "2021-04-29T04:17:30Z",
        "lastEditedBy" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "tags" : [
        ]
      }
    ],
    "commit" : "c5a8616eafb01b39743f98f01ec4816dfd7c5eb5",
    "line" : 30,
    "diffHunk" : "@@ -1,1 +315,319 @@\n    @Test\n    public void shouldCleanupObsoleteTaskDirectoriesAndDeleteTheDirectoryItself() {\n        final File dir = directory.getOrCreateDirectoryForTask(new TaskId(2, 0));\n        assertTrue(new File(dir, \"store\").mkdir());"
  },
  {
    "id" : "62efc591-146d-4a94-afd8-badafa509023",
    "prId" : 10609,
    "prUrl" : "https://github.com/apache/kafka/pull/10609#pullrequestreview-659195798",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d4c9bdf1-fe3a-4141-ae28-f629021be73c",
        "parentId" : null,
        "authorId" : "e4e906b3-d01a-4fe6-ad3e-ccca19a6df5c",
        "body" : "I think I saw a comment about updating these with named topologies later. Is there are reason you are waiting?",
        "createdAt" : "2021-05-13T17:20:57Z",
        "updatedAt" : "2021-05-13T17:25:10Z",
        "lastEditedBy" : "e4e906b3-d01a-4fe6-ad3e-ccca19a6df5c",
        "tags" : [
        ]
      },
      {
        "id" : "468ec7a1-4c69-4100-8de1-e46db80c0832",
        "parentId" : "d4c9bdf1-fe3a-4141-ae28-f629021be73c",
        "authorId" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "body" : "That comment was more about usages in integration/other unit tests, where we may want to tie in some NamedTopologyies once the basic feature is fully implemented. For the StateDirectoryTest everything should already be implemented so we should have the NamedTopology logic in that class covered by tests in this PR (actually I need to add a few more, I think)",
        "createdAt" : "2021-05-13T18:45:14Z",
        "updatedAt" : "2021-05-13T18:45:21Z",
        "lastEditedBy" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "tags" : [
        ]
      }
    ],
    "commit" : "7175e27c77ffbf92bf1d9cda14c019ba6dd14f0f",
    "line" : 207,
    "diffHunk" : "@@ -1,1 +376,380 @@    public void shouldOnlyListNonEmptyTaskDirectories() throws IOException {\n        TestUtils.tempDirectory(stateDir.toPath(), \"foo\");\n        final TaskDirectory taskDir1 = new TaskDirectory(directory.getOrCreateDirectoryForTask(new TaskId(0, 0)), null);\n        final TaskDirectory taskDir2 = new TaskDirectory(directory.getOrCreateDirectoryForTask(new TaskId(0, 1)), null);\n"
  },
  {
    "id" : "d97b99f6-1222-4dc6-a0f3-ef77891ebe73",
    "prId" : 10609,
    "prUrl" : "https://github.com/apache/kafka/pull/10609#pullrequestreview-677943563",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cbac4316-7d3a-4bca-96e0-143ea30abb2b",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "Could we add a test case to verify that in case both named topology dir and non-named topology dir co-exist, we would at certain step check against and throw?",
        "createdAt" : "2021-06-02T21:54:24Z",
        "updatedAt" : "2021-06-02T21:54:24Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      },
      {
        "id" : "00415e6b-1cdf-433a-8db8-05c1e13c8c04",
        "parentId" : "cbac4316-7d3a-4bca-96e0-143ea30abb2b",
        "authorId" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "body" : "Ack, will add this test in the next PR",
        "createdAt" : "2021-06-07T22:39:05Z",
        "updatedAt" : "2021-06-07T22:39:05Z",
        "lastEditedBy" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "tags" : [
        ]
      }
    ],
    "commit" : "7175e27c77ffbf92bf1d9cda14c019ba6dd14f0f",
    "line" : 368,
    "diffHunk" : "@@ -1,1 +654,658 @@\n    @Test\n    public void shouldCleanupObsoleteTaskDirectoriesInNamedTopologiesAndDeleteTheParentDirectories() throws IOException {\n        initializeStateDirectory(true, true);\n"
  }
]