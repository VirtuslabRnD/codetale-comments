[
  {
    "id" : "d7d47d16-a6ce-4d2d-b298-f536a68762b0",
    "prId" : 4758,
    "prUrl" : "https://github.com/apache/kafka/pull/4758#pullrequestreview-107117431",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "636c152b-3c9c-413e-acc0-749d4825c95f",
        "parentId" : null,
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "can these be `data.process(SmokeTestUtil.<>printProcessorSupplier(\"data\"))` ?",
        "createdAt" : "2018-03-26T23:57:02Z",
        "updatedAt" : "2018-03-27T00:18:55Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      },
      {
        "id" : "253fd142-7ed5-4e6e-9ad1-15078e1a2108",
        "parentId" : "636c152b-3c9c-413e-acc0-749d4825c95f",
        "authorId" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "body" : "Just double checked. `data.process(SmokeTestUtil.printProcessorSupplier(\"data\"))` compiles",
        "createdAt" : "2018-03-27T00:24:20Z",
        "updatedAt" : "2018-03-27T00:56:03Z",
        "lastEditedBy" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "tags" : [
        ]
      }
    ],
    "commit" : "1cb064a5d0891c989ee8a725d115d21dbe82aed1",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +116,120 @@        });\n\n        data.process(SmokeTestUtil.<String, Integer>printProcessorSupplier(\"data\"));\n\n        // min"
  },
  {
    "id" : "2f6443eb-b739-4b1f-b9a8-e5745f6d156a",
    "prId" : 6231,
    "prUrl" : "https://github.com/apache/kafka/pull/6231#pullrequestreview-199866278",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8c072bbe-a451-458d-9e0f-0db8c70b906e",
        "parentId" : null,
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "adds a name to the streams instance to help correlate logs and stdout events",
        "createdAt" : "2019-02-04T23:58:37Z",
        "updatedAt" : "2019-02-14T18:07:59Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      }
    ],
    "commit" : "c5633477428c1b393d469431d92e5b3c61a2d03c",
    "line" : 37,
    "diffHunk" : "@@ -1,1 +42,46 @@public class SmokeTestClient extends SmokeTestUtil {\n\n    private final String name;\n\n    private Thread thread;"
  },
  {
    "id" : "6bb4d257-02f8-4a6b-b25a-504fbb0034a2",
    "prId" : 6231,
    "prUrl" : "https://github.com/apache/kafka/pull/6231#pullrequestreview-200274162",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "045ea33c-d41f-4100-b3a4-a0b54524333e",
        "parentId" : null,
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "add new outputs with the name, but avoid touching existing lines that are used in the system tests.",
        "createdAt" : "2019-02-04T23:59:11Z",
        "updatedAt" : "2019-02-14T18:07:59Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      },
      {
        "id" : "2358bc4f-5705-452d-9dda-287c02dfffe2",
        "parentId" : "045ea33c-d41f-4100-b3a4-a0b54524333e",
        "authorId" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "body" : "To what extend are existing lines used? How difficult would it be to update the testa to avoid duplicate output? For example, if we only `grep` for the pattern, adding a prefix name should not require any updates to system test code.",
        "createdAt" : "2019-02-05T00:26:41Z",
        "updatedAt" : "2019-02-14T18:07:59Z",
        "lastEditedBy" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "tags" : [
        ]
      },
      {
        "id" : "15e877a8-28b6-4ba6-8935-ed6b72cfe588",
        "parentId" : "045ea33c-d41f-4100-b3a4-a0b54524333e",
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "Yeah, I've been thinking about this... I agree I should either confirm your suspicion or just ditch the new lines.",
        "createdAt" : "2019-02-05T05:29:00Z",
        "updatedAt" : "2019-02-14T18:07:59Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      },
      {
        "id" : "4dd86ca3-cb9e-4963-9711-43cf6d6aca88",
        "parentId" : "045ea33c-d41f-4100-b3a4-a0b54524333e",
        "authorId" : "4c968502-bb3d-46ee-8719-0c0bdbc6242f",
        "body" : "I agree I think that by adding a prefix with space should be fine for the test.",
        "createdAt" : "2019-02-05T16:31:21Z",
        "updatedAt" : "2019-02-14T18:07:59Z",
        "lastEditedBy" : "4c968502-bb3d-46ee-8719-0c0bdbc6242f",
        "tags" : [
        ]
      },
      {
        "id" : "2e010336-9a4f-404c-b3c8-3d4482d0d234",
        "parentId" : "045ea33c-d41f-4100-b3a4-a0b54524333e",
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : ":+1: I've removed the unprefixed lines, and am running the system tests to see.",
        "createdAt" : "2019-02-05T19:57:28Z",
        "updatedAt" : "2019-02-14T18:07:59Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      }
    ],
    "commit" : "c5633477428c1b393d469431d92e5b3c61a2d03c",
    "line" : 66,
    "diffHunk" : "@@ -1,1 +61,65 @@        streams = createKafkaStreams(streamsProperties);\n        streams.setUncaughtExceptionHandler((t, e) -> {\n            System.out.println(name + \": SMOKE-TEST-CLIENT-EXCEPTION\");\n            uncaughtException = true;\n            e.printStackTrace();"
  },
  {
    "id" : "eff69c98-efa9-4f3d-b92f-55050ba17180",
    "prId" : 6382,
    "prUrl" : "https://github.com/apache/kafka/pull/6382#pullrequestreview-211547757",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2d9234c2-f714-4b86-b13b-11da041a711d",
        "parentId" : null,
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "I added this while debugging the smoke test. Printing the time allows us to correlate events across test nodes and with the test logs.",
        "createdAt" : "2019-03-06T16:50:30Z",
        "updatedAt" : "2019-03-08T19:03:13Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      },
      {
        "id" : "706acd68-b945-4720-805f-e823b9366d5b",
        "parentId" : "2d9234c2-f714-4b86-b13b-11da041a711d",
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "Nice find!",
        "createdAt" : "2019-03-07T00:30:07Z",
        "updatedAt" : "2019-03-08T19:03:13Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      }
    ],
    "commit" : "7420fd04c43eb0f9ac183756a964f27ab8d1d218",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +117,121 @@        final KafkaStreams streamsClient = new KafkaStreams(build, getStreamsConfig(props));\n        streamsClient.setStateListener((newState, oldState) -> {\n            System.out.printf(\"%s %s: %s -> %s%n\", name, Instant.now(), oldState, newState);\n            if (oldState == KafkaStreams.State.REBALANCING && newState == KafkaStreams.State.RUNNING) {\n                started = true;"
  },
  {
    "id" : "70848390-8fdf-473f-82b1-48e4f400655f",
    "prId" : 6382,
    "prUrl" : "https://github.com/apache/kafka/pull/6382#pullrequestreview-211347664",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "dbb68aa7-58e9-45ea-8a7a-2161e3a0d4f7",
        "parentId" : null,
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "Added a \"small window sum\" stream to the topology, which does a \"normal\" windowed computation. The exact data production timing is non-deterministic, so we can't verify the results, but we can verify that there is exactly one result per windowed key in the suppressed stream",
        "createdAt" : "2019-03-06T16:53:04Z",
        "updatedAt" : "2019-03-08T19:03:13Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      }
    ],
    "commit" : "7420fd04c43eb0f9ac183756a964f27ab8d1d218",
    "line" : 60,
    "diffHunk" : "@@ -1,1 +168,172 @@        streamify(smallWindowSum, \"sws-raw\");\n        streamify(smallWindowSum.suppress(untilWindowCloses(BufferConfig.unbounded())), \"sws-suppressed\");\n\n        final KTable<String, Integer> minTable = builder.table(\n            \"min\","
  },
  {
    "id" : "72b4bff2-c890-4a74-957a-7a2067682b5c",
    "prId" : 8938,
    "prUrl" : "https://github.com/apache/kafka/pull/8938#pullrequestreview-441137634",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3193835f-598a-4c0e-8742-381b5f7842a1",
        "parentId" : null,
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "I inlined these utilities to make this class \"portable\". I.e., we can copy and paste it into the \"upgrade test\" modules without also dragging in a dependency on the client utils.",
        "createdAt" : "2020-06-27T18:11:15Z",
        "updatedAt" : "2020-07-01T19:49:48Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      },
      {
        "id" : "9767a79a-757a-44d8-a99c-3ed7b62c21af",
        "parentId" : "3193835f-598a-4c0e-8742-381b5f7842a1",
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "Sounds good.",
        "createdAt" : "2020-07-01T19:23:19Z",
        "updatedAt" : "2020-07-01T19:49:48Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      }
    ],
    "commit" : "0163c8023d3b9fc61df35c0428269ca2752e9e6f",
    "line" : 45,
    "diffHunk" : "@@ -1,1 +58,62 @@    private volatile boolean closed;\n\n    private static void addShutdownHook(final String name, final Runnable runnable) {\n        if (name != null) {\n            Runtime.getRuntime().addShutdownHook(KafkaThread.nonDaemon(name, runnable));"
  },
  {
    "id" : "f4a53f93-6cd3-47c6-96fd-496c1bcee861",
    "prId" : 8938,
    "prUrl" : "https://github.com/apache/kafka/pull/8938#pullrequestreview-438715011",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5f2835fd-f6e7-42aa-bc54-f929384f03d8",
        "parentId" : null,
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "This is logic from the inlined function that had gotten lost when we set the handler again.",
        "createdAt" : "2020-06-27T18:13:54Z",
        "updatedAt" : "2020-07-01T19:49:48Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      }
    ],
    "commit" : "0163c8023d3b9fc61df35c0428269ca2752e9e6f",
    "line" : 108,
    "diffHunk" : "@@ -1,1 +117,121 @@            e.printStackTrace(System.out);\n            uncaughtException = true;\n            streams.close(Duration.ofSeconds(30));\n        });\n"
  },
  {
    "id" : "76ffb130-b71a-4e23-a3de-db529cdc0530",
    "prId" : 8938,
    "prUrl" : "https://github.com/apache/kafka/pull/8938#pullrequestreview-438715011",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c1192cdc-9938-4631-8fad-5c0dc36f0941",
        "parentId" : null,
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "Blocking and then printing this gives the system tests the ability to explicitly wait until the instances are joined.",
        "createdAt" : "2020-06-27T18:14:43Z",
        "updatedAt" : "2020-07-01T19:49:48Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      }
    ],
    "commit" : "0163c8023d3b9fc61df35c0428269ca2752e9e6f",
    "line" : 125,
    "diffHunk" : "@@ -1,1 +131,135 @@            e.printStackTrace(System.out);\n        }\n        System.out.println(name + \": SMOKE-TEST-CLIENT-STARTED\");\n        System.out.println(name + \" started at \" + Instant.now());\n    }"
  },
  {
    "id" : "b11c02fb-f470-4c0a-9677-90acdd9822ab",
    "prId" : 8938,
    "prUrl" : "https://github.com/apache/kafka/pull/8938#pullrequestreview-438715011",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "59d9c17b-e175-4e51-828c-8a615f458878",
        "parentId" : null,
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "I just happened to notice that we weren't previously checking that Streams actually finished closing. It looks like we were expecting some kind of exception to get thrown during the `join()` below, but that's not the way it works.",
        "createdAt" : "2020-06-27T18:15:57Z",
        "updatedAt" : "2020-07-01T19:49:48Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      }
    ],
    "commit" : "0163c8023d3b9fc61df35c0428269ca2752e9e6f",
    "line" : 139,
    "diffHunk" : "@@ -1,1 +142,146 @@        final boolean wasClosed = streams.close(Duration.ofMinutes(1));\n\n        if (wasClosed && !uncaughtException) {\n            System.out.println(name + \": SMOKE-TEST-CLIENT-CLOSED\");\n        } else if (wasClosed) {"
  },
  {
    "id" : "41d534f6-cc3c-41d7-a4ae-bcf3ac0aa3c7",
    "prId" : 8938,
    "prUrl" : "https://github.com/apache/kafka/pull/8938#pullrequestreview-441137634",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c44701a3-fb01-4a9e-9c63-ebb70a7ab0f3",
        "parentId" : null,
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "5 seconds seems a bit stingy :) . Note that we were previously ignoring the case where we didn't close within the timeout, so we have no idea if 5 seconds was ever long enough. I figured a minute is more reasonable.",
        "createdAt" : "2020-06-27T18:17:50Z",
        "updatedAt" : "2020-07-01T19:49:48Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      },
      {
        "id" : "528f167b-f381-40ef-aa6b-c6a0cac5e2d4",
        "parentId" : "c44701a3-fb01-4a9e-9c63-ebb70a7ab0f3",
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "+1",
        "createdAt" : "2020-07-01T19:28:07Z",
        "updatedAt" : "2020-07-01T19:49:48Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      }
    ],
    "commit" : "0163c8023d3b9fc61df35c0428269ca2752e9e6f",
    "line" : 137,
    "diffHunk" : "@@ -1,1 +140,144 @@\n    public void close() {\n        final boolean wasClosed = streams.close(Duration.ofMinutes(1));\n\n        if (wasClosed && !uncaughtException) {"
  },
  {
    "id" : "454f775e-1975-44e8-a7e6-41036a95728f",
    "prId" : 8938,
    "prUrl" : "https://github.com/apache/kafka/pull/8938#pullrequestreview-441137634",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cf17b6b6-35c2-4667-b30c-705d08c574ae",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "Do we still need a shutdown hook to delete with `file.deleteOnExit();`? I think the latter can still be triggered even with abnormal exits.",
        "createdAt" : "2020-07-01T19:25:31Z",
        "updatedAt" : "2020-07-01T19:49:48Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      }
    ],
    "commit" : "0163c8023d3b9fc61df35c0428269ca2752e9e6f",
    "line" : 63,
    "diffHunk" : "@@ -1,1 +74,78 @@            throw new RuntimeException(\"Failed to create a temp dir\", ex);\n        }\n        file.deleteOnExit();\n\n        addShutdownHook(\"delete-temp-file-shutdown-hook\", () -> {"
  }
]