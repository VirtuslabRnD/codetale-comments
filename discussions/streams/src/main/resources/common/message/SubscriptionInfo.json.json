[
  {
    "id" : "6faac5c0-2ee6-487b-b36a-0db6d0c23b0b",
    "prId" : 7248,
    "prUrl" : "https://github.com/apache/kafka/pull/7248#pullrequestreview-309370602",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "53900ceb-5d7c-47a5-9477-70f7ee6db030",
        "parentId" : null,
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "Ok, here's where we're defining the schema now. We should agree on how we want to set the version bounds on the different fields.",
        "createdAt" : "2019-08-23T23:47:26Z",
        "updatedAt" : "2019-10-29T21:04:35Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      },
      {
        "id" : "e1c130f7-0d82-4bbc-968e-5485430698ba",
        "parentId" : "53900ceb-5d7c-47a5-9477-70f7ee6db030",
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "What I settled on is that the `validVersions` would be a range encompassing all the supported protocol versions. The individual fields would use an open range when they're added (like `3+`), and then use a closed range when they are removed. For example, in KIP-441, we're going to set `validVersions: 1-6` and then set (for example) `prevTasks: 1-5`, while adding new fields `6+`.\r\n\r\nThis scheme would give us the smallest diff when we do have to bump the protocol version without changing any fields (which happens with some regularity). It also makes the most intuitive sense, IMHO, to use open ranges for the fields when you add them, because you would just assume they'll remain part of the protocol indefinitely.",
        "createdAt" : "2019-10-24T14:42:48Z",
        "updatedAt" : "2019-10-29T21:04:35Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      },
      {
        "id" : "05f8691b-9548-4c6c-999e-8e333d7dc99d",
        "parentId" : "53900ceb-5d7c-47a5-9477-70f7ee6db030",
        "authorId" : "4c968502-bb3d-46ee-8719-0c0bdbc6242f",
        "body" : "makes sense to me",
        "createdAt" : "2019-10-24T15:56:08Z",
        "updatedAt" : "2019-10-29T21:04:35Z",
        "lastEditedBy" : "4c968502-bb3d-46ee-8719-0c0bdbc6242f",
        "tags" : [
        ]
      },
      {
        "id" : "22576346-7acc-4389-b81b-2b1e3c829b34",
        "parentId" : "53900ceb-5d7c-47a5-9477-70f7ee6db030",
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "I'd suggest we double check on the semantics of `default values` as we have been bitten while working on KIP-345 before. @abbccdda could you chime in here and double check on the default value / / versions fields and see if they make sense?",
        "createdAt" : "2019-10-29T02:29:21Z",
        "updatedAt" : "2019-10-29T21:04:35Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      },
      {
        "id" : "14340f68-a90f-4ae5-bad5-3c0a17c03f97",
        "parentId" : "53900ceb-5d7c-47a5-9477-70f7ee6db030",
        "authorId" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "body" : "Could we add comments for the different 5 versions?",
        "createdAt" : "2019-10-30T17:02:19Z",
        "updatedAt" : "2019-10-30T17:02:23Z",
        "lastEditedBy" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "tags" : [
        ]
      }
    ],
    "commit" : "e4d6ae101dee1bb04c4a267771e3f9ac6ec347eb",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +15,19 @@\n{\n  \"name\": \"SubscriptionInfo\",\n  \"validVersions\": \"1-5\",\n  \"fields\": ["
  },
  {
    "id" : "1f52d58a-15a3-4a0b-a0f6-d1fbc38fadfc",
    "prId" : 7248,
    "prUrl" : "https://github.com/apache/kafka/pull/7248#pullrequestreview-310113760",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0977aa34-23ac-40e1-b8b0-03ee539010b4",
        "parentId" : null,
        "authorId" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "body" : "Why do we need a separate version field?",
        "createdAt" : "2019-10-31T17:33:10Z",
        "updatedAt" : "2019-10-31T17:36:35Z",
        "lastEditedBy" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "tags" : [
        ]
      },
      {
        "id" : "ca19482d-f90d-4fbb-ad5f-bbeac98cf4d2",
        "parentId" : "0977aa34-23ac-40e1-b8b0-03ee539010b4",
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "AFAICT, we need it for two reasons:\r\n1. compatibility with the hand-coded serialized format, which would have to inter-operate with the generated schemas during a rolling bounce\r\n2. When we use the generated schemas, we have to know a priori what version we're using. If we don't serialize it in the message itself, how can we know?\r\n\r\nNote that if problem 1 is the only concern, then we can deprecate this field starting at version 6 and save ourselves 32 bits. So problem 2 is the important question to answer. I couldn't figure out a way around this... Can you?",
        "createdAt" : "2019-10-31T18:57:34Z",
        "updatedAt" : "2019-10-31T18:57:35Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      }
    ],
    "commit" : "e4d6ae101dee1bb04c4a267771e3f9ac6ec347eb",
    "line" : 21,
    "diffHunk" : "@@ -1,1 +19,23 @@  \"fields\": [\n    {\n      \"name\": \"version\",\n      \"versions\": \"1+\",\n      \"type\": \"int32\""
  },
  {
    "id" : "abb4a748-1753-4ee5-8a23-09cb3e7a2a09",
    "prId" : 7248,
    "prUrl" : "https://github.com/apache/kafka/pull/7248#pullrequestreview-310114710",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9658408c-5ccc-47e6-8aad-a0328e9afb2f",
        "parentId" : null,
        "authorId" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "body" : "Should we also define a default value here?",
        "createdAt" : "2019-10-31T17:34:54Z",
        "updatedAt" : "2019-10-31T17:36:35Z",
        "lastEditedBy" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "tags" : [
        ]
      },
      {
        "id" : "96506951-b532-4062-b48c-9500be4d1429",
        "parentId" : "9658408c-5ccc-47e6-8aad-a0328e9afb2f",
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "We don't need to. The UUID type is non-nullable (at the request of Colin when I added UUID support), so any time it's missing, a default value is filled in. The default is a \"zero uuid\" aka a uuid consisting only of zeros.",
        "createdAt" : "2019-10-31T18:59:07Z",
        "updatedAt" : "2019-10-31T18:59:07Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      }
    ],
    "commit" : "e4d6ae101dee1bb04c4a267771e3f9ac6ec347eb",
    "line" : 32,
    "diffHunk" : "@@ -1,1 +30,34 @@    },\n    {\n      \"name\": \"processId\",\n      \"versions\": \"1+\",\n      \"type\": \"uuid\""
  }
]