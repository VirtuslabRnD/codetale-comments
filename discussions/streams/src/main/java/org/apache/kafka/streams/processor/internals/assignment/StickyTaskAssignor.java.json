[
  {
    "id" : "62966a1b-bf63-404f-94f0-1fc4d0962e33",
    "prId" : 4410,
    "prUrl" : "https://github.com/apache/kafka/pull/4410#pullrequestreview-92411595",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "da4f3ea7-d98a-4ecb-8ac0-d070adc4f1a3",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "This is a meta comment about having new pair: note that `hasNewPair` would only be useful when assigning standby tasks (note that we always assign active tasks to everyone first, and only start assigning standby tasks after that), so we could refactor the code to only call this function for `assignStandby(..)`\r\n\r\nAnd then then in the third phase, `allocateTaskWithClientCandidates`, we should consider `task1.topicGroupId != taskId.topicGroupId` along with `leastLoad`.",
        "createdAt" : "2018-01-12T02:40:53Z",
        "updatedAt" : "2018-01-30T21:17:39Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      },
      {
        "id" : "b39d3684-9910-47ae-8d09-9491625b1210",
        "parentId" : "da4f3ea7-d98a-4ecb-8ac0-d070adc4f1a3",
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "Another comment in for the second phase:\r\n\r\n```\r\n// try and assign any remaining unassigned tasks to clients that previously\r\n// have seen the task.\r\n```\r\n\r\nNote that one task could be in previous standby task of multiple clients (that's why we have `Set<ID>` in the value), we should not always pick the first `client.hasUnfulfilledQuota(tasksPerThread)` and stuff to it, while we should also consider `task1.topicGroupId != taskId.topicGroupId` with its existing active tasks.",
        "createdAt" : "2018-01-12T02:43:55Z",
        "updatedAt" : "2018-01-30T21:17:39Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      },
      {
        "id" : "8bb98b60-48bd-492a-9b17-ffa523658a73",
        "parentId" : "da4f3ea7-d98a-4ecb-8ac0-d070adc4f1a3",
        "authorId" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "body" : "I am not sure if those comments are addressed already. \\cc @bbejeck ?",
        "createdAt" : "2018-01-30T01:29:34Z",
        "updatedAt" : "2018-01-30T21:17:39Z",
        "lastEditedBy" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "tags" : [
        ]
      }
    ],
    "commit" : "6ca46d643897cc70a5fd92fa4d92b485e85f59bf",
    "line" : 77,
    "diffHunk" : "@@ -1,1 +259,263 @@        }\n\n        boolean hasNewPair(final TaskId task1,\n                           final Set<TaskId> taskIds,\n                           final boolean active) {"
  },
  {
    "id" : "35562d46-4d1d-4f13-a42b-b2c9021492ab",
    "prId" : 7386,
    "prUrl" : "https://github.com/apache/kafka/pull/7386#pullrequestreview-297864337",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "385c38d5-5ce7-48c0-a042-309faa802906",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "Nice.",
        "createdAt" : "2019-10-06T23:06:43Z",
        "updatedAt" : "2019-10-06T23:53:51Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      }
    ],
    "commit" : "f047cd9bea88a4ffc88ce2b4f82946d52202c539",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +234,238 @@\n            for (final TaskId prevAssignedTask : clientState.getValue().prevStandbyTasks()) {\n                previousStandbyTaskAssignment.computeIfAbsent(prevAssignedTask, t -> new HashSet<>());\n                previousStandbyTaskAssignment.get(prevAssignedTask).add(clientState.getKey());\n            }"
  },
  {
    "id" : "753ba2da-0004-4e7c-923a-123f5931236e",
    "prId" : 8147,
    "prUrl" : "https://github.com/apache/kafka/pull/8147#pullrequestreview-362356784",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c1a2fe1a-0066-4195-a4cf-b62e80bcf8b7",
        "parentId" : null,
        "authorId" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "body" : "This is the main change; only loop over the stateful and changelog-enabled tasks when assigning standbys",
        "createdAt" : "2020-02-21T01:55:11Z",
        "updatedAt" : "2020-02-25T02:23:52Z",
        "lastEditedBy" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "tags" : [
        ]
      }
    ],
    "commit" : "fb7b0c53376fe520b42912b01d64272eb7003a5a",
    "line" : 31,
    "diffHunk" : "@@ -1,1 +61,65 @@\n    private void assignStandby(final int numStandbyReplicas) {\n        for (final TaskId taskId : standbyTaskIds) {\n            for (int i = 0; i < numStandbyReplicas; i++) {\n                final Set<ID> ids = findClientsWithoutAssignedTask(taskId);"
  }
]