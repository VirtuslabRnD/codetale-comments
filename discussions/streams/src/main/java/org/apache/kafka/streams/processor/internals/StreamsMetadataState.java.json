[
  {
    "id" : "7e4c7035-d80e-45b1-a6ac-8481a09024b4",
    "prId" : 8233,
    "prUrl" : "https://github.com/apache/kafka/pull/8233#pullrequestreview-369988829",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "04e25e1d-34bb-4333-8f0d-50b781efe892",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "Why move the reset into the condition? if the passed in values are empty we should still set it to empty because the previous map may be out-dated right?",
        "createdAt" : "2020-03-05T22:45:42Z",
        "updatedAt" : "2020-03-05T22:49:34Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      },
      {
        "id" : "4c210b56-7e32-4bcf-9053-9698bda0064b",
        "parentId" : "04e25e1d-34bb-4333-8f0d-50b781efe892",
        "authorId" : "e431deb4-a19e-4e78-a775-12af049c9089",
        "body" : "Well, with this change you're always going to get either the old or new metadata from `getAllMetadata`.  Where as if I clear the list at the start of this method, then `getAllMetadata` can return empty.\r\n\r\nQuestion is: which is preferable?  I figured there's a strong possibility that at least some of the old metadata may still be correct - so why ditch it?",
        "createdAt" : "2020-03-05T23:31:28Z",
        "updatedAt" : "2020-03-05T23:31:29Z",
        "lastEditedBy" : "e431deb4-a19e-4e78-a775-12af049c9089",
        "tags" : [
        ]
      },
      {
        "id" : "67c4d428-231c-4c76-b5a7-cef008edb12a",
        "parentId" : "04e25e1d-34bb-4333-8f0d-50b781efe892",
        "authorId" : "e431deb4-a19e-4e78-a775-12af049c9089",
        "body" : "By returning `empty` we're forcing callers to handle this case. But if we return stale data, then it's no different to if they had called `getAllMetadata` a few ns earlier.",
        "createdAt" : "2020-03-05T23:38:57Z",
        "updatedAt" : "2020-03-05T23:38:57Z",
        "lastEditedBy" : "e431deb4-a19e-4e78-a775-12af049c9089",
        "tags" : [
        ]
      }
    ],
    "commit" : "51c76fedd9da8c27b667075d334dc8da9bed6489",
    "line" : 45,
    "diffHunk" : "@@ -1,1 +317,321 @@                                 final Map<HostInfo, Set<TopicPartition>> standbyPartitionHostMap) {\n        if (activePartitionHostMap.isEmpty() && standbyPartitionHostMap.isEmpty()) {\n            allMetadata = Collections.emptyList();\n            return;\n        }"
  }
]