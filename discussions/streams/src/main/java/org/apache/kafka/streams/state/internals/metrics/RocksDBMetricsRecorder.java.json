[
  {
    "id" : "ddca984e-5c3f-4a73-8130-a3ab0b255de8",
    "prId" : 7209,
    "prUrl" : "https://github.com/apache/kafka/pull/7209#pullrequestreview-278465939",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "457e044e-1965-4101-9f70-7eb14fa4b3a3",
        "parentId" : null,
        "authorId" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "body" : "The `record` method will change in the next PR when the metrics are computed. Currently, it only avoids compiler warnings. ",
        "createdAt" : "2019-08-14T06:48:16Z",
        "updatedAt" : "2019-08-26T11:09:34Z",
        "lastEditedBy" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "tags" : [
        ]
      },
      {
        "id" : "9cc0be4a-3ca3-47ed-bd6f-cd8376b4021f",
        "parentId" : "457e044e-1965-4101-9f70-7eb14fa4b3a3",
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "Sounds good, could you add a TODO just in case?",
        "createdAt" : "2019-08-19T21:40:25Z",
        "updatedAt" : "2019-08-26T11:09:34Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      },
      {
        "id" : "e5a86e60-d324-446e-8124-1ece6eedef87",
        "parentId" : "457e044e-1965-4101-9f70-7eb14fa4b3a3",
        "authorId" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "body" : "Ack",
        "createdAt" : "2019-08-23T13:40:44Z",
        "updatedAt" : "2019-08-26T11:09:39Z",
        "lastEditedBy" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "tags" : [
        ]
      }
    ],
    "commit" : "347191422f0bdce0112e46b0df597b41245d4861",
    "line" : 125,
    "diffHunk" : "@@ -1,1 +123,127 @@        numberOfOpenFilesSensor.record(0);\n        numberOfFileErrorsSensor.record(0);\n    }\n\n    public void close() {"
  },
  {
    "id" : "33c3f714-1040-4381-8abf-105be7e4bff9",
    "prId" : 7263,
    "prUrl" : "https://github.com/apache/kafka/pull/7263#pullrequestreview-286621018",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b7e8e24d-2224-4076-a725-7e627d45a6e8",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "Some metrics are removed here, is that intentional?",
        "createdAt" : "2019-09-03T16:57:46Z",
        "updatedAt" : "2019-09-23T22:15:35Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      },
      {
        "id" : "1eb1e8be-d96e-49f5-9dec-f8c59c1c8364",
        "parentId" : "b7e8e24d-2224-4076-a725-7e627d45a6e8",
        "authorId" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "body" : "Yes it was intentional. Unfortunately, some metrics require functionality of RocksDB 6+ and Streams currently uses 5.18.",
        "createdAt" : "2019-09-04T11:15:24Z",
        "updatedAt" : "2019-09-23T22:15:36Z",
        "lastEditedBy" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "tags" : [
        ]
      },
      {
        "id" : "de7e7e77-9c3a-401a-b348-faa74f97e3cc",
        "parentId" : "b7e8e24d-2224-4076-a725-7e627d45a6e8",
        "authorId" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "body" : "So there are metrics we would like to add but can't until we upgrade RocksDB? Can we create a 3.0 blocker ticket to add them back in when we bump rocks (and/or maybe a separate ticket to consider a major version bump of rocks with the next major version bump of kafka)",
        "createdAt" : "2019-09-10T21:20:53Z",
        "updatedAt" : "2019-09-23T22:15:36Z",
        "lastEditedBy" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "tags" : [
        ]
      },
      {
        "id" : "408eb0f8-2f01-46d0-b4c9-07a89d8079ef",
        "parentId" : "b7e8e24d-2224-4076-a725-7e627d45a6e8",
        "authorId" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "body" : "@ableegoldman I created ticket https://issues.apache.org/jira/browse/KAFKA-8897\r\nI did not specify it as a blocker for 3.0 because a major version increase of Streams is not required for a major version increase of RocksDB. If I miss something regarding this, please feel free to comment on the ticket and change it to a blocker.  ",
        "createdAt" : "2019-09-11T08:11:23Z",
        "updatedAt" : "2019-09-23T22:15:36Z",
        "lastEditedBy" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "tags" : [
        ]
      }
    ],
    "commit" : "262b663a0ac70943f80ac3cff7a289be23b29279",
    "line" : 115,
    "diffHunk" : "@@ -1,1 +109,113 @@        bytesWrittenDuringCompactionSensor =\n            RocksDBMetrics.bytesWrittenDuringCompactionSensor(streamsMetrics, metricContext);\n        bytesReadDuringCompactionSensor = RocksDBMetrics.bytesReadDuringCompactionSensor(streamsMetrics, metricContext);\n        numberOfOpenFilesSensor = RocksDBMetrics.numberOfOpenFilesSensor(streamsMetrics, metricContext);\n        numberOfFileErrorsSensor = RocksDBMetrics.numberOfFileErrorsSensor(streamsMetrics, metricContext);"
  },
  {
    "id" : "3bc088c1-743a-49ee-aba8-2587f43a1d19",
    "prId" : 7263,
    "prUrl" : "https://github.com/apache/kafka/pull/7263#pullrequestreview-291954558",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1e973375-3936-42a5-8df0-06c12aa2d6b2",
        "parentId" : null,
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "I like this parity check. :+1: ",
        "createdAt" : "2019-09-23T15:26:37Z",
        "updatedAt" : "2019-09-23T22:15:36Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      },
      {
        "id" : "6428385e-731b-4c61-ad98-d6030226e42f",
        "parentId" : "1e973375-3936-42a5-8df0-06c12aa2d6b2",
        "authorId" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "body" : "Thank you!",
        "createdAt" : "2019-09-23T18:25:52Z",
        "updatedAt" : "2019-09-23T22:15:36Z",
        "lastEditedBy" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "tags" : [
        ]
      }
    ],
    "commit" : "262b663a0ac70943f80ac3cff7a289be23b29279",
    "line" : 76,
    "diffHunk" : "@@ -1,1 +78,82 @@            isInitialized = true;\n        }\n        if (this.taskId != taskId) {\n            throw new IllegalStateException(\"Statistics of store \\\"\" + segmentName + \"\\\" for task \" + taskId\n                + \" cannot be added to metrics recorder for task \" + this.taskId + \". This is a bug in Kafka Streams.\");"
  },
  {
    "id" : "b1c2743d-9471-4ac7-9306-773bef4b9410",
    "prId" : 7263,
    "prUrl" : "https://github.com/apache/kafka/pull/7263#pullrequestreview-291954558",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "240a28aa-5b7f-49e9-898c-88895f95bd7b",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "It's a bit confusing to have two storeNames variable, the first one is actually for the logical storeName (which would be the same to the physical store name if it is kv-store) and the second is for the physical storeName (e.g. for segmented store its name is `storeName-segmentID`).\r\n\r\nMaybe rename the second to rocksDBName?",
        "createdAt" : "2019-09-23T16:56:27Z",
        "updatedAt" : "2019-09-23T22:15:36Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      },
      {
        "id" : "7db84695-b573-4f1c-8766-9acd089ab497",
        "parentId" : "240a28aa-5b7f-49e9-898c-88895f95bd7b",
        "authorId" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "body" : "Renaming is a good idea. I renamed the physical `storeName` to `segmentName`.  ",
        "createdAt" : "2019-09-23T20:08:32Z",
        "updatedAt" : "2019-09-23T22:15:36Z",
        "lastEditedBy" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "tags" : [
        ]
      }
    ],
    "commit" : "262b663a0ac70943f80ac3cff7a289be23b29279",
    "line" : 53,
    "diffHunk" : "@@ -1,1 +56,60 @@        this.metricsScope = metricsScope;\n        this.storeName = storeName;\n        final LogContext logContext = new LogContext(String.format(\"[RocksDB Metrics Recorder for %s] \", storeName));\n        logger = logContext.logger(RocksDBMetricsRecorder.class);\n    }"
  }
]