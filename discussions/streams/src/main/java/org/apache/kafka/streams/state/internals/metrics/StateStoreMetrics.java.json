[
  {
    "id" : "bc34c488-e1e0-44a4-9ef5-2aec8c957ea6",
    "prId" : 7584,
    "prUrl" : "https://github.com/apache/kafka/pull/7584#pullrequestreview-305842352",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "aa248871-6a6d-46b5-b74a-1ede2dee090e",
        "parentId" : null,
        "authorId" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "body" : "This class contains all specifications of state-store-level metrics.",
        "createdAt" : "2019-10-23T12:18:52Z",
        "updatedAt" : "2019-10-29T13:41:57Z",
        "lastEditedBy" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "tags" : [
        ]
      }
    ],
    "commit" : "e5cd569c4b66c0af071eaf7b914f5e1413c34ca8",
    "line" : 36,
    "diffHunk" : "@@ -1,1 +34,38 @@import static org.apache.kafka.streams.processor.internals.metrics.StreamsMetricsImpl.addValueMetricToSensor;\n\npublic class StateStoreMetrics {\n    private StateStoreMetrics() {}\n"
  },
  {
    "id" : "c7ced4d9-eaa2-4bd4-906b-86ba79b3cfe3",
    "prId" : 7584,
    "prUrl" : "https://github.com/apache/kafka/pull/7584#pullrequestreview-309340526",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4705772b-b1d3-498c-a419-fb5a451ae377",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "I think in KIP-444 this metric would be replaced with the task-level `dropped-records` right?",
        "createdAt" : "2019-10-23T18:04:34Z",
        "updatedAt" : "2019-10-29T13:41:57Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      },
      {
        "id" : "eb0c539c-466c-420d-aae6-38e31c6aeb11",
        "parentId" : "4705772b-b1d3-498c-a419-fb5a451ae377",
        "authorId" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "body" : "My bad. Will fix it.",
        "createdAt" : "2019-10-24T13:53:26Z",
        "updatedAt" : "2019-10-29T13:41:57Z",
        "lastEditedBy" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "tags" : [
        ]
      },
      {
        "id" : "9e1ff550-9357-4f40-a62a-4bc5fa44293b",
        "parentId" : "4705772b-b1d3-498c-a419-fb5a451ae377",
        "authorId" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "body" : "I just realized that I need PR #7566 merged before I can fix this, because `dropped-records` is a task-level sensor.",
        "createdAt" : "2019-10-24T19:06:11Z",
        "updatedAt" : "2019-10-29T13:41:57Z",
        "lastEditedBy" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "tags" : [
        ]
      },
      {
        "id" : "bc5efb4d-6d29-4a2e-af41-8ed212a60050",
        "parentId" : "4705772b-b1d3-498c-a419-fb5a451ae377",
        "authorId" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "body" : "PR #7566 was merged. Rebased the PR and fixed it. ",
        "createdAt" : "2019-10-28T13:56:08Z",
        "updatedAt" : "2019-10-29T13:41:57Z",
        "lastEditedBy" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "tags" : [
        ]
      },
      {
        "id" : "a18caf39-e8ab-400a-90fd-8979d1b24fe8",
        "parentId" : "4705772b-b1d3-498c-a419-fb5a451ae377",
        "authorId" : "4c968502-bb3d-46ee-8719-0c0bdbc6242f",
        "body" : "I could be missing something, but the name still contains `expired-window`. I thought we were going with `dropped-records` across all metrics.  But this could be a misunderstanding on my part.",
        "createdAt" : "2019-10-30T15:10:34Z",
        "updatedAt" : "2019-10-30T15:47:04Z",
        "lastEditedBy" : "4c968502-bb3d-46ee-8719-0c0bdbc6242f",
        "tags" : [
        ]
      },
      {
        "id" : "840172c7-6a63-44b1-b3ed-822080294d6e",
        "parentId" : "4705772b-b1d3-498c-a419-fb5a451ae377",
        "authorId" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "body" : "I introduced method `droppedRecordsSensorOrExpiredWindowRecordDropSensor()` in `TaskMetrics` that is used in the code to get the correct sensor depending on the built-in metrics version. `expiredWindowRecordDropSensor()` is only called in `droppedRecordsSensorOrExpiredWindowRecordDropSensor()`.",
        "createdAt" : "2019-10-30T16:21:19Z",
        "updatedAt" : "2019-10-30T16:21:20Z",
        "lastEditedBy" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "tags" : [
        ]
      }
    ],
    "commit" : "e5cd569c4b66c0af071eaf7b914f5e1413c34ca8",
    "line" : 391,
    "diffHunk" : "@@ -1,1 +389,393 @@                                                       final String storeName,\n                                                       final StreamsMetricsImpl streamsMetrics) {\n        final Sensor sensor = streamsMetrics.storeLevelSensor(\n            threadId,\n            taskId,"
  },
  {
    "id" : "5cf1bafc-6acb-4f9a-a3cc-1a46f29f03e9",
    "prId" : 7584,
    "prUrl" : "https://github.com/apache/kafka/pull/7584#pullrequestreview-306837596",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a0606093-5bd0-4236-b2d8-05c34e0fedfd",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "This is a meta comment: in KIP-439 we also discussed about fixing some metric names which are collapsed and messed with the functionality names, and back then the proposal is:\r\n\r\n```\r\nvalue-by-key\r\nvalue-by-key-and-time\r\nrange-by-key\r\nrange-by-key-range\r\nrange-by-time-range\r\nrange-by-key-and-time-range\r\nrange-by-key-range-and-time-range\r\nrange-all\r\n```\r\n\r\nBesides the first two, all others are mainly used in IQ only and not in stream processor at all, which means that only the first two are commonly recorded in practice. So I'm thinking maybe we keep the compatibility for the first two while renaming others:\r\n\r\n```\r\nget (in kv-store, it means value-by-key, in window-store, it means value-by-key-time)\r\nrange-by-key\r\nrange-by-key-range\r\nrange-by-time-range\r\nrange-by-key-and-time-range\r\nrange-by-key-range-and-time-range\r\nrange-all\r\n```\r\n\r\nWDYT cc @vvcephei @mjsax who have participated in the discussion of KIP-439 as well.",
        "createdAt" : "2019-10-23T18:19:56Z",
        "updatedAt" : "2019-10-29T13:41:57Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      },
      {
        "id" : "09adbbad-7a20-4848-8a66-8e20cc29768c",
        "parentId" : "a0606093-5bd0-4236-b2d8-05c34e0fedfd",
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "Hey @guozhangwang . This seems good to me. It shouldn't be too ambiguous either way, and the documentation would have to explain it, anyway.",
        "createdAt" : "2019-10-23T19:42:42Z",
        "updatedAt" : "2019-10-29T13:41:57Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      },
      {
        "id" : "2feb6f03-1354-485d-8112-3f05f469a9b2",
        "parentId" : "a0606093-5bd0-4236-b2d8-05c34e0fedfd",
        "authorId" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "body" : "Ack. I am ok with this suggestions -- will keep it in mind for KIP-439.\r\n\r\nBtw: it this a change for KIP-444 what needs to be communicated as follow up to the already accepted KIP?",
        "createdAt" : "2019-10-23T22:51:23Z",
        "updatedAt" : "2019-10-29T13:41:57Z",
        "lastEditedBy" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "tags" : [
        ]
      },
      {
        "id" : "d707c16e-0cd9-49b8-95cd-836dd5c7f44f",
        "parentId" : "a0606093-5bd0-4236-b2d8-05c34e0fedfd",
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "I think KIP-444 just keep the metrics names on state stores as is -- we will do the renaming on KIP-439 and communicate that in that KIP.",
        "createdAt" : "2019-10-24T20:17:17Z",
        "updatedAt" : "2019-10-29T13:41:57Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      }
    ],
    "commit" : "e5cd569c4b66c0af071eaf7b914f5e1413c34ca8",
    "line" : 227,
    "diffHunk" : "@@ -1,1 +225,229 @@    }\n\n    public static Sensor getSensor(final String threadId,\n                                   final String taskId,\n                                   final String storeType,"
  }
]