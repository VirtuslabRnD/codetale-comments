[
  {
    "id" : "929c634f-bcc8-4f18-923a-fc30eade8968",
    "prId" : 4826,
    "prUrl" : "https://github.com/apache/kafka/pull/4826#pullrequestreview-109814681",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b4c581c0-1e9a-4f7d-b8e4-fd1bf6471d77",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "This comment is not for this line but for line 361 above (it is not introduced in this PR but we can tighten the screws a bit more along side):\r\n\r\nwe should switch the line `transactionInFlight = true;` to go after `producer.beginTransaction();`\r\n",
        "createdAt" : "2018-04-05T17:56:28Z",
        "updatedAt" : "2018-04-05T22:09:17Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      }
    ],
    "commit" : "fcd3e0ec75d3e5133c97a33246e248268acebdb6",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +483,487 @@                if (!clean) {\n                    try {\n                        if (!isZombie && transactionInFlight) {\n                            producer.abortTransaction();\n                        }"
  },
  {
    "id" : "213d344a-0b57-463b-bbac-dedbd26bb49d",
    "prId" : 5398,
    "prUrl" : "https://github.com/apache/kafka/pull/5398#pullrequestreview-145330266",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0a0a615c-9fea-40f4-9fb1-b5f41f647ea5",
        "parentId" : null,
        "authorId" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "body" : "Can you open PRs for older branches to back-port this fix?",
        "createdAt" : "2018-07-20T17:34:44Z",
        "updatedAt" : "2018-08-02T22:06:29Z",
        "lastEditedBy" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "tags" : [
        ]
      },
      {
        "id" : "e2bacee0-cf66-4473-8b62-85ac2501d8a2",
        "parentId" : "0a0a615c-9fea-40f4-9fb1-b5f41f647ea5",
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "yup.",
        "createdAt" : "2018-07-20T18:24:20Z",
        "updatedAt" : "2018-08-02T22:06:29Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      },
      {
        "id" : "91920164-d9f4-469e-a6c1-58f6502e8f77",
        "parentId" : "0a0a615c-9fea-40f4-9fb1-b5f41f647ea5",
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "ah geez; good catch.",
        "createdAt" : "2018-07-31T21:50:26Z",
        "updatedAt" : "2018-08-02T22:06:29Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      },
      {
        "id" : "348b918c-3cb8-47f2-855a-41fb7df75117",
        "parentId" : "0a0a615c-9fea-40f4-9fb1-b5f41f647ea5",
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "FWIW, it wouldn't break anything. This is only the name of the sensor, which just needs to be unique, and it's just as unique in this order, unless some other task is named \"commit\" (which wouldn't happen).",
        "createdAt" : "2018-08-02T18:18:29Z",
        "updatedAt" : "2018-08-02T22:06:29Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      },
      {
        "id" : "6a7b6ba5-3442-4705-a36a-cfa625e8d634",
        "parentId" : "0a0a615c-9fea-40f4-9fb1-b5f41f647ea5",
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "To be clear, we should fix it, just not sure if we need to bother backporting.",
        "createdAt" : "2018-08-02T18:19:16Z",
        "updatedAt" : "2018-08-02T22:06:29Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      },
      {
        "id" : "06b118a7-ad80-4c5f-9f3e-143fe0547e94",
        "parentId" : "0a0a615c-9fea-40f4-9fb1-b5f41f647ea5",
        "authorId" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "body" : "Cannot follow the argument? It seems to be an easy fix and we should back port all fixes by default and only not back port if there is a good reason for not doing it.\r\n\r\n@guozhangwang Is there already a PR or ticket so this is not dropped on the floor?",
        "createdAt" : "2018-08-02T21:26:33Z",
        "updatedAt" : "2018-08-02T22:06:29Z",
        "lastEditedBy" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "tags" : [
        ]
      },
      {
        "id" : "4b7e79ea-b67d-4881-82b4-9095a2c5a49a",
        "parentId" : "0a0a615c-9fea-40f4-9fb1-b5f41f647ea5",
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "@vvcephei I think it did break sth.. the sensorName is used as part of `fullSensorName = key + \".\" + sensorName;`. With `sensorName == taskName`, we will not add them since `Sensor s = getSensor(name);` already exists, i.e. we will lose some metrics, right?",
        "createdAt" : "2018-08-02T21:28:10Z",
        "updatedAt" : "2018-08-02T22:06:29Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      },
      {
        "id" : "fd2361c9-8286-4f6f-b776-f5728e85d7eb",
        "parentId" : "0a0a615c-9fea-40f4-9fb1-b5f41f647ea5",
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "@mjsax fair enough!\r\n\r\n@guozhangwang I think you're right. The full sensor name is still unique, but it would mess up the ability to unload sensors (we basically wouldn't be able to unload any task level sensors). My bad.",
        "createdAt" : "2018-08-03T22:31:31Z",
        "updatedAt" : "2018-08-03T22:31:31Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      },
      {
        "id" : "625a59ba-9308-4ff2-95f7-7679114c92eb",
        "parentId" : "0a0a615c-9fea-40f4-9fb1-b5f41f647ea5",
        "authorId" : "0c73d886-f3da-4107-8045-92d8e3c8fb75",
        "body" : "Maybe create (internal) SensorName type (alias for String) so that there is no chance of mixup in the future.",
        "createdAt" : "2018-08-10T17:25:08Z",
        "updatedAt" : "2018-08-10T17:25:09Z",
        "lastEditedBy" : "0c73d886-f3da-4107-8045-92d8e3c8fb75",
        "tags" : [
        ]
      }
    ],
    "commit" : "8c57cec79fa53032b55dd7a5f374c9ee62c25098",
    "line" : 29,
    "diffHunk" : "@@ -1,1 +113,117 @@            // add the operation metrics with additional tags\n            final Map<String, String> tagMap = metrics.tagMap(\"task-id\", taskName);\n            taskCommitTimeSensor = metrics.taskLevelSensor(taskName, \"commit\", Sensor.RecordingLevel.DEBUG, parent);\n            taskCommitTimeSensor.add(\n                new MetricName(\"commit-latency-avg\", group, \"The average latency of commit operation.\", tagMap),"
  }
]