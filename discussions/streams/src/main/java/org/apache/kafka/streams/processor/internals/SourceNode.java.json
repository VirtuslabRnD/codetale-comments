[
  {
    "id" : "dc84c89f-7690-40a2-9036-4b61963e8291",
    "prId" : 7615,
    "prUrl" : "https://github.com/apache/kafka/pull/7615#pullrequestreview-312155891",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6c9bd0d5-6438-4f2c-8230-6f82fde2e322",
        "parentId" : null,
        "authorId" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "body" : "I moved this sensor from `ProcessorNode` to here because it only records forwards on source nodes. Before a sensor and its corresponding metrics were created per processor node. So those metrics were also exposed for  non-source nodes. Since they are only recorded on source nodes, those metrics were always zero. ",
        "createdAt" : "2019-10-31T15:36:37Z",
        "updatedAt" : "2019-11-15T12:01:14Z",
        "lastEditedBy" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "tags" : [
        ]
      },
      {
        "id" : "784feaf8-c60b-4617-955a-a7d626e6533d",
        "parentId" : "6c9bd0d5-6438-4f2c-8230-6f82fde2e322",
        "authorId" : "4c968502-bb3d-46ee-8719-0c0bdbc6242f",
        "body" : "Should we record the forwarding rate of all processors? Not sure that's why I'm asking here.  Seems like it could be useful to see variance in forwarding from different processors.",
        "createdAt" : "2019-11-01T16:44:42Z",
        "updatedAt" : "2019-11-15T12:01:14Z",
        "lastEditedBy" : "4c968502-bb3d-46ee-8719-0c0bdbc6242f",
        "tags" : [
        ]
      },
      {
        "id" : "2fd33b48-3699-46ca-b7b0-5c3680016091",
        "parentId" : "6c9bd0d5-6438-4f2c-8230-6f82fde2e322",
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "I had the same question that in old version do we record `forward` for all processor nodes, but it seems that although we create the sensor at all nodes, we actually only \"record\" the sensor at source nodes, @cadonna can correct me if I'm wrong.",
        "createdAt" : "2019-11-02T00:00:07Z",
        "updatedAt" : "2019-11-15T12:01:14Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      },
      {
        "id" : "060061af-ffbd-4afa-a6bb-4902faf2d08c",
        "parentId" : "6c9bd0d5-6438-4f2c-8230-6f82fde2e322",
        "authorId" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "body" : "@guozhangwang is correct. And also the documentation states that `forward` is only measured on source nodes (https://kafka.apache.org/documentation/#kafka_streams_node_monitoring). Also KIP-444 states that `process-[rate|total]` (the successor of `forward`) is only measured on source nodes. \r\n\r\nI guess for source nodes it is interesting because the parent sensor that rolls up all source nodes gives you the throughput of the task. If we see that there is a requirement to measure `process-[rate|total]` also for non-source nodes, we can add it later. Addition is always easier than removal. Adding it now would mean to revote on the KIP, wouldn't it?",
        "createdAt" : "2019-11-04T15:54:35Z",
        "updatedAt" : "2019-11-15T12:01:14Z",
        "lastEditedBy" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "tags" : [
        ]
      },
      {
        "id" : "9911281c-1173-48dd-aeb1-60de4e8dfcc7",
        "parentId" : "6c9bd0d5-6438-4f2c-8230-6f82fde2e322",
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "Yup, I agree.",
        "createdAt" : "2019-11-06T01:59:07Z",
        "updatedAt" : "2019-11-15T12:01:14Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      }
    ],
    "commit" : "1bbee5afd4d93346c5bac0afe2c5962365ad431e",
    "line" : 30,
    "diffHunk" : "@@ -1,1 +74,78 @@            context.currentNode().name(),\n            context.metrics()\n        );\n\n        // if deserializers are null, get the default ones from the context"
  },
  {
    "id" : "104951dd-5a16-4187-a474-d44a71c0c6d9",
    "prId" : 8018,
    "prUrl" : "https://github.com/apache/kafka/pull/8018#pullrequestreview-356230678",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "031167e7-4ac9-4879-b293-5cca9c5913f5",
        "parentId" : null,
        "authorId" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "body" : "This is the fix. If the parent class `ProcessorNode` is initialised before the the actual sensor node an empty sensor without parent is created in `ProcessorNode#init()` due to backwards compatibility. Thus, on source nodes we need to first call the initialisation of the source node before we call the initialisation in the parent class.   ",
        "createdAt" : "2020-01-29T04:39:34Z",
        "updatedAt" : "2020-02-10T20:13:30Z",
        "lastEditedBy" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "tags" : [
        ]
      },
      {
        "id" : "63c5e39c-1999-444b-a305-aea42b937f57",
        "parentId" : "031167e7-4ac9-4879-b293-5cca9c5913f5",
        "authorId" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "body" : "I think it's worth to add a comment about this (even if we have a test now)",
        "createdAt" : "2020-02-05T21:03:46Z",
        "updatedAt" : "2020-02-10T20:13:30Z",
        "lastEditedBy" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "tags" : [
        ]
      },
      {
        "id" : "015a1627-0542-4cd6-adb4-249c6301b1b3",
        "parentId" : "031167e7-4ac9-4879-b293-5cca9c5913f5",
        "authorId" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "body" : "Done",
        "createdAt" : "2020-02-10T20:13:35Z",
        "updatedAt" : "2020-02-10T20:16:28Z",
        "lastEditedBy" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "tags" : [
        ]
      }
    ],
    "commit" : "daa04a720cd4f87476195c2c93d2d28c22a34529",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +80,84 @@        super.init(context);\n        this.context = context;\n\n        // if deserializers are null, get the default ones from the context\n        if (this.keyDeserializer == null) {"
  }
]