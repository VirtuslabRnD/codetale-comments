[
  {
    "id" : "bfce03e9-8438-4581-938a-42ba40e1a9d3",
    "prId" : 5428,
    "prUrl" : "https://github.com/apache/kafka/pull/5428#pullrequestreview-149798706",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a0e7d8a8-ac27-4f64-a56b-f3fbb9af3603",
        "parentId" : null,
        "authorId" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "body" : "This seems to contradict that we set `commitNeeded` after punctuations (cf. my comments below).",
        "createdAt" : "2018-08-22T22:55:13Z",
        "updatedAt" : "2018-09-11T21:32:12Z",
        "lastEditedBy" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "tags" : [
        ]
      },
      {
        "id" : "f303ed06-e6d0-45f6-a553-0952a524773d",
        "parentId" : "a0e7d8a8-ac27-4f64-a56b-f3fbb9af3603",
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "Still not sure if I follow.. we do `maybePunctuate` before `maybeCommit` so this should be fine?",
        "createdAt" : "2018-08-23T17:57:37Z",
        "updatedAt" : "2018-09-11T21:32:12Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      },
      {
        "id" : "d677ffe9-9a01-4d09-a12a-480f3d9baeaa",
        "parentId" : "a0e7d8a8-ac27-4f64-a56b-f3fbb9af3603",
        "authorId" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "body" : "I think I miss understood the logic before. Please ignore this comment.",
        "createdAt" : "2018-08-23T18:07:36Z",
        "updatedAt" : "2018-09-11T21:32:12Z",
        "lastEditedBy" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "tags" : [
        ]
      },
      {
        "id" : "6ee52847-ba78-4207-a0b9-988f1fe0da32",
        "parentId" : "a0e7d8a8-ac27-4f64-a56b-f3fbb9af3603",
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "Yeah, I can confirm that I just now got confused about the names. Can we maybe call this (and up the chain) `commitIfRequestedAndNeeded` or similar?\r\n\r\nSpecifically, the thing that confused me was differentiating the periodic commits on any dirty task vs. the on-demand commit driven by `ProcessorContext#commit`.",
        "createdAt" : "2018-08-27T17:10:02Z",
        "updatedAt" : "2018-09-11T21:32:12Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      }
    ],
    "commit" : "71b2b16d0b0f37a05af3df60ae9b5ff88649a7a4",
    "line" : 52,
    "diffHunk" : "@@ -1,1 +48,52 @@            final StreamTask task = it.next();\n            try {\n                if (task.commitRequested() && task.commitNeeded()) {\n                    task.commit();\n                    committed++;"
  },
  {
    "id" : "23f76c12-a1fa-4e43-93f9-3ab3f22dce64",
    "prId" : 5768,
    "prUrl" : "https://github.com/apache/kafka/pull/5768#pullrequestreview-163145294",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b353e217-a53d-4707-9daf-f8d7770ceeca",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "nit: `Override`.",
        "createdAt" : "2018-10-10T00:15:20Z",
        "updatedAt" : "2018-11-21T20:59:48Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      }
    ],
    "commit" : "93b7dafef1e580fb77cd3eb7ec7a6220b2832446",
    "line" : 95,
    "diffHunk" : "@@ -1,1 +227,231 @@\n    @Override\n    List<StreamTask> allTasks() {\n        final List<StreamTask> tasks = super.allTasks();\n        tasks.addAll(restoring.values());"
  },
  {
    "id" : "1dde38ed-5211-4d4f-96a9-cece77c1490c",
    "prId" : 5768,
    "prUrl" : "https://github.com/apache/kafka/pull/5768#pullrequestreview-163145294",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "dfc7b2ba-8146-4f0d-b0d0-3cc329262f25",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "Ditto here.",
        "createdAt" : "2018-10-10T00:15:36Z",
        "updatedAt" : "2018-11-21T20:59:48Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      }
    ],
    "commit" : "93b7dafef1e580fb77cd3eb7ec7a6220b2832446",
    "line" : 102,
    "diffHunk" : "@@ -1,1 +234,238 @@\n    @Override\n    Set<TaskId> allAssignedTaskIds() {\n        final Set<TaskId> taskIds = super.allAssignedTaskIds();\n        taskIds.addAll(restoring.keySet());"
  },
  {
    "id" : "c509dc58-7dab-4cb9-84c0-fcdcc3400893",
    "prId" : 6113,
    "prUrl" : "https://github.com/apache/kafka/pull/6113#pullrequestreview-191470454",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f8318ef8-1e6b-4523-a25a-71fc2ae8720e",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "The following three functions do not have logical changes, just re-grouping all overridden functions on top of AssignedTasks here.",
        "createdAt" : "2019-01-10T23:59:41Z",
        "updatedAt" : "2019-02-22T01:03:34Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      }
    ],
    "commit" : "912a45642a92f4298d203d5c4eda6a1678208c05",
    "line" : 12,
    "diffHunk" : "@@ -1,1 +46,50 @@    }\n\n    @Override\n    List<StreamTask> allTasks() {\n        final List<StreamTask> tasks = super.allTasks();"
  },
  {
    "id" : "a611b8d7-cc43-4f65-8496-ffca1046953f",
    "prId" : 7321,
    "prUrl" : "https://github.com/apache/kafka/pull/7321#pullrequestreview-288994781",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2ebb89ae-d376-43b1-a765-c264492222eb",
        "parentId" : null,
        "authorId" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "body" : "For me it sounds like a `warn`",
        "createdAt" : "2019-09-13T23:29:58Z",
        "updatedAt" : "2019-09-24T05:45:47Z",
        "lastEditedBy" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "tags" : [
        ]
      },
      {
        "id" : "af64a1cf-0cfd-4dca-888b-91809596efb4",
        "parentId" : "2ebb89ae-d376-43b1-a765-c264492222eb",
        "authorId" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "body" : "This part was copy/pasted but I do think info kind of makes sense...no strong feelings though",
        "createdAt" : "2019-09-17T02:50:42Z",
        "updatedAt" : "2019-09-24T05:45:47Z",
        "lastEditedBy" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "tags" : [
        ]
      }
    ],
    "commit" : "c3935aa6be7cc55911bb4e24332557df24d01f18",
    "line" : 113,
    "diffHunk" : "@@ -1,1 +133,137 @@            } catch (final TaskMigratedException closeAsZombieAndSwallow) {\n                // as we suspend a task, we are either shutting down or rebalancing, thus, we swallow and move on\n                log.info(\"Failed to suspend {} {} since it got migrated to another thread already. \" +\n                    \"Closing it as zombie and move on.\", taskTypeName, id);\n                firstException.compareAndSet(null, closeZombieTask(task));"
  },
  {
    "id" : "5018e139-215b-403e-87a8-da2342d6c86e",
    "prId" : 7321,
    "prUrl" : "https://github.com/apache/kafka/pull/7321#pullrequestreview-291439049",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d13cb869-1121-40e9-8e3b-7865aa09edfd",
        "parentId" : null,
        "authorId" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "body" : "Is this for testing only too?",
        "createdAt" : "2019-09-19T16:59:05Z",
        "updatedAt" : "2019-09-24T05:45:47Z",
        "lastEditedBy" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "tags" : [
        ]
      },
      {
        "id" : "32fb6fa9-a575-4428-a653-9323e753062f",
        "parentId" : "d13cb869-1121-40e9-8e3b-7865aa09edfd",
        "authorId" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "body" : "Yeah, will expand the comment",
        "createdAt" : "2019-09-21T00:14:20Z",
        "updatedAt" : "2019-09-24T05:45:47Z",
        "lastEditedBy" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "tags" : [
        ]
      }
    ],
    "commit" : "c3935aa6be7cc55911bb4e24332557df24d01f18",
    "line" : 353,
    "diffHunk" : "@@ -1,1 +521,525 @@    }\n\n    Set<TaskId> restoringTaskIds() {\n        return new HashSet<>(restoring.keySet());\n    }"
  },
  {
    "id" : "7191ccde-6b97-4ad7-a4d7-e43f7b9d4f5d",
    "prId" : 7386,
    "prUrl" : "https://github.com/apache/kafka/pull/7386#pullrequestreview-295343685",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4b89f67c-4e4a-4ebf-9e72-059948b2bc79",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "Nice cleanup! In #5501 we moved the close / abort logic into the caller suspend function, and we should actually remove the parameter in that PR but overlooked it.",
        "createdAt" : "2019-10-01T03:04:06Z",
        "updatedAt" : "2019-10-06T23:53:51Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      }
    ],
    "commit" : "f047cd9bea88a4ffc88ce2b4f82946d52202c539",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +75,79 @@    void closeTask(final StreamTask task, final boolean clean) {\n        if (suspended.containsKey(task.id())) {\n            task.closeSuspended(clean, null);\n        } else {\n            task.close(clean, false);"
  }
]