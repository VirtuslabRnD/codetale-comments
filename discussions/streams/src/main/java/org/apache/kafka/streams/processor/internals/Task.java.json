[
  {
    "id" : "8d15bff5-2488-47a6-b622-f325f8ae092e",
    "prId" : 8058,
    "prUrl" : "https://github.com/apache/kafka/pull/8058#pullrequestreview-354871741",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f6157b94-438b-4f8c-8552-4acf7c869a3a",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "Okay this might be a bit controversial: I tried to make the re-initialization logic as cheap as possible since otherwise we may be kicked out of the group for not calling consumer.poll in time. After looking at the source code I found the only part is the closure of the task-level sensors which I moved out of the `task.close` functions. So from CLOSED -> CREATED there's nothing necessary.",
        "createdAt" : "2020-02-07T00:54:07Z",
        "updatedAt" : "2020-02-20T23:04:08Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      }
    ],
    "commit" : "03f4778cba8697bad6e5c5d7ce40df6e59214c02",
    "line" : 71,
    "diffHunk" : "@@ -1,1 +158,162 @@     * Revive a closed task to a created one; should never throw an exception\n     */\n    void revive();\n\n    StateStore getStore(final String name);"
  },
  {
    "id" : "c16ce869-043c-420c-bb44-ced2174a3c71",
    "prId" : 8218,
    "prUrl" : "https://github.com/apache/kafka/pull/8218#pullrequestreview-372454953",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ddc86c37-8f7e-4293-be56-371ab279d60d",
        "parentId" : null,
        "authorId" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "body" : "nit: let's order the functions as \r\n```\r\nprepareCloseClean\r\ncloseClean\r\nprepareCloseDirty\r\ncloseDirty\r\n```\r\n",
        "createdAt" : "2020-03-11T20:07:57Z",
        "updatedAt" : "2020-03-19T08:49:21Z",
        "lastEditedBy" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "tags" : [
        ]
      }
    ],
    "commit" : "4b03a487a518756f7c9acd1f3177b12b407867d5",
    "line" : 54,
    "diffHunk" : "@@ -1,1 +152,156 @@     * @throws StreamsException fatal error, should close the thread\n     */\n    Map<TopicPartition, Long> prepareCloseClean();\n\n    /**"
  },
  {
    "id" : "fc6e3dfe-46fa-43d2-af7f-7f65e79dd553",
    "prId" : 8218,
    "prUrl" : "https://github.com/apache/kafka/pull/8218#pullrequestreview-375614304",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7de48de0-f5b9-4d19-993c-0db9df17a91a",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "nit: we should emphasize that PrepareClose and close calls should be implemented idempotent since we may call it multiple times if a task close clean first and then fail and then close dirty. ",
        "createdAt" : "2020-03-17T00:14:27Z",
        "updatedAt" : "2020-03-19T08:49:21Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      }
    ],
    "commit" : "4b03a487a518756f7c9acd1f3177b12b407867d5",
    "line" : 46,
    "diffHunk" : "@@ -1,1 +146,150 @@\n    /**\n     * Prepare to close a task that we still own and prepare it for committing\n     * Throws an exception if this couldn't be done.\n     * Must be idempotent."
  },
  {
    "id" : "f0990d2d-1544-4006-8b93-9cac0855b567",
    "prId" : 8221,
    "prUrl" : "https://github.com/apache/kafka/pull/8221#pullrequestreview-413432908",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cf959c52-c420-45b9-b596-fb3ae2899c84",
        "parentId" : null,
        "authorId" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "body" : "nit: could we add some comments for this function?",
        "createdAt" : "2020-05-18T05:33:26Z",
        "updatedAt" : "2020-05-26T16:32:00Z",
        "lastEditedBy" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "tags" : [
        ]
      },
      {
        "id" : "840138e0-8fa2-4a6f-a72d-39c70cd2f310",
        "parentId" : "cf959c52-c420-45b9-b596-fb3ae2899c84",
        "authorId" : "889d8126-0663-4a3e-8712-81869bada9e0",
        "body" : "yes, added short description",
        "createdAt" : "2020-05-18T09:41:45Z",
        "updatedAt" : "2020-05-26T16:32:00Z",
        "lastEditedBy" : "889d8126-0663-4a3e-8712-81869bada9e0",
        "tags" : [
        ]
      }
    ],
    "commit" : "dc85a4694d663ad13d75681d28398d4b61a4f482",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +174,178 @@     * Updates input partitions and topology after rebalance\n     */\n    void update(final Set<TopicPartition> topicPartitions, final ProcessorTopology processorTopology);\n\n    /**"
  },
  {
    "id" : "b145c392-92f0-492f-a5d0-55297069d435",
    "prId" : 8251,
    "prUrl" : "https://github.com/apache/kafka/pull/8251#pullrequestreview-371389854",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "00c9f601-6f73-4e5a-a966-71dd68f2e47e",
        "parentId" : null,
        "authorId" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "body" : "When we could actually close this TODO btw? @guozhangwang ",
        "createdAt" : "2020-03-09T04:39:48Z",
        "updatedAt" : "2020-03-10T18:18:24Z",
        "lastEditedBy" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "tags" : [
        ]
      },
      {
        "id" : "a06352ad-b979-4cd4-8734-a5db080c1036",
        "parentId" : "00c9f601-6f73-4e5a-a966-71dd68f2e47e",
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "When we can remove the `eager protocol` I think.",
        "createdAt" : "2020-03-09T18:00:06Z",
        "updatedAt" : "2020-03-10T18:18:24Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      }
    ],
    "commit" : "6520dc7a626c4049a56d436e0cde9b7bfeaa73a7",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +52,56 @@     *          |            v                    v   |       |\n     *          |      +-----+-------+       +----+---+----+  |\n     *          |      | Running (2) | ----> | Suspended(3)|  |    //TODO Suspended(3) could be removed after we've stable on KIP-429\n     *          |      +-----+-------+       +------+------+  |\n     *          |            |                      |         |"
  },
  {
    "id" : "be3223f3-4bff-47b9-b5aa-9bc1b1e56f54",
    "prId" : 8776,
    "prUrl" : "https://github.com/apache/kafka/pull/8776#pullrequestreview-422391474",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f7dc75d2-b051-40c5-bc8c-9c6da80f7ed9",
        "parentId" : null,
        "authorId" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "body" : "State \"closing\" was removed in a previous PR already; just updating the comment",
        "createdAt" : "2020-06-02T06:58:07Z",
        "updatedAt" : "2020-06-04T22:38:46Z",
        "lastEditedBy" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "tags" : [
        ]
      }
    ],
    "commit" : "f98207900282ef4d7a27980a4cc018216098236c",
    "line" : 22,
    "diffHunk" : "@@ -1,1 +61,65 @@     *          |      +-----+-------+ <------------+         |\n     *          +----> | Closed (4)  |                        |\n     *                 +-------------+ <----------------------+\n     * </pre>\n     */"
  },
  {
    "id" : "8c2e4e31-5ec8-479c-9e68-0bda49ef3428",
    "prId" : 8833,
    "prUrl" : "https://github.com/apache/kafka/pull/8833#pullrequestreview-427502692",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c50b5795-a6a6-47e9-88dc-9710d643f101",
        "parentId" : null,
        "authorId" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "body" : "add a `@return` comment for the struct",
        "createdAt" : "2020-06-09T20:15:06Z",
        "updatedAt" : "2020-06-10T22:33:10Z",
        "lastEditedBy" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "tags" : [
        ]
      }
    ],
    "commit" : "329e187a9187c4ea532ce88e0202402cb6f78b86",
    "line" : 69,
    "diffHunk" : "@@ -1,1 +124,128 @@     * @throws StreamsException fatal error, should close the thread\n     */\n    Map<TopicPartition, OffsetAndMetadata> prepareCommit();\n\n    void postCommit();"
  },
  {
    "id" : "8696f5bd-037b-4347-80c7-f09867bb1836",
    "prId" : 8856,
    "prUrl" : "https://github.com/apache/kafka/pull/8856#pullrequestreview-429919194",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f542941c-e67e-456a-bb5c-6c034cfec913",
        "parentId" : null,
        "authorId" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "body" : "Can we update the comment with the state transitions above, too?",
        "createdAt" : "2020-06-12T16:58:19Z",
        "updatedAt" : "2020-06-16T20:13:14Z",
        "lastEditedBy" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "tags" : [
        ]
      },
      {
        "id" : "c93c1c5e-c2bd-49cb-8d3f-33c6a081162a",
        "parentId" : "f542941c-e67e-456a-bb5c-6c034cfec913",
        "authorId" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "body" : ":/ yeah...",
        "createdAt" : "2020-06-12T17:30:17Z",
        "updatedAt" : "2020-06-16T20:13:14Z",
        "lastEditedBy" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "tags" : [
        ]
      }
    ],
    "commit" : "2529fb91b156a520ceb4178665ab313051f68cfd",
    "line" : 29,
    "diffHunk" : "@@ -1,1 +71,75 @@        RUNNING(3),               // 2\n        SUSPENDED(1, 4),          // 3\n        CLOSED(0);                // 4, we allow CLOSED to transit to CREATED to handle corrupted tasks\n\n        private final Set<Integer> validTransitions = new HashSet<>();"
  }
]