[
  {
    "id" : "8d4bc48e-bb26-4214-bf54-ed6e2ba45ba9",
    "prId" : 5218,
    "prUrl" : "https://github.com/apache/kafka/pull/5218#pullrequestreview-130905488",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7bc55e8d-e805-4ef9-8b0d-6df6c0962658",
        "parentId" : null,
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "We could further optimize this computation by maintaining the queues in sorted order by their timestamp. Then, we would only ever have to look at the first queue in the sorted collection to find the new stream time.\r\n\r\nHowever, this requires more bookkeeping during put and poll, so I'd like to avoid it for now. We can make this optimization if this method is a bottleneck (but I doubt it will be).",
        "createdAt" : "2018-06-21T16:55:41Z",
        "updatedAt" : "2018-06-22T17:11:47Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      }
    ],
    "commit" : "e58d9726a7d7d1331ac7dac3ff65c4444c5a1bbc",
    "line" : 116,
    "diffHunk" : "@@ -1,1 +146,150 @@            }\n        }\n        this.streamTime = timestamp;\n    }\n"
  },
  {
    "id" : "61afcbfb-1d70-4f07-85c0-f0a7da423b9b",
    "prId" : 5398,
    "prUrl" : "https://github.com/apache/kafka/pull/5398#pullrequestreview-142507690",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8ed28a2c-3780-46bb-92b2-9b853b77c235",
        "parentId" : null,
        "authorId" : "4c968502-bb3d-46ee-8719-0c0bdbc6242f",
        "body" : "Although this is pre-existing, on `close` do we want to clear `nonEmptyQueuesByTime` as well?",
        "createdAt" : "2018-07-27T20:36:50Z",
        "updatedAt" : "2018-08-02T22:06:29Z",
        "lastEditedBy" : "4c968502-bb3d-46ee-8719-0c0bdbc6242f",
        "tags" : [
        ]
      },
      {
        "id" : "cc016900-08ad-4c8e-b289-11c6562d2c42",
        "parentId" : "8ed28a2c-3780-46bb-92b2-9b853b77c235",
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "@bbejeck We call `clear()` in `closeTopology` and `close()` in `closeSuspended`, i.e. the `nonEmptyQueuesByTime` should already be cleared when `close()` is called. But I agree with you that to to be on the safer side we can always just call clear() inside close(). Does that sound good to you?",
        "createdAt" : "2018-08-01T18:32:52Z",
        "updatedAt" : "2018-08-02T22:06:29Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      }
    ],
    "commit" : "8c57cec79fa53032b55dd7a5f374c9ee62c25098",
    "line" : 114,
    "diffHunk" : "@@ -1,1 +166,170 @@    }\n\n    public void close() {\n        clear();\n        partitionQueues.clear();"
  }
]