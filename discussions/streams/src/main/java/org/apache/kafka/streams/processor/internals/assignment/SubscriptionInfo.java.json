[
  {
    "id" : "372a47fe-9618-4c1b-855b-8a2f379263fc",
    "prId" : 4636,
    "prUrl" : "https://github.com/apache/kafka/pull/4636#pullrequestreview-113955027",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "97cdf0c9-240e-42b7-a042-90a1c355857d",
        "parentId" : null,
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "These hashcode and equals methods are pretty risky. They depend on mutable fields, which will result in objects disappearing from any Set or Hash they're placed in if any of the mutable fields change.\r\n\r\nI'm assuming they either aren't ever added to such collections, or that they never get mutated after they are.\r\n\r\nI leave it to you to decide how concerning this possibility is.",
        "createdAt" : "2018-04-19T21:31:16Z",
        "updatedAt" : "2018-05-31T03:24:33Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      },
      {
        "id" : "9812b622-8cce-4b47-a720-2767f51a1101",
        "parentId" : "97cdf0c9-240e-42b7-a042-90a1c355857d",
        "authorId" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "body" : "The fields are semantically immutable. If we want to enforce it in the code, we would need to rewrite it somewhat. Not sure if it's worth it as it might make the code more convoluted.",
        "createdAt" : "2018-04-20T12:23:53Z",
        "updatedAt" : "2018-05-31T03:24:33Z",
        "lastEditedBy" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "tags" : [
        ]
      }
    ],
    "commit" : "0a87bd5254155a9d60ba479371305ddaae99282d",
    "line" : 152,
    "diffHunk" : "@@ -1,1 +311,315 @@    }\n\n    @Override\n    public int hashCode() {\n        final int hashCode = usedVersion ^ latestSupportedVersion ^ processId.hashCode() ^ prevTasks.hashCode() ^ standbyTasks.hashCode();"
  },
  {
    "id" : "f7a66a16-0ce7-4c9a-a51e-186daca409d1",
    "prId" : 4880,
    "prUrl" : "https://github.com/apache/kafka/pull/4880#pullrequestreview-112987832",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ff45f56b-9e1b-446f-aa82-41e4260d8d5d",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "Where is this field going to be used?",
        "createdAt" : "2018-04-17T18:38:59Z",
        "updatedAt" : "2018-04-17T20:51:18Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      },
      {
        "id" : "7f776ec1-06e8-44e9-a5e1-9d9c4d72e085",
        "parentId" : "ff45f56b-9e1b-446f-aa82-41e4260d8d5d",
        "authorId" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "body" : "Version Probing. cf : https://github.com/apache/kafka/pull/4636 (full PR -- this PR is just a \"reduced\" version with version probing reverted to simplify reviewing)",
        "createdAt" : "2018-04-17T20:37:02Z",
        "updatedAt" : "2018-04-17T20:51:18Z",
        "lastEditedBy" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "tags" : [
        ]
      }
    ],
    "commit" : "0e762d6e1f24dc67a738950aa75264801b98a27f",
    "line" : 60,
    "diffHunk" : "@@ -1,1 +89,93 @@    }\n\n    public int latestSupportedVersion() {\n        return latestSupportedVersion;\n    }"
  },
  {
    "id" : "ccdfedbf-ef11-47d5-a0bd-ade6e9e61bd4",
    "prId" : 4880,
    "prUrl" : "https://github.com/apache/kafka/pull/4880#pullrequestreview-113106070",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ed2658bb-d1cd-4552-ab89-2b5d223a25de",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "nit: could we just pass in `subscriptionInfo` into `decodeTasks`, and initialize its prevTasks and standbyTasks internally?",
        "createdAt" : "2018-04-17T18:45:37Z",
        "updatedAt" : "2018-04-17T20:51:18Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      },
      {
        "id" : "cc36968b-97d7-400c-b5e2-f7ed8039bce8",
        "parentId" : "ed2658bb-d1cd-4552-ab89-2b5d223a25de",
        "authorId" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "body" : "Not possible if we want to share code. We call `decodeTasks` that does not know if it's decoding prevTasks or standbyTasks -- alternative, we can do two methods. Let me know what you think",
        "createdAt" : "2018-04-17T20:41:50Z",
        "updatedAt" : "2018-04-17T20:51:18Z",
        "lastEditedBy" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "tags" : [
        ]
      },
      {
        "id" : "77ca3093-a1e6-4176-b368-12bbced0ae18",
        "parentId" : "ed2658bb-d1cd-4552-ab89-2b5d223a25de",
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "Personally I'd prefer to have decodeTasksData in which we hard-code the logic of doing both prevTasks and standbyTasks, we do not code-share for these two task sets but we share code of constructing the set for version two and version three. I guess we cannot get both code sharing, and since it is really a nit I'm fine either way :)",
        "createdAt" : "2018-04-17T21:20:59Z",
        "updatedAt" : "2018-04-17T21:20:59Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      },
      {
        "id" : "9492c6a3-a40f-4d4e-982c-b6789a01ec18",
        "parentId" : "ed2658bb-d1cd-4552-ab89-2b5d223a25de",
        "authorId" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "body" : "I'll clean this up in the next PR. Merging this now.",
        "createdAt" : "2018-04-18T07:37:03Z",
        "updatedAt" : "2018-04-18T07:37:03Z",
        "lastEditedBy" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "tags" : [
        ]
      }
    ],
    "commit" : "0e762d6e1f24dc67a738950aa75264801b98a27f",
    "line" : 260,
    "diffHunk" : "@@ -1,1 +287,291 @@        decodeClientUUID(subscriptionInfo, data);\n\n        subscriptionInfo.prevTasks = new HashSet<>();\n        decodeTasks(subscriptionInfo.prevTasks, data);\n"
  }
]