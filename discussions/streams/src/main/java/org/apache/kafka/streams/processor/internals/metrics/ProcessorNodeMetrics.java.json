[
  {
    "id" : "c02428c1-f4a7-48a0-82dd-bc7cc0475416",
    "prId" : 7615,
    "prUrl" : "https://github.com/apache/kafka/pull/7615#pullrequestreview-309108665",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d659bfc9-7571-4349-9c0b-b95cbe053680",
        "parentId" : null,
        "authorId" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "body" : "New central provider of processor node metrics",
        "createdAt" : "2019-10-30T10:52:13Z",
        "updatedAt" : "2019-11-15T12:01:14Z",
        "lastEditedBy" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "tags" : [
        ]
      }
    ],
    "commit" : "1bbee5afd4d93346c5bac0afe2c5962365ad431e",
    "line" : 33,
    "diffHunk" : "@@ -1,1 +31,35 @@import static org.apache.kafka.streams.processor.internals.metrics.StreamsMetricsImpl.addInvocationRateAndCountToSensor;\n\npublic class ProcessorNodeMetrics {\n    private ProcessorNodeMetrics() {}\n"
  },
  {
    "id" : "9fbe069b-6874-427f-9eb8-e9fcc8e2ac73",
    "prId" : 7615,
    "prUrl" : "https://github.com/apache/kafka/pull/7615#pullrequestreview-311140178",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a020fafb-a236-4e6e-8284-d19faf5fc371",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "I found the `DESCRIPTION1/2` very confusing here.. could we just use one description? I think `DESCRIPTION2` is good enough.",
        "createdAt" : "2019-11-01T23:51:45Z",
        "updatedAt" : "2019-11-15T12:01:14Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      },
      {
        "id" : "0f026488-3ab0-4c43-a12a-a4e015675b15",
        "parentId" : "a020fafb-a236-4e6e-8284-d19faf5fc371",
        "authorId" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "body" : "Done",
        "createdAt" : "2019-11-04T15:57:38Z",
        "updatedAt" : "2019-11-15T12:01:14Z",
        "lastEditedBy" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "tags" : [
        ]
      }
    ],
    "commit" : "1bbee5afd4d93346c5bac0afe2c5962365ad431e",
    "line" : 67,
    "diffHunk" : "@@ -1,1 +65,69 @@\n    private static final String CREATE = \"create\";\n    private static final String CREATE_DESCRIPTION1 = \"processor nodes created\";\n    private static final String CREATE_DESCRIPTION2 = \"creations of processor nodes\";\n    private static final String CREATE_TOTAL_DESCRIPTION = TOTAL_DESCRIPTION + CREATE_DESCRIPTION1;"
  },
  {
    "id" : "8fdd4e4b-79b4-456d-947f-611df11a6aae",
    "prId" : 7615,
    "prUrl" : "https://github.com/apache/kafka/pull/7615#pullrequestreview-311140178",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "befe4afa-d705-4038-b8d3-35aa273297b6",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "We have the same const string in thread-level metrics as well, can we just import from ThreadMetrics?",
        "createdAt" : "2019-11-01T23:52:23Z",
        "updatedAt" : "2019-11-15T12:01:14Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      },
      {
        "id" : "2aef141d-aa39-45dd-83c3-92244f68303e",
        "parentId" : "befe4afa-d705-4038-b8d3-35aa273297b6",
        "authorId" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "body" : "I wanted to consolidate this strings in a follow-up PR towards the end to avoid merge conflicts.",
        "createdAt" : "2019-11-04T15:55:26Z",
        "updatedAt" : "2019-11-15T12:01:14Z",
        "lastEditedBy" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "tags" : [
        ]
      }
    ],
    "commit" : "1bbee5afd4d93346c5bac0afe2c5962365ad431e",
    "line" : 50,
    "diffHunk" : "@@ -1,1 +48,52 @@        RATE_DESCRIPTION_PREFIX + SUPPRESSION_EMIT_DESCRIPTION + RATE_DESCRIPTION_SUFFIX;\n\n    private static final String PROCESS = \"process\";\n    private static final String PROCESS_DESCRIPTION = \"calls to process\";\n    private static final String PROCESS_TOTAL_DESCRIPTION = TOTAL_DESCRIPTION + PROCESS_DESCRIPTION;"
  },
  {
    "id" : "b472fe76-d27f-4a96-bc8c-607e6a2439aa",
    "prId" : 7615,
    "prUrl" : "https://github.com/apache/kafka/pull/7615#pullrequestreview-312155592",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1aecd0cd-210b-4324-8e44-38132e9c039f",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "Can you remind me if in the old settings, only source nodes have `forward` metric or all nodes have this metric?",
        "createdAt" : "2019-11-01T23:55:34Z",
        "updatedAt" : "2019-11-15T12:01:14Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      },
      {
        "id" : "6621ae15-83d1-4875-9a0d-9797f4dd9352",
        "parentId" : "1aecd0cd-210b-4324-8e44-38132e9c039f",
        "authorId" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "body" : "All nodes have it, but it is only recorded on source nodes. Seems to be a bug in the old version.",
        "createdAt" : "2019-11-04T16:05:27Z",
        "updatedAt" : "2019-11-15T12:01:14Z",
        "lastEditedBy" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "tags" : [
        ]
      },
      {
        "id" : "b00910ca-e261-4eba-9737-4bc9f56a8ef6",
        "parentId" : "1aecd0cd-210b-4324-8e44-38132e9c039f",
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "Thanks.",
        "createdAt" : "2019-11-06T01:57:55Z",
        "updatedAt" : "2019-11-15T12:01:14Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      }
    ],
    "commit" : "1bbee5afd4d93346c5bac0afe2c5962365ad431e",
    "line" : 264,
    "diffHunk" : "@@ -1,1 +262,266 @@                                                                final String processorNodeId,\n                                                                final StreamsMetricsImpl streamsMetrics) {\n        if (streamsMetrics.version() == Version.FROM_0100_TO_24) {\n            return forwardSensor(threadId, taskId, processorNodeId, streamsMetrics);\n        }"
  },
  {
    "id" : "2a868b5c-919b-40c9-a6c3-b779db05f5ac",
    "prId" : 7615,
    "prUrl" : "https://github.com/apache/kafka/pull/7615#pullrequestreview-311140178",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7164f5e5-c69a-4b6e-bb77-7e32adc9043b",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "It seems the caller `droppedRecordsSensorOrLateRecordDropSensor` already check the version so that when it was called it should never be an empty sensor?",
        "createdAt" : "2019-11-01T23:56:48Z",
        "updatedAt" : "2019-11-15T12:01:14Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      },
      {
        "id" : "b8455578-0de5-4487-8b15-13abb9e02854",
        "parentId" : "7164f5e5-c69a-4b6e-bb77-7e32adc9043b",
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "I'm fine with adding the check here just to be future-proof, but it's just a bit inconsistent with others like `forwardSensor` above do not make this check since its caller always check that already. So I'm not sure if you are intentionally make the check in this lower-level function call compared with others.",
        "createdAt" : "2019-11-01T23:57:53Z",
        "updatedAt" : "2019-11-15T12:01:14Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      },
      {
        "id" : "3a228d4e-6d66-468b-9319-f83e1754d9eb",
        "parentId" : "7164f5e5-c69a-4b6e-bb77-7e32adc9043b",
        "authorId" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "body" : "Thank you for pointing this out. I thought I removed those empty sensors. IMO, we do not need to be future proof here since this method is doomed to be removed.",
        "createdAt" : "2019-11-04T16:04:11Z",
        "updatedAt" : "2019-11-15T12:01:14Z",
        "lastEditedBy" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "tags" : [
        ]
      }
    ],
    "commit" : "1bbee5afd4d93346c5bac0afe2c5962365ad431e",
    "line" : 245,
    "diffHunk" : "@@ -1,1 +243,247 @@    }\n\n    public static Sensor lateRecordDropSensor(final String threadId,\n                                              final String taskId,\n                                              final String processorNodeId,"
  },
  {
    "id" : "b9db2d21-abff-4501-9e28-7d413d831027",
    "prId" : 7615,
    "prUrl" : "https://github.com/apache/kafka/pull/7615#pullrequestreview-311140178",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "76c7e2c2-aac5-41e5-9fff-377bc4ef161e",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "Not a comment: I thought in old version, the create / destroy are at the task-level right, but seems they are on processor-node level? If that's indeed the case could you update the KIP wiki on the removed section as well?",
        "createdAt" : "2019-11-02T00:09:30Z",
        "updatedAt" : "2019-11-15T12:01:14Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      },
      {
        "id" : "908528ee-110e-4171-a7a5-b228ec1eb508",
        "parentId" : "76c7e2c2-aac5-41e5-9fff-377bc4ef161e",
        "authorId" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "body" : "Yes, that is correct. I updated the KIP.",
        "createdAt" : "2019-11-04T15:59:52Z",
        "updatedAt" : "2019-11-15T12:01:14Z",
        "lastEditedBy" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "tags" : [
        ]
      }
    ],
    "commit" : "1bbee5afd4d93346c5bac0afe2c5962365ad431e",
    "line" : 183,
    "diffHunk" : "@@ -1,1 +181,185 @@                                      final String processorNodeId,\n                                      final StreamsMetricsImpl streamsMetrics) {\n        if (streamsMetrics.version() == Version.FROM_0100_TO_24) {\n            return throughputAndLatencySensorWithParent(\n                threadId,"
  },
  {
    "id" : "e3174782-6ebe-4678-b3e1-a876f9c95471",
    "prId" : 8254,
    "prUrl" : "https://github.com/apache/kafka/pull/8254#pullrequestreview-392412293",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3a197809-544c-49f7-b927-fdf6d83c42eb",
        "parentId" : null,
        "authorId" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "body" : "req: Please add a unit test in `ProcessorNodeMetricsTest`.",
        "createdAt" : "2020-04-07T09:51:39Z",
        "updatedAt" : "2020-05-12T18:10:57Z",
        "lastEditedBy" : "b7cbfdaf-f3e2-4130-8254-501ace9562ac",
        "tags" : [
        ]
      },
      {
        "id" : "a5cd61bf-7fb8-4ad8-889a-9828cb1b15da",
        "parentId" : "3a197809-544c-49f7-b927-fdf6d83c42eb",
        "authorId" : "32d43f1c-0232-4c2f-9548-9c3dfd6f181a",
        "body" : "Done.",
        "createdAt" : "2020-04-13T20:23:30Z",
        "updatedAt" : "2020-05-12T18:10:57Z",
        "lastEditedBy" : "32d43f1c-0232-4c2f-9548-9c3dfd6f181a",
        "tags" : [
        ]
      }
    ],
    "commit" : "2a3d93dbcd9324ad3a4393541a86258df61722de",
    "line" : 32,
    "diffHunk" : "@@ -1,1 +130,134 @@        );\n    }\n\n    public static Sensor processSensor(final String threadId,\n                                       final String taskId,"
  }
]