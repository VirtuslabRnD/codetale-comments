[
  {
    "id" : "86d356b9-3561-48e4-bd9d-f8f67a499ca8",
    "prId" : 5094,
    "prUrl" : "https://github.com/root-project/root/pull/5094#pullrequestreview-431842028",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ba9e7885-29f5-41e0-b8ba-fe9d455e0a08",
        "parentId" : null,
        "authorId" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "body" : "What happens in the follow scenario:\r\n```\r\n(1) Process A starts and build a module and thus creates a .pcm.lock\r\n(2) Process A is put to sleep (and/or is very very slow)\r\n(3) some other pcm is created fully (and have names such it is early in the directory iteration).\r\n(4) Process B starts and try to write the index and gives ups\r\n(5) Process B finishes\r\n(6) Process A wakes ups and finish write the module.idx.\r\n```\r\nAre the extra pcm creates in step (3) included in the module.idx (create by Process A)",
        "createdAt" : "2020-06-16T16:24:12Z",
        "updatedAt" : "2020-06-16T16:40:48Z",
        "lastEditedBy" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "tags" : [
        ]
      },
      {
        "id" : "04c1fc0e-891d-413a-9e4d-ed08160d8531",
        "parentId" : "ba9e7885-29f5-41e0-b8ba-fe9d455e0a08",
        "authorId" : "6f6f52c8-bace-4788-98aa-f12fb2560025",
        "body" : "We will not add it in the index probably.\r\n\r\nNote that this is pre-existing llvm code and the ROOT GMI does not actually use it. It provides a table with ExternalIDs",
        "createdAt" : "2020-06-16T16:33:55Z",
        "updatedAt" : "2020-06-16T16:40:48Z",
        "lastEditedBy" : "6f6f52c8-bace-4788-98aa-f12fb2560025",
        "tags" : [
        ]
      },
      {
        "id" : "fc367f4f-5bcc-473c-89bf-443970b52ebd",
        "parentId" : "ba9e7885-29f5-41e0-b8ba-fe9d455e0a08",
        "authorId" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "body" : "> We will not add it in the index probably.\r\n\r\nI see.  Then the comment is not appropriate for our use case [And the result is (silently) sub-optimal, isn't it?]",
        "createdAt" : "2020-06-16T18:59:26Z",
        "updatedAt" : "2020-06-16T18:59:26Z",
        "lastEditedBy" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "tags" : [
        ]
      },
      {
        "id" : "50dd04e6-5f93-40f9-9236-5ecff70f52f7",
        "parentId" : "ba9e7885-29f5-41e0-b8ba-fe9d455e0a08",
        "authorId" : "6f6f52c8-bace-4788-98aa-f12fb2560025",
        "body" : "I agree. Letâ€™s see if this will improve when we upgrade llvm. ",
        "createdAt" : "2020-06-16T19:51:59Z",
        "updatedAt" : "2020-06-16T19:51:59Z",
        "lastEditedBy" : "6f6f52c8-bace-4788-98aa-f12fb2560025",
        "tags" : [
        ]
      }
    ],
    "commit" : "6c26e5fcab63b441b8308a2612e0ff70651e5225",
    "line" : 124,
    "diffHunk" : "@@ -1,1 +894,898 @@        // in the process of rebuilding a module. They'll rebuild the index\n        // at the end of that translation unit, so we don't have to.\n        if (llvm::sys::path::extension(D->path()) == \".pcm.lock\")\n          return EC_Building;\n"
  }
]