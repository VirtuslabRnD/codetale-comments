[
  {
    "id" : "dacb8331-f768-4a88-bce1-bc92e29617e4",
    "prId" : 3216,
    "prUrl" : "https://github.com/root-project/root/pull/3216#pullrequestreview-192670282",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "df254b69-3891-4304-b511-f8681fe2482e",
        "parentId" : null,
        "authorId" : "09b7e073-cbeb-42e8-aa22-8b1468de56ae",
        "body" : "Would `Setup()` be a more obvious place for setting up `fProxyReadFunc`?",
        "createdAt" : "2019-01-08T07:22:54Z",
        "updatedAt" : "2019-01-18T01:49:15Z",
        "lastEditedBy" : "09b7e073-cbeb-42e8-aa22-8b1468de56ae",
        "tags" : [
        ]
      },
      {
        "id" : "dd5a0b29-e94f-425d-b38c-d1e6f7e21989",
        "parentId" : "df254b69-3891-4304-b511-f8681fe2482e",
        "authorId" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "body" : "Maybe but it is not obvious ...if by Setup you mean moving to TBranchProsy then actually no because Read is an inline function so for other client of Read having read itself calls a function pointer would be pessimissation.\r\n\r\nIf you mean 'the' routine that setups the TTreeReaderValues ... well at the moment there is not a clear one (NotifyNewTree is not always called as far as I can tell).\r\n\r\nSo maybe at a later date ...",
        "createdAt" : "2019-01-13T01:02:04Z",
        "updatedAt" : "2019-01-18T01:49:15Z",
        "lastEditedBy" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "tags" : [
        ]
      },
      {
        "id" : "7555c278-d10a-4f05-95fa-9fb41037d707",
        "parentId" : "df254b69-3891-4304-b511-f8681fe2482e",
        "authorId" : "a66b5f61-1206-4ddd-b280-befb0005276f",
        "body" : "If the `EReadType` starts from 0, and increases one by one, you could create a table of pointers and replace this switch with a table lookup, which would probably be faster.",
        "createdAt" : "2019-01-14T14:22:34Z",
        "updatedAt" : "2019-01-18T01:49:16Z",
        "lastEditedBy" : "a66b5f61-1206-4ddd-b280-befb0005276f",
        "tags" : [
        ]
      },
      {
        "id" : "a309055f-f087-42b9-b64e-1512ea9903e3",
        "parentId" : "df254b69-3891-4304-b511-f8681fe2482e",
        "authorId" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "body" : "The execution of this code is 'rare' (i.e. only on the first entry of each file the TTreeReaderValue sees).   So I am not sure the change is worth it.",
        "createdAt" : "2019-01-15T14:25:29Z",
        "updatedAt" : "2019-01-18T01:49:16Z",
        "lastEditedBy" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "tags" : [
        ]
      }
    ],
    "commit" : "6283268671b82aac87b50dfedcb684160f0d09aa",
    "line" : 38,
    "diffHunk" : "@@ -1,1 +160,164 @@      if (fProxy) readtype = fProxy->GetReadType();\n\n      switch (readtype) {\n         case EReadType::kNoDirector:\n            fProxyReadFunc = &TTreeReaderValueBase::ProxyReadTemplate<&TBranchPoxy::ReadNoDirector>;"
  },
  {
    "id" : "8dcfec27-2d45-491e-bb11-b60838f9677a",
    "prId" : 3216,
    "prUrl" : "https://github.com/root-project/root/pull/3216#pullrequestreview-191956991",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "448788a0-23fa-4a03-95c7-89908ad773f3",
        "parentId" : null,
        "authorId" : "09b7e073-cbeb-42e8-aa22-8b1468de56ae",
        "body" : "Could you add a comment in which cases this `if` block is not executed, i.e. in which cases `if (fProxy->Read()) {` below is hit? The code reads as if this if is guarding a failure to set up the proxy, and if it fails, we call `if (fProxy->Read()) {`.",
        "createdAt" : "2019-01-08T07:27:12Z",
        "updatedAt" : "2019-01-18T01:49:15Z",
        "lastEditedBy" : "09b7e073-cbeb-42e8-aa22-8b1468de56ae",
        "tags" : [
        ]
      },
      {
        "id" : "e6b8802a-df71-41e8-b6a5-b62dcdca5a71",
        "parentId" : "448788a0-23fa-4a03-95c7-89908ad773f3",
        "authorId" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "body" : "humm ... it actually looks like I forgot to remove that 'now-unrecheable' code anyway .... ",
        "createdAt" : "2019-01-08T17:15:14Z",
        "updatedAt" : "2019-01-18T01:49:15Z",
        "lastEditedBy" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "tags" : [
        ]
      },
      {
        "id" : "da7998d6-247a-4b9b-b0da-0f632ff3a5be",
        "parentId" : "448788a0-23fa-4a03-95c7-89908ad773f3",
        "authorId" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "body" : "it is there to avoid duplicating the error handling (error printing).",
        "createdAt" : "2019-01-13T01:02:29Z",
        "updatedAt" : "2019-01-18T01:49:16Z",
        "lastEditedBy" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "tags" : [
        ]
      }
    ],
    "commit" : "6283268671b82aac87b50dfedcb684160f0d09aa",
    "line" : 74,
    "diffHunk" : "@@ -1,1 +196,200 @@      }\n      return (this->*fProxyReadFunc)();\n   }\n\n   // If somehow the Setup fails call the original Read to"
  },
  {
    "id" : "1151b74a-7187-4e57-8a0f-97d48e10a523",
    "prId" : 3216,
    "prUrl" : "https://github.com/root-project/root/pull/3216#pullrequestreview-190348456",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "dbe2ba67-bea1-41f6-a696-2c94e5a34b62",
        "parentId" : null,
        "authorId" : "09b7e073-cbeb-42e8-aa22-8b1468de56ae",
        "body" : "Could you add a comment on why switching the tree requires resetting the read function? That's very much not obvious to me.",
        "createdAt" : "2019-01-08T07:28:14Z",
        "updatedAt" : "2019-01-18T01:49:15Z",
        "lastEditedBy" : "09b7e073-cbeb-42e8-aa22-8b1468de56ae",
        "tags" : [
        ]
      },
      {
        "id" : "93cb90c3-8aab-4e1f-bae2-d6bcddf7aa1a",
        "parentId" : "dbe2ba67-bea1-41f6-a696-2c94e5a34b62",
        "authorId" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "body" : "Will add a comment along the line of 'new TTree might have a different structure and features ...'",
        "createdAt" : "2019-01-08T17:10:51Z",
        "updatedAt" : "2019-01-18T01:49:15Z",
        "lastEditedBy" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "tags" : [
        ]
      }
    ],
    "commit" : "6283268671b82aac87b50dfedcb684160f0d09aa",
    "line" : 89,
    "diffHunk" : "@@ -1,1 +225,229 @@   // Since the TTree structure might have change, let's make sure we\n   // use the right reading function.\n   fProxyReadFunc = &TTreeReaderValueBase::ProxyReadDefaultImpl;\n\n   if (!fHaveLeaf || !newTree) {"
  },
  {
    "id" : "4f02859d-6d04-4b67-a018-e1edef518cc2",
    "prId" : 3216,
    "prUrl" : "https://github.com/root-project/root/pull/3216#pullrequestreview-192171430",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f69c82d2-f892-4de5-951b-d8bd31c9af57",
        "parentId" : null,
        "authorId" : "a66b5f61-1206-4ddd-b280-befb0005276f",
        "body" : "`return (fReadStatus = (fProxy->*Func)() ? kReadSuccess : kReadError);`?",
        "createdAt" : "2019-01-14T14:18:11Z",
        "updatedAt" : "2019-01-18T01:49:16Z",
        "lastEditedBy" : "a66b5f61-1206-4ddd-b280-befb0005276f",
        "tags" : [
        ]
      }
    ],
    "commit" : "6283268671b82aac87b50dfedcb684160f0d09aa",
    "line" : 23,
    "diffHunk" : "@@ -1,1 +146,150 @@      fReadStatus = kReadError;\n   }\n   return fReadStatus;\n}\n"
  }
]