[
  {
    "id" : "554eb865-1d8d-4e3a-bccb-1770cdef087b",
    "prId" : 1120,
    "prUrl" : "https://github.com/root-project/root/pull/1120#pullrequestreview-66757128",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b733fbf3-0f54-4539-be26-da94bc6ee12b",
        "parentId" : null,
        "authorId" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "body" : "I would expect `auto &rColl` here, how does this update the actual final result?",
        "createdAt" : "2017-10-03T12:13:27Z",
        "updatedAt" : "2017-10-03T13:34:27Z",
        "lastEditedBy" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "tags" : [
        ]
      },
      {
        "id" : "43e047b2-5268-4473-a5f4-94ed83d1aa60",
        "parentId" : "b733fbf3-0f54-4539-be26-da94bc6ee12b",
        "authorId" : "28bf1eea-b1ed-4971-b001-9f6e3a5ec44f",
        "body" : "Good comment. We could use a reference to optimise a bit, but fColls is a vector<shared_ptr<COLL>>, i.e. the way in which we access different slots.\r\n",
        "createdAt" : "2017-10-03T12:24:50Z",
        "updatedAt" : "2017-10-03T13:34:27Z",
        "lastEditedBy" : "28bf1eea-b1ed-4971-b001-9f6e3a5ec44f",
        "tags" : [
        ]
      },
      {
        "id" : "18c8f6d8-6bd9-499d-b3a6-48f05a727207",
        "parentId" : "b733fbf3-0f54-4539-be26-da94bc6ee12b",
        "authorId" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "body" : "ah I forgot that we have `vec<shared_ptr<vec<T>>>` instead of `vec<vec<T>>`.\r\nthis is done to avoid a last copy from `fColls[0]` to the actual result object: we already make `fColls[0]` the actual result object.\r\n\r\nI think with little effort we could actually have `vec<vec<T>>` and then do a `std::swap` between the result vector and `fColls[0]`, i'll write it down as a note for the future",
        "createdAt" : "2017-10-03T12:30:28Z",
        "updatedAt" : "2017-10-03T13:34:27Z",
        "lastEditedBy" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "tags" : [
        ]
      },
      {
        "id" : "0f7b14aa-5743-40c5-b6f3-db8434d7fd5b",
        "parentId" : "b733fbf3-0f54-4539-be26-da94bc6ee12b",
        "authorId" : "28bf1eea-b1ed-4971-b001-9f6e3a5ec44f",
        "body" : "All performance optimisations count. In this case, I think we do not have extra copies but I may be mistaken. With N slots, the slots from 1 to N-1 are folded into slot 0 and that one is the one passed by reference in the constructor of the helper.",
        "createdAt" : "2017-10-03T12:47:19Z",
        "updatedAt" : "2017-10-03T13:34:27Z",
        "lastEditedBy" : "28bf1eea-b1ed-4971-b001-9f6e3a5ec44f",
        "tags" : [
        ]
      },
      {
        "id" : "00ec5787-a2cb-4fec-af3d-8755a07fd128",
        "parentId" : "b733fbf3-0f54-4539-be26-da94bc6ee12b",
        "authorId" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "body" : "I agree we are not making more copies than necessary, _maybe_ `vec<vec<T>>` instead of `vec<shared_ptr<vec<T>>>` could help with less impactful things (inlining, or when a CPU loads `TakeHelper` it already loads the vectors in the same cache line and doesn't have to go through a shared_ptr, things like that).",
        "createdAt" : "2017-10-03T13:01:46Z",
        "updatedAt" : "2017-10-03T13:34:27Z",
        "lastEditedBy" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "tags" : [
        ]
      },
      {
        "id" : "ac90dc83-6ae1-4516-aae2-0ca7ad7a2cbe",
        "parentId" : "b733fbf3-0f54-4539-be26-da94bc6ee12b",
        "authorId" : "28bf1eea-b1ed-4971-b001-9f6e3a5ec44f",
        "body" : "fair enough.",
        "createdAt" : "2017-10-03T13:33:50Z",
        "updatedAt" : "2017-10-03T13:34:27Z",
        "lastEditedBy" : "28bf1eea-b1ed-4971-b001-9f6e3a5ec44f",
        "tags" : [
        ]
      }
    ],
    "commit" : "49a6a8b0bcf9f509bb31a010feda1ea4d71a01ff",
    "line" : 84,
    "diffHunk" : "@@ -1,1 +319,323 @@      for (auto &coll : fColls)\n         totSize += coll->size();\n      auto rColl = fColls[0];\n      rColl->reserve(totSize);\n      for (unsigned int i = 1; i < fColls.size(); ++i) {"
  },
  {
    "id" : "51e95975-cf42-4c84-94a0-f65865751ccb",
    "prId" : 1687,
    "prUrl" : "https://github.com/root-project/root/pull/1687#pullrequestreview-100553736",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f7b6fe6c-ccba-4dc2-843e-c403f5f8031f",
        "parentId" : null,
        "authorId" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "body" : "damn. how did this ever work? :open_mouth: ",
        "createdAt" : "2018-02-28T17:02:54Z",
        "updatedAt" : "2018-03-09T23:23:34Z",
        "lastEditedBy" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "tags" : [
        ]
      },
      {
        "id" : "8fa751af-0527-4825-8507-8ded1c437afa",
        "parentId" : "f7b6fe6c-ccba-4dc2-843e-c403f5f8031f",
        "authorId" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "body" : "this must be backported to 6.12..",
        "createdAt" : "2018-02-28T17:46:49Z",
        "updatedAt" : "2018-03-09T23:23:34Z",
        "lastEditedBy" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "tags" : [
        ]
      },
      {
        "id" : "1923c9df-3540-453a-8761-c764d46c2970",
        "parentId" : "f7b6fe6c-ccba-4dc2-843e-c403f5f8031f",
        "authorId" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "body" : "fix was backported",
        "createdAt" : "2018-03-01T19:04:39Z",
        "updatedAt" : "2018-03-09T23:23:34Z",
        "lastEditedBy" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "tags" : [
        ]
      }
    ],
    "commit" : "8a391b931e5ee2ce32598093d07a787f4c016210",
    "line" : 66,
    "diffHunk" : "@@ -1,1 +659,663 @@      // hack to call TTree::Branch on all variadic template arguments\n      int expander[] = {\n         (SetBranchesHelper(fInputTree, *fOutputTree, fValidBranchNames[S], fBranchNames[S], &values), 0)..., 0};\n      (void)expander; // avoid unused variable warnings for older compilers such as gcc 4.9\n      fIsFirstEvent = false;"
  },
  {
    "id" : "60b6cd19-782b-496d-9aaa-0a97dd36bf39",
    "prId" : 1893,
    "prUrl" : "https://github.com/root-project/root/pull/1893#pullrequestreview-113877626",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "18e433d6-4199-4f7e-bb87-e21f4f44f48d",
        "parentId" : null,
        "authorId" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "body" : "`TLoopManager` keeps the whole graph alive, and without `TLoopManager` the event loop cannot run.\r\nWhat is the scenario in which the weak_ptr could be expired?",
        "createdAt" : "2018-04-19T22:51:28Z",
        "updatedAt" : "2018-04-20T07:46:38Z",
        "lastEditedBy" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "tags" : [
        ]
      },
      {
        "id" : "4135deba-d555-4976-a487-924b95c89dca",
        "parentId" : "18e433d6-4199-4f7e-bb87-e21f4f44f48d",
        "authorId" : "28bf1eea-b1ed-4971-b001-9f6e3a5ec44f",
        "body" : "if the whole chain goes out of scope, right?",
        "createdAt" : "2018-04-20T06:54:46Z",
        "updatedAt" : "2018-04-20T07:46:38Z",
        "lastEditedBy" : "28bf1eea-b1ed-4971-b001-9f6e3a5ec44f",
        "tags" : [
        ]
      },
      {
        "id" : "0f55e0ff-0d9f-4b5a-bc80-d73541ce6555",
        "parentId" : "18e433d6-4199-4f7e-bb87-e21f4f44f48d",
        "authorId" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "body" : "The chain only goes out of scope if the head node goes out of scope, in which case all hell breaks loose anyway",
        "createdAt" : "2018-04-20T07:43:42Z",
        "updatedAt" : "2018-04-20T07:46:38Z",
        "lastEditedBy" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "tags" : [
        ]
      }
    ],
    "commit" : "0a3a5ec7455a4bb4fc735097d8a23557cbe0cf94",
    "line" : 32,
    "diffHunk" : "@@ -1,1 +114,118 @@   void Finalize()\n   {\n      // We need the weak_ptr in order to avoid crashes at tear down\n      if (!fReturnEmptyReport && !fProxiedWPtr.expired())\n         fProxiedWPtr.lock()->Report(*fReport);"
  }
]