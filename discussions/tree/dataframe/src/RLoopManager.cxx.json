[
  {
    "id" : "0a7d3ef5-62ef-4ee2-bdd1-08b49dcebf3c",
    "prId" : 3001,
    "prUrl" : "https://github.com/root-project/root/pull/3001#pullrequestreview-176392150",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "43f3dea0-b099-4b8a-9977-7533cf962417",
        "parentId" : null,
        "authorId" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "body" : "Note that LoadTree is legal on a TTree and you may actually want to call it there too in case some of the friend trees are TChains.",
        "createdAt" : "2018-11-19T16:45:56Z",
        "updatedAt" : "2018-11-19T16:45:57Z",
        "lastEditedBy" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "tags" : [
        ]
      }
    ],
    "commit" : "dfdcbb02770617c0b466d85579b21f7878cf6bee",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +117,121 @@void RLoopManager::RunTreeReader()\n{\n   if (fTree->IsA() == TClass::GetClass(\"TChain\")) {\n      // in case this is not the first event loop, we bring the chain back to the first tree\n      // to avoid warnings from TTreeReader"
  },
  {
    "id" : "4354ecc3-6d71-48e3-8358-713162e0f611",
    "prId" : 5207,
    "prUrl" : "https://github.com/root-project/root/pull/5207#pullrequestreview-382022967",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bfcd2400-5896-4307-82ab-d378c2b3f7a9",
        "parentId" : null,
        "authorId" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "body" : "Does this cleanup need to be done before throwing the exception or it is okay to not run it at all?",
        "createdAt" : "2020-03-24T16:39:14Z",
        "updatedAt" : "2020-03-26T13:51:00Z",
        "lastEditedBy" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "tags" : [
        ]
      },
      {
        "id" : "040a5669-452d-4ce5-9b33-f7add8185891",
        "parentId" : "bfcd2400-5896-4307-82ab-d378c2b3f7a9",
        "authorId" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "body" : "It's \"ok\" not to run it at all: no leaks or anything like that.\r\n\r\nWithout calling `CleanUpTask`, the computation graph is not cleared of (partially, wrongly) executed nodes, and the results are not \"finalized\" (e.g. partial results of different threads are not merged). With `CleanUpTask` called, the computation graph is cleared, and the results are finalized (but anyway wrong, because something went wrong during the event loop).\r\n\r\nI would recommend users throw away the dataframe altogether if an exception is thrown during the event loop (that's _if_ they catch the exception at all), so whether `CleanUpTask` is called or not does not matter.",
        "createdAt" : "2020-03-24T17:08:04Z",
        "updatedAt" : "2020-03-26T13:51:00Z",
        "lastEditedBy" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "tags" : [
        ]
      },
      {
        "id" : "9eba1fd8-e1ce-467a-a066-b5430a8d7562",
        "parentId" : "bfcd2400-5896-4307-82ab-d378c2b3f7a9",
        "authorId" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "body" : "I'm confusing `CleanUpTask` and `CleanUpNodes` a little bit in my answer above when I describe what `CleanUpTask` does, but since `CleanUpNodes` is also not executed, the answer mostly stands",
        "createdAt" : "2020-03-24T17:11:37Z",
        "updatedAt" : "2020-03-26T13:51:00Z",
        "lastEditedBy" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "tags" : [
        ]
      },
      {
        "id" : "8af10e93-1ff3-4668-8663-557862ad4793",
        "parentId" : "bfcd2400-5896-4307-82ab-d378c2b3f7a9",
        "authorId" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "body" : "Well -- cannot hurt to call `CleanUpTask` and might actually prevent tear-down issues in `SnapshotHelperMT`. Will fix :smile: Thanks for pointing this out",
        "createdAt" : "2020-03-24T17:15:43Z",
        "updatedAt" : "2020-03-26T13:51:00Z",
        "lastEditedBy" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "tags" : [
        ]
      },
      {
        "id" : "724eca8e-e5e7-4508-8cb7-2091765f58a7",
        "parentId" : "bfcd2400-5896-4307-82ab-d378c2b3f7a9",
        "authorId" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "body" : "@pcanal turns out this deserved a whole separate PR. It is now #5214 ",
        "createdAt" : "2020-03-24T18:35:07Z",
        "updatedAt" : "2020-03-26T13:51:00Z",
        "lastEditedBy" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "tags" : [
        ]
      },
      {
        "id" : "b0dcd1c0-d96a-449d-83d9-0d04942b026d",
        "parentId" : "bfcd2400-5896-4307-82ab-d378c2b3f7a9",
        "authorId" : "ec1903c5-44e7-4fb1-bee9-25de61836fba",
        "body" : "I take it that question is resolved now.",
        "createdAt" : "2020-03-26T08:17:51Z",
        "updatedAt" : "2020-03-26T13:51:00Z",
        "lastEditedBy" : "ec1903c5-44e7-4fb1-bee9-25de61836fba",
        "tags" : [
        ]
      },
      {
        "id" : "601605a1-9a9b-4e03-9632-dd3a1494d810",
        "parentId" : "bfcd2400-5896-4307-82ab-d378c2b3f7a9",
        "authorId" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "body" : "Yes, resolved by #5214 (just merged)",
        "createdAt" : "2020-03-26T13:46:39Z",
        "updatedAt" : "2020-03-26T13:51:00Z",
        "lastEditedBy" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "tags" : [
        ]
      }
    ],
    "commit" : "6779605e20986e515b4146c79dd6dd49130815d8",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +348,352 @@                               std::to_string(r.GetEntryStatus()));\n   }\n   CleanUpTask(0u);\n}\n"
  },
  {
    "id" : "5bbe1ecb-d880-4104-bbc0-2598caa276bd",
    "prId" : 5214,
    "prUrl" : "https://github.com/root-project/root/pull/5214#pullrequestreview-382034090",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "369231eb-1365-49e5-87cb-ac15a10a1bf6",
        "parentId" : null,
        "authorId" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "body" : "Another alternative could have been:\r\n```\r\n         CleanUpTask(slot);\r\n         // Error might throw in experiment frameworks like CMSSW\r\n         try { Error(\"RDataFrame::Run\",\"Event was loop interrupted\") }\r\n         catch( .... ) {}\r\n         throw;\r\n```\r\n\r\n```",
        "createdAt" : "2020-03-26T13:58:04Z",
        "updatedAt" : "2020-03-26T13:58:05Z",
        "lastEditedBy" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "tags" : [
        ]
      }
    ],
    "commit" : "9b29b8b6e86c98a14290d81e8f97a577a0e22342",
    "line" : 34,
    "diffHunk" : "@@ -1,1 +262,266 @@         // Error might throw in experiment frameworks like CMSSW\n         std::cerr << \"RDataFrame::Run: event was loop interrupted\\n\";\n         throw;\n      }\n      CleanUpTask(slot);"
  }
]