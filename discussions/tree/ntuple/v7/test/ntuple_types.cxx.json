[
  {
    "id" : "576b7ca8-09b4-499e-aaf8-f4e36ecb83f2",
    "prId" : 5689,
    "prUrl" : "https://github.com/root-project/root/pull/5689#pullrequestreview-417776036",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5d5b2f6d-4147-4be5-ba44-39ad55574e87",
        "parentId" : null,
        "authorId" : "6cd3c9bc-f261-444d-81ab-c00c917f2197",
        "body" : "Interesting!  So `ROOT::Internal::GetDemangledTypeName(typeid(CustomStruct))` returns a different string on Windows. Is this new behavior?  In any case, it will break RNTuple if left unhandled, so the test fails for good.  I need to look into it.  If it is urgent, we can comment the test and add a `TODO`.",
        "createdAt" : "2020-05-25T07:25:17Z",
        "updatedAt" : "2020-05-25T07:25:36Z",
        "lastEditedBy" : "6cd3c9bc-f261-444d-81ab-c00c917f2197",
        "tags" : [
        ]
      },
      {
        "id" : "94cbf648-3423-48bf-a606-e432590ede31",
        "parentId" : "5d5b2f6d-4147-4be5-ba44-39ad55574e87",
        "authorId" : "23a1739a-fdf1-4508-8ccf-74a4e80d9852",
        "body" : "The `R__ENABLE_BROKEN_WIN_TESTS` is there to run the broken tests. And obviously, the unmangled (undecorated) names are different on Windows than on Linux. But in this particular case, I don't know if this is a bug or a feature... Maybe @Axel-Naumann can have an idea? ",
        "createdAt" : "2020-05-25T07:41:26Z",
        "updatedAt" : "2020-05-25T07:41:27Z",
        "lastEditedBy" : "23a1739a-fdf1-4508-8ccf-74a4e80d9852",
        "tags" : [
        ]
      },
      {
        "id" : "3bcba456-0886-4a95-8e82-ecdb1c813041",
        "parentId" : "5d5b2f6d-4147-4be5-ba44-39ad55574e87",
        "authorId" : "09b7e073-cbeb-42e8-aa22-8b1468de56ae",
        "body" : "On Windows, `struct`s and `class`es can have different ABIs, so it might be intentional given that it's part of the mangling. Now - is that what *we* want? Maybe not, so it might be a good idea to fix `ROOT::Internal::GetDemangledTypeName`. Either way: if this gets merged, can I have a bug report such that we don't forget about this demangling issue?",
        "createdAt" : "2020-05-25T08:18:31Z",
        "updatedAt" : "2020-05-25T08:18:31Z",
        "lastEditedBy" : "09b7e073-cbeb-42e8-aa22-8b1468de56ae",
        "tags" : [
        ]
      },
      {
        "id" : "3dcf26ab-139d-42ea-acc3-b72c26a473bd",
        "parentId" : "5d5b2f6d-4147-4be5-ba44-39ad55574e87",
        "authorId" : "23a1739a-fdf1-4508-8ccf-74a4e80d9852",
        "body" : "OK, I'll open a bug report. There is also at least one more test (in roottest) where I had to change the ref file to match the correct demangled names... ",
        "createdAt" : "2020-05-25T08:40:03Z",
        "updatedAt" : "2020-05-25T08:40:03Z",
        "lastEditedBy" : "23a1739a-fdf1-4508-8ccf-74a4e80d9852",
        "tags" : [
        ]
      },
      {
        "id" : "cbaacba4-77d6-49f9-9793-ad20ebc69e26",
        "parentId" : "5d5b2f6d-4147-4be5-ba44-39ad55574e87",
        "authorId" : "23a1739a-fdf1-4508-8ccf-74a4e80d9852",
        "body" : "@jblomer @Axel-Naumann I have created the [Jira issue ROOT-10794](https://sft.its.cern.ch/jira/browse/ROOT-10794). Can I merge it, or do you wand to do it differently?",
        "createdAt" : "2020-05-25T13:17:43Z",
        "updatedAt" : "2020-05-25T13:17:44Z",
        "lastEditedBy" : "23a1739a-fdf1-4508-8ccf-74a4e80d9852",
        "tags" : [
        ]
      },
      {
        "id" : "429dc688-140c-4744-960c-82757e1bd770",
        "parentId" : "5d5b2f6d-4147-4be5-ba44-39ad55574e87",
        "authorId" : "6cd3c9bc-f261-444d-81ab-c00c917f2197",
        "body" : "Please go ahead and merge.  I'll follow up on the RNTuple side separately.",
        "createdAt" : "2020-05-25T14:03:35Z",
        "updatedAt" : "2020-05-25T14:03:35Z",
        "lastEditedBy" : "6cd3c9bc-f261-444d-81ab-c00c917f2197",
        "tags" : [
        ]
      },
      {
        "id" : "b114cd47-003c-4f9c-b58c-b60eb88b6218",
        "parentId" : "5d5b2f6d-4147-4be5-ba44-39ad55574e87",
        "authorId" : "23a1739a-fdf1-4508-8ccf-74a4e80d9852",
        "body" : "OK, thanks Jakob! Merging.",
        "createdAt" : "2020-05-25T15:22:28Z",
        "updatedAt" : "2020-05-25T15:22:28Z",
        "lastEditedBy" : "23a1739a-fdf1-4508-8ccf-74a4e80d9852",
        "tags" : [
        ]
      }
    ],
    "commit" : "c6e82d7639717857bd215da3ca924288c28a327b",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +16,20 @@   EXPECT_STREQ(\"std::vector<std::string>\", ROOT::Experimental::RField<std::vector<std::string>>::TypeName().c_str());\n#if defined(_MSC_VER) && !defined(R__ENABLE_BROKEN_WIN_TESTS)\n   EXPECT_STREQ(\"struct CustomStruct\", ROOT::Experimental::RField<CustomStruct>::TypeName().c_str());\n#else\n   EXPECT_STREQ(\"CustomStruct\", ROOT::Experimental::RField<CustomStruct>::TypeName().c_str());"
  }
]