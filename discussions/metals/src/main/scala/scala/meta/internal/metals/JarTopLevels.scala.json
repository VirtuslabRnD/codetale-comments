[
  {
    "id" : "d7e352e9-ead5-4942-b0c6-af4c2849cd91",
    "prId" : 2668,
    "prUrl" : "https://github.com/scalameta/metals/pull/2668#pullrequestreview-638231939",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "95950ee4-376d-4b18-ad94-b3f111e9308a",
        "parentId" : null,
        "authorId" : "84490516-a7af-4f7f-9947-360c279c4400",
        "body" : "Out of curiosity, why the change from the `TrieMap` to `List`? Normally I prefer to have a Map for this over a list of tuples unless there is a good reason not to.",
        "createdAt" : "2021-04-09T14:11:20Z",
        "updatedAt" : "2021-04-23T16:07:36Z",
        "lastEditedBy" : "84490516-a7af-4f7f-9947-360c279c4400",
        "tags" : [
        ]
      },
      {
        "id" : "999c2dd9-4157-448e-8ccf-94c446f2d2df",
        "parentId" : "95950ee4-376d-4b18-ad94-b3f111e9308a",
        "authorId" : "2df071f3-6c0f-4323-b87d-c872a042f228",
        "body" : "`scala.collection.concurrent.TrieMap` is too complex type for this method. It was used because `OnDemandSymbolIndex.toplevels` had this signature and there was this tricky method: https://github.com/scalameta/metals/blob/03704c17b5397bd8feb4771d0bedf9a6dfe0a660/mtags/src/main/scala-2/scala/meta/internal/mtags/OnDemandSymbolIndex.scala#L96-L104\r\n\r\nBut as `toplevels` signature was changed to `TrieMap[String, Set[AbsolutePath]]` it became inconvenient to use `addSourceJarTopLevels`  as they were so I changed this part and replaced `TrieMap` here on smth more suitable.\r\n\r\nIt might be `Map` but it anyway used only as a `List`.",
        "createdAt" : "2021-04-12T14:23:35Z",
        "updatedAt" : "2021-04-23T16:07:36Z",
        "lastEditedBy" : "2df071f3-6c0f-4323-b87d-c872a042f228",
        "tags" : [
        ]
      },
      {
        "id" : "32208241-052b-4386-a6d6-f468c2f681a1",
        "parentId" : "95950ee4-376d-4b18-ad94-b3f111e9308a",
        "authorId" : "84490516-a7af-4f7f-9947-360c279c4400",
        "body" : "Alright, sounds good and thanks for the explanation.",
        "createdAt" : "2021-04-17T14:36:04Z",
        "updatedAt" : "2021-04-23T16:07:37Z",
        "lastEditedBy" : "84490516-a7af-4f7f-9947-360c279c4400",
        "tags" : [
        ]
      }
    ],
    "commit" : "e3fcc251f9126b13a9372df15273d675aff8f745",
    "line" : 18,
    "diffHunk" : "@@ -1,1 +31,35 @@    try {\n      val fs = PlatformFileIO.newJarFileSystem(path, create = false)\n      val toplevels = List.newBuilder[(String, AbsolutePath)]\n      conn()\n        .query("
  },
  {
    "id" : "404a71a7-fba8-498b-a826-e895d53e187c",
    "prId" : 2668,
    "prUrl" : "https://github.com/scalameta/metals/pull/2668#pullrequestreview-632427148",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e03f0c66-ae3b-4773-89df-27cd9fcb6bfc",
        "parentId" : null,
        "authorId" : "84490516-a7af-4f7f-9947-360c279c4400",
        "body" : "Any reason to change from using a Map to a list? Typically I prefer Maps over List of tuples for this type of thing.",
        "createdAt" : "2021-04-09T14:33:59Z",
        "updatedAt" : "2021-04-23T16:07:36Z",
        "lastEditedBy" : "84490516-a7af-4f7f-9947-360c279c4400",
        "tags" : [
        ]
      }
    ],
    "commit" : "e3fcc251f9126b13a9372df15273d675aff8f745",
    "line" : 18,
    "diffHunk" : "@@ -1,1 +31,35 @@    try {\n      val fs = PlatformFileIO.newJarFileSystem(path, create = false)\n      val toplevels = List.newBuilder[(String, AbsolutePath)]\n      conn()\n        .query("
  },
  {
    "id" : "2eaa95cd-1c94-4aa4-9151-62d8862f51f1",
    "prId" : 534,
    "prUrl" : "https://github.com/scalameta/metals/pull/534#pullrequestreview-207160646",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "159780e8-9900-4ce2-bf24-7b5bdecd95c8",
        "parentId" : null,
        "authorId" : "cea3c370-4fa4-4787-a40c-c406eb22d8b2",
        "body" : "What happens for foreign key references in `toplevel_symbol`? Does h2 support cascade deletes?",
        "createdAt" : "2019-02-24T13:11:20Z",
        "updatedAt" : "2019-02-24T16:00:43Z",
        "lastEditedBy" : "cea3c370-4fa4-4787-a40c-c406eb22d8b2",
        "tags" : [
        ]
      },
      {
        "id" : "99eaafb2-679b-4cca-ba97-4cff452ec6ca",
        "parentId" : "159780e8-9900-4ce2-bf24-7b5bdecd95c8",
        "authorId" : "a5049718-95ac-4dee-a8cf-81785f3eed25",
        "body" : "H2 support cascade deletes, when the jar entry in indexex_jar is deleted, the entries in toplevel_symbol entries referencing that jar will go as well.",
        "createdAt" : "2019-02-24T15:10:39Z",
        "updatedAt" : "2019-02-24T16:00:43Z",
        "lastEditedBy" : "a5049718-95ac-4dee-a8cf-81785f3eed25",
        "tags" : [
        ]
      },
      {
        "id" : "23009c12-b6f2-4fc3-ac24-dd8f5d5ba656",
        "parentId" : "159780e8-9900-4ce2-bf24-7b5bdecd95c8",
        "authorId" : "d66a6438-cedf-4b6c-bfdf-ceff0a38786d",
        "body" : "@olafurpg see for reference https://github.com/scalameta/metals/pull/534/files#diff-d0c092f838650407c2e87cb728cd09baR11",
        "createdAt" : "2019-02-24T16:38:31Z",
        "updatedAt" : "2019-02-24T16:38:31Z",
        "lastEditedBy" : "d66a6438-cedf-4b6c-bfdf-ceff0a38786d",
        "tags" : [
        ]
      }
    ],
    "commit" : "68a865709d6bc7d432ff4ffaa2fe1eac07d7409a",
    "line" : 102,
    "diffHunk" : "@@ -1,1 +100,104 @@    val md5s = usedPaths.map(getMD5Digest).map(\"'\" + _ + \"'\").mkString(\",\")\n    conn().update {\n      s\"delete from indexed_jar where md5 not in ($md5s)\"\n    } { _ =>\n      ()"
  }
]