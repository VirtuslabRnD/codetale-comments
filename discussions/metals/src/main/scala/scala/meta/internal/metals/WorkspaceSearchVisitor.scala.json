[
  {
    "id" : "c96a3f01-6356-435f-8494-993304b63276",
    "prId" : 2863,
    "prUrl" : "https://github.com/scalameta/metals/pull/2863#pullrequestreview-678887815",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "59e2ef1b-6156-4bd4-908b-1337fced281f",
        "parentId" : null,
        "authorId" : "84490516-a7af-4f7f-9947-360c279c4400",
        "body" : "Just to make sure I understand this. In your example with:\r\n\r\n```\r\nio:netty.netty-all:4.0.43.Final - io.netty.util.collection.IntObjectMap#Entry\r\nio.netty.netty-common:4.1.17.Final - io.netty.util.collection.IntObjectMap#PrimitiveEntry\r\n```\r\nThis is to ensure that we are always getting the same one back right? But aren't these technically two different symbols? How come `index.definition(tpe)` was returning a random one if they are unique? I'm not super familiar with the GlobalSymbolIndex so I may just totally be missing something.",
        "createdAt" : "2021-06-08T12:03:03Z",
        "updatedAt" : "2021-06-08T12:03:53Z",
        "lastEditedBy" : "84490516-a7af-4f7f-9947-360c279c4400",
        "tags" : [
        ]
      },
      {
        "id" : "4c3ff1d2-188b-41bb-aa0f-9754338382ba",
        "parentId" : "59e2ef1b-6156-4bd4-908b-1337fced281f",
        "authorId" : "2df071f3-6c0f-4323-b87d-c872a042f228",
        "body" : "They are different but here `index.definitions` is performed only to find the location of a top-level class.\r\n\r\nIn this test  classpath search found these two class files wich has name that fit query:\r\n  - `io/netty/util/colletion/IntObjectMap$Entry.class`\r\n  - `io/netty/util/colletion/IntObjectMap$PrimitiveEntry.class`\r\n\r\nThen it calls `index.definition` to find toplevel symbols `io.netty.util.collection.IntObjectMap` to perform actual matching against semantic defitions extracted from source file.",
        "createdAt" : "2021-06-08T16:06:45Z",
        "updatedAt" : "2021-06-08T16:06:45Z",
        "lastEditedBy" : "2df071f3-6c0f-4323-b87d-c872a042f228",
        "tags" : [
        ]
      },
      {
        "id" : "5d2eb5c5-6d1e-4bf4-b3af-4b84a12873e8",
        "parentId" : "59e2ef1b-6156-4bd4-908b-1337fced281f",
        "authorId" : "84490516-a7af-4f7f-9947-360c279c4400",
        "body" : "Ahh ok, thanks for explaining üëçüèº ",
        "createdAt" : "2021-06-08T18:46:03Z",
        "updatedAt" : "2021-06-08T18:46:03Z",
        "lastEditedBy" : "84490516-a7af-4f7f-9947-360c279c4400",
        "tags" : [
        ]
      }
    ],
    "commit" : "ba2370599dca459eaca43b33c25c5e4b25295028",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +94,98 @@    } else forTpe\n\n    defs.sortBy(_.path.toURI.toString).headOption\n  }\n  override def shouldVisitPackage(pkg: String): Boolean = true"
  },
  {
    "id" : "313c404a-da19-42e3-bfd5-827e8b522a65",
    "prId" : 2863,
    "prUrl" : "https://github.com/scalameta/metals/pull/2863#pullrequestreview-678727659",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "121b315f-f9f0-4517-ba0e-84059d50eb67",
        "parentId" : null,
        "authorId" : "84490516-a7af-4f7f-9947-360c279c4400",
        "body" : "Does `forTpe` actually mean something here that I'm unaware of? Would it be more clear to just call this `symbolDefinitions` or something?",
        "createdAt" : "2021-06-08T12:03:45Z",
        "updatedAt" : "2021-06-08T12:04:06Z",
        "lastEditedBy" : "84490516-a7af-4f7f-9947-360c279c4400",
        "tags" : [
        ]
      },
      {
        "id" : "c15548e3-63a5-448c-a7ca-d3cac1d403da",
        "parentId" : "121b315f-f9f0-4517-ba0e-84059d50eb67",
        "authorId" : "2df071f3-6c0f-4323-b87d-c872a042f228",
        "body" : "It means that it tries to find a definition for typeSymbol.\r\nIf it's empty it also tries to find termSymbol.\r\nUnfortunately, there is no equivalent to `orElse` combinator for empty List so I had to extract it into val",
        "createdAt" : "2021-06-08T16:14:16Z",
        "updatedAt" : "2021-06-08T16:14:16Z",
        "lastEditedBy" : "2df071f3-6c0f-4323-b87d-c872a042f228",
        "tags" : [
        ]
      }
    ],
    "commit" : "ba2370599dca459eaca43b33c25c5e4b25295028",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +88,92 @@    val tpe = Symbol(Symbols.Global(pkg, Descriptor.Type(nme)))\n\n    val forTpe = index.definitions(tpe)\n    val defs = if (forTpe.isEmpty) {\n      val term = Symbol(Symbols.Global(pkg, Descriptor.Term(nme)))"
  }
]