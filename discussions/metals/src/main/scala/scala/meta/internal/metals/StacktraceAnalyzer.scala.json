[
  {
    "id" : "0a3c5631-63b0-404b-ba60-38e458c53cd9",
    "prId" : 2668,
    "prUrl" : "https://github.com/scalameta/metals/pull/2668#pullrequestreview-643457850",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b3cd7342-1e9e-432c-8b94-7ce40d11907a",
        "parentId" : null,
        "authorId" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "body" : "We should be able to get the build target from `DebugProxy` so that when stack trace is printed in console we can make sure the proper file is picked up. This probably require additional `definitionProvider.fromSymbol` that takes an Option[BuildTagetId], but maybe we can do a follow up issue about it? This should not be a big deal really",
        "createdAt" : "2021-04-22T11:43:56Z",
        "updatedAt" : "2021-04-23T16:07:37Z",
        "lastEditedBy" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "tags" : [
        ]
      },
      {
        "id" : "86d2d727-adac-4275-a3e0-37387304c1db",
        "parentId" : "b3cd7342-1e9e-432c-8b94-7ce40d11907a",
        "authorId" : "2df071f3-6c0f-4323-b87d-c872a042f228",
        "body" : "There is not enough data currently - only stacktrace as a string. I will mention it in the issue for step 2",
        "createdAt" : "2021-04-23T16:09:58Z",
        "updatedAt" : "2021-04-23T16:09:59Z",
        "lastEditedBy" : "2df071f3-6c0f-4323-b87d-c872a042f228",
        "tags" : [
        ]
      }
    ],
    "commit" : "e3fcc251f9126b13a9372df15273d675aff8f745",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +69,73 @@  def fileLocationFromLine(line: String): Option[l.Location] = {\n    def findLocationForSymbol(s: String): Option[Location] =\n      definitionProvider.fromSymbol(s, None).asScala.headOption\n\n    for {"
  },
  {
    "id" : "f6479ed7-9b50-4974-bba6-6758a7057874",
    "prId" : 1966,
    "prUrl" : "https://github.com/scalameta/metals/pull/1966#pullrequestreview-468697955",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0747d3e1-746f-4e44-89d1-1a2c07e952e3",
        "parentId" : null,
        "authorId" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "body" : "I don't think you can properly get symbol from stacktrace and the logic will always be flaky. Jumping to the line is enough. For example:\r\n```\r\nException in thread \"main\" java.lang.Exception\r\n\tat Main$.$anonfun$main$1(Main.scala:13)\r\n\tat Main$.$anonfun$main$1$adapted(Main.scala:10)\r\n\tat scala.collection.immutable.Range.foreach(Range.scala:190)\r\n\tat Main$.main(Main.scala:10)\r\n\tat Main.main(Main.scala)\r\n```\r\n\r\nIt's not possible to map the full symbol `Main$.$anonfun$main$1` to anything similar in sematicDB. We can only map a part of it, which will make the logic flaky. I would drop going to definition.",
        "createdAt" : "2020-08-14T16:33:47Z",
        "updatedAt" : "2020-08-20T09:03:33Z",
        "lastEditedBy" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "tags" : [
        ]
      },
      {
        "id" : "69346962-a85f-4865-8843-ac9e2b451680",
        "parentId" : "0747d3e1-746f-4e44-89d1-1a2c07e952e3",
        "authorId" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "body" : "Although we could do `toplevelFromLine` and just get the toplevel via:\r\n```scala\r\nprivate def getSymbolFromLine(line: String): String = {\r\n  val toplevel = line.substring(line.indexOf(\"at \") + 3, line.indexOf(\".\"))\r\n  val descriptor = if(toplevel.endsWith(\"$\")) List(Descriptor.Term) else List(Descriptor.Type)\r\n  BuildTargetClasses.symbolFromClassName(toplevel.stripSuffix(\"$\"), descriptor)\r\n}\r\n```\r\n\r\nWe might need to move the method from BuildTargetClasses if it makes sense. It's in the class, so some modification will be needed.",
        "createdAt" : "2020-08-17T17:39:11Z",
        "updatedAt" : "2020-08-20T09:03:33Z",
        "lastEditedBy" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "tags" : [
        ]
      },
      {
        "id" : "3d425c1d-734d-4803-88e2-5d371a8954c4",
        "parentId" : "0747d3e1-746f-4e44-89d1-1a2c07e952e3",
        "authorId" : "a9556b50-da77-420c-9fe7-08817ae53bff",
        "body" : "okay dropping",
        "createdAt" : "2020-08-17T17:58:31Z",
        "updatedAt" : "2020-08-20T09:03:33Z",
        "lastEditedBy" : "a9556b50-da77-420c-9fe7-08817ae53bff",
        "tags" : [
        ]
      }
    ],
    "commit" : "6f7e1db4a0dcdfe6522e0116b20085a2f3f04584",
    "line" : 138,
    "diffHunk" : "@@ -1,1 +136,140 @@\n  private def symbolFromLine(line: String): String = {\n    line.substring(line.indexOf(\"at \") + 3, line.indexOf(\"(\"))\n  }\n"
  }
]