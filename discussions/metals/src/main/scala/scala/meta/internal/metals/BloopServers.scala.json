[
  {
    "id" : "8a6ad2b3-f16d-4540-baab-d4573aa7c790",
    "prId" : 1677,
    "prUrl" : "https://github.com/scalameta/metals/pull/1677#pullrequestreview-404854023",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "029dd52f-5bc0-499f-bdf0-fa77b83b0fca",
        "parentId" : null,
        "authorId" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "body" : "This promise is used to determine whether the launcher is finished.",
        "createdAt" : "2020-04-29T17:17:04Z",
        "updatedAt" : "2020-05-04T13:57:13Z",
        "lastEditedBy" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "tags" : [
        ]
      },
      {
        "id" : "3a99589b-b1d8-471e-8146-fa08fbe71231",
        "parentId" : "029dd52f-5bc0-499f-bdf0-fa77b83b0fca",
        "authorId" : "a1d420d1-83d4-48b5-b245-772065f6633b",
        "body" : "then maybe it could be called: `launched` instead of `finished`?",
        "createdAt" : "2020-05-04T09:03:37Z",
        "updatedAt" : "2020-05-04T13:57:13Z",
        "lastEditedBy" : "a1d420d1-83d4-48b5-b245-772065f6633b",
        "tags" : [
        ]
      },
      {
        "id" : "eeda35b6-fa10-49c0-80e9-276deb13c217",
        "parentId" : "029dd52f-5bc0-499f-bdf0-fa77b83b0fca",
        "authorId" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "body" : "`finished` is updated when the launcher finishes and not when it launches, so I think this is better. ",
        "createdAt" : "2020-05-04T10:03:41Z",
        "updatedAt" : "2020-05-04T13:57:13Z",
        "lastEditedBy" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "tags" : [
        ]
      }
    ],
    "commit" : "38751291a84f683f8d8eb60ed8a73ce8657936c9",
    "line" : 24,
    "diffHunk" : "@@ -1,1 +99,103 @@      )\n\n    val finished = Promise[Unit]()\n    val job = ec.submit(new Runnable {\n      override def run(): Unit = {"
  },
  {
    "id" : "fcd8d81e-0981-495c-80ee-85e4c5a11da7",
    "prId" : 1004,
    "prUrl" : "https://github.com/scalameta/metals/pull/1004#pullrequestreview-304255065",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0b3bc5d1-1e15-4d3d-a1be-4a9069a6560c",
        "parentId" : null,
        "authorId" : "d66a6438-cedf-4b6c-bfdf-ceff0a38786d",
        "body" : "super tiny, but this can probably be a SAM\r\n\r\n```scala\r\nec.submit(_ => launcher.runLauncher(...))\r\n```",
        "createdAt" : "2019-10-20T08:23:14Z",
        "updatedAt" : "2019-10-21T15:12:38Z",
        "lastEditedBy" : "d66a6438-cedf-4b6c-bfdf-ceff0a38786d",
        "tags" : [
        ]
      },
      {
        "id" : "43437d95-418a-48d0-aafa-ed6156659420",
        "parentId" : "0b3bc5d1-1e15-4d3d-a1be-4a9069a6560c",
        "authorId" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "body" : "It would need to be something like:\r\n```scala\r\n    val runServer: Runnable = () =>\r\n      launcher.runLauncher(\r\n        BuildInfo.bloopVersion,\r\n        skipBspConnection = false,\r\n        Nil\r\n      )\r\n    val job = ec.submit(runServer)\r\n```\r\n\r\nI can change it, but doesn't seem like much of an improvement, because we need the explicit type there :/",
        "createdAt" : "2019-10-20T11:06:47Z",
        "updatedAt" : "2019-10-21T15:12:38Z",
        "lastEditedBy" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "tags" : [
        ]
      },
      {
        "id" : "e7320bfc-0173-48cb-b3e0-bf21bdec0620",
        "parentId" : "0b3bc5d1-1e15-4d3d-a1be-4a9069a6560c",
        "authorId" : "d66a6438-cedf-4b6c-bfdf-ceff0a38786d",
        "body" : "Ah, I recall @olafurpg had a similar issue, does it work if you do\r\n\r\n```scala\r\nval job = ec.submit[Unit](_ => launcher.runLauncher(\r\n  BuildInfo.bloopVersion,\r\n  skipBspConnection = false,\r\n  Nil\r\n))\r\n```\r\n?\r\n\r\nThe `Unit` annotation should help disambiguate `Runnable` from `Callable`.\r\n\r\nAnyway, it's a super tiny thing, sorry for digressing ^^ ",
        "createdAt" : "2019-10-20T11:12:59Z",
        "updatedAt" : "2019-10-21T15:12:38Z",
        "lastEditedBy" : "d66a6438-cedf-4b6c-bfdf-ceff0a38786d",
        "tags" : [
        ]
      },
      {
        "id" : "19c8e214-c0b3-4c9a-8bce-da624e5f75f1",
        "parentId" : "0b3bc5d1-1e15-4d3d-a1be-4a9069a6560c",
        "authorId" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "body" : "Doesn't work either, but thanks for the suggestion. I would love to have it simpler than what it currently is. It feels a bit too Java currently :smile:  \r\n\r\n",
        "createdAt" : "2019-10-20T11:19:38Z",
        "updatedAt" : "2019-10-21T15:12:38Z",
        "lastEditedBy" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "tags" : [
        ]
      },
      {
        "id" : "ce387291-36ba-4d06-b85e-7bf84e287373",
        "parentId" : "0b3bc5d1-1e15-4d3d-a1be-4a9069a6560c",
        "authorId" : "d66a6438-cedf-4b6c-bfdf-ceff0a38786d",
        "body" : "ahah, ok, I surrender. ",
        "createdAt" : "2019-10-20T11:45:56Z",
        "updatedAt" : "2019-10-21T15:12:38Z",
        "lastEditedBy" : "d66a6438-cedf-4b6c-bfdf-ceff0a38786d",
        "tags" : [
        ]
      }
    ],
    "commit" : "1cf9cd839582af566a3a23662339b476303b4c96",
    "line" : 103,
    "diffHunk" : "@@ -1,1 +52,56 @@      )\n\n    val job = ec.submit(new Runnable {\n      override def run(): Unit = {\n        launcher.runLauncher("
  },
  {
    "id" : "0b8bf995-e05e-4eec-8869-58776aa699e7",
    "prId" : 566,
    "prUrl" : "https://github.com/scalameta/metals/pull/566#pullrequestreview-214929594",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "be845f1e-fb61-40db-9af6-40a57d135522",
        "parentId" : null,
        "authorId" : "fd1e81aa-f1f7-46f0-84c3-a8d7faae9085",
        "body" : "Interesting, what is this useful for?",
        "createdAt" : "2019-03-14T09:23:31Z",
        "updatedAt" : "2019-03-15T09:14:14Z",
        "lastEditedBy" : "fd1e81aa-f1f7-46f0-84c3-a8d7faae9085",
        "tags" : [
        ]
      },
      {
        "id" : "38ca8f15-e5a9-4269-bec7-2bab88f46a1d",
        "parentId" : "be845f1e-fb61-40db-9af6-40a57d135522",
        "authorId" : "a5049718-95ac-4dee-a8cf-81785f3eed25",
        "body" : "The OS will allow you to reopen a closed socket within a specific timeframe if you set that flag. Depending on the OS it's either when you first open it, or when you reopen it. Pretty good explanation here - https://stackoverflow.com/questions/14388706/socket-options-so-reuseaddr-and-so-reuseport-how-do-they-differ-do-they-mean-t ",
        "createdAt" : "2019-03-14T09:39:23Z",
        "updatedAt" : "2019-03-15T09:14:14Z",
        "lastEditedBy" : "a5049718-95ac-4dee-a8cf-81785f3eed25",
        "tags" : [
        ]
      },
      {
        "id" : "2e2780b4-315b-4bab-b1c0-a2ffc2c894f5",
        "parentId" : "be845f1e-fb61-40db-9af6-40a57d135522",
        "authorId" : "a5049718-95ac-4dee-a8cf-81785f3eed25",
        "body" : "And sure, I can do a PR on the launcher, no problem.",
        "createdAt" : "2019-03-14T09:48:37Z",
        "updatedAt" : "2019-03-15T09:14:14Z",
        "lastEditedBy" : "a5049718-95ac-4dee-a8cf-81785f3eed25",
        "tags" : [
        ]
      },
      {
        "id" : "7fe554db-b9ed-4fbb-99bb-d46153a601cb",
        "parentId" : "be845f1e-fb61-40db-9af6-40a57d135522",
        "authorId" : "cea3c370-4fa4-4787-a40c-c406eb22d8b2",
        "body" : "My previous attempts to move to the Bloop launcher have so far failed to pass CI. I believe if we use the launcher as a library instead of shelling out to it then it will work better, and we could clean up a lot of hairy code in Metals.",
        "createdAt" : "2019-03-15T09:17:27Z",
        "updatedAt" : "2019-03-15T09:17:27Z",
        "lastEditedBy" : "cea3c370-4fa4-4787-a40c-c406eb22d8b2",
        "tags" : [
        ]
      }
    ],
    "commit" : "3239af5c9a8b0e7a11f46e719c810f3ef74cbdad",
    "line" : 35,
    "diffHunk" : "@@ -1,1 +90,94 @@  private def randomPort(host: String): Int = {\n    val s = new ServerSocket()\n    s.setReuseAddress(true)\n    s.bind(new InetSocketAddress(host, 0))\n    val port = s.getLocalPort"
  },
  {
    "id" : "db814912-bd3b-4a65-b433-07bc05a05b54",
    "prId" : 566,
    "prUrl" : "https://github.com/scalameta/metals/pull/566#pullrequestreview-214792305",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "22ff3c71-572b-4b79-a06f-1a3f8d674ce0",
        "parentId" : null,
        "authorId" : "cea3c370-4fa4-4787-a40c-c406eb22d8b2",
        "body" : "🙈 nice catch!",
        "createdAt" : "2019-03-14T22:23:24Z",
        "updatedAt" : "2019-03-15T09:15:25Z",
        "lastEditedBy" : "cea3c370-4fa4-4787-a40c-c406eb22d8b2",
        "tags" : [
        ]
      }
    ],
    "commit" : "3239af5c9a8b0e7a11f46e719c810f3ef74cbdad",
    "line" : 44,
    "diffHunk" : "@@ -1,1 +104,108 @@  private def callBSP(): Future[(BloopSocket, Cancelable)] = {\n    if (config.bloopProtocol.isNamedPipe) callNamedPipeBsp()\n    else if (config.bloopProtocol.isTcp) callTcpBsp()\n    else callUnixBsp()\n  }"
  },
  {
    "id" : "36f20e00-7f33-4bf1-8014-7eaff3cbe94d",
    "prId" : 359,
    "prUrl" : "https://github.com/scalameta/metals/pull/359#pullrequestreview-180143145",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4220b59a-586f-4d18-9a96-e14321f51d20",
        "parentId" : null,
        "authorId" : "cea3c370-4fa4-4787-a40c-c406eb22d8b2",
        "body" : "Great change 👍",
        "createdAt" : "2018-11-30T07:14:31Z",
        "updatedAt" : "2018-11-30T07:16:06Z",
        "lastEditedBy" : "cea3c370-4fa4-4787-a40c-c406eb22d8b2",
        "tags" : [
        ]
      }
    ],
    "commit" : "e0b4f84461956add7e6c74d022bcc2c2265b8b31",
    "line" : 23,
    "diffHunk" : "@@ -1,1 +224,228 @@      Cancelable(() => bspProcess.destroy())\n    } else {\n      scribe.info(s\"running embedded 'bloop ${args.mkString(\" \")}'\")\n      embedded.bloopJars match {\n        case Some(classloaders) =>"
  },
  {
    "id" : "17268074-f6f1-45be-b883-3355202b3595",
    "prId" : 359,
    "prUrl" : "https://github.com/scalameta/metals/pull/359#pullrequestreview-180286995",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "edf7743a-dfa9-445a-b4bb-2d3f43f076a9",
        "parentId" : null,
        "authorId" : "cea3c370-4fa4-4787-a40c-c406eb22d8b2",
        "body" : "This produce quite a lot of noise iirc, are you sure it should be enabled by default?",
        "createdAt" : "2018-11-30T07:15:23Z",
        "updatedAt" : "2018-11-30T07:16:06Z",
        "lastEditedBy" : "cea3c370-4fa4-4787-a40c-c406eb22d8b2",
        "tags" : [
        ]
      },
      {
        "id" : "93b260dd-914a-4396-9304-16eb0d0997e8",
        "parentId" : "edf7743a-dfa9-445a-b4bb-2d3f43f076a9",
        "authorId" : "cea3c370-4fa4-4787-a40c-c406eb22d8b2",
        "body" : "It it turns out to be too noisy we can introduce a `-Dmetals.verbose` property to control this behavior. Now in the early days I think it's a good idea to include this 👍 ",
        "createdAt" : "2018-11-30T09:28:16Z",
        "updatedAt" : "2018-11-30T09:28:16Z",
        "lastEditedBy" : "cea3c370-4fa4-4787-a40c-c406eb22d8b2",
        "tags" : [
        ]
      },
      {
        "id" : "752a8251-6481-490b-a528-ac0f6adba25f",
        "parentId" : "edf7743a-dfa9-445a-b4bb-2d3f43f076a9",
        "authorId" : "9021d27c-08e5-4833-859f-ae6a2ee53e81",
        "body" : "Agreed WRT to early days. Definitely think this would be better under a non-default flag... Once the user (dev) expectation is not likely \"show me all the logging\" haha",
        "createdAt" : "2018-11-30T14:26:29Z",
        "updatedAt" : "2018-11-30T14:26:30Z",
        "lastEditedBy" : "9021d27c-08e5-4833-859f-ae6a2ee53e81",
        "tags" : [
        ]
      }
    ],
    "commit" : "e0b4f84461956add7e6c74d022bcc2c2265b8b31",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +176,180 @@    val args = Array(\n      \"bsp\",\n      \"--verbose\",\n      \"--protocol\",\n      \"local\","
  },
  {
    "id" : "11a6ad02-e9f3-41ac-b2f0-8436e330f35e",
    "prId" : 337,
    "prUrl" : "https://github.com/scalameta/metals/pull/337#pullrequestreview-178077784",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f52d4e4e-07c5-4bdb-adc4-3151918aeecb",
        "parentId" : null,
        "authorId" : "d66a6438-cedf-4b6c-bfdf-ceff0a38786d",
        "body" : "Note that this causes the installed bloop client not to work anymore on the same project, because the newly written 1.1.0 JSON files are not compatible with the installed 1.0.0 client.\r\n\r\nI don't think this is a Metals concern, but I just wanted to highlight this scenario /cc @jvican ",
        "createdAt" : "2018-11-21T22:17:07Z",
        "updatedAt" : "2018-11-27T10:23:41Z",
        "lastEditedBy" : "d66a6438-cedf-4b6c-bfdf-ceff0a38786d",
        "tags" : [
        ]
      },
      {
        "id" : "5bd303a0-e3a7-4ec3-b248-ed37aefe56e3",
        "parentId" : "f52d4e4e-07c5-4bdb-adc4-3151918aeecb",
        "authorId" : "cea3c370-4fa4-4787-a40c-c406eb22d8b2",
        "body" : "That's a good point, maybe bloop v1.1 should be v2 instead?",
        "createdAt" : "2018-11-25T11:14:57Z",
        "updatedAt" : "2018-11-27T10:23:41Z",
        "lastEditedBy" : "cea3c370-4fa4-4787-a40c-c406eb22d8b2",
        "tags" : [
        ]
      }
    ],
    "commit" : "8ab78d5883e2e77a843cca1ea641084e6e4a2875",
    "line" : 33,
    "diffHunk" : "@@ -1,1 +31,35 @@ * Connects to a running bloop server instance if it is installed on the user\n * machine and has compatible version (+v1.1.0). Ignores the installed bloop\n * server instance if it is v1.0.0.\n *\n * Otherwise, if the user doesn't have bloop installed on the machine, uses"
  }
]