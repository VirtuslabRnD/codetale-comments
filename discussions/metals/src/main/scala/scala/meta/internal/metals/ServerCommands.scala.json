[
  {
    "id" : "f0a718a3-d4e8-4bbf-bca7-a7a2b0e4419c",
    "prId" : 2532,
    "prUrl" : "https://github.com/scalameta/metals/pull/2532#pullrequestreview-598404486",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "10df5060-8820-4167-9803-51eee5d7106d",
        "parentId" : null,
        "authorId" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "body" : "Why not jsut add nullable/optional fields to DebugUnresolvedMainClassParams  and DebugUnresolvedTestClassParams ?",
        "createdAt" : "2021-02-24T11:45:01Z",
        "updatedAt" : "2021-03-08T13:25:41Z",
        "lastEditedBy" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "tags" : [
        ]
      },
      {
        "id" : "8031d16b-2121-41e2-9143-f775e8222e74",
        "parentId" : "10df5060-8820-4167-9803-51eee5d7106d",
        "authorId" : "84490516-a7af-4f7f-9947-360c279c4400",
        "body" : "Yea true I'll try doing that.",
        "createdAt" : "2021-02-24T12:00:56Z",
        "updatedAt" : "2021-03-08T13:25:41Z",
        "lastEditedBy" : "84490516-a7af-4f7f-9947-360c279c4400",
        "tags" : [
        ]
      },
      {
        "id" : "380cd9ec-8a4e-47b6-b88a-eaa5dab4f5d4",
        "parentId" : "10df5060-8820-4167-9803-51eee5d7106d",
        "authorId" : "84490516-a7af-4f7f-9947-360c279c4400",
        "body" : "Alright, so I've been playing around with this a bit, and I'm getting pretty convinced that just adding some more `@Nullable` fields here isn't the answer. It adds way more complexity in trying to handle all of the various cases, and I'm finding it way easier to manage to just have another case class for it. Just to give a small example:\r\n\r\n### Current\r\n```\r\ncase class DebugUnresolvedTestClassParams(\r\n    testClass: String,\r\n    @Nullable buildTarget: String = null\r\n)\r\n```\r\n\r\n### Possible new\r\n```\r\ncase class DebugUnresolvedTestClassParams(\r\n    @Nullable testClass: String,\r\n\t@Nullable path: String,\r\n    @Nullable testType: String,\r\n    @Nullable buildTarget: String = null\r\n)\r\n```\r\nApart from not loving having every field nullable, you get into all sorts of interesting things that we have to handle server side. What if `testType` is set to `testTarget` and you are provided with a `testClass` that doesn't fit that target. What if for type you pass in `testTarget`, but then you pass in a `path` in one target and the `buildTarget` for another target. There are just so many possiblities that you end up making really strict rules on how they are all handled, but then you lose all that info since it's all contained in a class with all nullable fields. I think having a new class for the discover `DebugFullyUnresolvedParams` for this just makes it way cleaner on the server side. I'm open to maybe trying to figure this out more, but I'm not seeing the benefit of having to change the current functionality to account for the new nullables, and also account for all the crazy cases with the class having every field nullable vs just having a separate class for it. wdyt?",
        "createdAt" : "2021-02-25T09:07:28Z",
        "updatedAt" : "2021-03-08T13:25:41Z",
        "lastEditedBy" : "84490516-a7af-4f7f-9947-360c279c4400",
        "tags" : [
        ]
      },
      {
        "id" : "822b0e5f-f550-4fee-9615-6b799be0bcce",
        "parentId" : "10df5060-8820-4167-9803-51eee5d7106d",
        "authorId" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "body" : "It it all becomes much more complex because of the change then sure, I agree it might be beneficial to have a separate class. I just thought it might work better for the existing client implementations, but I haven't dug much into it.",
        "createdAt" : "2021-02-25T10:17:04Z",
        "updatedAt" : "2021-03-08T13:25:41Z",
        "lastEditedBy" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "tags" : [
        ]
      }
    ],
    "commit" : "23bedef101619ed619520c4b121ecae6c358d874",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +437,441 @@\ncase class DebugDiscoveryParams(\n    path: String,\n    runType: String,\n    @Nullable args: java.util.List[String] = null,"
  },
  {
    "id" : "91c3c8bb-e53f-42f4-b464-0dd465317e32",
    "prId" : 2532,
    "prUrl" : "https://github.com/scalameta/metals/pull/2532#pullrequestreview-604579776",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "aaab75ab-d721-4641-9c45-55ee1a659813",
        "parentId" : null,
        "authorId" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "body" : "I've been thinking about adding a Position here to be able to run a specific test based on the current cursor position. We could use slightly modified `ClassFinder` for that instead of semanticdb. It would also allow us not to ask for a specific main class, but just run the one the cursor is at. However, that probably doesn't make sense until we are able to run a single test case. Multiple main classes are not that common and usually it's one test per file. We should probably go through related feature requests after merging this and close them or comment about what is the current status.\r\n\r\n",
        "createdAt" : "2021-03-04T10:59:23Z",
        "updatedAt" : "2021-03-08T13:25:41Z",
        "lastEditedBy" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "tags" : [
        ]
      },
      {
        "id" : "4f0c3943-0636-4793-a1c8-5b4d43c594a7",
        "parentId" : "aaab75ab-d721-4641-9c45-55ee1a659813",
        "authorId" : "84490516-a7af-4f7f-9947-360c279c4400",
        "body" : "Yea for sure, I think once we can get this across the finish line, use it a bit, then we can start to fine tune what makes the most sense, and add more on top of it. That's my hope anyway.",
        "createdAt" : "2021-03-04T21:32:26Z",
        "updatedAt" : "2021-03-08T13:25:41Z",
        "lastEditedBy" : "84490516-a7af-4f7f-9947-360c279c4400",
        "tags" : [
        ]
      }
    ],
    "commit" : "23bedef101619ed619520c4b121ecae6c358d874",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +436,440 @@)\n\ncase class DebugDiscoveryParams(\n    path: String,\n    runType: String,"
  },
  {
    "id" : "a4cffea3-3b2a-46f1-aeb8-75b7ea7c7d8c",
    "prId" : 2075,
    "prUrl" : "https://github.com/scalameta/metals/pull/2075#pullrequestreview-490776585",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d0800e26-a85f-49a8-b084-f43986c2aa8d",
        "parentId" : null,
        "authorId" : "84490516-a7af-4f7f-9947-360c279c4400",
        "body" : "We actually had this just as a string before, when in reality this as an Array with a URI in the first position and a filename in the second position.",
        "createdAt" : "2020-09-17T16:21:06Z",
        "updatedAt" : "2020-09-17T19:56:13Z",
        "lastEditedBy" : "84490516-a7af-4f7f-9947-360c279c4400",
        "tags" : [
        ]
      }
    ],
    "commit" : "42aceb96ae53255c6f79a177b0a6944f072a9689",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +256,260 @@       |Note: requires 'metals/inputBox' capability from language client.\n       |\"\"\".stripMargin,\n    \"\"\"|[string[]], where the first is a directory location for the new file.\n       |The second and third positions correspond to the file name and file type to allow for quick\n       |creation of a file if all are present."
  },
  {
    "id" : "1c6c78e8-d733-4793-abbe-37b21d672a53",
    "prId" : 1339,
    "prUrl" : "https://github.com/scalameta/metals/pull/1339#pullrequestreview-354469673",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ed50631c-371d-4cc1-962b-efda65be6bbd",
        "parentId" : null,
        "authorId" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "body" : "We should be able to just pack it into Option? Or is it a gson limitation?",
        "createdAt" : "2020-02-05T11:34:41Z",
        "updatedAt" : "2020-02-06T14:07:14Z",
        "lastEditedBy" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "tags" : [
        ]
      },
      {
        "id" : "42cdedf1-6f4c-42bf-b6d5-16810afdcb8e",
        "parentId" : "ed50631c-371d-4cc1-962b-efda65be6bbd",
        "authorId" : "3c233382-62bf-4d89-9f62-2e9d82c7c7a0",
        "body" : "I just followed other params case class declaration, like `MetalsStatusParams`. I would guess, it's a lsp4j limitation, not sure. Maybe @olafurpg  can comment on this ?\r\nThen I do `Option(directory)`, yes.",
        "createdAt" : "2020-02-05T11:41:58Z",
        "updatedAt" : "2020-02-06T14:07:14Z",
        "lastEditedBy" : "3c233382-62bf-4d89-9f62-2e9d82c7c7a0",
        "tags" : [
        ]
      },
      {
        "id" : "b0f3ad03-990f-40ac-8736-d50cd36360f3",
        "parentId" : "ed50631c-371d-4cc1-962b-efda65be6bbd",
        "authorId" : "cea3c370-4fa4-4787-a40c-c406eb22d8b2",
        "body" : "We're using gson to serialize to JSON and I think you need custom gson adapters to support `Option[T]`",
        "createdAt" : "2020-02-06T14:01:56Z",
        "updatedAt" : "2020-02-06T14:07:14Z",
        "lastEditedBy" : "cea3c370-4fa4-4787-a40c-c406eb22d8b2",
        "tags" : [
        ]
      },
      {
        "id" : "2531fbd7-d205-4bc2-839d-d0c08a300f28",
        "parentId" : "ed50631c-371d-4cc1-962b-efda65be6bbd",
        "authorId" : "cea3c370-4fa4-4787-a40c-c406eb22d8b2",
        "body" : "The `@Nullable` annotation isn't required, but I used it to document field where I would have preferred to use `Option[T]`",
        "createdAt" : "2020-02-06T14:02:23Z",
        "updatedAt" : "2020-02-06T14:07:14Z",
        "lastEditedBy" : "cea3c370-4fa4-4787-a40c-c406eb22d8b2",
        "tags" : [
        ]
      }
    ],
    "commit" : "f1e1175d6c0f716c374b1bc575ac9a28a3290743",
    "line" : 42,
    "diffHunk" : "@@ -1,1 +223,227 @@\ncase class MetalsNewScalaFileParams(\n    @Nullable directory: String,\n    name: String,\n    kind: String"
  }
]