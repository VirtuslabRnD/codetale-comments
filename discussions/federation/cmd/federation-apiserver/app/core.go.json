[
  {
    "id" : "17af2409-94e4-43b8-b595-32b1c7ffc690",
    "prId" : 42225,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/42225#pullrequestreview-25051688",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5cd8383f-7477-402f-8c17-deed8df9af65",
        "parentId" : null,
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "are these having any side effects? Or why are they a func and not just vars?",
        "createdAt" : "2017-03-03T07:27:40Z",
        "updatedAt" : "2017-04-08T06:24:08Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "69e5748b-8df7-4843-9bd3-50f2370d0cfe",
        "parentId" : "5cd8383f-7477-402f-8c17-deed8df9af65",
        "authorId" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "body" : "no side effect. same as above",
        "createdAt" : "2017-03-03T19:34:34Z",
        "updatedAt" : "2017-04-08T06:24:08Z",
        "lastEditedBy" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "tags" : [
        ]
      }
    ],
    "commit" : "e2ed57d6b04a05e3ccef4c0c931e31a07fb42ceb",
    "line" : 61,
    "diffHunk" : "@@ -1,1 +72,76 @@\t}\n\teventsStorageFn := func() map[string]rest.Storage {\n\t\teventStore := eventstore.NewREST(optsGetter, uint64(s.EventTTL.Seconds()))\n\t\treturn map[string]rest.Storage{\n\t\t\t\"events\": eventStore,"
  },
  {
    "id" : "2b82a5cf-df75-4899-85f0-7e8e38ebb231",
    "prId" : 37039,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/37039#pullrequestreview-13352546",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "899dbe3f-7eeb-4875-a111-464686490f8d",
        "parentId" : null,
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "We generally have a convension that the alias is concatentation of last few parts of the path. So it should be \"configmapstorage\".\r\n\r\nSame in other places.",
        "createdAt" : "2016-12-15T11:15:13Z",
        "updatedAt" : "2017-01-12T15:24:15Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "b1ce2d56-68ea-4ad2-9ed8-fff639861511",
        "parentId" : "899dbe3f-7eeb-4875-a111-464686490f8d",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "Or alternatively, we can change the directory to \"store\" instead, but I think that option is worse.",
        "createdAt" : "2016-12-15T11:15:39Z",
        "updatedAt" : "2017-01-12T15:24:15Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "66971643-5364-48c8-850e-9922e04fa3dd",
        "parentId" : "899dbe3f-7eeb-4875-a111-464686490f8d",
        "authorId" : "f81960f6-a033-4403-bebf-c8ebb484e444",
        "body" : "Could I knock on PR that?  ",
        "createdAt" : "2016-12-15T19:43:34Z",
        "updatedAt" : "2017-01-12T15:24:15Z",
        "lastEditedBy" : "f81960f6-a033-4403-bebf-c8ebb484e444",
        "tags" : [
        ]
      },
      {
        "id" : "febc4f0a-a7c1-46a3-86f0-6d0ba574b6e1",
        "parentId" : "899dbe3f-7eeb-4875-a111-464686490f8d",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "Can you please open an issue to clear this up then?",
        "createdAt" : "2016-12-16T08:06:15Z",
        "updatedAt" : "2017-01-12T15:24:15Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "96573898-45ad-45d4-aa6a-e0dff386746a",
        "parentId" : "899dbe3f-7eeb-4875-a111-464686490f8d",
        "authorId" : "f81960f6-a033-4403-bebf-c8ebb484e444",
        "body" : "Done. https://github.com/kubernetes/kubernetes/issues/38874",
        "createdAt" : "2016-12-16T15:25:17Z",
        "updatedAt" : "2017-01-12T15:24:15Z",
        "lastEditedBy" : "f81960f6-a033-4403-bebf-c8ebb484e444",
        "tags" : [
        ]
      }
    ],
    "commit" : "fbc5323dad7ae37ec49bd4a10ad4aea3cd5e8a88",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +34,38 @@\t\"k8s.io/kubernetes/pkg/api/rest\"\n\t\"k8s.io/kubernetes/pkg/genericapiserver\"\n\tconfigmapstore \"k8s.io/kubernetes/pkg/registry/core/configmap/storage\"\n\teventstore \"k8s.io/kubernetes/pkg/registry/core/event/storage\"\n\tnamespacestore \"k8s.io/kubernetes/pkg/registry/core/namespace/storage\""
  },
  {
    "id" : "0f1c2f7b-fda0-47a6-aad8-b11a7e1394c6",
    "prId" : 30655,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cb638527-1bbf-45db-97ef-18d847181591",
        "parentId" : null,
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "I think this will break the swagger spec that federation puts out? Which may not be a concern?\n\nnote that the rest mapper is hard coded to get added to api.Scheme...\n",
        "createdAt" : "2016-08-15T23:27:50Z",
        "updatedAt" : "2016-08-16T04:11:49Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      },
      {
        "id" : "8e470e02-484e-4955-aba7-00f3ef1c8840",
        "parentId" : "cb638527-1bbf-45db-97ef-18d847181591",
        "authorId" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "body" : "> I think this will break the swagger spec that federation puts out? Which may not be a concern?\n\nfederation-apiserver was ending up importing pkg/api/install even before this change. Here is the dependency chain::\n\n```\nfederation/cmd/federation-apiserver/app/server.go\nfederation/cmd/federation-apiserver/app/options/options.go\npkg/genericapiserver/options/server_run_options.go\npkg/admission/types.go\npkg/client/clientset_generated/internalclientset/import_known_versions.go\npkg/api/install/install.go\n```\n\n> note that the rest mapper is hard coded to get added to api.Scheme...\n\nThe particular problem here is the registered package. Whichever install gets called first, calls registered.RegisterGroup() with its own groupMeta.\nLater, in pkg/master,  when registered.GroupOrDie() is called from InstallAPIGroups(), it returns the groupMeta which was registered first.\n\nI am planning to fix it by updating the install packages in all apis so that pkg/api and federation/apis/core/install pass different keys to register and then retrieve their respective groupMetas.\n",
        "createdAt" : "2016-08-15T23:52:51Z",
        "updatedAt" : "2016-08-16T04:11:49Z",
        "lastEditedBy" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "tags" : [
        ]
      },
      {
        "id" : "b084378e-1ab7-4d8c-bf43-3b1a333453b8",
        "parentId" : "cb638527-1bbf-45db-97ef-18d847181591",
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "wait for my PR https://github.com/kubernetes/kubernetes/pull/30565 before doing that. I'm OK with this as a temporary fix.\n",
        "createdAt" : "2016-08-16T00:03:28Z",
        "updatedAt" : "2016-08-16T04:11:49Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      },
      {
        "id" : "4084ff43-c205-4175-804d-b93df15d6c1b",
        "parentId" : "cb638527-1bbf-45db-97ef-18d847181591",
        "authorId" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "body" : "The best solution is to have different instances of registered, so that clientset has its own instance and each apiserver has its own. That way we will never have pkg/api and federation/apis/core/ installing their stuff in the same registered instance.\n\nIs that what you are doing in your PR? (it is tough to make out from the description).\nIf we do that, we dont need the change I talked about in my comment above.\n",
        "createdAt" : "2016-08-16T00:34:58Z",
        "updatedAt" : "2016-08-16T04:11:49Z",
        "lastEditedBy" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "tags" : [
        ]
      },
      {
        "id" : "64738440-f29f-48a4-9845-d50840773ae8",
        "parentId" : "cb638527-1bbf-45db-97ef-18d847181591",
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "yeah, my PR will make that possible. Right now, it isn't.\n",
        "createdAt" : "2016-08-16T00:45:53Z",
        "updatedAt" : "2016-08-16T04:11:49Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      },
      {
        "id" : "26e4c0b9-5bd9-47ba-9d4c-744683e0cdb5",
        "parentId" : "cb638527-1bbf-45db-97ef-18d847181591",
        "authorId" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "body" : "> I think this will break the swagger spec that federation puts out? Which may not be a concern?\n\nbtw, I just checked, while federation-apiserver imports pkg/api/install, the swagger spec for federation-apiserver does not include all api/v1 resources, only the ones registered in federation/apis/core/install.\n",
        "createdAt" : "2016-08-16T08:09:38Z",
        "updatedAt" : "2016-08-16T08:09:38Z",
        "lastEditedBy" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "tags" : [
        ]
      }
    ],
    "commit" : "217d2f57e9e3130876f00e0ab06ca2d0f097b458",
    "line" : 10,
    "diffHunk" : "@@ -1,1 +25,29 @@\t// federation/apis/core/install has only a subset of resources and hence if it gets registered first, then installation of v1 API fails in pkg/master.\n\t// TODO(nikhiljindal): Fix this by ensuring that pkg/api/install and federation/apis/core/install do not conflict with each other.\n\t_ \"k8s.io/kubernetes/pkg/api/install\"\n\n\t\"k8s.io/kubernetes/federation/apis/core\""
  }
]