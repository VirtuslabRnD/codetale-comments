[
  {
    "id" : "872461b5-dd25-455f-b307-d7797c43d5b9",
    "prId" : 44786,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/44786#pullrequestreview-40640377",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2840759f-d60a-4362-89cc-af254c432658",
        "parentId" : null,
        "authorId" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "body" : "Didnt we decide to keep system in the name?\r\n\"federation-system-scheduling-policy\" maybe?",
        "createdAt" : "2017-05-24T03:22:28Z",
        "updatedAt" : "2017-06-05T14:59:16Z",
        "lastEditedBy" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "tags" : [
        ]
      },
      {
        "id" : "da53f379-6e2c-4536-b671-ad8d92a9c3ff",
        "parentId" : "2840759f-d60a-4362-89cc-af254c432658",
        "authorId" : "03b5b049-f20a-4e00-88ae-5a89bb5507bd",
        "body" : "Let me know what you want to do regarding the name. In https://github.com/kubernetes/community/pull/292 this one was suggested and specified in the proposal.",
        "createdAt" : "2017-05-24T15:09:51Z",
        "updatedAt" : "2017-06-05T14:59:16Z",
        "lastEditedBy" : "03b5b049-f20a-4e00-88ae-5a89bb5507bd",
        "tags" : [
        ]
      },
      {
        "id" : "c29df9dd-945e-452a-a7df-ca2cbbea312b",
        "parentId" : "2840759f-d60a-4362-89cc-af254c432658",
        "authorId" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "body" : "ok, reread the discussion there, thanks for the link.\r\nlg.",
        "createdAt" : "2017-05-27T00:33:56Z",
        "updatedAt" : "2017-06-05T14:59:16Z",
        "lastEditedBy" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "tags" : [
        ]
      }
    ],
    "commit" : "470e99c6a553729c7624ff168bd2315efa409707",
    "line" : 41,
    "diffHunk" : "@@ -1,1 +39,43 @@\tpluginName               = \"SchedulingPolicy\"\n\tconfigKey                = \"schedulingPolicy\"\n\tpolicyConfigMapNamespace = \"kube-federation-scheduling-policy\"\n\n\t// Default backoff delay for policy engine query retries. The actual"
  },
  {
    "id" : "cf676b04-1a5e-4bc1-8667-d75bb31d7734",
    "prId" : 44786,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/44786#pullrequestreview-40640367",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5f3cb498-19e0-4de2-bb7c-5e72f8c56454",
        "parentId" : null,
        "authorId" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "body" : "In our controllers we use EventRecorder. We can use the same here?",
        "createdAt" : "2017-05-24T03:25:52Z",
        "updatedAt" : "2017-06-05T14:59:16Z",
        "lastEditedBy" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "tags" : [
        ]
      },
      {
        "id" : "0202bce4-0ccf-4029-9387-42a484b72e31",
        "parentId" : "5f3cb498-19e0-4de2-bb7c-5e72f8c56454",
        "authorId" : "03b5b049-f20a-4e00-88ae-5a89bb5507bd",
        "body" : "Not sure, I will look into this.",
        "createdAt" : "2017-05-24T15:18:26Z",
        "updatedAt" : "2017-06-05T14:59:16Z",
        "lastEditedBy" : "03b5b049-f20a-4e00-88ae-5a89bb5507bd",
        "tags" : [
        ]
      },
      {
        "id" : "dbeda0b3-08ae-4911-aa6f-9e41874b5d44",
        "parentId" : "5f3cb498-19e0-4de2-bb7c-5e72f8c56454",
        "authorId" : "03b5b049-f20a-4e00-88ae-5a89bb5507bd",
        "body" : "This would make the admission controller depend on the controller manager code. Is this desirable?",
        "createdAt" : "2017-05-24T16:47:06Z",
        "updatedAt" : "2017-06-05T14:59:16Z",
        "lastEditedBy" : "03b5b049-f20a-4e00-88ae-5a89bb5507bd",
        "tags" : [
        ]
      },
      {
        "id" : "3650b733-a2f0-4706-9115-e810b525a57c",
        "parentId" : "5f3cb498-19e0-4de2-bb7c-5e72f8c56454",
        "authorId" : "03b5b049-f20a-4e00-88ae-5a89bb5507bd",
        "body" : "It seems the EventRecorder utility is not compatible with the internalclientset. Let me know how we should proceed.",
        "createdAt" : "2017-05-24T23:12:47Z",
        "updatedAt" : "2017-06-05T14:59:16Z",
        "lastEditedBy" : "03b5b049-f20a-4e00-88ae-5a89bb5507bd",
        "tags" : [
        ]
      },
      {
        "id" : "5bf63753-abaf-4243-a6ba-9b2850fcaaf7",
        "parentId" : "5f3cb498-19e0-4de2-bb7c-5e72f8c56454",
        "authorId" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "body" : "sigh, ok.",
        "createdAt" : "2017-05-27T00:33:39Z",
        "updatedAt" : "2017-06-05T14:59:16Z",
        "lastEditedBy" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "tags" : [
        ]
      }
    ],
    "commit" : "470e99c6a553729c7624ff168bd2315efa409707",
    "line" : 152,
    "diffHunk" : "@@ -1,1 +150,154 @@\t}\n\n\tif _, err := c.client.Core().Events(a.GetNamespace()).Create(event); err != nil {\n\t\truntime.HandleError(err)\n\t\treturn"
  },
  {
    "id" : "b939c5a3-d048-4bb8-b098-1327962ae993",
    "prId" : 44786,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/44786#pullrequestreview-40062698",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d3fe5b8a-4a6b-4c6a-bcfd-3e4b43370c07",
        "parentId" : null,
        "authorId" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "body" : "same comment about being generic shareable code",
        "createdAt" : "2017-05-24T03:30:37Z",
        "updatedAt" : "2017-06-05T14:59:16Z",
        "lastEditedBy" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "tags" : [
        ]
      },
      {
        "id" : "5d0155b1-d446-4156-a67b-a5b4249e5528",
        "parentId" : "d3fe5b8a-4a6b-4c6a-bcfd-3e4b43370c07",
        "authorId" : "03b5b049-f20a-4e00-88ae-5a89bb5507bd",
        "body" : "See comment above about admission controllers handling their own config.",
        "createdAt" : "2017-05-24T15:30:26Z",
        "updatedAt" : "2017-06-05T14:59:16Z",
        "lastEditedBy" : "03b5b049-f20a-4e00-88ae-5a89bb5507bd",
        "tags" : [
        ]
      }
    ],
    "commit" : "470e99c6a553729c7624ff168bd2315efa409707",
    "line" : 194,
    "diffHunk" : "@@ -1,1 +192,196 @@}\n\nfunc loadRestClient(kubeConfigFile string) (*rest.RESTClient, error) {\n\n\tloadingRules := clientcmd.NewDefaultClientConfigLoadingRules()"
  },
  {
    "id" : "200dc836-dc51-4afa-90c4-85423910aea6",
    "prId" : 44786,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/44786#pullrequestreview-40640375",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d823c19d-3b29-4d86-9f7e-593da55a4c22",
        "parentId" : null,
        "authorId" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "body" : "Why internal clientset and not the versioned clientset?",
        "createdAt" : "2017-05-24T04:06:02Z",
        "updatedAt" : "2017-06-05T14:59:16Z",
        "lastEditedBy" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "tags" : [
        ]
      },
      {
        "id" : "3614221a-958b-41ae-86fe-71c719d2ae82",
        "parentId" : "d823c19d-3b29-4d86-9f7e-593da55a4c22",
        "authorId" : "03b5b049-f20a-4e00-88ae-5a89bb5507bd",
        "body" : "As far as I know, this is the only option available: https://github.com/kubernetes/kubernetes/blob/master/pkg/kubeapiserver/admission/initializer.go#L31.",
        "createdAt" : "2017-05-24T15:13:28Z",
        "updatedAt" : "2017-06-05T14:59:16Z",
        "lastEditedBy" : "03b5b049-f20a-4e00-88ae-5a89bb5507bd",
        "tags" : [
        ]
      },
      {
        "id" : "e9fb0f57-5d12-46ca-9d67-282d4a4c10f8",
        "parentId" : "d823c19d-3b29-4d86-9f7e-593da55a4c22",
        "authorId" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "body" : "We had updated all our controllers to use versioned clientset instead of internal ones.\r\nLooks like we still need to do that work for our admission controllers.\r\ncc @caesarxuchao to confirm.",
        "createdAt" : "2017-05-24T17:55:18Z",
        "updatedAt" : "2017-06-05T14:59:16Z",
        "lastEditedBy" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "tags" : [
        ]
      },
      {
        "id" : "c302465c-2b6a-4b3e-ae33-0ddeabc6b3ad",
        "parentId" : "d823c19d-3b29-4d86-9f7e-593da55a4c22",
        "authorId" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "body" : "Thanks @nikhiljindal. It's ok for admission controllers to use the internal clientset. The admission controller runs in the same process as the apiserver, and iirc objects are supplied by the apiserver to the admission controller, and the objects are already converted to the internal version.",
        "createdAt" : "2017-05-24T18:22:59Z",
        "updatedAt" : "2017-06-05T14:59:16Z",
        "lastEditedBy" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "tags" : [
        ]
      },
      {
        "id" : "80a99eb6-f766-49a3-af5d-27d6080fa902",
        "parentId" : "d823c19d-3b29-4d86-9f7e-593da55a4c22",
        "authorId" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "body" : "As discussed offline with @caesarxuchao, admission controllers (like this one) also talk to apiserver directly to fetch other resources (like configmaps and events in this case).\r\nAdmission controllers should be using versioned clientsets for that.\r\n\r\nThis PR is fine as is since we do not have a way to provide versioned clients today, but adding support for it should not be too difficult. We can add another method SetVersionedKubeClientSet similar to SetInternalKubeClientSet.\r\nThis will become critical as we move admission controllers out of repo without moving the internal API structs.",
        "createdAt" : "2017-05-27T00:33:51Z",
        "updatedAt" : "2017-06-05T14:59:16Z",
        "lastEditedBy" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "tags" : [
        ]
      }
    ],
    "commit" : "470e99c6a553729c7624ff168bd2315efa409707",
    "line" : 96,
    "diffHunk" : "@@ -1,1 +94,98 @@}\n\nfunc (c *admissionController) SetInternalKubeClientSet(client internalclientset.Interface) {\n\tc.client = client\n}"
  }
]