[
  {
    "id" : "b2255151-d74f-45a0-9138-6b28ade85148",
    "prId" : 39646,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/39646#pullrequestreview-16101544",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "870133de-5346-4dd8-a510-322b2834f8c8",
        "parentId" : null,
        "authorId" : "f6905dc9-1980-4381-8220-a1c7ad8d5c82",
        "body" : "I don't think this is sufficient. Federated Service is in beta, which means we need to provide an upgrade path. I think we should be doing what kubernetes is doing. See the manifest template here - https://github.com/kubernetes/kubernetes/blob/84df0679671e719971734be09e954c28f7febaf9/cluster/saltbase/salt/etcd/etcd.manifest#L42",
        "createdAt" : "2017-01-10T04:46:54Z",
        "updatedAt" : "2017-01-10T10:23:05Z",
        "lastEditedBy" : "f6905dc9-1980-4381-8220-a1c7ad8d5c82",
        "tags" : [
        ]
      },
      {
        "id" : "0a383fce-c52c-4d16-a388-ae45e00109d0",
        "parentId" : "870133de-5346-4dd8-a510-322b2834f8c8",
        "authorId" : "15d1f4bd-5840-4fce-87f5-1f04ed7f10e5",
        "body" : "So @madhusudancs, what is your suggestion for federation, we should make etcd3 as default, but still provide support for etcd2 or we should support etcd2 as default but optionally support etcd3?",
        "createdAt" : "2017-01-10T05:11:31Z",
        "updatedAt" : "2017-01-10T10:23:05Z",
        "lastEditedBy" : "15d1f4bd-5840-4fce-87f5-1f04ed7f10e5",
        "tags" : [
        ]
      },
      {
        "id" : "b1e0a726-8a86-4af3-8f66-d7b6fb00c7d1",
        "parentId" : "870133de-5346-4dd8-a510-322b2834f8c8",
        "authorId" : "15d1f4bd-5840-4fce-87f5-1f04ed7f10e5",
        "body" : "@madhusudancs, I have made the federation-apiserver to use etcd2 as storage-backend.  going forward we need to migrate to etcd3 asap. also probably document the etcd migration procedure w.r.t federation.",
        "createdAt" : "2017-01-10T10:37:15Z",
        "updatedAt" : "2017-01-10T10:37:15Z",
        "lastEditedBy" : "15d1f4bd-5840-4fce-87f5-1f04ed7f10e5",
        "tags" : [
        ]
      },
      {
        "id" : "e45286ab-b162-4de9-9808-fb22938f6c1b",
        "parentId" : "870133de-5346-4dd8-a510-322b2834f8c8",
        "authorId" : "f6905dc9-1980-4381-8220-a1c7ad8d5c82",
        "body" : "Fair enough, to get the tests passing. But I see that you made `etcd2` the default backend in `kubefed init`, but I don't see the corresponding change in this manifest. Our current test infra still uses this manifest. Shouldn't there be an equivalent change in this file?",
        "createdAt" : "2017-01-10T18:49:19Z",
        "updatedAt" : "2017-01-10T18:49:22Z",
        "lastEditedBy" : "f6905dc9-1980-4381-8220-a1c7ad8d5c82",
        "tags" : [
        ]
      },
      {
        "id" : "22985309-ee82-494f-bc39-01e3353059a0",
        "parentId" : "870133de-5346-4dd8-a510-322b2834f8c8",
        "authorId" : "15d1f4bd-5840-4fce-87f5-1f04ed7f10e5",
        "body" : "@madhusudancs , the change is done in federation/manifests/federation-apiserver-deployment.yaml also.\r\nThe federation-apiserver now is called with `--storage-backend=etcd2` [here](https://github.com/kubernetes/kubernetes/pull/39646/files#diff-292011a5f785a3eb1dfc13fe070ab8ffR17) is the change.",
        "createdAt" : "2017-01-11T00:58:01Z",
        "updatedAt" : "2017-01-11T00:58:01Z",
        "lastEditedBy" : "15d1f4bd-5840-4fce-87f5-1f04ed7f10e5",
        "tags" : [
        ]
      },
      {
        "id" : "b8592f61-e198-4c91-8c6c-2d2f46477306",
        "parentId" : "870133de-5346-4dd8-a510-322b2834f8c8",
        "authorId" : "f6905dc9-1980-4381-8220-a1c7ad8d5c82",
        "body" : "Oh weird! I am only seeing it now. ",
        "createdAt" : "2017-01-11T09:56:02Z",
        "updatedAt" : "2017-01-11T09:56:40Z",
        "lastEditedBy" : "f6905dc9-1980-4381-8220-a1c7ad8d5c82",
        "tags" : [
        ]
      }
    ],
    "commit" : "9423e788269225792769ce4e298382b886276ff3",
    "line" : 16,
    "diffHunk" : "@@ -1,1 +46,50 @@        image: gcr.io/google_containers/etcd:3.0.14-alpha.1\n        command:\n          - /usr/local/bin/etcd\n          - --data-dir\n          - /var/etcd/data"
  },
  {
    "id" : "6e7c633f-457b-4978-b367-3e7db6c06273",
    "prId" : 27791,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fada8782-9492-4ba9-8207-febdb304645a",
        "parentId" : null,
        "authorId" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "body" : "I am not sure why is this AWS specific.\n",
        "createdAt" : "2016-06-21T22:22:02Z",
        "updatedAt" : "2016-06-22T01:23:07Z",
        "lastEditedBy" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "tags" : [
        ]
      },
      {
        "id" : "6743329d-a8b9-40b3-be24-6ae8a53f39f4",
        "parentId" : "fada8782-9492-4ba9-8207-febdb304645a",
        "authorId" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "body" : "What does not work if we do not set this?\nReading the documentation, I get the impression that if its a public IP, we can set it to external-hostname.\nAnd if its a cluster IP, we can set it to advertise-address.\n",
        "createdAt" : "2016-06-21T22:55:06Z",
        "updatedAt" : "2016-06-22T01:23:07Z",
        "lastEditedBy" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "tags" : [
        ]
      },
      {
        "id" : "4d58ea2a-3f7a-4cdc-bcc8-af2a2f5a652e",
        "parentId" : "fada8782-9492-4ba9-8207-febdb304645a",
        "authorId" : "815980f5-2f9b-482a-89ad-0fc8f02a9994",
        "body" : "IIRC, it's something to do with the automatic certificate generation logic and AWS loadbalancers giving your DNS names instead of IP addresses.\n",
        "createdAt" : "2016-06-22T01:27:20Z",
        "updatedAt" : "2016-06-22T01:27:20Z",
        "lastEditedBy" : "815980f5-2f9b-482a-89ad-0fc8f02a9994",
        "tags" : [
        ]
      },
      {
        "id" : "cf7c1374-1912-450b-87bf-227bdae2fc59",
        "parentId" : "fada8782-9492-4ba9-8207-febdb304645a",
        "authorId" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "body" : "IIUC, the DNS name is cluster internal only? Doesnt seem right to set it as external-hostname.\n\ncc @lavalamp \n",
        "createdAt" : "2016-06-22T18:45:07Z",
        "updatedAt" : "2016-06-22T18:45:07Z",
        "lastEditedBy" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "tags" : [
        ]
      }
    ],
    "commit" : "5bacc4830e447a1a42d8f2d157fcf4792c1dd3dd",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +24,28 @@        - --secure-port=443\n        {{if eq .KUBERNETES_PROVIDER \"aws\"}}\n        - --external-hostname={{.FEDERATION_API_HOST}}\n        {{else}}\n        - --advertise-address={{.FEDERATION_API_HOST}}"
  },
  {
    "id" : "b59c010a-c7a7-4ab8-8973-76c4754a6d6a",
    "prId" : 25125,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0589bb63-f68d-4631-b048-eaa40ff17859",
        "parentId" : null,
        "authorId" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "body" : "How are we setting up this etcd?\n",
        "createdAt" : "2016-06-02T21:56:16Z",
        "updatedAt" : "2016-06-02T21:56:16Z",
        "lastEditedBy" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "tags" : [
        ]
      },
      {
        "id" : "a9e7c7a7-a6f1-4407-ae9d-e0b15da97e59",
        "parentId" : "0589bb63-f68d-4631-b048-eaa40ff17859",
        "authorId" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "body" : "ignore, I now see the etcd container below\n",
        "createdAt" : "2016-06-02T21:57:52Z",
        "updatedAt" : "2016-06-02T21:57:52Z",
        "lastEditedBy" : "f2369046-26b1-4b8c-a8cd-5671ab22066c",
        "tags" : [
        ]
      }
    ],
    "commit" : "a092fd2dd4091b735cc2389015ce4bef951abfab",
    "line" : 22,
    "diffHunk" : "@@ -1,1 +20,24 @@        - /usr/local/bin/federation-apiserver\n        - --bind-address=0.0.0.0\n        - --etcd-servers=http://localhost:2379\n        - --service-cluster-ip-range={{.FEDERATION_SERVICE_CIDR}}\n        - --secure-port=443"
  }
]