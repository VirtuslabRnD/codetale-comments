[
  {
    "id" : "29059e07-dc25-4f3d-bdc0-c201dd5f8f6c",
    "prId" : 20647,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "12664360-5463-452a-8f88-4592cf770be8",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "does this imply that the plugin will need to know parts of the kube-proxy config (at least the mode)? is there a way for the plugins to get that information currently?\n",
        "createdAt" : "2016-02-20T16:16:27Z",
        "updatedAt" : "2016-02-23T15:35:11Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "f3fa71fe-3574-4fb1-b944-00e9028c39f9",
        "parentId" : "12664360-5463-452a-8f88-4592cf770be8",
        "authorId" : "57f729dd-988a-4d1a-83bf-ee70bf637c64",
        "body" : "> does this imply that the plugin will need to know parts of the kube-proxy config (at least the mode)? is there a way for the plugins to get that information currently?\n\nYes, plugins will obviously need to know about proxy configuration if their networking setup will have an effect on the proxy.  We were just naive before as assumed everyone did everything the same way :(\n",
        "createdAt" : "2016-02-22T15:50:17Z",
        "updatedAt" : "2016-02-23T15:35:11Z",
        "lastEditedBy" : "57f729dd-988a-4d1a-83bf-ee70bf637c64",
        "tags" : [
        ]
      },
      {
        "id" : "69d73c13-20a4-4827-8703-d3902debe496",
        "parentId" : "12664360-5463-452a-8f88-4592cf770be8",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "ok, so how would a plugin find out (for example) if you were running the kube-proxy in userspace or iptables mode?\n",
        "createdAt" : "2016-02-22T15:55:21Z",
        "updatedAt" : "2016-02-23T15:35:11Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "6248939e11a4d5b422da5ffdc7ec52a6c1ded54a",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +45,49 @@## Network Plugin Requirements\n\nBesides providing the [`NetworkPlugin` interface](../../pkg/kubelet/network/plugins.go) to configure and clean up pod networking, the plugin may also need specific support for kube-proxy.  The iptables proxy obviously depends on iptables, and the plugin may need to ensure that container traffic is made available to iptables.  For example, if the plugin connects containers to a Linux bridge, the plugin must set the `net/bridge/bridge-nf-call-iptables` sysctl to `1` to ensure that the iptables proxy functions correctly.  If the plugin does not use a Linux bridge (but instead something like Open vSwitch or some other mechanism) it should ensure container traffic is appropriately routed for the proxy.\n\nBy default if no kubelet network plugin is specified, the `noop` plugin is used, which sets `net/bridge/bridge-nf-call-iptables=1` to ensure simple configurations (like docker with a bridge) work correctly with the iptables proxy."
  }
]