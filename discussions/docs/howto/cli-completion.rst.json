[
  {
    "id" : "da79d826-9c9e-4efc-a608-7edc35b2ace6",
    "prId" : 5789,
    "prUrl" : "https://github.com/apache/airflow/pull/5789#pullrequestreview-274752507",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6aaa4a3f-492d-4bfe-9dec-d693cd12f656",
        "parentId" : null,
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Is it possible to have this as `airflow autocompletions` or something (which just tries to import that module etc.)",
        "createdAt" : "2019-08-13T11:20:54Z",
        "updatedAt" : "2019-08-13T18:09:27Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "facaa479-39c6-4d7f-b9f3-90f274b620b4",
        "parentId" : "6aaa4a3f-492d-4bfe-9dec-d693cd12f656",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "Not sure as it would have to find out current Shell (bash/zsh - which might be easy) and then export that command to `.bash_rc` or `.bash_profile` or `.zshrc` etc by running some bash commands?",
        "createdAt" : "2019-08-13T12:03:17Z",
        "updatedAt" : "2019-08-13T18:09:27Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "a8290be5-bfb0-4cba-bd9c-e0df434aa9c2",
        "parentId" : "6aaa4a3f-492d-4bfe-9dec-d693cd12f656",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Just the `register-python-argcomplete airflow` bit - not the eval etc.\r\n\r\nSo this line would be\r\n\r\n```suggestion\r\n  eval \"$(airflow autocompletions)\"\r\n```",
        "createdAt" : "2019-08-13T12:12:29Z",
        "updatedAt" : "2019-08-13T18:09:27Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "7c08c3fe-ac5a-46ec-bca5-800665acf877",
        "parentId" : "6aaa4a3f-492d-4bfe-9dec-d693cd12f656",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "Aah ok. That should be plausible. Let me give it a go",
        "createdAt" : "2019-08-13T12:15:05Z",
        "updatedAt" : "2019-08-13T18:09:27Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "6deafae4-1590-4625-be71-a517845cc4f4",
        "parentId" : "6aaa4a3f-492d-4bfe-9dec-d693cd12f656",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "Well this isn't as trivial as I thought it would because just running `airflow` prints out the following:\r\n\r\n```\r\n/Users/kaxilnaik/Documents/GitHub/incubator-airflow/airflow/models/dagbag.py:21: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses\r\n  import imp\r\n[2019-08-13 22:30:04,803] {settings.py:173} INFO - settings.configure_orm(): Using pool settings. pool_size=5, max_overflow=10, pool_recycle=1800, pid=86597\r\n/Users/kaxilnaik/.virtualenvs/airflow_cli_test/lib/python3.7/site-packages/psycopg2/__init__.py:144: UserWarning: The psycopg2 wheel package will be renamed from release 2.8; in order to keep installing from binary please use \"pip install psycopg2-binary\" instead. For details see: <http://initd.org/psycopg/docs/install.html#binary-install-from-pypi>.\r\n  \"\"\")\r\n[2019-08-13 22:30:04,876] {__init__.py:51} INFO - Using executor LocalExecutor\r\n```\r\n\r\n**Example implementation**:\r\n![image](https://user-images.githubusercontent.com/8811558/62978759-eeb7e600-be19-11e9-89d5-ada08536adae.png)\r\n\r\n\r\nIf we then run `eval $(airflow autocomplete)` it gives the following error:\r\n```\r\n/Users/kaxilnaik/Documents/GitHub/incubator-airflow/airflow/models/dagbag.py:21: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses\r\n  import imp\r\n/Users/kaxilnaik/.virtualenvs/airflow_cli_test/lib/python3.7/site-packages/psycopg2/__init__.py:144: UserWarning: The psycopg2 wheel package will be renamed from release 2.8; in order to keep installing from binary please use \"pip install psycopg2-binary\" instead. For details see: <http://initd.org/psycopg/docs/install.html#binary-install-from-pypi>.\r\n  \"\"\")\r\nzsh: bad pattern: [2019-08-13\r\n```\r\n\r\nas it is trying to parse the log line `[2019-08-13 22:29:39,045] {settings.py:173} INFO - settings.configure_orm(): Using pool settings. pool_size=5, max_overflow=10, pool_recycle=1800, pid=86465`\r\n\r\nHence, not implementing this as part of this PR. Let's revisit this later.",
        "createdAt" : "2019-08-13T21:34:26Z",
        "updatedAt" : "2019-08-13T21:34:27Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "c8e04e3f-c710-4279-94b6-840f33cb0386",
        "parentId" : "6aaa4a3f-492d-4bfe-9dec-d693cd12f656",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Oh that damn logging whenever we `import airflow` :(",
        "createdAt" : "2019-08-14T08:57:09Z",
        "updatedAt" : "2019-08-14T08:57:09Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      }
    ],
    "commit" : "33baf9cd466fc17064161792537cc5c3c16eff32",
    "line" : 40,
    "diffHunk" : "@@ -1,1 +38,42 @@.. code-block:: bash\n\n  eval \"$(register-python-argcomplete airflow)\"\n\n.. image:: ../img/cli_completion.gif"
  }
]