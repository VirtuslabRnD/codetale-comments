[
  {
    "id" : "e496d9d8-9b9c-4e9f-a2fe-5dc3ab1e008f",
    "prId" : 2313,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/2313#pullrequestreview-344323567",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3f2ead62-dbe6-4e18-95d2-a859d7c67023",
        "parentId" : null,
        "authorId" : "240b730c-4fc4-4801-892a-18195816221b",
        "body" : "As far as I can tell, we don't support searching for metrics names with queries. The example on `master` results in:\r\n\r\n```\r\n>>> query = \"params.model = 'CNN' and params.layers = '10' and metrics.'prediction accuracy' >= 0.945\"\r\n>>> runs = MlflowClient().search_runs(experiment_ids=[\"3\", \"4\", \"17\"], filter_string=query, run_view_type=ViewType.ACTIVE_ONLY)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/local/lib/python3.7/site-packages/mlflow/tracking/client.py\", line 330, in search_runs\r\n    max_results, order_by, page_token)\r\n  File \"/usr/local/lib/python3.7/site-packages/mlflow/tracking/_tracking_service/client.py\", line 341, in search_runs\r\n    order_by=order_by, page_token=page_token)\r\n  File \"/usr/local/lib/python3.7/site-packages/mlflow/store/tracking/abstract_store.py\", line 229, in search_runs\r\n    order_by, page_token)\r\n  File \"/usr/local/lib/python3.7/site-packages/mlflow/store/tracking/file_store.py\", line 590, in _search_runs\r\n    filtered = SearchUtils.filter(runs, filter_string)\r\n  File \"/usr/local/lib/python3.7/site-packages/mlflow/utils/search_utils.py\", line 285, in filter\r\n    parsed = cls.parse_search_filter(filter_string)\r\n  File \"/usr/local/lib/python3.7/site-packages/mlflow/utils/search_utils.py\", line 212, in parse_search_filter\r\n    return SearchUtils._process_statement(parsed[0])\r\n  File \"/usr/local/lib/python3.7/site-packages/mlflow/utils/search_utils.py\", line 193, in _process_statement\r\n    error_code=INVALID_PARAMETER_VALUE)\r\nmlflow.exceptions.MlflowException: Invalid clause(s) in filter string: 'metrics.'\r\n```\r\n\r\nBecause of this check: https://github.com/mlflow/mlflow/blob/dbefc4437d261f62844fedfe00ae5a9fa15db4bd/mlflow/utils/search_utils.py#L189\r\n\r\nIf this looks correct, I can file a low priority bug to support querying metrics/params with spaces.",
        "createdAt" : "2020-01-17T01:16:05Z",
        "updatedAt" : "2020-01-17T01:46:06Z",
        "lastEditedBy" : "240b730c-4fc4-4801-892a-18195816221b",
        "tags" : [
        ]
      },
      {
        "id" : "6f2c0269-b648-40cd-ac39-932c6b7985c4",
        "parentId" : "3f2ead62-dbe6-4e18-95d2-a859d7c67023",
        "authorId" : "bd3067fd-855b-4bd1-898d-ca29199fd092",
        "body" : "Thanks for raising this, it's known that query components with spaces aren't supported / the recommended workaround is to enclose them in backticks as per [this doc](https://mlflow.org/docs/latest/search-syntax.html#entity-names-containing-special-characters), but the error message you get here is confusing/doesn't tell you how to get the query working, so worth filing something to track improving that",
        "createdAt" : "2020-01-17T01:25:13Z",
        "updatedAt" : "2020-01-17T01:46:06Z",
        "lastEditedBy" : "bd3067fd-855b-4bd1-898d-ca29199fd092",
        "tags" : [
        ]
      },
      {
        "id" : "e6083917-e621-47f7-8a0e-d349a088ddcc",
        "parentId" : "3f2ead62-dbe6-4e18-95d2-a859d7c67023",
        "authorId" : "240b730c-4fc4-4801-892a-18195816221b",
        "body" : "Ah gotcha. I've replaced the single quotes (') with backticks(`), and added back the example.",
        "createdAt" : "2020-01-17T01:46:35Z",
        "updatedAt" : "2020-01-17T01:46:35Z",
        "lastEditedBy" : "240b730c-4fc4-4801-892a-18195816221b",
        "tags" : [
        ]
      }
    ],
    "commit" : "284e0521f2e9974382ad63f7edffc9766d0c724d",
    "line" : 75,
    "diffHunk" : "@@ -1,1 +174,178 @@\n  query = \"params.model = 'CNN' and params.layers = '10' and metrics.`prediction accuracy` >= 0.945\"\n  runs = MlflowClient().search_runs(experiment_ids=[\"3\", \"4\", \"17\"], filter_string=query, run_view_type=ViewType.ACTIVE_ONLY)\n\nTo search all known experiments for any MLflow runs created using the Inception model architecture:"
  },
  {
    "id" : "8e7f11fa-010e-4110-8a4e-3dea6d796087",
    "prId" : 1575,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/1575#pullrequestreview-261998373",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c649619b-b93d-405d-9976-a75d0f81773b",
        "parentId" : null,
        "authorId" : "defbdbf6-c2b5-4b1e-b40b-da9b7f2d2e74",
        "body" : "Searching by MLflow specific tags -> Searching by MLflow tags",
        "createdAt" : "2019-07-15T18:30:27Z",
        "updatedAt" : "2019-07-17T18:45:22Z",
        "lastEditedBy" : "defbdbf6-c2b5-4b1e-b40b-da9b7f2d2e74",
        "tags" : [
        ]
      }
    ],
    "commit" : "f1a794c1a52e601abf9e9b923d86c6fde57609c9",
    "line" : 63,
    "diffHunk" : "@@ -1,1 +83,87 @@Run Attributes\n~~~~~~~~~~~~~~\n\nYou can search using two run attributes contained in :py:class:`mlflow.entities.RunInfo`: ``status`` and ``artifact_uri``. Both attributes have string values. Other fields in ``mlflow.entities.RunInfo`` are not searchable.\n"
  },
  {
    "id" : "34143e25-33dc-4dff-bef8-d0aaed5d3f8b",
    "prId" : 1575,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/1575#pullrequestreview-262653506",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0f969035-0c7e-46f6-94cf-4e3b71e6925f",
        "parentId" : null,
        "authorId" : "ef7f4fc4-8253-410e-bcf1-8d5fe4cd38b3",
        "body" : "Great idea adding an example here. I think a slightly better one (since I presume few people will search based on `artifact_uri` would be to use the following:\r\n\r\n`attributes.status = 'FINISHED'`",
        "createdAt" : "2019-07-16T20:08:26Z",
        "updatedAt" : "2019-07-17T18:45:22Z",
        "lastEditedBy" : "ef7f4fc4-8253-410e-bcf1-8d5fe4cd38b3",
        "tags" : [
        ]
      },
      {
        "id" : "bf2172ce-82b9-43a0-87df-3dbd38a1b316",
        "parentId" : "0f969035-0c7e-46f6-94cf-4e3b71e6925f",
        "authorId" : "ef7f4fc4-8253-410e-bcf1-8d5fe4cd38b3",
        "body" : "@stbof Meant to add you to the above comment. Would you mind if I change this?",
        "createdAt" : "2019-07-16T20:09:05Z",
        "updatedAt" : "2019-07-17T18:45:22Z",
        "lastEditedBy" : "ef7f4fc4-8253-410e-bcf1-8d5fe4cd38b3",
        "tags" : [
        ]
      },
      {
        "id" : "fde1fea4-e986-4ffb-85bb-7ca07aba452d",
        "parentId" : "0f969035-0c7e-46f6-94cf-4e3b71e6925f",
        "authorId" : "defbdbf6-c2b5-4b1e-b40b-da9b7f2d2e74",
        "body" : "We already have this one in the very beginning of the topic. Also, in this section all the examples are identifiers only, not expressions. The expression examples are at the beginning.",
        "createdAt" : "2019-07-16T20:09:38Z",
        "updatedAt" : "2019-07-17T18:45:22Z",
        "lastEditedBy" : "defbdbf6-c2b5-4b1e-b40b-da9b7f2d2e74",
        "tags" : [
        ]
      }
    ],
    "commit" : "f1a794c1a52e601abf9e9b923d86c6fde57609c9",
    "line" : 77,
    "diffHunk" : "@@ -1,1 +96,100 @@.. code-block:: sql\n\n  attributes.artifact_uri\n\n"
  },
  {
    "id" : "82056387-d61e-4043-9241-f7a08f85c51d",
    "prId" : 1326,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/1326#pullrequestreview-242333635",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8def1738-11b1-401a-9f6f-99c63b175ef0",
        "parentId" : null,
        "authorId" : "6e958077-8d60-494d-8079-e77af3a2951f",
        "body" : "Maybe we can update one of the examples to include `attributes`?",
        "createdAt" : "2019-05-27T15:52:54Z",
        "updatedAt" : "2019-05-27T20:26:07Z",
        "lastEditedBy" : "6e958077-8d60-494d-8079-e77af3a2951f",
        "tags" : [
        ]
      }
    ],
    "commit" : "cc2df35c0164e1c361aff7f18f53444bfcb7eae4",
    "line" : 37,
    "diffHunk" : "@@ -1,1 +46,50 @@parts separated by a period: the type of the entity and the name of the entity. \nThe type of the entity is ``metrics``, ``params``, ``tags``, or ``attributes``. The entity name can\ncontain alphanumeric characters and special characters.\nFor example: ``metrics.accuracy``.\n"
  }
]