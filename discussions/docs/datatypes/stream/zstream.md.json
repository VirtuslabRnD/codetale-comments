[
  {
    "id" : "fc41f089-33cd-4511-a428-b43d2faaf8a3",
    "prId" : 5102,
    "prUrl" : "https://github.com/zio/zio/pull/5102#pullrequestreview-682521862",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b8f36313-65f2-44f6-84b4-7daa1cd02768",
        "parentId" : null,
        "authorId" : "c5ae2688-334a-435d-97e5-68ab95dffdf5",
        "body" : "Hello @iravid \r\nYesterday all the time, I was working on the adaptive batching pattern which you have presented in one of your talk about ZIO streams.\r\nI tried to rewrite and test that and and then include this nice use-case in ZIO stream documentation. But I'm not sure that this example works as what you presented.\r\nWhen I debugged that program, I found that in the `_.flatten.length < 100` predicate, the value of `_.flatten.length` does not always represent the batch size. Most of the time, its value is `zero` and sometimes it is `2000`. I didn't find a situation when the size of the batch is something between 0 and 2000. (I also jittered the upstream to make sure I have different throughput)\r\nCould you please look at that and check if I'm right or not?",
        "createdAt" : "2021-06-13T07:20:53Z",
        "updatedAt" : "2021-06-13T07:24:56Z",
        "lastEditedBy" : "c5ae2688-334a-435d-97e5-68ab95dffdf5",
        "tags" : [
        ]
      },
      {
        "id" : "f87c0d7b-c098-49fa-895c-0a427da9d926",
        "parentId" : "b8f36313-65f2-44f6-84b4-7daa1cd02768",
        "authorId" : "4f7a0777-ad97-4424-aa99-3fcea1de6a97",
        "body" : "Hey! Will try to take a look later today",
        "createdAt" : "2021-06-14T05:18:24Z",
        "updatedAt" : "2021-06-14T05:18:25Z",
        "lastEditedBy" : "4f7a0777-ad97-4424-aa99-3fcea1de6a97",
        "tags" : [
        ]
      }
    ],
    "commit" : "a01e9229e23073cc189cf9009387851543fb1284",
    "line" : 1690,
    "diffHunk" : "@@ -1,1 +1688,1692 @@dataStream\n  .aggregateAsyncWithin(ZTransducer.collectAllN(2000), schedule)\n```\n\n## Scheduling"
  }
]