[
  {
    "id" : "e0e2ee97-7de9-47d8-8475-6cd7ff5f5432",
    "prId" : 1763,
    "prUrl" : "https://github.com/root-project/root/pull/1763#pullrequestreview-107270853",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "49bd481f-b177-4a91-8c2b-d22087672e9b",
        "parentId" : null,
        "authorId" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "body" : "Why are both this constructor and the (size==-1) in the previous constructor needed?",
        "createdAt" : "2018-03-26T17:17:26Z",
        "updatedAt" : "2018-03-27T09:53:24Z",
        "lastEditedBy" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "tags" : [
        ]
      },
      {
        "id" : "82486c44-3552-44cc-b271-cf65509b849f",
        "parentId" : "49bd481f-b177-4a91-8c2b-d22087672e9b",
        "authorId" : "09b7e073-cbeb-42e8-aa22-8b1468de56ae",
        "body" : "This one is for external memory that we do not copy, the size==-1 is for memory that we do copy. See the comment \"   // size will be -1 when copying an existing buffer into fBuffer.\"",
        "createdAt" : "2018-03-27T09:37:31Z",
        "updatedAt" : "2018-03-27T09:53:24Z",
        "lastEditedBy" : "09b7e073-cbeb-42e8-aa22-8b1468de56ae",
        "tags" : [
        ]
      },
      {
        "id" : "5e2ab577-24c2-4daf-8de2-6e986852e0eb",
        "parentId" : "49bd481f-b177-4a91-8c2b-d22087672e9b",
        "authorId" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "body" : "Then this convention **must** be expressed in the constructor's documentation.",
        "createdAt" : "2018-03-27T12:12:25Z",
        "updatedAt" : "2018-03-27T12:12:29Z",
        "lastEditedBy" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "tags" : [
        ]
      },
      {
        "id" : "a164e8ed-a10f-4486-8635-74ef6689b5f7",
        "parentId" : "49bd481f-b177-4a91-8c2b-d22087672e9b",
        "authorId" : "09b7e073-cbeb-42e8-aa22-8b1468de56ae",
        "body" : "See 3d71859f73cea5ac4e94f087946827a4d3d84716 !",
        "createdAt" : "2018-03-27T12:39:32Z",
        "updatedAt" : "2018-03-27T12:39:33Z",
        "lastEditedBy" : "09b7e073-cbeb-42e8-aa22-8b1468de56ae",
        "tags" : [
        ]
      }
    ],
    "commit" : "b8e6c3d5ccfa4de34a2dadd4e95593c08682db67",
    "line" : 16,
    "diffHunk" : "@@ -1,1 +66,70 @@/// Constructor not allocating the memory buffer, for external ownership.\n\nTMemFile::TMemBlock::TMemBlock(UChar_t* data, Long64_t size) :\n   fPrevious(nullptr), fNext(nullptr), fBuffer(data), fSize(size)\n{}"
  },
  {
    "id" : "fa94cda0-82fe-4289-b77a-5f4c58c3dc81",
    "prId" : 1763,
    "prUrl" : "https://github.com/root-project/root/pull/1763#pullrequestreview-107222446",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "09c9220d-c73d-41d2-a3a0-98cacc404737",
        "parentId" : null,
        "authorId" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "body" : "Why is this change needed?",
        "createdAt" : "2018-03-26T17:28:27Z",
        "updatedAt" : "2018-03-27T09:53:24Z",
        "lastEditedBy" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "tags" : [
        ]
      },
      {
        "id" : "719d99aa-e927-4f66-b77c-6c33f603ede2",
        "parentId" : "09c9220d-c73d-41d2-a3a0-98cacc404737",
        "authorId" : "09b7e073-cbeb-42e8-aa22-8b1468de56ae",
        "body" : "It's a drive-by improvement: `fBlockSeek` and `fBlockSeek->fBuffer` are dereferenced below, so they should be checked (not `fBlockList.fBuffer` which is \"contractually connected\" to `fBlockSeek->fBuffer`).",
        "createdAt" : "2018-03-27T09:51:34Z",
        "updatedAt" : "2018-03-27T09:53:24Z",
        "lastEditedBy" : "09b7e073-cbeb-42e8-aa22-8b1468de56ae",
        "tags" : [
        ]
      }
    ],
    "commit" : "b8e6c3d5ccfa4de34a2dadd4e95593c08682db67",
    "line" : 211,
    "diffHunk" : "@@ -1,1 +405,409 @@   TRACE(\"READ\")\n\n   if (fBlockSeek == nullptr || fBlockSeek->fBuffer == nullptr) {\n      errno = EBADF;\n      gSystem->SetErrorStr(\"The memory file is not open.\");"
  },
  {
    "id" : "4b21e033-7c16-4e59-8c7c-f55cbf536672",
    "prId" : 3891,
    "prUrl" : "https://github.com/root-project/root/pull/3891#pullrequestreview-245037955",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fd0ff9d3-802f-49e5-8e71-607db0480c50",
        "parentId" : null,
        "authorId" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "body" : "This seems to significantly change the ownership semantic of this signature (taking an std::shared_ptr).  What am I missing?",
        "createdAt" : "2019-06-03T14:06:50Z",
        "updatedAt" : "2019-06-14T20:08:49Z",
        "lastEditedBy" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "tags" : [
        ]
      },
      {
        "id" : "ab5490f0-c5d5-4272-a6dc-bf4e243cc035",
        "parentId" : "fd0ff9d3-802f-49e5-8e71-607db0480c50",
        "authorId" : "6f6f52c8-bace-4788-98aa-f12fb2560025",
        "body" : "How so? This reuses code by delegating to the other non-owning constructor. The ownership remains the same and is managed by the shared_ptr if the user chose that interface. ",
        "createdAt" : "2019-06-03T17:44:57Z",
        "updatedAt" : "2019-06-14T20:08:49Z",
        "lastEditedBy" : "6f6f52c8-bace-4788-98aa-f12fb2560025",
        "tags" : [
        ]
      },
      {
        "id" : "d8a86847-1523-4b4b-b497-3feb820b6b17",
        "parentId" : "fd0ff9d3-802f-49e5-8e71-607db0480c50",
        "authorId" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "body" : "I see that \r\n```\r\n   const ExternalDataPtr_t fExternalData; ///< shared file data / content\r\n```\r\nand replaced by\r\n```\r\n   Bool_t       fExternalData;            ///< If there is external data / content\r\n```\r\nI do not see where the new version can increment and later decrement the use count in the user's shared ptr.",
        "createdAt" : "2019-06-03T17:48:52Z",
        "updatedAt" : "2019-06-14T20:08:49Z",
        "lastEditedBy" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "tags" : [
        ]
      },
      {
        "id" : "a4168d8d-fe09-40a2-95b4-26ca051403ec",
        "parentId" : "fd0ff9d3-802f-49e5-8e71-607db0480c50",
        "authorId" : "6f6f52c8-bace-4788-98aa-f12fb2560025",
        "body" : "Ah, I see. Let me rethink that part.",
        "createdAt" : "2019-06-03T18:06:57Z",
        "updatedAt" : "2019-06-14T20:08:49Z",
        "lastEditedBy" : "6f6f52c8-bace-4788-98aa-f12fb2560025",
        "tags" : [
        ]
      }
    ],
    "commit" : "72969b5b940086694660211089245136887fcdb2",
    "line" : 34,
    "diffHunk" : "@@ -1,1 +138,142 @@/// Constructor to create a TMemFile re-using external storage.\n\nTMemFile::TMemFile(const char *path, ExternalDataPtr_t data)\n   : TMemFile(path, ExternalDataRange_t(data->data(), data->size()))\n{"
  }
]