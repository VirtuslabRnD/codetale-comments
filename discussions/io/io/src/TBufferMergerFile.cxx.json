[
  {
    "id" : "ace217b8-98c6-49ce-aad8-e2ad700e8d17",
    "prId" : 7286,
    "prUrl" : "https://github.com/root-project/root/pull/7286#pullrequestreview-600993525",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "dd08c434-e682-474e-b5a0-88745a662a56",
        "parentId" : null,
        "authorId" : "a66b5f61-1206-4ddd-b280-befb0005276f",
        "body" : "I think that if you want to treat `TTree`s in a special way, this is not where the special treatment code should go. It probably makes more sense to create a special merger based on `TBufferMerger` that is specific for `TTree`s. Besides, you are returning zero here, when you should be returning the number of bytes written. If someone tries to check the result for error, this will break their code.",
        "createdAt" : "2021-03-01T13:49:29Z",
        "updatedAt" : "2021-03-02T22:50:28Z",
        "lastEditedBy" : "a66b5f61-1206-4ddd-b280-befb0005276f",
        "tags" : [
        ]
      },
      {
        "id" : "25ff59d9-fc8b-47fd-9a08-fdee714fbea6",
        "parentId" : "dd08c434-e682-474e-b5a0-88745a662a56",
        "authorId" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "body" : "> I think that if you want to treat TTrees in a special way, this is not where the special treatment code should go\r\n\r\nIt is useful for both Histogram and TTree (it avoids the stream-compress-uncompress-unstream cycle and instead use directly the live object), since both are the bread and butter of the ROOT File I would venture that the version that does not support them (or support them slow) would be unused.\r\n\r\n> Besides, you are returning zero here, when you should be returning the number of bytes written.\r\n\r\nI have to re-review that.  In some cases the number of byte written might be zero even though it was succesful; for example if the file contains only histograms, the input data would be merged into the output histogram but it would not be written to the file.",
        "createdAt" : "2021-03-01T17:35:05Z",
        "updatedAt" : "2021-03-02T22:50:28Z",
        "lastEditedBy" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "tags" : [
        ]
      }
    ],
    "commit" : "42f6af2ad3d5063d76a91b41221663a6f815ac92",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +40,44 @@   if (fMerger.TryMerge(this)) {\n      ResetAfterMerge(0);\n      return 0;\n   }\n"
  },
  {
    "id" : "d4efc687-83c6-4970-b793-40b3662bfe9b",
    "prId" : 7286,
    "prUrl" : "https://github.com/root-project/root/pull/7286#pullrequestreview-601001053",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0d356b19-f4e3-4a0d-98bc-658daaebee1c",
        "parentId" : null,
        "authorId" : "a66b5f61-1206-4ddd-b280-befb0005276f",
        "body" : "Isn't this backwards? You probably want to compress if `fMerger.GetCompressTemporaryKeys()` is true.",
        "createdAt" : "2021-03-01T15:31:28Z",
        "updatedAt" : "2021-03-02T22:50:28Z",
        "lastEditedBy" : "a66b5f61-1206-4ddd-b280-befb0005276f",
        "tags" : [
        ]
      },
      {
        "id" : "e5a51442-8ee7-4542-83e0-a95896961ff5",
        "parentId" : "0d356b19-f4e3-4a0d-98bc-658daaebee1c",
        "authorId" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "body" : "indeed :( ",
        "createdAt" : "2021-03-01T17:43:24Z",
        "updatedAt" : "2021-03-02T22:50:28Z",
        "lastEditedBy" : "335eabbd-4b70-43fb-a046-bf82995f5dd3",
        "tags" : [
        ]
      }
    ],
    "commit" : "42f6af2ad3d5063d76a91b41221663a6f815ac92",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +45,49 @@   auto oldCompLevel = GetCompressionLevel();\n   if (!fMerger.GetCompressTemporaryKeys())\n      SetCompressionLevel(0);\n   Int_t nbytes = TMemFile::Write(name, opt, bufsize);\n   SetCompressionLevel(oldCompLevel);"
  }
]