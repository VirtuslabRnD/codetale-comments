[
  {
    "id" : "394b6b26-3322-4c74-a681-b9acfbc2d529",
    "prId" : 8442,
    "prUrl" : "https://github.com/apache/kafka/pull/8442#pullrequestreview-389594209",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d4b16ebf-2307-40a1-8895-249248c21e0c",
        "parentId" : null,
        "authorId" : "f1480a85-4082-46f9-89c6-fe7231733b83",
        "body" : "If I read this correctly, the guarantee here is that if a DLQ reporter is closed, its internal Kafka producer will also be closed.\r\n\r\nDo you think it would also make sense to add a test to ensure that when a `WorkerSinkTask` and `WorkerSourceTask`  are shut down, and/or a `RetryWithToleranceOperator` is closed, the underlying `ErrorReporter` instances are closed as well?",
        "createdAt" : "2020-04-08T00:40:24Z",
        "updatedAt" : "2020-04-29T18:26:24Z",
        "lastEditedBy" : "f1480a85-4082-46f9-89c6-fe7231733b83",
        "tags" : [
        ]
      },
      {
        "id" : "df10c6c2-2c5e-4600-a89b-a3e67eb1a994",
        "parentId" : "d4b16ebf-2307-40a1-8895-249248c21e0c",
        "authorId" : "12b658fc-2aaf-48e9-ad8b-15fd33dc8321",
        "body" : "I found ErrorHandlingTaskTest that seemed to be doing similar testing, and I managed to test the rest of the hierarchy (WorkerSourceTask/WorkerSinkTask -> RetryWithToleranceOperator -> ProcessingContext -> ErrorReporter) in just two tests.\r\n\r\nCombined with the DLQ reporter -> KafkaProducer test from the first commit, I think the testing is adequate now.",
        "createdAt" : "2020-04-08T01:20:10Z",
        "updatedAt" : "2020-04-29T18:26:24Z",
        "lastEditedBy" : "12b658fc-2aaf-48e9-ad8b-15fd33dc8321",
        "tags" : [
        ]
      },
      {
        "id" : "8b995b51-b74f-427c-8a8e-430fd9c45631",
        "parentId" : "d4b16ebf-2307-40a1-8895-249248c21e0c",
        "authorId" : "f1480a85-4082-46f9-89c6-fe7231733b83",
        "body" : "Agreed, looks great!",
        "createdAt" : "2020-04-08T01:22:38Z",
        "updatedAt" : "2020-04-29T18:26:24Z",
        "lastEditedBy" : "f1480a85-4082-46f9-89c6-fe7231733b83",
        "tags" : [
        ]
      }
    ],
    "commit" : "a101cd71114aee1d239d7cd61543c2f3e91fe893",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +148,152 @@\n    @Test\n    public void testCloseDLQ() {\n        DeadLetterQueueReporter deadLetterQueueReporter = new DeadLetterQueueReporter(\n            producer, config(singletonMap(SinkConnectorConfig.DLQ_TOPIC_NAME_CONFIG, DLQ_TOPIC)), TASK_ID, errorHandlingMetrics);"
  }
]