[
  {
    "id" : "6ea66f71-0b43-4d16-9a17-72ef62d1216f",
    "prId" : 13281,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "dc3912c6-f22d-4e7a-af81-c3ff4310ff8c",
        "parentId" : null,
        "authorId" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "body" : "maybe create a cleanup issue just to track this?\n",
        "createdAt" : "2015-08-28T21:00:46Z",
        "updatedAt" : "2015-08-28T21:00:46Z",
        "lastEditedBy" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "tags" : [
        ]
      },
      {
        "id" : "2ec88c4d-2763-4c1f-84cd-b161659dd531",
        "parentId" : "dc3912c6-f22d-4e7a-af81-c3ff4310ff8c",
        "authorId" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "body" : "#13281 \n",
        "createdAt" : "2015-08-28T21:22:00Z",
        "updatedAt" : "2015-08-28T21:22:00Z",
        "lastEditedBy" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "tags" : [
        ]
      }
    ],
    "commit" : "65087a40ba8aa11b63e85f97693b9eb0ab88e73a",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +21,25 @@set -o pipefail\n\n# TODO(zmerlynn): Blech, this belongs in build/common.sh, probably,\n# but common.sh sets up its readonly variables when its sourced, so\n# there's a chicken/egg issue getting it there and using it for"
  },
  {
    "id" : "e716b118-a435-4ebc-acdb-6e48c68ae5dd",
    "prId" : 12177,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "86ecdccf-2d0a-422d-8fc8-ebf818738983",
        "parentId" : null,
        "authorId" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "body" : "We're not running Jenkins with \"yes | build\" anymore, I don't think, are we?\n\nIf so, won't this hit https://github.com/GoogleCloudPlatform/kubernetes/blob/74b78d537df6dee6842573f2b78ea28dbdf87ade/build/common.sh#L910 ? \n",
        "createdAt" : "2015-08-03T23:32:01Z",
        "updatedAt" : "2015-08-04T00:02:08Z",
        "lastEditedBy" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "tags" : [
        ]
      },
      {
        "id" : "f321c042-7fd7-4d16-8197-deaae7735fd3",
        "parentId" : "86ecdccf-2d0a-422d-8fc8-ebf818738983",
        "authorId" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "body" : "We aren't. That's annoying.\n",
        "createdAt" : "2015-08-03T23:40:15Z",
        "updatedAt" : "2015-08-04T00:02:08Z",
        "lastEditedBy" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "tags" : [
        ]
      },
      {
        "id" : "5370dc57-ebc4-46c6-90a8-c2687a0211d9",
        "parentId" : "86ecdccf-2d0a-422d-8fc8-ebf818738983",
        "authorId" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "body" : "OTOH, this is doing exactly the same thing as pressing the \"retry build\" button on Jenkins, which usually seems to work.\n",
        "createdAt" : "2015-08-03T23:42:05Z",
        "updatedAt" : "2015-08-04T00:02:08Z",
        "lastEditedBy" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "tags" : [
        ]
      },
      {
        "id" : "fc39f97e-a528-4127-978d-02ee7e3fd5cf",
        "parentId" : "86ecdccf-2d0a-422d-8fc8-ebf818738983",
        "authorId" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "body" : "though if the \"make public\" step fails (https://github.com/GoogleCloudPlatform/kubernetes/blob/74b78d537df6dee6842573f2b78ea28dbdf87ade/build/common.sh#L936) there's no way it'll recover correctly, and that happens a fair bit. then we'd potentially \"succeed\" but the build would be private.\n",
        "createdAt" : "2015-08-03T23:46:43Z",
        "updatedAt" : "2015-08-04T00:02:08Z",
        "lastEditedBy" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "tags" : [
        ]
      },
      {
        "id" : "16008cd5-db86-44c8-96a3-2cd8cd87b642",
        "parentId" : "86ecdccf-2d0a-422d-8fc8-ebf818738983",
        "authorId" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "body" : "Nutty. Should we bother coding around it then or not? I've been thinking that we need an env variable for that eventually, but \"yes |\" is adequate as well if we just wanted to force it.\n",
        "createdAt" : "2015-08-03T23:47:52Z",
        "updatedAt" : "2015-08-04T00:02:08Z",
        "lastEditedBy" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "tags" : [
        ]
      },
      {
        "id" : "b024a265-5fa2-4e85-8005-89e890b09dd2",
        "parentId" : "86ecdccf-2d0a-422d-8fc8-ebf818738983",
        "authorId" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "body" : "I guess I can rework this so that `build/common.sh` retries gsutil if it fails. That's a more invasive change than I'd like, but I guess that's the only option.\n",
        "createdAt" : "2015-08-03T23:49:23Z",
        "updatedAt" : "2015-08-04T00:02:08Z",
        "lastEditedBy" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "tags" : [
        ]
      },
      {
        "id" : "6740abbf-a861-44aa-b871-dfb90f3f5b10",
        "parentId" : "86ecdccf-2d0a-422d-8fc8-ebf818738983",
        "authorId" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "body" : "added an environment variable to delete any existing release - PTAL\n",
        "createdAt" : "2015-08-04T00:03:23Z",
        "updatedAt" : "2015-08-04T00:03:23Z",
        "lastEditedBy" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "tags" : [
        ]
      }
    ],
    "commit" : "1289165aeb5340d8666514f88c4b923ffef5d823",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +37,41 @@attempt=0\nwhile [[ ${attempt} -lt ${MAX_ATTEMPTS} ]]; do\n  kube::release::gcs::release && kube::release::gcs::publish_latest && break || true\n  attempt=$((attempt + 1))\n  sleep 5"
  },
  {
    "id" : "22b3aeaa-1b28-4a80-b621-3f05b28c6dcb",
    "prId" : 3238,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "91f97b5f-557d-4ff0-82e9-15475a5cd63b",
        "parentId" : null,
        "authorId" : "e19009d8-ed5c-45bb-b5ce-4f8d956c6c45",
        "body" : "I like using `git describe` but there is a problem -- it won't sort lexicographically.  It is of the form `v0.7.0-348-g58abb40`.  The version number will work but the number of patches since the tag isn't zero padded.  We'll also face this issue when we hit `v0.10`.\n\nPerhaps mix the date-time in there?\n\nOr we can just declare it not a problem and do the sorting client side when we present this stuff.\n",
        "createdAt" : "2015-01-07T17:28:48Z",
        "updatedAt" : "2015-01-07T17:28:48Z",
        "lastEditedBy" : "e19009d8-ed5c-45bb-b5ce-4f8d956c6c45",
        "tags" : [
        ]
      },
      {
        "id" : "7b6a2bc5-ea38-45cd-b708-68c0f4368879",
        "parentId" : "91f97b5f-557d-4ff0-82e9-15475a5cd63b",
        "authorId" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "body" : "We talked about this offline and pushed the problem on the client. (Sorry, future clients.) Another way I considered approaching this, BTW, is to actually do something like a \"git log --pretty=oneline\" and dumping that alongside, so the client can have a sorted record, but I'm not sure what the equivalent is for sorted describe record.\n",
        "createdAt" : "2015-01-07T17:52:31Z",
        "updatedAt" : "2015-01-07T17:52:31Z",
        "lastEditedBy" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "tags" : [
        ]
      }
    ],
    "commit" : "e66e30183b0b62ea9d1fa5bb51f5fc0c9e9a38bc",
    "line" : 23,
    "diffHunk" : "@@ -1,1 +21,25 @@set -o pipefail\n\nLATEST=$(git describe)\nKUBE_GCS_NO_CACHING=n\nKUBE_GCS_MAKE_PUBLIC=y"
  },
  {
    "id" : "5ed02199-1370-4344-9186-7124ab412eb1",
    "prId" : 3238,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "009f9aec-18fa-4ff8-9879-e483a51dff08",
        "parentId" : null,
        "authorId" : "e19009d8-ed5c-45bb-b5ce-4f8d956c6c45",
        "body" : "This double negative sucks.  I should reverse that at some point.\n",
        "createdAt" : "2015-01-07T17:30:33Z",
        "updatedAt" : "2015-01-07T17:30:33Z",
        "lastEditedBy" : "e19009d8-ed5c-45bb-b5ce-4f8d956c6c45",
        "tags" : [
        ]
      },
      {
        "id" : "769774bd-a260-44e3-91a0-dd46761bf527",
        "parentId" : "009f9aec-18fa-4ff8-9879-e483a51dff08",
        "authorId" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "body" : "Acknowledged.\n",
        "createdAt" : "2015-01-07T17:52:37Z",
        "updatedAt" : "2015-01-07T17:52:37Z",
        "lastEditedBy" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "tags" : [
        ]
      }
    ],
    "commit" : "e66e30183b0b62ea9d1fa5bb51f5fc0c9e9a38bc",
    "line" : 24,
    "diffHunk" : "@@ -1,1 +22,26 @@\nLATEST=$(git describe)\nKUBE_GCS_NO_CACHING=n\nKUBE_GCS_MAKE_PUBLIC=y\nKUBE_GCS_UPLOAD_RELEASE=y"
  }
]