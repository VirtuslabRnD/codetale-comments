[
  {
    "id" : "66805454-d11b-4d3a-81bd-40e8f89562c3",
    "prId" : 75678,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/75678#pullrequestreview-218499571",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9674acdd-ad36-457a-8591-2f0c275c055d",
        "parentId" : null,
        "authorId" : "1d64c6d6-d80c-410e-ad32-a43967da03cf",
        "body" : "Should this be 1.0.0 (No `v`)?\r\nhttps://pantheon.corp.google.com/gcr/images/google-containers/GLOBAL/debian-base@sha256:d292fd380195fb09fa4e2f1d3303158edd7cd5e4843c3cabc99ac0494f1329fd/details?tab=info",
        "createdAt" : "2019-03-25T18:07:42Z",
        "updatedAt" : "2019-03-25T19:10:35Z",
        "lastEditedBy" : "1d64c6d6-d80c-410e-ad32-a43967da03cf",
        "tags" : [
        ]
      }
    ],
    "commit" : "d5546901104bc14a70699c301190c519cfa4abe7",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +19,23 @@BUILD_IMAGE ?= debian-build\n\nTAG ?= v1.0.0\n\nTAR_FILE ?= rootfs.tar"
  },
  {
    "id" : "084d2284-20e7-43bb-b780-cf161bb16a67",
    "prId" : 69820,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/69820#pullrequestreview-164873923",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b293b242-bbef-44bb-89e8-ea6d044787fd",
        "parentId" : null,
        "authorId" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "body" : "To explain this: `make` doesn't let you do equality checks in variable assignment, so this is next best option. Basically, `filter pattern,text` returns whitespace-separated words from `text` that match the `pattern`, so here we're returning `0` when the user is root and empty string otherwise.\r\n\r\nthe `if` in variable assignment considers nonempty strings as true, empty strings as false. thus when the effective user id is 0 (i.e. you're root), `filter` returns `0`, which evaluates to true, and so we don't use `sudo`. Otherwise we do.",
        "createdAt" : "2018-10-15T20:05:37Z",
        "updatedAt" : "2018-10-17T06:42:40Z",
        "lastEditedBy" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "tags" : [
        ]
      },
      {
        "id" : "7001cfac-08ef-4a09-b1d2-682a5bd4462e",
        "parentId" : "b293b242-bbef-44bb-89e8-ea6d044787fd",
        "authorId" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "body" : "(this implementation was basically copied from https://stackoverflow.com/a/9008922/9723266.)",
        "createdAt" : "2018-10-15T20:07:12Z",
        "updatedAt" : "2018-10-17T06:42:40Z",
        "lastEditedBy" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "tags" : [
        ]
      }
    ],
    "commit" : "a88244598a121ead3e56dedbb381c99880723b23",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +28,32 @@QEMUVERSION=v2.9.1\n\nSUDO=$(if $(filter 0,$(shell id -u)),,sudo)\n\n# This option is for running docker manifest command"
  },
  {
    "id" : "952dccea-d9d5-4ea5-8689-be74a52d3fae",
    "prId" : 52744,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/52744#pullrequestreview-74147271",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "96b4f42d-033d-499c-b633-7decc0ffe5a7",
        "parentId" : null,
        "authorId" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "body" : "I'm having trouble building the base image for s390x. It seems the `/sbin/ldconfig` binary in `debian:stretch` is either broken or doesn't work with qemu:\r\n```\r\nProcessing triggers for libc-bin (2.24-11+deb9u1) ...\r\n/var/lib/dpkg/info/libc-bin.postinst: 49: /var/lib/dpkg/info/libc-bin.postinst: ldconfig: Exec format error\r\n/var/lib/dpkg/info/libc-bin.postinst: 49: /var/lib/dpkg/info/libc-bin.postinst: ldconfig: Exec format error\r\ndpkg: error processing package libc-bin (--configure):\r\n subprocess installed post-installation script returned error exit status 2\r\nErrors were encountered while processing:\r\n libc-bin\r\n```\r\n@gajju26 ",
        "createdAt" : "2017-10-31T22:43:47Z",
        "updatedAt" : "2017-11-10T15:54:31Z",
        "lastEditedBy" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "tags" : [
        ]
      },
      {
        "id" : "a75d8ffa-94ec-4201-9734-5557b90d6316",
        "parentId" : "96b4f42d-033d-499c-b633-7decc0ffe5a7",
        "authorId" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "body" : "From `debian:jessie`:\r\n```\r\nroot@219babe053eb:/# file /sbin/ldconfig\r\n/sbin/ldconfig: POSIX shell script, ASCII text executable\r\nroot@219babe053eb:/# file /sbin/ldconfig.real\r\n/sbin/ldconfig.real: ELF 64-bit MSB executable, IBM S/390, version 1 (SYSV), statically linked, for GNU/Linux 2.6.32, BuildID[sha1]=0489f9fffcaa0413e00565d6b53344244f686103, stripped\r\n```\r\n\r\nFrom `debian:stretch`:\r\n```\r\nroot@1343b24ec59d:/# file /sbin/ldconfig\r\n/sbin/ldconfig: ELF 64-bit MSB executable, IBM S/390, version 1 (GNU/Linux), statically linked, for GNU/Linux 3.2.0, BuildID[sha1]=90b64604014aafac9c1a0623b1cf447281d1a382, stripped\r\n```\r\n\r\nI'm guessing that `GNU/Linux` vs `SYSV` difference might be the issue? Not sure how to resolve, though.",
        "createdAt" : "2017-10-31T22:51:05Z",
        "updatedAt" : "2017-11-10T15:54:31Z",
        "lastEditedBy" : "719d0e19-fcef-4b47-afac-404318b9514f",
        "tags" : [
        ]
      },
      {
        "id" : "cbe65eb5-7286-4f6e-b74f-a6b89d9967e8",
        "parentId" : "96b4f42d-033d-499c-b633-7decc0ffe5a7",
        "authorId" : "3eccedfc-5c53-4555-94cb-69f2b56e485c",
        "body" : "@ixdy i submitted an issue upstream. When I download the various released qemu-static binaries from the 2.9.1 tag, their release version tell me 2.9.0.",
        "createdAt" : "2017-11-01T02:41:31Z",
        "updatedAt" : "2017-11-10T15:54:31Z",
        "lastEditedBy" : "3eccedfc-5c53-4555-94cb-69f2b56e485c",
        "tags" : [
        ]
      },
      {
        "id" : "e6ca97f5-0a1f-4685-99f9-cbf1d559f3bb",
        "parentId" : "96b4f42d-033d-499c-b633-7decc0ffe5a7",
        "authorId" : "3eccedfc-5c53-4555-94cb-69f2b56e485c",
        "body" : "I also created a fix to mask off the e_ident ELF flags from the binfmt 390x files in the qemu-user-static project.\r\n\r\nI will update this issue once the patch gets merged upstream in the qemu-user-static project.\r\n\r\nhttps://github.com/multiarch/qemu-user-static/pull/31",
        "createdAt" : "2017-11-03T16:41:54Z",
        "updatedAt" : "2017-11-10T15:54:31Z",
        "lastEditedBy" : "3eccedfc-5c53-4555-94cb-69f2b56e485c",
        "tags" : [
        ]
      },
      {
        "id" : "835d58bb-d5c3-4fd4-bdf8-2590251d026c",
        "parentId" : "96b4f42d-033d-499c-b633-7decc0ffe5a7",
        "authorId" : "3eccedfc-5c53-4555-94cb-69f2b56e485c",
        "body" : "Tested a local build with this upstream patch. The s390x image successfully gets built.",
        "createdAt" : "2017-11-03T16:58:10Z",
        "updatedAt" : "2017-11-10T15:54:31Z",
        "lastEditedBy" : "3eccedfc-5c53-4555-94cb-69f2b56e485c",
        "tags" : [
        ]
      }
    ],
    "commit" : "66965daf56acce68424b1b60283017f5e0d73050",
    "line" : 33,
    "diffHunk" : "@@ -1,1 +42,46 @@endif\nifeq ($(ARCH),s390x)\n\tBASEIMAGE?=s390x/debian:stretch\n\tQEMUARCH=s390x\nendif"
  }
]