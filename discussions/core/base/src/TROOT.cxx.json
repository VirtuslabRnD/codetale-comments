[
  {
    "id" : "d87a51a1-fa65-4148-a9e0-97d9e53656a9",
    "prId" : 130,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9f04e8ae-8195-4224-92e9-c320211a4c5d",
        "parentId" : null,
        "authorId" : "09b7e073-cbeb-42e8-aa22-8b1468de56ae",
        "body" : "Could `IgnorePrefix()` return `false` if `ROOTPREFIX` is not defined (I think ROOTPREFIX defined or not means ROOTBINDIR etc defined or not, so testing for one should be sufficient for all)? Then the logic here (and below) should become much simpler. Then maybe rename `IgnorePrefix()` into `UsePrefix()` and invert the logic.\n",
        "createdAt" : "2016-01-19T10:49:57Z",
        "updatedAt" : "2017-01-17T12:00:15Z",
        "lastEditedBy" : "09b7e073-cbeb-42e8-aa22-8b1468de56ae",
        "tags" : [
        ]
      }
    ],
    "commit" : "ac0702ca547393945b5880ded3ef317c80d1d269",
    "line" : 108,
    "diffHunk" : "@@ -1,1 +2688,2692 @@const TString& TROOT::GetRootSys() {\n#ifdef ROOTPREFIX\n   if (IgnorePrefix()) {\n#endif\n      static TString rootsys;"
  },
  {
    "id" : "8a703073-8822-4aff-8dfc-3e92942b593c",
    "prId" : 130,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5b22097e-4630-4745-b784-6a2f0f41c4c4",
        "parentId" : null,
        "authorId" : "09b7e073-cbeb-42e8-aa22-8b1468de56ae",
        "body" : "I'm scared about the thread-safety of this... Can we do\n\n```\nconst char* GetRootSysImpl() {\n  if (const char* rsEnv = gSystem->Getenv(\"ROOTSYS\")) {\n    return rsEnv;\n  }\n  return gRootDir;\n}\n```\n\nand then\n\n```\nstatic TString rootsys = GetRootSysImpl();\n```\n\n(or something that actually compiles, and enforces thread safety through initialization?) Same for the other incarnations below.\n",
        "createdAt" : "2016-01-19T10:54:15Z",
        "updatedAt" : "2017-01-17T12:00:15Z",
        "lastEditedBy" : "09b7e073-cbeb-42e8-aa22-8b1468de56ae",
        "tags" : [
        ]
      }
    ],
    "commit" : "ac0702ca547393945b5880ded3ef317c80d1d269",
    "line" : 111,
    "diffHunk" : "@@ -1,1 +2691,2695 @@#endif\n      static TString rootsys;\n      if (rootsys.IsNull())\n         rootsys = gSystem->Getenv(\"ROOTSYS\");\n      if (rootsys.IsNull())"
  },
  {
    "id" : "289a02f1-6058-4f90-8a6b-d6e82cf949af",
    "prId" : 130,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d215f94d-97ef-47c4-a306-3c3559c09fb3",
        "parentId" : null,
        "authorId" : "09b7e073-cbeb-42e8-aa22-8b1468de56ae",
        "body" : "Can we combine those 12 into (or a subset, e.g. the ROOTSYS-derived ones) into one, instead of having near-duplicate bodies? And yes, this might involve preprocessor macros :-(\n",
        "createdAt" : "2016-01-19T10:58:42Z",
        "updatedAt" : "2017-01-17T12:00:15Z",
        "lastEditedBy" : "09b7e073-cbeb-42e8-aa22-8b1468de56ae",
        "tags" : [
        ]
      }
    ],
    "commit" : "ac0702ca547393945b5880ded3ef317c80d1d269",
    "line" : 347,
    "diffHunk" : "@@ -1,1 +2921,2925 @@      const static TString ttffontdir = TTFFONTDIR;\n      return ttffontdir;\n   }\n#endif\n}"
  }
]