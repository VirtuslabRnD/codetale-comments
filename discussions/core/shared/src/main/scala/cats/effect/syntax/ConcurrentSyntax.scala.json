[
  {
    "id" : "d394d362-ded7-4b5e-987f-061d6fb06e07",
    "prId" : 640,
    "prUrl" : "https://github.com/typelevel/cats-effect/pull/640#pullrequestreview-318045707",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "550c0bd5-8af2-4843-ad37-f693f1c59c56",
        "parentId" : null,
        "authorId" : "5b44dcf3-8819-42b0-9a49-4cdbf5a8a305",
        "body" : "Are you sure that's what this does? I'm pretty sure it starts a background process, then waits 5 seconds and cancels it. If it's already completed, the result is just lost.\r\n\r\nI think the correct implementation here would be as follows:\r\n\r\n```scala\r\nlongProcess.background.use(await => race(sleep(5.seconds), await)).map(_.toOption)\r\n```\r\n\r\nThough note this still isn't *quite* the same as `timeout`, since it returns an `F[Option[A]]` rather than sequencing a `TimeoutException`.",
        "createdAt" : "2019-10-04T16:12:29Z",
        "updatedAt" : "2019-12-06T19:05:52Z",
        "lastEditedBy" : "5b44dcf3-8819-42b0-9a49-4cdbf5a8a305",
        "tags" : [
        ]
      },
      {
        "id" : "95a1b18d-7936-48c1-a5a2-8162fb21aeb2",
        "parentId" : "550c0bd5-8af2-4843-ad37-f693f1c59c56",
        "authorId" : "df537f5b-c150-4710-8eb4-40b8b59c3bcc",
        "body" : "I think my comment was wrong, but so was yours! It actually doesn't cancel, just waits for the process forever, after 5 seconds of sleeping...",
        "createdAt" : "2019-10-05T13:42:03Z",
        "updatedAt" : "2019-12-06T19:05:52Z",
        "lastEditedBy" : "df537f5b-c150-4710-8eb4-40b8b59c3bcc",
        "tags" : [
        ]
      },
      {
        "id" : "2e4bb465-cd2c-45d5-97e9-ae7e6fe5f7b9",
        "parentId" : "550c0bd5-8af2-4843-ad37-f693f1c59c56",
        "authorId" : "df537f5b-c150-4710-8eb4-40b8b59c3bcc",
        "body" : "I'll come up with a better example.",
        "createdAt" : "2019-10-05T13:42:27Z",
        "updatedAt" : "2019-12-06T19:05:52Z",
        "lastEditedBy" : "df537f5b-c150-4710-8eb4-40b8b59c3bcc",
        "tags" : [
        ]
      },
      {
        "id" : "576dca00-9274-48a7-ab51-7e5e19fa751c",
        "parentId" : "550c0bd5-8af2-4843-ad37-f693f1c59c56",
        "authorId" : "df537f5b-c150-4710-8eb4-40b8b59c3bcc",
        "body" : "Actually, my dumb October brain was wrong again, your version looks correct now... I'll get back to this sometime soon.",
        "createdAt" : "2019-11-17T21:29:04Z",
        "updatedAt" : "2019-12-06T19:05:52Z",
        "lastEditedBy" : "df537f5b-c150-4710-8eb4-40b8b59c3bcc",
        "tags" : [
        ]
      }
    ],
    "commit" : "d899a98908037a5128c42076ee59a8d0207f5f09",
    "line" : 43,
    "diffHunk" : "@@ -1,1 +68,72 @@   * {{{\n   *   longProcess.background.use(await => anotherProcess *> await)\n   * }}}\n   *\n   * In case the result of such an action is canceled, both processes will receive cancelation signals."
  }
]