[
  {
    "id" : "f41bdf48-829c-41b7-b8fb-c68ca1ef2f91",
    "prId" : 4949,
    "prUrl" : "https://github.com/zio/zio/pull/4949#pullrequestreview-633440302",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8a85dd0d-b7a4-4959-87ee-537dd72987f1",
        "parentId" : null,
        "authorId" : "6080cd8f-e671-4d49-a54c-b6159456ac0e",
        "body" : "Does it make sesne to keep the old `withPermit`?",
        "createdAt" : "2021-04-12T07:36:39Z",
        "updatedAt" : "2021-04-17T06:43:20Z",
        "lastEditedBy" : "6080cd8f-e671-4d49-a54c-b6159456ac0e",
        "tags" : [
        ]
      },
      {
        "id" : "a2d5e872-6758-4d9f-b28d-0198be92248a",
        "parentId" : "8a85dd0d-b7a4-4959-87ee-537dd72987f1",
        "authorId" : "e51a12a9-b5b7-4e30-a51d-293206825c6f",
        "body" : "One of the challenges of this is creating an API that feels natural both when you are using it as just a `Semaphore` and when you are using it as a `TSemaphore`.\r\n\r\nI thought making the `withPermit` variants take a `ZIO` effect and having everything else return an `STM` effect struck a nice balance because `withPermit` variants were the only ones used with `Semaphore` before and created a clear communication message of `withPermit` for basic stuff, other operators for fancy stuff.\r\n\r\nAlso I think for STM there is less need for it because you don't have to worry about interruption within STM and I think most of the time if you are using STM you want to compose it with other things.\r\n\r\nSo I would be inclined to keep it as is but maybe there is a use case I am missing.",
        "createdAt" : "2021-04-12T11:34:52Z",
        "updatedAt" : "2021-04-17T06:43:20Z",
        "lastEditedBy" : "e51a12a9-b5b7-4e30-a51d-293206825c6f",
        "tags" : [
        ]
      },
      {
        "id" : "f5015903-6209-4257-8a43-351f52856097",
        "parentId" : "8a85dd0d-b7a4-4959-87ee-537dd72987f1",
        "authorId" : "6080cd8f-e671-4d49-a54c-b6159456ac0e",
        "body" : "Agreed, let's keep it this way. ",
        "createdAt" : "2021-04-12T11:45:55Z",
        "updatedAt" : "2021-04-17T06:43:20Z",
        "lastEditedBy" : "6080cd8f-e671-4d49-a54c-b6159456ac0e",
        "tags" : [
        ]
      }
    ],
    "commit" : "1f3223dab208f0155a143028dad6fef1d0f32918",
    "line" : 85,
    "diffHunk" : "@@ -1,1 +98,102 @@   */\n  def withPermit[R, E, A](zio: ZIO[R, E, A]): ZIO[R, E, A] =\n    withPermits(1L)(zio)\n\n  /**"
  },
  {
    "id" : "1c49d155-6136-4a10-b01d-6ae466bc6973",
    "prId" : 2093,
    "prUrl" : "https://github.com/zio/zio/pull/2093#pullrequestreview-310767910",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6079e222-964c-4d8d-8a95-d8665de8f877",
        "parentId" : null,
        "authorId" : "6080cd8f-e671-4d49-a54c-b6159456ac0e",
        "body" : "You can probably save some typing by replacing `flatMap { _ => ... }` with `*>`, other than that it looks good.",
        "createdAt" : "2019-11-02T12:03:14Z",
        "updatedAt" : "2019-11-02T12:03:14Z",
        "lastEditedBy" : "6080cd8f-e671-4d49-a54c-b6159456ac0e",
        "tags" : [
        ]
      }
    ],
    "commit" : "196e31381a33c96c71bdb4875f5b2c0fc0c2aa92",
    "line" : 10,
    "diffHunk" : "@@ -1,1 +21,25 @@\n  final def acquireN(n: Long): STM[Nothing, Unit] =\n    assertNonNegative(n).flatMap { _ =>\n      permits.get.flatMap { value =>\n        STM.check(value >= n).flatMap { _ =>"
  }
]