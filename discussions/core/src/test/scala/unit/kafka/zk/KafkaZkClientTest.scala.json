[
  {
    "id" : "805a5103-c539-4056-83ef-79f06dbda573",
    "prId" : 4351,
    "prUrl" : "https://github.com/apache/kafka/pull/4351#pullrequestreview-85275179",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "08eddb2d-bcd0-491c-a8d3-085499d131cd",
        "parentId" : null,
        "authorId" : "d8c7cf80-a55a-474c-a4f4-f60a9efda52c",
        "body" : "Nit: we can assert that that the cluster id is `Some(clusterId)`.",
        "createdAt" : "2017-12-22T10:21:45Z",
        "updatedAt" : "2017-12-22T10:27:01Z",
        "lastEditedBy" : "d8c7cf80-a55a-474c-a4f4-f60a9efda52c",
        "tags" : [
        ]
      }
    ],
    "commit" : "d10b7657e7d5ebc621fbbf1c9ed6402af7cc63a1",
    "line" : 44,
    "diffHunk" : "@@ -1,1 +436,440 @@\n    zkClient.createOrGetClusterId(clusterId)\n    assertEquals(clusterId, zkClient.getClusterId.getOrElse(fail(\"No cluster id found\")))\n   }\n"
  },
  {
    "id" : "d08eb9e3-8b8f-44ad-a9d2-999177283bd0",
    "prId" : 4351,
    "prUrl" : "https://github.com/apache/kafka/pull/4351#pullrequestreview-85275179",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d0768228-936e-42cc-878c-ca6fbae052f7",
        "parentId" : null,
        "authorId" : "d8c7cf80-a55a-474c-a4f4-f60a9efda52c",
        "body" : "Nit: path is usually in the previous line.",
        "createdAt" : "2017-12-22T10:22:26Z",
        "updatedAt" : "2017-12-22T10:27:01Z",
        "lastEditedBy" : "d8c7cf80-a55a-474c-a4f4-f60a9efda52c",
        "tags" : [
        ]
      }
    ],
    "commit" : "d10b7657e7d5ebc621fbbf1c9ed6402af7cc63a1",
    "line" : 58,
    "diffHunk" : "@@ -1,1 +450,454 @@\n    ZkData.PersistentZkPaths.foreach {\n      path => assertTrue(zkClient.pathExists(path))\n    }\n  }"
  },
  {
    "id" : "32cc5a51-b358-4f13-87c2-b5634608d30c",
    "prId" : 4596,
    "prUrl" : "https://github.com/apache/kafka/pull/4596#pullrequestreview-100620483",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c4dedcca-7c0c-463c-b6e2-268d4d88914f",
        "parentId" : null,
        "authorId" : "59cacbc1-03b4-44ce-a116-f97bd9e598a4",
        "body" : "Is this the intended behavior?\r\n`registerBrokerInZk` prohibits other brokers/zkClients to register with the same id. I would say update should probably behave the same way and it should not allow updating brokerInfo of other brokers/zkClients.\r\nIn the current code I couldn't find a place where updating of other server's config is needed: I could find only one non-test place where update is used, in `DynamicListenerConfig`, but it's in this case the server updates its own config. ",
        "createdAt" : "2018-02-20T09:59:00Z",
        "updatedAt" : "2018-03-01T22:48:10Z",
        "lastEditedBy" : "59cacbc1-03b4-44ce-a116-f97bd9e598a4",
        "tags" : [
        ]
      },
      {
        "id" : "251e6786-140a-4e39-b25a-ce7ddb6273c0",
        "parentId" : "c4dedcca-7c0c-463c-b6e2-268d4d88914f",
        "authorId" : "59cacbc1-03b4-44ce-a116-f97bd9e598a4",
        "body" : "@junrao is the current behavior ok?",
        "createdAt" : "2018-03-01T05:09:32Z",
        "updatedAt" : "2018-03-01T22:48:10Z",
        "lastEditedBy" : "59cacbc1-03b4-44ce-a116-f97bd9e598a4",
        "tags" : [
        ]
      },
      {
        "id" : "b66f42b4-d685-431e-922b-5f68adce695e",
        "parentId" : "c4dedcca-7c0c-463c-b6e2-268d4d88914f",
        "authorId" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "body" : "updateBrokerInfoInZk() is only called when a broker updates some of the configs and the same brokerId will be used. So, this seems ok for now. It may be useful to guard this better. Not sure if there is an easy way though.",
        "createdAt" : "2018-03-01T22:37:29Z",
        "updatedAt" : "2018-03-01T22:48:10Z",
        "lastEditedBy" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "tags" : [
        ]
      }
    ],
    "commit" : "6e2b0c8a6d7003c6c14373983ff6e06405fbcde9",
    "line" : 377,
    "diffHunk" : "@@ -1,1 +681,685 @@    // Other ZK clients can update info\n    otherZkClient.updateBrokerInfoInZk(originalBrokerInfo)\n    assertEquals(Some(originalBrokerInfo.broker), otherZkClient.getBroker(1))\n  }\n"
  },
  {
    "id" : "e49eb9fc-98a3-4bb3-a53b-a977995e1065",
    "prId" : 5575,
    "prUrl" : "https://github.com/apache/kafka/pull/5575#pullrequestreview-172025492",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "aa25e7a2-7166-4299-b34f-92909b87827a",
        "parentId" : null,
        "authorId" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "body" : "Could we further verify that the czxid of the ephemeral node is different?",
        "createdAt" : "2018-11-05T21:32:08Z",
        "updatedAt" : "2018-11-08T18:13:38Z",
        "lastEditedBy" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "tags" : [
        ]
      },
      {
        "id" : "047cc19a-954c-4b68-a76d-c03f8ad63ccd",
        "parentId" : "aa25e7a2-7166-4299-b34f-92909b87827a",
        "authorId" : "d247117d-335e-4fd3-b317-b598d1fea4b3",
        "body" : "Yes, thanks, good idea, doing it.",
        "createdAt" : "2018-11-06T13:52:26Z",
        "updatedAt" : "2018-11-08T18:13:38Z",
        "lastEditedBy" : "d247117d-335e-4fd3-b317-b598d1fea4b3",
        "tags" : [
        ]
      }
    ],
    "commit" : "b0e2df540d41a0b83892bdbb759af229223c94d9",
    "line" : 48,
    "diffHunk" : "@@ -1,1 +707,711 @@\n    // The broker info should be the same, no error should be raised\n    assertEquals(Some(expiredBrokerInfo.broker), expiredSessionZkClient.getBroker(brokerId))\n    val newCzxid = expiredSessionZkClient.getPathCzxid(BrokerIdZNode.path(brokerId))\n"
  },
  {
    "id" : "50f539fd-98aa-4812-9236-589a9ee0610a",
    "prId" : 5575,
    "prUrl" : "https://github.com/apache/kafka/pull/5575#pullrequestreview-172764411",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "12de4dd5-9825-4294-b4a6-2b64b4398ffb",
        "parentId" : null,
        "authorId" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "body" : "Could we add a new line above?",
        "createdAt" : "2018-11-08T00:44:30Z",
        "updatedAt" : "2018-11-08T18:13:38Z",
        "lastEditedBy" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "tags" : [
        ]
      }
    ],
    "commit" : "b0e2df540d41a0b83892bdbb759af229223c94d9",
    "line" : 70,
    "diffHunk" : "@@ -1,1 +1151,1155 @@    }\n\n    def getPathCzxid(path: String): Long = {\n      val getDataRequest = GetDataRequest(path)\n      val getDataResponse = retryRequestUntilConnected(getDataRequest)"
  },
  {
    "id" : "1c117cce-72b4-4bd9-b604-e0522101ef30",
    "prId" : 8062,
    "prUrl" : "https://github.com/apache/kafka/pull/8062#pullrequestreview-362193457",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4d3cc868-cdb4-4179-9763-5f25256ee57c",
        "parentId" : null,
        "authorId" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "body" : "This means this unit test always needs to wait for 5 secs? That's probably too long.",
        "createdAt" : "2020-02-19T18:18:44Z",
        "updatedAt" : "2020-02-21T17:02:14Z",
        "lastEditedBy" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "tags" : [
        ]
      },
      {
        "id" : "73f112fe-7aa2-4943-bf86-f09feedd1941",
        "parentId" : "4d3cc868-cdb4-4179-9763-5f25256ee57c",
        "authorId" : "59ca7821-b29c-4f24-a9d5-cbd394145686",
        "body" : "Correct. I have reduced it to 1s.",
        "createdAt" : "2020-02-20T20:00:03Z",
        "updatedAt" : "2020-02-21T17:02:14Z",
        "lastEditedBy" : "59ca7821-b29c-4f24-a9d5-cbd394145686",
        "tags" : [
        ]
      }
    ],
    "commit" : "121563432c3413d213007d3cc42171ae5afd3c0c",
    "line" : 47,
    "diffHunk" : "@@ -1,1 +228,232 @@    zkClient.createTopicAssignment(topic1, Map.empty)\n\n    assertFalse(\"Received watch notification\",\n      latch.await(100, TimeUnit.MILLISECONDS))\n"
  }
]