[
  {
    "id" : "bfe834e3-2b36-4d96-a6ba-f9c49c8c3cf2",
    "prId" : 5678,
    "prUrl" : "https://github.com/apache/kafka/pull/5678#pullrequestreview-160348281",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ea0cb2dd-06df-4113-bf6e-072e47acc3c0",
        "parentId" : null,
        "authorId" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "body" : "This is an existing issue. What's described in the comment is true if the controller is not on the bounced broker. Otherwise, the controller may not need to bump up the leader epoch if the controller sees the restarted broker on controller failover. So, we probably want to start the first broker and assert the controller is active on it, before starting the 2nd broker.",
        "createdAt" : "2018-10-01T19:47:21Z",
        "updatedAt" : "2018-10-03T17:40:09Z",
        "lastEditedBy" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "tags" : [
        ]
      }
    ],
    "commit" : "9bece85a158a9e4ce023095dbf49fc5048bb964a",
    "line" : 92,
    "diffHunk" : "@@ -1,1 +178,182 @@\n    //Then epoch 2 should be the leo (NB: The leader epoch goes up in factors of 2 -\n    //This is because we have to first change leader to -1 and then change it again to the live replica)\n    //Note that the expected leader changes depend on the controller being on broker 100, which is not restarted\n    epochEndOffset = fetcher.leaderOffsetsFor(Map(tp -> 2))(tp)"
  }
]