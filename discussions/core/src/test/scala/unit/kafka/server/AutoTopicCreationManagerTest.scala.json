[
  {
    "id" : "b1e03797-5112-4696-b9a2-50829a2c245f",
    "prId" : 10142,
    "prUrl" : "https://github.com/apache/kafka/pull/10142#pullrequestreview-628010709",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "09189f02-df59-4ecd-bd72-6da191589d44",
        "parentId" : null,
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "Maybe I am missing it, but where is the validation? How do we know that the envelope includes the serialized principal? Maybe we could verify the call to `brokerToController.sendRequest`?",
        "createdAt" : "2021-04-02T00:05:21Z",
        "updatedAt" : "2021-04-05T18:57:38Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      },
      {
        "id" : "81eef2f5-b087-489a-90cd-a12c60a26fe7",
        "parentId" : "09189f02-df59-4ecd-bd72-6da191589d44",
        "authorId" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "body" : "I was validating the same principal in principal serde call, see \r\n```\r\nassertEquals(principal, userPrincipal)\r\n\r\n```\r\nwill also add a boolean flag to indicate it's being called.",
        "createdAt" : "2021-04-02T06:14:05Z",
        "updatedAt" : "2021-04-05T18:57:38Z",
        "lastEditedBy" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "tags" : [
        ]
      },
      {
        "id" : "4435ff67-48ca-47ff-88fd-913fff812662",
        "parentId" : "09189f02-df59-4ecd-bd72-6da191589d44",
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "This ensures that an attempt was made to serialize the principal, but how do we know that it made it to the envelope? I think it would be better to intercept the request that is sent to the channel and verify it directly.",
        "createdAt" : "2021-04-05T17:24:49Z",
        "updatedAt" : "2021-04-05T18:57:38Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      }
    ],
    "commit" : "e9243cb580911efdb5f0b2266fe13f9ea5f151ec",
    "line" : 59,
    "diffHunk" : "@@ -1,1 +244,248 @@    val requestContext = initializeRequestContext(topicName, userPrincipal, Optional.of(principalSerde))\n\n    autoTopicCreationManager.createTopics(\n      Set(topicName), UnboundedControllerMutationQuota, Some(requestContext))\n"
  }
]