[
  {
    "id" : "3cdd80fa-c457-4498-a327-2314b894ae54",
    "prId" : 9032,
    "prUrl" : "https://github.com/apache/kafka/pull/9032#pullrequestreview-466369544",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9884ab94-2c4f-4ba2-9acb-480a21132dc1",
        "parentId" : null,
        "authorId" : "514c0afb-8649-4fd9-a6ea-ee9e1b695274",
        "body" : "It's kind of a code smell to be mutating static data during a JUnit test.  There are ways to run JUnit tests in parallel (although I think our current setup only runs at the granularity of test classes, not test methods?)  At the very least we'd have to document that this is not thread-safe and that it will prevent us from parellelizing this test class in the future.\r\n\r\nRather than doing this, how about having two separate test authorizers, and choosing the one you want for each individual JUnit test method?\r\n\r\nIn order to fit this into our bass-akwards inheritance based test design ( :( ) you could check the name of the test in `brokerPropertyOverrides` using one of these methods: https://stackoverflow.com/questions/473401/get-name-of-currently-executing-test-in-junit-4",
        "createdAt" : "2020-08-11T21:43:25Z",
        "updatedAt" : "2020-09-02T17:54:03Z",
        "lastEditedBy" : "514c0afb-8649-4fd9-a6ea-ee9e1b695274",
        "tags" : [
        ]
      },
      {
        "id" : "f2606656-b6b6-45c2-9ea2-babd9908552a",
        "parentId" : "9884ab94-2c4f-4ba2-9acb-480a21132dc1",
        "authorId" : "e0554c25-f6f3-4e49-a325-bcc5d4dc5fb2",
        "body" : "@cmccabe Thanks.  I copied this approach from `kafka.server.RequestQuotaTest`.  I fixed it here in `DesrcibeUserScramCredentialsRequestTest` and `AlterUserScramCredentialsRequestTest` but was unable to fix it in `RequestQuotaTest` because that test is checking every possible API, and of course certain APIs need to succeed for Kafka to start successfully.  So that test needs to mutate the behavior after `setUp()`.  These tests don't since these APIs aren't necessary for Kafka to start.  So I was able to fix it here but was unable to fix it where I got the approach from.",
        "createdAt" : "2020-08-13T00:41:14Z",
        "updatedAt" : "2020-09-02T17:54:03Z",
        "lastEditedBy" : "e0554c25-f6f3-4e49-a325-bcc5d4dc5fb2",
        "tags" : [
        ]
      }
    ],
    "commit" : "04a882b1794f90bbe002f460803cda9a2beebccc",
    "line" : 124,
    "diffHunk" : "@@ -1,1 +122,126 @@\nobject DescribeCredentialsTest {\n  val UnauthorizedPrincipal = new KafkaPrincipal(KafkaPrincipal.USER_TYPE, \"Unauthorized\")\n  val AuthorizedPrincipal = KafkaPrincipal.ANONYMOUS\n"
  }
]