[
  {
    "id" : "e46064b0-2f3b-4c29-9b12-4ac086e66f35",
    "prId" : 3848,
    "prUrl" : "https://github.com/apache/kafka/pull/3848#pullrequestreview-191900203",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8019499c-cae2-44fe-b6b6-b47d08e405d0",
        "parentId" : null,
        "authorId" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "body" : "Since this is handled async, we probably want to assert that broker 1 is no longer in ISR before proceeding.",
        "createdAt" : "2019-01-12T18:08:22Z",
        "updatedAt" : "2019-01-25T09:57:17Z",
        "lastEditedBy" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "tags" : [
        ]
      }
    ],
    "commit" : "9df18c6b3232f3e8b9bf879b7a8dd762a5968c6c",
    "line" : 165,
    "diffHunk" : "@@ -1,1 +1338,1342 @@    changePreferredLeader(prefer1)\n    // but shut it down...\n    servers(1).shutdown()\n    waitUntilTrue (\n      () => {"
  },
  {
    "id" : "518ddc08-e6ba-4c04-8e46-f767f8903a6b",
    "prId" : 3848,
    "prUrl" : "https://github.com/apache/kafka/pull/3848#pullrequestreview-191900203",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b7f05de3-f83d-42e6-b464-729aead916e5",
        "parentId" : null,
        "authorId" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "body" : "Great test! Perhaps we should disable auto leader balancing in all brokers to avoid interfering. \r\n\r\nAlso, this is an existing issue. I am wondering if we should disable controlled shutdown to speed up the test since waiting for controlled shutdown when stopping the last broker can be long.",
        "createdAt" : "2019-01-12T18:09:27Z",
        "updatedAt" : "2019-01-25T09:57:17Z",
        "lastEditedBy" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "tags" : [
        ]
      }
    ],
    "commit" : "9df18c6b3232f3e8b9bf879b7a8dd762a5968c6c",
    "line" : 30,
    "diffHunk" : "@@ -1,1 +1203,1207 @@\n  @Test\n  def testElectPreferredLeaders(): Unit = {\n    client = AdminClient.create(createConfig)\n"
  },
  {
    "id" : "3830625b-614f-44b2-a85b-e3370dade0f4",
    "prId" : 4980,
    "prUrl" : "https://github.com/apache/kafka/pull/4980#pullrequestreview-121146524",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "48bb277a-a41e-4c0c-b0a1-2226e22561b6",
        "parentId" : null,
        "authorId" : "d418e163-e0f8-4dec-9432-7f0eb6df2a1b",
        "body" : "Can you extract the assertions with comments to separate methods? For example:\r\nverifyNewConsumerGroupCanBeListed\r\nverifyNewConsumerGroupCanBeDescribed\r\nverifyFakeConsumerGroupIsListedAsDead\r\nverifyConsumerGroupOffsetsAreListed\r\n\r\nor something",
        "createdAt" : "2018-05-11T09:33:08Z",
        "updatedAt" : "2018-05-18T21:31:06Z",
        "lastEditedBy" : "d418e163-e0f8-4dec-9432-7f0eb6df2a1b",
        "tags" : [
        ]
      },
      {
        "id" : "03f24c3b-060f-4641-8b24-64b16ad0f114",
        "parentId" : "48bb277a-a41e-4c0c-b0a1-2226e22561b6",
        "authorId" : "514c0afb-8649-4fd9-a6ea-ee9e1b695274",
        "body" : "I don't see a lot of value in doing this unless we want to reuse the code, which we're not doing here.",
        "createdAt" : "2018-05-11T21:39:50Z",
        "updatedAt" : "2018-05-18T21:31:06Z",
        "lastEditedBy" : "514c0afb-8649-4fd9-a6ea-ee9e1b695274",
        "tags" : [
        ]
      },
      {
        "id" : "1f5d1796-8240-4143-ab53-eed1997fe51b",
        "parentId" : "48bb277a-a41e-4c0c-b0a1-2226e22561b6",
        "authorId" : "d418e163-e0f8-4dec-9432-7f0eb6df2a1b",
        "body" : "I usually find it easier to read short, focused test methods, but I see your point. You can ignore this comment then.",
        "createdAt" : "2018-05-17T16:07:12Z",
        "updatedAt" : "2018-05-18T21:31:06Z",
        "lastEditedBy" : "d418e163-e0f8-4dec-9432-7f0eb6df2a1b",
        "tags" : [
        ]
      },
      {
        "id" : "cede312b-f021-43c4-a75b-08965c1b50ab",
        "parentId" : "48bb277a-a41e-4c0c-b0a1-2226e22561b6",
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "I tend to agree with @asasvari for what it's worth. It is easier to understand and debug small test cases. It is not just about code reuse.",
        "createdAt" : "2018-05-17T18:16:49Z",
        "updatedAt" : "2018-05-18T21:31:06Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      }
    ],
    "commit" : "47c37faba10b9efd117803ad709047ebd7aa3e55",
    "line" : 81,
    "diffHunk" : "@@ -1,1 +1010,1014 @@        try {\n          consumerThread.start\n          // Test that we can list the new group.\n          TestUtils.waitUntilTrue(() => {\n            val matching = client.listConsumerGroups().all().get().asScala."
  },
  {
    "id" : "5fc2a2db-c59a-4412-b946-8df4d7a9ef7f",
    "prId" : 5133,
    "prUrl" : "https://github.com/apache/kafka/pull/5133#pullrequestreview-127003073",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f8ae9a77-188c-4a22-90d8-ccea8e4e764e",
        "parentId" : null,
        "authorId" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "body" : "It seems that there is no guarantee that the offset 3 is in the middle of a message set?",
        "createdAt" : "2018-06-07T16:52:31Z",
        "updatedAt" : "2018-06-14T05:35:55Z",
        "lastEditedBy" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "tags" : [
        ]
      },
      {
        "id" : "6380b7a3-1bb5-49d5-b260-b8ff025c8620",
        "parentId" : "f8ae9a77-188c-4a22-90d8-ccea8e4e764e",
        "authorId" : "e235ea82-83a9-41e5-8e3a-15b2e1b6f350",
        "body" : "Yes, this is an integration test, but at least those tests are failing without my change. I just moved handling of the `UnexpectedAppendOffsetException` with truncation + append to Partition, so that there is no duplicate code in `ReplicaFetcherThread` and `ReplicaAlterLogDirsThread`. I can do a test that guarantees that log start offset is in the middle of the batch, but unfortunately there is no unit test for Partition class. Will try to create it, but not that simple (lots of mocking). ",
        "createdAt" : "2018-06-08T00:52:34Z",
        "updatedAt" : "2018-06-14T05:35:55Z",
        "lastEditedBy" : "e235ea82-83a9-41e5-8e3a-15b2e1b6f350",
        "tags" : [
        ]
      }
    ],
    "commit" : "486f83e3422d512e3660225606caeb067a58b41f",
    "line" : 29,
    "diffHunk" : "@@ -1,1 +837,841 @@    sendRecords(producers.head, 100, topicPartition)\n\n    val result = client.deleteRecords(Map(topicPartition -> RecordsToDelete.beforeOffset(3L)).asJava)\n    result.all().get()\n"
  }
]