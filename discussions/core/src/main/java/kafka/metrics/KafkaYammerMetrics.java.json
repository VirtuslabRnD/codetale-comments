[
  {
    "id" : "b1bd8051-65d2-479f-826c-a2fe824efa8e",
    "prId" : 7674,
    "prUrl" : "https://github.com/apache/kafka/pull/7674#pullrequestreview-335014442",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9e81922d-bb66-4ac9-b010-68c30403b66f",
        "parentId" : null,
        "authorId" : "915b2f67-05e6-4824-939a-398e7be58870",
        "body" : "should we also call metricsRegistry.shutdown()?",
        "createdAt" : "2019-12-19T18:56:26Z",
        "updatedAt" : "2020-02-12T01:34:56Z",
        "lastEditedBy" : "915b2f67-05e6-4824-939a-398e7be58870",
        "tags" : [
        ]
      },
      {
        "id" : "36aaa143-8147-4e88-908d-c38ca67c35ad",
        "parentId" : "9e81922d-bb66-4ac9-b010-68c30403b66f",
        "authorId" : "73896ffa-873a-4115-b79b-370ca722bd60",
        "body" : "Yammer metrics doesn't shut down its default registry automatically, only the jmx reporter does, and we never call defaultRegistry.shutdown(), so this matches the behavior we have today.\r\n\r\nIt may not hurt to shut down the registry though, so we could certainly add it.",
        "createdAt" : "2019-12-19T22:30:47Z",
        "updatedAt" : "2020-02-12T01:34:56Z",
        "lastEditedBy" : "73896ffa-873a-4115-b79b-370ca722bd60",
        "tags" : [
        ]
      },
      {
        "id" : "8b30c314-1ac5-4f09-9a54-487bf99c2ae6",
        "parentId" : "9e81922d-bb66-4ac9-b010-68c30403b66f",
        "authorId" : "514c0afb-8649-4fd9-a6ea-ee9e1b695274",
        "body" : "I wouldn't mess with the lifecycle here unless we really understand what problem we're trying to solve.  Although I do wonder how the Kafka broker unregisters its yammer metrics after an integration test is done (or does it not?)",
        "createdAt" : "2019-12-20T00:30:58Z",
        "updatedAt" : "2020-02-12T01:34:56Z",
        "lastEditedBy" : "514c0afb-8649-4fd9-a6ea-ee9e1b695274",
        "tags" : [
        ]
      }
    ],
    "commit" : "01208fd218286d2cd318a891f2cb5883422283b1",
    "line" : 53,
    "diffHunk" : "@@ -1,1 +51,55 @@    private KafkaYammerMetrics() {\n        jmxReporter.start();\n        Runtime.getRuntime().addShutdownHook(new Thread(jmxReporter::shutdown));\n    }\n"
  }
]