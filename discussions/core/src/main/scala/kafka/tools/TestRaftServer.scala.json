[
  {
    "id" : "e8deedc6-699f-4bda-bc4a-d4d997dbe9bd",
    "prId" : 9418,
    "prUrl" : "https://github.com/apache/kafka/pull/9418#pullrequestreview-514197430",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f10c22ca-031b-4390-87d2-9cc299026618",
        "parentId" : null,
        "authorId" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "body" : "Even if the leader has changed back, previously pending appends may still get committed right? I think it is sufficient to just poll-and-drop them in `handleCommit` when leader changes and not clearing the queue here.",
        "createdAt" : "2020-10-21T00:25:44Z",
        "updatedAt" : "2020-10-27T03:04:10Z",
        "lastEditedBy" : "eba565e8-e1d5-4749-9c9a-5d117de6c96c",
        "tags" : [
        ]
      },
      {
        "id" : "c3d0a7ba-d622-4001-9bcd-7c34e36528be",
        "parentId" : "f10c22ca-031b-4390-87d2-9cc299026618",
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "You are right that the appends may still be committed, but in this patch, the `handleCommit` API is only invoked for appends within the current epoch. I thought it seemed simpler for now to just reset state at the start of the epoch. We can be more clever in the future once `handleCommit` is extended to account for replication.",
        "createdAt" : "2020-10-21T21:24:45Z",
        "updatedAt" : "2020-10-27T03:04:10Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      }
    ],
    "commit" : "fac5c0a9507f9f40f99dac017242d12500a97d5d",
    "line" : 161,
    "diffHunk" : "@@ -1,1 +314,318 @@        isLeader = latestLeaderAndEpoch.leaderId.orElse(-1) == brokerId\n        if (isLeader) {\n          pendingAppends.clear()\n          throttler = new ThroughputThrottler(time, recordsPerSec)\n          recordCount = 0"
  },
  {
    "id" : "b8c6d27e-0464-413a-b2b6-a2dd45037fa0",
    "prId" : 9839,
    "prUrl" : "https://github.com/apache/kafka/pull/9839#pullrequestreview-563218457",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "54dea9cb-f376-47dc-bd51-0f254d4afa4b",
        "parentId" : null,
        "authorId" : "0f776378-bb23-4193-9bb0-1db5973f3781",
        "body" : "Is it need to shutdown ```raftManager```?",
        "createdAt" : "2021-01-07T06:05:02Z",
        "updatedAt" : "2021-01-08T18:44:35Z",
        "lastEditedBy" : "0f776378-bb23-4193-9bb0-1db5973f3781",
        "tags" : [
        ]
      }
    ],
    "commit" : "8c3044ff0c003b732cb84c35a9352b9914498e74",
    "line" : 127,
    "diffHunk" : "@@ -1,1 +108,112 @@  }\n\n  def shutdown(): Unit = {\n    if (raftManager != null)\n      CoreUtils.swallow(raftManager.shutdown(), this)"
  },
  {
    "id" : "a1a849a9-60de-4fc4-8c04-2d893f36e471",
    "prId" : 10113,
    "prUrl" : "https://github.com/apache/kafka/pull/10113#pullrequestreview-592709043",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a27ce565-9637-4cb0-8830-e39b0add4c67",
        "parentId" : null,
        "authorId" : "514c0afb-8649-4fd9-a6ea-ee9e1b695274",
        "body" : "can use \"_\" since we don't care about the value",
        "createdAt" : "2021-02-11T22:28:50Z",
        "updatedAt" : "2021-02-18T03:32:54Z",
        "lastEditedBy" : "514c0afb-8649-4fd9-a6ea-ee9e1b695274",
        "tags" : [
        ]
      },
      {
        "id" : "868b6fea-b279-4772-b667-966e61ab5014",
        "parentId" : "a27ce565-9637-4cb0-8830-e39b0add4c67",
        "authorId" : "e0554c25-f6f3-4e49-a325-bcc5d4dc5fb2",
        "body" : "> can use \"_\" since we don't care about the value\r\n\r\nI can't get it to compile that way :-(",
        "createdAt" : "2021-02-11T22:39:46Z",
        "updatedAt" : "2021-02-18T03:32:54Z",
        "lastEditedBy" : "e0554c25-f6f3-4e49-a325-bcc5d4dc5fb2",
        "tags" : [
        ]
      },
      {
        "id" : "800289a2-4cf2-47b6-99d9-28608eddd8b6",
        "parentId" : "a27ce565-9637-4cb0-8830-e39b0add4c67",
        "authorId" : "514c0afb-8649-4fd9-a6ea-ee9e1b695274",
        "body" : "ok",
        "createdAt" : "2021-02-17T23:13:10Z",
        "updatedAt" : "2021-02-18T03:32:54Z",
        "lastEditedBy" : "514c0afb-8649-4fd9-a6ea-ee9e1b695274",
        "tags" : [
        ]
      }
    ],
    "commit" : "0755d439ecef512cb5d689d52d661fd55848e424",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +161,165 @@    }\n\n    override def handleResign(epoch: Int): Unit = {\n      eventQueue.offer(HandleResign)\n    }"
  },
  {
    "id" : "53139170-84ec-4476-a086-6de5d1433486",
    "prId" : 10492,
    "prUrl" : "https://github.com/apache/kafka/pull/10492#pullrequestreview-630342045",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1a17492f-2db0-46d2-8077-690af3ec623e",
        "parentId" : null,
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "Could we add a comment here which explains that this value must be constant and that the value is chosen not to conflict with the topicId used for `@metadata`?",
        "createdAt" : "2021-04-07T18:09:27Z",
        "updatedAt" : "2021-04-07T18:21:13Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      }
    ],
    "commit" : "8ec778f69e159fc87f96bee167faaf43d0820f5f",
    "line" : 16,
    "diffHunk" : "@@ -1,1 +54,58 @@  private val partition = new TopicPartition(\"__raft_performance_test\", 0)\n  // The topic ID must be constant. This value was chosen as to not conflict with the topic ID used for @metadata.\n  private val topicId = new Uuid(0L, 2L)\n  private val time = Time.SYSTEM\n  private val metrics = new Metrics(time)"
  }
]