[
  {
    "id" : "44e0c2e7-84a7-4514-b5e2-51cc11f2fe74",
    "prId" : 4705,
    "prUrl" : "https://github.com/apache/kafka/pull/4705#pullrequestreview-104383484",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3c8266d2-be5d-4621-9c75-0b0095f1e14a",
        "parentId" : null,
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "Would be nice to have a test case which covers this path.",
        "createdAt" : "2018-03-15T06:02:00Z",
        "updatedAt" : "2018-03-24T18:14:29Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      },
      {
        "id" : "ab3f0f6b-a391-4b82-a6d2-3413cfed646a",
        "parentId" : "3c8266d2-be5d-4621-9c75-0b0095f1e14a",
        "authorId" : "2a5e5a4d-e0e2-4e26-b139-0930dd63f949",
        "body" : "I've added a unit test for this. Hopefully, that'll do.",
        "createdAt" : "2018-03-16T00:19:05Z",
        "updatedAt" : "2018-03-24T18:14:29Z",
        "lastEditedBy" : "2a5e5a4d-e0e2-4e26-b139-0930dd63f949",
        "tags" : [
        ]
      }
    ],
    "commit" : "8bdd76d63a043157b6ec731df15d2baa9dee03b9",
    "line" : 120,
    "diffHunk" : "@@ -1,1 +115,119 @@  }\n\n  private def failExpiredRequests(now: Long): Unit = {\n    // clear all expired unsent requests\n    val expiredRequests = unsentRequests.removeExpiredRequests(now, unsentExpiryMs)"
  },
  {
    "id" : "f9928501-ab91-4b68-ac4d-4556bc7e061b",
    "prId" : 4705,
    "prUrl" : "https://github.com/apache/kafka/pull/4705#pullrequestreview-106692121",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "866c3c0c-3b3e-4789-a13e-31044ba26fdb",
        "parentId" : null,
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "Would be good to have a test case which hits this path. I noticed that `InterBrokerSendThread` depends on `NettworkClient` directly. Maybe we could change that to use `KafkaClient` instead so that we can use `MockClient` for easier testing?",
        "createdAt" : "2018-03-23T20:21:44Z",
        "updatedAt" : "2018-03-24T18:14:29Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      },
      {
        "id" : "b116635c-9c5e-4e2b-819a-49066d48c786",
        "parentId" : "866c3c0c-3b3e-4789-a13e-31044ba26fdb",
        "authorId" : "2a5e5a4d-e0e2-4e26-b139-0930dd63f949",
        "body" : "@hachikuji Looking at this more closely, wouldn't the existing test `shouldCallCompletionHandlerWithDisconnectedResponseWhenNodeNotReady` cover this? In the latest commit I made a minor change to verify completion with disconnect. Would that be a proper test for this path? If so, should I still look into switching to `MockClient`? Thanks.",
        "createdAt" : "2018-03-24T07:29:50Z",
        "updatedAt" : "2018-03-24T18:14:29Z",
        "lastEditedBy" : "2a5e5a4d-e0e2-4e26-b139-0930dd63f949",
        "tags" : [
        ]
      }
    ],
    "commit" : "8bdd76d63a043157b6ec731df15d2baa9dee03b9",
    "line" : 100,
    "diffHunk" : "@@ -1,1 +95,99 @@  }\n\n  private def checkDisconnects(now: Long): Unit = {\n    // any disconnects affecting requests that have already been transmitted will be handled\n    // by NetworkClient, so we just need to check whether connections for any of the unsent"
  }
]