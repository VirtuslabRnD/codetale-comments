[
  {
    "id" : "d374a39e-f9c5-4e79-9d0e-2925739b1e71",
    "prId" : 10254,
    "prUrl" : "https://github.com/apache/kafka/pull/10254#pullrequestreview-629166051",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "18552e3b-dc7a-4a83-b25e-ea6d7e028b51",
        "parentId" : null,
        "authorId" : "514c0afb-8649-4fd9-a6ea-ee9e1b695274",
        "body" : "What's the purpose of moving this code?",
        "createdAt" : "2021-04-05T18:53:05Z",
        "updatedAt" : "2021-04-07T17:31:12Z",
        "lastEditedBy" : "514c0afb-8649-4fd9-a6ea-ee9e1b695274",
        "tags" : [
        ]
      },
      {
        "id" : "4aaffc6e-f093-43d5-88fb-b4dda5bffd91",
        "parentId" : "18552e3b-dc7a-4a83-b25e-ea6d7e028b51",
        "authorId" : "083f2f03-ca7e-48a1-9781-482564dfdf53",
        "body" : "Good question. I could swear there was a review comment suggesting this, but I can't seem to find it. I believe I moved this to align it with handleUserClientQuota where we update the underlying quota manager and then update the cache. I don't have a strong opinion on which thing happens first, but they should both probably be the same.\r\n\r\nThinking about it more, we might want to be more defensive when calling to the quota managers. If the quota manager cannot be updated, I think we should still update the cache since that reflects the true state of the quota according to the metadata log. Thoughts?",
        "createdAt" : "2021-04-05T19:26:44Z",
        "updatedAt" : "2021-04-07T17:31:12Z",
        "lastEditedBy" : "083f2f03-ca7e-48a1-9781-482564dfdf53",
        "tags" : [
        ]
      },
      {
        "id" : "00b1efbe-f65e-4367-961e-7a6abcda6339",
        "parentId" : "18552e3b-dc7a-4a83-b25e-ea6d7e028b51",
        "authorId" : "514c0afb-8649-4fd9-a6ea-ee9e1b695274",
        "body" : "Is that code structured in such a way that it can throw?  If so, then yes, I think we want to catch that here.",
        "createdAt" : "2021-04-06T16:18:23Z",
        "updatedAt" : "2021-04-07T17:31:12Z",
        "lastEditedBy" : "514c0afb-8649-4fd9-a6ea-ee9e1b695274",
        "tags" : [
        ]
      }
    ],
    "commit" : "2c40cc0715dc0b16deadb4a6c373ed7ff3c56987",
    "line" : 20,
    "diffHunk" : "@@ -1,1 +134,138 @@    }\n\n    // Update the cache\n    quotaCache.updateQuotaCache(ipEntity, quotaRecord.key, quotaRecord.value, quotaRecord.remove)\n  }"
  }
]