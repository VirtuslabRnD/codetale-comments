[
  {
    "id" : "7bbd3918-a61c-4639-825f-dfb58a2ef4b0",
    "prId" : 4699,
    "prUrl" : "https://github.com/apache/kafka/pull/4699#pullrequestreview-110169427",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b93fb232-2931-434f-80b3-2c5aaad17a7a",
        "parentId" : null,
        "authorId" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "body" : "This can be a bit tricky. If we call getQuotaMetricConfig() here, we will be paying the cost of calling ClientQuotaCallback.quotaLimit() on every request. We probably want to pass in a method and only call it when needed. ",
        "createdAt" : "2018-04-05T23:15:17Z",
        "updatedAt" : "2018-04-06T18:37:45Z",
        "lastEditedBy" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "tags" : [
        ]
      },
      {
        "id" : "dc5f6a44-23b6-48a5-a79d-220637b643f5",
        "parentId" : "b93fb232-2931-434f-80b3-2c5aaad17a7a",
        "authorId" : "b4936a15-698a-496e-85a1-b1e229b4986b",
        "body" : "I was thinking that the by-name parameter does lazy evaluation and hence the method doesn't get invoked on every request. I could be wrong, but I added a test and it seems to be true. What do you think?",
        "createdAt" : "2018-04-06T18:43:47Z",
        "updatedAt" : "2018-04-06T18:43:47Z",
        "lastEditedBy" : "b4936a15-698a-496e-85a1-b1e229b4986b",
        "tags" : [
        ]
      }
    ],
    "commit" : "964362ad68476f111ec86e5cf849a0c9c63d742b",
    "line" : 364,
    "diffHunk" : "@@ -1,1 +332,336 @@        ClientQuotaManagerConfig.InactiveSensorExpirationTimeSeconds,\n        clientRateMetricName(metricTags),\n        Some(getQuotaMetricConfig(metricTags)),\n        new Rate\n      ),"
  },
  {
    "id" : "cde9c5de-55bd-46a3-bbff-e13fb145ddf2",
    "prId" : 4699,
    "prUrl" : "https://github.com/apache/kafka/pull/4699#pullrequestreview-110169872",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a2e70e00-8339-4292-8b05-aa950790502e",
        "parentId" : null,
        "authorId" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "body" : "Is it useful to have CustomQuotas since it seems it's never used?",
        "createdAt" : "2018-04-05T23:34:37Z",
        "updatedAt" : "2018-04-06T18:37:45Z",
        "lastEditedBy" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "tags" : [
        ]
      },
      {
        "id" : "89885e51-0514-499b-a76c-f9e5f50828df",
        "parentId" : "a2e70e00-8339-4292-8b05-aa950790502e",
        "authorId" : "b4936a15-698a-496e-85a1-b1e229b4986b",
        "body" : "It is used to avoid optimizing updates, the other values are used to check if only a single-level of quota is used. Have added a comment.",
        "createdAt" : "2018-04-06T18:45:04Z",
        "updatedAt" : "2018-04-06T18:45:04Z",
        "lastEditedBy" : "b4936a15-698a-496e-85a1-b1e229b4986b",
        "tags" : [
        ]
      }
    ],
    "commit" : "964362ad68476f111ec86e5cf849a0c9c63d742b",
    "line" : 120,
    "diffHunk" : "@@ -1,1 +164,168 @@  private val clientQuotaType = quotaTypeToClientQuotaType(quotaType)\n  @volatile private var quotaTypesEnabled = clientQuotaCallback match {\n    case Some(_) => QuotaTypes.CustomQuotas\n    case None =>\n      if (config.quotaBytesPerSecondDefault == Long.MaxValue) QuotaTypes.NoQuotas"
  }
]