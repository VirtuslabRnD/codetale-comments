[
  {
    "id" : "3e8bc02a-8df9-4eef-b7fb-6298b1185459",
    "prId" : 8680,
    "prUrl" : "https://github.com/apache/kafka/pull/8680#pullrequestreview-414092115",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5400a5b7-c03a-41a0-bfcd-36526126fdb5",
        "parentId" : null,
        "authorId" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "body" : "It seems that we don't have the handling logic for this FeatureCacheUpdateException. Do we think this is fatal?",
        "createdAt" : "2020-05-18T23:00:50Z",
        "updatedAt" : "2020-06-11T05:59:01Z",
        "lastEditedBy" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "tags" : [
        ]
      },
      {
        "id" : "b0bc3f9f-bfb3-49d8-b15b-9ad1d0473849",
        "parentId" : "5400a5b7-c03a-41a0-bfcd-36526126fdb5",
        "authorId" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "body" : "Might worth getting a ticket to define the handling strategy for such exception, and in general how `updateOrThrow` will be used. ",
        "createdAt" : "2020-05-19T02:15:41Z",
        "updatedAt" : "2020-06-11T05:59:01Z",
        "lastEditedBy" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "tags" : [
        ]
      },
      {
        "id" : "32ca6609-9ac9-4df4-ad7c-2d0b93d3f9b9",
        "parentId" : "5400a5b7-c03a-41a0-bfcd-36526126fdb5",
        "authorId" : "b4f52e78-c19e-46b4-b486-6da86e32e687",
        "body" : "As we discussed offline today, this exception is already handled in `ChangeNotificationProcessorThread.doWork()` method defined in `FinalizedFeatureChangeListener.scala`. Basically, the ZK change notification processor thread exits the Broker with a fatal error (non-zero exit code) when this exception (or any exception) is caught while trying to update `FinalizedFeatureCache`.",
        "createdAt" : "2020-05-20T08:21:37Z",
        "updatedAt" : "2020-06-11T05:59:01Z",
        "lastEditedBy" : "b4f52e78-c19e-46b4-b486-6da86e32e687",
        "tags" : [
        ]
      }
    ],
    "commit" : "8e3ef56c552da13226c1fcc472c8d339fb98c7a8",
    "line" : 23,
    "diffHunk" : "@@ -1,1 +21,25 @@import org.apache.kafka.common.feature.{Features, FinalizedVersionRange}\n\n// Raised whenever there was an error in updating the FinalizedFeatureCache with features.\nclass FeatureCacheUpdateException(message: String) extends RuntimeException(message) {\n}"
  },
  {
    "id" : "0ace0dee-55bc-4970-89d8-d71db79c5973",
    "prId" : 10931,
    "prUrl" : "https://github.com/apache/kafka/pull/10931#pullrequestreview-698526848",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e1c02f98-3b51-4094-adf0-8c5aad09bc3d",
        "parentId" : null,
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "features.features.features eh?",
        "createdAt" : "2021-07-01T21:59:40Z",
        "updatedAt" : "2021-07-01T22:55:53Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      },
      {
        "id" : "f11f4cd0-50d3-45e7-bd13-9ed900cd5bea",
        "parentId" : "e1c02f98-3b51-4094-adf0-8c5aad09bc3d",
        "authorId" : "514c0afb-8649-4fd9-a6ea-ee9e1b695274",
        "body" : "Yes, the features code needs a refactor. I guess when we do kraft upgrade we'll fix it up.",
        "createdAt" : "2021-07-02T22:30:59Z",
        "updatedAt" : "2021-07-02T22:30:59Z",
        "lastEditedBy" : "514c0afb-8649-4fd9-a6ea-ee9e1b695274",
        "tags" : [
        ]
      }
    ],
    "commit" : "58ecc3276c637977fdd1c686cfae70664944f507",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +137,141 @@      FinalizedFeaturesAndEpoch(Features.emptyFinalizedFeatures(), -1))\n    val newFeatures = new util.HashMap[String, FinalizedVersionRange]()\n    newFeatures.putAll(features.features.features())\n    featuresDelta.changes().entrySet().forEach { e =>\n      e.getValue().asScala match {"
  }
]