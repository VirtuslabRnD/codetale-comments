[
  {
    "id" : "d8cfc67d-8b4e-4db1-82ed-4e3addf760dc",
    "prId" : 10280,
    "prUrl" : "https://github.com/apache/kafka/pull/10280#pullrequestreview-679398650",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "105dc630-5a51-456d-87a6-dd7a08a8d586",
        "parentId" : null,
        "authorId" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "body" : "This is unnecessary since during splitting, the old segment is replaced with a new segment with the same base offset. So, result.deletedSegments is always empty.",
        "createdAt" : "2021-05-25T22:16:21Z",
        "updatedAt" : "2021-05-26T00:10:15Z",
        "lastEditedBy" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "tags" : [
        ]
      },
      {
        "id" : "fec1f45d-4fdc-4fa0-899d-bbbd75878d72",
        "parentId" : "105dc630-5a51-456d-87a6-dd7a08a8d586",
        "authorId" : "b4f52e78-c19e-46b4-b486-6da86e32e687",
        "body" : "Sounds good. Great catch. It appears straightforward to just skip deleting the snapshot here, I can leave a comment explaining why.",
        "createdAt" : "2021-06-01T20:16:46Z",
        "updatedAt" : "2021-06-01T20:17:11Z",
        "lastEditedBy" : "b4f52e78-c19e-46b4-b486-6da86e32e687",
        "tags" : [
        ]
      },
      {
        "id" : "cdcd7210-25eb-4bdb-b84a-b6f176d1ff56",
        "parentId" : "105dc630-5a51-456d-87a6-dd7a08a8d586",
        "authorId" : "b4f52e78-c19e-46b4-b486-6da86e32e687",
        "body" : "@junrao I thought about this again. Correct me if I'm wrong, but it appears we may be altering existing behavior if we go down this route. Should we do it in a separate PR to isolate the change?",
        "createdAt" : "2021-06-04T09:46:32Z",
        "updatedAt" : "2021-06-04T09:46:32Z",
        "lastEditedBy" : "b4f52e78-c19e-46b4-b486-6da86e32e687",
        "tags" : [
        ]
      },
      {
        "id" : "9ff94d16-e54d-4a30-99fc-fa57e668f5aa",
        "parentId" : "105dc630-5a51-456d-87a6-dd7a08a8d586",
        "authorId" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "body" : "Yes, that's fine.",
        "createdAt" : "2021-06-07T17:45:37Z",
        "updatedAt" : "2021-06-07T17:50:23Z",
        "lastEditedBy" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "tags" : [
        ]
      },
      {
        "id" : "16fb8507-ee25-4ade-a13c-63f2abf8be11",
        "parentId" : "105dc630-5a51-456d-87a6-dd7a08a8d586",
        "authorId" : "b4f52e78-c19e-46b4-b486-6da86e32e687",
        "body" : "I have created a jira to track this improvement. https://issues.apache.org/jira/browse/KAFKA-12923",
        "createdAt" : "2021-06-09T09:04:47Z",
        "updatedAt" : "2021-06-09T09:04:48Z",
        "lastEditedBy" : "b4f52e78-c19e-46b4-b486-6da86e32e687",
        "tags" : [
        ]
      }
    ],
    "commit" : "1752ea8c0b9537d7d66815e7619ba810a1cd141d",
    "line" : 59,
    "diffHunk" : "@@ -1,1 +291,295 @@            params.logDirFailureChannel,\n            params.logIdentifier)\n          deleteProducerSnapshotsAsync(result.deletedSegments, params)\n      }\n    }"
  },
  {
    "id" : "98c8b483-2d62-4a32-a3d8-c64f0dffe155",
    "prId" : 10478,
    "prUrl" : "https://github.com/apache/kafka/pull/10478#pullrequestreview-636323729",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f3eee61b-f851-47ac-8fd6-286c9c303e99",
        "parentId" : null,
        "authorId" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "body" : "Currently, if we hit any IOException during loading, we just kill the broker. So, it seems that there is no need to pass in logDirFailureChannel during log loading.",
        "createdAt" : "2021-04-14T21:08:38Z",
        "updatedAt" : "2021-04-20T07:10:51Z",
        "lastEditedBy" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "tags" : [
        ]
      },
      {
        "id" : "b91672e6-9c76-4d2a-a554-2424a1ad941f",
        "parentId" : "f3eee61b-f851-47ac-8fd6-286c9c303e99",
        "authorId" : "b4f52e78-c19e-46b4-b486-6da86e32e687",
        "body" : "In the recovery path, the `logDirFailureChannel` is used to asynchronously handle `IOException` within the  `Log.deleteSegmentFiles()` calls. This was the existing behavior prior to this refactor as well.  Should we change the existing behavior?https://github.com/apache/kafka/blob/193a9dfc44fa2c0df163a8518a804c4579d37e36/core/src/main/scala/kafka/log/Log.scala#L2377\r\n",
        "createdAt" : "2021-04-15T06:48:36Z",
        "updatedAt" : "2021-04-20T07:10:51Z",
        "lastEditedBy" : "b4f52e78-c19e-46b4-b486-6da86e32e687",
        "tags" : [
        ]
      }
    ],
    "commit" : "eaf8519fa26ecfe6278edadee83e3604ae496be8",
    "line" : 44,
    "diffHunk" : "@@ -1,1 +42,46 @@ * @param scheduler The thread pool scheduler used for background actions\n * @param time The time instance used for checking the clock\n * @param logDirFailureChannel The LogDirFailureChannel instance to asynchronously handle log\n *                             directory failure\n * @param hadCleanShutdown Boolean flag to indicate whether the associated log previously had a"
  }
]