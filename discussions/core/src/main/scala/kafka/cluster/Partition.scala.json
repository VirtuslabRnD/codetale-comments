[
  {
    "id" : "a547f512-e82e-485d-9b91-0c31e441e23a",
    "prId" : 5436,
    "prUrl" : "https://github.com/apache/kafka/pull/5436#pullrequestreview-144051029",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a44a69a3-475e-411d-9152-a0a8c114cf4a",
        "parentId" : null,
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "I wonder if we can elaborate on this a little bit. I think the main point is that if we have somehow missed a leader epoch, then we have also missed a required truncation.",
        "createdAt" : "2018-08-07T15:32:43Z",
        "updatedAt" : "2018-08-10T19:00:12Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      }
    ],
    "commit" : "a96fb4cd18c4eb347abb75ecc132a0558c1addc2",
    "line" : 23,
    "diffHunk" : "@@ -1,1 +347,351 @@      zkVersion = partitionStateInfo.basePartitionState.zkVersion\n\n      // If the leader is unchanged and the epochs are no more than one change apart, indicate that no follower changes are required\n      // Otherwise, we missed a leader epoch update, which means the leader's log may have been truncated prior to the current epoch.\n      if (leaderReplicaIdOpt.contains(newLeaderBrokerId) && (leaderEpoch == oldLeaderEpoch || leaderEpoch == oldLeaderEpoch + 1)) {"
  }
]