[
  {
    "id" : "ee305ca6-b345-4c1f-9cbd-bc7712a07123",
    "prId" : 6246,
    "prUrl" : "https://github.com/apache/kafka/pull/6246#pullrequestreview-206093511",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9862a7a1-cabd-4c3f-a3e3-ecf78e28fdd4",
        "parentId" : null,
        "authorId" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "body" : "I am not sure if this validation covers everything. For example a partition list of (0, 0, 3) has the same sum of (0, 1, 2) and the former should be invalid.",
        "createdAt" : "2019-02-20T23:01:16Z",
        "updatedAt" : "2019-02-22T01:31:52Z",
        "lastEditedBy" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "tags" : [
        ]
      },
      {
        "id" : "7e128087-5607-41c3-9d1a-152d8b0c032f",
        "parentId" : "9862a7a1-cabd-4c3f-a3e3-ecf78e28fdd4",
        "authorId" : "78bac8c8-33c4-40ab-a9df-41d46597e947",
        "body" : "Hi @junrao, I add a duplication check and non-negative check in 0be7725, so invalid partitions like (0,0,3) or (-1,1,2,4) won't pass anymore, that should cover all edge cases.",
        "createdAt" : "2019-02-21T02:03:59Z",
        "updatedAt" : "2019-02-22T01:31:52Z",
        "lastEditedBy" : "78bac8c8-33c4-40ab-a9df-41d46597e947",
        "tags" : [
        ]
      }
    ],
    "commit" : "8f677cdd6a0b37f569d779217e6f718d5858fd69",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +127,131 @@\n    val partitionSize = partitionReplicaAssignment.size\n    val sequenceSum = partitionSize * (partitionSize - 1) / 2\n    if (partitionReplicaAssignment.size != partitionReplicaAssignment.toSet.size ||\n        partitionReplicaAssignment.keys.filter(_ >= 0).sum != sequenceSum)"
  },
  {
    "id" : "f10f9e5c-1ac8-4197-96d4-32bd567e1004",
    "prId" : 9814,
    "prUrl" : "https://github.com/apache/kafka/pull/9814#pullrequestreview-564885573",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2d7686b0-cb37-41a8-81bd-d362bfb75455",
        "parentId" : null,
        "authorId" : "12f98c82-b9ef-4668-aa6f-5a62bf3439bb",
        "body" : "Why do you set the default value to false? I don't think we should give it a default value since the caller can decide it by caller.",
        "createdAt" : "2021-01-10T05:32:53Z",
        "updatedAt" : "2021-01-19T22:05:40Z",
        "lastEditedBy" : "12f98c82-b9ef-4668-aa6f-5a62bf3439bb",
        "tags" : [
        ]
      },
      {
        "id" : "84a3c31d-03bc-49d2-9b57-31d91f545165",
        "parentId" : "2d7686b0-cb37-41a8-81bd-d362bfb75455",
        "authorId" : "a31dcef8-b459-4b48-bb49-44e910fa9f34",
        "body" : "Some places that eventually call this do not have access to IBP. The controller will eventually pick up and assign topic IDs that need them.",
        "createdAt" : "2021-01-10T17:44:13Z",
        "updatedAt" : "2021-01-19T22:05:40Z",
        "lastEditedBy" : "a31dcef8-b459-4b48-bb49-44e910fa9f34",
        "tags" : [
        ]
      }
    ],
    "commit" : "12ca62e171ac2243059436a87cf9a4a6550ef2e4",
    "line" : 50,
    "diffHunk" : "@@ -1,1 +159,163 @@\n  private def writeTopicPartitionAssignment(topic: String, replicaAssignment: Map[Int, ReplicaAssignment],\n                                            isUpdate: Boolean, usesTopicId: Boolean = false): Unit = {\n    try {\n      val assignment = replicaAssignment.map { case (partitionId, replicas) => (new TopicPartition(topic,partitionId), replicas) }.toMap"
  },
  {
    "id" : "f14c617b-11d4-4878-9cfb-0b8c689d3012",
    "prId" : 9814,
    "prUrl" : "https://github.com/apache/kafka/pull/9814#pullrequestreview-564885620",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cbb31617-0607-4973-8361-e4c8173cc2f1",
        "parentId" : null,
        "authorId" : "12f98c82-b9ef-4668-aa6f-5a62bf3439bb",
        "body" : "So if we use `TopicCommand` with `ZookeeperTopicService` to create a topic, we will always not set a topicId?",
        "createdAt" : "2021-01-10T05:34:56Z",
        "updatedAt" : "2021-01-19T22:05:40Z",
        "lastEditedBy" : "12f98c82-b9ef-4668-aa6f-5a62bf3439bb",
        "tags" : [
        ]
      },
      {
        "id" : "65bb31d1-f463-4096-8516-0f34c2264943",
        "parentId" : "cbb31617-0607-4973-8361-e4c8173cc2f1",
        "authorId" : "a31dcef8-b459-4b48-bb49-44e910fa9f34",
        "body" : "Initially yes. The controller will process and add topic IDs to these topics if IBP is at least 2.8 in processTopicChange() using the processTopicIds method.",
        "createdAt" : "2021-01-10T17:44:52Z",
        "updatedAt" : "2021-01-19T22:05:40Z",
        "lastEditedBy" : "a31dcef8-b459-4b48-bb49-44e910fa9f34",
        "tags" : [
        ]
      }
    ],
    "commit" : "12ca62e171ac2243059436a87cf9a4a6550ef2e4",
    "line" : 31,
    "diffHunk" : "@@ -1,1 +99,103 @@                                partitionReplicaAssignment: Map[Int, Seq[Int]],\n                                validate: Boolean = true,\n                                usesTopicId: Boolean = false): Unit = {\n    if (validate)\n      validateTopicCreate(topic, partitionReplicaAssignment, config)"
  }
]