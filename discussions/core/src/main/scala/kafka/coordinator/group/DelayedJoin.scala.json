[
  {
    "id" : "d8224129-ed9d-4be3-bfd8-c7ef4d16ca65",
    "prId" : 8657,
    "prUrl" : "https://github.com/apache/kafka/pull/8657#pullrequestreview-410271774",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "128962c9-0a33-46b2-8577-85bee5cab0fe",
        "parentId" : null,
        "authorId" : "0f776378-bb23-4193-9bb0-1db5973f3781",
        "body" : "This is another case of deadlock. ```DelayedJoin#tryComplete``` is in a **group lock** and it tries to complete other delayed joins which related to same **__consumer_offsets** partition.\r\n\r\nHence, this PR make it control the group lock manually in order to make sure it does not hold group lock when calling ```GroupCoordinator#onCompleteJoin```",
        "createdAt" : "2020-05-12T17:35:42Z",
        "updatedAt" : "2020-09-08T16:18:12Z",
        "lastEditedBy" : "0f776378-bb23-4193-9bb0-1db5973f3781",
        "tags" : [
        ]
      }
    ],
    "commit" : "fbd46565aa5e03f4fd9c857a184b7c2371ca5932",
    "line" : 11,
    "diffHunk" : "@@ -1,1 +42,46 @@    tryToCompleteDelayedAction()\n  }\n  override def onComplete(): Unit = coordinator.onCompleteJoin(group)\n\n  // TODO: remove this ugly chain after we move the action queue to handler thread"
  },
  {
    "id" : "40926bd5-fcf8-469a-9cee-896efbde2a4f",
    "prId" : 8657,
    "prUrl" : "https://github.com/apache/kafka/pull/8657#pullrequestreview-476959130",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "163f978f-0047-42b9-8100-1980b3462544",
        "parentId" : null,
        "authorId" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "body" : "We probably want to add a comment why this is needed.",
        "createdAt" : "2020-08-27T18:02:36Z",
        "updatedAt" : "2020-09-08T16:18:13Z",
        "lastEditedBy" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "tags" : [
        ]
      }
    ],
    "commit" : "fbd46565aa5e03f4fd9c857a184b7c2371ca5932",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +40,44 @@    coordinator.onExpireJoin()\n    // try to complete delayed actions introduced by coordinator.onCompleteJoin\n    tryToCompleteDelayedAction()\n  }\n  override def onComplete(): Unit = coordinator.onCompleteJoin(group)"
  }
]