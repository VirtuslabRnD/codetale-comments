[
  {
    "id" : "6ab54b90-4e2c-486c-84e5-6004a51aaca9",
    "prId" : 5500,
    "prUrl" : "https://github.com/apache/kafka/pull/5500#pullrequestreview-153547935",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3748a5b3-f666-4d9e-b3c1-1c0c41ea6a5a",
        "parentId" : null,
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "A comment may be helpful to mention that because of the `minOneMessage` behavior, we may need to grow the buffer to ensure progress can be made.",
        "createdAt" : "2018-09-07T23:54:23Z",
        "updatedAt" : "2018-09-08T11:52:50Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      },
      {
        "id" : "2ab24027-eac7-4572-a924-7f004c05a5f0",
        "parentId" : "3748a5b3-f666-4d9e-b3c1-1c0c41ea6a5a",
        "authorId" : "d3977c6f-fc6c-458d-85c6-a27f3013879b",
        "body" : "Good point, I've added a comment. Let me know if you think it needs to be improved",
        "createdAt" : "2018-09-08T08:25:36Z",
        "updatedAt" : "2018-09-08T11:52:50Z",
        "lastEditedBy" : "d3977c6f-fc6c-458d-85c6-a27f3013879b",
        "tags" : [
        ]
      }
    ],
    "commit" : "58028f017e7f2c47d16ef59cffe125d3ac5af99a",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +528,532 @@            case fileRecords: FileRecords =>\n              val sizeInBytes = fileRecords.sizeInBytes\n              val bytesNeeded = Math.max(config.loadBufferSize, sizeInBytes)\n\n              // minOneMessage = true in the above log.read means that the buffer may need to be grown to ensure progress can be made"
  },
  {
    "id" : "47ac5e32-9573-47fe-a2ca-6c25082760f8",
    "prId" : 6177,
    "prUrl" : "https://github.com/apache/kafka/pull/6177#pullrequestreview-225331760",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2ba81a73-869e-4c57-a4df-113e3666abfb",
        "parentId" : null,
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "We did get some flack in 2.1 for a change to this format. The problem is that we cannot downgrade once the new format is in use. We will probably have to mention this in the upgrade notes at a minimum. Unfortunately I don't see any great options at the moment to avoid this. Perhaps we should just switch to json.",
        "createdAt" : "2019-04-09T23:35:19Z",
        "updatedAt" : "2019-04-26T15:12:49Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      },
      {
        "id" : "dc3e7f0c-df98-4104-8d00-d57b82a94a7b",
        "parentId" : "2ba81a73-869e-4c57-a4df-113e3666abfb",
        "authorId" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "body" : "I see, we could discuss offline some time for a holistic solution.",
        "createdAt" : "2019-04-11T05:23:58Z",
        "updatedAt" : "2019-04-26T15:12:49Z",
        "lastEditedBy" : "3dfe0270-df82-43af-827f-0681ce1c6ad9",
        "tags" : [
        ]
      }
    ],
    "commit" : "932118542844c01e3caf657e2eee9c16dfd269d7",
    "line" : 30,
    "diffHunk" : "@@ -1,1 +1005,1009 @@  private val MEMBER_METADATA_V2 = MEMBER_METADATA_V1\n\n  private val MEMBER_METADATA_V3 = new Schema(\n    new Field(MEMBER_ID_KEY, STRING),\n    new Field(GROUP_INSTANCE_ID_KEY, NULLABLE_STRING),"
  },
  {
    "id" : "7ed331be-73dd-4e8c-ba5d-3baf4bafae89",
    "prId" : 7820,
    "prUrl" : "https://github.com/apache/kafka/pull/7820#pullrequestreview-337812085",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cbe835d3-1580-44f4-a606-898882f5d582",
        "parentId" : null,
        "authorId" : "083f2f03-ca7e-48a1-9781-482564dfdf53",
        "body" : "Can one or the other string be missing? Or will they always be present or absent together? Just wondering if this should be `Option[Pair[String, String]]` or something",
        "createdAt" : "2020-01-02T18:39:20Z",
        "updatedAt" : "2020-01-02T19:45:11Z",
        "lastEditedBy" : "083f2f03-ca7e-48a1-9781-482564dfdf53",
        "tags" : [
        ]
      },
      {
        "id" : "f482fa58-ba7e-4088-b363-0c4feedba30c",
        "parentId" : "cbe835d3-1580-44f4-a606-898882f5d582",
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "I agree the API is a bit awkward, but I think both cases are possible. For example, a tombstone will have a key, but not a value. ",
        "createdAt" : "2020-01-02T19:17:05Z",
        "updatedAt" : "2020-01-02T19:45:11Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      }
    ],
    "commit" : "67c3efe285dbab316a517d5febf0f7693561e6da",
    "line" : 73,
    "diffHunk" : "@@ -1,1 +1470,1474 @@   * Exposed for printing records using [[kafka.tools.DumpLogSegments]]\n   */\n  def formatRecordKeyAndValue(record: Record): (Option[String], Option[String]) = {\n    if (!record.hasKey) {\n      throw new KafkaException(\"Failed to decode message using offset topic decoder (message had a missing key)\")"
  },
  {
    "id" : "de6f27c8-c503-4fdd-9b29-bc36567f7fe8",
    "prId" : 9202,
    "prUrl" : "https://github.com/apache/kafka/pull/9202#pullrequestreview-492800141",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8e2dd265-9ec1-45ea-8a1b-b19c1f4e2f54",
        "parentId" : null,
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "I wonder if the version check is necessary. Is the presence of the field enough?",
        "createdAt" : "2020-09-19T00:08:45Z",
        "updatedAt" : "2020-09-19T00:09:36Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      },
      {
        "id" : "941cc7ba-9382-47dc-ba02-36d229471723",
        "parentId" : "8e2dd265-9ec1-45ea-8a1b-b19c1f4e2f54",
        "authorId" : "d520dc4e-6bae-4b0b-90d6-4c0a1cabb518",
        "body" : "@hachikuji , well, you're right, the `CURRENT_STATE_TIMESTAMP_KEY` field only set in `version >= 2`... in normal cases. I'm not sure if there's possibility that there will be version 0 or 1 containing the `CURRENT_STATE_TIMESTAMP_KEY` field situation. In my opinion, I think the check is OK and make it more robust, and most importantly, it's a simple check, not too many overhead to the resource. What do you think?",
        "createdAt" : "2020-09-21T09:37:32Z",
        "updatedAt" : "2020-09-21T09:38:14Z",
        "lastEditedBy" : "d520dc4e-6bae-4b0b-90d6-4c0a1cabb518",
        "tags" : [
        ]
      },
      {
        "id" : "a744fab0-c921-4832-b051-74e114691482",
        "parentId" : "8e2dd265-9ec1-45ea-8a1b-b19c1f4e2f54",
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "No strong opinion. I'm ok leaving the check.",
        "createdAt" : "2020-09-21T16:46:04Z",
        "updatedAt" : "2020-09-21T16:46:04Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      }
    ],
    "commit" : "85b0b7a459a4e6c9fb3c49a976b1c75062b12e3b",
    "line" : 31,
    "diffHunk" : "@@ -1,1 +1412,1416 @@        val initialState = if (memberMetadataArray.isEmpty) Empty else Stable\n        val currentStateTimestamp: Option[Long] =\n          if (version >= 2 && value.hasField(CURRENT_STATE_TIMESTAMP_KEY)) {\n            val timestamp = value.getLong(CURRENT_STATE_TIMESTAMP_KEY)\n            if (timestamp == -1) None else Some(timestamp)"
  },
  {
    "id" : "a22ac607-87a5-4f30-8635-2f8cf24ad65f",
    "prId" : 9318,
    "prUrl" : "https://github.com/apache/kafka/pull/9318#pullrequestreview-502981765",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "15cc5241-3c75-4088-b070-a55fa1f23a98",
        "parentId" : null,
        "authorId" : "59ca7821-b29c-4f24-a9d5-cbd394145686",
        "body" : "nit: In all the other usage of `serializeMessage`, you have always put the closing parenthesis on the previous line, together with the other closing parenthesises. I would do the same here to remain consistent.",
        "createdAt" : "2020-10-06T14:01:44Z",
        "updatedAt" : "2020-11-18T03:06:14Z",
        "lastEditedBy" : "59ca7821-b29c-4f24-a9d5-cbd394145686",
        "tags" : [
        ]
      }
    ],
    "commit" : "df39a8fa229dd99de623b96d8aae154a1735d8ae",
    "line" : 287,
    "diffHunk" : "@@ -1,1 +1055,1059 @@      // version 1 has a non empty expireTimestamp field\n      .setExpireTimestamp(offsetAndMetadata.expireTimestamp.getOrElse(OffsetCommitRequest.DEFAULT_TIMESTAMP))\n    )\n  }\n"
  },
  {
    "id" : "c67a0028-d9f9-4246-a2de-6b435192baf9",
    "prId" : 9441,
    "prUrl" : "https://github.com/apache/kafka/pull/9441#pullrequestreview-649546946",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "42c72668-fcb3-4596-ac67-10645324aa18",
        "parentId" : null,
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "One minor improvement here is to change `addLoadingPartition` so that it checks whether the partition is already contained in `ownedPartitions`. If so, we can return false.",
        "createdAt" : "2021-04-30T19:17:40Z",
        "updatedAt" : "2021-04-30T19:18:54Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      }
    ],
    "commit" : "b2dabf355f6ef7110901c6eb1204836683d626db",
    "line" : 67,
    "diffHunk" : "@@ -1,1 +550,554 @@      info(s\"Not loading offsets and group metadata for $topicPartition \" +\n        s\"in epoch $coordinatorEpoch since current epoch is ${epochForPartitionId.get(topicPartition.partition)}\")\n    } else if (!addLoadingPartition(topicPartition.partition)) {\n      info(s\"Already loading offsets and group metadata from $topicPartition\")\n    } else {"
  }
]