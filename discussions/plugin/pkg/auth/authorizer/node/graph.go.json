[
  {
    "id" : "279d6114-e8c6-4700-b958-b2c7fd216661",
    "prId" : 92466,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/92466#pullrequestreview-526927706",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ccf2ac26-cf8d-47b7-8624-c91d185dd5ac",
        "parentId" : null,
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "Why is DeletePod not intstrumented?",
        "createdAt" : "2020-11-09T17:24:22Z",
        "updatedAt" : "2020-11-10T07:41:10Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "d9afacfc-5dc1-4b08-9e91-27472cd71262",
        "parentId" : "ccf2ac26-cf8d-47b7-8624-c91d185dd5ac",
        "authorId" : "5af3a49e-2ce9-4046-8a13-ee66b8cbca2e",
        "body" : "Yes, good point. I added metrics to DeletePod and SetNodeConfigMap.",
        "createdAt" : "2020-11-10T07:41:19Z",
        "updatedAt" : "2020-11-10T07:41:19Z",
        "lastEditedBy" : "5af3a49e-2ce9-4046-8a13-ee66b8cbca2e",
        "tags" : [
        ]
      }
    ],
    "commit" : "4d81f7e1299b834839dcfea84920718304406a80",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +339,343 @@\tdefer func() {\n\t\tgraphActionsDuration.WithLabelValues(\"AddPod\").Observe(time.Since(start).Seconds())\n\t}()\n\tg.lock.Lock()\n\tdefer g.lock.Unlock()"
  },
  {
    "id" : "c08773c4-af9b-4751-9c47-69fb470d9ced",
    "prId" : 46076,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/46076#pullrequestreview-40106432",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5e3e7996-6d5a-4a64-9875-3489a5638442",
        "parentId" : null,
        "authorId" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "body" : "I'm confused... when do nodes have outgoing edges?",
        "createdAt" : "2017-05-24T20:17:26Z",
        "updatedAt" : "2017-05-30T20:52:51Z",
        "lastEditedBy" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "tags" : [
        ]
      }
    ],
    "commit" : "fc8e915a4bcfdd224d1ff625569a7af1a2766690",
    "line" : 170,
    "diffHunk" : "@@ -1,1 +168,172 @@\t\t}\n\t\treturn true\n\t})\n\tg.graph.VisitTo(vertex, func(neighbor graph.Node) bool {\n\t\t// this upstream neighbor has only one edge (which must be to us), so remove them as well"
  },
  {
    "id" : "354d21f8-e0a7-4f50-85a1-dc40461474ac",
    "prId" : 46076,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/46076#pullrequestreview-40448414",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "65a9cd4f-6ff3-4276-ba3b-f3748bc0e674",
        "parentId" : null,
        "authorId" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "body" : "If I'm following this correctly (big if), `graph.Degree` doesn't pay attention to edge directionality, so in a case like node <- pod <- secret, the pod would have degree 2, and wouldn't be removed.  Also, in the case with something (A) that is referenced by something else (B) that is referenced by 2 nodes, (A) will have degree 1, but shouldn't be removed.\r\n\r\nI think what you might want to do is add all the visited nodes to a list, and then iteratively remove items from the list with no outgoing edges (until either the list is empty or no items are removed)",
        "createdAt" : "2017-05-24T20:21:27Z",
        "updatedAt" : "2017-05-30T20:52:51Z",
        "lastEditedBy" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "tags" : [
        ]
      },
      {
        "id" : "a16f59e6-1c06-4e75-9a56-eef57ba767b2",
        "parentId" : "65a9cd4f-6ff3-4276-ba3b-f3748bc0e674",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "correct, degree counts incoming and outgoing edges. this is avoiding leaving orphan vertices with no edges. since we ignore any neighbor with a degree higher than 1, we leave them alone if they are connected to anyone else in addition to us.",
        "createdAt" : "2017-05-26T05:37:58Z",
        "updatedAt" : "2017-05-30T20:52:51Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "fc8e915a4bcfdd224d1ff625569a7af1a2766690",
    "line" : 170,
    "diffHunk" : "@@ -1,1 +175,179 @@\t\t}\n\t\treturn true\n\t})\n\n\t// remove the vertex"
  }
]