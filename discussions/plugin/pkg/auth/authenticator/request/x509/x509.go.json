[
  {
    "id" : "b0169a5a-22dd-451a-8f8a-edcc095bb8cc",
    "prId" : 34524,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/34524#pullrequestreview-3612949",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8f92d2b7-f2f7-40db-bd35-cd0292dd36bf",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "see https://golang.org/src/crypto/tls/handshake_server.go, processCertsFromClient for how the stdlib verifies the cert chain\n\nonly the leaf cert is verified, the remaining certs are client-supplied intermediates\n",
        "createdAt" : "2016-10-11T05:22:07Z",
        "updatedAt" : "2016-10-11T05:48:50Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "c984744cb1e5a047d947beeea83fc8ed48d3fa4d",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +57,61 @@\t}\n\n\t// Use intermediates, if provided\n\toptsCopy := a.opts\n\tif optsCopy.Intermediates == nil && len(req.TLS.PeerCertificates) > 1 {"
  },
  {
    "id" : "eca0bfe1-4ce2-4c31-8245-5c0e55b80270",
    "prId" : 30392,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8a54dcf6-b18d-424a-ae7a-ae67d217d2f6",
        "parentId" : null,
        "authorId" : "fa477146-9a47-4754-b38c-de8062e65e13",
        "body" : "@liggitt we have some additional checks in ours and we separate this case from `SubjectToUserConversion`, but I can't say that I remember why.\n",
        "createdAt" : "2016-08-10T19:39:36Z",
        "updatedAt" : "2016-08-10T19:39:36Z",
        "lastEditedBy" : "fa477146-9a47-4754-b38c-de8062e65e13",
        "tags" : [
        ]
      }
    ],
    "commit" : "e5d7f01b91395dea0edaeb4001ffda74dcb57614",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +93,97 @@\t\treturn nil, false, nil\n\t}\n\treturn &user.DefaultInfo{\n\t\tName:   chain[0].Subject.CommonName,\n\t\tGroups: chain[0].Subject.Organization,"
  },
  {
    "id" : "78d50537-0a70-451d-9627-9327aa3d9e37",
    "prId" : 25137,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2d0b91ba-d6a0-4856-b11e-aab02481e90a",
        "parentId" : null,
        "authorId" : "020e031c-c298-4e7e-a533-9a04439c203c",
        "body" : "Where is this function called?  In `pkg/apiserver/authenticator/authn.go` I see `newAuthenticatorFromClientCAFile` does `return x509.New(opts, x509.CommonNameUserConversion), nil`.  But I don't see where `EmailAddressUserConversion` is ever referenced.\n",
        "createdAt" : "2016-05-11T16:24:45Z",
        "updatedAt" : "2016-05-23T22:38:40Z",
        "lastEditedBy" : "020e031c-c298-4e7e-a533-9a04439c203c",
        "tags" : [
        ]
      },
      {
        "id" : "79620ca9-5011-4d57-913d-c543a7c15573",
        "parentId" : "2d0b91ba-d6a0-4856-b11e-aab02481e90a",
        "authorId" : "9ca65a79-fccf-40d2-8bf4-84a611116ce4",
        "body" : "Authentication over TLS can use 1 of 3 fields within the user certificate to determine what is the username of the authenticating user. By default, it will use the CommonName field. If you want to use the 2 other fields (EmailAddress and DNSName), you will need to modify the code to replace `CommonNameUserConversion` with either `EmailAddressUserConversion` or `DNSNameUserConversion`.\n",
        "createdAt" : "2016-05-11T16:40:21Z",
        "updatedAt" : "2016-05-23T22:38:40Z",
        "lastEditedBy" : "9ca65a79-fccf-40d2-8bf4-84a611116ce4",
        "tags" : [
        ]
      },
      {
        "id" : "32beebfc-f8fa-4a6d-afe2-e19207c3b96b",
        "parentId" : "2d0b91ba-d6a0-4856-b11e-aab02481e90a",
        "authorId" : "020e031c-c298-4e7e-a533-9a04439c203c",
        "body" : "I take it you have modified that code in your own fork, and are contributing part of a fix back upstream?\n",
        "createdAt" : "2016-05-13T00:04:26Z",
        "updatedAt" : "2016-05-23T22:38:40Z",
        "lastEditedBy" : "020e031c-c298-4e7e-a533-9a04439c203c",
        "tags" : [
        ]
      },
      {
        "id" : "11337c5a-7d1d-455f-936f-c36dbac3e3c6",
        "parentId" : "2d0b91ba-d6a0-4856-b11e-aab02481e90a",
        "authorId" : "9ca65a79-fccf-40d2-8bf4-84a611116ce4",
        "body" : "Yeah, we're picking up emailAddress field of user certs as username in our deployment. However, the existing code doesn't seem to pick up this field correctly. Thought it might be useful to upstream this fix. \n",
        "createdAt" : "2016-05-13T00:58:39Z",
        "updatedAt" : "2016-05-23T22:38:40Z",
        "lastEditedBy" : "9ca65a79-fccf-40d2-8bf4-84a611116ce4",
        "tags" : [
        ]
      }
    ],
    "commit" : "235020ad64efc6d9d2ed40101b4384ba6f58500a",
    "line" : 11,
    "diffHunk" : "@@ -1,1 +105,109 @@\n// EmailAddressUserConversion builds user info from a certificate chain using the first EmailAddress on the certificate\nvar EmailAddressUserConversion = UserConversionFunc(func(chain []*x509.Certificate) (user.Info, bool, error) {\n\tvar emailAddressOID asn1.ObjectIdentifier = []int{1, 2, 840, 113549, 1, 9, 1}\n\tif len(chain[0].EmailAddresses) == 0 {"
  },
  {
    "id" : "d51f8946-f420-40a1-abc4-fe82cdbec87a",
    "prId" : 2793,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d4d3bca1-4bcc-4b13-a870-8ea564347a91",
        "parentId" : null,
        "authorId" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "body" : "Just \"User\" - Get is typically omitted where clear\n",
        "createdAt" : "2014-12-08T21:39:01Z",
        "updatedAt" : "2014-12-09T16:36:33Z",
        "lastEditedBy" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "tags" : [
        ]
      }
    ],
    "commit" : "09ba404fb7bb77dcaf631cec3d22b57491a61661",
    "line" : null,
    "diffHunk" : "@@ -1,1 +28,32 @@type UserConversion interface {\n\tUser(chain []*x509.Certificate) (user.Info, bool, error)\n}\n\n// UserConversionFunc is a function that implements the UserConversion interface."
  }
]