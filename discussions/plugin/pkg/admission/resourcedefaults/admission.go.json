[
  {
    "id" : "e8c0f8c4-2bc7-42a4-822a-905f6a06adc9",
    "prId" : 3472,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4bca882b-c4d3-479e-8ba9-1f7199b7994c",
        "parentId" : null,
        "authorId" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "body" : "Give this package a doc.go file explaining what it does (same as your PR) since this is an \"example\"\n",
        "createdAt" : "2015-01-14T22:25:32Z",
        "updatedAt" : "2015-01-15T01:52:09Z",
        "lastEditedBy" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "tags" : [
        ]
      }
    ],
    "commit" : "eed64d2bd08ac7b6a87206373d0cfb52a29bcc60",
    "line" : 1,
    "diffHunk" : "@@ -1,1 +-1,3 @@/*\nCopyright 2014 Google Inc. All rights reserved.\n"
  },
  {
    "id" : "fe023d07-1625-4453-8e6a-ab31a2726480",
    "prId" : 3472,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "27385cc2-700c-400a-be9b-5e1d1538b392",
        "parentId" : null,
        "authorId" : "020e031c-c298-4e7e-a533-9a04439c203c",
        "body" : "use enum for GetOperation return value.\n",
        "createdAt" : "2015-01-15T16:22:20Z",
        "updatedAt" : "2015-01-15T16:22:20Z",
        "lastEditedBy" : "020e031c-c298-4e7e-a533-9a04439c203c",
        "tags" : [
        ]
      },
      {
        "id" : "e3723232-0ff7-4cce-a7a9-95b90969519a",
        "parentId" : "27385cc2-700c-400a-be9b-5e1d1538b392",
        "authorId" : "6eca0ade-9879-4dd7-ad14-547e16f5c041",
        "body" : "I can handle that in a separate pull request.\n\nSent from my iPhone\n\n> On Jan 15, 2015, at 11:22 AM, Eric Tune notifications@github.com wrote:\n> \n> In plugin/pkg/admission/resourcedefaults/admission.go:\n> \n> > -       return NewResourceDefaults(), nil\n> > -   })\n> >   +}\n> >   +\n> >   +const (\n> > -   defaultMemory string = \"512Mi\"\n> > -   defaultCPU    string = \"1\"\n> >   +)\n> >   +\n> >   +// resourceDefaults is an implementation of admission.Interface which applies default resource limits (cpu/memory)\n> >   +// It is useful for clusters that do not want to support unlimited usage constraints, but instead supply sensible defaults\n> >   +type resourceDefaults struct{}\n> >   +\n> >   +func (resourceDefaults) Admit(a admission.Attributes) (err error) {\n> > -   // ignore deletes, only process create and update\n> > -   if a.GetOperation() == \"DELETE\" {\n> >   use enum for GetOperation return value.\n> \n> â€”\n> Reply to this email directly or view it on GitHub.\n",
        "createdAt" : "2015-01-15T16:43:13Z",
        "updatedAt" : "2015-01-15T16:43:13Z",
        "lastEditedBy" : "6eca0ade-9879-4dd7-ad14-547e16f5c041",
        "tags" : [
        ]
      },
      {
        "id" : "7b39b2fb-678d-4436-9847-d0a19b79e734",
        "parentId" : "27385cc2-700c-400a-be9b-5e1d1538b392",
        "authorId" : "020e031c-c298-4e7e-a533-9a04439c203c",
        "body" : "sure\n",
        "createdAt" : "2015-01-15T16:49:36Z",
        "updatedAt" : "2015-01-15T16:49:36Z",
        "lastEditedBy" : "020e031c-c298-4e7e-a533-9a04439c203c",
        "tags" : [
        ]
      }
    ],
    "commit" : "eed64d2bd08ac7b6a87206373d0cfb52a29bcc60",
    "line" : 45,
    "diffHunk" : "@@ -1,1 +43,47 @@func (resourceDefaults) Admit(a admission.Attributes) (err error) {\n\t// ignore deletes, only process create and update\n\tif a.GetOperation() == \"DELETE\" {\n\t\treturn nil\n\t}"
  },
  {
    "id" : "fe33cf22-aae7-435a-9a17-8466eaec8a28",
    "prId" : 3472,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ae33b90c-cfe5-455c-8179-8d530ebbc827",
        "parentId" : null,
        "authorId" : "020e031c-c298-4e7e-a533-9a04439c203c",
        "body" : "This seems closely related to (#2587).  Setting defaults is a tricky business.  I think we should let @thockin comment.  He might say that we need to reach agreement on how to default values first before adding code that defaults values, or that this is simple enough to not need to wait.  He might say that this is really a type of validation or conversion function, and belongs there, or not.\n",
        "createdAt" : "2015-01-15T16:26:51Z",
        "updatedAt" : "2015-01-15T16:26:51Z",
        "lastEditedBy" : "020e031c-c298-4e7e-a533-9a04439c203c",
        "tags" : [
        ]
      },
      {
        "id" : "27bfe311-67cb-462c-9a53-f13340c8ec12",
        "parentId" : "ae33b90c-cfe5-455c-8179-8d530ebbc827",
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "I am out of office today and tomorrow, but will try to take a look later\ntoday.\nOn Jan 15, 2015 8:27 AM, \"Eric Tune\" notifications@github.com wrote:\n\n> In plugin/pkg/admission/resourcedefaults/admission.go\n> https://github.com/GoogleCloudPlatform/kubernetes/pull/3472#discussion-diff-23021806\n> :\n> \n> > +// resourceDefaults is an implementation of admission.Interface which applies default resource limits (cpu/memory)\n> > +// It is useful for clusters that do not want to support unlimited usage constraints, but instead supply sensible defaults\n> > +type resourceDefaults struct{}\n> > +\n> > +func (resourceDefaults) Admit(a admission.Attributes) (err error) {\n> > -   // ignore deletes, only process create and update\n> > -   if a.GetOperation() == \"DELETE\" {\n> > -       return nil\n> > -   }\n> >   +\n> > -   // we only care about pods\n> > -   if a.GetKind() != \"pods\" {\n> > -       return nil\n> > -   }\n> >   +\n> > -   // get the pod, so we can validate each of the containers within have default mem / cpu constraints\n> \n> This seems closely related to (#2587\n> https://github.com/GoogleCloudPlatform/kubernetes/pull/2587). Setting\n> defaults is a tricky business. I think we should let @thockin\n> https://github.com/thockin comment. He might say that we need to reach\n> agreement on how to default values first before adding code that defaults\n> values, or that this is simple enough to not need to wait. He might say\n> that this is really a type of validation or conversion function, and\n> belongs there, or not.\n> \n> ## \n> \n> Reply to this email directly or view it on GitHub\n> https://github.com/GoogleCloudPlatform/kubernetes/pull/3472/files#r23021806\n> .\n",
        "createdAt" : "2015-01-15T16:46:55Z",
        "updatedAt" : "2015-01-15T16:46:55Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      },
      {
        "id" : "ca7d6b75-4118-46f3-a2c6-3697d74ccac5",
        "parentId" : "ae33b90c-cfe5-455c-8179-8d530ebbc827",
        "authorId" : "6eca0ade-9879-4dd7-ad14-547e16f5c041",
        "body" : "Default values that are applied during conversion will have already happened prior to this code being invoked.  If the default value during conversion is to set CPU and Memory to unlimited (a.k.a as \"0\" in current code), then I still want something to intercept.\n\nWe could evolve this in the future to let the configuration file that is fed as input to each admission control plug-in let a cluster operator set the default CPU and Memory there so it's not statically code, but even without a file, I needed a default default that was not unlimited.\n\nThe plug-in is optional, it's useful for testing/hacking scenarios where I run e2e tests and want to make sure that as that spins up containers I can track usage stats for my other quota related work (total CPU/mem per namespace, etc.).  \n\nIf for no other reason than that, I would hope this is trivial enough to merge.\n",
        "createdAt" : "2015-01-15T17:05:51Z",
        "updatedAt" : "2015-01-15T17:05:51Z",
        "lastEditedBy" : "6eca0ade-9879-4dd7-ad14-547e16f5c041",
        "tags" : [
        ]
      }
    ],
    "commit" : "eed64d2bd08ac7b6a87206373d0cfb52a29bcc60",
    "line" : 54,
    "diffHunk" : "@@ -1,1 +52,56 @@\t}\n\n\t// get the pod, so we can validate each of the containers within have default mem / cpu constraints\n\tobj := a.GetObject()\n\tpod := obj.(*api.Pod)"
  }
]