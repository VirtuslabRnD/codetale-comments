[
  {
    "id" : "a7f252a9-9072-4d19-b534-d83892e64237",
    "prId" : 13735,
    "prUrl" : "https://github.com/apache/airflow/pull/13735#pullrequestreview-593781137",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9e2168bc-5612-4dea-b333-06de173cd6cb",
        "parentId" : null,
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "Should we also update `pod-template-file.kubernetes-helm-yaml` to support Kubernetes Workers?\r\nhttps://github.com/apache/airflow/blob/master/chart/files/pod-template-file.kubernetes-helm-yaml",
        "createdAt" : "2021-01-20T10:18:26Z",
        "updatedAt" : "2021-03-12T19:09:54Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      },
      {
        "id" : "df804e74-99ca-4ab7-87fa-16ec1d92c69a",
        "parentId" : "9e2168bc-5612-4dea-b333-06de173cd6cb",
        "authorId" : "c1911b8f-bc97-438e-82a1-54e6f41aaab8",
        "body" : "Not tested with Kubernetes workers.\r\nThe `extraVolumes` and `extraVolumeMounts` options also seem to be excluded from the file.\r\nNeed to support it?",
        "createdAt" : "2021-01-21T14:26:23Z",
        "updatedAt" : "2021-03-12T19:09:54Z",
        "lastEditedBy" : "c1911b8f-bc97-438e-82a1-54e6f41aaab8",
        "tags" : [
        ]
      },
      {
        "id" : "f1b6c237-edce-48f3-99f4-a76f7a549dc6",
        "parentId" : "9e2168bc-5612-4dea-b333-06de173cd6cb",
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "For now, we can only support Celery Executor, but I think it is worth adding some docs about this limitation. ",
        "createdAt" : "2021-01-21T16:55:33Z",
        "updatedAt" : "2021-03-12T19:09:54Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      },
      {
        "id" : "e17d0dfe-246c-4c30-8f4c-a6bf67207db1",
        "parentId" : "9e2168bc-5612-4dea-b333-06de173cd6cb",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "@Swalloow Can you add the limitation to the docs",
        "createdAt" : "2021-02-19T01:10:39Z",
        "updatedAt" : "2021-03-12T19:09:54Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      }
    ],
    "commit" : "ed4af9f28a09d09cbd013bbf6f4e9f08d8490032",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +216,220 @@        {{- end }}\n{{- if .Values.workers.extraContainers }}\n{{- toYaml .Values.workers.extraContainers | nindent 8 }}\n{{- end }}\n      volumes:"
  },
  {
    "id" : "a6a0c91f-d5b0-4a40-aa79-66b51d6f3852",
    "prId" : 13735,
    "prUrl" : "https://github.com/apache/airflow/pull/13735#pullrequestreview-596192991",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "25049497-62fe-4628-9f05-043b5ca987b3",
        "parentId" : null,
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "⚠️ Doing this with Kube executor would break things - tasks would never complete.\r\n\r\n\r\nIf you add an extra container that has a daemon process running, then even if the \"Airflow\" worker container has finished, the pod is still active as the daemon in the other container is still up, and the pod never leaves the running state.\r\n\r\nWe (Astro) have had to hack around this to support running Istio sidecars, but it was not a pretty solution.",
        "createdAt" : "2021-02-23T10:23:38Z",
        "updatedAt" : "2021-03-12T19:09:54Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "67fd22e0-d9ab-4370-9407-66527e791aa9",
        "parentId" : "25049497-62fe-4628-9f05-043b5ca987b3",
        "authorId" : "c1911b8f-bc97-438e-82a1-54e6f41aaab8",
        "body" : "I agree. I added the README that this option only supports CeleryExecutor.\r\nAnd worker-deployment is not created in KubernetesExecutor.",
        "createdAt" : "2021-02-23T10:35:10Z",
        "updatedAt" : "2021-03-12T19:09:54Z",
        "lastEditedBy" : "c1911b8f-bc97-438e-82a1-54e6f41aaab8",
        "tags" : [
        ]
      }
    ],
    "commit" : "ed4af9f28a09d09cbd013bbf6f4e9f08d8490032",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +216,220 @@        {{- end }}\n{{- if .Values.workers.extraContainers }}\n{{- toYaml .Values.workers.extraContainers | nindent 8 }}\n{{- end }}\n      volumes:"
  }
]