[
  {
    "id" : "4347e92d-f7fc-4b3e-ad62-0635583ea950",
    "prId" : 42819,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/42819#pullrequestreview-26111923",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "286862ce-5b90-48f9-a625-0c328f8b92f7",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "same here",
        "createdAt" : "2017-03-09T18:52:36Z",
        "updatedAt" : "2017-03-09T19:10:33Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "3acff7d3eff81bb9df4a3f4fd05ad07721c2ccde",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +89,93 @@    - dir_mode: 755\n    - makedirs: True\n\n/etc/kubernetes/addons/dns/kubedns-sa.yaml:\n  file.managed:"
  },
  {
    "id" : "4572a8e8-5e14-428c-a806-a4c7a467915e",
    "prId" : 12833,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d7836a12-73d8-4988-98ce-e48783b4392c",
        "parentId" : null,
        "authorId" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "body" : "Heh, you actually succeeded where many have failed. GKE will happily just keep trucking with this change (and assume it's off). We initially won't pass the kube-env correctly, so configure-vm will whine, but that particular block in configure-vm doesn't actually errexit from nounset (which is an accidental \"feature\"), so `enable_cluster_registry` just ends up empty.\n",
        "createdAt" : "2015-08-20T22:08:08Z",
        "updatedAt" : "2015-08-21T20:32:14Z",
        "lastEditedBy" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "tags" : [
        ]
      }
    ],
    "commit" : "3dc10a209ba457aa8fd28a5e0593e1608c6babc4",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +82,86 @@{% endif %}\n\n{% if pillar.get('enable_cluster_registry', '').lower() == 'true' %}\n/etc/kubernetes/addons/registry/registry-svc.yaml:\n  file.managed:"
  },
  {
    "id" : "de045723-0cf7-428e-8b8c-a015f669d6f2",
    "prId" : 10488,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ed594e9e-f25f-40f3-917e-0af3506d5e20",
        "parentId" : null,
        "authorId" : "6eca0ade-9879-4dd7-ad14-547e16f5c041",
        "body" : "i think the same holds here, can kube-addons service.running just have a require on this file existing?\n",
        "createdAt" : "2015-06-29T19:03:08Z",
        "updatedAt" : "2015-07-03T16:44:22Z",
        "lastEditedBy" : "6eca0ade-9879-4dd7-ad14-547e16f5c041",
        "tags" : [
        ]
      },
      {
        "id" : "8db19a86-6164-4bf9-9afa-0b5cb4a611e2",
        "parentId" : "ed594e9e-f25f-40f3-917e-0af3506d5e20",
        "authorId" : "8fc8f958-3c0e-47dd-a0fb-b8cc483b4efb",
        "body" : "I will add; I don't think it is sufficient because of the daemon-reload salt issue, but I agree it is better to declare dependencies.\n",
        "createdAt" : "2015-07-01T10:43:09Z",
        "updatedAt" : "2015-07-03T16:44:22Z",
        "lastEditedBy" : "8fc8f958-3c0e-47dd-a0fb-b8cc483b4efb",
        "tags" : [
        ]
      }
    ],
    "commit" : "25007421bab64edfcc50d5636919cd696386365a",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +115,119 @@{% if pillar.get('is_systemd') %}\n\n{{ pillar.get('systemd_system_path') }}/kube-addons.service:\n  file.managed:\n    - source: salt://kube-addons/kube-addons.service"
  },
  {
    "id" : "adb45e4f-5684-4450-8bb2-917ebf9e243c",
    "prId" : 10077,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5653bfd0-0d84-481b-8150-bebb5e301d33",
        "parentId" : null,
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "Is the enable_cluster_ui variable defined anywhere?\n",
        "createdAt" : "2015-06-26T22:10:44Z",
        "updatedAt" : "2015-07-01T21:22:06Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      },
      {
        "id" : "9a09fcec-0530-47dc-b6ff-938c367b22a2",
        "parentId" : "5653bfd0-0d84-481b-8150-bebb5e301d33",
        "authorId" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "body" : "No, does it need to be? I thought that since the default was true, we didn't need to override it in files like https://github.com/GoogleCloudPlatform/kubernetes/blob/ffb846a284fd0fd125e331fb01b26a8d4650ea9c/cluster/gce/configure-vm.sh#L258\n\nDoes the variable also need to be declared somewhere?\n",
        "createdAt" : "2015-06-26T22:25:43Z",
        "updatedAt" : "2015-07-01T21:22:06Z",
        "lastEditedBy" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "tags" : [
        ]
      },
      {
        "id" : "ab02d0d5-2e1c-4185-a066-0caac038bd57",
        "parentId" : "5653bfd0-0d84-481b-8150-bebb5e301d33",
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "Ah, I see. No, this is fine, I just don't know salt well :)\n",
        "createdAt" : "2015-06-26T22:50:10Z",
        "updatedAt" : "2015-07-01T21:22:06Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      }
    ],
    "commit" : "78609986b95d00420c3779d238744e160f55ae54",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +88,92 @@{% endif %}\n\n{% if pillar.get('enable_cluster_ui', 'true').lower() == 'true' %}\n/etc/kubernetes/addons/kube-ui:\n  file.recurse:"
  },
  {
    "id" : "9a543f9b-2746-46dd-978b-027c7f86b717",
    "prId" : 9309,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a35af00c-d9ec-42bb-a952-9764af083ad7",
        "parentId" : null,
        "authorId" : "a6409368-42e0-44a9-bf79-9d3042ac3b65",
        "body" : "I am little bit confused here: you introduced a new mode called googleinfluxdb which enable both GCM and influxdb, right? If I understood it correctly, shouldn't the source here points to  cluster/addons/cluster-monitoring/googleinfluxdb which contains yaml files defining this mode?\n",
        "createdAt" : "2015-06-05T16:26:41Z",
        "updatedAt" : "2015-06-06T00:54:29Z",
        "lastEditedBy" : "a6409368-42e0-44a9-bf79-9d3042ac3b65",
        "tags" : [
        ]
      },
      {
        "id" : "3e2ea595-523d-41dc-b20c-0772daa98fe6",
        "parentId" : "a35af00c-d9ec-42bb-a952-9764af083ad7",
        "authorId" : "8e448017-7838-493d-a424-33cada0da657",
        "body" : "In order to enable both GCM/GCL and InfluxDB/Grafana we need to enable all the services/controllers for both (meaning we need everything in `cluster/addons/cluster-monitoring/influxdb` and `cluster/addons/cluster-monitoring/google`) _except_ for the `heapster-controller` files which need to be modified to be able to pass to both backends instead of just one or the other (hence the new `heapster-controller-combined` file).\n\nSo when `googleinfluxdb` is specified, we pick up all the files under `cluster/addons/cluster-monitoring/*` including the `google`, `influxdb`, and the new `googleinfluxdb` folders, but we exclude the `heapster-controller` files (`googleinfluxdb` contains the new combined `heapster-controller-combined` file).\n\nAn alternative would be to copy all the non-`heapster-controller` files from influxdb to the new `googleinfluxdb` folder. That way we could just include `googleinfluxdb` folder and be done. But I'd prefer not to do that (people will have to remember to modify both instances of each file). Let me know if you feel strongly otherwise.\n",
        "createdAt" : "2015-06-05T16:47:02Z",
        "updatedAt" : "2015-06-06T00:54:29Z",
        "lastEditedBy" : "8e448017-7838-493d-a424-33cada0da657",
        "tags" : [
        ]
      }
    ],
    "commit" : "a839f47d4a782669d20561a52144eade835a38e5",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +24,28 @@/etc/kubernetes/addons/cluster-monitoring/googleinfluxdb:\n  file.recurse:\n    - source: salt://kube-addons/cluster-monitoring\n    - include_pat: E@(^.+\\.yaml$|^.+\\.json$)\n    - exclude_pat: E@(^.+heapster-controller\\.yaml$|^.+heapster-controller\\.json$)"
  },
  {
    "id" : "1959a649-2b06-40e0-b677-7ce40e8cf49f",
    "prId" : 3601,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fd6359fd-4aef-490e-9ee3-849c308d3635",
        "parentId" : null,
        "authorId" : "e19009d8-ed5c-45bb-b5ce-4f8d956c6c45",
        "body" : "YAML has an explicit bool type that turns into a python bool via salt..  It is a little odd that we are doing a string compare here instead.\n",
        "createdAt" : "2015-01-20T18:33:29Z",
        "updatedAt" : "2015-01-21T20:26:01Z",
        "lastEditedBy" : "e19009d8-ed5c-45bb-b5ce-4f8d956c6c45",
        "tags" : [
        ]
      },
      {
        "id" : "f4374fe2-f661-4dc9-8468-f357db8b2599",
        "parentId" : "fd6359fd-4aef-490e-9ee3-849c308d3635",
        "authorId" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "body" : "I'm going to try the \"is defined and pillar['enable_cluster_monitoring']\"\napproach again, but when I tried this last time, it was always true, even\nwhen enable_cluster_monitoring='false'.\n\nOn Tue, Jan 20, 2015 at 10:33 AM, Joe Beda notifications@github.com wrote:\n\n> In cluster/saltbase/salt/kube-addons/init.sls\n> https://github.com/GoogleCloudPlatform/kubernetes/pull/3601#discussion-diff-23243505\n> :\n> \n> > @@ -0,0 +1,79 @@\n> > +{% if pillar.get('enable_cluster_monitoring', '').lower() == 'true' %}\n> \n> YAML has an explicit bool type that turns into a python bool via salt.. It\n> is a little odd that we are doing a string compare here instead.\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/GoogleCloudPlatform/kubernetes/pull/3601/files#r23243505\n> .\n",
        "createdAt" : "2015-01-20T18:41:39Z",
        "updatedAt" : "2015-01-21T20:26:01Z",
        "lastEditedBy" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "tags" : [
        ]
      },
      {
        "id" : "f6fe91fd-450f-4506-9172-8b2e783ea00c",
        "parentId" : "fd6359fd-4aef-490e-9ee3-849c308d3635",
        "authorId" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "body" : "I bet I know what's wrong. I bet the commit that changed the init.sls YAML to all be quoted actually broke this, because this looks like\n`enable_cluster_monitoring: 'true'`\nnow, which is probably coming in as a Python string, no? (I need to get up a cluster to test this, jussec)\n",
        "createdAt" : "2015-01-20T19:00:47Z",
        "updatedAt" : "2015-01-21T20:26:01Z",
        "lastEditedBy" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "tags" : [
        ]
      },
      {
        "id" : "57e1607c-df96-4155-8f4e-b57d2b9d1e6a",
        "parentId" : "fd6359fd-4aef-490e-9ee3-849c308d3635",
        "authorId" : "e19009d8-ed5c-45bb-b5ce-4f8d956c6c45",
        "body" : "Exactly -- the explicit quoting makes it a string in yaml.  That may be okay, but we should be consistent and eyes open here.\n",
        "createdAt" : "2015-01-20T19:02:16Z",
        "updatedAt" : "2015-01-21T20:26:01Z",
        "lastEditedBy" : "e19009d8-ed5c-45bb-b5ce-4f8d956c6c45",
        "tags" : [
        ]
      },
      {
        "id" : "ad6ba336-edf0-4030-b5d1-d64cb9b67e20",
        "parentId" : "fd6359fd-4aef-490e-9ee3-849c308d3635",
        "authorId" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "body" : "Yes. This is actually broken elsewhere already (in particular, hunt for\n'enable_cluster_dns' and it's already broken). The problem, and I love\nsaying sentences like this, is that 'false' is true. So I think my code is\ncorrect and/or we need to fix the escaping.\n\nOn Tue, Jan 20, 2015 at 11:02 AM, Joe Beda notifications@github.com wrote:\n\n> In cluster/saltbase/salt/kube-addons/init.sls\n> https://github.com/GoogleCloudPlatform/kubernetes/pull/3601#discussion-diff-23245950\n> :\n> \n> > @@ -0,0 +1,79 @@\n> > +{% if pillar.get('enable_cluster_monitoring', '').lower() == 'true' %}\n> \n> Exactly -- the explicit quoting makes it a string in yaml. That may be\n> okay, but we should be consistent and eyes open here.\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/GoogleCloudPlatform/kubernetes/pull/3601/files#r23245950\n> .\n",
        "createdAt" : "2015-01-20T19:05:55Z",
        "updatedAt" : "2015-01-21T20:26:01Z",
        "lastEditedBy" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "tags" : [
        ]
      }
    ],
    "commit" : "a305269e1830b0ebc00a83af734712ab3be2cad3",
    "line" : 1,
    "diffHunk" : "@@ -1,1 +-1,3 @@{% if pillar.get('enable_cluster_monitoring', '').lower() == 'true' %}\n/etc/kubernetes/addons/cluster-monitoring:\n  file.recurse:"
  }
]