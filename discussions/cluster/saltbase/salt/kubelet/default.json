[
  {
    "id" : "a2b8713b-529c-476f-9645-098272c528ed",
    "prId" : 53564,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/53564#pullrequestreview-69366117",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "546b514a-3b63-42ef-b07d-380ae166ae8d",
        "parentId" : null,
        "authorId" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "body" : "Have you checked whether any other turn-up scripts rely on `--network-plugin-dir`?",
        "createdAt" : "2017-10-09T17:53:43Z",
        "updatedAt" : "2017-10-18T01:37:57Z",
        "lastEditedBy" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "tags" : [
        ]
      },
      {
        "id" : "40b98ee7-ad50-4e2a-b255-d17953ea8f14",
        "parentId" : "546b514a-3b63-42ef-b07d-380ae166ae8d",
        "authorId" : "3597207f-5523-4681-8f93-90724c483130",
        "body" : "Yeah, I have checked all places.",
        "createdAt" : "2017-10-13T22:37:47Z",
        "updatedAt" : "2017-10-18T01:37:57Z",
        "lastEditedBy" : "3597207f-5523-4681-8f93-90724c483130",
        "tags" : [
        ]
      }
    ],
    "commit" : "0b8897150595b2b5699893fa0032c5bf2beb4953",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +134,138 @@  {% set network_plugin = \"--network-plugin=cni --cni-conf-dir=/etc/cni/net.d/ --cni-bin-dir=/home/kubernetes/bin/\" %}\n{% elif pillar.get('network_provider', '').lower() == 'kubenet' %}\n  {% set network_plugin = \"--network-plugin=kubenet --cni-bin-dir=/home/kubernetes/bin/\" -%}\n{% endif -%}\n"
  },
  {
    "id" : "7b067c76-91b1-4e2d-b226-faf3328e3202",
    "prId" : 40050,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/40050#pullrequestreview-31713903",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ff394b41-c682-4e2a-a63e-4c443483d3ec",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "here be dragons... need an ack from someone familiar with the salt setup on the kubelet (and the implications of changing these for upgrade/downgrade to previous point release)",
        "createdAt" : "2017-04-04T01:55:21Z",
        "updatedAt" : "2017-07-24T18:03:11Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "2ad22c3c-d183-4ef8-b00e-14746e9b321e",
        "parentId" : "ff394b41-c682-4e2a-a63e-4c443483d3ec",
        "authorId" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "body" : "@roberthbailey ",
        "createdAt" : "2017-04-09T02:03:19Z",
        "updatedAt" : "2017-07-24T18:03:11Z",
        "lastEditedBy" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "tags" : [
        ]
      }
    ],
    "commit" : "38aee0464dbcfb2ba22392537ee8f714e991ea1c",
    "line" : 2,
    "diffHunk" : "@@ -1,1 +2,6 @@{% if grains['os_family'] == 'RedHat' -%}\n  {% set daemon_args = \"\" -%}\n{% endif -%}\n\n"
  },
  {
    "id" : "7ab668e9-a1b7-4a25-bf83-e10f841cb42e",
    "prId" : 22293,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8068ddd0-df47-4265-a26c-587f1a5c473c",
        "parentId" : null,
        "authorId" : "395f4f9a-98be-4485-b436-51f0897d7c9f",
        "body" : "is gke included in gce?\n",
        "createdAt" : "2016-03-02T00:51:54Z",
        "updatedAt" : "2016-03-02T00:51:54Z",
        "lastEditedBy" : "395f4f9a-98be-4485-b436-51f0897d7c9f",
        "tags" : [
        ]
      }
    ],
    "commit" : "960bea324ed73d1b07e0df3f9f4c89a6376a43ce",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +166,170 @@\n{% set babysit_daemons = \"\" -%}\n{% if grains['cloud'] is defined and grains.cloud in [ 'aws', 'gce' ]  %}\n  {% set babysit_daemons = \"--babysit-daemons=true\" -%}\n{% endif -%}"
  },
  {
    "id" : "3c1cb69c-053f-4d92-b6b1-5ba2748bfd00",
    "prId" : 22293,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9ee99c88-267c-44a5-a961-b31b2088caf0",
        "parentId" : null,
        "authorId" : "395f4f9a-98be-4485-b436-51f0897d7c9f",
        "body" : "nit: would be better if we allowed everyone else to pass this through as an env var. Now any provider that's not aws/gce is forced to set it to false. This can come in a follow up pr if you want to do that.\n",
        "createdAt" : "2016-03-02T00:53:10Z",
        "updatedAt" : "2016-03-02T00:53:10Z",
        "lastEditedBy" : "395f4f9a-98be-4485-b436-51f0897d7c9f",
        "tags" : [
        ]
      }
    ],
    "commit" : "960bea324ed73d1b07e0df3f9f4c89a6376a43ce",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +165,169 @@{% endif -%}\n\n{% set babysit_daemons = \"\" -%}\n{% if grains['cloud'] is defined and grains.cloud in [ 'aws', 'gce' ]  %}\n  {% set babysit_daemons = \"--babysit-daemons=true\" -%}"
  },
  {
    "id" : "6f27fcfb-6679-4470-8b9c-33096fbc71ce",
    "prId" : 21356,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "aa41145c-c9b4-481f-a6a2-c147c600548b",
        "parentId" : null,
        "authorId" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "body" : "More and more args! ;)\n",
        "createdAt" : "2016-02-17T00:15:15Z",
        "updatedAt" : "2016-02-17T00:15:15Z",
        "lastEditedBy" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "tags" : [
        ]
      },
      {
        "id" : "0345ce9b-7561-4989-911a-d596681d5662",
        "parentId" : "aa41145c-c9b4-481f-a6a2-c147c600548b",
        "authorId" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "body" : "Sadly yes :(\n\nOn Tue, Feb 16, 2016 at 4:16 PM, Yu-Ju Hong notifications@github.com\nwrote:\n\n> In cluster/saltbase/salt/kubelet/default\n> https://github.com/kubernetes/kubernetes/pull/21356#discussion_r53102858\n> :\n> \n> > @@ -173,4 +173,4 @@\n> >  {% endif -%}\n> > \n> >  # test_args has to be kept at the end, so they'll overwrite any prior configuration\n> > -DAEMON_ARGS=\"{{daemon_args}} {{api_servers_with_port}} {{debugging_handlers}} {{hostname_override}} {{cloud_provider}} {{config}} {{manifest_url}} --allow-privileged={{pillar['allow_privileged']}} {{log_level}} {{cluster_dns}} {{cluster_domain}} {{docker_root}} {{kubelet_root}} {{configure_cbr0}} {{non_masquerade_cidr}} {{cgroup_root}} {{system_container}} {{pod_cidr}} {{ master_kubelet_args }} {{cpu_cfs_quota}} {{network_plugin}} {{kubelet_port}} {{experimental_flannel_overlay}} {{ reconcile_cidr_args }} {{ configure_hairpin_mode }} {{enable_custom_metrics}} {{test_args}}\"\n> > +DAEMON_ARGS=\"{{daemon_args}} {{api_servers_with_port}} {{debugging_handlers}} {{hostname_override}} {{cloud_provider}} {{config}} {{manifest_url}} --allow-privileged={{pillar['allow_privileged']}} {{log_level}} {{cluster_dns}} {{cluster_domain}} {{docker_root}} {{kubelet_root}} {{configure_cbr0}} {{non_masquerade_cidr}} {{cgroup_root}} {{system_container}} {{pod_cidr}} {{ master_kubelet_args }} {{cpu_cfs_quota}} {{network_plugin}} {{kubelet_port}} {{experimental_flannel_overlay}} {{ reconcile_cidr_args }} {{ configure_hairpin_mode }} {{enable_custom_metrics}} {{runtime_container}} {{kubelet_container}} {{test_args}}\"\n> \n> More and more args! ;)\n> \n> â€”\n> Reply to this email directly or view it on GitHub\n> https://github.com/kubernetes/kubernetes/pull/21356/files#r53102858.\n",
        "createdAt" : "2016-02-17T00:17:19Z",
        "updatedAt" : "2016-02-17T00:17:19Z",
        "lastEditedBy" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "tags" : [
        ]
      }
    ],
    "commit" : "202578ebe5260005bc2071618d57a5aea00c132c",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +174,178 @@\n# test_args has to be kept at the end, so they'll overwrite any prior configuration\nDAEMON_ARGS=\"{{daemon_args}} {{api_servers_with_port}} {{debugging_handlers}} {{hostname_override}} {{cloud_provider}} {{config}} {{manifest_url}} --allow-privileged={{pillar['allow_privileged']}} {{log_level}} {{cluster_dns}} {{cluster_domain}} {{docker_root}} {{kubelet_root}} {{configure_cbr0}} {{non_masquerade_cidr}} {{cgroup_root}} {{system_container}} {{pod_cidr}} {{ master_kubelet_args }} {{cpu_cfs_quota}} {{network_plugin}} {{kubelet_port}} {{experimental_flannel_overlay}} {{ reconcile_cidr_args }} {{ configure_hairpin_mode }} {{enable_custom_metrics}} {{runtime_container}} {{kubelet_container}} {{test_args}}\""
  },
  {
    "id" : "958b91cc-dc81-44e9-8123-6f56bf05113c",
    "prId" : 21326,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "587286c4-f0ec-4c35-b881-4c661e63a96f",
        "parentId" : null,
        "authorId" : "0970b119-085d-41b4-8f33-e10409965eba",
        "body" : "I think the default should depend on whether kubeproxy is in userspace mode(none) or iptables mode(promiscous)\nIf this is making the salting tougher, its ok to leave it the way you have it.\n",
        "createdAt" : "2016-02-19T00:21:34Z",
        "updatedAt" : "2016-02-19T22:59:30Z",
        "lastEditedBy" : "0970b119-085d-41b4-8f33-e10409965eba",
        "tags" : [
        ]
      },
      {
        "id" : "79bc56a9-956b-4fc4-838e-e6f294f7fac8",
        "parentId" : "587286c4-f0ec-4c35-b881-4c661e63a96f",
        "authorId" : "395f4f9a-98be-4485-b436-51f0897d7c9f",
        "body" : "Yeah we figure out userspace or not within the proxier (we will fallback if iptables version is wrong, and node annotations are another way to pipe kube-proxy config). Till now we've survived by isolating kubelet and kube-proxy, so I'm going to leave it that way for now.\n",
        "createdAt" : "2016-02-19T00:29:06Z",
        "updatedAt" : "2016-02-19T22:59:30Z",
        "lastEditedBy" : "395f4f9a-98be-4485-b436-51f0897d7c9f",
        "tags" : [
        ]
      }
    ],
    "commit" : "a694a7ae4bd19c9db62e8a870ebcbd7c6e065969",
    "line" : 22,
    "diffHunk" : "@@ -1,1 +152,156 @@{% endif -%}\n\n{% set hairpin_mode = \"\" -%}\n{% if pillar['hairpin_mode'] is defined -%}\n  {% set hairpin_mode = \"--hairpin-mode=\" + pillar['hairpin_mode'] -%}"
  },
  {
    "id" : "cfac3f4c-48cc-4978-9558-a8a99eb5f2e4",
    "prId" : 17761,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3799db2f-b544-406b-b3f4-63e17fba4cfe",
        "parentId" : null,
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "Note: this place is different the the original PR - but it is trivial rebase.\n",
        "createdAt" : "2015-11-25T08:56:17Z",
        "updatedAt" : "2015-11-25T08:56:17Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "e6d6a6a2-9a51-4338-be4f-bad1b77d4e51",
        "parentId" : "3799db2f-b544-406b-b3f4-63e17fba4cfe",
        "authorId" : "3c437914-616b-4cfb-88a0-28dc812ff2b2",
        "body" : "plus small fix:) {{test_args}} has to be always last, which wasn't true in the original PR.\n",
        "createdAt" : "2015-11-25T08:58:23Z",
        "updatedAt" : "2015-11-25T08:58:34Z",
        "lastEditedBy" : "3c437914-616b-4cfb-88a0-28dc812ff2b2",
        "tags" : [
        ]
      }
    ],
    "commit" : "9aa0efa393a60a632ae023973fa8611a6cd15d1e",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +123,127 @@\n# test_args has to be kept at the end, so they'll overwrite any prior configuration\nDAEMON_ARGS=\"{{daemon_args}} {{api_servers_with_port}} {{debugging_handlers}} {{hostname_override}} {{cloud_provider}} {{config}} {{manifest_url}} --allow-privileged={{pillar['allow_privileged']}} {{pillar['log_level']}} {{cluster_dns}} {{cluster_domain}} {{docker_root}} {{kubelet_root}} {{configure_cbr0}} {{cgroup_root}} {{system_container}} {{pod_cidr}} {{ master_kubelet_args }} {{cpu_cfs_quota}} {{network_plugin}} {{experimental_flannel_overlay}} {{test_args}}\""
  },
  {
    "id" : "4f84683a-463d-4331-970b-b65007445702",
    "prId" : 15190,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8e372629-3d1e-4e04-b470-1eb5982692bb",
        "parentId" : null,
        "authorId" : "7766e039-aa4c-4476-9091-5cc8763fa8d6",
        "body" : "You also need to default manifest_url_header and include it in the last line of this file (in `DAEMON_ARGS`)\n",
        "createdAt" : "2015-10-07T17:32:45Z",
        "updatedAt" : "2015-10-07T20:27:16Z",
        "lastEditedBy" : "7766e039-aa4c-4476-9091-5cc8763fa8d6",
        "tags" : [
        ]
      },
      {
        "id" : "20d8f6b3-5b0f-4667-b9ee-f4caf84c63b5",
        "parentId" : "8e372629-3d1e-4e04-b470-1eb5982692bb",
        "authorId" : "a6409368-42e0-44a9-bf79-9d3042ac3b65",
        "body" : "Good catch, done!\n",
        "createdAt" : "2015-10-07T20:52:36Z",
        "updatedAt" : "2015-10-07T20:52:36Z",
        "lastEditedBy" : "a6409368-42e0-44a9-bf79-9d3042ac3b65",
        "tags" : [
        ]
      }
    ],
    "commit" : "c29296f9a85c5a5b2e069a5bbbef6555d61e1eb9",
    "line" : 3,
    "diffHunk" : "@@ -1,1 +50,54 @@{% set config = \"--config=/etc/kubernetes/manifests\" -%}\n\n{% set manifest_url = \"\" -%}\n{% set manifest_url_header = \"\" -%}\n{% if pillar.get('enable_manifest_url', '').lower() == 'true' %}"
  },
  {
    "id" : "821585c0-87d4-4da7-a7fe-24ac06b135c7",
    "prId" : 15190,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7e95e55e-f011-46ac-ab95-b2b3798269fb",
        "parentId" : null,
        "authorId" : "7766e039-aa4c-4476-9091-5cc8763fa8d6",
        "body" : "If one of these parameters is unset (e.g. the header isn't needed), will passing something like `[...] --manifest_url=foo --manifest_url_header= [...]` break anything?\n",
        "createdAt" : "2015-10-07T20:56:01Z",
        "updatedAt" : "2015-10-07T20:56:01Z",
        "lastEditedBy" : "7766e039-aa4c-4476-9091-5cc8763fa8d6",
        "tags" : [
        ]
      }
    ],
    "commit" : "c29296f9a85c5a5b2e069a5bbbef6555d61e1eb9",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +53,57 @@{% set manifest_url_header = \"\" -%}\n{% if pillar.get('enable_manifest_url', '').lower() == 'true' %}\n  {% set manifest_url = \"--manifest-url=\" + pillar['manifest_url'] + \" --manifest-url-header=\" + pillar['manifest_url_header'] -%}\n{% endif -%}\n"
  },
  {
    "id" : "c0941aa3-2b2f-419a-a2bb-02b597eb2c1d",
    "prId" : 11963,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "502edd67-31dd-4a28-8f2b-1eb7bbd527d0",
        "parentId" : null,
        "authorId" : "c2b5c827-efcd-438f-8db5-52d917b1cde9",
        "body" : "Is there a reason to only do this on the master? We will (hopefully soon) treat the master node on GCE just like any other node, so we should look at reducing the number of special cases we apply to the master. \n",
        "createdAt" : "2015-07-29T03:04:48Z",
        "updatedAt" : "2015-07-30T21:04:47Z",
        "lastEditedBy" : "c2b5c827-efcd-438f-8db5-52d917b1cde9",
        "tags" : [
        ]
      },
      {
        "id" : "7d9d587e-c9fb-4273-ac9f-92f8b1bd6679",
        "parentId" : "502edd67-31dd-4a28-8f2b-1eb7bbd527d0",
        "authorId" : "7766e039-aa4c-4476-9091-5cc8763fa8d6",
        "body" : "Well, the daemon controller will handle the node case in the very near future, and adding it to the nodes adds another edge-feature that isn't worth properly supporting given that there's not much use for it once the daemon controller exists.\n\nThat said, reducing special cases is a reasonable goal, so I'm happy to go that way if you'd prefer.\n",
        "createdAt" : "2015-07-29T06:49:12Z",
        "updatedAt" : "2015-07-30T21:04:47Z",
        "lastEditedBy" : "7766e039-aa4c-4476-9091-5cc8763fa8d6",
        "tags" : [
        ]
      },
      {
        "id" : "7cc03eeb-594f-4d2d-90f7-e19a48cfd9b6",
        "parentId" : "502edd67-31dd-4a28-8f2b-1eb7bbd527d0",
        "authorId" : "c2b5c827-efcd-438f-8db5-52d917b1cde9",
        "body" : "I don't think there's much reason to do it on the nodes, just wanted to think about what it would entail. \n",
        "createdAt" : "2015-07-29T07:00:35Z",
        "updatedAt" : "2015-07-30T21:04:47Z",
        "lastEditedBy" : "c2b5c827-efcd-438f-8db5-52d917b1cde9",
        "tags" : [
        ]
      }
    ],
    "commit" : "94ae0a9a0d92beca44b6c4b7d162235833ab246f",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +44,48 @@\n{% set manifest_url = \"\" -%}\n{% if grains['roles'][0] == 'kubernetes-master' and grains.cloud in ['gce'] -%}\n  {% set manifest_url = \"--manifest-url=http://metadata.google.internal/computeMetadata/v1/instance/attributes/google-container-manifest --manifest-url-header=Metadata-Flavor:Google\" -%}\n{% endif -%}"
  },
  {
    "id" : "6983b6c4-a870-44c9-8cd1-5362dc244e41",
    "prId" : 11308,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4d75f684-dfd8-46b8-9201-89b104d6fee9",
        "parentId" : null,
        "authorId" : "6eca0ade-9879-4dd7-ad14-547e16f5c041",
        "body" : "Same for here.\n",
        "createdAt" : "2015-08-05T21:00:07Z",
        "updatedAt" : "2015-08-05T21:00:07Z",
        "lastEditedBy" : "6eca0ade-9879-4dd7-ad14-547e16f5c041",
        "tags" : [
        ]
      }
    ],
    "commit" : "5bb7eec5abc1be17488eb9700e21777ebb8d35f6",
    "line" : 12,
    "diffHunk" : "@@ -1,1 +99,103 @@\n# test_args has to be kept at the end, so they'll overwrite any prior configuration\nDAEMON_ARGS=\"$DAEMON_ARGS + {{test_args}}\""
  },
  {
    "id" : "b7b16db0-2578-4a25-a732-0ef0cd7f287b",
    "prId" : 6949,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6a1e4c49-0877-44d9-ba62-3cc1e6c974c4",
        "parentId" : null,
        "authorId" : "7be32503-562e-4caa-838d-bba025e626b5",
        "body" : "Eventually we do want to register the master kubelet. Registration just needs to be retried if the apiserver doesn't respond. And, for now, we want scheduling to be disabled for the master node. #6428\ncc @dchen1107 @vishh \n",
        "createdAt" : "2015-04-18T00:12:26Z",
        "updatedAt" : "2015-05-19T16:55:22Z",
        "lastEditedBy" : "7be32503-562e-4caa-838d-bba025e626b5",
        "tags" : [
        ]
      },
      {
        "id" : "f5a959b3-7d11-4f96-a7f0-58e5f3b0d156",
        "parentId" : "6a1e4c49-0877-44d9-ba62-3cc1e6c974c4",
        "authorId" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "body" : "Why disable registration of the master kubelet? The API server reports the master pods but the usual APIs used to access the pods, like '/containerLogs', '/exec', etc, are not working as of now.\n",
        "createdAt" : "2015-04-18T01:09:44Z",
        "updatedAt" : "2015-05-19T16:55:22Z",
        "lastEditedBy" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "tags" : [
        ]
      },
      {
        "id" : "ec0fa95d-78d2-4e19-9bd8-49faa654fb5f",
        "parentId" : "6a1e4c49-0877-44d9-ba62-3cc1e6c974c4",
        "authorId" : "c2b5c827-efcd-438f-8db5-52d917b1cde9",
        "body" : "It keeps things consistent with the current deployment. I'd be happy to change this in a future PR to be configurable, but didn't want too many moving pieces here. For one, we'd need to change cluster validation to expect N+1 nodes (rather than N) since the master is now counted. And I didn't want to worry about other ramifications at the same time as changing the node creation pattern. \n",
        "createdAt" : "2015-04-18T01:19:12Z",
        "updatedAt" : "2015-05-19T16:55:22Z",
        "lastEditedBy" : "c2b5c827-efcd-438f-8db5-52d917b1cde9",
        "tags" : [
        ]
      },
      {
        "id" : "9139c1d9-ceb8-42fb-b050-339db207749b",
        "parentId" : "6a1e4c49-0877-44d9-ba62-3cc1e6c974c4",
        "authorId" : "5800b14e-4db1-4842-900e-277aad844a24",
        "body" : "Robert, fyi I tested your kubelet mod in my GCE environment this weekend.\nWorked perfectly! I deploy nodes with cloud configs derived from Paulo's\nand the nodes show up with proper names that I can then use to create\nservices with an external load balancer.\n\nVery nice, Thanks ... WkH\n\nOn Fri, Apr 17, 2015 at 8:19 PM, Robert Bailey notifications@github.com\nwrote:\n\n> In cluster/saltbase/salt/kubelet/default\n> https://github.com/GoogleCloudPlatform/kubernetes/pull/6949#discussion_r28639946\n> :\n> \n> > @@ -15,6 +15,15 @@\n> >    {% set api_servers = \"--api_servers=https://\" + ips[0][0] + \":6443\" -%}\n> >  {% endif -%}\n> > \n> > +# Disable registration for the kubelet running on the master on GCE.\n> \n> It keeps things consistent with the current deployment. I'd be happy to\n> change this in a future PR to be configurable, but didn't want too many\n> moving pieces here. For one, we'd need to change cluster validation to\n> expect N+1 nodes (rather than N) since the master is now counted. And I\n> didn't want to worry about other ramifications at the same time as changing\n> the node creation pattern.\n> \n> â€”\n> Reply to this email directly or view it on GitHub\n> https://github.com/GoogleCloudPlatform/kubernetes/pull/6949/files#r28639946\n> .\n\n## \n\n... WkH\n",
        "createdAt" : "2015-04-19T22:56:40Z",
        "updatedAt" : "2015-05-19T16:55:22Z",
        "lastEditedBy" : "5800b14e-4db1-4842-900e-277aad844a24",
        "tags" : [
        ]
      },
      {
        "id" : "8364836e-faf9-444a-b892-bfe761c4c657",
        "parentId" : "6a1e4c49-0877-44d9-ba62-3cc1e6c974c4",
        "authorId" : "0ac5d6cd-da87-46a2-9b30-0d21db1063a2",
        "body" : "This is so awesome Ward! Can't wait to see this merged.\nOn Apr 19, 2015 6:57 PM, \"wkharold\" notifications@github.com wrote:\n\n> In cluster/saltbase/salt/kubelet/default\n> https://github.com/GoogleCloudPlatform/kubernetes/pull/6949#discussion_r28657993\n> :\n> \n> > @@ -15,6 +15,15 @@\n> >    {% set api_servers = \"--api_servers=https://\" + ips[0][0] + \":6443\" -%}\n> >  {% endif -%}\n> > \n> > +# Disable registration for the kubelet running on the master on GCE.\n> \n> Robert, fyi I tested your kubelet mod in my GCE environment this weekend.\n> Worked perfectly! I deploy nodes with cloud configs derived from Paulo's\n> and the nodes show up with proper names that I can then use to create\n> services with an external load balancer. Very nice, Thanks ... WkH\n> â€¦ <#14cd3e667ba8e637_>\n> On Fri, Apr 17, 2015 at 8:19 PM, Robert Bailey notifications@github.com\n> wrote: In cluster/saltbase/salt/kubelet/default <\n> https://github.com/GoogleCloudPlatform/kubernetes/pull/6949#discussion_r28639946>\n> : > @@ -15,6 +15,15 @@ > {% set api_servers = \"--api_servers=https://\" +\n> ips[0][0] + \":6443\" -%} > {% endif -%} > > +# Disable registration for the\n> kubelet running on the master on GCE. It keeps things consistent with the\n> current deployment. I'd be happy to change this in a future PR to be\n> configurable, but didn't want too many moving pieces here. For one, we'd\n> need to change cluster validation to expect N+1 nodes (rather than N) since\n> the master is now counted. And I didn't want to worry about other\n> ramifications at the same time as changing the node creation pattern. â€”\n> Reply to this email directly or view it on GitHub <\n> https://github.com/GoogleCloudPlatform/kubernetes/pull/6949/files#r28639946>\n> .\n>  -- ... WkH\n> \n> â€”\n> Reply to this email directly or view it on GitHub\n> https://github.com/GoogleCloudPlatform/kubernetes/pull/6949/files#r28657993\n> .\n",
        "createdAt" : "2015-04-19T23:34:40Z",
        "updatedAt" : "2015-05-19T16:55:22Z",
        "lastEditedBy" : "0ac5d6cd-da87-46a2-9b30-0d21db1063a2",
        "tags" : [
        ]
      },
      {
        "id" : "71c1f5b4-06eb-4c4f-94c0-f52d8135294b",
        "parentId" : "6a1e4c49-0877-44d9-ba62-3cc1e6c974c4",
        "authorId" : "020e031c-c298-4e7e-a533-9a04439c203c",
        "body" : "Fine with you doing the master registration in a future PR, as long as it gets done at some point (with appropriate adjustments for GKE)\n",
        "createdAt" : "2015-04-22T16:04:50Z",
        "updatedAt" : "2015-05-19T16:55:22Z",
        "lastEditedBy" : "020e031c-c298-4e7e-a533-9a04439c203c",
        "tags" : [
        ]
      }
    ],
    "commit" : "8e356f84396642ecd5529ac5f4eb57e936e38922",
    "line" : null,
    "diffHunk" : "@@ -1,1 +23,27 @@{% endif -%}\n\n# Disable registration for the kubelet running on the master on GCE.\n# TODO(roberthbailey): Make this configurable via an env var in config-default.sh\n{% if grains.cloud == 'gce' -%}"
  }
]