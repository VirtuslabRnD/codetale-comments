[
  {
    "id" : "aa32acdd-8b8f-45ec-b74f-fe35980a7e8d",
    "prId" : 22367,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ca433bf2-48fb-4d0e-90e1-7488cbd8af3b",
        "parentId" : null,
        "authorId" : "6cc3c868-173f-40ea-8728-da5974495fb9",
        "body" : "Have you observed this level of memory usage?\n",
        "createdAt" : "2016-03-02T17:33:28Z",
        "updatedAt" : "2016-03-05T00:16:47Z",
        "lastEditedBy" : "6cc3c868-173f-40ea-8728-da5974495fb9",
        "tags" : [
        ]
      },
      {
        "id" : "b39ba0ac-5fec-4a3e-8d7c-d8c8f0a296c9",
        "parentId" : "ca433bf2-48fb-4d0e-90e1-7488cbd8af3b",
        "authorId" : "7766e039-aa4c-4476-9091-5cc8763fa8d6",
        "body" : "Yeah, fluentd-gcp has been running with 200Mi since last July, and Dawn just missed this file when she added the limit there.\n\nOur buffer_chunk_limit and buffer_queue_limit settings in the fluentd config keep it from going over this.\n",
        "createdAt" : "2016-03-02T18:00:27Z",
        "updatedAt" : "2016-03-05T00:16:47Z",
        "lastEditedBy" : "7766e039-aa4c-4476-9091-5cc8763fa8d6",
        "tags" : [
        ]
      },
      {
        "id" : "8601dd97-e380-47a7-85f9-2e280bffd2f4",
        "parentId" : "ca433bf2-48fb-4d0e-90e1-7488cbd8af3b",
        "authorId" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "body" : "Should we change the memory limit based on the machine size like we do for heapster?\n",
        "createdAt" : "2016-03-02T18:18:46Z",
        "updatedAt" : "2016-03-05T00:16:47Z",
        "lastEditedBy" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "tags" : [
        ]
      },
      {
        "id" : "0b37282e-7e1c-48f8-981b-335fdf491d6c",
        "parentId" : "ca433bf2-48fb-4d0e-90e1-7488cbd8af3b",
        "authorId" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "body" : "Do we have any data on OOM kills of fluentd?\n",
        "createdAt" : "2016-03-02T18:19:55Z",
        "updatedAt" : "2016-03-05T00:16:47Z",
        "lastEditedBy" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "tags" : [
        ]
      },
      {
        "id" : "c82b49f9-ff58-4a74-8767-a9da93f8f39b",
        "parentId" : "ca433bf2-48fb-4d0e-90e1-7488cbd8af3b",
        "authorId" : "7766e039-aa4c-4476-9091-5cc8763fa8d6",
        "body" : "1. The memory limit wouldn't actually need to scale with machine size. The more important bit is how many logs the agent can churn through per second, so we'd want to scale CPU to avoid a backlog of unprocessed logs building up. I think that'd be great. Do we have info on how much CPU a node has in salt while the node is starting up? It's a little different from heapster where we want to scale with number of nodes, whereas here we'd want to scale with number of cores on the node.\n2. Not yet, only what we hear from customers. But OOMs should be next to impossible given our buffer settings. The concern that we have heard about is fluentd falling behind and dropping some logs from its buffer on nodes with a bunch of pods that log heavily.\n",
        "createdAt" : "2016-03-02T18:31:31Z",
        "updatedAt" : "2016-03-05T00:16:47Z",
        "lastEditedBy" : "7766e039-aa4c-4476-9091-5cc8763fa8d6",
        "tags" : [
        ]
      }
    ],
    "commit" : "4e729c6c7ce1d88e8ad8e23732bd1ee6d3f23ccb",
    "line" : null,
    "diffHunk" : "@@ -1,1 +15,19 @@      requests:\n        cpu: 100m\n        memory: 200Mi\n    volumeMounts:\n    - name: varlog"
  },
  {
    "id" : "a2b7fd93-8e2e-418f-b437-ccba0c80ecec",
    "prId" : 22367,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9dfc07c7-af2f-448d-b335-4e6f4f8d2e83",
        "parentId" : null,
        "authorId" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "body" : "We still need to set cpu request. Otherwise it won't get any CPU under load.\n",
        "createdAt" : "2016-03-04T17:15:57Z",
        "updatedAt" : "2016-03-05T00:16:47Z",
        "lastEditedBy" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "tags" : [
        ]
      },
      {
        "id" : "e5dd8ee9-af7a-404f-9e79-e7cdafaab269",
        "parentId" : "9dfc07c7-af2f-448d-b335-4e6f4f8d2e83",
        "authorId" : "7766e039-aa4c-4476-9091-5cc8763fa8d6",
        "body" : "Done\n",
        "createdAt" : "2016-03-04T17:18:11Z",
        "updatedAt" : "2016-03-05T00:16:47Z",
        "lastEditedBy" : "7766e039-aa4c-4476-9091-5cc8763fa8d6",
        "tags" : [
        ]
      }
    ],
    "commit" : "4e729c6c7ce1d88e8ad8e23732bd1ee6d3f23ccb",
    "line" : null,
    "diffHunk" : "@@ -1,1 +15,19 @@      requests:\n        cpu: 100m\n        memory: 200Mi\n    volumeMounts:\n    - name: varlog"
  },
  {
    "id" : "b0b01d0c-e82d-4938-a48c-72107b5b9f32",
    "prId" : 8632,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "abd3241d-88a8-4529-bb7a-52766c5a0b1c",
        "parentId" : null,
        "authorId" : "9d07de69-76c2-43bd-9590-55d9aded200d",
        "body" : "Please revert to `/varlog`\n",
        "createdAt" : "2015-05-21T22:01:08Z",
        "updatedAt" : "2015-09-02T09:33:20Z",
        "lastEditedBy" : "9d07de69-76c2-43bd-9590-55d9aded200d",
        "tags" : [
        ]
      },
      {
        "id" : "730ad2d5-dc04-4471-8bc3-e09ebf3f219a",
        "parentId" : "abd3241d-88a8-4529-bb7a-52766c5a0b1c",
        "authorId" : "9d07de69-76c2-43bd-9590-55d9aded200d",
        "body" : "So should this not be changed to `/varlog` ?\nYou could rename `varlog` to something less confusing.\n",
        "createdAt" : "2015-08-19T23:17:50Z",
        "updatedAt" : "2015-09-02T09:33:20Z",
        "lastEditedBy" : "9d07de69-76c2-43bd-9590-55d9aded200d",
        "tags" : [
        ]
      },
      {
        "id" : "f79a3dd1-4ca6-4ecc-8d00-befea09ffdc1",
        "parentId" : "abd3241d-88a8-4529-bb7a-52766c5a0b1c",
        "authorId" : "7766e039-aa4c-4476-9091-5cc8763fa8d6",
        "body" : "I realize that this should work, but at the same time it seems risky to shadow a mounted volume over a directory that exists in the container image and is used by default by so many different processes. Are there any best practices around this?\n\nIt certainly feels safer to put it somewhere else, something like /mnt/var/log, but I can live with this is you've done this sort of thing with containers before.\n",
        "createdAt" : "2015-08-28T22:28:36Z",
        "updatedAt" : "2015-09-02T09:33:20Z",
        "lastEditedBy" : "7766e039-aa4c-4476-9091-5cc8763fa8d6",
        "tags" : [
        ]
      },
      {
        "id" : "29e58a36-e8f1-483f-a66f-81810c075edb",
        "parentId" : "abd3241d-88a8-4529-bb7a-52766c5a0b1c",
        "authorId" : "6cc3c868-173f-40ea-8728-da5974495fb9",
        "body" : "It's fairly standard practice to shadow unused directories in the container with the corresponding host dirs, lots of examples all over the place. It feels more natural to run a containerized process as similar to running it straight on the host as possible, but it's no biggie to change if need be.\n",
        "createdAt" : "2015-08-28T22:34:51Z",
        "updatedAt" : "2015-09-02T09:33:20Z",
        "lastEditedBy" : "6cc3c868-173f-40ea-8728-da5974495fb9",
        "tags" : [
        ]
      }
    ],
    "commit" : "e07da97447e86d5a3f5fcb802b062c098421cb4f",
    "line" : 18,
    "diffHunk" : "@@ -1,1 +15,19 @@    volumeMounts:\n    - name: varlog\n      mountPath: /var/log\n    - name: varlibdockercontainers\n      mountPath: /var/lib/docker/containers"
  },
  {
    "id" : "e5cf3447-21ed-4927-8399-a5ad643941e4",
    "prId" : 8120,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7b0e9263-a11e-4477-b451-3b76dcea680e",
        "parentId" : null,
        "authorId" : "c2b5c827-efcd-438f-8db5-52d917b1cde9",
        "body" : "Did you mean to add the extra space here?\n",
        "createdAt" : "2015-05-12T17:44:01Z",
        "updatedAt" : "2015-05-12T17:44:01Z",
        "lastEditedBy" : "c2b5c827-efcd-438f-8db5-52d917b1cde9",
        "tags" : [
        ]
      },
      {
        "id" : "53b5592b-2c99-49d5-96d6-d8d561ffc29e",
        "parentId" : "7b0e9263-a11e-4477-b451-3b76dcea680e",
        "authorId" : "9d07de69-76c2-43bd-9590-55d9aded200d",
        "body" : "Yes, I think I had it wrong before.\n",
        "createdAt" : "2015-05-12T19:11:15Z",
        "updatedAt" : "2015-05-12T19:11:15Z",
        "lastEditedBy" : "9d07de69-76c2-43bd-9590-55d9aded200d",
        "tags" : [
        ]
      },
      {
        "id" : "d1461b5f-5b9f-45da-a940-795c9a7e3a7b",
        "parentId" : "7b0e9263-a11e-4477-b451-3b76dcea680e",
        "authorId" : "7766e039-aa4c-4476-9091-5cc8763fa8d6",
        "body" : "Yeah, it looks like it was wrong before.\n",
        "createdAt" : "2015-05-12T21:26:25Z",
        "updatedAt" : "2015-05-12T21:26:25Z",
        "lastEditedBy" : "7766e039-aa4c-4476-9091-5cc8763fa8d6",
        "tags" : [
        ]
      }
    ],
    "commit" : "f9af0658fa84f8669af8678b80dfa5a0cd2cabf4",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +27,31 @@  - name: token-system-logging\n    secret:\n      secretName: token-system-logging"
  }
]