[
  {
    "id" : "5ac371c8-a241-4a58-983c-df422f5953df",
    "prId" : 100635,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/100635#pullrequestreview-624766930",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c1da03a6-11ae-49ae-92ae-46f809ba9bda",
        "parentId" : null,
        "authorId" : "30343065-ff78-4ac2-8aa1-fe001a3627c6",
        "body" : "Online 39 we should be referring to the etcd binary with the version number. Because you are setting DO_NO_MOVE_BINARIES.",
        "createdAt" : "2021-03-30T19:41:38Z",
        "updatedAt" : "2021-04-08T20:52:17Z",
        "lastEditedBy" : "30343065-ff78-4ac2-8aa1-fe001a3627c6",
        "tags" : [
        ]
      },
      {
        "id" : "79c3a3d9-d873-4b0f-a3c5-55e952a29169",
        "parentId" : "c1da03a6-11ae-49ae-92ae-46f809ba9bda",
        "authorId" : "bea5ca71-4f2e-4e39-98d0-5c75d72dadb3",
        "body" : "fixed",
        "createdAt" : "2021-03-30T22:55:12Z",
        "updatedAt" : "2021-04-08T20:52:17Z",
        "lastEditedBy" : "bea5ca71-4f2e-4e39-98d0-5c75d72dadb3",
        "tags" : [
        ]
      }
    ],
    "commit" : "9f058079d25eb936f0da256b76964c65f3b0de39",
    "line" : 16,
    "diffHunk" : "@@ -1,1 +23,27 @@    \"image\": \"{{ pillar.get('etcd_docker_repository', 'k8s.gcr.io/etcd') }}:{{ pillar.get('etcd_docker_tag', '3.4.13-0') }}\",\n    \"resources\": {\n      \"requests\": {\n        \"cpu\": {{ cpulimit }}\n      }"
  },
  {
    "id" : "cb5bdd9c-47f6-474a-9faa-d7a5b7650e2b",
    "prId" : 97034,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/97034#pullrequestreview-543961314",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "742bb66a-81a3-43a2-b949-8956a40a1fc5",
        "parentId" : null,
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "it relies on the fact that etcdctl is installed in the container. It's true, but maybe requires a comment?",
        "createdAt" : "2020-12-03T13:28:24Z",
        "updatedAt" : "2020-12-11T11:43:21Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "45db584a-97bd-4665-ab28-5b42f2ddc288",
        "parentId" : "742bb66a-81a3-43a2-b949-8956a40a1fc5",
        "authorId" : "5af3a49e-2ce9-4046-8a13-ee66b8cbca2e",
        "body" : "I added comment to Dockerfile",
        "createdAt" : "2020-12-03T13:40:07Z",
        "updatedAt" : "2020-12-11T11:43:21Z",
        "lastEditedBy" : "5af3a49e-2ce9-4046-8a13-ee66b8cbca2e",
        "tags" : [
        ]
      }
    ],
    "commit" : "7f09d592154efc9ed608d8d460ce5d0a20f1f7fe",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +63,67 @@    \"livenessProbe\": {\n      \"exec\": {\n        \"command\": [\n          \"/bin/sh\",\n          \"-c\","
  },
  {
    "id" : "aafbf510-6937-44c6-a74a-1d75f3ce3049",
    "prId" : 97034,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/97034#pullrequestreview-544020632",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "279376cf-98ce-46b5-9f4c-cdc7c9cff429",
        "parentId" : null,
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "5*30s is pretty long. I think either period&timeout  or theshold should be lower...",
        "createdAt" : "2020-12-03T13:29:01Z",
        "updatedAt" : "2020-12-11T11:43:21Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "c9d73bcd-2e34-41e2-ae58-ef73b08ff1fa",
        "parentId" : "279376cf-98ce-46b5-9f4c-cdc7c9cff429",
        "authorId" : "5af3a49e-2ce9-4046-8a13-ee66b8cbca2e",
        "body" : "Let's find a correct timeout first, then we will adjust the threshold or period.",
        "createdAt" : "2020-12-03T13:39:19Z",
        "updatedAt" : "2020-12-11T11:43:21Z",
        "lastEditedBy" : "5af3a49e-2ce9-4046-8a13-ee66b8cbca2e",
        "tags" : [
        ]
      },
      {
        "id" : "846e5e25-648f-46c4-84ff-5bb36395cf88",
        "parentId" : "279376cf-98ce-46b5-9f4c-cdc7c9cff429",
        "authorId" : "5af3a49e-2ce9-4046-8a13-ee66b8cbca2e",
        "body" : "I will reduce period to 15 to match timeout and will keep threshold set to 5 which should translate to 75 seconds. Is it OK to you?",
        "createdAt" : "2020-12-03T14:40:41Z",
        "updatedAt" : "2020-12-11T11:43:21Z",
        "lastEditedBy" : "5af3a49e-2ce9-4046-8a13-ee66b8cbca2e",
        "tags" : [
        ]
      }
    ],
    "commit" : "7f09d592154efc9ed608d8d460ce5d0a20f1f7fe",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +72,76 @@      \"timeoutSeconds\": 15,\n      \"periodSeconds\": 5,\n      \"failureThreshold\": 5\n    },\n    \"ports\": ["
  },
  {
    "id" : "7ca59724-9fbf-4acd-818b-7fa08b36b894",
    "prId" : 92349,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/92349#pullrequestreview-447497105",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2e933b61-d8c7-4e4a-b5ec-1ea3e745d2f8",
        "parentId" : null,
        "authorId" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "body" : "this needs to switch back to the old prod registry?",
        "createdAt" : "2020-07-09T20:26:13Z",
        "updatedAt" : "2020-07-09T20:26:13Z",
        "lastEditedBy" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "tags" : [
        ]
      },
      {
        "id" : "595cf034-69c8-4bc9-b0ca-77973c43d671",
        "parentId" : "2e933b61-d8c7-4e4a-b5ec-1ea3e745d2f8",
        "authorId" : "24ab4292-a16f-4d8f-b5cb-bf0e1ea4f6ff",
        "body" : "Thanks. But both new and the old prod registry have image for this version.",
        "createdAt" : "2020-07-13T18:28:22Z",
        "updatedAt" : "2020-07-13T18:28:22Z",
        "lastEditedBy" : "24ab4292-a16f-4d8f-b5cb-bf0e1ea4f6ff",
        "tags" : [
        ]
      }
    ],
    "commit" : "e9bf1c3c901ccd708ad6b3ded48b64a35619c830",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +16,20 @@    {\n    \"name\": \"etcd-container\",\n    \"image\": \"{{ pillar.get('etcd_docker_repository', 'us.gcr.io/k8s-artifacts-prod/etcd') }}:{{ pillar.get('etcd_docker_tag', '3.4.9-1') }}\",\n    \"resources\": {\n      \"requests\": {"
  },
  {
    "id" : "4a293404-74fc-4850-aece-feaed8d4fa94",
    "prId" : 91964,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/91964#pullrequestreview-428513345",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a368d6ba-c78e-47aa-9c81-408178135646",
        "parentId" : null,
        "authorId" : "f474bb7f-c91e-4c7f-8215-aa1a0f8eb05a",
        "body" : "Added ETCD_HOSTNAME to be used in migrate-if-needed.sh",
        "createdAt" : "2020-06-11T00:23:13Z",
        "updatedAt" : "2020-06-18T18:11:31Z",
        "lastEditedBy" : "f474bb7f-c91e-4c7f-8215-aa1a0f8eb05a",
        "tags" : [
        ]
      }
    ],
    "commit" : "0da9c3e3793a53610372e5dc6cca2786865f271c",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +56,60 @@      },\n      { \"name\": \"ETCD_HOSTNAME\",\n        \"value\": \"{{ hostname }}\"\n      }\n        ],"
  },
  {
    "id" : "b732d06d-35f1-4683-92bf-49254dea57f0",
    "prId" : 61198,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/61198#pullrequestreview-103985071",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c950737e-c404-4d07-a62f-0fd2c8237eb6",
        "parentId" : null,
        "authorId" : "f81960f6-a033-4403-bebf-c8ebb484e444",
        "body" : "You didn't set this default on the kubeadm change.  ",
        "createdAt" : "2018-03-14T20:03:17Z",
        "updatedAt" : "2018-04-12T04:13:13Z",
        "lastEditedBy" : "f81960f6-a033-4403-bebf-c8ebb484e444",
        "tags" : [
        ]
      },
      {
        "id" : "63679947-abbe-48fc-811e-67859149dad5",
        "parentId" : "c950737e-c404-4d07-a62f-0fd2c8237eb6",
        "authorId" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "body" : "Added to `cmd/kubeadm/app/phases/etcd/local.go`",
        "createdAt" : "2018-03-14T20:25:01Z",
        "updatedAt" : "2018-04-12T04:13:13Z",
        "lastEditedBy" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "tags" : [
        ]
      }
    ],
    "commit" : "a795cb61bcb462313694c9846d467276bc033d0f",
    "line" : 24,
    "diffHunk" : "@@ -1,1 +48,52 @@      },\n      { \"name\": \"ETCD_SNAPSHOT_COUNT\",\n        \"value\": \"10000\"\n      }\n        ],"
  },
  {
    "id" : "7b5d125f-892f-484a-826b-9e7c98869b23",
    "prId" : 60808,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/60808#pullrequestreview-101668279",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a0b24420-6f98-4f99-be2a-9b3d8f6ee287",
        "parentId" : null,
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "IIUC ETCD_CREDs is the set of full flags, e.g. \"--flag1=val1 --flag2=val2\", right?\r\n\r\n",
        "createdAt" : "2018-03-06T09:00:13Z",
        "updatedAt" : "2018-03-06T09:00:39Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "0cb747a0-b844-42a2-9b41-2888559100ed",
        "parentId" : "a0b24420-6f98-4f99-be2a-9b3d8f6ee287",
        "authorId" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "body" : "Correct, and in `etcd.manifest` it is passed in after all explicitly defined flags:\r\n\r\n```\r\nif [ -e /usr/local/bin/migrate-if-needed.sh ]; then /usr/local/bin/migrate-if-needed.sh 1>>/var/log/etcd{{ suffix }}.log 2>&1; fi; exec /usr/local/bin/etcd --name etcd-{{ hostname }} ... --initial-cluster {{ etcd_cluster }} {{ etcd_creds }}\r\n```",
        "createdAt" : "2018-03-06T18:46:33Z",
        "updatedAt" : "2018-03-06T18:46:34Z",
        "lastEditedBy" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "tags" : [
        ]
      }
    ],
    "commit" : "279ce92e59142e83da52f16a4dd8f71fcacedac9",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +38,42 @@        \"value\": \"{{ etcd_cluster }}\"\n      },\n      { \"name\": \"ETCD_CREDS\",\n        \"value\": \"{{ etcd_creds }}\"\n      }"
  },
  {
    "id" : "92b82d1d-574e-412c-839d-d9ba8afc1c6a",
    "prId" : 60808,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/60808#pullrequestreview-101820464",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7f70d51e-0573-4b84-a427-52783d6b3d3e",
        "parentId" : null,
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "{{ etcd_creds }} isn't filled anywhere.\r\n\r\nYou need changes to configure-helper.",
        "createdAt" : "2018-03-06T09:00:36Z",
        "updatedAt" : "2018-03-06T09:00:39Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "e7ba5d2d-e8e6-4b41-977c-bf578e242858",
        "parentId" : "7f70d51e-0573-4b84-a427-52783d6b3d3e",
        "authorId" : "5af3a49e-2ce9-4046-8a13-ee66b8cbca2e",
        "body" : "It is used in \"command\", so I think it must be somehow populated:\r\n\r\nhttps://github.com/kubernetes/kubernetes/blob/master/cluster/gce/gci/configure-helper.sh#L1261\r\nhttps://github.com/kubernetes/kubernetes/blob/master/cluster/gce/gci/configure-helper.sh#L1310",
        "createdAt" : "2018-03-06T09:06:31Z",
        "updatedAt" : "2018-03-06T09:06:31Z",
        "lastEditedBy" : "5af3a49e-2ce9-4046-8a13-ee66b8cbca2e",
        "tags" : [
        ]
      },
      {
        "id" : "5fab0280-9fc8-48fa-9a66-ca14a20b410f",
        "parentId" : "7f70d51e-0573-4b84-a427-52783d6b3d3e",
        "authorId" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "body" : "Yes, `{{ etcd_creds }}` is a pre-existing template variable that is already used the `command` field of `etcd.manifest`, all we're doing here is passing it in as an environment variable as well so it can be used by the migrate script.",
        "createdAt" : "2018-03-06T18:46:31Z",
        "updatedAt" : "2018-03-06T18:46:31Z",
        "lastEditedBy" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "tags" : [
        ]
      },
      {
        "id" : "a97f752e-41bc-4545-bb03-47b0ed8cee85",
        "parentId" : "7f70d51e-0573-4b84-a427-52783d6b3d3e",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "OK sorry, I missed that.",
        "createdAt" : "2018-03-07T06:37:10Z",
        "updatedAt" : "2018-03-07T06:37:11Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "279ce92e59142e83da52f16a4dd8f71fcacedac9",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +39,43 @@      },\n      { \"name\": \"ETCD_CREDS\",\n        \"value\": \"{{ etcd_creds }}\"\n      }\n        ],"
  },
  {
    "id" : "68db068a-af5d-4056-950f-5df0d062e53a",
    "prId" : 58645,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/58645#pullrequestreview-97227162",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "30ecf571-8339-4aa3-ba91-75a0361d7e89",
        "parentId" : null,
        "authorId" : "7aca96c2-45d7-4567-99be-0323d7556c55",
        "body" : "Should advertise-client-urls really be to localhost?",
        "createdAt" : "2018-01-25T22:14:22Z",
        "updatedAt" : "2018-02-03T01:25:29Z",
        "lastEditedBy" : "7aca96c2-45d7-4567-99be-0323d7556c55",
        "tags" : [
        ]
      },
      {
        "id" : "55ed6431-ef5b-4b44-a76e-b2a8a89f90e4",
        "parentId" : "30ecf571-8339-4aa3-ba91-75a0361d7e89",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "Yes - we don't want to expose it anywhere else.",
        "createdAt" : "2018-01-26T16:45:44Z",
        "updatedAt" : "2018-02-03T01:25:29Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "633860df-feb3-4f94-ad45-bcb1df387da8",
        "parentId" : "30ecf571-8339-4aa3-ba91-75a0361d7e89",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "Ohh, actually that's not fully true.\r\nIt's true for the client URL.\r\n\r\nBut I think that doing that for peer-urls will actually break e.g. GKE",
        "createdAt" : "2018-01-26T16:47:00Z",
        "updatedAt" : "2018-02-03T01:25:29Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "61c2fe4d-93f0-4141-9950-996833ed7249",
        "parentId" : "30ecf571-8339-4aa3-ba91-75a0361d7e89",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "@jpbetz - feel free to reach my offline to discuss this, but that will break things",
        "createdAt" : "2018-01-26T16:48:09Z",
        "updatedAt" : "2018-02-03T01:25:29Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "fbd890d6-b79f-4c23-9e3f-1c22ecff86e8",
        "parentId" : "30ecf571-8339-4aa3-ba91-75a0361d7e89",
        "authorId" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "body" : "@wojtek-t Yes, I think your (both) right. We should continue to advertise peer-urls via hostname. If we do change `--advertise-client-urls` to localhost, we would also need to update kube-apiserver's flags since it currently has the flag setting ` --etcd-servers=http://127.0.0.1:2379`. I'd like to make this in a separate PR since it's not directly related to this PR and needs to be done carefully.",
        "createdAt" : "2018-01-26T18:14:14Z",
        "updatedAt" : "2018-02-03T01:25:29Z",
        "lastEditedBy" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "tags" : [
        ]
      },
      {
        "id" : "3e8826bb-b666-44e1-be00-cc04766702f4",
        "parentId" : "30ecf571-8339-4aa3-ba91-75a0361d7e89",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "So I think you need to revert the change this line, right?",
        "createdAt" : "2018-01-26T18:37:30Z",
        "updatedAt" : "2018-02-03T01:25:29Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "7daf7b4f-943e-42c9-b0e0-8a5d4c50d05a",
        "parentId" : "30ecf571-8339-4aa3-ba91-75a0361d7e89",
        "authorId" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "body" : "No, the bind to 127.0.0.1 is still correct. This discussion was only about advertise flags.",
        "createdAt" : "2018-01-27T15:34:16Z",
        "updatedAt" : "2018-02-03T01:25:29Z",
        "lastEditedBy" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "tags" : [
        ]
      },
      {
        "id" : "c0e6fe0e-0bbe-4bc0-bcf0-4bb3f464c69b",
        "parentId" : "30ecf571-8339-4aa3-ba91-75a0361d7e89",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "OK - I think you're right.",
        "createdAt" : "2018-01-29T07:32:47Z",
        "updatedAt" : "2018-02-03T01:25:29Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "d542a287-4107-4268-b4dc-90800ea9380c",
        "parentId" : "30ecf571-8339-4aa3-ba91-75a0361d7e89",
        "authorId" : "5971aa67-736c-4c47-bf3f-abcf04541260",
        "body" : "It stops etcd nodes to communicate when they are running on different machines.\r\nPR with revert - https://github.com/kubernetes/kubernetes/pull/59974\r\n",
        "createdAt" : "2018-02-16T16:02:34Z",
        "updatedAt" : "2018-02-16T16:02:34Z",
        "lastEditedBy" : "5971aa67-736c-4c47-bf3f-abcf04541260",
        "tags" : [
        ]
      }
    ],
    "commit" : "f0d04b713150011503b51a290adf3623657e3cbf",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +23,27 @@              \"/bin/sh\",\n              \"-c\",\n              \"if [ -e /usr/local/bin/migrate-if-needed.sh ]; then /usr/local/bin/migrate-if-needed.sh 1>>/var/log/etcd{{ suffix }}.log 2>&1; fi; exec /usr/local/bin/etcd --name etcd-{{ hostname }} --listen-peer-urls {{ etcd_protocol }}://127.0.0.1:{{ server_port }} --initial-advertise-peer-urls {{ etcd_protocol }}://{{ hostname }}:{{ server_port }} --advertise-client-urls http://127.0.0.1:{{ port }} --listen-client-urls http://127.0.0.1:{{ port }} {{ quota_bytes }} --data-dir /var/etcd/data{{ suffix }} --initial-cluster-state {{ cluster_state }} --initial-cluster {{ etcd_cluster }} {{ etcd_creds }} 1>>/var/log/etcd{{ suffix }}.log 2>&1\"\n            ],\n    \"env\": ["
  }
]