[
  {
    "id" : "d1767f2d-8ebb-476d-a645-e032838e0cd4",
    "prId" : 45136,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/45136#pullrequestreview-38453149",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "db2f28c9-1cb7-40ea-a8d8-92387a5846c5",
        "parentId" : null,
        "authorId" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "body" : "Maybe worth grepping for NVIDIA devices here too, for less output?",
        "createdAt" : "2017-05-15T18:01:24Z",
        "updatedAt" : "2017-05-21T04:21:36Z",
        "lastEditedBy" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "tags" : [
        ]
      },
      {
        "id" : "66fea86c-77f1-4b89-b4bf-cce453765e70",
        "parentId" : "db2f28c9-1cb7-40ea-a8d8-92387a5846c5",
        "authorId" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "body" : "I can optimize it by wrapping around a `command`, but I actually like verbose output. ",
        "createdAt" : "2017-05-16T03:23:56Z",
        "updatedAt" : "2017-05-21T04:21:36Z",
        "lastEditedBy" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "tags" : [
        ]
      },
      {
        "id" : "4b5835f7-a93d-4acf-9487-3375314e2ab6",
        "parentId" : "db2f28c9-1cb7-40ea-a8d8-92387a5846c5",
        "authorId" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "body" : "fair enough",
        "createdAt" : "2017-05-16T17:13:50Z",
        "updatedAt" : "2017-05-21T04:21:36Z",
        "lastEditedBy" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "tags" : [
        ]
      }
    ],
    "commit" : "333e571bee76610da7ee3185c029c8c93cec2a02",
    "line" : 56,
    "diffHunk" : "@@ -1,1 +54,58 @@\ncheck_nvidia_device() {\n    lspci\n    if ! lspci | grep -i -q NVIDIA; then\n        echo \"No NVIDIA devices attached to this instance.\""
  },
  {
    "id" : "b45365f5-495b-449f-96f3-46a7a9e82aa3",
    "prId" : 45136,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/45136#pullrequestreview-38453236",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3699882c-8a28-4f0f-8a51-523cf5165d94",
        "parentId" : null,
        "authorId" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "body" : "Maybe also print where people can find the full log file",
        "createdAt" : "2017-05-15T18:05:08Z",
        "updatedAt" : "2017-05-21T04:21:36Z",
        "lastEditedBy" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "tags" : [
        ]
      },
      {
        "id" : "ac66944c-fea4-4ba1-9c42-a283f95a815d",
        "parentId" : "3699882c-8a28-4f0f-8a51-523cf5165d94",
        "authorId" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "body" : "All the command run by this script will be printed - `set -x`. So the `tail` command below will display the log file name.",
        "createdAt" : "2017-05-16T03:24:48Z",
        "updatedAt" : "2017-05-21T04:21:36Z",
        "lastEditedBy" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "tags" : [
        ]
      },
      {
        "id" : "71e0c19f-b667-47c7-bad1-11d58a82c967",
        "parentId" : "3699882c-8a28-4f0f-8a51-523cf5165d94",
        "authorId" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "body" : "ok",
        "createdAt" : "2017-05-16T17:14:08Z",
        "updatedAt" : "2017-05-21T04:21:36Z",
        "lastEditedBy" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "tags" : [
        ]
      }
    ],
    "commit" : "333e571bee76610da7ee3185c029c8c93cec2a02",
    "line" : 102,
    "diffHunk" : "@@ -1,1 +100,104 @@    echo \"Running the Nvidia driver installer ...\"\n    if ! sh \"${NVIDIA_DRIVER_PKG_NAME}\" --kernel-source-path=\"${KERNEL_SRC_DIR}\" --silent --accept-license --keep --log-file-name=\"${log_file_name}\"; then\n        echo \"Nvidia installer failed, log below:\"\n        echo \"===================================\"\n        tail -50 \"${log_file_name}\""
  },
  {
    "id" : "5f9af925-4338-447c-9123-84cde5fe6bf1",
    "prId" : 45136,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/45136#pullrequestreview-38539763",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e3ad2589-0adf-4c1d-845a-4a2e5cfaec37",
        "parentId" : null,
        "authorId" : "2758f003-b4bb-4113-b6a9-e1f4e42a1de6",
        "body" : "nipick: preceding whitespaces are inconsistent in the `if` block",
        "createdAt" : "2017-05-16T21:30:44Z",
        "updatedAt" : "2017-05-21T04:21:36Z",
        "lastEditedBy" : "2758f003-b4bb-4113-b6a9-e1f4e42a1de6",
        "tags" : [
        ]
      },
      {
        "id" : "13364e6b-1355-4a54-b802-88fb320e8da9",
        "parentId" : "e3ad2589-0adf-4c1d-845a-4a2e5cfaec37",
        "authorId" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "body" : "Done",
        "createdAt" : "2017-05-16T23:41:18Z",
        "updatedAt" : "2017-05-21T04:21:36Z",
        "lastEditedBy" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "tags" : [
        ]
      }
    ],
    "commit" : "333e571bee76610da7ee3185c029c8c93cec2a02",
    "line" : 158,
    "diffHunk" : "@@ -1,1 +156,160 @@    if nvidia-smi; then\n\techo \"nvidia drivers already installed. Skipping installation\"\n        post_installation_sequence\n\texit 0\n    fi"
  },
  {
    "id" : "523fec49-39f2-46f7-b864-b97e470573c0",
    "prId" : 45136,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/45136#pullrequestreview-39796136",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e79b5097-9af9-4e85-8167-ff95101d3159",
        "parentId" : null,
        "authorId" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "body" : "s/configu/config",
        "createdAt" : "2017-05-23T16:26:00Z",
        "updatedAt" : "2017-05-23T16:46:37Z",
        "lastEditedBy" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "tags" : [
        ]
      }
    ],
    "commit" : "333e571bee76610da7ee3185c029c8c93cec2a02",
    "line" : 76,
    "diffHunk" : "@@ -1,1 +74,78 @@    git checkout ${LAKITU_KERNEL_SHA1}\n\n    # Prepare kernel configu and source for modules.\n    echo \"Preparing kernel sources ...\"\n    zcat \"/proc/config.gz\" > \".config\""
  },
  {
    "id" : "23050a49-fcb8-4c29-be9b-e5d907e2552e",
    "prId" : 45136,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/45136#pullrequestreview-39866020",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "90dae677-6da4-4236-aa68-b96948c49227",
        "parentId" : null,
        "authorId" : "a6409368-42e0-44a9-bf79-9d3042ac3b65",
        "body" : "Why do we need to restart Kubelet during the installation? This kind of dependencies could be error-prone: deploying and managing this nvidia-gpus daemonset depends on Kubelet, but in the middle of running the daemonset (installer.sh), Kubelet is restarted. ",
        "createdAt" : "2017-05-23T20:43:42Z",
        "updatedAt" : "2017-05-23T20:43:42Z",
        "lastEditedBy" : "a6409368-42e0-44a9-bf79-9d3042ac3b65",
        "tags" : [
        ]
      },
      {
        "id" : "bf074b3f-88ce-4cd7-8661-51bb15f24e11",
        "parentId" : "90dae677-6da4-4236-aa68-b96948c49227",
        "authorId" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "body" : "This is necessary for the kubelet to pick up the GPUs. Kubelet cannot support hotplugging GPUs for various reasons. We tried that with just PCI based data and it's proving to be hard.\r\nIdeally, we need to reboot the entire node, but we haven't gotten there yet.",
        "createdAt" : "2017-05-23T20:55:00Z",
        "updatedAt" : "2017-05-23T20:55:00Z",
        "lastEditedBy" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "tags" : [
        ]
      }
    ],
    "commit" : "333e571bee76610da7ee3185c029c8c93cec2a02",
    "line" : 164,
    "diffHunk" : "@@ -1,1 +162,166 @@\nrestart_kubelet() {\n    echo \"Sending SIGTERM to kubelet\"\n    pkill -SIGTERM kubelet\n}"
  }
]