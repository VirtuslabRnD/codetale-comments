[
  {
    "id" : "eee6a727-a09c-4a91-87ee-aedff039ea94",
    "prId" : 55815,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/55815#pullrequestreview-78495451",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3a1ed071-c90e-4b5f-993b-784473154240",
        "parentId" : null,
        "authorId" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "body" : "Please pick a consistent ordering, not random.",
        "createdAt" : "2017-11-21T17:21:58Z",
        "updatedAt" : "2017-11-22T21:25:11Z",
        "lastEditedBy" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "tags" : [
        ]
      },
      {
        "id" : "83f382d8-5013-48be-92b3-03dfffe8d785",
        "parentId" : "3a1ed071-c90e-4b5f-993b-784473154240",
        "authorId" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "body" : "ack. It wasn't random per-se but I will make it better. ",
        "createdAt" : "2017-11-21T17:38:41Z",
        "updatedAt" : "2017-11-22T21:25:11Z",
        "lastEditedBy" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "tags" : [
        ]
      },
      {
        "id" : "ff94c151-3063-4767-b68b-37dea584828e",
        "parentId" : "3a1ed071-c90e-4b5f-993b-784473154240",
        "authorId" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "body" : "fixed",
        "createdAt" : "2017-11-22T16:01:36Z",
        "updatedAt" : "2017-11-22T21:25:11Z",
        "lastEditedBy" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "tags" : [
        ]
      }
    ],
    "commit" : "5ee4d2bbf5b61d5d8fc71b57f68955effc96e2d7",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +28,32 @@export LIBVIRT_DEFAULT_URI=qemu:///system\nexport SERVICE_ACCOUNT_LOOKUP=${SERVICE_ACCOUNT_LOOKUP:-true}\nexport ADMISSION_CONTROL=${ADMISSION_CONTROL:-Initializers,NamespaceLifecycle,LimitRanger,ServiceAccount,DefaultStorageClass,PersistentVolumeClaimResize,DefaultTolerationSeconds,ResourceQuota}\nreadonly POOL=kubernetes\nreadonly POOL_PATH=/var/lib/libvirt/images/kubernetes"
  },
  {
    "id" : "38eb0734-ab7b-487a-9015-e6acd5c86f5d",
    "prId" : 19001,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9d2e2cfb-b056-44fd-a6c4-1d3043f1a8a6",
        "parentId" : null,
        "authorId" : "ef812695-7cee-4ef0-9611-3480bdcb4844",
        "body" : "As far as I remember, `virsh vol-upload` was _much_ slower than the `mv`.\nIf it is still the case, why not keeping the faster `mv` ?\n",
        "createdAt" : "2016-01-08T09:31:06Z",
        "updatedAt" : "2016-01-08T09:31:06Z",
        "lastEditedBy" : "ef812695-7cee-4ef0-9611-3480bdcb4844",
        "tags" : [
        ]
      },
      {
        "id" : "88423746-b442-459d-816c-7ea4fd6aed07",
        "parentId" : "9d2e2cfb-b056-44fd-a6c4-1d3043f1a8a6",
        "authorId" : "2b8e8285-f10d-43c8-bf84-98f8e80ac2a2",
        "body" : "The `mv` does not work everywhere.\n\nThe old version mixed file transfers and libvirt storage/volume commands, which might work on some machines, but not everywhere.\n\nThe image update is done only once iff a new version is uploaded.\n\nIf this is crucial to someone, pure file transfer method could be provided, but I would stay away from this approach.\n\nDoes this help? \n",
        "createdAt" : "2016-01-08T09:55:27Z",
        "updatedAt" : "2016-01-08T09:55:27Z",
        "lastEditedBy" : "2b8e8285-f10d-43c8-bf84-98f8e80ac2a2",
        "tags" : [
        ]
      }
    ],
    "commit" : "7f4848cf5ba2237776167593b32ead4e7e6df6d8",
    "line" : 32,
    "diffHunk" : "@@ -1,1 +138,142 @@  if ! virsh vol-list $POOL | grep -q coreos_base.img; then\n      virsh vol-create-as $POOL coreos_base.img 10G --format qcow2\n      virsh vol-upload coreos_base.img \"$ROOT/coreos_production_qemu_image.img\" --pool $POOL\n  fi\n"
  },
  {
    "id" : "ed87f668-6fc3-4217-a97d-a52746665e7a",
    "prId" : 17848,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fc3472b8-9f41-4937-9374-4e5e42ea48f1",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "will /tmp be writeable under normal circumstances?\n",
        "createdAt" : "2015-12-03T19:57:39Z",
        "updatedAt" : "2015-12-07T13:33:44Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "dfc4537e-d0ab-4edd-b99f-14d95e63f66e",
        "parentId" : "fc3472b8-9f41-4937-9374-4e5e42ea48f1",
        "authorId" : "9f5dc2fc-1039-44a5-863f-115658f282e7",
        "body" : "This env is local dev environment. /tmp in general is writable (as in local cluster)\n",
        "createdAt" : "2015-12-03T20:11:15Z",
        "updatedAt" : "2015-12-07T13:33:44Z",
        "lastEditedBy" : "9f5dc2fc-1039-44a5-863f-115658f282e7",
        "tags" : [
        ]
      }
    ],
    "commit" : "ea1c97c7173b526b29059c9be1f3000c82d64f38",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +54,58 @@\nfunction set_service_accounts {\n    SERVICE_ACCOUNT_KEY=${SERVICE_ACCOUNT_KEY:-\"/tmp/kube-serviceaccount.key\"}\n    # Generate ServiceAccount key if needed\n    if [[ ! -f \"${SERVICE_ACCOUNT_KEY}\" ]]; then"
  },
  {
    "id" : "b0b481a0-5be7-4d59-8a92-881bed51033d",
    "prId" : 17848,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ee2fce93-0443-497b-9cef-6d52bea3ab22",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "will openssl be available under normal circumstances?\n",
        "createdAt" : "2015-12-03T19:57:50Z",
        "updatedAt" : "2015-12-07T13:33:44Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "0683d9e7-024c-4bff-b2d0-c45d7eb41454",
        "parentId" : "ee2fce93-0443-497b-9cef-6d52bea3ab22",
        "authorId" : "ef812695-7cee-4ef0-9611-3480bdcb4844",
        "body" : "`libvirt-coreos` targets local development environments.\nI think it is reasonable to request `openssl` as a pre-requisite. It should be easy for the developer to install it on its workstation.\nBut we could document this new dependency in: https://github.com/kubernetes/kubernetes/blob/master/docs/getting-started-guides/libvirt-coreos.md#prerequisites\n",
        "createdAt" : "2015-12-07T09:18:41Z",
        "updatedAt" : "2015-12-07T13:33:44Z",
        "lastEditedBy" : "ef812695-7cee-4ef0-9611-3480bdcb4844",
        "tags" : [
        ]
      },
      {
        "id" : "155699dc-b4ac-426b-a7ab-86f6c93efd58",
        "parentId" : "ee2fce93-0443-497b-9cef-6d52bea3ab22",
        "authorId" : "9f5dc2fc-1039-44a5-863f-115658f282e7",
        "body" : "ok\n",
        "createdAt" : "2015-12-07T09:24:27Z",
        "updatedAt" : "2015-12-07T13:33:44Z",
        "lastEditedBy" : "9f5dc2fc-1039-44a5-863f-115658f282e7",
        "tags" : [
        ]
      }
    ],
    "commit" : "ea1c97c7173b526b29059c9be1f3000c82d64f38",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +58,62 @@    if [[ ! -f \"${SERVICE_ACCOUNT_KEY}\" ]]; then\n      mkdir -p \"$(dirname ${SERVICE_ACCOUNT_KEY})\"\n      openssl genrsa -out \"${SERVICE_ACCOUNT_KEY}\" 2048 2>/dev/null\n    fi\n"
  },
  {
    "id" : "9b2ca9d2-38e7-49ed-843e-3c9bff2b368f",
    "prId" : 17848,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b24b1c29-30b0-423a-a48d-e7ffd86f7549",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "I'm not familiar enough with this install to know if this path is reasonable\n",
        "createdAt" : "2015-12-03T19:58:56Z",
        "updatedAt" : "2015-12-07T13:33:44Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "85738939-3b0b-4e18-8b09-32abb46249d1",
        "parentId" : "b24b1c29-30b0-423a-a48d-e7ffd86f7549",
        "authorId" : "9f5dc2fc-1039-44a5-863f-115658f282e7",
        "body" : "`$POOL_PATH` is the shared directory mounted by different virtual hosts data will be in `kubernetes/cluster/libvirt-coreos/libvirt_storage_pool` and mounted remotely in `/opt/`\n",
        "createdAt" : "2015-12-03T20:15:30Z",
        "updatedAt" : "2015-12-07T13:33:44Z",
        "lastEditedBy" : "9f5dc2fc-1039-44a5-863f-115658f282e7",
        "tags" : [
        ]
      },
      {
        "id" : "c0d3feb6-c9bd-4b2e-9345-785726ce564c",
        "parentId" : "b24b1c29-30b0-423a-a48d-e7ffd86f7549",
        "authorId" : "ef812695-7cee-4ef0-9611-3480bdcb4844",
        "body" : "In `libvirt-coreos` setup, the `$POOL_PATH/kubernetes` directory of the host (machine where `kube-up.sh` is launched) is mounted on each VM in `/opt/kubernetes`.\n\nIt is the most efficient way to push things to the VMs.\n\nIâ€™m fine with that.\n",
        "createdAt" : "2015-12-07T09:23:52Z",
        "updatedAt" : "2015-12-07T13:33:44Z",
        "lastEditedBy" : "ef812695-7cee-4ef0-9611-3480bdcb4844",
        "tags" : [
        ]
      }
    ],
    "commit" : "ea1c97c7173b526b29059c9be1f3000c82d64f38",
    "line" : 22,
    "diffHunk" : "@@ -1,1 +61,65 @@    fi\n\n    mkdir -p  \"$POOL_PATH/kubernetes/certs\"\n    cp \"${SERVICE_ACCOUNT_KEY}\" \"$POOL_PATH/kubernetes/certs\"\n}"
  }
]