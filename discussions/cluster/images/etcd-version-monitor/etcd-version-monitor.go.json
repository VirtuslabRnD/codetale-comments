[
  {
    "id" : "1c83325e-19da-4f1c-843a-75b06bf3f992",
    "prId" : 83283,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/83283#pullrequestreview-295408943",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "de393d3f-9447-4d9a-9034-e058051a0c5e",
        "parentId" : null,
        "authorId" : "4108cff4-d61c-4717-862b-6c3be3b73be2",
        "body" : "This would be better as a GaugeFunc no? This way if the etcd cluster is upgraded we will end up with multiple active time-series reporting multiple versions, when there is really only one.",
        "createdAt" : "2019-09-30T08:12:11Z",
        "updatedAt" : "2019-09-30T08:12:11Z",
        "lastEditedBy" : "4108cff4-d61c-4717-862b-6c3be3b73be2",
        "tags" : [
        ]
      },
      {
        "id" : "e0205725-2ff7-4ebf-a711-cdb4c8dba7f1",
        "parentId" : "de393d3f-9447-4d9a-9034-e058051a0c5e",
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "There is actually already logic for this in place (https://github.com/kubernetes/kubernetes/blob/7cbd6bf9eae6512f0bffa85c438100640692fe9b/cluster/images/etcd-version-monitor/etcd-version-monitor.go#L232). \r\n\r\nAlso, not sure that a gaugeFunc would help in that respect (doesn't it just allow for lazily evaluating the metric value during scrape?).",
        "createdAt" : "2019-09-30T23:33:06Z",
        "updatedAt" : "2019-09-30T23:33:07Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      },
      {
        "id" : "ebf71a4b-3c59-4df8-871f-c676414240fe",
        "parentId" : "de393d3f-9447-4d9a-9034-e058051a0c5e",
        "authorId" : "4108cff4-d61c-4717-862b-6c3be3b73be2",
        "body" : "Makes sense. Sounds good to me this way as well then.",
        "createdAt" : "2019-10-01T07:21:25Z",
        "updatedAt" : "2019-10-01T07:21:26Z",
        "lastEditedBy" : "4108cff4-d61c-4717-862b-6c3be3b73be2",
        "tags" : [
        ]
      }
    ],
    "commit" : "7cbd6bf9eae6512f0bffa85c438100640692fe9b",
    "line" : 28,
    "diffHunk" : "@@ -1,1 +64,68 @@\t// Custom etcd version metric since etcd 3.2- does not export one.\n\t// This will be replaced by https://github.com/coreos/etcd/pull/8960 in etcd 3.3.\n\tetcdVersion = metrics.NewGaugeVec(\n\t\t&metrics.GaugeOpts{\n\t\t\tNamespace:      namespace,"
  },
  {
    "id" : "c688c09b-be90-45e4-9389-4dcc1baafc3f",
    "prId" : 41080,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/41080#pullrequestreview-22553198",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ceab91dd-01e1-4c0d-994c-5e9f3a615a26",
        "parentId" : null,
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "Couldn't comment above, so commenting here.\r\n\r\nWhere those binaries come from? It's not a good practise to submit binaries to the repository.\r\n\r\nInstead of that, you should download them as part of building the image.",
        "createdAt" : "2017-02-09T15:06:51Z",
        "updatedAt" : "2017-02-17T11:53:08Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "21cbd9c2-c9c1-4561-92bd-ac2426b9b2c8",
        "parentId" : "ceab91dd-01e1-4c0d-994c-5e9f3a615a26",
        "authorId" : "57a5e7e7-e6d7-467b-96ab-41e4ca978eee",
        "body" : "Yes, I felt the same too. Changed it to download etcdctl (the only extra binary we need) as part of the makefile.",
        "createdAt" : "2017-02-10T20:55:27Z",
        "updatedAt" : "2017-02-17T11:53:08Z",
        "lastEditedBy" : "57a5e7e7-e6d7-467b-96ab-41e4ca978eee",
        "tags" : [
        ]
      },
      {
        "id" : "dc23bb16-a125-45d8-a857-9bedb739dff4",
        "parentId" : "ceab91dd-01e1-4c0d-994c-5e9f3a615a26",
        "authorId" : "57a5e7e7-e6d7-467b-96ab-41e4ca978eee",
        "body" : "Done.",
        "createdAt" : "2017-02-10T20:56:55Z",
        "updatedAt" : "2017-02-17T11:53:08Z",
        "lastEditedBy" : "57a5e7e7-e6d7-467b-96ab-41e4ca978eee",
        "tags" : [
        ]
      },
      {
        "id" : "e694d347-0bd2-456e-a1aa-af8482bf5e42",
        "parentId" : "ceab91dd-01e1-4c0d-994c-5e9f3a615a26",
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "I do not see it downloading etcdctl? I'd greatly prefer if this did not download or use etcdctl, so that we don't have to worry about the version being out of sync.",
        "createdAt" : "2017-02-17T17:37:59Z",
        "updatedAt" : "2017-02-17T17:38:00Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      },
      {
        "id" : "6ecd164c-d017-49fc-aca9-9d3b3a2ee01f",
        "parentId" : "ceab91dd-01e1-4c0d-994c-5e9f3a615a26",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "Yes - this was removed. So it no longer depends on etcdctl.",
        "createdAt" : "2017-02-17T17:53:08Z",
        "updatedAt" : "2017-02-17T17:53:08Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "7e6b8ac26bfe4eeae94ee04ba1eee738c4db03c2",
    "line" : 1,
    "diffHunk" : "@@ -1,1 +-1,3 @@/*\nCopyright 2017 The Kubernetes Authors.\n"
  },
  {
    "id" : "e8c77f1b-17ac-466a-a76c-46e3a3c10944",
    "prId" : 41080,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/41080#pullrequestreview-22570342",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "80a97029-5965-4b93-b7c8-26f0c788484c",
        "parentId" : null,
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "nit: if you're going to the trouble of registering these flags in a method like this, you might as well stuff the flags in a struct so that they don't have to be global.",
        "createdAt" : "2017-02-17T19:13:34Z",
        "updatedAt" : "2017-02-17T19:13:34Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      }
    ],
    "commit" : "7e6b8ac26bfe4eeae94ee04ba1eee738c4db03c2",
    "line" : 41,
    "diffHunk" : "@@ -1,1 +39,43 @@)\n\nfunc registerFlags(fs *pflag.FlagSet) {\n\tfs.StringVar(&listenAddress, \"listen-address\", \"localhost:9101\", \"Address to listen on for serving prometheus metrics\")\n\tfs.StringVar(&metricsPath, \"metrics-path\", \"/metrics\", \"Path under which prometheus metrics are to be served\")"
  }
]