[
  {
    "id" : "f4408829-a4d7-41b8-8eff-cd82f9be5a8a",
    "prId" : 38394,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/38394#pullrequestreview-13288562",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "920fa57a-26ab-48af-b3c0-a5bf5cc92785",
        "parentId" : null,
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "Why this change?",
        "createdAt" : "2016-12-15T19:20:36Z",
        "updatedAt" : "2016-12-17T00:34:05Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "dc400b00-93a0-4466-b49c-01fa0dcc5104",
        "parentId" : "920fa57a-26ab-48af-b3c0-a5bf5cc92785",
        "authorId" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "body" : "we use this to set the previous cluster version, which should be smaller than the current cluster version (2.3). 2.3.7 > 2.3. I do not know why we set this to 2.3.7 before.",
        "createdAt" : "2016-12-15T19:25:26Z",
        "updatedAt" : "2016-12-17T00:34:05Z",
        "lastEditedBy" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "tags" : [
        ]
      },
      {
        "id" : "d262c988-60b1-4b9b-bda6-37235f2c1522",
        "parentId" : "920fa57a-26ab-48af-b3c0-a5bf5cc92785",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "I don't understand. This too is supposed to rollback from 3.0.* format to 2.3.7. Why do we need any information about 2.2.0?",
        "createdAt" : "2016-12-15T19:27:38Z",
        "updatedAt" : "2016-12-17T00:34:05Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "d086acc5-4ecb-4300-bd43-3afdb9080939",
        "parentId" : "920fa57a-26ab-48af-b3c0-a5bf5cc92785",
        "authorId" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "body" : "They are different thing. etcd protects itself from downgrade. The cluster version should only have majory.minor version, never patch version. So when you start 2.3.7, it knows 2.3.7 > 2.3 or 2.2. If we set this to 2.3.7, etcd will refuse to start. See @mml's issue in this thread.",
        "createdAt" : "2016-12-15T19:32:42Z",
        "updatedAt" : "2016-12-17T00:34:05Z",
        "lastEditedBy" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "tags" : [
        ]
      },
      {
        "id" : "c7458e84-3ed2-4050-9c34-15c1e52003dc",
        "parentId" : "920fa57a-26ab-48af-b3c0-a5bf5cc92785",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "Got it - thanks for explanation.",
        "createdAt" : "2016-12-16T08:09:59Z",
        "updatedAt" : "2016-12-17T00:34:05Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "a4778fa6cd9f05762476be209091ba3c76dc55e0",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +45,49 @@)\n\nconst rollbackVersion = \"2.2.0\"\n\nvar ("
  },
  {
    "id" : "05147c8c-bb83-434e-8dfd-ab5f96344857",
    "prId" : 38394,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/38394#pullrequestreview-13261364",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b0aeaf23-9541-4fbe-b335-8cb14124f381",
        "parentId" : null,
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "Please fix verify-bazel.",
        "createdAt" : "2016-12-15T19:20:58Z",
        "updatedAt" : "2016-12-17T00:34:05Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "ece6c5df-0cbb-4572-9a85-5099e113f6da",
        "parentId" : "b0aeaf23-9541-4fbe-b335-8cb14124f381",
        "authorId" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "body" : "What is verify-bazel?",
        "createdAt" : "2016-12-15T19:33:06Z",
        "updatedAt" : "2016-12-17T00:34:05Z",
        "lastEditedBy" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "tags" : [
        ]
      },
      {
        "id" : "49782d27-98b4-4520-b777-155da1dc1988",
        "parentId" : "b0aeaf23-9541-4fbe-b335-8cb14124f381",
        "authorId" : "d324e241-a7f0-4ace-bda2-4174b07bdb18",
        "body" : "Run `hack/verify-bazel.sh`",
        "createdAt" : "2016-12-16T01:00:12Z",
        "updatedAt" : "2016-12-17T00:34:05Z",
        "lastEditedBy" : "d324e241-a7f0-4ace-bda2-4174b07bdb18",
        "tags" : [
        ]
      },
      {
        "id" : "7f88989e-077c-4222-9d16-1ecc304331de",
        "parentId" : "b0aeaf23-9541-4fbe-b335-8cb14124f381",
        "authorId" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "body" : "I looked at the output. It does not seem to be related to this pr. You can check it the output here: https://k8s-gubernator.appspot.com/build/kubernetes-jenkins/pr-logs/pull/38394/pull-kubernetes-verify/9529/",
        "createdAt" : "2016-12-16T01:05:55Z",
        "updatedAt" : "2016-12-17T00:34:05Z",
        "lastEditedBy" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "tags" : [
        ]
      },
      {
        "id" : "02674f74-86ec-4cd4-9984-3448a4f61f88",
        "parentId" : "b0aeaf23-9541-4fbe-b335-8cb14124f381",
        "authorId" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "body" : "```\r\nW1215 09:36:03.180] wrote BUILD for \"/go/src/k8s.io/kubernetes/third_party/forked/etcd237/pkg/fileutil\"\r\nW1215 09:36:03.195] wrote BUILD for \"/go/src/k8s.io/kubernetes/third_party/forked/etcd237/wal\"\r\nW1215 09:36:03.196] extract err: cannot find package \"github.com/coreos/etcd237/Godeps/_workspace/src/github.com/gogo/protobuf/proto\" in any of:\r\nW1215 09:36:03.196] \t/go/src/k8s.io/kubernetes/vendor/github.com/coreos/etcd237/Godeps/_workspace/src/github.com/gogo/protobuf/proto (vendor tree)\r\nW1215 09:36:03.196] \t/usr/local/go/src/github.com/coreos/etcd237/Godeps/_workspace/src/github.com/gogo/protobuf/proto (from $GOROOT)\r\nW1215 09:36:03.196] \t/go/src/github.com/coreos/etcd237/Godeps/_workspace/src/github.com/gogo/protobuf/proto (from $GOPATH)\r\nW1215 09:36:03.197] wrote BUILD for \"/go/src/k8s.io/kubernetes/third_party/forked/etcd237/wal/walpb\"\r\n```\r\n\r\nThis says two things.\r\n1. this package won't compile because [this import](https://github.com/kubernetes/kubernetes/blob/d26bf3195007534453c2324ef18e95694b5a9a46/third_party/forked/etcd237/wal/walpb/record.pb.go#L20) is not in our gopath. I can verify this by checking out your branch and running `go install ./third_party/forked/etcd237/...`. I get a compilation error.\r\n2. `BUILD` files need to be update in `third_party/forked/etcd237/wal`, `third_party/forked/etcd237/pkg/fileutil`, and `third_party/forked/etcd237/wal/walpb` which makes sense because these are brand new packges. You can do this by rebasing this PR onto latest master and running `./hack/update-bazel.sh` then commiting the changes.",
        "createdAt" : "2016-12-16T01:36:33Z",
        "updatedAt" : "2016-12-17T00:34:05Z",
        "lastEditedBy" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "tags" : [
        ]
      },
      {
        "id" : "eb770ba0-01de-4796-b7a3-e829de24682f",
        "parentId" : "b0aeaf23-9541-4fbe-b335-8cb14124f381",
        "authorId" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "body" : "@mikedanese \r\n\r\nOK. Now I see them... The default output from build-log.txt is very confusing since it hides all valuable output with `... skipping 1747 lines ...` and printed out tons of unrelated errors with yellow highlights.\r\n\r\n```\r\nW1215 09:44:40.288] I1215 09:44:40.287939   10387 parse.go:353] type checker error: /usr/local/go/src/runtime/trace.go:139:30: cannot use (traceBufHeader literal) (value of type traceBufHeader) as unsafe.ArbitraryType value in argument to unsafe.Sizeof\r\nW1215 09:44:40.289] I1215 09:44:40.288070   10387 parse.go:353] type checker error: /usr/local/go/src/runtime/trace.go:139:7: array length 64 << 10 - unsafe.Sizeof((traceBufHeader literal)) (value of type uintptr) must be constant\r\nW1215 09:44:40.289] I1215 09:44:40.288156   10387 parse.go:353] type checker error: /usr/local/go/src/runtime/mgcwork.go:285:37: cannot use (workbufhdr literal) (value of type workbufhdr) as unsafe.ArbitraryType value in argument to unsafe.Sizeof\r\nW1215 09:44:40.289] I1215 09:44:40.288181   10387 parse.go:353] type checker error: /usr/local/go/src/runtime/mgcwork.go:285:7: array length (_WorkbufSize - unsafe.Sizeof((workbufhdr literal))) / sys.PtrSize (value of type uintptr) must be constant\r\nW1215 09:44:40.289] I1215 09:44:40.288556   10387 parse.go:353] type checker error: /usr/local/go/src/runtime/chan.go:21:28: cannot use (hchan literal) (value of type hchan) as unsafe.ArbitraryType value in argument to unsafe.Sizeof\r\nW1215 09:44:40.289] I1215 09:44:40.288590   10387 parse.go:353] type che\r\n```\r\n\r\nWe probably need to improve this output format to make it less confusing.\r\n\r\nI will play with bazel more tomorrow.",
        "createdAt" : "2016-12-16T02:17:33Z",
        "updatedAt" : "2016-12-17T00:34:05Z",
        "lastEditedBy" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "tags" : [
        ]
      }
    ],
    "commit" : "a4778fa6cd9f05762476be209091ba3c76dc55e0",
    "line" : 1,
    "diffHunk" : "@@ -1,1 +24,28 @@\t\"path\"\n\t\"strconv\"\n\t\"strings\"\n\t\"time\"\n"
  },
  {
    "id" : "7ade0d61-83fa-4d6e-8afd-831c9d7065d2",
    "prId" : 32161,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "11d49a0b-5979-4f4c-af07-c25736d7fc36",
        "parentId" : null,
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "This formatting is strange - is it what gofmt is imposing?\n",
        "createdAt" : "2016-09-07T06:36:05Z",
        "updatedAt" : "2016-09-08T19:29:27Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "2752330c-e1f6-407f-b8dd-1a39254cb47c",
        "parentId" : "11d49a0b-5979-4f4c-af07-c25736d7fc36",
        "authorId" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "body" : "haha. seems it is... numerical const has no type.\n",
        "createdAt" : "2016-09-07T06:41:49Z",
        "updatedAt" : "2016-09-08T19:29:27Z",
        "lastEditedBy" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "tags" : [
        ]
      }
    ],
    "commit" : "61e238cac3a072e8f559cf335c94f62b25dbeb72",
    "line" : null,
    "diffHunk" : "@@ -1,1 +200,204 @@\n\tmarkTombstone byte = 't'\n)\n\nfunc isTombstone(b []byte) bool {"
  },
  {
    "id" : "1858b242-b237-4be9-a257-154ba3a11203",
    "prId" : 32161,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b71f6c48-ebb1-44d0-b9ab-f6646891feb7",
        "parentId" : null,
        "authorId" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "body" : "we should only apply keys in the StoreClusterPrefix. also we do not need POST, QGET, SYNC\n",
        "createdAt" : "2016-09-07T23:48:31Z",
        "updatedAt" : "2016-09-08T19:29:27Z",
        "lastEditedBy" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "tags" : [
        ]
      }
    ],
    "commit" : "61e238cac3a072e8f559cf335c94f62b25dbeb72",
    "line" : 317,
    "diffHunk" : "@@ -1,1 +315,319 @@}\n\nfunc applyRequest(r *pb.Request, applyV2 etcdserver.ApplierV2) {\n\ttoTTLOptions(r)\n\tswitch r.Method {"
  },
  {
    "id" : "039e34d0-995a-4254-a37e-ef438e459d48",
    "prId" : 32161,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "27cc0276-00bd-4764-ad7d-c5e5e15e66a3",
        "parentId" : null,
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "glog.Info() ?\n",
        "createdAt" : "2016-09-08T12:11:10Z",
        "updatedAt" : "2016-09-08T19:29:27Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "9a4baabd-8857-4bc7-850c-102a21268902",
        "parentId" : "27cc0276-00bd-4764-ad7d-c5e5e15e66a3",
        "authorId" : "bb4cf218-381a-40ad-ac0c-0c2c66685cd4",
        "body" : "glog.Info() will need an additional flag \"-alsologtostderr\" in order to print out in terminal.\nLet's use this simple way :)\n",
        "createdAt" : "2016-09-08T16:19:24Z",
        "updatedAt" : "2016-09-08T19:29:27Z",
        "lastEditedBy" : "bb4cf218-381a-40ad-ac0c-0c2c66685cd4",
        "tags" : [
        ]
      }
    ],
    "commit" : "61e238cac3a072e8f559cf335c94f62b25dbeb72",
    "line" : null,
    "diffHunk" : "@@ -1,1 +176,180 @@\t\tglog.Fatal(err)\n\t}\n\tfmt.Println(\"Finished successfully\")\n}\n"
  }
]