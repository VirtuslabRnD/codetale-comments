[
  {
    "id" : "f351e1d8-f052-4116-a0d3-0187d57caded",
    "prId" : 91964,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/91964#pullrequestreview-429137956",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fdbbd954-a354-496b-a7fc-56a337b4ef0f",
        "parentId" : null,
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "Hmm - this is no longer in sync now :)\r\n\r\nAlso:\r\n1. Who is setting \"HOSTNAME\" ?\r\n2. Why we have the \"etcd-\" prefix ?\r\n",
        "createdAt" : "2020-06-10T06:18:42Z",
        "updatedAt" : "2020-06-18T18:11:31Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "3be82512-3e70-40a9-ba9e-f5e1240a8582",
        "parentId" : "fdbbd954-a354-496b-a7fc-56a337b4ef0f",
        "authorId" : "f474bb7f-c91e-4c7f-8215-aa1a0f8eb05a",
        "body" : "> Who is setting \"HOSTNAME\" ?\r\n\r\nOn the master vm, $HOSTNAME is indeed set to the master vm name. But my bad that I don't really know who set it, I got the `/usr/local/bin/migrate-if-needed.sh: line 49: hostname: command not found` when testing out, and realize @dims also changed hostname to HOSTNAME in #91171. Let me try find this out.\r\n\r\n> Why we have the \"etcd-\" prefix\r\n\r\nThis is to agree with host name set in configure-helper.sh: https://github.com/kubernetes/kubernetes/blob/1bc526aa6c310b915e7ad57b4442deec7328aad2/cluster/gce/gci/configure-helper.sh#L1626",
        "createdAt" : "2020-06-10T06:56:16Z",
        "updatedAt" : "2020-06-18T18:11:31Z",
        "lastEditedBy" : "f474bb7f-c91e-4c7f-8215-aa1a0f8eb05a",
        "tags" : [
        ]
      },
      {
        "id" : "a8d67906-c9e9-46d3-9fa5-b42dd93341dc",
        "parentId" : "fdbbd954-a354-496b-a7fc-56a337b4ef0f",
        "authorId" : "bd04f755-e62f-45fb-8771-4cc2b5db49d4",
        "body" : "@wenjiaswe right. the `hostname` binary is no longer available in the distroless etcd.",
        "createdAt" : "2020-06-10T10:12:00Z",
        "updatedAt" : "2020-06-18T18:11:31Z",
        "lastEditedBy" : "bd04f755-e62f-45fb-8771-4cc2b5db49d4",
        "tags" : [
        ]
      },
      {
        "id" : "b79e4f33-709c-47fe-9d78-bd5bc401e8c6",
        "parentId" : "fdbbd954-a354-496b-a7fc-56a337b4ef0f",
        "authorId" : "f474bb7f-c91e-4c7f-8215-aa1a0f8eb05a",
        "body" : "Thanks! Do you know where the HOSTNAME is set? I knew it’s set cause I can see it on master, but I haven’t found who did it.",
        "createdAt" : "2020-06-10T10:39:03Z",
        "updatedAt" : "2020-06-18T18:11:31Z",
        "lastEditedBy" : "f474bb7f-c91e-4c7f-8215-aa1a0f8eb05a",
        "tags" : [
        ]
      },
      {
        "id" : "d3c7cb95-ec7c-4038-913a-576896b8e14a",
        "parentId" : "fdbbd954-a354-496b-a7fc-56a337b4ef0f",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "it seems that docker is setting that automatically\r\n\r\nCan you please double check that containerd is doing the same.",
        "createdAt" : "2020-06-10T12:02:41Z",
        "updatedAt" : "2020-06-18T18:11:31Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "a2d5d45d-646f-4e05-9192-c2338a4f7d82",
        "parentId" : "fdbbd954-a354-496b-a7fc-56a337b4ef0f",
        "authorId" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "body" : "Now that ETCD_HOSTNAME this seems less important, but since the default is to fallback to $HOSTNAME, might still be worth answering how it works for containerd?",
        "createdAt" : "2020-06-11T17:22:44Z",
        "updatedAt" : "2020-06-18T18:11:31Z",
        "lastEditedBy" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "tags" : [
        ]
      },
      {
        "id" : "82a15462-c156-4c2e-bfe2-f714b2b9a8a0",
        "parentId" : "fdbbd954-a354-496b-a7fc-56a337b4ef0f",
        "authorId" : "f474bb7f-c91e-4c7f-8215-aa1a0f8eb05a",
        "body" : "Checked with @Random-Liu , containerd does have  HOSTNAME set too: https://github.com/containerd/cri/blob/ae8200bf93e9eda91d1c8b40dc14257ec0bdea02/pkg/server/container_create_unix.go#L145.",
        "createdAt" : "2020-06-11T17:34:58Z",
        "updatedAt" : "2020-06-18T18:11:31Z",
        "lastEditedBy" : "f474bb7f-c91e-4c7f-8215-aa1a0f8eb05a",
        "tags" : [
        ]
      }
    ],
    "commit" : "0da9c3e3793a53610372e5dc6cca2786865f271c",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +48,52 @@# shellcheck disable=SC2039\n# NOTE: Make sure the resulted ETCD_NAME agrees with --name in etcd.manifest: https://github.com/kubernetes/kubernetes/blob/e7ca64fbe16d0c4b6c7b36aecde9cd75042b2828/cluster/gce/manifests/etcd.manifest#L27\nETCD_NAME=\"${ETCD_NAME:-etcd-${ETCD_HOSTNAME:-$HOSTNAME}}\"\nif [ -z \"${DATA_DIRECTORY:-}\" ]; then\n  echo \"DATA_DIRECTORY variable unset - unexpected failure\""
  },
  {
    "id" : "96002344-b8bf-4199-902c-900d199f8b2b",
    "prId" : 91964,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/91964#pullrequestreview-430114397",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2bab325e-1f9b-4e50-b7d8-c1e14414df5f",
        "parentId" : null,
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "I don't understand why in etcd we set the name to simply \"$ETCD_HOSTNAME\" and here to \"etcd-$ETCD_HOSTNAME\".\r\nShouldn't those two be consistent?",
        "createdAt" : "2020-06-12T07:16:49Z",
        "updatedAt" : "2020-06-18T18:11:31Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "cd2124bc-6783-4024-81d4-a6b03e2437a2",
        "parentId" : "2bab325e-1f9b-4e50-b7d8-c1e14414df5f",
        "authorId" : "f474bb7f-c91e-4c7f-8215-aa1a0f8eb05a",
        "body" : "etcd name is set to etcd-{{ hostname }} in etcd.manifest, \r\nhttps://github.com/kubernetes/kubernetes/blob/b8f24173da300cd8aa6c8daea5d86efcd494b17e/cluster/gce/manifests/etcd.manifest#L27\r\n\r\nthen hostname is host_name set in configure_helper.sh here: https://github.com/kubernetes/kubernetes/blob/b8f24173da300cd8aa6c8daea5d86efcd494b17e/cluster/gce/gci/configure-helper.sh#L1597\r\n\r\nSo it is the same here.",
        "createdAt" : "2020-06-12T07:44:14Z",
        "updatedAt" : "2020-06-18T18:11:31Z",
        "lastEditedBy" : "f474bb7f-c91e-4c7f-8215-aa1a0f8eb05a",
        "tags" : [
        ]
      },
      {
        "id" : "b00ac18a-1c75-4f95-9623-ce6cb855fd99",
        "parentId" : "2bab325e-1f9b-4e50-b7d8-c1e14414df5f",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "OK - I get it now.\r\nThe problem is that these are not the lines that should be kept in sync. What you really care about is this line:\r\nhttps://github.com/kubernetes/kubernetes/blob/master/cluster/gce/manifests/etcd.manifest#L27",
        "createdAt" : "2020-06-12T07:59:49Z",
        "updatedAt" : "2020-06-18T18:11:31Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "6eea00ae-1f27-4f10-9230-a64e7da856c6",
        "parentId" : "2bab325e-1f9b-4e50-b7d8-c1e14414df5f",
        "authorId" : "f474bb7f-c91e-4c7f-8215-aa1a0f8eb05a",
        "body" : "Yes, that makes sense. I removed the added comment in configure-helper.sh and changed this comment here to: \"# NOTE: Make sure the resulted ETCD_NAME agrees with --name in etcd.manifest: https://github.com/kubernetes/kubernetes/blob/e7ca64fbe16d0c4b6c7b36aecde9cd75042b2828/cluster/gce/manifests/etcd.manifest#L27\". Does this look better now?",
        "createdAt" : "2020-06-13T05:06:45Z",
        "updatedAt" : "2020-06-18T18:11:31Z",
        "lastEditedBy" : "f474bb7f-c91e-4c7f-8215-aa1a0f8eb05a",
        "tags" : [
        ]
      }
    ],
    "commit" : "0da9c3e3793a53610372e5dc6cca2786865f271c",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +48,52 @@# shellcheck disable=SC2039\n# NOTE: Make sure the resulted ETCD_NAME agrees with --name in etcd.manifest: https://github.com/kubernetes/kubernetes/blob/e7ca64fbe16d0c4b6c7b36aecde9cd75042b2828/cluster/gce/manifests/etcd.manifest#L27\nETCD_NAME=\"${ETCD_NAME:-etcd-${ETCD_HOSTNAME:-$HOSTNAME}}\"\nif [ -z \"${DATA_DIRECTORY:-}\" ]; then\n  echo \"DATA_DIRECTORY variable unset - unexpected failure\""
  },
  {
    "id" : "cdf00534-7084-4752-88da-388804f259f1",
    "prId" : 91964,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/91964#pullrequestreview-430840898",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "477137cf-f5fc-4ae1-940c-772c53b1df1b",
        "parentId" : null,
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "This comment looks fine now, but please also add something similar in etcd manifest. I can imagine someone changing that in manifest file and forgetting about changing it here.",
        "createdAt" : "2020-06-15T10:06:58Z",
        "updatedAt" : "2020-06-18T18:11:31Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "4705f344-781c-4e1c-9e29-baec8dfd2999",
        "parentId" : "477137cf-f5fc-4ae1-940c-772c53b1df1b",
        "authorId" : "f474bb7f-c91e-4c7f-8215-aa1a0f8eb05a",
        "body" : "Thanks. I added a comment in etcd.manifest:)",
        "createdAt" : "2020-06-15T17:16:07Z",
        "updatedAt" : "2020-06-18T18:11:31Z",
        "lastEditedBy" : "f474bb7f-c91e-4c7f-8215-aa1a0f8eb05a",
        "tags" : [
        ]
      }
    ],
    "commit" : "0da9c3e3793a53610372e5dc6cca2786865f271c",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +47,51 @@\n# shellcheck disable=SC2039\n# NOTE: Make sure the resulted ETCD_NAME agrees with --name in etcd.manifest: https://github.com/kubernetes/kubernetes/blob/e7ca64fbe16d0c4b6c7b36aecde9cd75042b2828/cluster/gce/manifests/etcd.manifest#L27\nETCD_NAME=\"${ETCD_NAME:-etcd-${ETCD_HOSTNAME:-$HOSTNAME}}\"\nif [ -z \"${DATA_DIRECTORY:-}\" ]; then"
  },
  {
    "id" : "f9c773ed-8506-4152-8a72-34b97617f346",
    "prId" : 91925,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/91925#pullrequestreview-426816219",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "426b694d-5aa2-43b9-a095-aa5e2a2174f1",
        "parentId" : null,
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "FTR - these two lines should be kept in sync:\r\nhttps://github.com/kubernetes/kubernetes/blob/master/cluster/gce/gci/configure-helper.sh#L1597\r\n\r\n@wenjiaswe - as a follow up PR, you may want to add comments both here and there that these lines should be kept in sync",
        "createdAt" : "2020-06-09T06:14:11Z",
        "updatedAt" : "2020-06-09T06:14:12Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "d162e09a26e972e5e31431b44f0e692ef5455bc9",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +47,51 @@\n# shellcheck disable=SC2039\nETCD_NAME=\"${ETCD_NAME:-etcd-${ETCD_HOSTNAME:-$(hostname -s)}}\"\nif [ -z \"${DATA_DIRECTORY:-}\" ]; then\n  echo \"DATA_DIRECTORY variable unset - unexpected failure\""
  },
  {
    "id" : "360fa06b-cf10-4d87-b396-921d4500fbe4",
    "prId" : 61241,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/61241#pullrequestreview-105051430",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7c17654d-1898-4b60-8781-bf4661e2872d",
        "parentId" : null,
        "authorId" : "f474bb7f-c91e-4c7f-8215-aa1a0f8eb05a",
        "body" : "1. Did you miss binDir in the list? (line 49 https://github.com/kubernetes/kubernetes/pull/61241/files#diff-755f39aaeeec98fb826929445011dde0)\r\n2. Would it be better if they are in the same order as in migrateOpts struct in migrate.go? (minor)",
        "createdAt" : "2018-03-16T21:04:12Z",
        "updatedAt" : "2018-04-10T16:19:43Z",
        "lastEditedBy" : "f474bb7f-c91e-4c7f-8215-aa1a0f8eb05a",
        "tags" : [
        ]
      },
      {
        "id" : "755fd580-9b81-4aa2-9413-e0a1fb1fa7b6",
        "parentId" : "7c17654d-1898-4b60-8781-bf4661e2872d",
        "authorId" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "body" : "#1 - The default value is correct, we don't need to explicitly set it.\r\n#2 - I don't feel strongly about it.  The flags are also in a different order in the `migrate -h` output.  We did keep the relative order of all flags and env vars throughout `migrate-if-needed.sh`, which seems like the most important place to be consistent.",
        "createdAt" : "2018-03-17T06:26:00Z",
        "updatedAt" : "2018-04-10T16:19:43Z",
        "lastEditedBy" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "tags" : [
        ]
      },
      {
        "id" : "c7b72514-33e8-4b90-954c-1baeb13a6fb5",
        "parentId" : "7c17654d-1898-4b60-8781-bf4661e2872d",
        "authorId" : "f474bb7f-c91e-4c7f-8215-aa1a0f8eb05a",
        "body" : "Sounds good.",
        "createdAt" : "2018-03-19T17:01:28Z",
        "updatedAt" : "2018-04-10T16:19:43Z",
        "lastEditedBy" : "f474bb7f-c91e-4c7f-8215-aa1a0f8eb05a",
        "tags" : [
        ]
      }
    ],
    "commit" : "dc4d92e1544749a755f1ead1f8111b7279e4105e",
    "line" : 274,
    "diffHunk" : "@@ -1,1 +90,94 @@fi\n\n/usr/local/bin/migrate \\\n  --name \"${ETCD_NAME}\" \\\n  --port \"${ETCD_CLIENT_PORT}\" \\"
  },
  {
    "id" : "1155c6d4-ea07-4999-a966-51da022317a5",
    "prId" : 59298,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/59298#pullrequestreview-95343816",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7a89d965-b958-4ccd-9f03-a4b29b5b689b",
        "parentId" : null,
        "authorId" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "body" : "@wojtek-t FYI. We found this when adding tests. It looks like this wasn't getting run correctly since the `--endpoints` flag was not being set to the etcd ports `etcd_start` starts etcd on. Maybe we should adjust the logic to check for the data in all 3.x migrations and delete it if it is found to make sure any clusters that have already upgraded to 3.1 get cleaned up?",
        "createdAt" : "2018-02-05T20:57:52Z",
        "updatedAt" : "2018-02-12T23:02:28Z",
        "lastEditedBy" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "tags" : [
        ]
      },
      {
        "id" : "cc72b45d-cfc8-4a07-a40e-a8cc0c9ddfa3",
        "parentId" : "7a89d965-b958-4ccd-9f03-a4b29b5b689b",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "Makes sense. But let's do this in a separate PR.",
        "createdAt" : "2018-02-09T08:26:43Z",
        "updatedAt" : "2018-02-12T23:02:28Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "746e247e8750acb5f635132c74e0e28f2ac9dc73",
    "line" : 201,
    "diffHunk" : "@@ -1,1 +265,269 @@      exit 1\n    fi\n    ${ETCDCTL_CMD} --endpoints \"http://127.0.0.1:${ETCD_PORT}\" rm --recursive \"${ETCD_DATA_PREFIX}\"\n    # Kill etcd and wait until this is down.\n    stop_etcd"
  },
  {
    "id" : "3c2b1642-5f7e-4857-8f1d-f1274c6725e1",
    "prId" : 50088,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/50088#pullrequestreview-54270373",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bd5a42c4-33eb-4160-9bf8-16ef316f07a7",
        "parentId" : null,
        "authorId" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "body" : "Logic looks correct. Thanks for fixing.",
        "createdAt" : "2017-08-04T03:02:36Z",
        "updatedAt" : "2017-08-04T03:03:01Z",
        "lastEditedBy" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "tags" : [
        ]
      }
    ],
    "commit" : "e050e7a867a1fc1d25cb0755d270cc82effb33f4",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +154,158 @@# do the backup to allow restoring from it in case of failed upgrade.\nBACKUP_DIR=\"${DATA_DIRECTORY}/migration-backup\"\nif [ \"${CURRENT_VERSION}\" = \"2.2.1\" -a \"${CURRENT_VERSION}\" != \"${TARGET_VERSION}\" -a ! -d \"${BACKUP_DIR}\" ]; then\n  echo \"Backup etcd before starting migration\"\n  mkdir ${BACKUP_DIR}"
  },
  {
    "id" : "4468c820-1e30-4e68-a159-34b91d9c378a",
    "prId" : 36783,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/36783#pullrequestreview-8687441",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d2d64937-7668-4707-86ea-081340d5479d",
        "parentId" : null,
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "Can you please squash commits?\n",
        "createdAt" : "2016-11-15T20:18:50Z",
        "updatedAt" : "2016-11-15T23:41:58Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "fd289c2d55c830ff5c49d220ea4e14af970c0107",
    "line" : 21,
    "diffHunk" : "@@ -1,1 +156,160 @@  mkdir ${BACKUP_DIR}\n  ETCDCTL_CMD=\"/usr/local/bin/etcdctl-2.2.1\"\n  ETCDCTL_API=2 ${ETCDCTL_CMD} --debug backup --data-dir=${DATA_DIRECTORY} \\\n    --backup-dir=${BACKUP_DIR}\n  echo \"Backup done in ${BACKUP_DIR}\""
  },
  {
    "id" : "2c509c28-85d4-4c39-aa83-d23713a9b432",
    "prId" : 35503,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/35503#pullrequestreview-6010868",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "72362bfa-9b12-493d-8a5e-6c34d1e35f4c",
        "parentId" : null,
        "authorId" : "d324e241-a7f0-4ace-bda2-4174b07bdb18",
        "body" : "Can you add a comment explaining the logic here?  I think it goes like this:  by default, we skip \"start then stop etcd\" for all versions.  We don't start doing the \"start then stop etcd\" section until we're one step _past_ the current version.\n",
        "createdAt" : "2016-10-26T21:19:44Z",
        "updatedAt" : "2016-10-27T08:18:18Z",
        "lastEditedBy" : "d324e241-a7f0-4ace-bda2-4174b07bdb18",
        "tags" : [
        ]
      },
      {
        "id" : "8edcc3b1-73ee-44e5-a965-9cdbdd6cf4a0",
        "parentId" : "72362bfa-9b12-493d-8a5e-6c34d1e35f4c",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "Yes - this is exactly how you wrote added a comment.\n",
        "createdAt" : "2016-10-27T08:18:03Z",
        "updatedAt" : "2016-10-27T08:18:18Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "44e66a97f31b02ee8da8ef937b91b266c99c3fa9",
    "line" : null,
    "diffHunk" : "@@ -1,1 +142,146 @@#    v2 API, we do upgrade to v3 API using the \"etcdct migrate\" and\n#    attachlease commands.\nSKIP_STEP=true\nfor step in ${SUPPORTED_VERSIONS}; do\n  if [ \"${step}\" = \"${CURRENT_VERSION}\" ]; then"
  },
  {
    "id" : "06257a3d-01a7-4366-9b07-5fd00c697ccf",
    "prId" : 31242,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "964d4902-fb29-4b74-ad63-7aff26ec824c",
        "parentId" : null,
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : ":/\n",
        "createdAt" : "2016-08-24T17:55:57Z",
        "updatedAt" : "2016-08-26T08:28:13Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      },
      {
        "id" : "25e6a187-597d-44db-96ba-e2956b0427b7",
        "parentId" : "964d4902-fb29-4b74-ad63-7aff26ec824c",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "Do you think it's bad? Hopefully we will never use this procedure...\n",
        "createdAt" : "2016-08-24T18:13:55Z",
        "updatedAt" : "2016-08-26T08:28:13Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "793d3acd8b1e07b44c0992d15f6d6d0bd68f5a63",
    "line" : 69,
    "diffHunk" : "@@ -1,1 +99,103 @@  # TODO: Implement rollback once this will be supported.\n  echo \"etcd3 -> etcd2 downgrade is NOT supported.\"\n  # FIXME: On rollback, we will not support TTLs - we will simply clear\n  # all events.\nfi"
  },
  {
    "id" : "5c7ab2db-b21a-45d5-8a3a-0a8dc1cf79c3",
    "prId" : 31242,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ef4e6021-c641-472c-a31c-7915c5864731",
        "parentId" : null,
        "authorId" : "bfb79ad4-fd09-4cf7-b758-78cd6a883689",
        "body" : "127.0.01 ? \n",
        "createdAt" : "2016-09-08T19:28:08Z",
        "updatedAt" : "2016-09-08T19:28:08Z",
        "lastEditedBy" : "bfb79ad4-fd09-4cf7-b758-78cd6a883689",
        "tags" : [
        ]
      },
      {
        "id" : "bd479e58-6637-4934-a2b0-6ec748dc5af4",
        "parentId" : "ef4e6021-c641-472c-a31c-7915c5864731",
        "authorId" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "body" : "right. can you send a pr to fix this? Thank you!\n",
        "createdAt" : "2016-09-08T19:29:42Z",
        "updatedAt" : "2016-09-08T19:29:42Z",
        "lastEditedBy" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "tags" : [
        ]
      }
    ],
    "commit" : "793d3acd8b1e07b44c0992d15f6d6d0bd68f5a63",
    "line" : 20,
    "diffHunk" : "@@ -1,1 +51,55 @@    --advertise-client-urls http://127.0.0.1:${ETCD_PORT} \\\n    --listen-peer-urls http://127.0.0.1:${ETCD_PEER_PORT} \\\n    --initial-advertise-peer-urls http://127.0.01:${ETCD_PEER_PORT} \\\n    1>>/dev/null 2>&1 &\n  ETCD_PID=$!"
  },
  {
    "id" : "d0ac8ccf-b1d0-4129-8408-7a4895d1ba13",
    "prId" : 30500,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b50cf64a-1df8-40da-93a8-83de45d62062",
        "parentId" : null,
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "I don't think it's useful to check this in until we figure this step out, since we want to first push a container that can do a rollback, and then after a minor release switch to a container that will do a roll-forward.\n",
        "createdAt" : "2016-08-12T18:21:17Z",
        "updatedAt" : "2016-08-18T06:31:47Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      },
      {
        "id" : "e5628aa6-7bb0-4c74-a1ec-6fad79c12aaf",
        "parentId" : "b50cf64a-1df8-40da-93a8-83de45d62062",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "I think it's useful, because it will allow us to at least start some real upgrade testing.\n",
        "createdAt" : "2016-08-12T18:43:16Z",
        "updatedAt" : "2016-08-18T06:31:47Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "2b5046d6-7338-4c7b-8111-fcda0df5f9cc",
        "parentId" : "b50cf64a-1df8-40da-93a8-83de45d62062",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "As I said, i think there is huge value in merging it asap, since this will allow:\n- testing this in a more organized style\n- unblock changes for backups in GKE\n- probably a bunch of others that I'm currently missing\n",
        "createdAt" : "2016-08-16T12:02:04Z",
        "updatedAt" : "2016-08-18T06:31:47Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "f3c32673ec0d549c0b03286bf776c0338acf9087",
    "line" : 58,
    "diffHunk" : "@@ -1,1 +56,60 @@\nif [ \"${CURRENT_STORAGE}\" = \"etcd3\" -a \"${TARGET_STORAGE}\" = \"etcd2\" ]; then\n  echo \"Performing etcd3 -> etcd2 migration\"\n  # TODO: Implement rollback once this will be supported.\n  echo \"etcd3 -> etcd2 downgrade is NOT supported.\""
  },
  {
    "id" : "137c6589-55fe-4ebf-9ee0-8e6217378559",
    "prId" : 30500,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "16f59859-f03f-484d-b3bf-7191b8093b6b",
        "parentId" : null,
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "I think we can and should unit test this, by starting etcd2/3, writing something, stopping it, run the script, then start etcd3/2 and verify the written thing is there.\n",
        "createdAt" : "2016-08-12T18:22:22Z",
        "updatedAt" : "2016-08-18T06:31:47Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      },
      {
        "id" : "c33a961a-d37c-45e0-b488-7b0342326931",
        "parentId" : "16f59859-f03f-484d-b3bf-7191b8093b6b",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "I added test for etcd2 -. etcd3 migration (by extending the existing test-update-objects test).\nThis should be good enough starting point.\n\n[Rollback is not supported yet, so there is obviously no test for it.]\n",
        "createdAt" : "2016-08-16T12:00:23Z",
        "updatedAt" : "2016-08-18T06:31:47Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "f3c32673ec0d549c0b03286bf776c0338acf9087",
    "line" : 1,
    "diffHunk" : "@@ -1,1 +-1,3 @@#!/bin/sh\n\n# Copyright 2016 The Kubernetes Authors."
  }
]