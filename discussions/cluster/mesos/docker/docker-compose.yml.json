[
  {
    "id" : "eba61f1b-c176-42b9-8c73-28fe627b7afe",
    "prId" : 19241,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7c839517-d0de-4eba-a8bd-985e0dc8b0a7",
        "parentId" : null,
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "Having the keygen container here and in utils.sh feels strange.\n",
        "createdAt" : "2016-01-05T08:46:28Z",
        "updatedAt" : "2016-01-06T02:10:57Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "180c9d40-7c9b-4177-b260-bd98d6ad2a58",
        "parentId" : "7c839517-d0de-4eba-a8bd-985e0dc8b0a7",
        "authorId" : "ef33f76a-ca59-4720-94a5-47e86994ee8d",
        "body" : "There are three different keygen calls: \n1. service-account key\n2. root certificate authority\n3. apiserver certificate\n\nThe first two can be done beforehand, but the apiserver cert requires knowledge of the IP that the API server is running on. In this case we pass the hostname `apiserver` into the keygen script and it does a `resolveip apiserver` to get the IP. Using docker's linking, dependency ordering, and shared volumes was the easiest solution.\n\nI'm open to suggestions if you can think of an easier way.\n",
        "createdAt" : "2016-01-05T18:00:35Z",
        "updatedAt" : "2016-01-06T02:10:57Z",
        "lastEditedBy" : "ef33f76a-ca59-4720-94a5-47e86994ee8d",
        "tags" : [
        ]
      },
      {
        "id" : "ee8afc7a-8082-44c5-b705-3a68f514253b",
        "parentId" : "7c839517-d0de-4eba-a8bd-985e0dc8b0a7",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "About the different keygen calls: we had the discussion before I think. Let's leave it like it is. Not worth the effort to change it now.\n",
        "createdAt" : "2016-01-05T18:22:14Z",
        "updatedAt" : "2016-01-06T02:10:57Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      }
    ],
    "commit" : "36f216179f6b9c6e678bdb909d34c169b4e7cded",
    "line" : 52,
    "diffHunk" : "@@ -1,1 +158,162 @@  - ./static-pod.json:/opt/static-pods/static-pod.json\nkeygen:\n  image: mesosphere/kubernetes-keygen:v1.0.0\n  command:\n  - certgen"
  },
  {
    "id" : "20165de5-bd1d-433d-839d-90507aeab24b",
    "prId" : 18348,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4a2c144a-4d2c-41b9-9db9-fdba2e6265aa",
        "parentId" : null,
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "We still have ports here.\n",
        "createdAt" : "2015-12-09T12:14:53Z",
        "updatedAt" : "2015-12-14T14:37:51Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "98636149-3ee1-434b-8a41-e7884e57ba63",
        "parentId" : "4a2c144a-4d2c-41b9-9db9-fdba2e6265aa",
        "authorId" : "39a87e74-3afd-4203-9f90-c761ddc10ff7",
        "body" : "clarified above\n",
        "createdAt" : "2015-12-09T12:33:50Z",
        "updatedAt" : "2015-12-14T14:37:51Z",
        "lastEditedBy" : "39a87e74-3afd-4203-9f90-c761ddc10ff7",
        "tags" : [
        ]
      }
    ],
    "commit" : "67e98fcfa832a0ca8eefe4254e20396a40dc0113",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +39,43 @@    NAME=$$(cut -f2 -d/ <<<$${MESOSMASTER1_NAME}) &&\n    N=$${NAME##*_} &&\n    PUBLIC_RESOURCES=\"$$(if [ $${N} = 2 ]; then echo \";cpus(public):2;mem(public):640;ports(public):[7000-7999]\"; fi)\" &&\n    DOCKER_NETWORK_OFFSET=0.0.$${N}.0\n    exec wrapdocker mesos-slave"
  },
  {
    "id" : "2c715d55-da1e-4223-a66a-e387af053e68",
    "prId" : 15777,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "95842b86-77e1-40db-b2ed-13b9bc156ba8",
        "parentId" : null,
        "authorId" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "body" : "is this a leftover from testing, or required to allow remote exec?\n",
        "createdAt" : "2015-10-19T15:07:21Z",
        "updatedAt" : "2015-11-17T19:49:28Z",
        "lastEditedBy" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "tags" : [
        ]
      },
      {
        "id" : "88bbc27c-0f66-4542-a28c-74b5c8b683c3",
        "parentId" : "95842b86-77e1-40db-b2ed-13b9bc156ba8",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "This is default in upstream now. There are even e2e tests for this (which are fixed in this PR).\n",
        "createdAt" : "2015-10-19T15:30:35Z",
        "updatedAt" : "2015-11-17T19:49:28Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "ca1f3b6d-7686-46e0-825e-5052df85bf7e",
        "parentId" : "95842b86-77e1-40db-b2ed-13b9bc156ba8",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "To answer your specific question: it's not needed for remote exec, only for the PrivilegePod e2e tests.\n",
        "createdAt" : "2015-10-19T15:36:36Z",
        "updatedAt" : "2015-11-17T19:49:28Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      }
    ],
    "commit" : "2d6c2eb8976db71f5fe8a2afc1dc365efd8fdd39",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +87,91 @@    --cloud-provider=mesos\n    --cloud-config=/opt/mesos-cloud.conf\n    --allow-privileged\n    --tls-cert-file=/var/run/kubernetes/auth/apiserver.crt\n    --tls-private-key-file=/var/run/kubernetes/auth/apiserver.key"
  },
  {
    "id" : "7f44da15-ff22-46fb-a149-1d76724e1ca2",
    "prId" : 15777,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5cc2b39b-8ffe-4381-b3bc-26b2f7ab13f9",
        "parentId" : null,
        "authorId" : "0970b119-085d-41b4-8f33-e10409965eba",
        "body" : "Please squash all commits\n",
        "createdAt" : "2015-11-17T19:34:58Z",
        "updatedAt" : "2015-11-17T19:49:28Z",
        "lastEditedBy" : "0970b119-085d-41b4-8f33-e10409965eba",
        "tags" : [
        ]
      }
    ],
    "commit" : "2d6c2eb8976db71f5fe8a2afc1dc365efd8fdd39",
    "line" : 1,
    "diffHunk" : "@@ -1,1 +84,88 @@    --service-account-key-file=/var/run/kubernetes/auth/service-accounts.key\n    --service-cluster-ip-range=10.10.10.0/24\n    --service-node-port-range=30000-32767\n    --cloud-provider=mesos\n    --cloud-config=/opt/mesos-cloud.conf"
  },
  {
    "id" : "953a96ed-3d7f-4422-a689-33bf710e0e67",
    "prId" : 15735,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "505dee0a-3f47-48d5-a912-033dfeff2535",
        "parentId" : null,
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "Do you know really need these port forwarding? Elsewhere we depend on proper routes to the container IPs.\n",
        "createdAt" : "2015-10-16T05:39:33Z",
        "updatedAt" : "2015-10-16T14:16:35Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "90e8a146-4bba-4b7c-a2c5-4015bfa579fa",
        "parentId" : "505dee0a-3f47-48d5-a912-033dfeff2535",
        "authorId" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "body" : "I exposed these so that I could curl the /debug/pprof/... endpoints. Docker\npublishes these ports for me, but they're actually a bit flakey when I try\nto access them via curl from the host. Thoughts? I'm probably not\nunderstanding all of the network magic here.\n\nOn Fri, Oct 16, 2015 at 1:40 AM, Dr. Stefan Schimanski <\nnotifications@github.com> wrote:\n\n> In cluster/mesos/docker/docker-compose.yml\n> https://github.com/kubernetes/kubernetes/pull/15735#discussion_r42210107\n> :\n> \n> > @@ -30,6 +30,7 @@ mesosslave:\n> >    hostname: mesosslave\n> >    privileged: true\n> >    image: mesosphere/mesos-slave-dind:mesos-0.24.0_dind-0.2_docker-1.8.2_ubuntu-14.04.3\n> > -  ports: [ \"10248\",\"10249\" ]\n> \n> Do you know really need these port forwarding? Elsewhere we depend on\n> proper routes to the container IPs.\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/kubernetes/kubernetes/pull/15735/files#r42210107.\n",
        "createdAt" : "2015-10-16T08:08:14Z",
        "updatedAt" : "2015-10-16T14:16:35Z",
        "lastEditedBy" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "tags" : [
        ]
      },
      {
        "id" : "f99f0c20-8431-4bd4-8210-49ce4e7a728f",
        "parentId" : "505dee0a-3f47-48d5-a912-033dfeff2535",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "They are only iptable port forwarding. Never had an issue with those.\n",
        "createdAt" : "2015-10-16T08:36:59Z",
        "updatedAt" : "2015-10-16T14:16:35Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      }
    ],
    "commit" : "cbc6c64157a8c729d4c152b10fc51f814261837e",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +31,35 @@  privileged: true\n  image: mesosphere/mesos-slave-dind:mesos-0.24.0_dind-0.2_docker-1.8.2_ubuntu-14.04.3\n  ports: [ \"10248\",\"10249\" ]\n  entrypoint:\n  - bash"
  },
  {
    "id" : "62d1ff8d-dce3-4030-8b09-496ba2dfaaba",
    "prId" : 15735,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2e79d540-3d83-4cc7-8c5e-801e1582c5eb",
        "parentId" : null,
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "Are there any side effects?\n",
        "createdAt" : "2015-10-16T08:37:54Z",
        "updatedAt" : "2015-10-16T14:16:35Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "383ad867-0202-4e5e-af6d-18b6199f3d2d",
        "parentId" : "2e79d540-3d83-4cc7-8c5e-801e1582c5eb",
        "authorId" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "body" : "side effect is that the debugging handler API's are enabled for the kubelet\n(this allows, for example, /debug/pprof/... to function)\n\nOn Fri, Oct 16, 2015 at 4:38 AM, Dr. Stefan Schimanski <\nnotifications@github.com> wrote:\n\n> In cluster/mesos/docker/docker-compose.yml\n> https://github.com/kubernetes/kubernetes/pull/15735#discussion_r42220142\n> :\n> \n> > @@ -147,6 +148,7 @@ scheduler:\n> >      --cluster-domain=cluster.local\n> >      --mesos-executor-cpus=1.0\n> >      --v=4\n> > -    --profiling=true\n> \n> Are there any side effects?\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/kubernetes/kubernetes/pull/15735/files#r42220142.\n",
        "createdAt" : "2015-10-16T13:52:12Z",
        "updatedAt" : "2015-10-16T14:16:35Z",
        "lastEditedBy" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "tags" : [
        ]
      }
    ],
    "commit" : "cbc6c64157a8c729d4c152b10fc51f814261837e",
    "line" : null,
    "diffHunk" : "@@ -1,1 +150,154 @@    --v=4\n    --executor-logv=4\n    --profiling=true\n  environment:\n  - MESOS_DOCKER_ETCD_TIMEOUT"
  },
  {
    "id" : "b62b76f2-1ff1-41fe-93a2-92f1f144b520",
    "prId" : 14553,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "50bd4085-a93a-4221-a0a9-1db7a5f4a51d",
        "parentId" : null,
        "authorId" : "ef33f76a-ca59-4720-94a5-47e86994ee8d",
        "body" : "nice! glad it's this easy.\n",
        "createdAt" : "2015-09-29T17:01:07Z",
        "updatedAt" : "2015-10-01T04:50:13Z",
        "lastEditedBy" : "ef33f76a-ca59-4720-94a5-47e86994ee8d",
        "tags" : [
        ]
      },
      {
        "id" : "5cec3f4b-6900-4f66-8b39-49e8b974076f",
        "parentId" : "50bd4085-a93a-4221-a0a9-1db7a5f4a51d",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "yeah, plus the few upstream fixes. but luckily it just works (tm) then.\n",
        "createdAt" : "2015-09-29T17:04:32Z",
        "updatedAt" : "2015-10-01T04:50:13Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      }
    ],
    "commit" : "74e57e85f15e94d404f36e67a0d6dcfca1b14a63",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +86,90 @@    --tls-cert-file=/var/run/kubernetes/auth/apiserver.crt\n    --tls-private-key-file=/var/run/kubernetes/auth/apiserver.key\n    --runtime-config=experimental/v1alpha1\n    --v=4\n  ports: [ \"8888:8888\", \"6443:6443\" ]"
  },
  {
    "id" : "aee6d85b-454d-49a1-b55a-aeb6543957f1",
    "prId" : 14060,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "206a6e35-0ed3-448b-b6a8-31c703b415ab",
        "parentId" : null,
        "authorId" : "ef33f76a-ca59-4720-94a5-47e86994ee8d",
        "body" : "does this work if N starts with zero?\n",
        "createdAt" : "2015-09-17T16:28:08Z",
        "updatedAt" : "2015-09-18T09:34:34Z",
        "lastEditedBy" : "ef33f76a-ca59-4720-94a5-47e86994ee8d",
        "tags" : [
        ]
      },
      {
        "id" : "d30ddadd-64ea-4635-8229-4bffc2b75d20",
        "parentId" : "206a6e35-0ed3-448b-b6a8-31c703b415ab",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "it doesn't. it's the number of the docker-compose scale instance.\n",
        "createdAt" : "2015-09-17T16:46:21Z",
        "updatedAt" : "2015-09-18T09:34:34Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      }
    ],
    "commit" : "df997e2bb9837d41d00b696095febc7afd2225b9",
    "line" : null,
    "diffHunk" : "@@ -1,1 +37,41 @@    NAME=$(cut -f2 -d/ <<<$MESOSMASTER1_NAME) &&\n    N=${NAME##*_} &&\n    DOCKER_NETWORK_OFFSET=0.0.$N.0\n    exec wrapdocker mesos-slave\n    --work_dir=\"/var/tmp/mesos/$N\""
  },
  {
    "id" : "d58e28a5-c920-44d3-9924-ac7c5906a95b",
    "prId" : 14060,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d25957a9-6cf9-4abf-8ce8-da5f076e5e5a",
        "parentId" : null,
        "authorId" : "ef33f76a-ca59-4720-94a5-47e86994ee8d",
        "body" : "are these just labels so we can pass an e2e test or is there some semantic meaning to them?\n",
        "createdAt" : "2015-09-17T16:29:13Z",
        "updatedAt" : "2015-09-18T09:34:34Z",
        "lastEditedBy" : "ef33f76a-ca59-4720-94a5-47e86994ee8d",
        "tags" : [
        ]
      },
      {
        "id" : "c8e1df86-3040-4497-883b-67a908e7a6af",
        "parentId" : "d25957a9-6cf9-4abf-8ce8-da5f076e5e5a",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "just labels which are (will be) used in e2e tests.\n",
        "createdAt" : "2015-09-17T16:46:02Z",
        "updatedAt" : "2015-09-18T09:34:34Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "03ceef39-0048-462b-80bc-6a6fa68231f8",
        "parentId" : "d25957a9-6cf9-4abf-8ce8-da5f076e5e5a",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "In fact, our own e2e test in mesos.go.\n",
        "createdAt" : "2015-09-17T16:50:00Z",
        "updatedAt" : "2015-09-18T09:34:34Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      }
    ],
    "commit" : "df997e2bb9837d41d00b696095febc7afd2225b9",
    "line" : null,
    "diffHunk" : "@@ -1,1 +40,44 @@    exec wrapdocker mesos-slave\n    --work_dir=\"/var/tmp/mesos/$N\"\n    --attributes=rack:$N\\\\;gen:201$N\n    --hostname=$(getent hosts mesosslave | cut -d' ' -f1 | sort -u | tail -1)\n  command: ~"
  }
]