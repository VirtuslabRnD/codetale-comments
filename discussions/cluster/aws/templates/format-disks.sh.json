[
  {
    "id" : "c9bae8a6-0317-441f-81cd-69f0a00b7040",
    "prId" : 21164,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9ff5fb8e-bbae-4074-991e-c156fe3d6141",
        "parentId" : null,
        "authorId" : "d0e97b49-eba2-4b22-8695-df4f8a6776ad",
        "body" : "Is there a race here?  How can that directory ever exist, we just moved it away above on 193\n",
        "createdAt" : "2016-02-17T14:37:54Z",
        "updatedAt" : "2016-02-17T14:57:51Z",
        "lastEditedBy" : "d0e97b49-eba2-4b22-8695-df4f8a6776ad",
        "tags" : [
        ]
      },
      {
        "id" : "fe381867-8413-490a-aba4-e022a272276f",
        "parentId" : "9ff5fb8e-bbae-4074-991e-c156fe3d6141",
        "authorId" : "8fc8f958-3c0e-47dd-a0fb-b8cc483b4efb",
        "body" : "Yeah, messy... I'll add a comment to explain.\n\nWe want `/var/lib/docker` to be a symlink to `/mnt/ephemeral/docker`.  Line 193 only fires if it is a directory (`-d`).  If you stop and start your instance, that corrupts /mnt/ephemeral (ephemeral disks) but the root volume is usually persisted (if on EBS).\n\nSo the problem we're solving here is that /var/lib/docker may already be a symlink to /mnt/ephemeral/docker, but /mnt/ephemeral may have been wiped.\n",
        "createdAt" : "2016-02-17T14:55:12Z",
        "updatedAt" : "2016-02-17T14:57:51Z",
        "lastEditedBy" : "8fc8f958-3c0e-47dd-a0fb-b8cc483b4efb",
        "tags" : [
        ]
      }
    ],
    "commit" : "c68c019150e0f0533df56954f31ed190cc590fc0",
    "line" : null,
    "diffHunk" : "@@ -1,1 +197,201 @@  # If /var/lib/docker doesn't exist (it will exist if it is already a symlink),\n  # then symlink it to the ephemeral docker area\n  if [[ ! -e /var/lib/docker ]]; then\n    ln -s ${move_docker}/docker /var/lib/docker\n  fi"
  },
  {
    "id" : "598d76e4-ff53-48f9-8f00-93b9a1b1decb",
    "prId" : 21164,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "82416fa2-690d-4505-b1a1-346524b70769",
        "parentId" : null,
        "authorId" : "d0e97b49-eba2-4b22-8695-df4f8a6776ad",
        "body" : "as above wrt to how this directory can exist given that we must moved it.\n",
        "createdAt" : "2016-02-17T14:38:18Z",
        "updatedAt" : "2016-02-17T14:57:51Z",
        "lastEditedBy" : "d0e97b49-eba2-4b22-8695-df4f8a6776ad",
        "tags" : [
        ]
      }
    ],
    "commit" : "c68c019150e0f0533df56954f31ed190cc590fc0",
    "line" : null,
    "diffHunk" : "@@ -1,1 +213,217 @@  mkdir -p ${move_kubelet}/kubelet\n  # Create symlink for /var/lib/kubelet, unless it is already a symlink\n  if [[ ! -e /var/lib/kubelet ]]; then\n    ln -s ${move_kubelet}/kubelet /var/lib/kubelet\n  fi"
  },
  {
    "id" : "4858b51f-1630-4360-aa6f-df10eb955e8c",
    "prId" : 16303,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e584a1c5-3f5b-4b85-bd63-52852b79e50b",
        "parentId" : null,
        "authorId" : "8fc8f958-3c0e-47dd-a0fb-b8cc483b4efb",
        "body" : "Maybe also write:\n\n`We used to do thin provisioning, but this caused problems such as #16188.\nNo need for thin pool since we ....`\n",
        "createdAt" : "2015-10-27T14:54:05Z",
        "updatedAt" : "2015-10-27T16:18:33Z",
        "lastEditedBy" : "8fc8f958-3c0e-47dd-a0fb-b8cc483b4efb",
        "tags" : [
        ]
      }
    ],
    "commit" : "8f5a2deada27bad2fc8b01a81c1a3597a7dead70",
    "line" : null,
    "diffHunk" : "@@ -1,1 +140,144 @@      # to fill up small volumes.\n      #\n      # No need for thin pool since we are not over-provisioning or doing snapshots\n      # (probably shouldn't be doing snapshots on ephemeral disk? Should be stateless-ish.)\n      # Tried to do it, but it cause problems (#16188)"
  }
]