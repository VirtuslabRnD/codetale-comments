[
  {
    "id" : "12f61258-e15b-4568-9bff-a32edbd8c4d5",
    "prId" : 90421,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/90421#pullrequestreview-401336684",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "34efa825-c570-420a-9c0a-f21337b227c6",
        "parentId" : null,
        "authorId" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "body" : "did you check that these have the same search paths etc?",
        "createdAt" : "2020-04-24T05:54:47Z",
        "updatedAt" : "2020-04-27T21:27:44Z",
        "lastEditedBy" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "tags" : [
        ]
      },
      {
        "id" : "c9b7c71f-ba0c-45dd-9f62-9717f4af005a",
        "parentId" : "34efa825-c570-420a-9c0a-f21337b227c6",
        "authorId" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "body" : "the logic looks the same.\r\n`::find-binary`:\r\nhttps://github.com/kubernetes/kubernetes/blob/master/hack/lib/util.sh#L147-L221\r\n`clientbin.sh`:\r\nhttps://github.com/kubernetes/kubernetes/blob/master/cluster/clientbin.sh#L23-L96\r\n\r\nEDIT: minus this patch which seems needed: https://github.com/kubernetes/kubernetes/commit/924fd3b058d86b84b6c4fe4c94a4c652478ae8f4\r\n",
        "createdAt" : "2020-04-24T13:00:30Z",
        "updatedAt" : "2020-04-27T21:27:44Z",
        "lastEditedBy" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "tags" : [
        ]
      },
      {
        "id" : "eeac48ce-6826-4ba4-b2b8-f5822319d883",
        "parentId" : "34efa825-c570-420a-9c0a-f21337b227c6",
        "authorId" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "body" : "ack",
        "createdAt" : "2020-04-27T21:22:43Z",
        "updatedAt" : "2020-04-27T21:27:44Z",
        "lastEditedBy" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "tags" : [
        ]
      }
    ],
    "commit" : "b4bbf0a69fc7b90ba20159ad2d94d842ff3f5562",
    "line" : 11,
    "diffHunk" : "@@ -1,1 +38,42 @@# to find the latest one.\nif [[ -z \"${KUBECTL_PATH:-}\" ]]; then\n  kubectl=$( kube::util::find-binary \"kubectl\" )\n\n  if [[ ! -x \"$kubectl\" ]]; then"
  },
  {
    "id" : "13ef2ae8-2e97-4fd2-9268-23c2b595dc2b",
    "prId" : 90421,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/90421#pullrequestreview-401340228",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "73000b87-d012-4c3f-b33c-0f15c8a947e8",
        "parentId" : null,
        "authorId" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "body" : "maybe inline the previous error message to match?",
        "createdAt" : "2020-04-24T05:55:20Z",
        "updatedAt" : "2020-04-27T21:27:44Z",
        "lastEditedBy" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "tags" : [
        ]
      },
      {
        "id" : "40c26e41-e8a1-4285-ac30-32992ca68e97",
        "parentId" : "73000b87-d012-4c3f-b33c-0f15c8a947e8",
        "authorId" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "body" : "this is the old message:\r\nhttps://github.com/kubernetes/kubernetes/blob/master/cluster/clientbin.sh#L98-L109\r\n\r\nshould the whole message be added?\r\n",
        "createdAt" : "2020-04-24T13:01:17Z",
        "updatedAt" : "2020-04-27T21:27:44Z",
        "lastEditedBy" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "tags" : [
        ]
      },
      {
        "id" : "e6f13b4c-0565-40a9-9170-2ae57677573d",
        "parentId" : "73000b87-d012-4c3f-b33c-0f15c8a947e8",
        "authorId" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "body" : "I feel like we should continue printing the whole / same message",
        "createdAt" : "2020-04-27T21:22:59Z",
        "updatedAt" : "2020-04-27T21:27:44Z",
        "lastEditedBy" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "tags" : [
        ]
      },
      {
        "id" : "7e9da824-fa9c-4e68-82ae-21acf4123222",
        "parentId" : "73000b87-d012-4c3f-b33c-0f15c8a947e8",
        "authorId" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "body" : "updated.",
        "createdAt" : "2020-04-27T21:28:22Z",
        "updatedAt" : "2020-04-27T21:28:23Z",
        "lastEditedBy" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "tags" : [
        ]
      }
    ],
    "commit" : "b4bbf0a69fc7b90ba20159ad2d94d842ff3f5562",
    "line" : 16,
    "diffHunk" : "@@ -1,1 +42,46 @@  if [[ ! -x \"$kubectl\" ]]; then\n    {\n      echo \"It looks as if you don't have a compiled kubectl binary\"\n      echo\n      echo \"If you are running from a clone of the git repo, please run\""
  },
  {
    "id" : "ef29a868-e896-4e22-8ab4-236e02c36b66",
    "prId" : 9342,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4177c17e-59bf-412a-b321-97cfe60421eb",
        "parentId" : null,
        "authorId" : "93813fe6-e4d5-4e8b-a9be-6e2ce59eb8aa",
        "body" : "Looks like kubectl.sh, in addition to looking for the kubectl binary, also sets --context for GKE and --server for ubuntu. Do we want to warn about this as well or is this no longer necessary?\n\nIf it's still necessary and that particular wrapper is needed, maybe we can have a separate script or somehow bake this into the providers (or just warn).\n",
        "createdAt" : "2015-06-05T22:08:56Z",
        "updatedAt" : "2015-06-09T20:36:08Z",
        "lastEditedBy" : "93813fe6-e4d5-4e8b-a9be-6e2ce59eb8aa",
        "tags" : [
        ]
      },
      {
        "id" : "7b77f7f0-5176-48fe-9480-842dd67ea136",
        "parentId" : "4177c17e-59bf-412a-b321-97cfe60421eb",
        "authorId" : "d0e97b49-eba2-4b22-8695-df4f8a6776ad",
        "body" : "I don't see the `--context` bits for GKE, for ubuntu, the `--server` flag is mostly deprecated in favor of kubectl contexts, so I think that it's ok to just drop these.  People should have the appropriate context files in `.kube/config`\n",
        "createdAt" : "2015-06-09T05:10:00Z",
        "updatedAt" : "2015-06-09T20:36:08Z",
        "lastEditedBy" : "d0e97b49-eba2-4b22-8695-df4f8a6776ad",
        "tags" : [
        ]
      },
      {
        "id" : "11f8266a-51e0-4480-85b0-ca9aa97b168b",
        "parentId" : "4177c17e-59bf-412a-b321-97cfe60421eb",
        "authorId" : "d0e97b49-eba2-4b22-8695-df4f8a6776ad",
        "body" : "I also added to the deprecation note pointing people at `kubectl help config`\n",
        "createdAt" : "2015-06-09T05:13:04Z",
        "updatedAt" : "2015-06-09T20:36:08Z",
        "lastEditedBy" : "d0e97b49-eba2-4b22-8695-df4f8a6776ad",
        "tags" : [
        ]
      },
      {
        "id" : "931192f1-4586-46bf-95e0-df7f64da9dee",
        "parentId" : "4177c17e-59bf-412a-b321-97cfe60421eb",
        "authorId" : "93813fe6-e4d5-4e8b-a9be-6e2ce59eb8aa",
        "body" : "Looks good.\n",
        "createdAt" : "2015-06-09T15:57:22Z",
        "updatedAt" : "2015-06-09T20:36:08Z",
        "lastEditedBy" : "93813fe6-e4d5-4e8b-a9be-6e2ce59eb8aa",
        "tags" : [
        ]
      },
      {
        "id" : "40b22e1c-cb99-47f0-abc4-ec332fd5becb",
        "parentId" : "4177c17e-59bf-412a-b321-97cfe60421eb",
        "authorId" : "8076e56f-768c-4f89-90e6-045ef34e1525",
        "body" : "fyi: #9227 removes the handling for GKE, ubuntu.\n",
        "createdAt" : "2015-06-10T01:43:02Z",
        "updatedAt" : "2015-06-10T01:43:02Z",
        "lastEditedBy" : "8076e56f-768c-4f89-90e6-045ef34e1525",
        "tags" : [
        ]
      }
    ],
    "commit" : "9e198a6ed9ecd40860fa219be9ad95f5af94ce38",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +23,27 @@echo \"kubectl.sh is deprecated and will be removed soon.\"\necho \"please replace all usage with calls to the kubectl\"\necho \"binary and ensure that it is in your PATH.\" \necho \"\"\necho \"Please see 'kubectl help config' for more details\""
  },
  {
    "id" : "c3c9f3c6-2a77-4223-8e57-bee21a721978",
    "prId" : 4468,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d0878e7d-0f54-4d3a-b45a-0148104c0c0a",
        "parentId" : null,
        "authorId" : "fa477146-9a47-4754-b38c-de8062e65e13",
        "body" : "Can you add another echo to give a copy/paste command for setting $KUBECONFIG for debugging? \n\n`echo \"[INFO] To debug: export KUBECONFIG=$HOME/.kubernetes_vagrant_kubeconfig\"`\n",
        "createdAt" : "2015-02-17T13:19:01Z",
        "updatedAt" : "2015-02-17T13:19:01Z",
        "lastEditedBy" : "fa477146-9a47-4754-b38c-de8062e65e13",
        "tags" : [
        ]
      }
    ],
    "commit" : "a0cb252d400ecca8168055754225256085fe2a1a",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +120,124 @@fi\n\necho \"current-context: \\\"$(${kubectl} \"${config[@]:+${config[@]}}\" config view -o template --template='{{index . \"current-context\"}}')\\\"\" >&2\n\necho \"Running:\" \"${kubectl}\" \"${config[@]:+${config[@]}}\" \"${@+$@}\" >&2"
  },
  {
    "id" : "bd1ab422-162f-47cb-b9ad-31a41ec9c3e4",
    "prId" : 4401,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a14308d7-f9b5-405e-b0f0-53d6307a7dab",
        "parentId" : null,
        "authorId" : "8076e56f-768c-4f89-90e6-045ef34e1525",
        "body" : "The output is an empty string if the user has no current-context. Still,\n\n```\ncurrent-context: \n```\n\nis potentially ambiguous output, so changed to enclose the current-context in quotes. Output is now\n\n```\n// if user has current-context=my-context\ncurrent-context: \"my-context\"\n\n// if user has empty current-context\ncurrent-context: \"\"\n```\n",
        "createdAt" : "2015-02-13T00:18:37Z",
        "updatedAt" : "2015-02-13T00:31:50Z",
        "lastEditedBy" : "8076e56f-768c-4f89-90e6-045ef34e1525",
        "tags" : [
        ]
      },
      {
        "id" : "c73b19a2-108d-4e82-b1b6-09ea6acec26a",
        "parentId" : "a14308d7-f9b5-405e-b0f0-53d6307a7dab",
        "authorId" : "020e031c-c298-4e7e-a533-9a04439c203c",
        "body" : "I meant that if \".\" is nil you can't index it.\n",
        "createdAt" : "2015-02-13T00:20:38Z",
        "updatedAt" : "2015-02-13T00:31:50Z",
        "lastEditedBy" : "020e031c-c298-4e7e-a533-9a04439c203c",
        "tags" : [
        ]
      },
      {
        "id" : "aa21a432-5ce1-41df-be92-968b94c57a51",
        "parentId" : "a14308d7-f9b5-405e-b0f0-53d6307a7dab",
        "authorId" : "8076e56f-768c-4f89-90e6-045ef34e1525",
        "body" : "I don't think dot ever can be nil, unless kubectl is very, very broken. Even if no kubeconfig file exists, it still creates an internal clientconfig, which is dot refers to.\n",
        "createdAt" : "2015-02-13T00:34:56Z",
        "updatedAt" : "2015-02-13T00:35:14Z",
        "lastEditedBy" : "8076e56f-768c-4f89-90e6-045ef34e1525",
        "tags" : [
        ]
      }
    ],
    "commit" : "61cc821506af2de05c2c902960dd64b9cca16188",
    "line" : 32,
    "diffHunk" : "@@ -1,1 +121,125 @@fi\n\necho \"current-context: \\\"$(${kubectl} config view -o template --template='{{index . \"current-context\"}}')\\\"\"\n\necho \"Running:\" \"${kubectl}\" \"${config[@]:+${config[@]}}\" \"${@+$@}\" >&2"
  },
  {
    "id" : "b50d52d8-b4d1-4811-a1d9-b92a05a57cdf",
    "prId" : 3092,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "052a0234-8dfc-443d-a36d-dab2329fbb81",
        "parentId" : null,
        "authorId" : "e7e1d709-e9c3-47a5-91f2-ed86958679e2",
        "body" : "nit: function comment?\n",
        "createdAt" : "2014-12-22T17:58:50Z",
        "updatedAt" : "2014-12-22T18:14:50Z",
        "lastEditedBy" : "e7e1d709-e9c3-47a5-91f2-ed86958679e2",
        "tags" : [
        ]
      }
    ],
    "commit" : "e71798df3f13f95a1ee4b2773ba9f0315fff1145",
    "line" : null,
    "diffHunk" : "@@ -1,1 +25,29 @@# Get the absolute path of the directory component of a file, i.e. the\n# absolute path of the dirname of $1.\nget_absolute_dirname() {\n  echo \"$(cd \"$(dirname \"$1\")\" && pwd)\"\n}"
  },
  {
    "id" : "fd6a8f60-6b57-485a-b552-840aadf1628d",
    "prId" : 3092,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "51e3ded7-385b-4dcd-ae70-ef5545bddd23",
        "parentId" : null,
        "authorId" : "e7e1d709-e9c3-47a5-91f2-ed86958679e2",
        "body" : "This is a good solution, except that `PATH` will now grow longer and longer for every kubectl call. Is this worth worrying about? I'd looked at variable length limits for shells the other day and it seemed pretty generous, so this probably won't break anyone, but it is kind of gross.\n",
        "createdAt" : "2014-12-22T18:04:13Z",
        "updatedAt" : "2014-12-22T18:14:50Z",
        "lastEditedBy" : "e7e1d709-e9c3-47a5-91f2-ed86958679e2",
        "tags" : [
        ]
      },
      {
        "id" : "afe7dab4-c443-4b51-81eb-ce0875c78280",
        "parentId" : "51e3ded7-385b-4dcd-ae70-ef5545bddd23",
        "authorId" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "body" : "Unless kubectl.sh calls itself, this should only effect subshells.\n",
        "createdAt" : "2014-12-22T18:07:28Z",
        "updatedAt" : "2014-12-22T18:14:50Z",
        "lastEditedBy" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "tags" : [
        ]
      },
      {
        "id" : "4adb5430-a88c-416e-b3a6-4b4edd5f3059",
        "parentId" : "51e3ded7-385b-4dcd-ae70-ef5545bddd23",
        "authorId" : "e7e1d709-e9c3-47a5-91f2-ed86958679e2",
        "body" : "Subshells. This is the top of my todo list for shell topics that I still need to grok.\n",
        "createdAt" : "2014-12-22T18:16:44Z",
        "updatedAt" : "2014-12-22T18:16:44Z",
        "lastEditedBy" : "e7e1d709-e9c3-47a5-91f2-ed86958679e2",
        "tags" : [
        ]
      },
      {
        "id" : "5a8b5121-f750-447b-a555-22ba4e1d5441",
        "parentId" : "51e3ded7-385b-4dcd-ae70-ef5545bddd23",
        "authorId" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "body" : "The nut of it here is the `kubectl.sh` is called as if it were a command all the time, and not sourced. So it's always a separate process, meaning it's a single instance of a shell. The `export PATH=` affects everything downstream, but shouldn't virally infect the stuff upstream, e.g.:\n\n```\nzml@zml:~/kubernetes$ echo $PATH\n/usr/local/google/home/zml/google-cloud-sdk/bin:/usr/local/google/home/zml/google-cloud-sdk/bin:/usr/local/google/home/zml/bin:/usr/lib/google-golang/bin:/usr/local/buildtools/java/jdk/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\nzml@zml:~/kubernetes$ bash\nzml@zml:~/kubernetes$ export PATH=foo/bar/blatz:$PATH\nzml@zml:~/kubernetes$ echo $PATH\nfoo/bar/blatz:/usr/local/google/home/zml/google-cloud-sdk/bin:/usr/local/google/home/zml/google-cloud-sdk/bin:/usr/local/google/home/zml/google-cloud-sdk/bin:/usr/local/google/home/zml/bin:/usr/lib/google-golang/bin:/usr/local/buildtools/java/jdk/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\nzml@zml:~/kubernetes$ exit\nzml@zml:~/kubernetes$ echo $PATH\n/usr/local/google/home/zml/google-cloud-sdk/bin:/usr/local/google/home/zml/google-cloud-sdk/bin:/usr/local/google/home/zml/bin:/usr/lib/google-golang/bin:/usr/local/buildtools/java/jdk/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n```\n",
        "createdAt" : "2014-12-22T18:25:56Z",
        "updatedAt" : "2014-12-22T18:25:56Z",
        "lastEditedBy" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "tags" : [
        ]
      },
      {
        "id" : "c289506e-5102-4004-8e7c-66c35c013ed0",
        "parentId" : "51e3ded7-385b-4dcd-ae70-ef5545bddd23",
        "authorId" : "e7e1d709-e9c3-47a5-91f2-ed86958679e2",
        "body" : "Another nit: do we need quotes here?\n\nI think none of us have spaces in our paths, so in guarding against them I never know if I'm being unnecessarily cautious.\n",
        "createdAt" : "2014-12-22T18:29:56Z",
        "updatedAt" : "2014-12-22T18:29:56Z",
        "lastEditedBy" : "e7e1d709-e9c3-47a5-91f2-ed86958679e2",
        "tags" : [
        ]
      }
    ],
    "commit" : "e71798df3f13f95a1ee4b2773ba9f0315fff1145",
    "line" : 73,
    "diffHunk" : "@@ -1,1 +102,106 @@if [[ \"$KUBERNETES_PROVIDER\" == \"gke\" ]]; then\n  detect-project &> /dev/null\n  export PATH=$(get_absolute_dirname $kubectl):$PATH\n  kubectl=\"${GCLOUD}\"\nfi"
  },
  {
    "id" : "44e6c457-c799-4569-96ff-9eef052377f1",
    "prId" : 3092,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f967080e-8b5c-455f-af00-cc0913e13952",
        "parentId" : null,
        "authorId" : "c2b5c827-efcd-438f-8db5-52d917b1cde9",
        "body" : "This is probably overkill, but it would be a bit more resilient to actually run kubectl (similarly to how you run gcloud preview in pr #3082) rather than just check the executable bit. \n",
        "createdAt" : "2014-12-22T18:26:29Z",
        "updatedAt" : "2014-12-22T18:26:29Z",
        "lastEditedBy" : "c2b5c827-efcd-438f-8db5-52d917b1cde9",
        "tags" : [
        ]
      },
      {
        "id" : "1340c2c0-c45c-422c-9704-04c12572a798",
        "parentId" : "f967080e-8b5c-455f-af00-cc0913e13952",
        "authorId" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "body" : "I think that's a verify_prereqs thing to do, not an every-time-you-run kubectl.sh thing to do. :) I did consider it, though.\n",
        "createdAt" : "2014-12-22T18:30:37Z",
        "updatedAt" : "2014-12-22T18:30:37Z",
        "lastEditedBy" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "tags" : [
        ]
      },
      {
        "id" : "1afcdc13-b89e-40ff-97cc-5765808436b1",
        "parentId" : "f967080e-8b5c-455f-af00-cc0913e13952",
        "authorId" : "c2b5c827-efcd-438f-8db5-52d917b1cde9",
        "body" : "Good point. \n",
        "createdAt" : "2014-12-22T18:32:56Z",
        "updatedAt" : "2014-12-22T18:32:56Z",
        "lastEditedBy" : "c2b5c827-efcd-438f-8db5-52d917b1cde9",
        "tags" : [
        ]
      }
    ],
    "commit" : "e71798df3f13f95a1ee4b2773ba9f0315fff1145",
    "line" : 50,
    "diffHunk" : "@@ -1,1 +89,93 @@    exit 1\n  fi\nelif [[ ! -x \"${KUBECTL_PATH}\" ]]; then\n  {\n    echo \"KUBECTL_PATH enviroment variable set to '${KUBECTL_PATH}', but \""
  }
]