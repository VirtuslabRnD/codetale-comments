[
  {
    "id" : "69470a59-604a-47cf-865f-303fe7b212a1",
    "prId" : 66485,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/66485#pullrequestreview-142793106",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "71817a7d-e227-450c-b1f2-5380d27fa515",
        "parentId" : null,
        "authorId" : "5b1d97bd-de49-4ef5-bcbf-0d8dfead7b61",
        "body" : "Why do we need such extensive permission for metadata-agent? Do we actually need more than pods and nodes?",
        "createdAt" : "2018-08-02T07:24:52Z",
        "updatedAt" : "2018-08-06T15:26:51Z",
        "lastEditedBy" : "5b1d97bd-de49-4ef5-bcbf-0d8dfead7b61",
        "tags" : [
        ]
      },
      {
        "id" : "9ecd6a0f-eb77-4938-b1bf-0da0db2f3190",
        "parentId" : "71817a7d-e227-450c-b1f2-5380d27fa515",
        "authorId" : "0b2de092-e468-4d99-9434-b45bb8947530",
        "body" : "The metadata agent needs to follow the owner references to find the top-level owner for a given pod. With custom object types and operators, the owner chain may contain anything. Restricting this access will result in incomplete data.",
        "createdAt" : "2018-08-02T19:25:57Z",
        "updatedAt" : "2018-08-06T15:26:51Z",
        "lastEditedBy" : "0b2de092-e468-4d99-9434-b45bb8947530",
        "tags" : [
        ]
      }
    ],
    "commit" : "32c2bfadfdd4e74e42f55810460640df4436b5f6",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +8,12 @@rules:\n- apiGroups:\n  - \"*\"\n  resources:\n  - \"*\""
  },
  {
    "id" : "f625a7cb-9eb4-4950-b313-532a7a443735",
    "prId" : 57455,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/57455#pullrequestreview-105295361",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0306d63c-a652-4e55-a679-11a28c8a9804",
        "parentId" : null,
        "authorId" : "e2aaf386-2908-41e6-860b-bcb2cffa1cc7",
        "body" : "s/metadata-agent/stackdriver-metadata-agent/?\r\n\r\nI can imagine more than one thing called metadata agent running in the cluster, so it may be better to explicitly tell which one we are referring to here. Same for service account name.",
        "createdAt" : "2018-02-06T10:51:22Z",
        "updatedAt" : "2018-02-06T12:48:22Z",
        "lastEditedBy" : "e2aaf386-2908-41e6-860b-bcb2cffa1cc7",
        "tags" : [
        ]
      },
      {
        "id" : "9b9ac669-5b87-4395-a08b-960235fb64b1",
        "parentId" : "0306d63c-a652-4e55-a679-11a28c8a9804",
        "authorId" : "acf367dc-26b7-4dc5-b0fa-2397add126d0",
        "body" : "There is no other system component called metadata agent right now, so it shouldn't collide. I prefer to keep it consistent with addon name and with other addons (e.g. you have cluster role \"system:heapster\", not \"system:stackdriver-heapster\").",
        "createdAt" : "2018-02-06T11:11:42Z",
        "updatedAt" : "2018-02-06T12:48:22Z",
        "lastEditedBy" : "acf367dc-26b7-4dc5-b0fa-2397add126d0",
        "tags" : [
        ]
      },
      {
        "id" : "27e96a86-b807-4149-9218-be4d0434bc30",
        "parentId" : "0306d63c-a652-4e55-a679-11a28c8a9804",
        "authorId" : "e2aaf386-2908-41e6-860b-bcb2cffa1cc7",
        "body" : "The DaemonSet name right now is stackdriver-agents, not metadata-agent. Maintaining consistency with container name doesn't seem to be a reasonable approach, since the same container name can be the same for different pods, while ServiceAccount name should be unique within a namespace.",
        "createdAt" : "2018-02-06T12:11:05Z",
        "updatedAt" : "2018-02-06T12:48:22Z",
        "lastEditedBy" : "e2aaf386-2908-41e6-860b-bcb2cffa1cc7",
        "tags" : [
        ]
      },
      {
        "id" : "1b5a6be1-834f-431a-bf74-97bcaa219d08",
        "parentId" : "0306d63c-a652-4e55-a679-11a28c8a9804",
        "authorId" : "acf367dc-26b7-4dc5-b0fa-2397add126d0",
        "body" : "Changed everything to metadata-agent.",
        "createdAt" : "2018-02-06T12:23:23Z",
        "updatedAt" : "2018-02-06T12:48:22Z",
        "lastEditedBy" : "acf367dc-26b7-4dc5-b0fa-2397add126d0",
        "tags" : [
        ]
      },
      {
        "id" : "9a2656ce-95c3-43c9-a0e6-c1d20744313d",
        "parentId" : "0306d63c-a652-4e55-a679-11a28c8a9804",
        "authorId" : "e2aaf386-2908-41e6-860b-bcb2cffa1cc7",
        "body" : "But why? Since now you're changing the names everywhere, why not be explicit?",
        "createdAt" : "2018-02-06T12:31:37Z",
        "updatedAt" : "2018-02-06T12:48:22Z",
        "lastEditedBy" : "e2aaf386-2908-41e6-860b-bcb2cffa1cc7",
        "tags" : [
        ]
      },
      {
        "id" : "44034c15-7e1a-4655-8c5d-35ad06f6bf60",
        "parentId" : "0306d63c-a652-4e55-a679-11a28c8a9804",
        "authorId" : "acf367dc-26b7-4dc5-b0fa-2397add126d0",
        "body" : "My intention was to name the addon \"metadata-agent\", this is also reflected e.g. in directory layout and env variables. Here I just fixed some unintentional inconsistency.",
        "createdAt" : "2018-02-06T13:01:15Z",
        "updatedAt" : "2018-02-06T13:01:15Z",
        "lastEditedBy" : "acf367dc-26b7-4dc5-b0fa-2397add126d0",
        "tags" : [
        ]
      },
      {
        "id" : "912e5f66-b2e5-4ec9-83fa-ab8b8d31e117",
        "parentId" : "0306d63c-a652-4e55-a679-11a28c8a9804",
        "authorId" : "e2aaf386-2908-41e6-860b-bcb2cffa1cc7",
        "body" : "Ack.",
        "createdAt" : "2018-02-06T13:08:38Z",
        "updatedAt" : "2018-02-06T13:08:38Z",
        "lastEditedBy" : "e2aaf386-2908-41e6-860b-bcb2cffa1cc7",
        "tags" : [
        ]
      },
      {
        "id" : "0fde09b2-abd3-4af0-9424-7760d37169e5",
        "parentId" : "0306d63c-a652-4e55-a679-11a28c8a9804",
        "authorId" : "0af48e59-4be9-46ce-9275-aa218813b6fd",
        "body" : "`system:` is reserved for roles setup by the API server. Please consider re-naming this to `stackdriver-metadata-agent`.",
        "createdAt" : "2018-03-14T17:15:35Z",
        "updatedAt" : "2018-03-14T17:15:36Z",
        "lastEditedBy" : "0af48e59-4be9-46ce-9275-aa218813b6fd",
        "tags" : [
        ]
      },
      {
        "id" : "41c558fe-9c14-43b1-b1d2-c72fafcd9021",
        "parentId" : "0306d63c-a652-4e55-a679-11a28c8a9804",
        "authorId" : "0b2de092-e468-4d99-9434-b45bb8947530",
        "body" : "What about `stackdriver:metadata-agent`? Would it make sense to settle on a `stackdriver` prefix (i.e., do we anticipate any more Stackdriver-related roles)?",
        "createdAt" : "2018-03-14T21:29:40Z",
        "updatedAt" : "2018-03-14T21:29:40Z",
        "lastEditedBy" : "0b2de092-e468-4d99-9434-b45bb8947530",
        "tags" : [
        ]
      },
      {
        "id" : "063589a7-4bb5-4a8d-8c1b-0cdd4841f5ac",
        "parentId" : "0306d63c-a652-4e55-a679-11a28c8a9804",
        "authorId" : "0af48e59-4be9-46ce-9275-aa218813b6fd",
        "body" : "Either `stackdriver:metadata-agent` or `stackdriver-metadata-agent` seem fine.",
        "createdAt" : "2018-03-14T21:34:29Z",
        "updatedAt" : "2018-03-14T21:34:29Z",
        "lastEditedBy" : "0af48e59-4be9-46ce-9275-aa218813b6fd",
        "tags" : [
        ]
      },
      {
        "id" : "29945dfc-e312-4e1d-9836-3cdb42a7a9d3",
        "parentId" : "0306d63c-a652-4e55-a679-11a28c8a9804",
        "authorId" : "acf367dc-26b7-4dc5-b0fa-2397add126d0",
        "body" : "Sorry for delay. Introducing this fix now in #61394 - PTAL",
        "createdAt" : "2018-03-20T10:46:43Z",
        "updatedAt" : "2018-03-20T10:46:44Z",
        "lastEditedBy" : "acf367dc-26b7-4dc5-b0fa-2397add126d0",
        "tags" : [
        ]
      }
    ],
    "commit" : "b8ed82711cc3b9f60505ff833cdb5f4ad4aa0df0",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +2,6 @@kind: ClusterRole\nmetadata:\n  name: system:metadata-agent\n  labels:\n    kubernetes.io/cluster-service: \"true\""
  }
]