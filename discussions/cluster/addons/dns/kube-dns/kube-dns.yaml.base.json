[
  {
    "id" : "0ae2d807-c645-484b-81ba-666791ad894b",
    "prId" : 90248,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/90248#pullrequestreview-405411101",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "770b9571-7596-439e-92ff-f18a581210fb",
        "parentId" : null,
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "Did you run any scale test with that?\r\nNote that OSS tests are using the default, which currently CoreDNS, so even if we merge it we won't know if it works or not.\r\n\r\nThis is a risky one - I think we were doing it at least 3 times in the past and always had to revert. I know that scheduling team put a ton of work into optimizing it, but I also don't know how good it is now.\r\n\r\nI think the only way of answering this question would be to run our scale tests (actually density test would probably be enough, because we only care about scheduling throughput for this case - and it's much shorter - ~2.5h vs 10h of load test at 5k scale).\r\n@mm4tt - FYI",
        "createdAt" : "2020-04-17T19:43:32Z",
        "updatedAt" : "2020-05-04T22:41:46Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "62d0bb74-c5a6-4913-969b-6a47d37cca6e",
        "parentId" : "770b9571-7596-439e-92ff-f18a581210fb",
        "authorId" : "6f944810-c490-4e34-9792-19715a133bef",
        "body" : "From a CoreDNS perspective, I did [open a PR to test the pod-anti-affinity](https://github.com/kubernetes/kubernetes/pull/84733) some time back, \r\nthe scale tests seem to pass: https://github.com/kubernetes/kubernetes/pull/84733#issuecomment-553321221\r\n\r\nMetrics from the test: https://github.com/kubernetes/kubernetes/pull/84733#issuecomment-553451336\r\n\r\n@oxddr ",
        "createdAt" : "2020-04-17T19:53:52Z",
        "updatedAt" : "2020-05-04T22:41:46Z",
        "lastEditedBy" : "6f944810-c490-4e34-9792-19715a133bef",
        "tags" : [
        ]
      },
      {
        "id" : "18d60c9b-1a88-47a7-b9e0-8f154f0ddba5",
        "parentId" : "770b9571-7596-439e-92ff-f18a581210fb",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "Hmm - the large tests were triggerred there, which is 2k-node cluster. I don't think that's enough - there can potentially be significant difference between 2k and 5k.",
        "createdAt" : "2020-04-17T19:57:18Z",
        "updatedAt" : "2020-05-04T22:41:46Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "34b340db-0a80-4334-b995-95afabee3115",
        "parentId" : "770b9571-7596-439e-92ff-f18a581210fb",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "We've run 5k-node scale tests against this change and it doesn't seem to cause any visible impact on pretty much any metrics.\r\n\r\nSo I'm fine with proceeding with this change from scalability perspective.\r\nThat said, please split this into two separate PRs (version bump and add of anti-affinity), as there is still a risk we may need to rollback it (we will be monitoring tests once that merges).\r\n\r\n@prameshj ^^",
        "createdAt" : "2020-04-28T17:55:11Z",
        "updatedAt" : "2020-05-04T22:41:46Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "573b810c-5b91-4be3-9e85-b7ed8b0c16d0",
        "parentId" : "770b9571-7596-439e-92ff-f18a581210fb",
        "authorId" : "c1166017-761f-41df-8ad7-07e3dd792799",
        "body" : "Ack, will do. Thanks for the update.",
        "createdAt" : "2020-04-28T18:30:32Z",
        "updatedAt" : "2020-05-04T22:41:46Z",
        "lastEditedBy" : "c1166017-761f-41df-8ad7-07e3dd792799",
        "tags" : [
        ]
      },
      {
        "id" : "85024fac-7e31-44a5-95a6-ca78e1f9f738",
        "parentId" : "770b9571-7596-439e-92ff-f18a581210fb",
        "authorId" : "c1166017-761f-41df-8ad7-07e3dd792799",
        "body" : "I have split the version update in PR - https://github.com/kubernetes/kubernetes/pull/90744",
        "createdAt" : "2020-05-04T23:17:37Z",
        "updatedAt" : "2020-05-04T23:17:37Z",
        "lastEditedBy" : "c1166017-761f-41df-8ad7-07e3dd792799",
        "tags" : [
        ]
      }
    ],
    "commit" : "aaa0d12cc7429c4772268f4d41ffb172f89ba665",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +101,105 @@                    operator: In\n                    values: [\"kube-dns\"]\n              topologyKey: kubernetes.io/hostname\n      tolerations:\n      - key: \"CriticalAddonsOnly\""
  },
  {
    "id" : "6686a303-0f7a-4bb5-9e3f-4477b6ee3dec",
    "prId" : 82347,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/82347#pullrequestreview-286982897",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "583ce7f8-7382-4a9e-80c8-2fb85fa3212e",
        "parentId" : null,
        "authorId" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "body" : "nit: mind changing the seccomp profile to `runtime/default`? They're equivalent, but `docker/default` is deprecated.",
        "createdAt" : "2019-09-11T17:51:43Z",
        "updatedAt" : "2019-09-19T07:15:18Z",
        "lastEditedBy" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "tags" : [
        ]
      },
      {
        "id" : "59bd0c13-81ce-4cb6-bac0-6ac2df63c140",
        "parentId" : "583ce7f8-7382-4a9e-80c8-2fb85fa3212e",
        "authorId" : "7f996100-1a0c-46d0-9245-23461072b50e",
        "body" : "sure, changes coming shortly.",
        "createdAt" : "2019-09-11T18:20:09Z",
        "updatedAt" : "2019-09-19T07:15:18Z",
        "lastEditedBy" : "7f996100-1a0c-46d0-9245-23461072b50e",
        "tags" : [
        ]
      }
    ],
    "commit" : "9997dfd72d853569fba66afd1bc5581c70a92027",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +86,90 @@        prometheus.io/port: \"10054\"\n        prometheus.io/scrape: \"true\"\n    spec:\n      priorityClassName: system-cluster-critical\n      securityContext:"
  }
]