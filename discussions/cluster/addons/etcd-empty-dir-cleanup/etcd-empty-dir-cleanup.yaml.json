[
  {
    "id" : "e5297d26-ebaa-440c-ab94-67481935e7dc",
    "prId" : 60891,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/60891#pullrequestreview-102421201",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "622858b0-6408-4e60-b098-2b4f75fc53cd",
        "parentId" : null,
        "authorId" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "body" : "I don't see a 3.1.11.0 in gcr.io.  The etcd version of etcd-empty-dir-cleanup is only for the version of etcdctl copied into the container image which hasn't changed between 3.1.10 and 3.1.11.",
        "createdAt" : "2018-03-08T17:53:52Z",
        "updatedAt" : "2018-03-08T17:53:52Z",
        "lastEditedBy" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "tags" : [
        ]
      },
      {
        "id" : "b5902e77-97f9-420a-8bcf-24261090afa2",
        "parentId" : "622858b0-6408-4e60-b098-2b4f75fc53cd",
        "authorId" : "57a5e7e7-e6d7-467b-96ab-41e4ca978eee",
        "body" : "I see. In that case, do you want me to:\r\n- keep the tag at 3.1.10.0, or\r\n- change it to 3.1.11.0 (to sync with etcd version used in the makefile) and push a new image?",
        "createdAt" : "2018-03-08T18:03:46Z",
        "updatedAt" : "2018-03-08T18:03:46Z",
        "lastEditedBy" : "57a5e7e7-e6d7-467b-96ab-41e4ca978eee",
        "tags" : [
        ]
      },
      {
        "id" : "c018be7a-e793-4b7e-94bd-a60fa9c8573d",
        "parentId" : "622858b0-6408-4e60-b098-2b4f75fc53cd",
        "authorId" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "body" : "Sigh. To be consistent, let's publish 3.1.11.0..",
        "createdAt" : "2018-03-08T18:15:02Z",
        "updatedAt" : "2018-03-08T18:15:02Z",
        "lastEditedBy" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "tags" : [
        ]
      },
      {
        "id" : "05978c97-552f-4eee-a533-56324c0c7a14",
        "parentId" : "622858b0-6408-4e60-b098-2b4f75fc53cd",
        "authorId" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "body" : "Of we could just tag the 3.1.10.0 image with 3.1.11.0 as well :grin: ",
        "createdAt" : "2018-03-08T18:16:56Z",
        "updatedAt" : "2018-03-08T18:17:26Z",
        "lastEditedBy" : "d4f34d8f-5341-4ac1-b8b2-5e5f11e23a5d",
        "tags" : [
        ]
      },
      {
        "id" : "7b5b2730-11cc-4d1c-b063-bbea83d4205a",
        "parentId" : "622858b0-6408-4e60-b098-2b4f75fc53cd",
        "authorId" : "57a5e7e7-e6d7-467b-96ab-41e4ca978eee",
        "body" : "I'd prefer the former, to avoid messing up the tag wrt the underlying etcd version actually used to build the image.\r\n\r\nThat said, I failed with the following error while running `make push`:\r\n\r\n```\r\nThe push refers to a repository [staging-k8s.gcr.io/etcd-empty-dir-cleanup]\r\n41ad6ade37a0: Pushing [==================================================>]  14.32MB/14.32MB\r\n8b8608fe70b0: Pushing [==================================================>]  14.32MB/14.32MB\r\nc5183829c43c: Layer already exists \r\nread tcp [2a00:79e0:2:11:cdf:6d7d:727b:913e]:37568->[2a00:1450:400c:c06::52]:443: use of closed network connection\r\n```\r\n\r\n@krzyzacy @BenTheElder Is this somehow related to that docker auth issue? Leads on how to fix it?",
        "createdAt" : "2018-03-08T18:23:53Z",
        "updatedAt" : "2018-03-08T18:23:53Z",
        "lastEditedBy" : "57a5e7e7-e6d7-467b-96ab-41e4ca978eee",
        "tags" : [
        ]
      },
      {
        "id" : "46980ee6-59ec-4539-a3fe-50dd404ccc85",
        "parentId" : "622858b0-6408-4e60-b098-2b4f75fc53cd",
        "authorId" : "a32457ee-5d35-4249-84b2-4276603aaffb",
        "body" : "can you link me to the make push command?",
        "createdAt" : "2018-03-08T18:28:12Z",
        "updatedAt" : "2018-03-08T18:28:12Z",
        "lastEditedBy" : "a32457ee-5d35-4249-84b2-4276603aaffb",
        "tags" : [
        ]
      },
      {
        "id" : "2ae57541-a84f-4489-b45c-a1f8084b8491",
        "parentId" : "622858b0-6408-4e60-b098-2b4f75fc53cd",
        "authorId" : "57a5e7e7-e6d7-467b-96ab-41e4ca978eee",
        "body" : "cd cluster/images/etcd-empty-dir-cleanup\r\nmake push",
        "createdAt" : "2018-03-08T18:35:11Z",
        "updatedAt" : "2018-03-08T18:35:11Z",
        "lastEditedBy" : "57a5e7e7-e6d7-467b-96ab-41e4ca978eee",
        "tags" : [
        ]
      },
      {
        "id" : "17ee5a3d-8a75-4e62-a06c-2630d632f0d7",
        "parentId" : "622858b0-6408-4e60-b098-2b4f75fc53cd",
        "authorId" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "body" : "hmm do you have `gcloud beta auth configure-docker` working on your machine now?",
        "createdAt" : "2018-03-08T18:37:39Z",
        "updatedAt" : "2018-03-08T18:37:56Z",
        "lastEditedBy" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "tags" : [
        ]
      },
      {
        "id" : "5aa9d4fe-1e4a-44af-b105-8c431b066577",
        "parentId" : "622858b0-6408-4e60-b098-2b4f75fc53cd",
        "authorId" : "57a5e7e7-e6d7-467b-96ab-41e4ca978eee",
        "body" : "I tried it. Getting:\r\n\r\n```\r\nERROR: (gcloud.beta.auth.configure-docker) Error writing Docker configuration to disk: [Errno 2] No such file or directory: '/usr/local/google/home/shyamjvs/.docker/tmptYLal3'\r\n```",
        "createdAt" : "2018-03-08T18:49:42Z",
        "updatedAt" : "2018-03-08T18:49:42Z",
        "lastEditedBy" : "57a5e7e7-e6d7-467b-96ab-41e4ca978eee",
        "tags" : [
        ]
      },
      {
        "id" : "cb27d684-c097-41cc-8797-fccbac8bdebd",
        "parentId" : "622858b0-6408-4e60-b098-2b4f75fc53cd",
        "authorId" : "57a5e7e7-e6d7-467b-96ab-41e4ca978eee",
        "body" : "Ok.. I think I fixed it by creating that dir. Let me try pushing now.",
        "createdAt" : "2018-03-08T18:50:25Z",
        "updatedAt" : "2018-03-08T18:50:25Z",
        "lastEditedBy" : "57a5e7e7-e6d7-467b-96ab-41e4ca978eee",
        "tags" : [
        ]
      },
      {
        "id" : "23a12819-d6eb-4e8f-9eca-061dd945719e",
        "parentId" : "622858b0-6408-4e60-b098-2b4f75fc53cd",
        "authorId" : "57a5e7e7-e6d7-467b-96ab-41e4ca978eee",
        "body" : "Still fails, but with:\r\n\r\n```\r\nunexpected EOF\r\n```",
        "createdAt" : "2018-03-08T18:53:35Z",
        "updatedAt" : "2018-03-08T18:53:35Z",
        "lastEditedBy" : "57a5e7e7-e6d7-467b-96ab-41e4ca978eee",
        "tags" : [
        ]
      },
      {
        "id" : "a8859f67-568c-42a0-be22-6f6ee33d02d4",
        "parentId" : "622858b0-6408-4e60-b098-2b4f75fc53cd",
        "authorId" : "a32457ee-5d35-4249-84b2-4276603aaffb",
        "body" : "I think that's the gcloud docker -- push vs docker push issue again - have you upgraded your workstation yet?",
        "createdAt" : "2018-03-08T18:55:32Z",
        "updatedAt" : "2018-03-08T18:55:32Z",
        "lastEditedBy" : "a32457ee-5d35-4249-84b2-4276603aaffb",
        "tags" : [
        ]
      },
      {
        "id" : "86682620-a0a7-472b-a573-4074750cee21",
        "parentId" : "622858b0-6408-4e60-b098-2b4f75fc53cd",
        "authorId" : "57a5e7e7-e6d7-467b-96ab-41e4ca978eee",
        "body" : "I finally managed to make it work by replacing `docker` with `gcloud docker` and using the right credentials allowing me to push.\r\n\r\n@jpbetz - We're good to go here now.",
        "createdAt" : "2018-03-08T19:11:20Z",
        "updatedAt" : "2018-03-08T19:11:20Z",
        "lastEditedBy" : "57a5e7e7-e6d7-467b-96ab-41e4ca978eee",
        "tags" : [
        ]
      }
    ],
    "commit" : "ba6bb999f78802a2af54a6975d9f67fc92a41b10",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +25,29 @@  containers:\n  - name: etcd-empty-dir-cleanup\n    image: k8s.gcr.io/etcd-empty-dir-cleanup:3.1.11.0"
  }
]