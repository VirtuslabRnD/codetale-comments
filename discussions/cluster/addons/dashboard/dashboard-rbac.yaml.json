[
  {
    "id" : "694fb23f-0d7e-4242-9e23-6ea684e11278",
    "prId" : 53046,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/53046#pullrequestreview-79432856",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4274f1bf-9200-4d75-83ea-d942448001a7",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "do you need `https:heapster:` and `http:heapster:` as well? cc @DirectXMan12 ",
        "createdAt" : "2017-11-27T14:20:03Z",
        "updatedAt" : "2017-11-28T16:53:23Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "b72dd5f8-3a67-4895-8c3c-d4320e20ca28",
        "parentId" : "4274f1bf-9200-4d75-83ea-d942448001a7",
        "authorId" : "3a4b4830-dc71-4d7e-a7db-de2453284945",
        "body" : "if you want to support connecting to a secured Heapster, then yes, you explicitly need `https:heapster:`.  IIRC, `http:heapster:` shouldn't be needed b/c that'd be the same as just `heapster`, unless I'm misremembering.",
        "createdAt" : "2017-11-27T18:19:12Z",
        "updatedAt" : "2017-11-28T16:53:23Z",
        "lastEditedBy" : "3a4b4830-dc71-4d7e-a7db-de2453284945",
        "tags" : [
        ]
      },
      {
        "id" : "b8293e51-b4c4-45de-8390-b0c8d27e29af",
        "parentId" : "4274f1bf-9200-4d75-83ea-d942448001a7",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "opened https://github.com/kubernetes/dashboard/pull/2622 to switch to service subresource and add policy for protocol-specific heapster calls",
        "createdAt" : "2017-11-27T18:25:37Z",
        "updatedAt" : "2017-11-28T16:53:23Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "989d1286-9cc6-4bac-ada6-727cddf5c033",
        "parentId" : "4274f1bf-9200-4d75-83ea-d942448001a7",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "I don't think this blocks this PR, though",
        "createdAt" : "2017-11-27T18:25:46Z",
        "updatedAt" : "2017-11-28T16:53:23Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "530b58e9-788b-4cdb-95ec-90e44e466ca8",
        "parentId" : "4274f1bf-9200-4d75-83ea-d942448001a7",
        "authorId" : "6a669e4f-62f6-4ec3-a719-3b7ba6c79b4b",
        "body" : "Current version of Dashboard does not support connecting to secured Heapster. This can stay as it is.",
        "createdAt" : "2017-11-28T09:13:10Z",
        "updatedAt" : "2017-11-28T16:53:23Z",
        "lastEditedBy" : "6a669e4f-62f6-4ec3-a719-3b7ba6c79b4b",
        "tags" : [
        ]
      }
    ],
    "commit" : "a8bf90f85e1a6775e04ff8c261191704230c6b16",
    "line" : 27,
    "diffHunk" : "@@ -1,1 +25,29 @@- apiGroups: [\"\"]\n  resources: [\"services\"]\n  resourceNames: [\"heapster\"]\n  verbs: [\"proxy\"]\n---"
  },
  {
    "id" : "6b2a733d-16a4-4e9e-8978-63e94d0e7f5a",
    "prId" : 53046,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/53046#pullrequestreview-80118233",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "58d1618d-9509-4c09-ad28-32769c757d5b",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "is there a reason not to create the `kubernetes-dashboard-key-holder` secret via manifest with `EnsureExists`? wouldn't that remove the need for the dashboard to create the secret (it could just get/update the specifically named secrets)?",
        "createdAt" : "2017-11-28T15:48:07Z",
        "updatedAt" : "2017-11-28T16:53:23Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "cfa6dc23-4380-4baf-98f7-c3e78eb957e4",
        "parentId" : "58d1618d-9509-4c09-ad28-32769c757d5b",
        "authorId" : "6a669e4f-62f6-4ec3-a719-3b7ba6c79b4b",
        "body" : "In this case it should work as addon manager will manage it. Normally, without this permission if secret would not exist Dashboard would not be able to start. ",
        "createdAt" : "2017-11-28T15:54:34Z",
        "updatedAt" : "2017-11-28T16:53:23Z",
        "lastEditedBy" : "6a669e4f-62f6-4ec3-a719-3b7ba6c79b4b",
        "tags" : [
        ]
      },
      {
        "id" : "7521654e-f5a4-4c3f-acad-ddd10e0865ef",
        "parentId" : "58d1618d-9509-4c09-ad28-32769c757d5b",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "@floreks can the `kubernetes-dashboard-key-holder` be created empty via manifest, and this create permission removed? will the dashboard populate the empty secret?",
        "createdAt" : "2017-11-29T03:44:59Z",
        "updatedAt" : "2017-11-29T03:44:59Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "af459a57-a90d-478f-8301-3e0f56f6a208",
        "parentId" : "58d1618d-9509-4c09-ad28-32769c757d5b",
        "authorId" : "6a669e4f-62f6-4ec3-a719-3b7ba6c79b4b",
        "body" : "Unfortunately not. If empty secret is found then it will be deleted and during next resync period it is recreated from local copy.",
        "createdAt" : "2017-11-29T08:18:45Z",
        "updatedAt" : "2017-11-29T08:18:45Z",
        "lastEditedBy" : "6a669e4f-62f6-4ec3-a719-3b7ba6c79b4b",
        "tags" : [
        ]
      },
      {
        "id" : "756a7b2c-ee53-4aa4-a78e-8bf72f9cc7e4",
        "parentId" : "58d1618d-9509-4c09-ad28-32769c757d5b",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "that's unfortunate. this is ok for now, but I'd like to see that switch to an update and this permission get removed in a future update. can you open an issue for that and link it here?",
        "createdAt" : "2017-11-29T14:35:19Z",
        "updatedAt" : "2017-11-29T14:35:19Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "c9f9ea88-15b4-4fda-954f-21d50937cb18",
        "parentId" : "58d1618d-9509-4c09-ad28-32769c757d5b",
        "authorId" : "6a669e4f-62f6-4ec3-a719-3b7ba6c79b4b",
        "body" : "What in case dashboard won't be able to recreate it and someone deletes required secret? It will crash Dashboard for good until secret is restored. This would only work in case secret is managed by addon manager.",
        "createdAt" : "2017-11-29T14:47:15Z",
        "updatedAt" : "2017-11-29T14:47:15Z",
        "lastEditedBy" : "6a669e4f-62f6-4ec3-a719-3b7ba6c79b4b",
        "tags" : [
        ]
      },
      {
        "id" : "b11eae23-aeda-4155-addc-aebb40267aeb",
        "parentId" : "58d1618d-9509-4c09-ad28-32769c757d5b",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "from the dashboard's perspective, if it's missing, creating seems ok. if it's empty, I'd expect population via update.\r\n\r\nfrom this manifest's perspective, I'd rather not give secret create permission in the kube-system namespace",
        "createdAt" : "2017-11-29T14:50:20Z",
        "updatedAt" : "2017-11-29T14:51:30Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "f55d50ff-4993-4770-a92d-b9da3405337d",
        "parentId" : "58d1618d-9509-4c09-ad28-32769c757d5b",
        "authorId" : "6a669e4f-62f6-4ec3-a719-3b7ba6c79b4b",
        "body" : "Makes sense. I have created issue for that https://github.com/kubernetes/dashboard/issues/2629",
        "createdAt" : "2017-11-30T09:23:07Z",
        "updatedAt" : "2017-11-30T09:23:07Z",
        "lastEditedBy" : "6a669e4f-62f6-4ec3-a719-3b7ba6c79b4b",
        "tags" : [
        ]
      }
    ],
    "commit" : "a8bf90f85e1a6775e04ff8c261191704230c6b16",
    "line" : 10,
    "diffHunk" : "@@ -1,1 +8,12 @@  namespace: kube-system\nrules:\n  # Allow Dashboard to create 'kubernetes-dashboard-key-holder' secret.\n- apiGroups: [\"\"]\n  resources: [\"secrets\"]"
  }
]