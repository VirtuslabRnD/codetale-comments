[
  {
    "id" : "ccacc8df-fba7-4537-80fa-cc0fc478c7fc",
    "prId" : 1265,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f16afa8e-dd72-4843-baa6-0a7ad973e0b8",
        "parentId" : null,
        "authorId" : "6b2de464-07b6-478f-bdd0-b8707d59c1c1",
        "body" : "Aren't you checking the type of result ('image/jpeg') anymore?\n",
        "createdAt" : "2015-10-28T16:03:41Z",
        "updatedAt" : "2015-10-28T16:03:41Z",
        "lastEditedBy" : "6b2de464-07b6-478f-bdd0-b8707d59c1c1",
        "tags" : [
        ]
      },
      {
        "id" : "45f7b9bb-da55-44b8-aa8d-33f2a22ff504",
        "parentId" : "f16afa8e-dd72-4843-baa6-0a7ad973e0b8",
        "authorId" : "97008387-ed37-4abe-bd0a-d59f54ba177a",
        "body" : "I decided against it since the avatars can be gifs, pngs, or jpgs. Should I add the checks for those?\n",
        "createdAt" : "2015-10-28T16:05:03Z",
        "updatedAt" : "2015-10-28T16:05:03Z",
        "lastEditedBy" : "97008387-ed37-4abe-bd0a-d59f54ba177a",
        "tags" : [
        ]
      },
      {
        "id" : "669cb1a1-75d9-419c-9ccb-a09f7f0273ab",
        "parentId" : "f16afa8e-dd72-4843-baa6-0a7ad973e0b8",
        "authorId" : "6b2de464-07b6-478f-bdd0-b8707d59c1c1",
        "body" : "Sure, but IMHO you should check for the first part of the data type `/image\\/.+/` at least\n",
        "createdAt" : "2015-10-28T16:06:45Z",
        "updatedAt" : "2015-10-28T16:06:45Z",
        "lastEditedBy" : "6b2de464-07b6-478f-bdd0-b8707d59c1c1",
        "tags" : [
        ]
      },
      {
        "id" : "c50852d4-a3e1-4430-b3b9-06190d8ff9c3",
        "parentId" : "f16afa8e-dd72-4843-baa6-0a7ad973e0b8",
        "authorId" : "97008387-ed37-4abe-bd0a-d59f54ba177a",
        "body" : "Then that I will do, thanks. Another problem I just noticed is the error isn't presented back to the user if it occurs..\n",
        "createdAt" : "2015-10-28T16:08:43Z",
        "updatedAt" : "2015-10-28T16:08:43Z",
        "lastEditedBy" : "97008387-ed37-4abe-bd0a-d59f54ba177a",
        "tags" : [
        ]
      },
      {
        "id" : "42773d85-73f8-4241-805b-88c0b1f14961",
        "parentId" : "f16afa8e-dd72-4843-baa6-0a7ad973e0b8",
        "authorId" : "6b2de464-07b6-478f-bdd0-b8707d59c1c1",
        "body" : "Can you open another issue for this? We need to improve how to show errors at all.\n",
        "createdAt" : "2015-10-28T16:13:44Z",
        "updatedAt" : "2015-10-28T16:13:44Z",
        "lastEditedBy" : "6b2de464-07b6-478f-bdd0-b8707d59c1c1",
        "tags" : [
        ]
      },
      {
        "id" : "ea5b7d49-10ee-47c9-bad0-0d2914f2fa2f",
        "parentId" : "f16afa8e-dd72-4843-baa6-0a7ad973e0b8",
        "authorId" : "97008387-ed37-4abe-bd0a-d59f54ba177a",
        "body" : "Done, #1273.\n",
        "createdAt" : "2015-10-28T16:17:17Z",
        "updatedAt" : "2015-10-28T16:17:17Z",
        "lastEditedBy" : "97008387-ed37-4abe-bd0a-d59f54ba177a",
        "tags" : [
        ]
      }
    ],
    "commit" : "3eb818d3d3b7bc9eebd6505835b7d52abd0941fd",
    "line" : 11,
    "diffHunk" : "@@ -1,1 +19,23 @@\t\t\t\t\tconsole.log \"Not a valid response, #{result.statusCode}, from the avatar url: #{dataURI}\"\n\t\t\t\t\tthrow new Meteor.Error('invalid-avatar-url', '[methods] setAvatarFromService -> url service -> error on getting the avatar from url')\n\n\t\t\t\tars = RocketChatFile.bufferToStream new Buffer(result.content, 'binary')\n\t\t\t\taws = RocketChatFileAvatarInstance.createWriteStream \"#{user.username}.jpg\", result.headers['content-type']"
  }
]