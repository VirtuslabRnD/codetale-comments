[
  {
    "id" : "9d6f63b5-32f8-4b29-8f09-7921ea59b731",
    "prId" : 10753,
    "prUrl" : "https://github.com/apache/kafka/pull/10753#pullrequestreview-707621117",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bd7dd7e5-a74b-41a7-9412-4203ed3f92d0",
        "parentId" : null,
        "authorId" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "body" : "Hmm, do we need to change isr here? It seems that BestLeader handles the unclean leader election with empty isr already.",
        "createdAt" : "2021-07-14T22:34:37Z",
        "updatedAt" : "2021-07-14T23:01:20Z",
        "lastEditedBy" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "tags" : [
        ]
      },
      {
        "id" : "452556bd-a871-451a-8cfc-4acbbc2d0589",
        "parentId" : "bd7dd7e5-a74b-41a7-9412-4203ed3f92d0",
        "authorId" : "514c0afb-8649-4fd9-a6ea-ee9e1b695274",
        "body" : "It seems simpler to do it here because then we can reject the unclean case before creating the `PartitionChangeBuilder`",
        "createdAt" : "2021-07-15T05:01:17Z",
        "updatedAt" : "2021-07-15T05:01:17Z",
        "lastEditedBy" : "514c0afb-8649-4fd9-a6ea-ee9e1b695274",
        "tags" : [
        ]
      },
      {
        "id" : "32c79856-8679-4a65-8cd4-42e226fd989e",
        "parentId" : "bd7dd7e5-a74b-41a7-9412-4203ed3f92d0",
        "authorId" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "body" : "It seems that setting the unclean flag is enough to bypass PartitionChangeBuilder?",
        "createdAt" : "2021-07-15T16:11:39Z",
        "updatedAt" : "2021-07-15T16:12:04Z",
        "lastEditedBy" : "442b5138-0781-4001-8ac5-0593f2136d1c",
        "tags" : [
        ]
      },
      {
        "id" : "d0fb245c-ca0d-4689-94e4-38f00e55f6ff",
        "parentId" : "bd7dd7e5-a74b-41a7-9412-4203ed3f92d0",
        "authorId" : "514c0afb-8649-4fd9-a6ea-ee9e1b695274",
        "body" : "So the intention is that if the revert is \"unclean\" and we don't have unclean leader election enabled, the revert operation for the partition returns an error rather than succeeding.",
        "createdAt" : "2021-07-15T17:03:03Z",
        "updatedAt" : "2021-07-15T17:03:03Z",
        "lastEditedBy" : "514c0afb-8649-4fd9-a6ea-ee9e1b695274",
        "tags" : [
        ]
      }
    ],
    "commit" : "ac0f9935b6955513a172869345f5bdb44a3abe67",
    "line" : 67,
    "diffHunk" : "@@ -1,1 +65,69 @@                    \"assignment: addingReplicas contains all replicas.\");\n            }\n            isr.add(replicas.get(0));\n            this.unclean = true;\n        } else {"
  }
]