[
  {
    "id" : "eed8abcf-46b4-4b2a-ba5a-4971dd423fec",
    "prId" : 17025,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a71f3195-a753-4f87-a769-778c71082341",
        "parentId" : null,
        "authorId" : "f81960f6-a033-4403-bebf-c8ebb484e444",
        "body" : "Ohh man, do we really want to install mvn and devel tooling?  Or poke upstream harder?\n",
        "createdAt" : "2015-11-09T20:30:04Z",
        "updatedAt" : "2015-11-13T20:02:16Z",
        "lastEditedBy" : "f81960f6-a033-4403-bebf-c8ebb484e444",
        "tags" : [
        ]
      },
      {
        "id" : "6ae9031b-04a7-4d2e-b0c1-5f7c4a99ec71",
        "parentId" : "a71f3195-a753-4f87-a769-778c71082341",
        "authorId" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "body" : "All the Dockerfiles I found for Zeppelin built it. This image takes a long time to build.\n\nMy plan was to use this PR as a foil to poke the upstream (especially on `ZEPPELIN-10`, the multi-port issue).\n",
        "createdAt" : "2015-11-09T20:34:45Z",
        "updatedAt" : "2015-11-13T20:02:16Z",
        "lastEditedBy" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "tags" : [
        ]
      },
      {
        "id" : "0431305c-cacd-4456-9d7a-233fb20f9543",
        "parentId" : "a71f3195-a753-4f87-a769-778c71082341",
        "authorId" : "03b61a2c-385a-4e3a-9c84-96fa464c31a4",
        "body" : "binaries for spark 1.4.0 are available, which would be preferable\n\n@rnowling have version of zeppelin do you have running and does it work w/ spark 1.5?\n",
        "createdAt" : "2015-11-10T12:48:07Z",
        "updatedAt" : "2015-11-13T20:02:16Z",
        "lastEditedBy" : "03b61a2c-385a-4e3a-9c84-96fa464c31a4",
        "tags" : [
        ]
      },
      {
        "id" : "0dfffa5e-9ef2-42ca-816e-a7dda62e995f",
        "parentId" : "a71f3195-a753-4f87-a769-778c71082341",
        "authorId" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "body" : "Where? http://zeppelin-project.org/download.html\n\n```\nCurrent binary release\nWe will provide binary release pretty soon. Until then, please build your own. It's not that difficult.\n\nFor install and configure, check install.\n```\n\nThe v0.5.5 tag (which I just noticed, and may peg to now - it happened while I was working.) has no binaries on GitHub.\n",
        "createdAt" : "2015-11-10T15:06:40Z",
        "updatedAt" : "2015-11-13T20:02:16Z",
        "lastEditedBy" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "tags" : [
        ]
      },
      {
        "id" : "b756c65f-28e1-489f-b7d1-bc6c03d1ad4b",
        "parentId" : "a71f3195-a753-4f87-a769-778c71082341",
        "authorId" : "03b61a2c-385a-4e3a-9c84-96fa464c31a4",
        "body" : "i guess zeppelin-project.org is out of sync w/ https://zeppelin.incubator.apache.org/download.html\n",
        "createdAt" : "2015-11-10T15:25:53Z",
        "updatedAt" : "2015-11-13T20:02:16Z",
        "lastEditedBy" : "03b61a2c-385a-4e3a-9c84-96fa464c31a4",
        "tags" : [
        ]
      },
      {
        "id" : "69e828e7-587f-4b53-87e9-a0ebfb5c7667",
        "parentId" : "a71f3195-a753-4f87-a769-778c71082341",
        "authorId" : "57197d0a-d89e-4672-babd-7bed9cb8b52c",
        "body" : "I last tested Zeppelin with Spark 1.3 or 1.4.  We haven't been using Zeppelin actively.\n",
        "createdAt" : "2015-11-10T15:46:30Z",
        "updatedAt" : "2015-11-13T20:02:16Z",
        "lastEditedBy" : "57197d0a-d89e-4672-babd-7bed9cb8b52c",
        "tags" : [
        ]
      },
      {
        "id" : "e5553543-3ba2-4769-968d-c99314d03b37",
        "parentId" : "a71f3195-a753-4f87-a769-778c71082341",
        "authorId" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "body" : "Ah, yeah, there are too many pages.\n\nThese are based on the old 0.5 tag, which is from July. If they upload a\n0.5.5 tag (which has the multiport issue fixed), I'll see if works at all\nwith Spark 1.5, but I'm not holding out much hope at cross-compatibility.\nOn Nov 10, 2015 7:26 AM, \"Matthew Farrellee\" notifications@github.com\nwrote:\n\n> In examples/spark/images/zeppelin/Dockerfile\n> https://github.com/kubernetes/kubernetes/pull/17025#discussion_r44418976\n> :\n> \n> > +\n> > +ENV MAVEN_HOME /usr/share/maven\n> > +\n> > +ENV SPARK_MINOR  1.5\n> > +ENV SPARK_PATCH  1\n> > +ENV SPARK_VER    ${SPARK_MINOR}.${SPARK_PATCH}\n> > +ENV HADOOP_MINOR 2.6\n> > +ENV HADOOP_PATCH 1\n> > +ENV HADOOP_VER   ${HADOOP_MINOR}.${HADOOP_PATCH}\n> > +\n> > +# libfontconfig is a workaround for\n> > +# https://github.com/karma-runner/karma/issues/1270, which caused a\n> > +# build break similar to\n> > +# https://www.mail-archive.com/users@zeppelin.incubator.apache.org/msg01586.html\n> > +\n> > +RUN apt-get update \\\n> \n> i guess zeppelin-project.org is out of sync w/\n> https://zeppelin.incubator.apache.org/download.html\n> \n> â€”\n> Reply to this email directly or view it on GitHub\n> https://github.com/kubernetes/kubernetes/pull/17025/files#r44418976.\n",
        "createdAt" : "2015-11-10T15:57:43Z",
        "updatedAt" : "2015-11-13T20:02:16Z",
        "lastEditedBy" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "tags" : [
        ]
      },
      {
        "id" : "2442dbd8-2d62-441c-a14c-ffd72879f64b",
        "parentId" : "a71f3195-a753-4f87-a769-778c71082341",
        "authorId" : "03b61a2c-385a-4e3a-9c84-96fa464c31a4",
        "body" : "@rnowling is spark 1.5 w/ zeppelin 0.5 something you can test out in O(1hr)? if so, please do.\n",
        "createdAt" : "2015-11-10T16:05:23Z",
        "updatedAt" : "2015-11-13T20:02:16Z",
        "lastEditedBy" : "03b61a2c-385a-4e3a-9c84-96fa464c31a4",
        "tags" : [
        ]
      },
      {
        "id" : "cff420cc-13be-4c0b-8707-f38eef8b90c3",
        "parentId" : "a71f3195-a753-4f87-a769-778c71082341",
        "authorId" : "57197d0a-d89e-4672-babd-7bed9cb8b52c",
        "body" : "@mattf Zeppelin 0.5 doesn't support Spark 1.5 -- there is no Spark 1.5 profile under spark/pom.xml and (at least in my experience), Zeppelin is very specific about the version.  The Zeppelin Dockerfile is using master which includes the changes in 0.5.5 to support Spark 1.5.  (Maybe best to bind a specific version instead of the latest from master.) I'm building and testing Z 0.5.5 w/ Spark 1.5 locally now. \n",
        "createdAt" : "2015-11-10T16:24:28Z",
        "updatedAt" : "2015-11-13T20:02:16Z",
        "lastEditedBy" : "57197d0a-d89e-4672-babd-7bed9cb8b52c",
        "tags" : [
        ]
      },
      {
        "id" : "e1dd7256-4bed-423a-a4ce-4bf9e9bbed55",
        "parentId" : "a71f3195-a753-4f87-a769-778c71082341",
        "authorId" : "57197d0a-d89e-4672-babd-7bed9cb8b52c",
        "body" : "I have Zeppelin 0.5.5 working with Spark 1.5 -- Spark 1.5.1 is bundled as part of the spark-1.5 profile.\n",
        "createdAt" : "2015-11-10T16:29:26Z",
        "updatedAt" : "2015-11-13T20:02:16Z",
        "lastEditedBy" : "57197d0a-d89e-4672-babd-7bed9cb8b52c",
        "tags" : [
        ]
      },
      {
        "id" : "ca491d70-36b1-4f4a-a3fa-8317cc19c021",
        "parentId" : "a71f3195-a753-4f87-a769-778c71082341",
        "authorId" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "body" : "Yes, this Dockerfile is based on master, which I was testing with as of a few days ago and is practically 0.5.5. As I mentioned in https://github.com/kubernetes/kubernetes/pull/17025/files#r44416358, I can shift it over to 0.5.5 now that there's a tag that makes any sense. Zeppelin needs a better release cadence, though - their previous release was _very_ old.\n",
        "createdAt" : "2015-11-10T17:22:39Z",
        "updatedAt" : "2015-11-13T20:02:16Z",
        "lastEditedBy" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "tags" : [
        ]
      },
      {
        "id" : "ac3da87b-9623-4cff-b503-8e17156371d8",
        "parentId" : "a71f3195-a753-4f87-a769-778c71082341",
        "authorId" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "body" : "JFYI, if I'm looking at their `create_release.sh` correctly, they're also building for YARN. It's unclear if the YARN support will play well with Standalone, even when they do finally publish binaries.\n",
        "createdAt" : "2015-11-10T19:11:11Z",
        "updatedAt" : "2015-11-13T20:02:16Z",
        "lastEditedBy" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "tags" : [
        ]
      }
    ],
    "commit" : "51817850ba88dca100993ee4b9882cab105b2270",
    "line" : 46,
    "diffHunk" : "@@ -1,1 +44,48 @@# https://www.mail-archive.com/users@zeppelin.incubator.apache.org/msg01586.html\n\nRUN apt-get update \\\n  && apt-get install -y net-tools build-essential git wget unzip python python-setuptools python-dev python-numpy libfontconfig \\\n  && apt-get clean \\"
  },
  {
    "id" : "00352f92-8077-45cf-a3e2-ee969e974ea5",
    "prId" : 17025,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0011f441-7b7f-48c8-902d-cb824e493290",
        "parentId" : null,
        "authorId" : "f81960f6-a033-4403-bebf-c8ebb484e444",
        "body" : "Same comments as other entry around config.  I would almost like to hold off further PRs until that is in place. \n",
        "createdAt" : "2015-11-09T20:31:06Z",
        "updatedAt" : "2015-11-13T20:02:16Z",
        "lastEditedBy" : "f81960f6-a033-4403-bebf-c8ebb484e444",
        "tags" : [
        ]
      },
      {
        "id" : "02b64fb9-3ea7-4873-888c-e1f65f9c89a0",
        "parentId" : "0011f441-7b7f-48c8-902d-cb824e493290",
        "authorId" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "body" : "Yeah, I may take a trip sideways while we figure out how to get a more polished story around a lot of things in this space. I wanted to get a vertical slice up first.\n",
        "createdAt" : "2015-11-09T20:36:02Z",
        "updatedAt" : "2015-11-13T20:02:16Z",
        "lastEditedBy" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "tags" : [
        ]
      }
    ],
    "commit" : "51817850ba88dca100993ee4b9882cab105b2270",
    "line" : 62,
    "diffHunk" : "@@ -1,1 +60,64 @@  echo \"Successfully built Zeppelin\"\n\nADD zeppelin-log4j.properties /opt/zeppelin/conf/log4j.properties\nADD zeppelin-env.sh /opt/zeppelin/conf/zeppelin-env.sh\nADD docker-zeppelin.sh /opt/zeppelin/bin/docker-zeppelin.sh"
  },
  {
    "id" : "5c94adeb-776f-4b75-95f7-8138b62e643f",
    "prId" : 17025,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8296a5c4-03aa-46e2-a80c-9cc80d8b0898",
        "parentId" : null,
        "authorId" : "7db9cb1e-f5f2-40b7-8976-c2f85c0a6288",
        "body" : "You use curl here, though you install it further down on line 46. (though I changed the base image, so perhaps this isn't a problem for you on `java`, but then you should probably not try and install it again on line 46.\n",
        "createdAt" : "2015-11-11T18:23:02Z",
        "updatedAt" : "2015-11-13T20:02:16Z",
        "lastEditedBy" : "7db9cb1e-f5f2-40b7-8976-c2f85c0a6288",
        "tags" : [
        ]
      },
      {
        "id" : "d1a92ab1-fea1-45ae-82d4-b0a01071ba8a",
        "parentId" : "8296a5c4-03aa-46e2-a80c-9cc80d8b0898",
        "authorId" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "body" : "`curl` is installed on `buildpack-deps`, so this part is a noop. Fixed, though.\n",
        "createdAt" : "2015-11-11T20:56:59Z",
        "updatedAt" : "2015-11-13T20:02:16Z",
        "lastEditedBy" : "a92f8f9e-31fd-4510-b4d9-3553f7025485",
        "tags" : [
        ]
      }
    ],
    "commit" : "51817850ba88dca100993ee4b9882cab105b2270",
    "line" : 35,
    "diffHunk" : "@@ -1,1 +33,37 @@ENV HADOOP_VER    ${HADOOP_MINOR}.${HADOOP_PATCH}\n\nRUN curl -fsSL http://archive.apache.org/dist/maven/maven-3/${MAVEN_VERSION}/binaries/apache-maven-${MAVEN_VERSION}-bin.tar.gz | tar xzf - -C /usr/share \\\n  && mv /usr/share/apache-maven-${MAVEN_VERSION} /usr/share/maven \\\n  && ln -s /usr/share/maven/bin/mvn /usr/bin/mvn"
  }
]