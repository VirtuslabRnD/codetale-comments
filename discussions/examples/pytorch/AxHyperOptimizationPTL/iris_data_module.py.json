[
  {
    "id" : "1b22ac24-044a-44c6-8d45-50003801f2b2",
    "prId" : 4348,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/4348#pullrequestreview-657889216",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a2b48c31-ca87-4449-8e67-cde2f36f7cfb",
        "parentId" : null,
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "https://github.com/PyTorchLightning/pytorch-lightning/pull/7238 changed  how `prepare_data` works and caused the error:\r\n\r\n```python\r\n# Let's say `prepare_data` looks like this:\r\nclass MyDataModule(pl.LightningDataModule))\r\n    def prepare_data(self):\r\n      return \"foo\"\r\n\r\ndm = MyDataModule()\r\n\r\n# before #7238 \r\ndm.prepare_data()  # -> returns 'foo'\r\ndm.prepare_data()  # -> returns 'foo'\r\n\r\n# after #7238 \r\ndm.prepare_data()  # -> returns 'foo' and sets `self.has_prepared_data` to True\r\ndm.prepare_data()  # -> this is a no-op since we've already prepared data before,\r\n                     #    and returns nothing\r\n```\r\n\r\nIf `iris_full` is None, `random_split` will fail. As a workaround, I just defined a new function `_get_iris_as_tensor_dataset`.",
        "createdAt" : "2021-05-12T13:25:18Z",
        "updatedAt" : "2021-05-17T10:03:29Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      },
      {
        "id" : "787f754c-c972-4504-81cc-82e017c9daca",
        "parentId" : "a2b48c31-ca87-4449-8e67-cde2f36f7cfb",
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "test passed:\r\n\r\nhttps://github.com/mlflow/mlflow/pull/4348/checks?check_run_id=2565537638",
        "createdAt" : "2021-05-12T13:31:22Z",
        "updatedAt" : "2021-05-12T13:31:22Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      },
      {
        "id" : "5ca89952-b4c9-4e18-bdf2-cb17115fb75b",
        "parentId" : "a2b48c31-ca87-4449-8e67-cde2f36f7cfb",
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "https://github.com/mlflow/mlflow/pull/4350 should fix other failures.",
        "createdAt" : "2021-05-12T13:31:45Z",
        "updatedAt" : "2021-05-12T13:31:45Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      }
    ],
    "commit" : "9592640c0cdecc959a62e28f59b28a29747ca2b9",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +30,34 @@        if stage == \"fit\" or stage is None:\n            iris_full = self._get_iris_as_tensor_dataset()\n            self.train_set, self.val_set = random_split(iris_full, [130, 20])\n\n        # Assign test dataset for use in dataloader(s)"
  }
]