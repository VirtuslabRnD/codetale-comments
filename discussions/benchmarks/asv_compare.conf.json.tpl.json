[
  {
    "id" : "35783ecd-91c0-4976-980e-c368eba9b599",
    "prId" : 17736,
    "prUrl" : "https://github.com/numpy/numpy/pull/17736#pullrequestreview-527685141",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "717d85b7-34e6-42be-a7cf-a1138f3ff2b1",
        "parentId" : null,
        "authorId" : "919d650d-5f9e-4069-90f7-968e2cf7bb16",
        "body" : "This should be broken into two steps: one to check that `--no-use-pep517` is supported, and one to build the wheel. It might be easier to avoid the pip build altogether by adding a `bdist_wheel` build step\r\n```\r\nrm -rf dist\r\npython setup.py build {numpy_build_options} bdist_wheel\r\npython -mpip install dist/*.whl\r\n```",
        "createdAt" : "2020-11-09T06:02:42Z",
        "updatedAt" : "2020-11-09T06:02:42Z",
        "lastEditedBy" : "919d650d-5f9e-4069-90f7-968e2cf7bb16",
        "tags" : [
        ]
      },
      {
        "id" : "ac2ff08a-a15c-4264-9cf5-bd372206757a",
        "parentId" : "717d85b7-34e6-42be-a7cf-a1138f3ff2b1",
        "authorId" : "23ffb2ec-0278-4386-95f5-84cc15ce2cfd",
        "body" : "> This should be broken into two steps: one to check that --no-use-pep517 is supported, and one to build the wheel\r\n\r\nalready handle it through a separate python script `asv_pip_nopep517.py`, we're not free to use POSIX commands since we're targeting non-unix platforms too. e.g. windows\r\n\r\n> It might be easier to avoid the pip build altogether by adding a bdist_wheel build step\r\n\r\nI tried to use `bdist_wheel` but ASV wouldn't able to fetch the wheel file and cache it.\r\nalso, I tried to only use the `pip` command only but idk why `ccache` doesn't work properly\r\n\r\nhere is the default values of build commands :\r\n```Json\r\n\"install_command\":\r\n    [\"python -mpip install {wheel_file}\"],\r\n\"uninstall_command\":\r\n    [\"return-code=any python -mpip uninstall -y {project}\"],\r\n\"build_command\":\r\n    [\"python setup.py build\",\r\n     \"PIP_NO_BUILD_ISOLATION=false python -mpip wheel --no-deps --no-index -w {build_cache_dir} {build_dir}\"]\r\n```",
        "createdAt" : "2020-11-10T23:17:50Z",
        "updatedAt" : "2020-11-10T23:17:51Z",
        "lastEditedBy" : "23ffb2ec-0278-4386-95f5-84cc15ce2cfd",
        "tags" : [
        ]
      }
    ],
    "commit" : "11728e8a3cf967455aacc36e2d2237745b07c1e7",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +81,85 @@        // pip ignores '--global-option' when pep517 is enabled, we also enabling pip verbose to\n        // be reached from asv `--verbose` so we can verify the build options.\n        \"PIP_NO_BUILD_ISOLATION=false python {build_dir}/benchmarks/asv_pip_nopep517.py -v {numpy_global_options} --no-deps --no-index -w {build_cache_dir} {build_dir}\"\n    ],\n    // The commits after which the regression search in `asv publish`"
  }
]