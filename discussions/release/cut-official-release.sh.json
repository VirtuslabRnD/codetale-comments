[
  {
    "id" : "e9195a71-d4de-46f3-aaf0-dc8b6c35f635",
    "prId" : 16102,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7f8276e1-7a86-4585-b3fa-11efbcd7d947",
        "parentId" : null,
        "authorId" : null,
        "body" : "Can we fix this before merging?\n",
        "createdAt" : "2015-11-03T00:05:21Z",
        "updatedAt" : "2015-11-03T17:42:57Z",
        "lastEditedBy" : null,
        "tags" : [
        ]
      },
      {
        "id" : "9cdf80b4-c184-442d-ac78-4ea97e3ab77e",
        "parentId" : "7f8276e1-7a86-4585-b3fa-11efbcd7d947",
        "authorId" : "d513ff43-94d3-4f43-8358-1fb8132b6aae",
        "body" : "No, the change would have to be cherrypicked, so it would need to be a separate PR.\n",
        "createdAt" : "2015-11-03T17:27:42Z",
        "updatedAt" : "2015-11-03T17:42:57Z",
        "lastEditedBy" : "d513ff43-94d3-4f43-8358-1fb8132b6aae",
        "tags" : [
        ]
      }
    ],
    "commit" : "ed7b42c4a3e4e3aad8e79d92ca28625165962a88",
    "line" : 32,
    "diffHunk" : "@@ -1,1 +30,34 @@  fi\n  local -r new_version=${1-}\n  # TODO(ihmccreery) Stop calling it githash; it's not a githash.\n  local -r githash=${2-}\n  DRY_RUN=true"
  },
  {
    "id" : "979994f3-9c97-481e-b757-41a4e8bee85c",
    "prId" : 16102,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1e61771c-2bac-45b7-a1d6-b3c4a86ffe67",
        "parentId" : null,
        "authorId" : null,
        "body" : "This is not covered in in your instructions above.\n",
        "createdAt" : "2015-11-03T00:08:19Z",
        "updatedAt" : "2015-11-03T17:42:57Z",
        "lastEditedBy" : null,
        "tags" : [
        ]
      },
      {
        "id" : "19fea8f8-f2fd-4ccb-9c49-a43bec065feb",
        "parentId" : "1e61771c-2bac-45b7-a1d6-b3c4a86ffe67",
        "authorId" : "d513ff43-94d3-4f43-8358-1fb8132b6aae",
        "body" : "Fixed in 3466762.\n",
        "createdAt" : "2015-11-03T17:28:46Z",
        "updatedAt" : "2015-11-03T17:42:57Z",
        "lastEditedBy" : "d513ff43-94d3-4f43-8358-1fb8132b6aae",
        "tags" : [
        ]
      }
    ],
    "commit" : "ed7b42c4a3e4e3aad8e79d92ca28625165962a88",
    "line" : 35,
    "diffHunk" : "@@ -1,1 +33,37 @@  local -r githash=${2-}\n  DRY_RUN=true\n  if [[ \"${3-}\" == \"--no-dry-run\" ]]; then\n    echo \"!!! This NOT is a dry run.\"\n    DRY_RUN=false"
  },
  {
    "id" : "d08f71cf-6c30-4e08-adf4-f81da02f39d1",
    "prId" : 16102,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3e6d04b8-9033-4fde-bdd8-60a7ffcac75c",
        "parentId" : null,
        "authorId" : null,
        "body" : "nit: Can you perhaps remove some of the cut 'n paste code for release_type, version_major, version_minor, version_alpha_rev here?  For example by lifting common code out to above the 'if' statement?  Same comment applies to the regex's above.  They are all almost identical.  Can you factor out the common stuff?\n",
        "createdAt" : "2015-11-03T00:15:08Z",
        "updatedAt" : "2015-11-03T17:42:57Z",
        "lastEditedBy" : null,
        "tags" : [
        ]
      },
      {
        "id" : "8877b057-0944-4471-8992-8add933df8f3",
        "parentId" : "3e6d04b8-9033-4fde-bdd8-60a7ffcac75c",
        "authorId" : "d513ff43-94d3-4f43-8358-1fb8132b6aae",
        "body" : "While I agree with the intention, I think that would be a bad choice here, and would introduce more complexity than it would remove.  These regex's are different enough that it'd be pretty confusing.  For example, `BASH_REMATCH[3]` of the alpha regex is the alpha rev, whereas for the beta and official versions, it's the patch version, and for the series release, it doesn't exist.  I could just factor out major and minor versions, but I still think that would decrease readability and increase complexity.\n",
        "createdAt" : "2015-11-03T17:31:41Z",
        "updatedAt" : "2015-11-03T17:42:57Z",
        "lastEditedBy" : "d513ff43-94d3-4f43-8358-1fb8132b6aae",
        "tags" : [
        ]
      }
    ],
    "commit" : "ed7b42c4a3e4e3aad8e79d92ca28625165962a88",
    "line" : 64,
    "diffHunk" : "@@ -1,1 +62,66 @@    local -r version_major=\"${BASH_REMATCH[1]}\"\n    local -r version_minor=\"${BASH_REMATCH[2]}\"\n    local -r version_patch=\"${BASH_REMATCH[3]}\"\n  elif [[ \"${new_version}\" =~ $series_version_regex ]]; then\n    local -r release_type='series'"
  },
  {
    "id" : "8d52a8da-a225-44a8-bcf4-e55cec4f51c8",
    "prId" : 16102,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d13c83a8-6bab-480e-a2f1-4223f4d50c11",
        "parentId" : null,
        "authorId" : null,
        "body" : "It's bad karma to write directly to /tmp.  \nUse mktmp?  Something like this: \nhttp://unix.stackexchange.com/questions/181937/how-create-a-temporary-file-in-shell-script\n",
        "createdAt" : "2015-11-03T00:18:25Z",
        "updatedAt" : "2015-11-03T17:42:57Z",
        "lastEditedBy" : null,
        "tags" : [
        ]
      }
    ],
    "commit" : "ed7b42c4a3e4e3aad8e79d92ca28625165962a88",
    "line" : null,
    "diffHunk" : "@@ -1,1 +98,102 @@\n  # Start a tmp file that will hold instructions for the user.\n  declare -r INSTRUCTIONS=\"/tmp/kubernetes-${release_type}-release-${new_version}-$(date +%s)-instructions\"\n  if $DRY_RUN; then\n    cat > \"${INSTRUCTIONS}\" <<- EOM"
  },
  {
    "id" : "395fb10f-abb3-4250-8118-c02d7c955766",
    "prId" : 16102,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "09789bb1-94d9-4aa7-90fe-1603a373ec78",
        "parentId" : null,
        "authorId" : null,
        "body" : "This seems like gratuitous use of this syntax.  Would two echo's not be clearer?\n",
        "createdAt" : "2015-11-03T00:19:46Z",
        "updatedAt" : "2015-11-03T17:42:57Z",
        "lastEditedBy" : null,
        "tags" : [
        ]
      },
      {
        "id" : "fa5428f6-b064-4309-9e77-97ddb811796e",
        "parentId" : "09789bb1-94d9-4aa7-90fe-1603a373ec78",
        "authorId" : "d513ff43-94d3-4f43-8358-1fb8132b6aae",
        "body" : "This is now 7 lines instead of 2, so I think not, but if you feel strongly I'll change it.\n",
        "createdAt" : "2015-11-03T17:32:30Z",
        "updatedAt" : "2015-11-03T17:42:57Z",
        "lastEditedBy" : "d513ff43-94d3-4f43-8358-1fb8132b6aae",
        "tags" : [
        ]
      }
    ],
    "commit" : "ed7b42c4a3e4e3aad8e79d92ca28625165962a88",
    "line" : 102,
    "diffHunk" : "@@ -1,1 +100,104 @@  declare -r INSTRUCTIONS=\"/tmp/kubernetes-${release_type}-release-${new_version}-$(date +%s)-instructions\"\n  if $DRY_RUN; then\n    cat > \"${INSTRUCTIONS}\" <<- EOM\nSuccess on dry run!  Do\n"
  },
  {
    "id" : "8337c019-d9bd-45d4-8efa-04d2b9286ba0",
    "prId" : 16102,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "578742b7-51d4-4ea0-b604-23438b1a85e1",
        "parentId" : null,
        "authorId" : null,
        "body" : "Same comment as above?\n",
        "createdAt" : "2015-11-03T00:20:05Z",
        "updatedAt" : "2015-11-03T17:42:57Z",
        "lastEditedBy" : null,
        "tags" : [
        ]
      },
      {
        "id" : "0cd1f895-cceb-4307-b50e-dc228e321f77",
        "parentId" : "578742b7-51d4-4ea0-b604-23438b1a85e1",
        "authorId" : "d513ff43-94d3-4f43-8358-1fb8132b6aae",
        "body" : "I'd prefer consistency to doing exactly the right thing, but will change if you feel strongly.\n",
        "createdAt" : "2015-11-03T17:32:59Z",
        "updatedAt" : "2015-11-03T17:42:57Z",
        "lastEditedBy" : "d513ff43-94d3-4f43-8358-1fb8132b6aae",
        "tags" : [
        ]
      }
    ],
    "commit" : "ed7b42c4a3e4e3aad8e79d92ca28625165962a88",
    "line" : 116,
    "diffHunk" : "@@ -1,1 +114,118 @@Success!  You must now do the following:\n\nEOM\n  fi\n"
  },
  {
    "id" : "0b41c820-039c-4f78-bfe0-c019d0c01316",
    "prId" : 16102,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1f115628-db3d-463b-8d2d-f3fd82eebdec",
        "parentId" : null,
        "authorId" : null,
        "body" : "This all seems a little over-complicated?  Can you not just branch on the 'if which' statement above?\n",
        "createdAt" : "2015-11-03T00:25:43Z",
        "updatedAt" : "2015-11-03T17:42:57Z",
        "lastEditedBy" : null,
        "tags" : [
        ]
      },
      {
        "id" : "b4cc7bf5-c46d-43ab-84ea-4fe62ff6fea3",
        "parentId" : "1f115628-db3d-463b-8d2d-f3fd82eebdec",
        "authorId" : "d513ff43-94d3-4f43-8358-1fb8132b6aae",
        "body" : "This is copy-pasted from the old script.  Looking at it, I think this is the only way to take into account the possibility that GNU sed is masquerading as `sed`, (and not installed as gsed,) and the possibility that both `sed` and `gsed` are installed as themselves.\n",
        "createdAt" : "2015-11-03T17:41:07Z",
        "updatedAt" : "2015-11-03T17:42:57Z",
        "lastEditedBy" : "d513ff43-94d3-4f43-8358-1fb8132b6aae",
        "tags" : [
        ]
      }
    ],
    "commit" : "ed7b42c4a3e4e3aad8e79d92ca28625165962a88",
    "line" : 201,
    "diffHunk" : "@@ -1,1 +199,203 @@    SED=gsed\n  fi\n  if ! ($SED --version 2>&1 | grep -q GNU); then\n    echo \"!!! GNU sed is required.  If on OS X, use 'brew install gnu-sed'.\"\n    exit 1"
  }
]