[
  {
    "id" : "cc7f80a3-f795-4c11-a874-387a7440af55",
    "prId" : 6582,
    "prUrl" : "https://github.com/lampepfl/dotty/pull/6582#pullrequestreview-243303673",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4483a58f-49cc-4fed-9e9c-a7b85d08465a",
        "parentId" : null,
        "authorId" : "a7e5fcc8-eade-485d-96d2-94106dd74f83",
        "body" : "Keep this code in the function `printTrace` or with another name. `uniqueId_=` is called a lot and we do not want to increase the size of this method for the benefit of the JIT",
        "createdAt" : "2019-05-29T14:34:19Z",
        "updatedAt" : "2019-05-29T15:27:00Z",
        "lastEditedBy" : "a7e5fcc8-eade-485d-96d2-94106dd74f83",
        "tags" : [
        ]
      }
    ],
    "commit" : "483a0e65193c377325da2e298d501a1c2e4884f0",
    "line" : 21,
    "diffHunk" : "@@ -1,1 +29,33 @@  def uniqueId_=(id: Int): Unit = {\n    def printTrace() = {\n      println(s\"Debug tree (id=${Positioned.debugId}) creation \\n$this\\n\")\n      Reporter.displayPrompt(Console.in, new PrintWriter(Console.err, true))\n    }"
  },
  {
    "id" : "f94c6a73-bd17-424e-9987-b54577317a47",
    "prId" : 6363,
    "prUrl" : "https://github.com/lampepfl/dotty/pull/6363#pullrequestreview-230017675",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "edcce2ca-3a65-4d9b-bc2a-4178f5044b7e",
        "parentId" : null,
        "authorId" : "3a3c9c08-5985-41f6-a86b-7fc5a427f51a",
        "body" : "Why is the logic abstracted into a method instead of inlining it?",
        "createdAt" : "2019-04-23T22:42:05Z",
        "updatedAt" : "2019-04-23T22:43:07Z",
        "lastEditedBy" : "3a3c9c08-5985-41f6-a86b-7fc5a427f51a",
        "tags" : [
        ]
      },
      {
        "id" : "cebf6eb0-1ab0-46ee-9568-9a195e188822",
        "parentId" : "edcce2ca-3a65-4d9b-bc2a-4178f5044b7e",
        "authorId" : "a7e5fcc8-eade-485d-96d2-94106dd74f83",
        "body" : "`uniqueId_=` is probably a hot path as each tree creation will have a call to it. I put the code contained in this debug branch to make the bytecode of `uniqueId_=` smaller and probably simple to optimize from the JVM perspective.",
        "createdAt" : "2019-04-24T10:12:21Z",
        "updatedAt" : "2019-04-24T10:12:22Z",
        "lastEditedBy" : "a7e5fcc8-eade-485d-96d2-94106dd74f83",
        "tags" : [
        ]
      }
    ],
    "commit" : "5bb1ee39fa710e3fd2cf309c2a2f4f6fcef5551f",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +30,34 @@        System.err.println(stack.mkString(s\"> Debug tree (id=${Positioned.debugId}) creation \\n> $this\\n\", \"\\n\", \"\\n\"))\n      }\n      printTrace()\n    }\n    myUniqueId = id"
  },
  {
    "id" : "5adcf1f3-2232-4856-b680-0cd510a617bf",
    "prId" : 5748,
    "prUrl" : "https://github.com/lampepfl/dotty/pull/5748#pullrequestreview-194360810",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7c7639f9-ef2b-44a2-9ca7-983140c6842d",
        "parentId" : null,
        "authorId" : "9ffc9890-522c-4d3a-8fe5-fb5cbad2b309",
        "body" : "I don't think this changes whether an allocation happens or not but it does make the code more efficient, I've opened an issue to track this that you could refer to in this comment: https://github.com/lampepfl/dotty/issues/5750",
        "createdAt" : "2019-01-19T16:02:40Z",
        "updatedAt" : "2019-01-19T16:44:43Z",
        "lastEditedBy" : "9ffc9890-522c-4d3a-8fe5-fb5cbad2b309",
        "tags" : [
        ]
      }
    ],
    "commit" : "2ee9994efaf6b3b8b97377002c4a237fe9b5ce00",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +55,59 @@            envelope(source, span.startPos) // fill in children spans\n            () // Note: the `()` is there to prevent some inefficient code from being generated.\n               // Without it we get an allocation of a span here since the result type of the `if`\n               // is `Any`, the lub of `Span` and `Unit`.\n          }"
  }
]