[
  {
    "id" : "74640cbd-e096-4204-b009-937b76a4dd9f",
    "prId" : 4039,
    "prUrl" : "https://github.com/apache/airflow/pull/4039#pullrequestreview-164188054",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3b6c9112-8fd5-4da6-a844-515c725bb2e6",
        "parentId" : null,
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Do we need this check? A look at the doc you linked to and it sounds like any of these other stoppedReasons would also be \"we had to kill your task\" type things and should be an error to?",
        "createdAt" : "2018-10-12T08:12:43Z",
        "updatedAt" : "2018-10-17T18:00:32Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "2dd5817f-4e4e-44f6-8a95-a10255b00b8b",
        "parentId" : "3b6c9112-8fd5-4da6-a844-515c725bb2e6",
        "authorId" : "92236596-1494-43c1-a8ed-ce86a8b7a7b4",
        "body" : "> A look at the doc you linked to and it sounds like any of these other stoppedReasons would also be \"we had to kill your task\" type things and should be an error to?\r\n\r\nNot quite, @ashb. \"Essential container in task exited\" is the stoppedReason when your task successfully finishes. ðŸŒ€\r\n\r\nI _think_ you're probably right about some of the other stoppedReasons (\"Container instance deregistration forced by user\" jumps out), but the problem I'm trying to solve here is that when the host is terminated there is no other evidence of failure -- and I don't have any idea if those other stoppedReasons also have no evidence of failure or whether we can safely rely on the container's exit status. The container's exit status seems like the most precise indicator of success/failure, so I think it's preferable to use that indicator -- but in this edge case, that indicator fails.\r\n\r\nSo, you certainly may be correct that there are more edge cases, but I think we can limit this fix to the edge case we can prove.",
        "createdAt" : "2018-10-12T10:38:33Z",
        "updatedAt" : "2018-10-17T18:00:32Z",
        "lastEditedBy" : "92236596-1494-43c1-a8ed-ce86a8b7a7b4",
        "tags" : [
        ]
      }
    ],
    "commit" : "bc7b36b0b65f1e2d92231635cd0aaacdbc4719af",
    "line" : 16,
    "diffHunk" : "@@ -1,1 +145,149 @@            # in the response.\n            # See, https://docs.aws.amazon.com/AmazonECS/latest/developerguide/stopped-task-errors.html # noqa E501\n            if re.match(r'Host EC2 \\(instance .+?\\) (stopped|terminated)\\.',\n                        task.get('stoppedReason', '')):\n                raise AirflowException("
  }
]