[
  {
    "id" : "e7ffaa8d-e45c-464b-9d03-3c83a575759d",
    "prId" : 4772,
    "prUrl" : "https://github.com/apache/airflow/pull/4772#pullrequestreview-218458425",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "66b81874-fe97-4875-bc77-9f9400b7cff0",
        "parentId" : null,
        "authorId" : "b8b84983-5876-4ccf-886c-2449d94ca22f",
        "body" : "Is it a good idea to mount all secrets by default? Perhaps we should mount no secrets by default and require an explicit \"all\" value to mount all secrets.",
        "createdAt" : "2019-03-12T03:37:48Z",
        "updatedAt" : "2019-03-26T17:33:02Z",
        "lastEditedBy" : "b8b84983-5876-4ccf-886c-2449d94ca22f",
        "tags" : [
        ]
      },
      {
        "id" : "a1bdbe3c-514c-49a1-ad4e-13c6e29cc92c",
        "parentId" : "66b81874-fe97-4875-bc77-9f9400b7cff0",
        "authorId" : "237ce3c7-4b32-4b71-9920-6949d33231ee",
        "body" : "@dimberman that depends how people manage secrets objects.\r\n\r\nThere are 2 approaches. \r\nA) Secret object in k8s holds all necessary secret to one service like DB. So if You need 2 services like PostgreSQL and MySQL You mount 2 secret objects `postgresql-secret` and `mysql-secret` and they are available in containers. Every secret object has 3-4 keys (like user, password, port etc.)\r\nB) Secret object per deployment object/stateful set. So all necessary secret keys for deployment object are in one secret object. So if there are 5 microservices, there are a corresponding 5 secret objects.\r\n\r\nHaving all secrets in one secret object I would consider as really bad practice in k8s, You should have always some practice to have secrets segregated by some rules in different secret objects to make it more maintainable.\r\n\r\nIn context of airflow I would assume to have secret objects like in case of A). So I mount to env variables only this services credentials that will be used by KubernetesPodOperator. \r\n\r\nMounting key by key is giving a lot of maintenance burden and is much more error-prone for typo or other issues like that.",
        "createdAt" : "2019-03-12T06:34:13Z",
        "updatedAt" : "2019-03-26T17:33:02Z",
        "lastEditedBy" : "237ce3c7-4b32-4b71-9920-6949d33231ee",
        "tags" : [
        ]
      },
      {
        "id" : "3bbc6f14-decd-48c2-b946-621fea62f523",
        "parentId" : "66b81874-fe97-4875-bc77-9f9400b7cff0",
        "authorId" : "b8b84983-5876-4ccf-886c-2449d94ca22f",
        "body" : "SGTM.",
        "createdAt" : "2019-03-25T16:55:17Z",
        "updatedAt" : "2019-03-26T17:33:02Z",
        "lastEditedBy" : "b8b84983-5876-4ccf-886c-2449d94ca22f",
        "tags" : [
        ]
      }
    ],
    "commit" : "32bb44231e58c3a5d32f701331b6096121f89239",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +33,37 @@        :param secret: Name of the secrets object in Kubernetes\n        :type secret: str\n        :param key: (Optional) Key of the secret within the Kubernetes Secret\n            if not provided in `deploy_type` `env` it will mount all secrets in object\n        :type key: str or None"
  }
]