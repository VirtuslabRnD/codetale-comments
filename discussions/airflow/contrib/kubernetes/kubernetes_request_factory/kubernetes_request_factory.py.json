[
  {
    "id" : "bf737700-f0b7-4423-b8a7-ac79d18792fc",
    "prId" : 2853,
    "prUrl" : "https://github.com/apache/airflow/pull/2853#pullrequestreview-88339931",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "994888df-9af4-4cdd-b0c7-dec2d7f8d536",
        "parentId" : null,
        "authorId" : "4363ee34-34fc-4419-a9b1-8c383c62e81c",
        "body" : "Is it easy to support more arbitrary pod resources requests/limits? For example, 'nvidia.com/gpu'. Would be nice to be able to request GPU resources. ",
        "createdAt" : "2018-01-05T21:57:23Z",
        "updatedAt" : "2018-01-11T23:31:46Z",
        "lastEditedBy" : "4363ee34-34fc-4419-a9b1-8c383c62e81c",
        "tags" : [
        ]
      },
      {
        "id" : "c40a5018-4edb-4d1a-9726-a4a838d69da8",
        "parentId" : "994888df-9af4-4cdd-b0c7-dec2d7f8d536",
        "authorId" : "b8b84983-5876-4ccf-886c-2449d94ca22f",
        "body" : "@kevincvlam what would you recommend for the user interface for that? I'd want to avoid forcing users to create a dict.",
        "createdAt" : "2018-01-05T22:44:22Z",
        "updatedAt" : "2018-01-11T23:31:46Z",
        "lastEditedBy" : "b8b84983-5876-4ccf-886c-2449d94ca22f",
        "tags" : [
        ]
      },
      {
        "id" : "d7581db6-8a34-4dea-a17b-e7c65522185f",
        "parentId" : "994888df-9af4-4cdd-b0c7-dec2d7f8d536",
        "authorId" : "530497f6-e5e6-42f2-a59c-9d7bbcbecaaf",
        "body" : "@kevincvlam \r\nThere is definitely a tradeoff here between extensibility and type-safety/readability of the api. \r\n\r\nThe simplest api would be to let users write their pod as a nested dict that gets directly translated into kubernetes json, but that can be painful for some tasks. The api we provided is more pythonic, with the downside that exposing new features of kubernetes requires adding more code in the \"translation layer\". \r\n\r\nI'm open to both approaches, I think there can be a case made for both. ",
        "createdAt" : "2018-01-11T20:24:43Z",
        "updatedAt" : "2018-01-11T23:31:46Z",
        "lastEditedBy" : "530497f6-e5e6-42f2-a59c-9d7bbcbecaaf",
        "tags" : [
        ]
      },
      {
        "id" : "44326169-9ad5-4e87-bc11-c0f5cfb58c9e",
        "parentId" : "994888df-9af4-4cdd-b0c7-dec2d7f8d536",
        "authorId" : "4363ee34-34fc-4419-a9b1-8c383c62e81c",
        "body" : "@dimberman @grantnicholas makes sense, and good points. I think @grantnicholas highlighted the trade-off well, and I'm not sure what approach is best. Might mull it over a bit more.\r\n\r\nIn the case that it's decided to avoid forcing users to create a dict, I'd request that the 'nvidia.com/gpu' resource type be added in the \"translation layer\" :-).  ",
        "createdAt" : "2018-01-11T23:12:04Z",
        "updatedAt" : "2018-01-11T23:31:46Z",
        "lastEditedBy" : "4363ee34-34fc-4419-a9b1-8c383c62e81c",
        "tags" : [
        ]
      },
      {
        "id" : "d7148881-ccee-4e46-a9d2-852bd18f7742",
        "parentId" : "994888df-9af4-4cdd-b0c7-dec2d7f8d536",
        "authorId" : "b8b84983-5876-4ccf-886c-2449d94ca22f",
        "body" : "@kevincvlam Would you be willing to either PR this in once this PR is merged or leave a quick issue on https://github.com/bloomberg/airflow/issues? I think this is a good feature but It'll be a lot easier to add things in once the initial PR is merged.",
        "createdAt" : "2018-01-11T23:18:16Z",
        "updatedAt" : "2018-01-11T23:31:46Z",
        "lastEditedBy" : "b8b84983-5876-4ccf-886c-2449d94ca22f",
        "tags" : [
        ]
      },
      {
        "id" : "17dce6af-fc2e-4a34-b23a-5984eadfac4c",
        "parentId" : "994888df-9af4-4cdd-b0c7-dec2d7f8d536",
        "authorId" : "4363ee34-34fc-4419-a9b1-8c383c62e81c",
        "body" : "@dimberman Possibly.. for now created issue: https://github.com/bloomberg/airflow/issues/42. +1, this makes sense as a follow-up PR. Thanks!",
        "createdAt" : "2018-01-11T23:23:48Z",
        "updatedAt" : "2018-01-11T23:31:46Z",
        "lastEditedBy" : "4363ee34-34fc-4419-a9b1-8c383c62e81c",
        "tags" : [
        ]
      }
    ],
    "commit" : "7fb5906e68fdf351e97acbf04f334b2a86081e81",
    "line" : 132,
    "diffHunk" : "@@ -1,1 +130,134 @@        req['spec']['containers'][0]['resources'] = {}\n\n        if pod.resources.has_requests():\n            req['spec']['containers'][0]['resources']['requests'] = {}\n            if pod.resources.request_memory:"
  }
]