[
  {
    "id" : "2749f42a-838c-4006-ba48-43a428fa915d",
    "prId" : 3683,
    "prUrl" : "https://github.com/apache/airflow/pull/3683#pullrequestreview-159176316",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c1561ec1-f5bd-418e-85fc-78f6e0a49bbd",
        "parentId" : null,
        "authorId" : "b8b84983-5876-4ccf-886c-2449d94ca22f",
        "body" : "Could we please modify this s.t. users can determine not to use a volume for logs? Would be great to completely separate the necessity of volumes for launching.",
        "createdAt" : "2018-09-26T18:11:32Z",
        "updatedAt" : "2018-09-26T18:11:36Z",
        "lastEditedBy" : "b8b84983-5876-4ccf-886c-2449d94ca22f",
        "tags" : [
        ]
      },
      {
        "id" : "60f95940-cb9d-4992-bbd7-964b823a2fc4",
        "parentId" : "c1561ec1-f5bd-418e-85fc-78f6e0a49bbd",
        "authorId" : "8cc62cac-2987-4c96-b42f-b48674563b1b",
        "body" : "I agree with this, actually I need this.",
        "createdAt" : "2018-09-26T20:07:47Z",
        "updatedAt" : "2018-09-26T20:07:47Z",
        "lastEditedBy" : "8cc62cac-2987-4c96-b42f-b48674563b1b",
        "tags" : [
        ]
      }
    ],
    "commit" : "9401914f2db78f73ea505dc0937186a7514336b2",
    "line" : 46,
    "diffHunk" : "@@ -1,1 +136,140 @@            )\n\n        logs_volume_mount = {\n            'name': logs_volume_name,\n            'mountPath': self.worker_airflow_logs,"
  },
  {
    "id" : "35a5eaa7-926c-4ddb-83d2-3a86632d91eb",
    "prId" : 3770,
    "prUrl" : "https://github.com/apache/airflow/pull/3770#pullrequestreview-187971169",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "dbd3fa90-cb32-45c7-ab07-46a95843f49b",
        "parentId" : null,
        "authorId" : "e0ab21dd-3845-409d-8484-419c87f736cb",
        "body" : "does this fix the issue of the revision being in the path directory?",
        "createdAt" : "2018-12-07T03:50:03Z",
        "updatedAt" : "2018-12-25T18:19:45Z",
        "lastEditedBy" : "e0ab21dd-3845-409d-8484-419c87f736cb",
        "tags" : [
        ]
      },
      {
        "id" : "ea78c0e0-75ad-4c8e-99d6-fcf3bd2fbb62",
        "parentId" : "dbd3fa90-cb32-45c7-ab07-46a95843f49b",
        "authorId" : "b8b84983-5876-4ccf-886c-2449d94ca22f",
        "body" : "@odracci can you please address @jzucker2's question.",
        "createdAt" : "2018-12-26T22:21:02Z",
        "updatedAt" : "2018-12-26T22:30:40Z",
        "lastEditedBy" : "b8b84983-5876-4ccf-886c-2449d94ca22f",
        "tags" : [
        ]
      },
      {
        "id" : "4b207d7b-3352-4c60-87a6-05f83a468fbd",
        "parentId" : "dbd3fa90-cb32-45c7-ab07-46a95843f49b",
        "authorId" : "c389b2c0-5345-4f3d-b699-84a63fbcd23e",
        "body" : "I'm sorry, I haven't seen that comment.\r\n`GIT_SYNC_DEPTH` just clone the repo with the last commit instead of downloading the whole repo history, it speeds up the deployment.\r\nThe revision being in the path directory is how git-sync works and is not possible to remove it.\r\nI solved the problem with `kube_config.git_sync_root` which includes the dags_folder + revision + git_sub_path\r\n/cc @jzucker2 @dimberman ",
        "createdAt" : "2018-12-26T22:45:10Z",
        "updatedAt" : "2018-12-26T22:45:10Z",
        "lastEditedBy" : "c389b2c0-5345-4f3d-b699-84a63fbcd23e",
        "tags" : [
        ]
      }
    ],
    "commit" : "2ea12639694c487d9e84854fd7858142ffe3f253",
    "line" : 41,
    "diffHunk" : "@@ -1,1 +62,66 @@            'value': self.kube_config.git_sync_dest\n        }, {\n            'name': 'GIT_SYNC_DEPTH',\n            'value': '1'\n        }, {"
  },
  {
    "id" : "cec243be-b5eb-4069-b3ed-e7ec4f161cb6",
    "prId" : 3770,
    "prUrl" : "https://github.com/apache/airflow/pull/3770#pullrequestreview-182542901",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "72b7c2d3-83f2-48d0-bb94-30ffacb909c1",
        "parentId" : null,
        "authorId" : "e0ab21dd-3845-409d-8484-419c87f736cb",
        "body" : "this always seemed like such an issue that it's hard coded in the `master` branch, I'm glad this is being addressed",
        "createdAt" : "2018-12-07T03:50:48Z",
        "updatedAt" : "2018-12-25T18:19:45Z",
        "lastEditedBy" : "e0ab21dd-3845-409d-8484-419c87f736cb",
        "tags" : [
        ]
      }
    ],
    "commit" : "2ea12639694c487d9e84854fd7858142ffe3f253",
    "line" : 74,
    "diffHunk" : "@@ -1,1 +102,106 @@        if self.kube_config.airflow_configmap:\n            env['AIRFLOW__CORE__AIRFLOW_HOME'] = self.worker_airflow_home\n            env['AIRFLOW__CORE__DAGS_FOLDER'] = self.worker_airflow_dags\n        if (not self.kube_config.airflow_configmap and\n                'AIRFLOW__CORE__SQL_ALCHEMY_CONN' not in self.kube_config.kube_secrets):"
  },
  {
    "id" : "d8652b79-a4ad-471f-a585-dcba2fe995c8",
    "prId" : 4777,
    "prUrl" : "https://github.com/apache/airflow/pull/4777#pullrequestreview-209516859",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "10dd2a42-4ac9-4d02-987f-13b2c3635eeb",
        "parentId" : null,
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Why does this ignore the volumes_dict returned form `init_volumes_and_mounts`? ",
        "createdAt" : "2019-02-26T09:53:15Z",
        "updatedAt" : "2019-03-01T13:46:27Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "88fbb337-111a-457a-91a5-9d0d38ceadb7",
        "parentId" : "10dd2a42-4ac9-4d02-987f-13b2c3635eeb",
        "authorId" : "3f91a86e-42db-48af-8925-65da3eb10923",
        "body" : "There are three volumes: the dags volume, the logs volume and the git ssh secret volume (if SSH is turned on)\r\n\r\nwith the deep copy you had the init container having all of the mounts that the pod container has, but there is no logical need for the init container:\r\n- to share the same mount path for the dags (and we can manage security for the init pod better)\r\n - no needs for the Airflow logs to be mounted\r\n - the git SSH secret can be mounted to the init container without it being mounted on the worker pods (so you only have it on the worker during initialization, no need for SSH github secret in the worker post initialization since the DAGs are pulled once) ",
        "createdAt" : "2019-02-26T10:03:08Z",
        "updatedAt" : "2019-03-01T13:46:27Z",
        "lastEditedBy" : "3f91a86e-42db-48af-8925-65da3eb10923",
        "tags" : [
        ]
      },
      {
        "id" : "3fb4acb2-6ba9-4d7d-b3d7-fed4af9b16d1",
        "parentId" : "10dd2a42-4ac9-4d02-987f-13b2c3635eeb",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Ahhhh gotcha. Nice",
        "createdAt" : "2019-03-01T10:28:14Z",
        "updatedAt" : "2019-03-01T13:46:27Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      }
    ],
    "commit" : "9cf874f4caea72ccf5cc617c74e8339d02bb1899",
    "line" : 158,
    "diffHunk" : "@@ -1,1 +283,287 @@                 try_number, airflow_command, kube_executor_config):\n        volumes_dict, volume_mounts_dict = self._get_volumes_and_mounts()\n        worker_init_container_spec = self._get_init_containers()\n        resources = Resources(\n            request_memory=kube_executor_config.request_memory,"
  },
  {
    "id" : "179ab069-e953-47f7-bc3d-4cab56e93d0b",
    "prId" : 7663,
    "prUrl" : "https://github.com/apache/airflow/pull/7663#pullrequestreview-375525892",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "aadfcdfd-72b5-4bdf-962d-dfacbfb2581b",
        "parentId" : null,
        "authorId" : "db6eb8b7-c895-4f19-9e3d-6fa0535f27e2",
        "body" : "```suggestion\r\n        for env_var_name, env_var_val in self.kube_config.kube_env_vars.items():\r\n```\r\n\r\nAirflow dropped Python 2 support, so no need to use the six library. Other than that, looks good to me.",
        "createdAt" : "2020-03-16T19:28:01Z",
        "updatedAt" : "2020-03-16T19:28:01Z",
        "lastEditedBy" : "db6eb8b7-c895-4f19-9e3d-6fa0535f27e2",
        "tags" : [
        ]
      },
      {
        "id" : "7b7e6eb9-f6e7-4f67-95e2-91762a9f5d9b",
        "parentId" : "aadfcdfd-72b5-4bdf-962d-dfacbfb2581b",
        "authorId" : "03e41e23-f438-4a06-9652-8f20638d2c3a",
        "body" : "This is targeted for the v1-10 branch",
        "createdAt" : "2020-03-16T19:34:06Z",
        "updatedAt" : "2020-03-16T19:34:06Z",
        "lastEditedBy" : "03e41e23-f438-4a06-9652-8f20638d2c3a",
        "tags" : [
        ]
      }
    ],
    "commit" : "6bc1e3cb408f09b2b76e4a9fb8bf42a00a4d299b",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +75,79 @@        }]\n\n        for env_var_name, env_var_val in six.iteritems(self.kube_config.kube_env_vars):\n            init_environment.append({\n                'name': env_var_name,"
  }
]