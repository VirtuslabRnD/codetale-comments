[
  {
    "id" : "5a592c6e-de08-4678-85d8-5b6775ce0b87",
    "prId" : 3744,
    "prUrl" : "https://github.com/apache/airflow/pull/3744#pullrequestreview-146289165",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9697135c-9851-427f-8102-09e170938a8f",
        "parentId" : null,
        "authorId" : "8c7ab425-7894-4f97-b3ae-7fe362e7b212",
        "body" : "Can you also include location in this regex e.g. '.../dataflow/jobsDetail/locations/${location}/jobs/'? In case a job is running in multiple locations.",
        "createdAt" : "2018-08-14T22:55:56Z",
        "updatedAt" : "2018-08-15T03:51:57Z",
        "lastEditedBy" : "8c7ab425-7894-4f97-b3ae-7fe362e7b212",
        "tags" : [
        ]
      },
      {
        "id" : "3e571a06-d732-4492-bdba-8aaa76aa0842",
        "parentId" : "9697135c-9851-427f-8102-09e170938a8f",
        "authorId" : "1aceaa64-1d3b-44c8-b7b9-3404a109eb8d",
        "body" : "Note that this is the URL of the Cloud Console job monitoring page where job-id is a flat thing (i.e., no location hierarchy). ",
        "createdAt" : "2018-08-14T23:00:50Z",
        "updatedAt" : "2018-08-15T03:51:57Z",
        "lastEditedBy" : "1aceaa64-1d3b-44c8-b7b9-3404a109eb8d",
        "tags" : [
        ]
      },
      {
        "id" : "8b15136f-37cb-45ac-b232-0219e9d36034",
        "parentId" : "9697135c-9851-427f-8102-09e170938a8f",
        "authorId" : "8c7ab425-7894-4f97-b3ae-7fe362e7b212",
        "body" : "The linked line includes location- I think location is in the hierarchy from looking at it as well.",
        "createdAt" : "2018-08-14T23:02:30Z",
        "updatedAt" : "2018-08-15T03:51:57Z",
        "lastEditedBy" : "8c7ab425-7894-4f97-b3ae-7fe362e7b212",
        "tags" : [
        ]
      },
      {
        "id" : "f78149e2-c9fe-481e-bb8d-146ddb5dd3df",
        "parentId" : "9697135c-9851-427f-8102-09e170938a8f",
        "authorId" : "8c7ab425-7894-4f97-b3ae-7fe362e7b212",
        "body" : "Actually this should be fine. Even though there is a location in the hierarchy, the operator is only launching one job, so job id collision is not a concern.",
        "createdAt" : "2018-08-14T23:29:41Z",
        "updatedAt" : "2018-08-15T03:51:57Z",
        "lastEditedBy" : "8c7ab425-7894-4f97-b3ae-7fe362e7b212",
        "tags" : [
        ]
      }
    ],
    "commit" : "86d2dd17bcb78ea3d84397d14aa727140c75a347",
    "line" : 61,
    "diffHunk" : "@@ -1,1 +142,146 @@        # Job id info: https://goo.gl/SE29y9.\n        job_id_pattern = re.compile(\n            b'.*console.cloud.google.com/dataflow.*/jobs/([a-z|0-9|A-Z|\\-|\\_]+).*')\n        matched_job = job_id_pattern.search(line or '')\n        if matched_job:"
  },
  {
    "id" : "6b3ea6c2-7f18-4ea7-8fb2-c7243606013f",
    "prId" : 3887,
    "prUrl" : "https://github.com/apache/airflow/pull/3887#pullrequestreview-154865560",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "63a5e353-b05a-4431-a582-8e63775ea7c3",
        "parentId" : null,
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "Do we need appending if a user specifies job_name ðŸ¤” ? ",
        "createdAt" : "2018-09-12T21:28:59Z",
        "updatedAt" : "2018-09-12T22:29:32Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "aec604eb-e378-4c13-8dde-4b9cfe26c75f",
        "parentId" : "63a5e353-b05a-4431-a582-8e63775ea7c3",
        "authorId" : "8ed447ec-192f-4018-875e-ba8e4b77b923",
        "body" : "Good question.  Provided job name could still be non-unique, but yeah, could be handled by the caller in that case.  Would still be useful during testing, IMO.",
        "createdAt" : "2018-09-12T22:15:23Z",
        "updatedAt" : "2018-09-12T22:29:32Z",
        "lastEditedBy" : "8ed447ec-192f-4018-875e-ba8e4b77b923",
        "tags" : [
        ]
      }
    ],
    "commit" : "655693ceb7add37e78e110de71701603e377e6c0",
    "line" : 75,
    "diffHunk" : "@@ -1,1 +247,251 @@\n        if append_job_name:\n            safe_job_name = base_job_name + \"-\" + str(uuid.uuid4())[:8]\n        else:\n            safe_job_name = base_job_name"
  },
  {
    "id" : "e1e80c90-fef2-4322-bb14-202d891773df",
    "prId" : 4633,
    "prUrl" : "https://github.com/apache/airflow/pull/4633#pullrequestreview-262431152",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "afa01d59-3bc1-4c63-ba0a-90f346de37f2",
        "parentId" : null,
        "authorId" : "03e41e23-f438-4a06-9652-8f20638d2c3a",
        "body" : "Can we move this test up as well?",
        "createdAt" : "2019-07-15T21:58:08Z",
        "updatedAt" : "2019-07-16T21:16:15Z",
        "lastEditedBy" : "03e41e23-f438-4a06-9652-8f20638d2c3a",
        "tags" : [
        ]
      },
      {
        "id" : "0935a958-be8a-4353-a789-0549207248e4",
        "parentId" : "afa01d59-3bc1-4c63-ba0a-90f346de37f2",
        "authorId" : "7ca7754b-a7f2-4c4e-a401-3d2512b3eb25",
        "body" : "organized by logical order",
        "createdAt" : "2019-07-16T13:51:15Z",
        "updatedAt" : "2019-07-16T21:16:15Z",
        "lastEditedBy" : "7ca7754b-a7f2-4c4e-a401-3d2512b3eb25",
        "tags" : [
        ]
      }
    ],
    "commit" : "3343d834eb6b9657ab439d2bdda7afa61b52e1d3",
    "line" : 151,
    "diffHunk" : "@@ -1,1 +164,168 @@                DataflowJobStatus.JOB_TYPE_STREAMING == job['type']:\n            return True\n        elif job['currentState'] in {DataflowJobStatus.JOB_STATE_RUNNING,\n                                     DataflowJobStatus.JOB_STATE_PENDING}:\n            time.sleep(self._poll_sleep)"
  },
  {
    "id" : "53057e1b-2810-4033-8f21-88cd05aad261",
    "prId" : 4633,
    "prUrl" : "https://github.com/apache/airflow/pull/4633#pullrequestreview-262230267",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8f52002f-f53f-440d-8ab6-34390daf6329",
        "parentId" : null,
        "authorId" : "03e41e23-f438-4a06-9652-8f20638d2c3a",
        "body" : "I'm still not sure about this flag, we can just infer this from the API right?",
        "createdAt" : "2019-07-15T22:00:37Z",
        "updatedAt" : "2019-07-16T21:16:15Z",
        "lastEditedBy" : "03e41e23-f438-4a06-9652-8f20638d2c3a",
        "tags" : [
        ]
      },
      {
        "id" : "2ed2b20e-1e74-4509-b58d-671580833408",
        "parentId" : "8f52002f-f53f-440d-8ab6-34390daf6329",
        "authorId" : "7ca7754b-a7f2-4c4e-a401-3d2512b3eb25",
        "body" : "this flag means that the dataflow run will create more than one job, and we need to monitor all to know if it was successful or failure",
        "createdAt" : "2019-07-16T07:28:33Z",
        "updatedAt" : "2019-07-16T21:16:15Z",
        "lastEditedBy" : "7ca7754b-a7f2-4c4e-a401-3d2512b3eb25",
        "tags" : [
        ]
      }
    ],
    "commit" : "3343d834eb6b9657ab439d2bdda7afa61b52e1d3",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +60,64 @@        self._job_name = name\n        self._job_location = location\n        self._multiple_jobs = multiple_jobs\n        self._job_id = job_id\n        self._num_retries = num_retries"
  },
  {
    "id" : "9e399397-3825-4bc0-b1da-b0fad59af2b5",
    "prId" : 4633,
    "prUrl" : "https://github.com/apache/airflow/pull/4633#pullrequestreview-284646070",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bfba42c2-d888-4743-8628-70e1ef46257b",
        "parentId" : null,
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "Here is the problem. This method  returns a dictionary here, when list of dictionaries is expected. This makes it impossible to determine job id\r\n```\r\n[2019-09-06 03:20:51,974] {taskinstance.py:1042} ERROR - string indices must be integers\r\nTraceback (most recent call last):\r\n  File \"/opt/airflow/airflow/models/taskinstance.py\", line 917, in _run_raw_task\r\n    result = task_copy.execute(context=context)\r\n  File \"/opt/airflow/airflow/gcp/operators/dataflow.py\", line 216, in execute\r\n    self.jar, self.job_class, True, self.multiple_jobs)\r\n  File \"/opt/airflow/airflow/gcp/hooks/dataflow.py\", line 372, in start_java_dataflow\r\n    self._start_dataflow(variables, name, command_prefix, label_formatter, multiple_jobs)\r\n  File \"/opt/airflow/airflow/contrib/hooks/gcp_api_base_hook.py\", line 307, in wrapper\r\n    return func(self, *args, **kwargs)\r\n  File \"/opt/airflow/airflow/gcp/hooks/dataflow.py\", line 327, in _start_dataflow\r\n    variables['region'], self.poll_sleep, job_id, self.num_retries, multiple_jobs) \\\r\n  File \"/opt/airflow/airflow/gcp/hooks/dataflow.py\", line 76, in __init__\r\n    self._jobs = self._get_jobs()\r\n  File \"/opt/airflow/airflow/gcp/hooks/dataflow.py\", line 138, in _get_jobs\r\n    self._job_id, job['name']\r\nTypeError: string indices must be integers\r\n```",
        "createdAt" : "2019-09-06T04:03:20Z",
        "updatedAt" : "2019-09-06T17:10:03Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      }
    ],
    "commit" : "3343d834eb6b9657ab439d2bdda7afa61b52e1d3",
    "line" : 60,
    "diffHunk" : "@@ -1,1 +89,93 @@        \"\"\"\n        if not self._multiple_jobs and self._job_id:\n            return self._dataflow.projects().locations().jobs().get(\n                projectId=self._project_number,\n                location=self._job_location,"
  }
]