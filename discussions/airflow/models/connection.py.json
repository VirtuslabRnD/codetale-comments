[
  {
    "id" : "d62cc9ee-2757-41d6-b64b-87d94bb55ac7",
    "prId" : 4523,
    "prUrl" : "https://github.com/apache/airflow/pull/4523#pullrequestreview-194514894",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cca4b7f7-0782-48e9-92a8-d25fc4a197a4",
        "parentId" : null,
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "A general comment @mik-laj .  Should not we rather change the Google Connection scheme to be google-cloud-platform rather than replace '_' with '-' ? I think it's more accurate, simply the google_cloud_platform scheme is wrong - according to https://tools.ietf.org/html/rfc3986#page-17  the scheme part of the URI can only contain alphanumeric characters, hyphen or dot. So urlparse behaves quite well and we should simply change the scheme to be google-cloud-platform",
        "createdAt" : "2019-01-20T16:38:15Z",
        "updatedAt" : "2019-02-15T15:00:17Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      },
      {
        "id" : "883a561c-8e75-4942-9985-2024953a1659",
        "parentId" : "cca4b7f7-0782-48e9-92a8-d25fc4a197a4",
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "In the context of format of  conn_type, this is a permitted character.\r\nIn the context of the URL format, this is not allowed.\r\nWe can make a conn_type change to be compatible with the url format. but this change can be problematic. In many places `conn_type` with an underscore is already present. I decided that it would be better to provide a greater level of backwards compatibility at the expense of code readability. The current solution does not cause any changes that break compatibility.",
        "createdAt" : "2019-01-20T16:54:50Z",
        "updatedAt" : "2019-02-15T15:00:17Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      },
      {
        "id" : "80c08995-1d19-4cc3-9408-22d48da2fbd1",
        "parentId" : "cca4b7f7-0782-48e9-92a8-d25fc4a197a4",
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "This implementation requires providing `google-cloud-platform` values as a schema. but after analyzing by urllib.parse, a forbidden character(`_`) from the schema part is replaced into an equivalent(`-`). You must provide `google-cloud-platform` to create a connection with conn_type equals to `google_cloud_platform`.",
        "createdAt" : "2019-01-20T17:01:30Z",
        "updatedAt" : "2019-02-15T15:00:17Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      },
      {
        "id" : "377f859e-531f-4d41-a3e0-5c6f6ea52666",
        "parentId" : "cca4b7f7-0782-48e9-92a8-d25fc4a197a4",
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "Note that no conn_type uses the hyphen character except `'mesos_framework-id`, which does not allow you to read configuration from an environment variable.\r\n\r\nReference:\r\nhttps://github.com/apache/airflow/blob/f430dbedc5b4c68cdff9d6d760b29bdd73c0682f/airflow/models/connection.py#L54-L91\r\nhttps://github.com/apache/airflow/blob/c9a82d48a30f09baacb369979ffab6ed39fd02c3/airflow/contrib/executors/mesos_executor.py#L88-L93",
        "createdAt" : "2019-01-20T17:34:13Z",
        "updatedAt" : "2019-02-15T15:00:17Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      },
      {
        "id" : "5e909f89-24f5-45fb-860d-ab6f022086bf",
        "parentId" : "cca4b7f7-0782-48e9-92a8-d25fc4a197a4",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "OK. Make sense! I agree it's the best way of solving it  this way. Good analysis and solution !",
        "createdAt" : "2019-01-21T09:50:37Z",
        "updatedAt" : "2019-02-15T15:00:17Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "7dc7ed804f3b03453b1819f96432b9f10cf6f15f",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +117,121 @@            conn_type = 'postgres'\n        elif '-' in conn_type:\n            conn_type = conn_type.replace('-', '_')\n        self.conn_type = conn_type\n        self.host = unquote(hostname) if hostname else hostname"
  }
]