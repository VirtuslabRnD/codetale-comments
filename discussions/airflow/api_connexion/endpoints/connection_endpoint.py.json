[
  {
    "id" : "5000ab69-73f1-4e85-b63a-f0cff434d132",
    "prId" : 9266,
    "prUrl" : "https://github.com/apache/airflow/pull/9266#pullrequestreview-430260979",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a375afc5-86bc-4b6b-b55c-c66ae61ec25b",
        "parentId" : null,
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "Can you also add validation for the mask? The mask should not contain fields that are on the allowed list. In particular, you should not be able to save any data to the _password field. This is a very common mistake, which leads to CATastrophe.",
        "createdAt" : "2020-06-14T21:32:15Z",
        "updatedAt" : "2020-06-21T15:23:30Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      },
      {
        "id" : "75f3c035-a753-4c34-9e8c-99573edf5e86",
        "parentId" : "a375afc5-86bc-4b6b-b55c-c66ae61ec25b",
        "authorId" : "c7b0cb1c-ff95-4ec9-a0c6-a9f1b5135a52",
        "body" : "Hi, check if this is ok https://github.com/apache/airflow/commit/09a7ab8be098059f1a388eeebd09610169a83117",
        "createdAt" : "2020-06-14T23:16:08Z",
        "updatedAt" : "2020-06-21T15:23:30Z",
        "lastEditedBy" : "c7b0cb1c-ff95-4ec9-a0c6-a9f1b5135a52",
        "tags" : [
        ]
      },
      {
        "id" : "e2794289-073f-473a-9115-175c40bdf32c",
        "parentId" : "a375afc5-86bc-4b6b-b55c-c66ae61ec25b",
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "Ah. Probably I was wrong, but I will still have to check how connexion behaves when it sees additional fields in the request from the user. It seems to me that it could be set in the connexion configuration, but I'm not sure. I will come back to this because it will take me a moment to check.",
        "createdAt" : "2020-06-14T23:31:36Z",
        "updatedAt" : "2020-06-21T15:23:30Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      }
    ],
    "commit" : "ddd3904d7f52ff1f627bc04ae4d7f43e6109e7d4",
    "line" : 77,
    "diffHunk" : "@@ -1,1 +82,86 @@    if data.get('conn_id', None) and connection.conn_id != data['conn_id']:\n        raise BadRequest(\"The connection_id cannot be updated.\")\n    if update_mask:\n        update_mask = [i.strip() for i in update_mask]\n        data_ = {}"
  },
  {
    "id" : "ba9203f7-81b8-44a8-bc52-9a65fcf3abf9",
    "prId" : 9266,
    "prUrl" : "https://github.com/apache/airflow/pull/9266#pullrequestreview-430253398",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6b44c77e-e069-47cd-986c-98d42e818c2f",
        "parentId" : null,
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "```suggestion\r\n    conn_id = data['connection_id']\r\n```\r\nIs there a mistake here?",
        "createdAt" : "2020-06-14T21:33:56Z",
        "updatedAt" : "2020-06-21T15:23:30Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      },
      {
        "id" : "d8af008a-46a0-4297-9c84-03a23ede1959",
        "parentId" : "6b44c77e-e069-47cd-986c-98d42e818c2f",
        "authorId" : "c7b0cb1c-ff95-4ec9-a0c6-a9f1b5135a52",
        "body" : "No. After passing through the` connection_schema`, it becomes `conn_id`. The dumping and loading comes from `connection_id`",
        "createdAt" : "2020-06-14T21:41:27Z",
        "updatedAt" : "2020-06-21T15:23:30Z",
        "lastEditedBy" : "c7b0cb1c-ff95-4ec9-a0c6-a9f1b5135a52",
        "tags" : [
        ]
      }
    ],
    "commit" : "ddd3904d7f52ff1f627bc04ae4d7f43e6109e7d4",
    "line" : 106,
    "diffHunk" : "@@ -1,1 +109,113 @@        raise BadRequest(detail=str(err.messages))\n    data = result.data\n    conn_id = data['conn_id']\n    query = session.query(Connection)\n    connection = query.filter_by(conn_id=conn_id).first()"
  },
  {
    "id" : "7fe68ef9-313d-48f9-8c13-dbe42ed78af2",
    "prId" : 14895,
    "prUrl" : "https://github.com/apache/airflow/pull/14895#pullrequestreview-625511266",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "468dad8f-2477-4364-9b8a-3e7b0d0eb3bc",
        "parentId" : null,
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "Should we sort by `id` or `conn_id`  -- no storng preference",
        "createdAt" : "2021-03-31T09:49:23Z",
        "updatedAt" : "2021-03-31T09:49:24Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "6526b6c9-210a-4ad0-b352-2a395484332b",
        "parentId" : "468dad8f-2477-4364-9b8a-3e7b0d0eb3bc",
        "authorId" : "c7b0cb1c-ff95-4ec9-a0c6-a9f1b5135a52",
        "body" : "It was originally ordered by `id`, so I made that the default else it won't be backward compatible",
        "createdAt" : "2021-03-31T14:19:57Z",
        "updatedAt" : "2021-03-31T14:19:58Z",
        "lastEditedBy" : "c7b0cb1c-ff95-4ec9-a0c6-a9f1b5135a52",
        "tags" : [
        ]
      },
      {
        "id" : "6cb53883-e9cc-4300-b645-e9b3917f75e8",
        "parentId" : "468dad8f-2477-4364-9b8a-3e7b0d0eb3bc",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "sounds good.",
        "createdAt" : "2021-03-31T16:49:47Z",
        "updatedAt" : "2021-03-31T16:49:47Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      }
    ],
    "commit" : "babb72c8e1598ae5f312a07d1686aa9aeda34cab",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +64,68 @@@format_parameters({'limit': check_limit})\n@provide_session\ndef get_connections(session, limit, offset=0, order_by=\"id\"):\n    \"\"\"Get all connection entries\"\"\"\n    to_replace = {\"connection_id\": \"conn_id\"}"
  },
  {
    "id" : "a0c70750-dee8-406a-8704-5133258ebcc9",
    "prId" : 15795,
    "prUrl" : "https://github.com/apache/airflow/pull/15795#pullrequestreview-665386770",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ff476f89-749d-44df-81b7-875ad4528931",
        "parentId" : null,
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Why do we need to do this? We've already got the connection object created...",
        "createdAt" : "2021-05-20T17:21:08Z",
        "updatedAt" : "2021-05-20T17:21:12Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "81c9f6e4-c786-4bbc-98ec-5d74a2b6bfef",
        "parentId" : "ff476f89-749d-44df-81b7-875ad4528931",
        "authorId" : "73893400-eac1-4c2c-8fdc-49a7c6b2dae8",
        "body" : "Yes, but some hooks tried to get the conn object from their __init__, and as we are not storing anything in DB, they fail. Setting it in env let them use the connection. ",
        "createdAt" : "2021-05-21T07:40:08Z",
        "updatedAt" : "2021-05-21T07:40:09Z",
        "lastEditedBy" : "73893400-eac1-4c2c-8fdc-49a7c6b2dae8",
        "tags" : [
        ]
      },
      {
        "id" : "ded801ed-945f-4628-b70e-52234c8e80fd",
        "parentId" : "ff476f89-749d-44df-81b7-875ad4528931",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Oh yes, gotcha. Could you add a comment saying why we need this please",
        "createdAt" : "2021-05-21T12:00:53Z",
        "updatedAt" : "2021-05-21T12:00:53Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      }
    ],
    "commit" : "5d771532809b4d5e6cbf2b8887e9f6784f1fd6be",
    "line" : 43,
    "diffHunk" : "@@ -1,1 +151,155 @@        data['conn_id'] = dummy_conn_id\n        conn = Connection(**data)\n        os.environ[conn_env_var] = conn.get_uri()\n        status, message = conn.test_connection()\n        return connection_test_schema.dump({\"status\": status, \"message\": message})"
  }
]