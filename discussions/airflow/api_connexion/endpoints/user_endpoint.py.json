[
  {
    "id" : "85de802e-9a5d-452f-ba22-1d556ad2982c",
    "prId" : 16609,
    "prUrl" : "https://github.com/apache/airflow/pull/16609#pullrequestreview-690813556",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "02abbcac-b88b-4c1a-a677-ebf228ca5726",
        "parentId" : null,
        "authorId" : "c7b0cb1c-ff95-4ec9-a0c6-a9f1b5135a52",
        "body" : "We can add a check that AUTH_USER_REGISTRATION is True and return early if disabled?",
        "createdAt" : "2021-06-23T12:46:24Z",
        "updatedAt" : "2021-06-23T12:46:24Z",
        "lastEditedBy" : "c7b0cb1c-ff95-4ec9-a0c6-a9f1b5135a52",
        "tags" : [
        ]
      },
      {
        "id" : "f83dcc26-1cd0-49b4-bf92-e48a8d4400ae",
        "parentId" : "02abbcac-b88b-4c1a-a677-ebf228ca5726",
        "authorId" : "a5092e56-4956-45ec-9914-ecec6b63df73",
        "body" : "Oh, yes we should, will do. (What error should we return, 405 Method Not Allowed?)",
        "createdAt" : "2021-06-23T12:49:15Z",
        "updatedAt" : "2021-06-23T12:49:15Z",
        "lastEditedBy" : "a5092e56-4956-45ec-9914-ecec6b63df73",
        "tags" : [
        ]
      },
      {
        "id" : "ead91eb4-1112-47f7-871b-82bb242fb11d",
        "parentId" : "02abbcac-b88b-4c1a-a677-ebf228ca5726",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "405 doesn't quite feel right from an HTTP/REST stand point.\r\n\r\n422 might work (even if it's strictly from WebDAV) https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422",
        "createdAt" : "2021-06-23T12:52:28Z",
        "updatedAt" : "2021-06-23T12:52:28Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "b95f78ee-30a4-421e-b6c8-c43ed2e0e85b",
        "parentId" : "02abbcac-b88b-4c1a-a677-ebf228ca5726",
        "authorId" : "c7b0cb1c-ff95-4ec9-a0c6-a9f1b5135a52",
        "body" : "BadRequest will be fine as I think that it's a user error",
        "createdAt" : "2021-06-23T12:52:57Z",
        "updatedAt" : "2021-06-23T12:52:58Z",
        "lastEditedBy" : "c7b0cb1c-ff95-4ec9-a0c6-a9f1b5135a52",
        "tags" : [
        ]
      },
      {
        "id" : "052e41f5-8470-46fc-ba13-0517a9fea4b9",
        "parentId" : "02abbcac-b88b-4c1a-a677-ebf228ca5726",
        "authorId" : "c7b0cb1c-ff95-4ec9-a0c6-a9f1b5135a52",
        "body" : "> 405 doesn't quite feel right from an HTTP/REST stand point.\r\n> \r\n> 422 might work (even if it's strictly from WebDAV) https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422\r\n\r\nCool",
        "createdAt" : "2021-06-23T12:53:37Z",
        "updatedAt" : "2021-06-23T12:53:37Z",
        "lastEditedBy" : "c7b0cb1c-ff95-4ec9-a0c6-a9f1b5135a52",
        "tags" : [
        ]
      },
      {
        "id" : "b9b10b8d-cf14-40de-8af0-9efc682f5703",
        "parentId" : "02abbcac-b88b-4c1a-a677-ebf228ca5726",
        "authorId" : "a5092e56-4956-45ec-9914-ecec6b63df73",
        "body" : "I kind of feel 400 is not appropriate, since the API client does not know whether a server allows registration or not. I’ll use 403 for now since MDN’s description seems to somehow make sense in this context:\r\n\r\n>  The access is permanently forbidden and tied to the application logic, such as insufficient rights to a resource.\r\n\r\nhttps://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403",
        "createdAt" : "2021-06-23T15:22:24Z",
        "updatedAt" : "2021-06-23T15:22:24Z",
        "lastEditedBy" : "a5092e56-4956-45ec-9914-ecec6b63df73",
        "tags" : [
        ]
      }
    ],
    "commit" : "cd545fcf03c2f9077b2696acd1aa28b9b619ce1d",
    "line" : 31,
    "diffHunk" : "@@ -1,1 +70,74 @@@security.requires_access([(permissions.ACTION_CAN_CREATE, permissions.RESOURCE_USER)])\ndef post_user():\n    \"\"\"Create a new user\"\"\"\n    try:\n        data = user_schema.load(request.json)"
  }
]