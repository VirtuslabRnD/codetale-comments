[
  {
    "id" : "ecde3a63-42e0-42a6-8f56-46da2f4aa190",
    "prId" : 948,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "240afa8d-392a-4d23-af52-ed4fa2f09f71",
        "parentId" : null,
        "authorId" : "0624866b-ba3a-41a3-abab-e487a9cfb78c",
        "body" : "This is the actual fix, the rest is just search and replace\n",
        "createdAt" : "2016-02-03T18:25:17Z",
        "updatedAt" : "2016-02-03T18:25:17Z",
        "lastEditedBy" : "0624866b-ba3a-41a3-abab-e487a9cfb78c",
        "tags" : [
        ]
      },
      {
        "id" : "0d5cb747-763e-4e4e-b745-ce359828d442",
        "parentId" : "240afa8d-392a-4d23-af52-ed4fa2f09f71",
        "authorId" : "92e402fb-479e-4b08-88f2-3b82c356ecc3",
        "body" : "Cool. I can help test it once you merge it, but looks good to the eye!\n",
        "createdAt" : "2016-02-03T21:03:52Z",
        "updatedAt" : "2016-02-03T21:03:52Z",
        "lastEditedBy" : "92e402fb-479e-4b08-88f2-3b82c356ecc3",
        "tags" : [
        ]
      },
      {
        "id" : "fdc9354f-1aa6-4d54-9fed-f81ba2a090ce",
        "parentId" : "240afa8d-392a-4d23-af52-ed4fa2f09f71",
        "authorId" : "92e402fb-479e-4b08-88f2-3b82c356ecc3",
        "body" : "This fix addresses the problem raised by the reporter in https://github.com/airbnb/airflow/issues/920, but I've raised some concerns about how we are managing configuration in that issue, which we can fix by providing an easy way to inspect a unified view of the winning configuration in one place. \n",
        "createdAt" : "2016-02-03T21:17:37Z",
        "updatedAt" : "2016-02-03T21:17:37Z",
        "lastEditedBy" : "92e402fb-479e-4b08-88f2-3b82c356ecc3",
        "tags" : [
        ]
      }
    ],
    "commit" : "b5ed58c112f447276627e6484b6dab60d6bfc65a",
    "line" : 127,
    "diffHunk" : "@@ -1,1 +2100,2104 @@    @classmethod\n    def alert_fernet_key(cls):\n        return conf.get('core', 'fernet_key') is None\n\n    @classmethod"
  },
  {
    "id" : "7510ccf1-b48a-41ef-9cfb-29ac5f73c632",
    "prId" : 1504,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a9a0da3d-0fca-4692-a33b-3dd221a50d5e",
        "parentId" : null,
        "authorId" : "0624866b-ba3a-41a3-abab-e487a9cfb78c",
        "body" : "the current working directory may not be the one you think it is. I'd use something like `os.path.join(settings.AIRFLOW_HOME, 'git_version')`\n",
        "createdAt" : "2016-05-19T15:28:09Z",
        "updatedAt" : "2016-05-19T15:28:09Z",
        "lastEditedBy" : "0624866b-ba3a-41a3-abab-e487a9cfb78c",
        "tags" : [
        ]
      },
      {
        "id" : "7dbbd8e7-66d0-40fd-97f5-ce7527487b55",
        "parentId" : "a9a0da3d-0fca-4692-a33b-3dd221a50d5e",
        "authorId" : "92e402fb-479e-4b08-88f2-3b82c356ecc3",
        "body" : "Done, though I am using os.path.join(*[settings.AIRFLOW_HOME, 'airflow', 'git_version']) here and in setup.py\n",
        "createdAt" : "2016-05-19T18:06:29Z",
        "updatedAt" : "2016-05-19T18:06:29Z",
        "lastEditedBy" : "92e402fb-479e-4b08-88f2-3b82c356ecc3",
        "tags" : [
        ]
      }
    ],
    "commit" : "7d32c174f34132bf79abbef6a397a07f20bf5ecd",
    "line" : 41,
    "diffHunk" : "@@ -1,1 +2308,2312 @@        git_version = None\n        try:\n            with open(\"airflow/git_version\") as f:\n                git_version = f.readline()\n        except Exception as e:"
  },
  {
    "id" : "91ae1db7-c20a-40b2-afaf-9a9254a12f9e",
    "prId" : 1523,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "99a5ceb2-62af-4cd9-bb83-c97da90d4dd8",
        "parentId" : null,
        "authorId" : "366b1763-372e-4924-9c92-2ea8968443bd",
        "body" : "Curious about this. Do you guys run with AIRFLOW_HOME containing the entire AIRFLOW code base? We `pip install` airflow, and AIRFLOW_HOME points to a separate directory that just has airflow.cfg, dags dir, etc. I'm not sure that this would work for us, since `git_version` would be under the Python package dir, not AIRFLOW_HOME.\n",
        "createdAt" : "2016-05-19T18:56:26Z",
        "updatedAt" : "2016-05-19T19:25:53Z",
        "lastEditedBy" : "366b1763-372e-4924-9c92-2ea8968443bd",
        "tags" : [
        ]
      },
      {
        "id" : "18adbfe8-d242-4998-a199-6c064cfb677d",
        "parentId" : "99a5ceb2-62af-4cd9-bb83-c97da90d4dd8",
        "authorId" : "92e402fb-479e-4b08-88f2-3b82c356ecc3",
        "body" : "We will need to iterate on this as we learn more about how different companies install. This feature could be the forcing function.\n",
        "createdAt" : "2016-05-19T22:22:21Z",
        "updatedAt" : "2016-05-19T22:22:21Z",
        "lastEditedBy" : "92e402fb-479e-4b08-88f2-3b82c356ecc3",
        "tags" : [
        ]
      }
    ],
    "commit" : "aedb667d50e512655a590ec2af03504947dd9acb",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +2308,2312 @@        git_version = None\n        try:\n            with open(os.path.join(*[settings.AIRFLOW_HOME, 'airflow', 'git_version'])) as f:\n                git_version = f.readline()\n        except Exception as e:"
  },
  {
    "id" : "80372cc6-2f66-4fbf-b1d8-d2dedfdaa2df",
    "prId" : 4368,
    "prUrl" : "https://github.com/apache/airflow/pull/4368#pullrequestreview-187873400",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "89b7e136-a514-407e-a79d-9a77dfdb9e9f",
        "parentId" : null,
        "authorId" : "03e41e23-f438-4a06-9652-8f20638d2c3a",
        "body" : "Maybe give this a bit more meaningful name? Something like `dag_state_stats`.",
        "createdAt" : "2018-12-26T09:54:52Z",
        "updatedAt" : "2018-12-26T20:52:20Z",
        "lastEditedBy" : "03e41e23-f438-4a06-9652-8f20638d2c3a",
        "tags" : [
        ]
      },
      {
        "id" : "78fd35d4-b829-4fb9-9209-40addcf432ef",
        "parentId" : "89b7e136-a514-407e-a79d-9a77dfdb9e9f",
        "authorId" : "0706c3c0-d32f-4dda-aba2-181cb4e0f0e8",
        "body" : "üëç ",
        "createdAt" : "2018-12-26T10:38:08Z",
        "updatedAt" : "2018-12-26T20:52:20Z",
        "lastEditedBy" : "0706c3c0-d32f-4dda-aba2-181cb4e0f0e8",
        "tags" : [
        ]
      }
    ],
    "commit" : "4db22b18a8f323bbb01b309b457c8fb5b3ca7a4c",
    "line" : 18,
    "diffHunk" : "@@ -1,1 +557,561 @@        dag_state_stats = session.query(dr.dag_id, dr.state, sqla.func.count(dr.state)).group_by(dr.dag_id, dr.state)\n\n        data = {}\n        for (dag_id, ) in dag_ids:\n            data[dag_id] = {}"
  },
  {
    "id" : "d8d15d59-451c-47ec-8836-3131d5bfbbbf",
    "prId" : 4401,
    "prUrl" : "https://github.com/apache/airflow/pull/4401#pullrequestreview-190373846",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0f8d361d-b5e7-4298-9399-d2aa0a5d91b6",
        "parentId" : null,
        "authorId" : "38d80383-47b9-439a-9efe-9282f79f8b2f",
        "body" : "thanks. I go back and check https://github.com/apache/airflow/blob/master/airflow/models/__init__.py#L3560 which we define active_run to only running state. Initially, I thought scheduled would be one of them as well.",
        "createdAt" : "2019-01-08T18:11:43Z",
        "updatedAt" : "2019-01-08T18:11:43Z",
        "lastEditedBy" : "38d80383-47b9-439a-9efe-9282f79f8b2f",
        "tags" : [
        ]
      }
    ],
    "commit" : "740067ba14e5c086a254eefcb871ff391e888535",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +685,689 @@        active_runs = models.DagRun.find(\n            dag_id=dag.dag_id,\n            state=State.RUNNING,\n            external_trigger=False,\n            session=session"
  },
  {
    "id" : "fb5369bc-3414-47ed-bc06-604f879b4e27",
    "prId" : 4492,
    "prUrl" : "https://github.com/apache/airflow/pull/4492#pullrequestreview-193103618",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cbde251d-48ae-4e79-9fc9-24e2708d7d3a",
        "parentId" : null,
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "I never was happy with this whole next_try_number hack - I should find time to have one row per try instead\r\nof a row per TI that gets altered.",
        "createdAt" : "2019-01-14T10:01:36Z",
        "updatedAt" : "2019-01-14T10:01:36Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "b4ab59ec-5647-46b7-b5b8-985b5c78e2a3",
        "parentId" : "cbde251d-48ae-4e79-9fc9-24e2708d7d3a",
        "authorId" : "fa4e8b53-4987-4d88-99c9-e25f26d1515b",
        "body" : "@ashb I'd like that as well! Is there an issue for that work?",
        "createdAt" : "2019-01-15T14:51:29Z",
        "updatedAt" : "2019-01-15T14:51:29Z",
        "lastEditedBy" : "fa4e8b53-4987-4d88-99c9-e25f26d1515b",
        "tags" : [
        ]
      },
      {
        "id" : "2c9883a1-0bb5-4e67-ae2f-39103b82db26",
        "parentId" : "cbde251d-48ae-4e79-9fc9-24e2708d7d3a",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "I don't think so. We'd need to work out how to do the migration so that viewing old tasks still works.\r\n\r\nIf you create a Jira ticket we can discuss some of the details on there.",
        "createdAt" : "2019-01-15T21:17:00Z",
        "updatedAt" : "2019-01-15T21:17:00Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "86034769-55a2-4c80-8f17-7e3e4e99d4b6",
        "parentId" : "cbde251d-48ae-4e79-9fc9-24e2708d7d3a",
        "authorId" : "44a4606a-9224-404a-87fd-9a2417fd2610",
        "body" : "There is already the `task_fail` table which has one row per try. But only in case the task failed and is retried. However when a task is cleared (via UI) then there is no indication why there are more tries. ",
        "createdAt" : "2019-01-15T23:03:53Z",
        "updatedAt" : "2019-01-15T23:03:53Z",
        "lastEditedBy" : "44a4606a-9224-404a-87fd-9a2417fd2610",
        "tags" : [
        ]
      },
      {
        "id" : "e496ec23-0eed-40ed-bab0-f1bae013a1cd",
        "parentId" : "cbde251d-48ae-4e79-9fc9-24e2708d7d3a",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Another thing I would like to remove: \"clear\"ing tasks as it deletes history :) Instead I would like a \"retry\" button in the UI and ending up with \"Attempt 3 of 2\" sort of thing.\r\n\r\nThe other advantage of having each try/attempt being a row is that we could then store the URL of the log against that row, to have old logs still be readable even after a future change to Airflow's logging pattern. (Both 1.9 and 1.10 made logs from previous versions no-longer-readable in the UI.)",
        "createdAt" : "2019-01-16T12:07:52Z",
        "updatedAt" : "2019-01-16T12:07:53Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      }
    ],
    "commit" : "2e87a7c0153bd0a0afe613584a42e81c850e8365",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +872,876 @@        num_logs = 0\n        if ti is not None:\n            num_logs = ti.next_try_number - 1\n            if ti.state == State.UP_FOR_RESCHEDULE:\n                # Tasks in reschedule state decremented the try number"
  },
  {
    "id" : "3fe23184-4880-463d-92ab-f5774621280e",
    "prId" : 4502,
    "prUrl" : "https://github.com/apache/airflow/pull/4502#pullrequestreview-194191862",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5daa5106-5e8b-4513-8af4-6e6426bda634",
        "parentId" : null,
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Lol so much easier :D",
        "createdAt" : "2019-01-18T16:59:54Z",
        "updatedAt" : "2019-01-18T17:00:32Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      }
    ],
    "commit" : "4f62097fc4d635e7cf7f2b0573159a367b7fde0e",
    "line" : 36,
    "diffHunk" : "@@ -1,1 +1737,1741 @@        for tf in ti_fails:\n            end_date = tf.end_date or timezone.utcnow()\n            gantt_bar_items.append((tf.task_id, tf.start_date, end_date, State.FAILED))\n\n        tasks = []"
  },
  {
    "id" : "115e3935-9300-47d5-bfc6-28ebc15ca098",
    "prId" : 4597,
    "prUrl" : "https://github.com/apache/airflow/pull/4597#pullrequestreview-196814172",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "29acd2b1-351f-466b-94b5-c934bf911e15",
        "parentId" : null,
        "authorId" : "38d80383-47b9-439a-9efe-9282f79f8b2f",
        "body" : "@astahlman , since you are at this function, maybe we should consider add a check and see whether the user has permission to do refresh_all view.\r\n\r\nThe AirflowSecurityManager provides a way to check whether the user's role(https://github.com/apache/airflow/blob/master/airflow/www/security.py#L283). But we could do it in a different pr.",
        "createdAt" : "2019-01-27T06:49:09Z",
        "updatedAt" : "2019-01-27T16:09:47Z",
        "lastEditedBy" : "38d80383-47b9-439a-9efe-9282f79f8b2f",
        "tags" : [
        ]
      }
    ],
    "commit" : "5cdec70adae317e90497e30606086184d453410d",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +1690,1694 @@        for dag_id in dagbag.dags:\n            # sync permissions for all dags\n            appbuilder.sm.sync_perm_for_dag(dag_id)\n        flash(\"All DAGs are now up to date\")\n        return redirect('/')"
  },
  {
    "id" : "5b558510-2537-473a-bbe8-78b968d39537",
    "prId" : 4863,
    "prUrl" : "https://github.com/apache/airflow/pull/4863#pullrequestreview-211765017",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "32e3da71-2020-4d18-bb80-07fcf24378f4",
        "parentId" : null,
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "We've already got a `session` object in scope here.",
        "createdAt" : "2019-03-07T10:59:37Z",
        "updatedAt" : "2019-03-08T10:24:10Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "3a89e98d-bac4-41b8-afc3-c642f98604f4",
        "parentId" : "32e3da71-2020-4d18-bb80-07fcf24378f4",
        "authorId" : "0706c3c0-d32f-4dda-aba2-181cb4e0f0e8",
        "body" : "not anymore, just did remove that",
        "createdAt" : "2019-03-07T12:55:48Z",
        "updatedAt" : "2019-03-08T10:24:10Z",
        "lastEditedBy" : "0706c3c0-d32f-4dda-aba2-181cb4e0f0e8",
        "tags" : [
        ]
      }
    ],
    "commit" : "3207bd2f8b66eb881dab4286365a53c31291009e",
    "line" : 44,
    "diffHunk" : "@@ -1,1 +1186,1190 @@            base_date = dag.latest_execution_date or timezone.utcnow()\n\n        with create_session() as session:\n            dag_runs = (\n                session.query(DagRun)"
  }
]