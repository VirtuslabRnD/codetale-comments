[
  {
    "id" : "1319bf72-ac1b-4499-9d62-3a89ddebb27f",
    "prId" : 74,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "26147148-2cb6-4cb3-aa88-65b325e689f9",
        "parentId" : null,
        "authorId" : "17b8d1d6-c407-48e8-afe4-8efbb26b2ac0",
        "body" : "Which is it that you wish to return? :P\n",
        "createdAt" : "2015-06-25T08:00:18Z",
        "updatedAt" : "2015-06-25T08:00:18Z",
        "lastEditedBy" : "17b8d1d6-c407-48e8-afe4-8efbb26b2ac0",
        "tags" : [
        ]
      },
      {
        "id" : "6b313c19-fe40-4758-a8d0-b36c899a2a55",
        "parentId" : "26147148-2cb6-4cb3-aa88-65b325e689f9",
        "authorId" : "0624866b-ba3a-41a3-abab-e487a9cfb78c",
        "body" : "Oops. I'll trim the second return out\n",
        "createdAt" : "2015-06-25T18:46:49Z",
        "updatedAt" : "2015-06-25T18:46:49Z",
        "lastEditedBy" : "0624866b-ba3a-41a3-abab-e487a9cfb78c",
        "tags" : [
        ]
      }
    ],
    "commit" : "ec7422334bd2d6aa4a12d4dff2abbc4eb8a1edf1",
    "line" : 29,
    "diffHunk" : "@@ -1,1 +112,116 @@        HtmlFormatter(linenos=True),\n    )\n    return s\n\ndef wrapped_markdown(s):"
  },
  {
    "id" : "c0c976c5-59c7-4041-97b0-b2035c0c5122",
    "prId" : 448,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2e782574-3f13-4c74-9421-41d94660a76a",
        "parentId" : null,
        "authorId" : "0624866b-ba3a-41a3-abab-e487a9cfb78c",
        "body" : "Limit the range?\n\n```\nif len(dates) > MAX_PERIOD:\n    flash(\"Limited the ....\", \"warning\")\n    dates = dates[-MAX_PERIOD:]\n```\n",
        "createdAt" : "2015-09-22T22:13:40Z",
        "updatedAt" : "2015-09-30T21:23:31Z",
        "lastEditedBy" : "0624866b-ba3a-41a3-abab-e487a9cfb78c",
        "tags" : [
        ]
      },
      {
        "id" : "a0daee28-eac1-40de-b944-d0e046a2cd97",
        "parentId" : "2e782574-3f13-4c74-9421-41d94660a76a",
        "authorId" : "0624866b-ba3a-41a3-abab-e487a9cfb78c",
        "body" : "Actually I'm not sure what MAX_PERIODS should be, maybe we should limit what comes out of the cartesian product instead...\n",
        "createdAt" : "2015-09-22T22:18:49Z",
        "updatedAt" : "2015-09-30T21:23:31Z",
        "lastEditedBy" : "0624866b-ba3a-41a3-abab-e487a9cfb78c",
        "tags" : [
        ]
      },
      {
        "id" : "ecd27073-7988-4fb8-9bcd-1de441dbf550",
        "parentId" : "2e782574-3f13-4c74-9421-41d94660a76a",
        "authorId" : "2047c56c-66c7-4242-875d-8c8db277f369",
        "body" : "What feels like a reasonable cap to you? Since we already ask for confirmation I'm tempted to omit a cap since it simplifies things. I agree the cap, if it exists, should be on the cartesian product `tasks` object.\n",
        "createdAt" : "2015-09-23T17:29:57Z",
        "updatedAt" : "2015-09-30T21:23:31Z",
        "lastEditedBy" : "2047c56c-66c7-4242-875d-8c8db277f369",
        "tags" : [
        ]
      },
      {
        "id" : "da6ac086-3d0a-45a9-aaf7-eff05a9f61f2",
        "parentId" : "2e782574-3f13-4c74-9421-41d94660a76a",
        "authorId" : "0624866b-ba3a-41a3-abab-e487a9cfb78c",
        "body" : "Yeah, 1k? We'll have to see how long it takes to do 1k. Shouldn't be more than 15 - 30 seconds. With the cap on the cartesian product along with the fix bellow you could eventually get it through by repeating the same command N times.\n",
        "createdAt" : "2015-09-24T00:42:53Z",
        "updatedAt" : "2015-09-30T21:23:31Z",
        "lastEditedBy" : "0624866b-ba3a-41a3-abab-e487a9cfb78c",
        "tags" : [
        ]
      }
    ],
    "commit" : "6f8372d752e7fae89ac1740749d662d27b06dcca",
    "line" : 59,
    "diffHunk" : "@@ -1,1 +999,1003 @@                    for t in task.get_flat_relatives(upstream=True)]\n            TI = models.TaskInstance\n            dates = utils.date_range(start_date, end_date)\n            tis = session.query(TI).filter(\n                TI.dag_id == dag_id,"
  },
  {
    "id" : "4b0ae1c6-9a82-4dd2-9261-d4658b486931",
    "prId" : 448,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b4c6c18f-accf-46cc-9677-5eb24dc36c5a",
        "parentId" : null,
        "authorId" : "0624866b-ba3a-41a3-abab-e487a9cfb78c",
        "body" : "We may want to add a filter here on `not success` (I think it would reduce the number of database operations as we don't need to touch task instances that have already succeeded)\n",
        "createdAt" : "2015-09-22T22:30:28Z",
        "updatedAt" : "2015-09-30T21:23:31Z",
        "lastEditedBy" : "0624866b-ba3a-41a3-abab-e487a9cfb78c",
        "tags" : [
        ]
      },
      {
        "id" : "c9aeb309-3f34-4f37-bfdd-42fb0651ff5f",
        "parentId" : "b4c6c18f-accf-46cc-9677-5eb24dc36c5a",
        "authorId" : "2047c56c-66c7-4242-875d-8c8db277f369",
        "body" : "Good idea!\n",
        "createdAt" : "2015-09-23T17:27:33Z",
        "updatedAt" : "2015-09-30T21:23:31Z",
        "lastEditedBy" : "2047c56c-66c7-4242-875d-8c8db277f369",
        "tags" : [
        ]
      },
      {
        "id" : "91dc33ca-621b-4f6e-b199-34996ebc95b2",
        "parentId" : "b4c6c18f-accf-46cc-9677-5eb24dc36c5a",
        "authorId" : "2047c56c-66c7-4242-875d-8c8db277f369",
        "body" : "Tried this out, but doesn't really work since you need to know which ones are successes so you don't try to create new records later on. So will keep it this way.\n",
        "createdAt" : "2015-09-30T21:22:02Z",
        "updatedAt" : "2015-09-30T21:23:31Z",
        "lastEditedBy" : "2047c56c-66c7-4242-875d-8c8db277f369",
        "tags" : [
        ]
      }
    ],
    "commit" : "6f8372d752e7fae89ac1740749d662d27b06dcca",
    "line" : 63,
    "diffHunk" : "@@ -1,1 +1002,1006 @@            tis = session.query(TI).filter(\n                TI.dag_id == dag_id,\n                TI.execution_date.in_(dates),\n                TI.task_id.in_(task_ids)).all()\n            tasks = list(product(task_ids, dates))"
  },
  {
    "id" : "08b73770-9f4a-4a4c-9d3c-9d825c8908d6",
    "prId" : 5587,
    "prUrl" : "https://github.com/apache/airflow/pull/5587#pullrequestreview-261723498",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f4a99e7f-3015-4c3a-b3e1-a631e41ddbec",
        "parentId" : null,
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Does the cache still work here - I guess it's referred to somerwhere in the Flask/WSGI app so is protected from GC?",
        "createdAt" : "2019-07-15T09:45:05Z",
        "updatedAt" : "2019-07-15T09:45:05Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "fd43a9ff-c722-4045-a1d1-eb0b3e27bcc9",
        "parentId" : "f4a99e7f-3015-4c3a-b3e1-a631e41ddbec",
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "Yes. There are still references to this object. GC will not delete this object.",
        "createdAt" : "2019-07-15T09:53:43Z",
        "updatedAt" : "2019-07-15T09:53:43Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      }
    ],
    "commit" : "7a2a260e2497b3f466b20bab43a908c6532b85a1",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +81,85 @@    api.API_AUTH.api_auth.init_app(app)\n\n    Cache(app=app, config={'CACHE_TYPE': 'filesystem', 'CACHE_DIR': '/tmp'})\n\n    from airflow.www.blueprints import routes"
  },
  {
    "id" : "5181ddf8-6336-46b9-8c82-8125bfcb02e7",
    "prId" : 8940,
    "prUrl" : "https://github.com/apache/airflow/pull/8940#pullrequestreview-415790427",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bb7085ca-573d-4b32-a39c-e160150b5b89",
        "parentId" : null,
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "This creates a new session, but we want to use your global session instead of creating another session.\r\nhttps://github.com/pallets/flask-sqlalchemy/blob/706982bb8a096220d29e5cef156950237753d89f/flask_sqlalchemy/__init__.py#L714",
        "createdAt" : "2020-05-20T23:50:58Z",
        "updatedAt" : "2020-05-21T07:40:21Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      }
    ],
    "commit" : "62ecda544d0b3084f5d0a662819d25f4cf0eddd6",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +71,75 @@\n    csrf.init_app(app)\n    db = SQLA()\n    db.session = settings.Session\n    db.init_app(app)"
  },
  {
    "id" : "7f742db2-ab1e-40c2-9367-2bf84e8df76e",
    "prId" : 8940,
    "prUrl" : "https://github.com/apache/airflow/pull/8940#pullrequestreview-415961856",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "425bc0e2-cc0b-4dc0-a412-d3ebc75381df",
        "parentId" : null,
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "The session is saved to the object, which is an attribute of the class (not instance), so we have a huge side effect.\r\nhttps://github.com/dpgaspar/Flask-AppBuilder/blob/master/flask_appbuilder/base.py#L339-L347\r\nhttps://github.com/apache/airflow/blob/df159826d61a934862e9fe6a62b535eb443e5710/airflow/www/views.py#L2309",
        "createdAt" : "2020-05-20T23:57:13Z",
        "updatedAt" : "2020-05-21T07:40:21Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      },
      {
        "id" : "997f9890-27ae-47ad-8064-1d82ab53da07",
        "parentId" : "425bc0e2-cc0b-4dc0-a412-d3ebc75381df",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "I think I had to work around this (or at least it bit me) when I was doing the TZ work in the UI\n\n:+1:",
        "createdAt" : "2020-05-21T08:16:12Z",
        "updatedAt" : "2020-05-21T08:16:12Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "7baeafd2-94c0-4b7e-b83e-d5e199188780",
        "parentId" : "425bc0e2-cc0b-4dc0-a412-d3ebc75381df",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Oh, i remember what my problem was: date columns on FABs own security models.",
        "createdAt" : "2020-05-21T08:17:35Z",
        "updatedAt" : "2020-05-21T08:17:36Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      }
    ],
    "commit" : "62ecda544d0b3084f5d0a662819d25f4cf0eddd6",
    "line" : 34,
    "diffHunk" : "@@ -1,1 +103,107 @@                    # Delete sessions if initiated previously to limit side effects. We want to use\n                    # the current session in the current application.\n                    baseview.datamodel.session = None\n                return super()._check_and_init(baseview)\n"
  },
  {
    "id" : "b44df0ff-4336-446f-9ef1-70db7478dee6",
    "prId" : 9030,
    "prUrl" : "https://github.com/apache/airflow/pull/9030#pullrequestreview-420320845",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "efab4ecc-34c8-4866-89dd-9aa4c1241b6d",
        "parentId" : null,
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "This middleware is now optional. We use addresses in the form of `blocked` which do not work properly with this middleware. This middleware expects the addresses to be in the form `/blocked`. However, if we don't use this middleware, it doesn't matter.",
        "createdAt" : "2020-05-27T14:16:24Z",
        "updatedAt" : "2020-06-01T22:42:07Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      },
      {
        "id" : "e97c35af-8ffb-4510-a6e9-f60af7242ddc",
        "parentId" : "efab4ecc-34c8-4866-89dd-9aa4c1241b6d",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Should we remove it then?",
        "createdAt" : "2020-05-28T17:01:28Z",
        "updatedAt" : "2020-06-01T22:42:07Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      },
      {
        "id" : "5af7d5cd-e73c-4929-ae12-4a68536eff28",
        "parentId" : "efab4ecc-34c8-4866-89dd-9aa4c1241b6d",
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "We don't use it in tests - test_views. This is still needed in production for some users. ",
        "createdAt" : "2020-05-28T17:07:29Z",
        "updatedAt" : "2020-06-01T22:42:07Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      }
    ],
    "commit" : "274a71e1bb881825f4bd1af5bf6b39e604e24b16",
    "line" : 42,
    "diffHunk" : "@@ -1,1 +81,85 @@            base_url = \"\"\n        if base_url:\n            flask_app.wsgi_app = DispatcherMiddleware(  # type: ignore\n                root_app,\n                mounts={base_url: flask_app.wsgi_app}"
  }
]