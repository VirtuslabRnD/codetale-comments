[
  {
    "id" : "3df0987c-c99c-42a9-879e-ac37eecfe62a",
    "prId" : 15599,
    "prUrl" : "https://github.com/apache/airflow/pull/15599#pullrequestreview-651494335",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "eefb00a9-83e2-4b1d-842d-49edeb9f5a36",
        "parentId" : null,
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "Did you wanted to think about this more before you merged this PR, or just a future TODO",
        "createdAt" : "2021-05-04T16:51:03Z",
        "updatedAt" : "2021-05-04T21:15:01Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "af49d173-fe54-4f4a-a429-cb0dcd24c6b4",
        "parentId" : "eefb00a9-83e2-4b1d-842d-49edeb9f5a36",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Future Todo/pointer to anyone finding this a problem in the future",
        "createdAt" : "2021-05-04T17:32:14Z",
        "updatedAt" : "2021-05-04T21:15:01Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      }
    ],
    "commit" : "46bfe956a18b96b866dc09578373843f152fd3f5",
    "line" : 160,
    "diffHunk" : "@@ -1,1 +158,162 @@            if record.exc_info:\n                exc = record.exc_info[1]\n                # I'm not sure if this is a good idea!\n                exc.args = (self.redact(v) for v in exc.args)\n        record.__dict__[self.ALREADY_FILTERED_FLAG] = True"
  },
  {
    "id" : "3504126f-95f8-4351-ba41-a8084a7907d1",
    "prId" : 15599,
    "prUrl" : "https://github.com/apache/airflow/pull/15599#pullrequestreview-676781107",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fec13507-b528-41da-886c-84052876ec61",
        "parentId" : null,
        "authorId" : "c7b0cb1c-ff95-4ec9-a0c6-a9f1b5135a52",
        "body" : "I would suggest that we use try-except for checking if secret is an iterator. collections.abc.Iterable doesn't detect iterators unless they implement `__iter__` while this does:\r\n```python\r\ntry:\r\n    iter(myobject)\r\nexcept TypeError:\r\n    print('not iterator')\r\n```\r\nFound this from https://stackoverflow.com/a/36407550/3477338",
        "createdAt" : "2021-05-04T17:10:50Z",
        "updatedAt" : "2021-05-04T21:15:01Z",
        "lastEditedBy" : "c7b0cb1c-ff95-4ec9-a0c6-a9f1b5135a52",
        "tags" : [
        ]
      },
      {
        "id" : "e8e96d9b-33ae-4dcb-98e9-4d16d0883265",
        "parentId" : "fec13507-b528-41da-886c-84052876ec61",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "That was sort of by design, since we turn the output in to a list always, so we don't want to redact everything.\n\nI'm not sure that supporting Iterable is good",
        "createdAt" : "2021-05-04T17:34:04Z",
        "updatedAt" : "2021-05-04T21:15:01Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "3d0e1bbb-50e9-4e81-b112-45c818eeff11",
        "parentId" : "fec13507-b528-41da-886c-84052876ec61",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "@ashb - your lackluster feelings about  Iterable support was right I think https://github.com/apache/airflow/issues/16148#issuecomment-855240855 :) ",
        "createdAt" : "2021-06-05T13:35:03Z",
        "updatedAt" : "2021-06-05T13:35:04Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "46bfe956a18b96b866dc09578373843f152fd3f5",
    "line" : 221,
    "diffHunk" : "@@ -1,1 +219,223 @@                self.patterns.add(pattern)\n                self.replacer = re.compile('|'.join(self.patterns))\n        elif isinstance(secret, collections.abc.Iterable):\n            for v in secret:\n                self.add_mask(v, name)"
  }
]