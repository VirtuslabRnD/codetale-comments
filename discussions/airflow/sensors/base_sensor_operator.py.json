[
  {
    "id" : "f2a5f44c-f517-4eb3-978f-72313a329728",
    "prId" : 3596,
    "prUrl" : "https://github.com/apache/airflow/pull/3596#pullrequestreview-156531349",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0974c335-2e45-4c52-9f79-c86f04f6f0e0",
        "parentId" : null,
        "authorId" : "38d80383-47b9-439a-9efe-9282f79f8b2f",
        "body" : "could you add a comment on what is this dependency for?",
        "createdAt" : "2018-09-17T20:33:49Z",
        "updatedAt" : "2018-09-20T06:08:41Z",
        "lastEditedBy" : "38d80383-47b9-439a-9efe-9282f79f8b2f",
        "tags" : [
        ]
      },
      {
        "id" : "0fa3a1dd-61ac-4e7c-870e-ad62e1173382",
        "parentId" : "0974c335-2e45-4c52-9f79-c86f04f6f0e0",
        "authorId" : "44a4606a-9224-404a-87fd-9a2417fd2610",
        "body" : "Done",
        "createdAt" : "2018-09-18T19:29:14Z",
        "updatedAt" : "2018-09-20T06:08:41Z",
        "lastEditedBy" : "44a4606a-9224-404a-87fd-9a2417fd2610",
        "tags" : [
        ]
      }
    ],
    "commit" : "1c0ee701ef8f86e32feb5999e1dff07829c7a46d",
    "line" : 106,
    "diffHunk" : "@@ -1,1 +124,128 @@\n    @property\n    def deps(self):\n        \"\"\"\n        Adds one additional dependency for all sensor operators that"
  },
  {
    "id" : "1ffb28dd-0772-488b-9ec8-ca719558b462",
    "prId" : 3596,
    "prUrl" : "https://github.com/apache/airflow/pull/3596#pullrequestreview-156535694",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ef949351-2518-4472-a6cc-3006cd49226b",
        "parentId" : null,
        "authorId" : "38d80383-47b9-439a-9efe-9282f79f8b2f",
        "body" : "maybe a dump question, but now is it possible to have `(timezone.utcnow() - started_at)` as negative datetime number? will `(timezone.utcnow() - started_at).total_seconds()` throw exception?",
        "createdAt" : "2018-09-17T20:58:17Z",
        "updatedAt" : "2018-09-20T06:08:41Z",
        "lastEditedBy" : "38d80383-47b9-439a-9efe-9282f79f8b2f",
        "tags" : [
        ]
      },
      {
        "id" : "bba07104-2200-4153-be0b-f5d4d804f442",
        "parentId" : "ef949351-2518-4472-a6cc-3006cd49226b",
        "authorId" : "44a4606a-9224-404a-87fd-9a2417fd2610",
        "body" : "Normally that should not be the case because `started_at` is always in the past. Of course clocks are never in sync (except at Google) so it may happen. But also in such a case `datetime.timedelta.total_seconds()` doesn't throw an exception but returns a negative number which is still smaller than the configured timeout (if the user configured a positive timeout, lol)",
        "createdAt" : "2018-09-18T19:40:51Z",
        "updatedAt" : "2018-09-20T06:08:41Z",
        "lastEditedBy" : "44a4606a-9224-404a-87fd-9a2417fd2610",
        "tags" : [
        ]
      }
    ],
    "commit" : "1c0ee701ef8f86e32feb5999e1dff07829c7a46d",
    "line" : 80,
    "diffHunk" : "@@ -1,1 +96,100 @@                started_at = task_reschedules[0].start_date\n        while not self.poke(context):\n            if (timezone.utcnow() - started_at).total_seconds() > self.timeout:\n                # If sensor is in soft fail mode but will be retried then\n                # give it a chance and fail with timeout."
  },
  {
    "id" : "507eab92-2607-4fb7-a0e4-0a0f9f738a84",
    "prId" : 3596,
    "prUrl" : "https://github.com/apache/airflow/pull/3596#pullrequestreview-156530243",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "425c1a39-3c54-4715-890b-678e63c5ca26",
        "parentId" : null,
        "authorId" : "38d80383-47b9-439a-9efe-9282f79f8b2f",
        "body" : "and should it be `reschedule_date = started_at + timedelta( `?",
        "createdAt" : "2018-09-17T20:58:42Z",
        "updatedAt" : "2018-09-20T06:08:41Z",
        "lastEditedBy" : "38d80383-47b9-439a-9efe-9282f79f8b2f",
        "tags" : [
        ]
      },
      {
        "id" : "588912cf-8edf-4e1b-86e7-929c5eccafa7",
        "parentId" : "425c1a39-3c54-4715-890b-678e63c5ca26",
        "authorId" : "44a4606a-9224-404a-87fd-9a2417fd2610",
        "body" : "No. In \"reschedule\" mode `started_at` is always set to the initial schedule time (when the task instance was scheduled the first time). `started_at` is only used to determine if timeout is reached.",
        "createdAt" : "2018-09-18T19:26:20Z",
        "updatedAt" : "2018-09-20T06:08:41Z",
        "lastEditedBy" : "44a4606a-9224-404a-87fd-9a2417fd2610",
        "tags" : [
        ]
      }
    ],
    "commit" : "1c0ee701ef8f86e32feb5999e1dff07829c7a46d",
    "line" : 88,
    "diffHunk" : "@@ -1,1 +106,110 @@                    raise AirflowSensorTimeout('Snap. Time is OUT.')\n            if self.reschedule:\n                reschedule_date = timezone.utcnow() + timedelta(\n                    seconds=self.poke_interval)\n                raise AirflowRescheduleException(reschedule_date)"
  },
  {
    "id" : "acb9d56d-e9ad-4cf1-a51e-bf7e7cb05564",
    "prId" : 5499,
    "prUrl" : "https://github.com/apache/airflow/pull/5499#pullrequestreview-463390333",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "87ea1b52-5665-45bb-ba7b-8ffc577c46cb",
        "parentId" : null,
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "Can we add a comment on what should go in `execution_fields`",
        "createdAt" : "2020-08-07T15:46:25Z",
        "updatedAt" : "2020-09-08T11:37:36Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      }
    ],
    "commit" : "5b5bbff3492fab908dd1c8142ba3beaa3fb274c2",
    "line" : 27,
    "diffHunk" : "@@ -1,1 +76,80 @@    # that smart sensor service is able to handle corresponding execution details\n    # without breaking the sensor poking logic with dedup.\n    execution_fields = ('poke_interval', 'retries', 'execution_timeout', 'timeout',\n                        'email', 'email_on_retry', 'email_on_failure',)\n"
  },
  {
    "id" : "16538623-8894-42b0-bb21-42e03661abba",
    "prId" : 7050,
    "prUrl" : "https://github.com/apache/airflow/pull/7050#pullrequestreview-338406628",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e821168f-bf85-4a43-bc2b-178c9cc6e894",
        "parentId" : null,
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "I think int is the correct type, isn't it @mik-laj ?\r\n\r\nWe should probably update https://github.com/apache/airflow/pull/7050/files#diff-81901d44cd480538f1f35b641b9ede0cR70",
        "createdAt" : "2020-01-05T15:10:02Z",
        "updatedAt" : "2020-01-05T18:14:45Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "5636e074-98f5-4a13-8273-bec53764796d",
        "parentId" : "e821168f-bf85-4a43-bc2b-178c9cc6e894",
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "For me it should be a float here. We use it in two places. In timedelta (seconds) and in sleep. The second case is obvious, but the second is not, so I looked at code. \r\n![Screenshot 2020-01-05 at 16 22 58](https://user-images.githubusercontent.com/12058428/71782186-ac18c500-2fd7-11ea-9b8a-932ceb8f5b39.png)\r\n",
        "createdAt" : "2020-01-05T15:23:25Z",
        "updatedAt" : "2020-01-05T18:14:45Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      }
    ],
    "commit" : "e1a1364987476f2c14f3a99ad03ef8554615ea14",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +43,47 @@    :param poke_interval: Time in seconds that the job should wait in\n        between each tries\n    :type poke_interval: float\n    :param timeout: Time, in seconds before the task times out and fails.\n    :type timeout: float"
  },
  {
    "id" : "0b8b489a-a973-4f4e-9339-f6bbb5df762c",
    "prId" : 7197,
    "prUrl" : "https://github.com/apache/airflow/pull/7197#pullrequestreview-405585660",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d45473b6-0285-4f86-a7b8-4d13432b5d36",
        "parentId" : null,
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "Why do we need such a complex decorator?\r\nhttps://github.com/apache/airflow/pull/7197#discussion_r419218559",
        "createdAt" : "2020-05-05T08:27:56Z",
        "updatedAt" : "2020-05-19T18:52:04Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      }
    ],
    "commit" : "96a6d9a8a6a6faba9b2c6755a35041b7faf5d2ae",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +180,184 @@\n\ndef poke_mode_only(cls):\n    \"\"\"\n    Class Decorator for child classes of BaseSensorOperator to indicate"
  },
  {
    "id" : "725ee18e-f445-4f49-a761-e6852de9d295",
    "prId" : 10499,
    "prUrl" : "https://github.com/apache/airflow/pull/10499#pullrequestreview-473894780",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1641142b-752f-4b57-a1a6-dd209de1fcd2",
        "parentId" : null,
        "authorId" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "body" : "```suggestion\r\n    def prepare_for_execution(self) -> \"BaseSensorOperator\":\r\n```\r\nLovely! Now we have this method it's indeed easier to add some custom \"pre_execution\" logic.",
        "createdAt" : "2020-08-24T22:01:08Z",
        "updatedAt" : "2020-08-24T22:01:08Z",
        "lastEditedBy" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "tags" : [
        ]
      },
      {
        "id" : "38c5f485-33a4-45eb-9713-19bca93e071b",
        "parentId" : "1641142b-752f-4b57-a1a6-dd209de1fcd2",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Incompatible return value :(",
        "createdAt" : "2020-08-24T22:15:12Z",
        "updatedAt" : "2020-08-24T22:15:12Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "139e020a22780fe950a937554a284bf956990398",
    "line" : 12,
    "diffHunk" : "@@ -1,1 +161,165 @@            return self.poke_interval\n\n    def prepare_for_execution(self) -> BaseOperator:\n        task = super().prepare_for_execution()\n        # Sensors in `poke` mode can block execution of DAGs when running"
  },
  {
    "id" : "ce0345f3-e186-4f05-8048-05948be73b8e",
    "prId" : 10499,
    "prUrl" : "https://github.com/apache/airflow/pull/10499#pullrequestreview-473895748",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7f16e4a0-46af-4cbb-aa8f-71590c2e2a48",
        "parentId" : null,
        "authorId" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "body" : "```suggestion\r\n        if conf.get('core', 'executor') == \"DebugExecutor\":\r\n```\r\nShould we use `ExecutorLoader.DEBUG_EXECUTOR`?",
        "createdAt" : "2020-08-24T22:02:01Z",
        "updatedAt" : "2020-08-24T22:02:21Z",
        "lastEditedBy" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "tags" : [
        ]
      },
      {
        "id" : "ae8b3f0a-3755-4409-bdec-b7c1ec4f5a74",
        "parentId" : "7f16e4a0-46af-4cbb-aa8f-71590c2e2a48",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "I have a problem with importing it as constants (MyPy complains). I prefer to leave it :(",
        "createdAt" : "2020-08-24T22:15:44Z",
        "updatedAt" : "2020-08-24T22:15:44Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "139e020a22780fe950a937554a284bf956990398",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +166,170 @@        # with single process executor, thus we change the mode to`reschedule`\n        # to allow parallel task being scheduled and executed\n        if conf.get('core', 'executor') == \"DebugExecutor\":\n            self.log.warning(\"DebugExecutor changes sensor mode to 'reschedule'.\")\n            task.mode = 'reschedule'"
  }
]