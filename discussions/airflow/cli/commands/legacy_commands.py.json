[
  {
    "id" : "2891ab16-c970-4bc8-8207-fab1d1c633ae",
    "prId" : 10115,
    "prUrl" : "https://github.com/apache/airflow/pull/10115#pullrequestreview-459644871",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8c82747d-d02f-488f-bc82-43c0966eea45",
        "parentId" : null,
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "What you need to add here is this if (from _check_value):\r\n\r\n```\r\n    if action.choices is not None and value not in action.choices:\r\n```\r\n\r\nThe problem is that the Default Help parser is run for both - the main \"parser\" and \"celery\" subcommand parser. And when it is run for the subcommand parser it should be accepted.\r\n\r\nIf you add the 'if' before, the check for old parameters will only be done if they are not a valid choice.\r\n",
        "createdAt" : "2020-08-02T12:01:36Z",
        "updatedAt" : "2020-08-03T10:47:09Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      },
      {
        "id" : "cedf0a0d-3b45-49ff-823b-f0c48a2b0f57",
        "parentId" : "8c82747d-d02f-488f-bc82-43c0966eea45",
        "authorId" : "c7b0cb1c-ff95-4ec9-a0c6-a9f1b5135a52",
        "body" : "Thanks! That solved it!",
        "createdAt" : "2020-08-02T12:19:30Z",
        "updatedAt" : "2020-08-03T10:47:09Z",
        "lastEditedBy" : "c7b0cb1c-ff95-4ec9-a0c6-a9f1b5135a52",
        "tags" : [
        ]
      }
    ],
    "commit" : "6026750d5793aee03d0d2d7b203686b041bab5b0",
    "line" : 52,
    "diffHunk" : "@@ -1,1 +50,54 @@\ndef check_legacy_command(action, value):\n    \"\"\" Checks command value and raise error if value is in removed command \"\"\"\n    new_command = COMMAND_MAP.get(value)\n    if new_command is not None:"
  }
]