[
  {
    "id" : "7242a43c-5010-4120-baad-24589b04dd39",
    "prId" : 11802,
    "prUrl" : "https://github.com/apache/airflow/pull/11802#pullrequestreview-522021485",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6df2a121-2894-42f0-a4b8-ccffc447c580",
        "parentId" : null,
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "It is expected?",
        "createdAt" : "2020-10-24T03:16:35Z",
        "updatedAt" : "2020-11-02T21:53:16Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      },
      {
        "id" : "9a421290-ad43-498a-a1f4-b1595343ccfe",
        "parentId" : "6df2a121-2894-42f0-a4b8-ccffc447c580",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "Yeah this will be very helpful when something goes wrong",
        "createdAt" : "2020-11-02T21:55:24Z",
        "updatedAt" : "2020-11-02T21:55:24Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      }
    ],
    "commit" : "5e4a0785ea10d2cb9295423959e53f91b8a5469d",
    "line" : 102,
    "diffHunk" : "@@ -1,1 +127,131 @@    print(f'Deleting POD \"{name}\" from \"{namespace}\" namespace')\n    api_response = core_v1.delete_namespaced_pod(name=name, namespace=namespace, body=delete_options)\n    print(api_response)"
  },
  {
    "id" : "10e407a6-d68d-4b00-b562-5f62a37100cd",
    "prId" : 11802,
    "prUrl" : "https://github.com/apache/airflow/pull/11802#pullrequestreview-627815350",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "671533fc-3471-4cff-aa4a-a7725a8ae6cd",
        "parentId" : null,
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "Should we use get_kube_client here?",
        "createdAt" : "2021-04-05T11:00:33Z",
        "updatedAt" : "2021-04-05T11:00:33Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      },
      {
        "id" : "f63f4ab5-6ed1-4c90-ad63-fe7d3863a012",
        "parentId" : "671533fc-3471-4cff-aa4a-a7725a8ae6cd",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "Yup we should",
        "createdAt" : "2021-04-05T12:37:50Z",
        "updatedAt" : "2021-04-05T12:37:50Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      }
    ],
    "commit" : "5e4a0785ea10d2cb9295423959e53f91b8a5469d",
    "line" : 98,
    "diffHunk" : "@@ -1,1 +123,127 @@def _delete_pod(name, namespace):\n    \"\"\"Helper Function for cleanup_pods\"\"\"\n    core_v1 = client.CoreV1Api()\n    delete_options = client.V1DeleteOptions()\n    print(f'Deleting POD \"{name}\" from \"{namespace}\" namespace')"
  },
  {
    "id" : "2fed5258-84a4-43ed-b87d-d4d4ebfb4e46",
    "prId" : 15204,
    "prUrl" : "https://github.com/apache/airflow/pull/15204#pullrequestreview-627895175",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5a7fff35-afad-47c5-9d7c-3b37a43f8d8c",
        "parentId" : null,
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "Can we use `label_selector`/`field_selector` parameters to do server-side filtering? ",
        "createdAt" : "2021-04-05T14:14:38Z",
        "updatedAt" : "2021-04-08T06:38:44Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      },
      {
        "id" : "6e6f21da-3213-49da-9004-f7e20d099f76",
        "parentId" : "5a7fff35-afad-47c5-9d7c-3b37a43f8d8c",
        "authorId" : "59d531be-9d1e-478d-99a0-6e20963d3e21",
        "body" : "Definitely agree. Many thanks for the suggestion!\r\n\r\nChanges pushed.",
        "createdAt" : "2021-04-05T14:43:29Z",
        "updatedAt" : "2021-04-08T06:38:44Z",
        "lastEditedBy" : "59d531be-9d1e-478d-99a0-6e20963d3e21",
        "tags" : [
        ]
      }
    ],
    "commit" : "c1218d5d584111717ad9f8569dd4e2f29637b8eb",
    "line" : 23,
    "diffHunk" : "@@ -1,1 +109,113 @@    }\n    while True:  # pylint: disable=too-many-nested-blocks\n        pod_list = kube_client.list_namespaced_pod(**list_kwargs)\n        for pod in pod_list.items:\n            pod_name = pod.metadata.name"
  },
  {
    "id" : "205147bf-b00d-4dbe-9e8c-fa8c10c734fb",
    "prId" : 15204,
    "prUrl" : "https://github.com/apache/airflow/pull/15204#pullrequestreview-627936996",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "09ee88e5-db27-43a3-973d-d94b1086006e",
        "parentId" : null,
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "> The requirements are ANDed.\r\n\r\nhttps://github.com/kubernetes-client/python/blob/master/kubernetes/docs/V1LabelSelector.md\r\n\r\nThis command should also work when the pod does not contain `kubernetes_executor` label i.e. it is started by KubernetetsPodOperator.",
        "createdAt" : "2021-04-05T15:02:49Z",
        "updatedAt" : "2021-04-08T06:38:44Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      },
      {
        "id" : "e54c0867-282e-4ab7-8508-db0386c57df3",
        "parentId" : "09ee88e5-db27-43a3-973d-d94b1086006e",
        "authorId" : "59d531be-9d1e-478d-99a0-6e20963d3e21",
        "body" : "Makes sense to me. For the same reason, if I'm not wrong, we should exclude considering `airflow-worker` as well.\r\n\r\nAddressed in https://github.com/apache/airflow/pull/15204/commits/e406a0895a173587fd0cff8354650c740e687fd1\r\n\r\nThanks!",
        "createdAt" : "2021-04-05T15:41:33Z",
        "updatedAt" : "2021-04-08T06:38:44Z",
        "lastEditedBy" : "59d531be-9d1e-478d-99a0-6e20963d3e21",
        "tags" : [
        ]
      }
    ],
    "commit" : "c1218d5d584111717ad9f8569dd4e2f29637b8eb",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +103,107 @@        \"label_selector\": client.V1LabelSelector(\n            match_expressions=[\n                client.V1LabelSelectorRequirement(key=label, operator=\"Exists\")\n                for label in airflow_pod_labels\n            ]"
  },
  {
    "id" : "48cd73a0-d881-4cd7-8fa4-78695b948a0b",
    "prId" : 15204,
    "prUrl" : "https://github.com/apache/airflow/pull/15204#pullrequestreview-630687924",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "33bfc821-1ea0-4350-afb9-6a4d9ad03c73",
        "parentId" : null,
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "We should probably not look for **all** of these labels:\r\n\r\nWe could probably simplify this to see if there is `kubernetes_pod_operator` or `kubernetes_executor` in the labels.\r\n\r\nLet me think a bit more on this to see if we are missing a case -- what happens if a **Celery Worker**  pod hangs around",
        "createdAt" : "2021-04-05T16:05:22Z",
        "updatedAt" : "2021-04-08T06:38:44Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "6302033b-7709-45cb-9964-ca862ee47f53",
        "parentId" : "33bfc821-1ea0-4350-afb9-6a4d9ad03c73",
        "authorId" : "59d531be-9d1e-478d-99a0-6e20963d3e21",
        "body" : "Hi @kaxil , a gentle ping for this :)\r\n\r\nI'm not sure how Celery Worker will be involved in this though. IMO we are focusing on \"_pods started by Airflow_\", not \"_pods running Airflow (like worker node)_\"",
        "createdAt" : "2021-04-07T07:25:12Z",
        "updatedAt" : "2021-04-08T06:38:44Z",
        "lastEditedBy" : "59d531be-9d1e-478d-99a0-6e20963d3e21",
        "tags" : [
        ]
      },
      {
        "id" : "eb68f73b-d793-4dcd-a681-56657ab4cb03",
        "parentId" : "33bfc821-1ea0-4350-afb9-6a4d9ad03c73",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "Yea go for it, I couldn't think of any reason :)",
        "createdAt" : "2021-04-07T22:08:58Z",
        "updatedAt" : "2021-04-08T06:38:44Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      }
    ],
    "commit" : "c1218d5d584111717ad9f8569dd4e2f29637b8eb",
    "line" : 11,
    "diffHunk" : "@@ -1,1 +97,101 @@        'try_number',\n        'airflow_version',\n    ]\n    list_kwargs = {\n        \"namespace\": namespace,"
  }
]