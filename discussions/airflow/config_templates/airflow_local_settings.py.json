[
  {
    "id" : "2738a795-933b-41ec-b341-408a59872ebf",
    "prId" : 3873,
    "prUrl" : "https://github.com/apache/airflow/pull/3873#pullrequestreview-156133229",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7eba0fef-8733-4927-a12d-6c06c33833b8",
        "parentId" : null,
        "authorId" : "38d80383-47b9-439a-9efe-9282f79f8b2f",
        "body" : "n00b qq: are these mode options defined in `RotatingFileHandler`?",
        "createdAt" : "2018-09-17T21:30:21Z",
        "updatedAt" : "2018-10-15T05:28:31Z",
        "lastEditedBy" : "38d80383-47b9-439a-9efe-9282f79f8b2f",
        "tags" : [
        ]
      },
      {
        "id" : "f2892f5d-c088-40e3-81ae-cc5f2d0c9696",
        "parentId" : "7eba0fef-8733-4927-a12d-6c06c33833b8",
        "authorId" : "a3c64a30-509c-4788-80d1-4f17cb3b5530",
        "body" : "sry I didn't get ur question... Are you asking what are these options for? That is the file opening mode, set to 'a' so we keep appending to the file( so we don't overwrite the log if we restart the scheduler or so). 'a' is indeed the default mode but just wanted to keep it here to make it more clear",
        "createdAt" : "2018-09-17T21:48:33Z",
        "updatedAt" : "2018-10-15T05:28:31Z",
        "lastEditedBy" : "a3c64a30-509c-4788-80d1-4f17cb3b5530",
        "tags" : [
        ]
      }
    ],
    "commit" : "14cf345b6247b62d502ac32076130beaf0f923a3",
    "line" : 39,
    "diffHunk" : "@@ -1,1 +116,120 @@            'formatter': 'airflow',\n            'filename': DAG_PROCESSOR_MANAGER_LOG_LOCATION,\n            'mode': 'a',\n            'maxBytes': 104857600,  # 100MB\n            'backupCount': 5"
  },
  {
    "id" : "6c38bc72-e553-4374-a41d-d96bbaa31e84",
    "prId" : 3873,
    "prUrl" : "https://github.com/apache/airflow/pull/3873#pullrequestreview-157826189",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7171ea52-bc98-49dd-8e3b-aa4ccdf90dc0",
        "parentId" : null,
        "authorId" : "59d531be-9d1e-478d-99a0-6e20963d3e21",
        "body" : "Hi @yrqls21 , this may be an invalid question: may you advise what this environment variable `CONFIG_PROCESSOR_MANAGER_LOGGER` is meant to be? Is it going to be specified by the user, or it's environment-specific?\r\n\r\nIt's not documented anywhere else.",
        "createdAt" : "2018-09-21T16:14:42Z",
        "updatedAt" : "2018-10-15T05:28:31Z",
        "lastEditedBy" : "59d531be-9d1e-478d-99a0-6e20963d3e21",
        "tags" : [
        ]
      },
      {
        "id" : "21453ff7-43ad-4236-abaf-1e36682ee601",
        "parentId" : "7171ea52-bc98-49dd-8e3b-aa4ccdf90dc0",
        "authorId" : "59d531be-9d1e-478d-99a0-6e20963d3e21",
        "body" : "Turns out I DID ask an invalid question....  I have noticed the relevant chunk in `airflow/utils/dag_processing.py`.....\r\n\r\n So this environment variable is some sort of \"flag\" to help determine if these a few following lines here in `airflow/config_templates/airflow_local_settings.py` should be run when we load/reload `airflow_local_settings`, if I'm not mistaken?",
        "createdAt" : "2018-09-21T16:38:30Z",
        "updatedAt" : "2018-10-15T05:28:31Z",
        "lastEditedBy" : "59d531be-9d1e-478d-99a0-6e20963d3e21",
        "tags" : [
        ]
      },
      {
        "id" : "cc91aff6-33bc-42fd-8a13-31c7d2ccb94b",
        "parentId" : "7171ea52-bc98-49dd-8e3b-aa4ccdf90dc0",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "This feels like it should be a config option somewhere in the config, and then the normal `AIRFLOW__${SECT}__${OPT}` environment variables could be used.\r\n\r\nAlso there is zero documentation or metion anywher eelse what this block is doing.  Adding to the default config (with comments explaining it's use) gives us two birds with one stone.",
        "createdAt" : "2018-09-21T18:21:10Z",
        "updatedAt" : "2018-10-15T05:28:31Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "0d52c2d5-4a70-4fcf-9c98-c3c8f62c9ee9",
        "parentId" : "7171ea52-bc98-49dd-8e3b-aa4ccdf90dc0",
        "authorId" : "a3c64a30-509c-4788-80d1-4f17cb3b5530",
        "body" : "@XD-DENG you are perfectly correctly. The purpose is to avoid `RotatingFileHandler` to be initialized in multiple processes, which would cause exceptions. I thought I had some comments around it but obviously I'm wrong :(\r\n\r\n@ashb This is more like a internal flag controlling the behavior of different processes, similar idea as this line https://github.com/apache/incubator-airflow/blob/master/airflow/bin/cli.py#L868, I'll definitely add comments here.",
        "createdAt" : "2018-09-21T19:19:06Z",
        "updatedAt" : "2018-10-15T05:28:31Z",
        "lastEditedBy" : "a3c64a30-509c-4788-80d1-4f17cb3b5530",
        "tags" : [
        ]
      }
    ],
    "commit" : "14cf345b6247b62d502ac32076130beaf0f923a3",
    "line" : 63,
    "diffHunk" : "@@ -1,1 +201,205 @@# This is to avoid exceptions when initializing RotatingFileHandler multiple times\n# in multiple processes.\nif os.environ.get('CONFIG_PROCESSOR_MANAGER_LOGGER') == 'True':\n    DEFAULT_LOGGING_CONFIG['handlers'] \\\n        .update(DEFAULT_DAG_PARSING_LOGGING_CONFIG['handlers'])"
  }
]