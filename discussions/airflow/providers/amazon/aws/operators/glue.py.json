[
  {
    "id" : "5291537e-5131-4f99-b90a-b34d6dd9ce0d",
    "prId" : 6007,
    "prUrl" : "https://github.com/apache/airflow/pull/6007#pullrequestreview-386185689",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8f8e0b37-cc2d-4df4-a7b5-54f46c667575",
        "parentId" : null,
        "authorId" : "e29ffafb-ac51-434b-b9e0-af262caae1ee",
        "body" : "```suggestion\r\n        Executes AWS Glue Job from Airflow\r\n\r\n```",
        "createdAt" : "2020-04-02T08:43:57Z",
        "updatedAt" : "2020-05-12T13:56:47Z",
        "lastEditedBy" : "e29ffafb-ac51-434b-b9e0-af262caae1ee",
        "tags" : [
        ]
      }
    ],
    "commit" : "834e86a1c9a1751df90b8de5d515a14f3616d03f",
    "line" : 91,
    "diffHunk" : "@@ -1,1 +89,93 @@    def execute(self, context):\n        \"\"\"\n        Executes AWS Glue Job from Airflow\n\n        :return: the id of the current glue job."
  },
  {
    "id" : "c4e8bfca-4eea-452e-aac5-daeca2ca9aeb",
    "prId" : 6007,
    "prUrl" : "https://github.com/apache/airflow/pull/6007#pullrequestreview-397191655",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1aaee4d3-203f-4a82-9701-f0ec4131d543",
        "parentId" : null,
        "authorId" : "975f2c2c-c080-4f2c-a891-8ce8c7a84c11",
        "body" : "If `glue_job_run['JobRunState']` is `FAILED`, the operator still returns 0 as a successful task in the dag run. We need to check the state and raise an `AirflowException` if job fails.",
        "createdAt" : "2020-04-11T02:35:54Z",
        "updatedAt" : "2020-05-12T13:56:47Z",
        "lastEditedBy" : "975f2c2c-c080-4f2c-a891-8ce8c7a84c11",
        "tags" : [
        ]
      },
      {
        "id" : "ea0dcf07-78f4-4ce3-b9fd-9b9d14a1b4d1",
        "parentId" : "1aaee4d3-203f-4a82-9701-f0ec4131d543",
        "authorId" : "64893315-7142-4bee-8329-4c14171b0613",
        "body" : "I'm working on a local glue implementation as I can't wait until Airflow is available.  I have solved this with\r\n\r\n```\r\n            success_states = ['SUCCEEDED']\r\n            errored_states = ['FAILED', 'STOPPED', 'TIMEOUT']\r\n\r\n            if job_run_state in success_states:\r\n                self.log.info(\"Exiting Job %s Run State: %s\", run_id, job_run_state)\r\n                return {'JobRunState': job_run_state, 'JobRunId': run_id}\r\n            elif job_run_state in errored_states:\r\n                job_error_message = \"Exiting Job \" + run_id + \" Run State: \" + job_run_state\r\n                raise AirflowException(job_error_message)\r\n            else:\r\n                self.log.info(\"Polling for AWS Glue Job %s current run state with status %s\"\r\n                    , job_name, job_run_state)\r\n                time.sleep(self.JOB_POLL_INTERVAL)\r\n```",
        "createdAt" : "2020-04-21T10:18:36Z",
        "updatedAt" : "2020-05-12T13:56:47Z",
        "lastEditedBy" : "64893315-7142-4bee-8329-4c14171b0613",
        "tags" : [
        ]
      }
    ],
    "commit" : "834e86a1c9a1751df90b8de5d515a14f3616d03f",
    "line" : 114,
    "diffHunk" : "@@ -1,1 +112,116 @@            \"AWS Glue Job: %s status: %s. Run Id: %s\",\n            self.job_name, glue_job_run['JobRunState'], glue_job_run['JobRunId'])\n        return glue_job_run['JobRunId']"
  },
  {
    "id" : "09f899da-384f-4887-81cd-cc92f8271d95",
    "prId" : 11531,
    "prUrl" : "https://github.com/apache/airflow/pull/11531#pullrequestreview-509752523",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "90deaa36-6feb-4cbf-ae54-e4848717f45a",
        "parentId" : null,
        "authorId" : "c9147a70-b812-4a50-8d74-018c51033f59",
        "body" : "fix typo",
        "createdAt" : "2020-10-15T20:09:09Z",
        "updatedAt" : "2020-10-21T14:00:48Z",
        "lastEditedBy" : "c9147a70-b812-4a50-8d74-018c51033f59",
        "tags" : [
        ]
      }
    ],
    "commit" : "17c2dfd53c6a3c4f4390ef978b78a46ced05e343",
    "line" : 50,
    "diffHunk" : "@@ -1,1 +89,93 @@        self.iam_role_name = iam_role_name\n        self.s3_protocol = \"s3://\"\n        self.s3_artifacts_prefix = 'artifacts/glue-scripts/'\n\n    def execute(self, context):"
  }
]