[
  {
    "id" : "2c77257a-3db9-4ef3-aa7b-5c764390eee7",
    "prId" : 15850,
    "prUrl" : "https://github.com/apache/airflow/pull/15850#pullrequestreview-666165018",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e9ba7058-682c-4048-9d8a-025f5038dfd7",
        "parentId" : null,
        "authorId" : "be8d5aba-4faa-4192-ae0d-a2820eecf488",
        "body" : "Do you want a call to `wait_for_task_status(replication_task_arn, 'stopped')` here?",
        "createdAt" : "2021-05-20T22:48:15Z",
        "updatedAt" : "2021-05-22T00:12:47Z",
        "lastEditedBy" : "be8d5aba-4faa-4192-ae0d-a2820eecf488",
        "tags" : [
        ]
      },
      {
        "id" : "ac494552-0494-4c38-b7b4-8e225d4e7264",
        "parentId" : "e9ba7058-682c-4048-9d8a-025f5038dfd7",
        "authorId" : "8c8c5ab5-a901-49da-a826-2609fc496d94",
        "body" : "Similar to not using `running` waiter in start task, I have opted out to not use stopped waiter here, since it seems to not work in a straightforward way.\r\n\r\nRunning and stopped waiters in DMS have an unusual behaviour that is unintuitive for users:\r\nhttps://github.com/boto/botocore/blob/develop/botocore/data/dms/2016-01-01/waiters-2.json#L168\r\nhttps://github.com/boto/boto3/issues/1926",
        "createdAt" : "2021-05-22T08:47:28Z",
        "updatedAt" : "2021-05-22T08:47:28Z",
        "lastEditedBy" : "8c8c5ab5-a901-49da-a826-2609fc496d94",
        "tags" : [
        ]
      }
    ],
    "commit" : "041607e2c18a409c95ed17b5d52029a40b58f0eb",
    "line" : 177,
    "diffHunk" : "@@ -1,1 +175,179 @@        dms_client = self.get_conn()\n        dms_client.stop_replication_task(ReplicationTaskArn=replication_task_arn)\n\n    def delete_replication_task(self, replication_task_arn):\n        \"\"\""
  },
  {
    "id" : "a0f3781f-31b0-41bc-8661-74a688cc9c61",
    "prId" : 15850,
    "prUrl" : "https://github.com/apache/airflow/pull/15850#pullrequestreview-666164870",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "09ab431b-34ba-416b-a393-45c01dfbc02c",
        "parentId" : null,
        "authorId" : "be8d5aba-4faa-4192-ae0d-a2820eecf488",
        "body" : "Do you want a call to `wait_for_task_status(replication_task_arn, 'running')` here?",
        "createdAt" : "2021-05-20T22:52:41Z",
        "updatedAt" : "2021-05-22T00:12:37Z",
        "lastEditedBy" : "be8d5aba-4faa-4192-ae0d-a2820eecf488",
        "tags" : [
        ]
      },
      {
        "id" : "c876970c-a7d0-4601-8fa3-b51bfe6ff684",
        "parentId" : "09ab431b-34ba-416b-a393-45c01dfbc02c",
        "authorId" : "8c8c5ab5-a901-49da-a826-2609fc496d94",
        "body" : "Running and stopped waiters in DMS have an unusual behaviour that is unintuitive for users:\r\nhttps://github.com/boto/botocore/blob/develop/botocore/data/dms/2016-01-01/waiters-2.json#L168\r\nhttps://github.com/boto/boto3/issues/1926\r\n\r\nWhere `ready` status is considered a failure state for `running` waiter.\r\n\r\nIn case of DMS, the most natural way of using the start task operator would be:\r\n\"Create task\" >> \"Start task\"\r\n\r\nIf we add a running waiter to start task function, it fails because of the `ready` state which the task transitions into. I have tested it, and this was the result. So I opted out for not using the waiter.",
        "createdAt" : "2021-05-22T08:44:52Z",
        "updatedAt" : "2021-05-22T08:44:53Z",
        "lastEditedBy" : "8c8c5ab5-a901-49da-a826-2609fc496d94",
        "tags" : [
        ]
      }
    ],
    "commit" : "041607e2c18a409c95ed17b5d52029a40b58f0eb",
    "line" : 167,
    "diffHunk" : "@@ -1,1 +165,169 @@            **kwargs,\n        )\n\n    def stop_replication_task(self, replication_task_arn):\n        \"\"\""
  }
]