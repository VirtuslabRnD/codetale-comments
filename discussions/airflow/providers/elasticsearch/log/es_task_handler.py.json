[
  {
    "id" : "f81d6298-be0e-4723-ba7a-52b20185fb84",
    "prId" : 5499,
    "prUrl" : "https://github.com/apache/airflow/pull/5499#pullrequestreview-454581135",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "87dfeed5-c89f-4db2-81bc-2a54fad7056e",
        "parentId" : null,
        "authorId" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "body" : "Are those related changes?",
        "createdAt" : "2020-07-23T11:37:32Z",
        "updatedAt" : "2020-09-08T11:37:36Z",
        "lastEditedBy" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "tags" : [
        ]
      },
      {
        "id" : "5d08fcea-ce6e-4067-942e-3a1dfe5fa130",
        "parentId" : "87dfeed5-c89f-4db2-81bc-2a54fad7056e",
        "authorId" : "b2325481-de41-4b6d-a7c1-7152249759ba",
        "body" : "Since the execution of one task instance will be processed in two steps, the logs generated from these two steps might come from different host. In es_task_handler, the logs are fetched by offset and it could mess up logs from two hosts. The change in here is to change the returning logs from string to a list of hosted log string so that users can have a readable log url.",
        "createdAt" : "2020-07-24T00:39:26Z",
        "updatedAt" : "2020-09-08T11:37:36Z",
        "lastEditedBy" : "b2325481-de41-4b6d-a7c1-7152249759ba",
        "tags" : [
        ]
      }
    ],
    "commit" : "5b5bbff3492fab908dd1c8142ba3beaa3fb274c2",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +39,43 @@\n# Elasticsearch hosted log type\nEsLogMsgType = List[Tuple[str, str]]\n\n"
  },
  {
    "id" : "9beb73b5-fcd7-487f-b4ba-17c19de12cb5",
    "prId" : 13310,
    "prUrl" : "https://github.com/apache/airflow/pull/13310#pullrequestreview-558731853",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "aa49a903-f033-49c1-a7fd-435a912ac237",
        "parentId" : null,
        "authorId" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "body" : "What is the reason for exception?",
        "createdAt" : "2020-12-25T01:03:14Z",
        "updatedAt" : "2020-12-25T01:33:55Z",
        "lastEditedBy" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "tags" : [
        ]
      },
      {
        "id" : "8207fa20-8cb0-43b6-b509-96dd0752162d",
        "parentId" : "aa49a903-f033-49c1-a7fd-435a912ac237",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "For now, I can only foresee `KeyError` here i.e. if log_format has a key that is not present in ES logs:\r\nhttps://github.com/apache/airflow/blob/69d6d0239f470ac75e23160bac63408350c1835a/airflow/config_templates/default_airflow.cfg#L289",
        "createdAt" : "2020-12-25T01:30:56Z",
        "updatedAt" : "2020-12-25T01:33:55Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "05b91eee-2c78-49e0-8ef3-b609b5e05c3b",
        "parentId" : "aa49a903-f033-49c1-a7fd-435a912ac237",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "But kept a broad-except to avoid any unforeseen exception but it is just a safeguard and keeps the same behavior as now i.e. return `log_line.message`",
        "createdAt" : "2020-12-25T01:31:51Z",
        "updatedAt" : "2020-12-25T01:33:55Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      }
    ],
    "commit" : "5ea5d445c9bfdcda4c68aa4bd76320e235731f58",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +209,213 @@                # pylint: disable=protected-access\n                return self.formatter._style.format(_ESJsonLogFmt(**log_line.to_dict()))\n            except Exception:  # noqa pylint: disable=broad-except\n                pass\n"
  },
  {
    "id" : "8f750043-5649-4aa5-a8d3-974ab7014af4",
    "prId" : 15163,
    "prUrl" : "https://github.com/apache/airflow/pull/15163#pullrequestreview-629787879",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "def6dd57-4a5f-4eb7-922a-8c8c8b0beb6e",
        "parentId" : null,
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "@millin Thanks for the PR, can you please also add a test case or update an existing test in https://github.com/apache/airflow/blob/master/tests/providers/elasticsearch/log/test_es_task_handler.py",
        "createdAt" : "2021-04-02T21:52:42Z",
        "updatedAt" : "2021-04-07T09:27:17Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "215f75dd-edd7-477e-859d-295cc60d0097",
        "parentId" : "def6dd57-4a5f-4eb7-922a-8c8c8b0beb6e",
        "authorId" : "40565530-4cdc-4a72-bfb7-c93a49a7e5e6",
        "body" : "Ok, I'll try",
        "createdAt" : "2021-04-03T07:13:51Z",
        "updatedAt" : "2021-04-07T09:27:17Z",
        "lastEditedBy" : "40565530-4cdc-4a72-bfb7-c93a49a7e5e6",
        "tags" : [
        ]
      },
      {
        "id" : "29666ffe-5ae9-4044-bbc0-3561d6723511",
        "parentId" : "def6dd57-4a5f-4eb7-922a-8c8c8b0beb6e",
        "authorId" : "40565530-4cdc-4a72-bfb7-c93a49a7e5e6",
        "body" : "I have updated the test",
        "createdAt" : "2021-04-07T09:25:25Z",
        "updatedAt" : "2021-04-07T09:27:17Z",
        "lastEditedBy" : "40565530-4cdc-4a72-bfb7-c93a49a7e5e6",
        "tags" : [
        ]
      }
    ],
    "commit" : "2b5c63fba96a9b25c21f614efffe5c22c131fbd3",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +208,212 @@            try:\n                # pylint: disable=protected-access\n                return self.formatter._style.format(_ESJsonLogFmt(self.json_fields, **log_line.to_dict()))\n            except Exception:  # noqa pylint: disable=broad-except\n                pass"
  }
]