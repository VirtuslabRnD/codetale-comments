[
  {
    "id" : "6cc64bd6-3b95-4dc4-ae79-1b1b9aa0b59d",
    "prId" : 8974,
    "prUrl" : "https://github.com/apache/airflow/pull/8974#pullrequestreview-423809159",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "757627d5-9cb0-4b85-929c-a2706553eefb",
        "parentId" : null,
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "This would error if we don't have `kv_engine_version` in `extra_dejson` unless we set the default in `VaultHook`",
        "createdAt" : "2020-06-03T12:08:34Z",
        "updatedAt" : "2020-06-17T16:13:45Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "8b3b9a3e-eacd-4c2d-bb7d-5ab96ad2fce6",
        "parentId" : "757627d5-9cb0-4b85-929c-a2706553eefb",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "Not really. Why ? dejson.get() returns None in this case and we have if conn_version one line below.\r\n```kv_engine_version = int(conn_version) if conn_version else DEFAULT_KV_ENGINE_VERSION``` . I think it is sound :).",
        "createdAt" : "2020-06-03T18:07:19Z",
        "updatedAt" : "2020-06-17T16:13:45Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      },
      {
        "id" : "e1f0a8a5-0db5-4b5e-a83d-60dccdc92624",
        "parentId" : "757627d5-9cb0-4b85-929c-a2706553eefb",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "I see. It was the copy&pasted description in pydoc. Fixed in the pydoc.",
        "createdAt" : "2020-06-03T18:12:09Z",
        "updatedAt" : "2020-06-17T16:13:45Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "522f0aeb83f78c934b6f79c367a7e1e9cdbe00bc",
    "line" : 88,
    "diffHunk" : "@@ -1,1 +132,136 @@\n        if not kv_engine_version:\n            conn_version = self.connection.extra_dejson.get(\"kv_engine_version\")\n            try:\n                kv_engine_version = int(conn_version) if conn_version else DEFAULT_KV_ENGINE_VERSION"
  },
  {
    "id" : "5f94529f-f34e-4cd9-9b75-827f23da571d",
    "prId" : 8974,
    "prUrl" : "https://github.com/apache/airflow/pull/8974#pullrequestreview-423809888",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a1fb2501-756b-414e-b3b3-25845bec8024",
        "parentId" : null,
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "```suggestion\r\n        kv_engine_version: Optional[int] = DEFAULT_KV_ENGINE_VERSION,\r\n```\r\n\r\nBased on comment on L122 ",
        "createdAt" : "2020-06-03T12:09:12Z",
        "updatedAt" : "2020-06-17T16:13:45Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "d228db91-3dd6-4fca-b103-35e43846f564",
        "parentId" : "a1fb2501-756b-414e-b3b3-25845bec8024",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "I fixed the description. It was misleading indeed:\r\n\r\n* Hook's constructor kv_engine_version overrides whatever we have in connection. If we set anything there - so be it.\r\n* If we did not set anything in the connection (or set it to None) we check the connection one and use what we find there. If there is nothing in the connection we default to 2. \r\n\r\nWe cannot have default in the constructor otherwise we would not be able to distinguish \"not set\" from \"set to 2\".\r\n\r\n\r\n",
        "createdAt" : "2020-06-03T18:13:08Z",
        "updatedAt" : "2020-06-17T16:13:45Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "522f0aeb83f78c934b6f79c367a7e1e9cdbe00bc",
    "line" : 67,
    "diffHunk" : "@@ -1,1 +111,115 @@        auth_type: Optional[str] = None,\n        auth_mount_point: Optional[str] = None,\n        kv_engine_version: Optional[int] = None,\n        role_id: Optional[str] = None,\n        kubernetes_role: Optional[str] = None,"
  }
]