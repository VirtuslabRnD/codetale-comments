[
  {
    "id" : "425c4333-e6d3-4732-b735-ae6001dbbcf7",
    "prId" : 10023,
    "prUrl" : "https://github.com/apache/airflow/pull/10023#pullrequestreview-468784790",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "95185f45-ab9c-400d-8f5b-bb85a2e98a02",
        "parentId" : null,
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "https://github.com/apache/airflow/pull/9570\r\nDoes this problem occur here? What permissions are needed for this method?",
        "createdAt" : "2020-08-17T19:05:48Z",
        "updatedAt" : "2020-08-26T06:56:05Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      },
      {
        "id" : "4561131c-b64e-432f-b4e6-cd4540c369e9",
        "parentId" : "95185f45-ab9c-400d-8f5b-bb85a2e98a02",
        "authorId" : "d65efb84-7a3c-4a88-836d-16ca1706510f",
        "body" : "This assumes a role similar to the one below ( specific namespace role or ClusterRole. In any case the operator is constrained to the job namespace ) \r\n\r\n```yaml\r\n- apiGroups: [\"\"]\r\n  resources: [\"pods\", \"pods/log\"]\r\n  verbs: [\"get\", \"watch\", \"list\"]\r\n```\r\nIt's important to mention that I opted against using the watcher, but left this here for future use ( I'm using ``read_namespaced_pod_log``, which still requires the mentioned permissions )\r\n\r\nShould we add a manifest that deals with it for a system test? similar to RBAC yamls from the operator here https://github.com/apache/airflow/blob/7d24b088cd736cfa18f9214e4c9d6ce2d5865f3d/tests/providers/cncf/kubernetes/operators/test_spark_kubernetes_system.py#L36\r\n\r\nIn any case I don't think it should block, as it depends on explicitly adding the flag",
        "createdAt" : "2020-08-17T19:47:04Z",
        "updatedAt" : "2020-08-26T06:56:05Z",
        "lastEditedBy" : "d65efb84-7a3c-4a88-836d-16ca1706510f",
        "tags" : [
        ]
      }
    ],
    "commit" : "fecc15af74c9ca0de089aabab9e493d17462ddc9",
    "line" : 36,
    "diffHunk" : "@@ -1,1 +151,155 @@        return (\n            watcher,\n            watcher.stream(\n                api.read_namespaced_pod_log,\n                name=pod_name,"
  }
]