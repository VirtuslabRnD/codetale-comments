[
  {
    "id" : "6e18b8b3-6e9a-4aeb-9d74-d1470ea16119",
    "prId" : 6377,
    "prUrl" : "https://github.com/apache/airflow/pull/6377#pullrequestreview-407015627",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ad7967fd-e913-4d50-b303-879f55d62f2a",
        "parentId" : null,
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "Is it not possible to use multiple labels to get the pod instead of creating a single string?\r\n\r\nIf not, we need to be careful as the order of items can change how the string. We can `sort` the keys in `filtered_labels` to take care of that issue.\r\n\r\n",
        "createdAt" : "2020-05-06T21:31:01Z",
        "updatedAt" : "2020-05-15T18:43:50Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "46a1efb2-850c-4bbe-b582-6458e9f35abf",
        "parentId" : "ad7967fd-e913-4d50-b303-879f55d62f2a",
        "authorId" : "b8b84983-5876-4ccf-886c-2449d94ca22f",
        "body" : "@kaxil why do we need to sort? this is for creating the label_selector for kubernetes which I don't believe is order specific.",
        "createdAt" : "2020-05-06T21:50:20Z",
        "updatedAt" : "2020-05-15T18:43:50Z",
        "lastEditedBy" : "b8b84983-5876-4ccf-886c-2449d94ca22f",
        "tags" : [
        ]
      },
      {
        "id" : "397ab9d6-0ec4-4268-aee2-c078cb20ff3f",
        "parentId" : "ad7967fd-e913-4d50-b303-879f55d62f2a",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "For the following reason:\r\n\r\n```\r\nIn [1]: def _get_pod_identifying_label_string(labels):\r\n   ...:         filtered_labels = {label_id: label for label_id, label in labels.items() if label_id != 'try_number'}\r\n   ...:         return ','.join([label_id + '=' + label for label_id, label in filtered_labels.items()])\r\n   ...:\r\n\r\nIn [2]: labels = {\r\n   ...:             'dag_id': 'test_dag_id',\r\n   ...:             'task_id': 'test_task_id',\r\n   ...:             'execution_date': 'execution_date',\r\n   ...:             'try_number': 2,\r\n   ...:         }\r\n\r\nIn [3]: _get_pod_identifying_label_string(labels)\r\nOut[3]: 'dag_id=test_dag_id,task_id=test_task_id,execution_date=execution_date'\r\n\r\nIn [6]: labels_1 = {\r\n   ...:             'task_id': 'test_task_id',\r\n   ...:             'dag_id': 'test_dag_id',\r\n   ...:             'execution_date': 'execution_date',\r\n   ...:             'try_number': 2,\r\n   ...:         }\r\n\r\nIn [7]: _get_pod_identifying_label_string(labels_1)\r\nOut[7]: 'task_id=test_task_id,dag_id=test_dag_id,execution_date=execution_date'\r\n\r\n```",
        "createdAt" : "2020-05-06T21:55:55Z",
        "updatedAt" : "2020-05-15T18:43:50Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      }
    ],
    "commit" : "21f3619560c3e289710b15c0ef7ba172512e8eba",
    "line" : 173,
    "diffHunk" : "@@ -1,1 +299,303 @@    @staticmethod\n    def _get_pod_identifying_label_string(labels):\n        filtered_labels = {label_id: label for label_id, label in labels.items() if label_id != 'try_number'}\n        return ','.join([label_id + '=' + label for label_id, label in sorted(filtered_labels.items())])\n"
  }
]