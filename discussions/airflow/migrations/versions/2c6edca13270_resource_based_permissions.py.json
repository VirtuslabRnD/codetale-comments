[
  {
    "id" : "53a8a360-8ad8-4f14-beb3-1037085739a5",
    "prId" : 13458,
    "prUrl" : "https://github.com/apache/airflow/pull/13458#pullrequestreview-561194822",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "742ff2c2-b3c1-4365-91d1-b93749839e77",
        "parentId" : null,
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "```suggestion\r\n    handlers = log.handlers\r\n```",
        "createdAt" : "2021-01-04T16:37:11Z",
        "updatedAt" : "2021-01-04T16:37:11Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "7fc47cf5-ad6f-4b42-b165-eb60d07cfd60",
        "parentId" : "742ff2c2-b3c1-4365-91d1-b93749839e77",
        "authorId" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "body" : "Won't it get mutated? I wanted to make a deep copy to avoid situation that we had some time ago in Airflow with handlers ðŸ˜„  ",
        "createdAt" : "2021-01-04T17:00:58Z",
        "updatedAt" : "2021-01-04T17:00:59Z",
        "lastEditedBy" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "tags" : [
        ]
      },
      {
        "id" : "46d7a943-d122-434e-ab4d-5566a9f9e699",
        "parentId" : "742ff2c2-b3c1-4365-91d1-b93749839e77",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "`airflow db upgrade` will run in a separate process so I don't think it might cause any issue.\r\n\r\n",
        "createdAt" : "2021-01-04T17:09:27Z",
        "updatedAt" : "2021-01-04T17:09:27Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "2f68ec8e-cc61-4ecc-900c-8a12e7f31f08",
        "parentId" : "742ff2c2-b3c1-4365-91d1-b93749839e77",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "However, I am fine with this too -- doesn't hurt ðŸ˜‰ ",
        "createdAt" : "2021-01-04T17:11:37Z",
        "updatedAt" : "2021-01-04T17:11:37Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      }
    ],
    "commit" : "900410c6983e3314080c975890bf5575cd370351",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +311,315 @@    \"\"\"Apply Resource based permissions.\"\"\"\n    log = logging.getLogger()\n    handlers = log.handlers[:]\n    remap_permissions()\n    log.handlers = handlers"
  },
  {
    "id" : "bc3972f7-b4cc-4721-8fc3-cfb4b238c5d2",
    "prId" : 13922,
    "prUrl" : "https://github.com/apache/airflow/pull/13922#pullrequestreview-580874873",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4c6999b3-745b-4b1b-82fa-b125027cfca1",
        "parentId" : null,
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Changing the migration won't affect anyone who has already upgrade to 2.0.0 - do we need a new migration to fix this up?",
        "createdAt" : "2021-01-30T18:31:23Z",
        "updatedAt" : "2021-02-02T00:03:08Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "8bc1993c-7a99-43c9-8373-2497e576dd4f",
        "parentId" : "4c6999b3-745b-4b1b-82fa-b125027cfca1",
        "authorId" : "f30d90ba-101c-4671-a1df-fa45531fa887",
        "body" : "@ashb This will will help anyone who goes straight from 1.X to 2.0.1, which is probably most of the users.\r\n\r\nWe shouldn't need a migration, since triggering also requires `Dag Run.can_create`, which is only included in `>= User`. `Dag.can_edit` is also included in `>= User`, so either way, someone with default roles won't be able to trigger dags unless they have `User` or higher. \r\n\r\nThis might change the behavior of users with custom roles. If someone has `Viewer` + a custom role with `Dag Run.can_create`, or they manually added `Dag Run.can_create` to `Viewer`, then they will lose access until they add `Dag.can_edit` to the custom role. I suspect this is a small group of users.",
        "createdAt" : "2021-02-02T00:00:38Z",
        "updatedAt" : "2021-02-02T00:03:08Z",
        "lastEditedBy" : "f30d90ba-101c-4671-a1df-fa45531fa887",
        "tags" : [
        ]
      }
    ],
    "commit" : "f6b5611a657a8517de9750257d7025c5f5150b1c",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +162,166 @@    ],\n    (\"Airflow\", \"can_trigger\"): [\n        (permissions.ACTION_CAN_EDIT, permissions.RESOURCE_DAG),\n        (permissions.ACTION_CAN_CREATE, permissions.RESOURCE_DAG_RUN),\n    ],"
  }
]