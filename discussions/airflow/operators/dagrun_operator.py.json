[
  {
    "id" : "875f4c0c-f874-446e-836e-20ea3018db11",
    "prId" : 4359,
    "prUrl" : "https://github.com/apache/airflow/pull/4359#pullrequestreview-187609902",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "dfe6feb5-68f3-480e-b9de-876ebc156026",
        "parentId" : null,
        "authorId" : "38d80383-47b9-439a-9efe-9282f79f8b2f",
        "body" : "if execution_date is None, should we raise error ?",
        "createdAt" : "2018-12-23T05:32:32Z",
        "updatedAt" : "2019-01-02T23:03:52Z",
        "lastEditedBy" : "38d80383-47b9-439a-9efe-9282f79f8b2f",
        "tags" : [
        ]
      },
      {
        "id" : "793f83ce-232a-4b8e-9c65-15075bfcccf9",
        "parentId" : "dfe6feb5-68f3-480e-b9de-876ebc156026",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "No, it is the default value as well and will also break backwards compatiblility.",
        "createdAt" : "2018-12-23T06:27:33Z",
        "updatedAt" : "2019-01-02T23:03:52Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "e152b38a-e683-4666-a2d0-76eb1efe31e6",
        "parentId" : "dfe6feb5-68f3-480e-b9de-876ebc156026",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "It uses the current time when execution date is None",
        "createdAt" : "2018-12-23T06:28:21Z",
        "updatedAt" : "2019-01-02T23:03:52Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      }
    ],
    "commit" : "d6b0cb1cdab9f7254dfd179bade59b3d6e869aad",
    "line" : 34,
    "diffHunk" : "@@ -1,1 +73,77 @@            self.execution_date = execution_date\n        elif execution_date is None:\n            self.execution_date = execution_date\n        else:\n            raise TypeError("
  },
  {
    "id" : "6f26e195-58fb-47d1-be3f-405831e67a93",
    "prId" : 6317,
    "prUrl" : "https://github.com/apache/airflow/pull/6317#pullrequestreview-305483127",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ae0694b1-ee2f-4948-ac32-5c8c4d7e7175",
        "parentId" : null,
        "authorId" : "e29ffafb-ac51-434b-b9e0-af262caae1ee",
        "body" : "Wouldn't it be better to set the execution date on line 58 where you are setting it the first time?\r\n```python\r\nif isinstance(execution_date, str):\r\n    self.execution_date = timezone.parse(execution_date)\r\nelse:\r\n    self.execution_date = execution_date\r\n```\r\nIMO `self.execution_date = timezone.parse(self.execution_date)` is a kind of validation so that should be made in the constructor even if it will be called more often than in the `execute`.\r\n\r\nthen in the `execute` you can just do\r\n```python\r\nif self.execution_date is None:\r\n    self.execution_date = timezone.utcnow()\r\nrun_id = \"trig__{}\".format(self.execution_date.isoformat())\r\n```\r\n\r\nWDYT?",
        "createdAt" : "2019-10-19T12:57:51Z",
        "updatedAt" : "2019-10-22T20:23:21Z",
        "lastEditedBy" : "e29ffafb-ac51-434b-b9e0-af262caae1ee",
        "tags" : [
        ]
      },
      {
        "id" : "542c218a-afcf-4fbb-98ee-5ec2fa7d30b7",
        "parentId" : "ae0694b1-ee2f-4948-ac32-5c8c4d7e7175",
        "authorId" : "db6eb8b7-c895-4f19-9e3d-6fa0535f27e2",
        "body" : "Would like to use it as it is much shorter and simpler.\r\n\r\nHowever, the `execution_date` can be templated. For example `{{ execution_date }}` will fail in `timezone.parse()`. So, we have to save it first, wait for `execute()` to be called and all variables to be templated, and only then can we call `timezone.parse()` on the `execution_date` :( ",
        "createdAt" : "2019-10-22T20:22:18Z",
        "updatedAt" : "2019-10-22T20:23:21Z",
        "lastEditedBy" : "db6eb8b7-c895-4f19-9e3d-6fa0535f27e2",
        "tags" : [
        ]
      }
    ],
    "commit" : "467dfcc75b961ba2056c7dbce96c57ca907cd64b",
    "line" : 92,
    "diffHunk" : "@@ -1,1 +68,72 @@        elif isinstance(self.execution_date, str):\n            run_id = \"trig__{}\".format(self.execution_date)\n            self.execution_date = timezone.parse(self.execution_date)  # trigger_dag() expects datetime\n        else:\n            run_id = \"trig__{}\".format(timezone.utcnow().isoformat())"
  },
  {
    "id" : "b052cbe7-9a7a-4e35-89e1-7379b332b19e",
    "prId" : 11778,
    "prUrl" : "https://github.com/apache/airflow/pull/11778#pullrequestreview-521544444",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8383e387-1878-48f3-9350-b07d7b3d3dda",
        "parentId" : null,
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "Can you use url_for here? I guess it should work.",
        "createdAt" : "2020-10-27T14:07:24Z",
        "updatedAt" : "2020-11-08T17:36:02Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      },
      {
        "id" : "72cb570d-f409-4b78-9e6e-b1c39846a900",
        "parentId" : "8383e387-1878-48f3-9350-b07d7b3d3dda",
        "authorId" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "body" : "This will work only if inside of application context and I'm not sure if this is necessary\r\n```\r\nRuntimeError: Attempted to generate a URL without the application context being pushed. This has to be executed when application context is available.\r\n```",
        "createdAt" : "2020-10-27T14:11:51Z",
        "updatedAt" : "2020-11-08T17:36:02Z",
        "lastEditedBy" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "tags" : [
        ]
      },
      {
        "id" : "db490fa6-5c65-441f-b247-0dfa1e134ffd",
        "parentId" : "8383e387-1878-48f3-9350-b07d7b3d3dda",
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "It seems to me that this link will be generated by the webserver, so this is expected behavior.",
        "createdAt" : "2020-10-27T21:05:05Z",
        "updatedAt" : "2020-11-08T17:36:02Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      },
      {
        "id" : "1d9a2a80-d23c-4af0-9982-117a71789836",
        "parentId" : "8383e387-1878-48f3-9350-b07d7b3d3dda",
        "authorId" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "body" : "Please see https://github.com/apache/airflow/pull/11778#discussion_r515906811",
        "createdAt" : "2020-11-02T11:24:19Z",
        "updatedAt" : "2020-11-08T17:36:02Z",
        "lastEditedBy" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "tags" : [
        ]
      }
    ],
    "commit" : "0e3855e9d4f41c0b480874ce614eea9b3485159f",
    "line" : 21,
    "diffHunk" : "@@ -1,1 +39,43 @@    def get_link(self, operator, dttm):\n        query = {\"dag_id\": operator.trigger_dag_id, \"execution_date\": dttm.isoformat()}\n        return build_airflow_url_with_query(query)\n\n"
  }
]