[
  {
    "id" : "6822a3b3-6bc6-4aec-8e38-1ed4b7f7d549",
    "prId" : 12677,
    "prUrl" : "https://github.com/apache/airflow/pull/12677#pullrequestreview-570041006",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2d7df4cc-251c-42b7-8074-29e33682c358",
        "parentId" : null,
        "authorId" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "body" : "This is slightly confusing, database is not the same thing as schema",
        "createdAt" : "2021-01-13T07:26:42Z",
        "updatedAt" : "2021-02-26T17:14:13Z",
        "lastEditedBy" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "tags" : [
        ]
      },
      {
        "id" : "78e686b4-cc35-40b7-97f9-1904c19a4dc1",
        "parentId" : "2d7df4cc-251c-42b7-8074-29e33682c358",
        "authorId" : "aeab690b-2491-4cd7-95ca-94640c32271c",
        "body" : "I totally agree!  But this is how the current mapping of Airflow works. Currently, the `Connection` object uses the field `schema` to specify the database (not schema) for database type connections, i.e. Postgres, MySQL, etc. And as a result, all `DbApiHook`s use the field `schema` to specify the database to connect to using the underlying DB API (i.e. `psycopg2`). `extra` is used to specify the schema if applicable. So the relationship looks like this:\r\n\r\n```\r\nConnection(schema) -> DbApiHook (schema) -> DB API (dbname/database) \r\n```\r\n\r\nAbout the field `database`, it was already used for the `SQLBranchOperator` and also other SQL like operators. For this PR, I simply refactor it out to reduce duplicated code and add them to the `check*` operators for consistency.\r\n\r\nThough I think it will be nice to consolidate between `schema` and `database`, I think they should be addressed in a separate PR or worth a discussion in the `dev` list. I can send an email in the dev list if you don't object.",
        "createdAt" : "2021-01-17T09:56:34Z",
        "updatedAt" : "2021-02-26T17:14:13Z",
        "lastEditedBy" : "aeab690b-2491-4cd7-95ca-94640c32271c",
        "tags" : [
        ]
      }
    ],
    "commit" : "e710195479eca7c67553024d5cf1f40de7d0622e",
    "line" : 58,
    "diffHunk" : "@@ -1,1 +57,61 @@\n        if self.database:\n            hook.schema = self.database\n\n        return hook"
  },
  {
    "id" : "a55d3547-362f-4549-8d40-b21ff177e824",
    "prId" : 12677,
    "prUrl" : "https://github.com/apache/airflow/pull/12677#pullrequestreview-600011767",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bad191b3-cf5f-4ff0-af9c-e1e71a9d4cbe",
        "parentId" : null,
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "Since this operator is in Airflow Core, can we release providers with the changes in this PR without corresponding core changes",
        "createdAt" : "2021-02-26T20:59:30Z",
        "updatedAt" : "2021-02-26T20:59:30Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "9e26381a-db05-4cc6-ad38-a733eefaa714",
        "parentId" : "bad191b3-cf5f-4ff0-af9c-e1e71a9d4cbe",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "cc @potiuk ",
        "createdAt" : "2021-02-26T21:00:04Z",
        "updatedAt" : "2021-02-26T21:00:04Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "8905295d-cf21-414a-a1cf-6b4695f32a40",
        "parentId" : "bad191b3-cf5f-4ff0-af9c-e1e71a9d4cbe",
        "authorId" : "aeab690b-2491-4cd7-95ca-94640c32271c",
        "body" : "I think so, the refactor on this operator is mainly to reduce duplicated code, and the logic, interface, and signature don't change in a backward incompatible one. But I don't know enough about how providers are released and how the core may affect it. cc @potiuk (sorry to ping you again..)",
        "createdAt" : "2021-02-26T21:07:14Z",
        "updatedAt" : "2021-02-26T21:07:32Z",
        "lastEditedBy" : "aeab690b-2491-4cd7-95ca-94640c32271c",
        "tags" : [
        ]
      },
      {
        "id" : "5608fdf5-48e3-4f8e-84a1-3afff4009ddb",
        "parentId" : "bad191b3-cf5f-4ff0-af9c-e1e71a9d4cbe",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "I think it should work",
        "createdAt" : "2021-02-26T22:54:25Z",
        "updatedAt" : "2021-02-26T22:54:26Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      }
    ],
    "commit" : "e710195479eca7c67553024d5cf1f40de7d0622e",
    "line" : 122,
    "diffHunk" : "@@ -1,1 +149,153 @@\n\nclass SQLValueCheckOperator(BaseSQLOperator):\n    \"\"\"\n    Performs a simple value check using sql code."
  }
]