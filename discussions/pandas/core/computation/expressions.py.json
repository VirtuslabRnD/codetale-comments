[
  {
    "id" : "2dd088de-5fa9-4f62-bc09-ca3bf371dc80",
    "prId" : 19292,
    "prUrl" : "https://github.com/pandas-dev/pandas/pull/19292#pullrequestreview-90079715",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8c46f98f-a6bb-4656-b7a3-5a5ff38dbc6a",
        "parentId" : null,
        "authorId" : "7086d5c0-382b-4c41-b70d-144a07643f71",
        "body" : "the one after numpy is ok, but no reason for line 13",
        "createdAt" : "2018-01-19T11:12:17Z",
        "updatedAt" : "2018-01-19T19:17:50Z",
        "lastEditedBy" : "7086d5c0-382b-4c41-b70d-144a07643f71",
        "tags" : [
        ]
      }
    ],
    "commit" : "7872f332794b082ae70e6b937697b0e7e3abb86d",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +10,14 @@import numpy as np\n\nimport pandas.core.common as com\nfrom pandas.core.computation.check import _NUMEXPR_INSTALLED\nfrom pandas.core.config import get_option"
  },
  {
    "id" : "4fd6a3b4-a648-4844-af3c-c428adae3f24",
    "prId" : 22416,
    "prUrl" : "https://github.com/pandas-dev/pandas/pull/22416#pullrequestreview-147449767",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "24e81305-4138-46be-b84e-c8a358f99377",
        "parentId" : null,
        "authorId" : "51189123-86a2-400a-9762-6816882b6f12",
        "body" : "* Add a comment referencing the original issue and explaining why you need this.\r\n* Can't you simplify as follows:\r\n\r\n~~~python\r\nif not isinstance(x.dtype, np.dtype):\r\n  x = x.rename({'dtype': 'temporary_dtype'}, axis=1)\r\n\r\nreturn x.dtype == bool\r\n~~~",
        "createdAt" : "2018-08-19T07:21:32Z",
        "updatedAt" : "2018-12-31T06:11:34Z",
        "lastEditedBy" : "51189123-86a2-400a-9762-6816882b6f12",
        "tags" : [
        ]
      }
    ],
    "commit" : "1fe9effd2dc92aa44cc65c502221f4033262c342",
    "line" : 21,
    "diffHunk" : "@@ -1,1 +166,170 @@            return 'bool' in x.dtypes\n        else:\n            return x.dtype == bool\n    except AttributeError:\n        return isinstance(x, (bool, np.bool_))"
  },
  {
    "id" : "bdf203f2-4e6b-4883-a0be-691401bf114d",
    "prId" : 22416,
    "prUrl" : "https://github.com/pandas-dev/pandas/pull/22416#pullrequestreview-148726995",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "89101ad1-7992-4a1b-9501-7afe3d3a583e",
        "parentId" : null,
        "authorId" : "21b82015-4bfc-4f74-bfca-586973dad2cd",
        "body" : "I'd rewrite this whole function as something like\r\n\r\n```python\r\nif isinstance(x, ABCDataFrame):\r\n    return 'bool' in x.dtypes\r\nelse:\r\n    try:\r\n        return x.dtype == bool\r\n    except AttributeError:\r\n        return isinstance(x, (bool, np.bool_))\r\n```",
        "createdAt" : "2018-08-21T01:55:29Z",
        "updatedAt" : "2018-12-31T06:11:34Z",
        "lastEditedBy" : "21b82015-4bfc-4f74-bfca-586973dad2cd",
        "tags" : [
        ]
      },
      {
        "id" : "bb48788a-117e-48f7-bdc0-c68150cd383a",
        "parentId" : "89101ad1-7992-4a1b-9501-7afe3d3a583e",
        "authorId" : "b53b1458-6bc3-4c6a-b7be-f184dcf7d1fe",
        "body" : "@TomAugspurger thank you yout advice! i will try!",
        "createdAt" : "2018-08-23T01:06:55Z",
        "updatedAt" : "2018-12-31T06:11:34Z",
        "lastEditedBy" : "b53b1458-6bc3-4c6a-b7be-f184dcf7d1fe",
        "tags" : [
        ]
      }
    ],
    "commit" : "1fe9effd2dc92aa44cc65c502221f4033262c342",
    "line" : 12,
    "diffHunk" : "@@ -1,1 +162,166 @@\ndef _has_bool_dtype(x):\n    try:\n        if isinstance(x, ABCDataFrame):\n            return 'bool' in x.dtypes"
  },
  {
    "id" : "afc280c0-8c43-4818-b90e-6a4592b65b1e",
    "prId" : 27773,
    "prUrl" : "https://github.com/pandas-dev/pandas/pull/27773#pullrequestreview-275130101",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ed94e3c3-bf61-47d8-8bff-2a62bce71b41",
        "parentId" : null,
        "authorId" : "5e8c5ef2-940b-436e-9c5f-98ae5460128c",
        "body" : "Is this actually needed?",
        "createdAt" : "2019-08-06T15:26:21Z",
        "updatedAt" : "2019-08-14T18:58:00Z",
        "lastEditedBy" : "5e8c5ef2-940b-436e-9c5f-98ae5460128c",
        "tags" : [
        ]
      },
      {
        "id" : "ce542dd0-b5bc-4d22-bb99-93da70858237",
        "parentId" : "ed94e3c3-bf61-47d8-8bff-2a62bce71b41",
        "authorId" : "5e8c5ef2-940b-436e-9c5f-98ae5460128c",
        "body" : "Ah sorry didn't realize that `dtypes` was implemented on a Series, so makes sense",
        "createdAt" : "2019-08-06T15:28:17Z",
        "updatedAt" : "2019-08-14T18:58:00Z",
        "lastEditedBy" : "5e8c5ef2-940b-436e-9c5f-98ae5460128c",
        "tags" : [
        ]
      },
      {
        "id" : "fd8c7152-8d9f-4719-a2f3-0c6eca2fcd5c",
        "parentId" : "ed94e3c3-bf61-47d8-8bff-2a62bce71b41",
        "authorId" : "21b82015-4bfc-4f74-bfca-586973dad2cd",
        "body" : "This may be worth adding a comment for. I also didn't realize that Series.dtypes was a thing.",
        "createdAt" : "2019-08-12T13:59:20Z",
        "updatedAt" : "2019-08-14T18:58:00Z",
        "lastEditedBy" : "21b82015-4bfc-4f74-bfca-586973dad2cd",
        "tags" : [
        ]
      },
      {
        "id" : "ef249422-b44b-424d-8530-c6b0159979ae",
        "parentId" : "ed94e3c3-bf61-47d8-8bff-2a62bce71b41",
        "authorId" : "adf621f1-4745-479a-a1fc-dc14046a3f4b",
        "body" : "can we get here with anything other than DataFrame/Series?  if not, can this just be an `ndim` check instead of a hasattr check?",
        "createdAt" : "2019-08-14T19:48:09Z",
        "updatedAt" : "2019-08-14T19:48:09Z",
        "lastEditedBy" : "adf621f1-4745-479a-a1fc-dc14046a3f4b",
        "tags" : [
        ]
      },
      {
        "id" : "7e5c2eac-4173-4a49-bc29-703e6e0cd487",
        "parentId" : "ed94e3c3-bf61-47d8-8bff-2a62bce71b41",
        "authorId" : "6abf7eb4-67c3-4359-930c-2853e9e42b5a",
        "body" : "You can get ndarray as well which doesn't have dtypes.",
        "createdAt" : "2019-08-14T20:25:47Z",
        "updatedAt" : "2019-08-14T20:25:47Z",
        "lastEditedBy" : "6abf7eb4-67c3-4359-930c-2853e9e42b5a",
        "tags" : [
        ]
      }
    ],
    "commit" : "0100aba65a833542f78d2e9e410b1019f266158b",
    "line" : 10,
    "diffHunk" : "@@ -1,1 +81,85 @@            for o in [a, b]:\n                # Series implements dtypes, check for dimension count as well\n                if hasattr(o, \"dtypes\") and o.ndim > 1:\n                    s = o.dtypes.value_counts()\n                    if len(s) > 1:"
  },
  {
    "id" : "aa300618-fd90-4db2-94c3-7c38789cd148",
    "prId" : 28328,
    "prUrl" : "https://github.com/pandas-dev/pandas/pull/28328#pullrequestreview-285180340",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "de7d9e3d-c743-4ae6-9557-24da7987d195",
        "parentId" : null,
        "authorId" : "7086d5c0-382b-4c41-b70d-144a07643f71",
        "body" : "can you add some doc-strings",
        "createdAt" : "2019-09-07T17:14:59Z",
        "updatedAt" : "2019-09-07T17:14:59Z",
        "lastEditedBy" : "7086d5c0-382b-4c41-b70d-144a07643f71",
        "tags" : [
        ]
      }
    ],
    "commit" : "28baec378041526f17a21e67d9758814eb8cf6be",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +63,67 @@\n\ndef _evaluate_standard(op, op_str, a, b, reversed=False):\n    \"\"\" standard evaluation \"\"\"\n    # `reversed` kwarg is included for compatibility with _evaluate_numexpr"
  },
  {
    "id" : "e748be6e-19fe-45b1-86b6-4166ad11c930",
    "prId" : 28650,
    "prUrl" : "https://github.com/pandas-dev/pandas/pull/28650#pullrequestreview-294568769",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e5d14561-d353-480e-86c2-27e2f917781b",
        "parentId" : null,
        "authorId" : "7086d5c0-382b-4c41-b70d-144a07643f71",
        "body" : "you can use is_bool_dtype(x) ?",
        "createdAt" : "2019-09-27T11:44:56Z",
        "updatedAt" : "2019-09-27T11:44:59Z",
        "lastEditedBy" : "7086d5c0-382b-4c41-b70d-144a07643f71",
        "tags" : [
        ]
      },
      {
        "id" : "e910bcdf-2ed4-40f5-9cd5-da7af40e9471",
        "parentId" : "e5d14561-d353-480e-86c2-27e2f917781b",
        "authorId" : "adf621f1-4745-479a-a1fc-dc14046a3f4b",
        "body" : "could, but thats non-performant, which is a big deal here",
        "createdAt" : "2019-09-27T14:43:15Z",
        "updatedAt" : "2019-09-27T14:43:15Z",
        "lastEditedBy" : "adf621f1-4745-479a-a1fc-dc14046a3f4b",
        "tags" : [
        ]
      },
      {
        "id" : "007720a5-c41d-4f47-9dd8-8bd2a8242ff9",
        "parentId" : "e5d14561-d353-480e-86c2-27e2f917781b",
        "authorId" : "7086d5c0-382b-4c41-b70d-144a07643f71",
        "body" : "k",
        "createdAt" : "2019-09-27T21:18:22Z",
        "updatedAt" : "2019-09-27T21:18:23Z",
        "lastEditedBy" : "7086d5c0-382b-4c41-b70d-144a07643f71",
        "tags" : [
        ]
      }
    ],
    "commit" : "8b468b2dd3ce92fb5411393cc9ad859917b34ed9",
    "line" : 64,
    "diffHunk" : "@@ -1,1 +162,166 @@        return \"bool\" in x.dtypes\n    try:\n        return x.dtype == bool\n    except AttributeError:\n        return isinstance(x, (bool, np.bool_))"
  },
  {
    "id" : "9aa379a7-63db-44d3-8560-a3d2355604bb",
    "prId" : 34374,
    "prUrl" : "https://github.com/pandas-dev/pandas/pull/34374#pullrequestreview-417909234",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4fd17037-f046-4264-9362-c3522d08b323",
        "parentId" : null,
        "authorId" : "c2e7df75-d1fb-42be-9205-186b46cef3d7",
        "body" : "Isnt this always true, so you can drop the if statement now?",
        "createdAt" : "2020-05-26T00:10:34Z",
        "updatedAt" : "2020-05-26T00:11:06Z",
        "lastEditedBy" : "c2e7df75-d1fb-42be-9205-186b46cef3d7",
        "tags" : [
        ]
      },
      {
        "id" : "6383411e-0c2b-498a-99bb-ff18720f5658",
        "parentId" : "4fd17037-f046-4264-9362-c3522d08b323",
        "authorId" : "adf621f1-4745-479a-a1fc-dc14046a3f4b",
        "body" : "it is not always true, some entries in _op_str_mapping give None",
        "createdAt" : "2020-05-26T00:30:25Z",
        "updatedAt" : "2020-05-26T00:30:26Z",
        "lastEditedBy" : "adf621f1-4745-479a-a1fc-dc14046a3f4b",
        "tags" : [
        ]
      }
    ],
    "commit" : "a68e701bb4d9ea26aa2fe41b788eadbbcdcfd715",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +225,229 @@    \"\"\"\n    op_str = _op_str_mapping[op]\n    if op_str is not None:\n        use_numexpr = use_numexpr and _bool_arith_check(op_str, a, b)\n        if use_numexpr:"
  },
  {
    "id" : "189824e2-b26c-44c7-8656-7baa75d124f7",
    "prId" : 36552,
    "prUrl" : "https://github.com/pandas-dev/pandas/pull/36552#pullrequestreview-494832867",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f018b61a-f753-460e-88a4-e830246102c4",
        "parentId" : null,
        "authorId" : "adf621f1-4745-479a-a1fc-dc14046a3f4b",
        "body" : "the relevant bug also affects rmod, floordiv, and rfloordiv",
        "createdAt" : "2020-09-22T20:24:37Z",
        "updatedAt" : "2020-09-30T17:59:19Z",
        "lastEditedBy" : "adf621f1-4745-479a-a1fc-dc14046a3f4b",
        "tags" : [
        ]
      },
      {
        "id" : "3701d85a-1a5a-405c-aa22-57f97d5ecfaa",
        "parentId" : "f018b61a-f753-460e-88a4-e830246102c4",
        "authorId" : "554ba0f6-6e6a-40c3-98e0-1a6cc4a8e1c6",
        "body" : "have you got an example of floordiv, and rfloordiv failing.\r\n\r\n```python\r\n>>> pd.__version__\r\n'1.1.2'\r\n>>>\r\n>>> from pandas.core.computation import expressions as expr\r\n>>>\r\n>>> expr.set_test_mode(True)\r\n>>>\r\n>>> s = pd.Series(np.arange(10001)) - 5000\r\n>>> print(expr.get_test_result())\r\n[True]\r\n>>> result = s % 24\r\n>>>\r\n>>> print(expr.get_test_result())\r\n[True]\r\n>>>\r\n>>> for i, elem in enumerate(s):\r\n...     assert elem % 24 == result[i]\r\n...\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 2, in <module>\r\nAssertionError\r\n>>>\r\n>>> s = pd.Series(np.arange(10001)) - 5000\r\n>>>\r\n>>> print(expr.get_test_result())\r\n[True]\r\n>>> result = s % -24\r\n>>> print(expr.get_test_result())\r\n[True]\r\n>>>\r\n>>> for i, elem in enumerate(s):\r\n...     assert elem % -24 == result[i]\r\n...\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 2, in <module>\r\nAssertionError\r\n>>>\r\n>>> s = pd.Series(np.arange(10001)) - 5000\r\n>>> print(expr.get_test_result())\r\n[True]\r\n>>> s[s == 0] = 1\r\n>>> print(expr.get_test_result())\r\n[True]\r\n>>> result = 24 % s\r\n>>>\r\n>>> print(expr.get_test_result())\r\n[True]\r\n>>>\r\n>>> for i, elem in enumerate(s):\r\n...     assert 24 % elem == result[i]\r\n...\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 2, in <module>\r\nAssertionError\r\n>>>\r\n>>>\r\n>>> s = pd.Series(np.arange(10001)) - 5000\r\n>>> print(expr.get_test_result())\r\n[True]\r\n>>>\r\n>>> s[s == 0] = 1\r\n>>> print(expr.get_test_result())\r\n[True]\r\n>>> result = -24 % s\r\n>>>\r\n>>> print(expr.get_test_result())\r\n[True]\r\n>>>\r\n>>> for i, elem in enumerate(s):\r\n...     assert -24 % elem == result[i]\r\n...\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 2, in <module>\r\nAssertionError\r\n>>>\r\n>>>\r\n>>> s = pd.Series(np.arange(10001)) - 5000\r\n>>> print(expr.get_test_result())\r\n[True]\r\n>>>\r\n>>> result = s // 24\r\n>>>\r\n>>> print(expr.get_test_result())\r\n[]\r\n>>>\r\n>>> for i, elem in enumerate(s):\r\n...     assert elem // 24 == result[i]\r\n...\r\n>>>\r\n>>> result = s // -24\r\n>>>\r\n>>> print(expr.get_test_result())\r\n[]\r\n>>>\r\n>>> for i, elem in enumerate(s):\r\n...     assert elem // -24 == result[i]\r\n...\r\n>>>\r\n>>> s = pd.Series(np.arange(10001)) - 5000\r\n>>> print(expr.get_test_result())\r\n[True]\r\n>>> s[s == 0] = 1\r\n>>> print(expr.get_test_result())\r\n[True]\r\n>>> result = 24 // s\r\n>>>\r\n>>> print(expr.get_test_result())\r\n[]\r\n>>>\r\n>>> for i, elem in enumerate(s):\r\n...     assert 24 // elem == result[i]\r\n...\r\n>>>\r\n>>> result = -24 // s\r\n>>>\r\n>>> print(expr.get_test_result())\r\n[]\r\n>>>\r\n>>> for i, elem in enumerate(s):\r\n...     assert -24 // elem == result[i]\r\n...\r\n>>>\r\n```\r\n\r\n> the relevant bug...\r\n\r\nI wasn't planning a bug fix, just a simple regression fix with revert of offending code. could open directly against 1.1.x?",
        "createdAt" : "2020-09-23T08:02:14Z",
        "updatedAt" : "2020-09-30T17:59:19Z",
        "lastEditedBy" : "554ba0f6-6e6a-40c3-98e0-1a6cc4a8e1c6",
        "tags" : [
        ]
      },
      {
        "id" : "0e287b32-8306-4726-a62b-e68f513bb872",
        "parentId" : "f018b61a-f753-460e-88a4-e830246102c4",
        "authorId" : "adf621f1-4745-479a-a1fc-dc14046a3f4b",
        "body" : "My bad, assumed it had the same behavior as cython without checking.",
        "createdAt" : "2020-09-23T16:06:02Z",
        "updatedAt" : "2020-09-30T17:59:19Z",
        "lastEditedBy" : "adf621f1-4745-479a-a1fc-dc14046a3f4b",
        "tags" : [
        ]
      },
      {
        "id" : "9dee9c19-1a88-458d-97dd-0b574ab3a520",
        "parentId" : "f018b61a-f753-460e-88a4-e830246102c4",
        "authorId" : "554ba0f6-6e6a-40c3-98e0-1a6cc4a8e1c6",
        "body" : "it may do. not checked. but from the output above, numexpr not being used for floordiv, rfloordiv.\r\n\r\nIs there special handling for that?",
        "createdAt" : "2020-09-23T16:09:05Z",
        "updatedAt" : "2020-09-30T17:59:19Z",
        "lastEditedBy" : "554ba0f6-6e6a-40c3-98e0-1a6cc4a8e1c6",
        "tags" : [
        ]
      },
      {
        "id" : "b52798b7-b17d-49bb-a562-3f48924d91c7",
        "parentId" : "f018b61a-f753-460e-88a4-e830246102c4",
        "authorId" : "adf621f1-4745-479a-a1fc-dc14046a3f4b",
        "body" : "In core.ops.array_ops.na_arithmetic_op we have a try/except for the numexpr call that catches TypeError.  Best guess is that floordiv _always_ gets caught here.",
        "createdAt" : "2020-09-23T16:20:03Z",
        "updatedAt" : "2020-09-30T17:59:19Z",
        "lastEditedBy" : "adf621f1-4745-479a-a1fc-dc14046a3f4b",
        "tags" : [
        ]
      }
    ],
    "commit" : "4f9b91d56ad4812fc15e134159e5714e939195aa",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +134,138 @@    operator.floordiv: \"//\",\n    roperator.rfloordiv: \"//\",\n    # we require Python semantics for mod of negative for backwards compatibility\n    # see https://github.com/pydata/numexpr/issues/365\n    # so sticking with unaccelerated for now"
  },
  {
    "id" : "b1bc529a-9d9e-4ca0-9d21-d6b2066aed77",
    "prId" : 40728,
    "prUrl" : "https://github.com/pandas-dev/pandas/pull/40728#pullrequestreview-626231426",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b3885d03-5906-4a53-8e54-42398cfe106d",
        "parentId" : null,
        "authorId" : "cc7022b2-2831-4c63-a4da-d18b0d342508",
        "body" : "Catching the error here, instead of higher op in `_na_arithmetic_op`, ensures that we try again with the plain standard `op` instead of directly try again with `_masked_arith_op`",
        "createdAt" : "2021-04-01T12:51:20Z",
        "updatedAt" : "2021-04-02T06:34:57Z",
        "lastEditedBy" : "cc7022b2-2831-4c63-a4da-d18b0d342508",
        "tags" : [
        ]
      }
    ],
    "commit" : "71c8b437f66a33c3cf389bb068bb237875c47ba2",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +111,115 @@                casting=\"safe\",\n            )\n        except TypeError:\n            # numexpr raises eg for array ** array with integers\n            # (https://github.com/pydata/numexpr/issues/379)"
  }
]