[
  {
    "id" : "f100d9e4-52d3-4cb6-8214-421ea28bb4f5",
    "prId" : 21235,
    "prUrl" : "https://github.com/pandas-dev/pandas/pull/21235#pullrequestreview-180550172",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ce6908b0-ff32-4eba-ae53-4ea2be16c8f6",
        "parentId" : null,
        "authorId" : "5e8c5ef2-940b-436e-9c5f-98ae5460128c",
        "body" : "Do you need the selection of ['vals'] here? Think it should get the same result without it no? If so you could make this expression the same as the one in the else block, but then move it out of the condition altogether",
        "createdAt" : "2018-11-30T15:14:45Z",
        "updatedAt" : "2018-12-12T07:07:59Z",
        "lastEditedBy" : "5e8c5ef2-940b-436e-9c5f-98ae5460128c",
        "tags" : [
        ]
      },
      {
        "id" : "37de5716-729e-4f30-acb8-3573cbe58942",
        "parentId" : "ce6908b0-ff32-4eba-ae53-4ea2be16c8f6",
        "authorId" : "49ae3d9e-14b6-4fd3-bb5a-1847cbe2ad19",
        "body" : "By selecting on ['vals'] here, it means the pct_change is called on the series, and since there is a separate method for pct_change for series vs. dataframe, it seems necessary in order to test each. By moving it out of the conditional we would end up only testing one of those two groupby methods.",
        "createdAt" : "2018-12-01T22:47:46Z",
        "updatedAt" : "2018-12-12T07:07:59Z",
        "lastEditedBy" : "49ae3d9e-14b6-4fd3-bb5a-1847cbe2ad19",
        "tags" : [
        ]
      },
      {
        "id" : "ffc579c1-28de-4995-abd1-e94c13b5a143",
        "parentId" : "ce6908b0-ff32-4eba-ae53-4ea2be16c8f6",
        "authorId" : "49ae3d9e-14b6-4fd3-bb5a-1847cbe2ad19",
        "body" : "I could still reduce the code count by doing something like this. Let me know if you think it's cleaner and I'll add it to my next commit (along with adding back a datetime index w.r.t the comment below)\r\n\r\n> ```python\r\n>   gb = df.groupby('key')\r\n>   gb_kwargs = dict(periods=periods, fill_method=fill_method, limit=limit,\r\n>      freq=freq)\r\n>    if test_series:\r\n>        result = gb['vals'].pct_change(**gb_kwargs)\r\n>        tm.assert_series_equal(result, expected)\r\n>    else:\r\n>        result = gb.pct_change(**gb_kwargs)\r\n>        tm.assert_frame_equal(result, expected.to_frame('vals'))\r\n",
        "createdAt" : "2018-12-01T23:23:33Z",
        "updatedAt" : "2018-12-12T07:07:59Z",
        "lastEditedBy" : "49ae3d9e-14b6-4fd3-bb5a-1847cbe2ad19",
        "tags" : [
        ]
      },
      {
        "id" : "b3129a0d-fb8f-4f2a-bf71-851644f6b41e",
        "parentId" : "ce6908b0-ff32-4eba-ae53-4ea2be16c8f6",
        "authorId" : "5e8c5ef2-940b-436e-9c5f-98ae5460128c",
        "body" : "Ignore my comment this is fine as is",
        "createdAt" : "2018-12-02T07:14:50Z",
        "updatedAt" : "2018-12-12T07:07:59Z",
        "lastEditedBy" : "5e8c5ef2-940b-436e-9c5f-98ae5460128c",
        "tags" : [
        ]
      }
    ],
    "commit" : "01d705fa246d792f9d0e52a614f9b68a0a7f6f3b",
    "line" : 47,
    "diffHunk" : "@@ -1,1 +789,793 @@\n    if test_series:\n        result = df.groupby('key')['vals'].pct_change(\n            periods=periods, fill_method=fill_method, limit=limit, freq=freq)\n        tm.assert_series_equal(result, expected)"
  },
  {
    "id" : "2dfcfb34-7985-4f0e-aa0e-ca372acacfb1",
    "prId" : 26134,
    "prUrl" : "https://github.com/pandas-dev/pandas/pull/26134#pullrequestreview-228410185",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "edfe4719-fc2a-42ef-83fc-310a9969af68",
        "parentId" : null,
        "authorId" : "5e8c5ef2-940b-436e-9c5f-98ae5460128c",
        "body" : "Why is this hard coded to 1?",
        "createdAt" : "2019-04-18T16:12:41Z",
        "updatedAt" : "2019-04-20T06:22:11Z",
        "lastEditedBy" : "5e8c5ef2-940b-436e-9c5f-98ae5460128c",
        "tags" : [
        ]
      },
      {
        "id" : "b3020c19-2595-4cf1-a0da-2f8223f6a1fc",
        "parentId" : "edfe4719-fc2a-42ef-83fc-310a9969af68",
        "authorId" : "c8f1077d-aaaa-4f3d-9551-a08361333db3",
        "body" : "because labels is already hard-coded to [0, 0, 0, 0], and that means there's one group",
        "createdAt" : "2019-04-18T17:24:46Z",
        "updatedAt" : "2019-04-20T06:22:11Z",
        "lastEditedBy" : "c8f1077d-aaaa-4f3d-9551-a08361333db3",
        "tags" : [
        ]
      }
    ],
    "commit" : "41befd18fa55af800275fdb9d59cf1055c785542",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +472,476 @@\n    labels = np.array([0, 0, 0, 0], dtype=np.int64)\n    ngroups = 1\n    pd_op(ans, data, labels, ngroups, is_datetimelike)\n"
  },
  {
    "id" : "5ac1e04b-ce0c-47e7-8e51-e81d2929a248",
    "prId" : 26162,
    "prUrl" : "https://github.com/pandas-dev/pandas/pull/26162#pullrequestreview-231476352",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2d4de71a-16f9-4f04-862d-c1f4f3a2d4aa",
        "parentId" : null,
        "authorId" : "7086d5c0-382b-4c41-b70d-144a07643f71",
        "body" : "can you add another example using 'key' as well here",
        "createdAt" : "2019-04-28T16:00:40Z",
        "updatedAt" : "2019-05-13T18:52:13Z",
        "lastEditedBy" : "7086d5c0-382b-4c41-b70d-144a07643f71",
        "tags" : [
        ]
      },
      {
        "id" : "7958d071-652a-466e-9257-d6e2a6db133f",
        "parentId" : "2d4de71a-16f9-4f04-862d-c1f4f3a2d4aa",
        "authorId" : "c8f1077d-aaaa-4f3d-9551-a08361333db3",
        "body" : "not sure what you're looking for here? `df_g` no longer has a column `'key'`, and this section of code is only used to compute `expected`, it's not what's being tested",
        "createdAt" : "2019-04-28T16:31:45Z",
        "updatedAt" : "2019-05-13T18:52:13Z",
        "lastEditedBy" : "c8f1077d-aaaa-4f3d-9551-a08361333db3",
        "tags" : [
        ]
      },
      {
        "id" : "1ef4ea4e-9e24-4f4a-b4df-8b35a4228a4a",
        "parentId" : "2d4de71a-16f9-4f04-862d-c1f4f3a2d4aa",
        "authorId" : "7086d5c0-382b-4c41-b70d-144a07643f71",
        "body" : "why did u have to change it?is the expected difference for these cases?",
        "createdAt" : "2019-04-28T16:34:05Z",
        "updatedAt" : "2019-05-13T18:52:13Z",
        "lastEditedBy" : "7086d5c0-382b-4c41-b70d-144a07643f71",
        "tags" : [
        ]
      },
      {
        "id" : "ebf8003f-a06b-45b4-bd1a-aa36e22fcf42",
        "parentId" : "2d4de71a-16f9-4f04-862d-c1f4f3a2d4aa",
        "authorId" : "c8f1077d-aaaa-4f3d-9551-a08361333db3",
        "body" : "The old test called something like `df.groupy('key').ffill().groupby('key').shift()`, which is no longer valid, as the first groupby won't return the `'key'` column. The expected is still the same, just needs to be written differently.",
        "createdAt" : "2019-04-28T16:37:04Z",
        "updatedAt" : "2019-05-13T18:52:13Z",
        "lastEditedBy" : "c8f1077d-aaaa-4f3d-9551-a08361333db3",
        "tags" : [
        ]
      }
    ],
    "commit" : "01057a436e3d547dab105f8e508cdcc004ac2292",
    "line" : 23,
    "diffHunk" : "@@ -1,1 +790,794 @@\n    df_g = getattr(df.groupby('key'), fill_method)(limit=limit)\n    grp = df_g.groupby(df.key)\n\n    expected = grp['vals'].obj / grp['vals'].shift(periods) - 1"
  }
]