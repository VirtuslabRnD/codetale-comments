[
  {
    "id" : "f100d9e4-52d3-4cb6-8214-421ea28bb4f5",
    "prId" : 21235,
    "prUrl" : "https://github.com/pandas-dev/pandas/pull/21235#pullrequestreview-180550172",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ce6908b0-ff32-4eba-ae53-4ea2be16c8f6",
        "parentId" : null,
        "authorId" : "5e8c5ef2-940b-436e-9c5f-98ae5460128c",
        "body" : "Do you need the selection of ['vals'] here? Think it should get the same result without it no? If so you could make this expression the same as the one in the else block, but then move it out of the condition altogether",
        "createdAt" : "2018-11-30T15:14:45Z",
        "updatedAt" : "2018-12-12T07:07:59Z",
        "lastEditedBy" : "5e8c5ef2-940b-436e-9c5f-98ae5460128c",
        "tags" : [
        ]
      },
      {
        "id" : "37de5716-729e-4f30-acb8-3573cbe58942",
        "parentId" : "ce6908b0-ff32-4eba-ae53-4ea2be16c8f6",
        "authorId" : "49ae3d9e-14b6-4fd3-bb5a-1847cbe2ad19",
        "body" : "By selecting on ['vals'] here, it means the pct_change is called on the series, and since there is a separate method for pct_change for series vs. dataframe, it seems necessary in order to test each. By moving it out of the conditional we would end up only testing one of those two groupby methods.",
        "createdAt" : "2018-12-01T22:47:46Z",
        "updatedAt" : "2018-12-12T07:07:59Z",
        "lastEditedBy" : "49ae3d9e-14b6-4fd3-bb5a-1847cbe2ad19",
        "tags" : [
        ]
      },
      {
        "id" : "ffc579c1-28de-4995-abd1-e94c13b5a143",
        "parentId" : "ce6908b0-ff32-4eba-ae53-4ea2be16c8f6",
        "authorId" : "49ae3d9e-14b6-4fd3-bb5a-1847cbe2ad19",
        "body" : "I could still reduce the code count by doing something like this. Let me know if you think it's cleaner and I'll add it to my next commit (along with adding back a datetime index w.r.t the comment below)\r\n\r\n> ```python\r\n>   gb = df.groupby('key')\r\n>   gb_kwargs = dict(periods=periods, fill_method=fill_method, limit=limit,\r\n>      freq=freq)\r\n>    if test_series:\r\n>        result = gb['vals'].pct_change(**gb_kwargs)\r\n>        tm.assert_series_equal(result, expected)\r\n>    else:\r\n>        result = gb.pct_change(**gb_kwargs)\r\n>        tm.assert_frame_equal(result, expected.to_frame('vals'))\r\n",
        "createdAt" : "2018-12-01T23:23:33Z",
        "updatedAt" : "2018-12-12T07:07:59Z",
        "lastEditedBy" : "49ae3d9e-14b6-4fd3-bb5a-1847cbe2ad19",
        "tags" : [
        ]
      },
      {
        "id" : "b3129a0d-fb8f-4f2a-bf71-851644f6b41e",
        "parentId" : "ce6908b0-ff32-4eba-ae53-4ea2be16c8f6",
        "authorId" : "5e8c5ef2-940b-436e-9c5f-98ae5460128c",
        "body" : "Ignore my comment this is fine as is",
        "createdAt" : "2018-12-02T07:14:50Z",
        "updatedAt" : "2018-12-12T07:07:59Z",
        "lastEditedBy" : "5e8c5ef2-940b-436e-9c5f-98ae5460128c",
        "tags" : [
        ]
      }
    ],
    "commit" : "01d705fa246d792f9d0e52a614f9b68a0a7f6f3b",
    "line" : 47,
    "diffHunk" : "@@ -1,1 +789,793 @@\n    if test_series:\n        result = df.groupby('key')['vals'].pct_change(\n            periods=periods, fill_method=fill_method, limit=limit, freq=freq)\n        tm.assert_series_equal(result, expected)"
  }
]