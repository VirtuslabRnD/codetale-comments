[
  {
    "id" : "1c374176-e172-423c-9515-90a4446e7604",
    "prId" : 42154,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/42154#pullrequestreview-465370800",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cf5e747e-dc74-4bfb-819d-1a8e239cc168",
        "parentId" : null,
        "authorId" : "9f15379f-126a-430d-93cb-7cc21488adf2",
        "body" : "Can you rewrite this using testable docstrings please?\r\n\r\nhttps://www.tensorflow.org/community/contribute/docs_ref#testable_docstrings",
        "createdAt" : "2020-08-10T15:54:44Z",
        "updatedAt" : "2020-09-03T12:48:25Z",
        "lastEditedBy" : "9f15379f-126a-430d-93cb-7cc21488adf2",
        "tags" : [
        ]
      },
      {
        "id" : "79b2bf17-4b7f-473b-8eef-714e3565911b",
        "parentId" : "cf5e747e-dc74-4bfb-819d-1a8e239cc168",
        "authorId" : "6101b631-b6a1-4865-b1ee-7db992429ad2",
        "body" : "given that this is not a python file, I wasn't sure whether python syntax would be appropriate here, so I kept it in the old format. In an old PR for the same issue, you've linked https://github.com/tensorflow/tensorflow/commit/8582a583d45fdf6a895c0677c7f68b4bf3596ee9 as an example for adding python docstrings. Unfortunately, I'm not familiar enough about how the python API is constructed in the end to make sure to do this correctly. \r\nFor example, where is the `@dispatch.add_dispatch_support` support in the linked commit coming from?",
        "createdAt" : "2020-08-11T18:26:24Z",
        "updatedAt" : "2020-09-03T12:48:25Z",
        "lastEditedBy" : "6101b631-b6a1-4865-b1ee-7db992429ad2",
        "tags" : [
        ]
      },
      {
        "id" : "45542627-23eb-47bc-988d-ca33d6da3093",
        "parentId" : "cf5e747e-dc74-4bfb-819d-1a8e239cc168",
        "authorId" : "9f15379f-126a-430d-93cb-7cc21488adf2",
        "body" : "https://github.com/tensorflow/tensorflow/blob/v2.3.0/tensorflow/python/ops/array_ops.py#L2449-L2587 is the python docstring for the op. You should not need to do the same as 8582a58 since we already have the python binding",
        "createdAt" : "2020-08-11T18:32:16Z",
        "updatedAt" : "2020-09-03T12:48:25Z",
        "lastEditedBy" : "9f15379f-126a-430d-93cb-7cc21488adf2",
        "tags" : [
        ]
      },
      {
        "id" : "16525d8e-7fbe-4256-859e-700e596228f5",
        "parentId" : "cf5e747e-dc74-4bfb-819d-1a8e239cc168",
        "authorId" : "6101b631-b6a1-4865-b1ee-7db992429ad2",
        "body" : "I think you are confusing exactly the two methods I mention in this pull request. The method you refer to is `matrix_diag_part`, whereas the method I'm working with here is `tensor_diag_part`. These methods differ when tensors of `rank > 2` are concerned. In fact, the very first example of the method you linked shows a tensor of shape `(2, 3, 4)`, which would not be a valid input for `tensor_diag_part`, which requires its input to be \"Rank k tensor where k is even and not zero.\"",
        "createdAt" : "2020-08-11T18:46:21Z",
        "updatedAt" : "2020-09-03T12:48:25Z",
        "lastEditedBy" : "6101b631-b6a1-4865-b1ee-7db992429ad2",
        "tags" : [
        ]
      },
      {
        "id" : "6525a943-afe1-45ca-94d9-69eaf58d6c46",
        "parentId" : "cf5e747e-dc74-4bfb-819d-1a8e239cc168",
        "authorId" : "9f15379f-126a-430d-93cb-7cc21488adf2",
        "body" : "You're right, my bad. You should then expose a Python entry-point like in `8582a58`. Copy the implementation from `matrix_diag_part`, just replacing `matrix` parts with `tensor` ones.\r\n\r\nThe decorator comes from an import, see https://github.com/tensorflow/tensorflow/blob/b36436b087bd8e8701ef51718179037cccdfc26e/tensorflow/python/ops/array_ops.py#L44",
        "createdAt" : "2020-08-11T19:37:08Z",
        "updatedAt" : "2020-09-03T12:48:25Z",
        "lastEditedBy" : "9f15379f-126a-430d-93cb-7cc21488adf2",
        "tags" : [
        ]
      }
    ],
    "commit" : "ad03356a33042c078421a42eded013a7092234b2",
    "line" : 25,
    "diffHunk" : "@@ -1,1 +38,42 @@                          [1211, 1222]],\n                         [[2111, 2122],\n                          [2211, 2222]]]\n```\nEND"
  }
]