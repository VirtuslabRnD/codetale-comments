[
  {
    "id" : "05b76b27-7350-44ff-9fee-06991178d658",
    "prId" : 44786,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/44786#pullrequestreview-550855832",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b40040b4-8662-46f8-a4cd-d80ceda2e6bf",
        "parentId" : null,
        "authorId" : "514a710d-ba0b-45cd-b36d-8f8c6b24d57f",
        "body" : "Thanks for catching this! But I believe this should be \r\n\r\noptions.compression_type != compression::kNone",
        "createdAt" : "2020-12-12T17:51:12Z",
        "updatedAt" : "2020-12-12T17:51:26Z",
        "lastEditedBy" : "514a710d-ba0b-45cd-b36d-8f8c6b24d57f",
        "tags" : [
        ]
      },
      {
        "id" : "2f52026f-66f6-4aa4-8c2f-50ce06afc710",
        "parentId" : "b40040b4-8662-46f8-a4cd-d80ceda2e6bf",
        "authorId" : "3faf377a-e40c-42c5-b176-82884f436e04",
        "body" : "Hi Rohan,\r\nI admit haven't actually compiled this as it takes a long time, and this is dead code as far as I can tell.\r\n\r\nI disagree with your suggestion for two reasons.\r\n\r\n1. Usage in the same file suggests otherwise.\r\n2. The types between `options.compression_type != compression::kNone` don't seem right. \r\n\r\nFor 1), I took the usage from above e.g., [isZlibCompressed](https://github.com/tensorflow/tensorflow/blob/f97c97206ad2005e856b05e835c17f6ace570802/tensorflow/core/lib/io/record_writer.cc#L27).\r\n\r\n```python3\r\nbool IsZlibCompressed(const RecordWriterOptions& options) {\r\n  return options.compression_type == RecordWriterOptions::ZLIB_COMPRESSION;\r\n}\r\n```\r\n\r\nIn regards to 2), `options.compression_type` is enum, and thus some integral type. Yet, `compression:kNone` [is type const char[]](https://github.com/tensorflow/tensorflow/blob/f97c97206ad2005e856b05e835c17f6ace570802/tensorflow/core/lib/io/compression.h). The types I have in the PR are both of enum type. My understanding of the code is `compression` is turned from char* into a enum in `RecordWriterOptions::CreateRecordWriterOptions`, which is then used internally for RecordWriterOptions.",
        "createdAt" : "2020-12-12T19:28:06Z",
        "updatedAt" : "2020-12-14T18:46:27Z",
        "lastEditedBy" : "3faf377a-e40c-42c5-b176-82884f436e04",
        "tags" : [
        ]
      }
    ],
    "commit" : "f97c97206ad2005e856b05e835c17f6ace570802",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +62,66 @@    : dest_(dest), options_(options) {\n#if defined(IS_SLIM_BUILD)\n  if (options.compression_type != RecordWriterOptions::NONE) {\n    LOG(FATAL) << \"Compression is unsupported on mobile platforms.\";\n  }"
  }
]