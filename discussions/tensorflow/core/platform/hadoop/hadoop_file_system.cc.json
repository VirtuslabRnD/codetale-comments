[
  {
    "id" : "b4b16c3c-f23e-42b4-bf9c-00a55dcb11fa",
    "prId" : 25368,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/25368#pullrequestreview-198934874",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6eb04175-4303-4666-9291-6afe2af02489",
        "parentId" : null,
        "authorId" : "784e2bdb-22d6-4dea-bf2c-308dd99be260",
        "body" : "Is there a reason for the -2 offset?",
        "createdAt" : "2019-02-01T01:25:00Z",
        "updatedAt" : "2019-02-01T05:51:50Z",
        "lastEditedBy" : "784e2bdb-22d6-4dea-bf2c-308dd99be260",
        "tags" : [
        ]
      },
      {
        "id" : "e53ab6a7-ebfc-43ed-b894-5654f251047e",
        "parentId" : "6eb04175-4303-4666-9291-6afe2af02489",
        "authorId" : "9450ac72-4f94-4cf5-9dd5-6d697ca576aa",
        "body" : "The JVM will throw an OutOfMemoryError when exceed INT_MAX-2, like this:\r\n\r\nhdfsPread: NewByteArray error:\r\nOutOfMemoryError: Requested array size exceeds VM limitjava.lang.OutOfMemoryError: Requested array size exceeds VM limit",
        "createdAt" : "2019-02-01T02:31:15Z",
        "updatedAt" : "2019-02-01T05:51:50Z",
        "lastEditedBy" : "9450ac72-4f94-4cf5-9dd5-6d697ca576aa",
        "tags" : [
        ]
      },
      {
        "id" : "4378bf77-07e1-45d2-9263-861a43936cb0",
        "parentId" : "6eb04175-4303-4666-9291-6afe2af02489",
        "authorId" : "784e2bdb-22d6-4dea-bf2c-308dd99be260",
        "body" : "Can you add a comment mentioning the reason?",
        "createdAt" : "2019-02-01T02:50:54Z",
        "updatedAt" : "2019-02-01T05:51:50Z",
        "lastEditedBy" : "784e2bdb-22d6-4dea-bf2c-308dd99be260",
        "tags" : [
        ]
      },
      {
        "id" : "838c188a-1d9e-4de9-a694-614f5fe5bc21",
        "parentId" : "6eb04175-4303-4666-9291-6afe2af02489",
        "authorId" : "9450ac72-4f94-4cf5-9dd5-6d697ca576aa",
        "body" : "Comment is added",
        "createdAt" : "2019-02-01T05:57:18Z",
        "updatedAt" : "2019-02-01T05:57:18Z",
        "lastEditedBy" : "9450ac72-4f94-4cf5-9dd5-6d697ca576aa",
        "tags" : [
        ]
      }
    ],
    "commit" : "eb32155adfa674a81b010e3c1874a4b51a14f1a5",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +212,216 @@      //Max read length is INT_MAX-2, for hdfsPread function take a parameter of int32. \n      //-2 offset can avoid JVM OutOfMemoryError. \n      size_t read_n = std::min(n,static_cast<size_t>(std::numeric_limits<int>::max()-2));\n      tSize r = hdfs_->hdfsPread(fs_, file_, static_cast<tOffset>(offset), dst,\n                                 static_cast<tSize>(read_n));"
  }
]