[
  {
    "id" : "fc3083e7-0386-4b99-a822-738fbdd80205",
    "prId" : 19136,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/19136#pullrequestreview-121981981",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "14413cf6-1ba7-44b7-91ca-9f0d1e9a8800",
        "parentId" : null,
        "authorId" : "0ba8fb18-637a-4ab3-a7c8-cd971823fe45",
        "body" : "Please get rid of anything manipulating the environment.",
        "createdAt" : "2018-05-18T00:17:04Z",
        "updatedAt" : "2018-05-21T16:53:34Z",
        "lastEditedBy" : "0ba8fb18-637a-4ab3-a7c8-cd971823fe45",
        "tags" : [
        ]
      },
      {
        "id" : "9b701f3c-bb66-4ef2-b61c-d17c091e2710",
        "parentId" : "14413cf6-1ba7-44b7-91ca-9f0d1e9a8800",
        "authorId" : "6699b080-3d91-4335-aff4-60d8e8393b11",
        "body" : "There are other places in Tensorflow unit tests where unsetenv is being used to ensure we are checking the default paths (https://github.com/tensorflow/tensorflow/blob/a3d90a967e3c1c8d93928ca6620bbfa2fc8ce3a1/tensorflow/core/platform/cloud/google_auth_provider_test.cc#L71).\r\n\r\nDo you have an alternative that I could look into?",
        "createdAt" : "2018-05-18T17:08:06Z",
        "updatedAt" : "2018-05-21T16:53:34Z",
        "lastEditedBy" : "6699b080-3d91-4335-aff4-60d8e8393b11",
        "tags" : [
        ]
      },
      {
        "id" : "7bb58fba-1932-4005-a1f7-6a09473e0de5",
        "parentId" : "14413cf6-1ba7-44b7-91ca-9f0d1e9a8800",
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "I can't find any thread-safe versions of these APIs. Maybe we can put locks around the calls since these are just tests?",
        "createdAt" : "2018-05-21T21:25:49Z",
        "updatedAt" : "2018-05-21T21:25:50Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      },
      {
        "id" : "e4a0fc10-bae8-4ac5-a8d1-d01cf065a75d",
        "parentId" : "14413cf6-1ba7-44b7-91ca-9f0d1e9a8800",
        "authorId" : "0ba8fb18-637a-4ab3-a7c8-cd971823fe45",
        "body" : "I think it is OK in unit tests.",
        "createdAt" : "2018-05-21T23:46:30Z",
        "updatedAt" : "2018-05-21T23:46:37Z",
        "lastEditedBy" : "0ba8fb18-637a-4ab3-a7c8-cd971823fe45",
        "tags" : [
        ]
      }
    ],
    "commit" : "a7f096a05f36d34462df77ed467577254f594ab1",
    "line" : 31,
    "diffHunk" : "@@ -1,1 +29,33 @@TEST(MKLThreadPoolDeviceTest, TestOmpDefaults) {\n  SessionOptions options;\n  unsetenv(\"OMP_NUM_THREADS\");\n\n  ThreadPoolDevice* tp = new ThreadPoolDevice("
  }
]