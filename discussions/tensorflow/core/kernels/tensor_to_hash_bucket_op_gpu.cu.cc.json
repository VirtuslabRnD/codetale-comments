[
  {
    "id" : "519756d1-0ee7-4d6b-9ee5-d34ae54349c8",
    "prId" : 47936,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/47936#pullrequestreview-621437025",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b60e386e-f8ac-4fc6-bb54-dd808179620f",
        "parentId" : null,
        "authorId" : "2861a495-42d5-4ac3-b543-23cf14c0a980",
        "body" : "This is borderline nitpicky, but can't we populate `buf` in this loop itself and then `std::reverse` it?",
        "createdAt" : "2021-03-25T05:47:01Z",
        "updatedAt" : "2021-03-29T21:43:09Z",
        "lastEditedBy" : "2861a495-42d5-4ac3-b543-23cf14c0a980",
        "tags" : [
        ]
      },
      {
        "id" : "992d680b-e9d9-4af7-a5d4-ce0c7ff8259b",
        "parentId" : "b60e386e-f8ac-4fc6-bb54-dd808179620f",
        "authorId" : "8df6b2a7-a5b8-4771-8241-49fd7ff5a2aa",
        "body" : "I think we cannot use `std::reverse` in the device function, right?",
        "createdAt" : "2021-03-25T17:08:13Z",
        "updatedAt" : "2021-03-29T21:43:09Z",
        "lastEditedBy" : "8df6b2a7-a5b8-4771-8241-49fd7ff5a2aa",
        "tags" : [
        ]
      },
      {
        "id" : "fd55ab1e-4edd-4537-a864-f7f6677d9c04",
        "parentId" : "b60e386e-f8ac-4fc6-bb54-dd808179620f",
        "authorId" : "2861a495-42d5-4ac3-b543-23cf14c0a980",
        "body" : "Can you check?  It should compile down to a loop, so I don't immediately see why we can't use it.",
        "createdAt" : "2021-03-25T17:09:37Z",
        "updatedAt" : "2021-03-29T21:43:09Z",
        "lastEditedBy" : "2861a495-42d5-4ac3-b543-23cf14c0a980",
        "tags" : [
        ]
      },
      {
        "id" : "d83293a8-ff82-4def-b685-41721a1ee579",
        "parentId" : "b60e386e-f8ac-4fc6-bb54-dd808179620f",
        "authorId" : "8df6b2a7-a5b8-4771-8241-49fd7ff5a2aa",
        "body" : "Do you mean call the host side function `std::reverse` in the device function? It couldn't build can gave \r\n```\r\nerror: calling a __host__ function(\"std::reverse<char *> \") from a __device__ function(\"tensorflow::_NV_ANON_NAMESPACE::IntegerToString<short> \") is not allowed\r\n````",
        "createdAt" : "2021-03-25T17:52:52Z",
        "updatedAt" : "2021-03-29T21:43:09Z",
        "lastEditedBy" : "8df6b2a7-a5b8-4771-8241-49fd7ff5a2aa",
        "tags" : [
        ]
      },
      {
        "id" : "5f99c0ff-79b8-4ff9-bef8-29b809aa7b4b",
        "parentId" : "b60e386e-f8ac-4fc6-bb54-dd808179620f",
        "authorId" : "8df6b2a7-a5b8-4771-8241-49fd7ff5a2aa",
        "body" : "But let me try to merge the two loops.",
        "createdAt" : "2021-03-25T17:54:45Z",
        "updatedAt" : "2021-03-29T21:43:09Z",
        "lastEditedBy" : "8df6b2a7-a5b8-4771-8241-49fd7ff5a2aa",
        "tags" : [
        ]
      },
      {
        "id" : "41560c13-d1fd-42f1-adc3-10ce47f3c52a",
        "parentId" : "b60e386e-f8ac-4fc6-bb54-dd808179620f",
        "authorId" : "8df6b2a7-a5b8-4771-8241-49fd7ff5a2aa",
        "body" : "I feel we still need to use two loops for this. Considering filling the digits is naturally from the backward direction, we can (1) compute the num_digits and then fill the digits backward (as the current code) or (2) fill it forward and reverse it later which still needs two loops.",
        "createdAt" : "2021-03-25T18:10:33Z",
        "updatedAt" : "2021-03-29T21:43:09Z",
        "lastEditedBy" : "8df6b2a7-a5b8-4771-8241-49fd7ff5a2aa",
        "tags" : [
        ]
      }
    ],
    "commit" : "fadf828b85c31a2338fb57ef4886d55583375728",
    "line" : 55,
    "diffHunk" : "@@ -1,1 +53,57 @@    val_a = val_a / 10;\n    num_digits++;\n  } while(val_a != 0);\n\n  int i = 0;"
  }
]