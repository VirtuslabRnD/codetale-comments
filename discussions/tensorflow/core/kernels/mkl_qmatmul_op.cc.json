[
  {
    "id" : "f89d0bde-f046-420b-8c6c-d14e9046557b",
    "prId" : 37031,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/37031#pullrequestreview-363811256",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5bd28cdf-c0de-47d4-b011-33b31c529aca",
        "parentId" : null,
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Please wrap brackets around these.",
        "createdAt" : "2020-02-25T01:11:53Z",
        "updatedAt" : "2020-02-25T01:31:06Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      }
    ],
    "commit" : "063a69dc85ce226ad37c89dd93f6fddb408c7813",
    "line" : 58,
    "diffHunk" : "@@ -1,1 +377,381 @@      } else {\n        // @TODO:keeping the default qint8 as before. Change to error later.\n        scale = scale_int32 / scale_eightbit / static_cast<float>(1u << 24);\n      }\n      std::vector<float> output_scale;"
  },
  {
    "id" : "d02cba6a-fd13-455e-a6a6-147daab2acd7",
    "prId" : 32834,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/32834#pullrequestreview-294597852",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ea617686-1bed-4874-a104-0cada5c515a7",
        "parentId" : null,
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "`weight_data` is still `nullptr` at this point. Shouldn't `CacheWeight` be called after the conversion (line 277) is done?",
        "createdAt" : "2019-09-27T21:43:17Z",
        "updatedAt" : "2019-10-08T01:40:53Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      },
      {
        "id" : "8ea048e4-e10b-48e2-8ef0-90296372982d",
        "parentId" : "ea617686-1bed-4874-a104-0cada5c515a7",
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Please ignore this comment. I had written it before I read `CacheWeight` and I forgot to delete it.",
        "createdAt" : "2019-09-27T23:05:36Z",
        "updatedAt" : "2019-10-08T01:40:53Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      }
    ],
    "commit" : "b7829fedad2898fc9c8d8e543d395e3c3182ff39",
    "line" : 128,
    "diffHunk" : "@@ -1,1 +263,267 @@          if (IsWeightCacheEmpty(context)) {\n            // Cache weight if it is not cached.\n            CacheWeight(context, matmul_fwd_pd, weight_data, weight_tensor,\n                        weight, weight_md);\n          }"
  },
  {
    "id" : "a6ad9180-566b-4f26-93ff-f71f44d1ce10",
    "prId" : 32834,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/32834#pullrequestreview-298426890",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7c4c1319-6909-4c84-83d1-ac665922400b",
        "parentId" : null,
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Can the weight format change if the weight is constant? I'm not sure we need to check this.",
        "createdAt" : "2019-09-27T22:19:01Z",
        "updatedAt" : "2019-10-08T01:40:53Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      },
      {
        "id" : "109df802-23ea-49cb-9372-aaaa8fd705e5",
        "parentId" : "7c4c1319-6909-4c84-83d1-ac665922400b",
        "authorId" : "eb4862bd-cc28-47d5-82b9-a722d6c02185",
        "body" : "Yes, MKL-DNN expects different format if the batch size changes. For the same weight the expected format is IO for higher BS and OI for BS=1. Hope this makes sense.",
        "createdAt" : "2019-10-07T04:26:00Z",
        "updatedAt" : "2019-10-08T01:40:53Z",
        "lastEditedBy" : "eb4862bd-cc28-47d5-82b9-a722d6c02185",
        "tags" : [
        ]
      },
      {
        "id" : "72374b3f-6ea5-49ef-b800-ef754b4100c4",
        "parentId" : "7c4c1319-6909-4c84-83d1-ac665922400b",
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Got it. Thank you for the clarification!",
        "createdAt" : "2019-10-07T21:38:35Z",
        "updatedAt" : "2019-10-08T01:40:53Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      }
    ],
    "commit" : "b7829fedad2898fc9c8d8e543d395e3c3182ff39",
    "line" : 247,
    "diffHunk" : "@@ -1,1 +535,539 @@\n    // Check if the  memory descriptor of the cached weight is same as\n    // weight_mf. If so use the cached memory, else return NULL\n    if ((weight_md_t.scalar<int32>().size() > 0) &&\n        weight_md_t.scalar<int32>()() == weight_mf) {"
  },
  {
    "id" : "a815637a-964c-47b3-a0c4-8d0383c8263e",
    "prId" : 26909,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/26909#pullrequestreview-221100434",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a85fcd65-6dab-41a5-900c-2daed2a0b860",
        "parentId" : null,
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "```suggestion\r\n  // Primitive reuses context for inner-product fwd op\r\n```",
        "createdAt" : "2019-04-01T16:59:16Z",
        "updatedAt" : "2019-05-29T21:38:19Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      }
    ],
    "commit" : "e46c09bfa6252f687e2cb68cffdbac6fdc34735a",
    "line" : 191,
    "diffHunk" : "@@ -1,1 +189,193 @@\n private:\n  // Primitive reuse context for inner-product Fwd op\n  struct MklDnnMatMulFwdContext {\n    // Expected memory format for this primitive instance"
  },
  {
    "id" : "9e1db1a5-06c9-4174-bb0a-ba9c0f195e9a",
    "prId" : 26909,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/26909#pullrequestreview-238194990",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0e760bd1-fffa-4e7a-979e-a26c75d5a37c",
        "parentId" : null,
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Please remove the extra blank line.",
        "createdAt" : "2019-04-01T17:08:16Z",
        "updatedAt" : "2019-05-29T21:38:19Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      },
      {
        "id" : "a868e301-af1b-48cd-8f1e-ffb17260ba5d",
        "parentId" : "0e760bd1-fffa-4e7a-979e-a26c75d5a37c",
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "This hasn't been addressed yet.",
        "createdAt" : "2019-05-16T06:36:31Z",
        "updatedAt" : "2019-05-29T21:38:19Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      }
    ],
    "commit" : "e46c09bfa6252f687e2cb68cffdbac6fdc34735a",
    "line" : 307,
    "diffHunk" : "@@ -1,1 +305,309 @@                                        cpu_engine_},\n                                       DummyData));\n\n    // Create inner-product primitive\n    context_.matmul_fwd.reset(new inner_product_forward("
  },
  {
    "id" : "8f985c28-49f0-450b-9001-c123a95c3f79",
    "prId" : 26909,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/26909#pullrequestreview-239770048",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e772187d-85df-4b8d-a635-805f4e22e80f",
        "parentId" : null,
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "What is type `T` for? Please add an explanation for it as a comment in the code.",
        "createdAt" : "2019-04-01T17:10:01Z",
        "updatedAt" : "2019-05-29T21:38:19Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      },
      {
        "id" : "aec7bf32-1e52-47a7-a879-d463c46d1947",
        "parentId" : "e772187d-85df-4b8d-a635-805f4e22e80f",
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "This hasn't been addressed yet.",
        "createdAt" : "2019-05-16T06:34:58Z",
        "updatedAt" : "2019-05-29T21:38:19Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      },
      {
        "id" : "5162844b-0dcc-4223-9084-d4e96cab71bd",
        "parentId" : "e772187d-85df-4b8d-a635-805f4e22e80f",
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Thank you for the thorough explanation!",
        "createdAt" : "2019-05-23T18:04:55Z",
        "updatedAt" : "2019-05-29T21:38:19Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      }
    ],
    "commit" : "e46c09bfa6252f687e2cb68cffdbac6fdc34735a",
    "line" : 144,
    "diffHunk" : "@@ -1,1 +142,146 @@// In future, with the removal of \"T\" from MklPrimitiveFactory, this class\n// needs to drop \"T\".\ntemplate <typename T, typename Tinput, typename Tweight, typename Tbias,\n          typename Toutput>\nclass MklDnnMatMulFwdPrimitive : public MklPrimitive {"
  },
  {
    "id" : "d1dc9d75-ee28-4357-9d0f-df0b34c38d4f",
    "prId" : 26909,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/26909#pullrequestreview-241865879",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "13ea1ef2-1b65-46b6-a926-2ac06c255953",
        "parentId" : null,
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Wouldn't this be negative if Af32 is negative?",
        "createdAt" : "2019-05-21T00:07:13Z",
        "updatedAt" : "2019-05-29T21:38:19Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      },
      {
        "id" : "56dc21fe-5e16-43c3-9c29-8bc5e4d94f6e",
        "parentId" : "13ea1ef2-1b65-46b6-a926-2ac06c255953",
        "authorId" : "2f37d57c-3887-4235-87c2-9c3d11e0c22b",
        "body" : "@penpornk SCALE mode is selected only for non-negative Af32. I have Put more comments on this. Thanks for the comment.",
        "createdAt" : "2019-05-24T00:08:17Z",
        "updatedAt" : "2019-05-29T21:38:19Z",
        "lastEditedBy" : "2f37d57c-3887-4235-87c2-9c3d11e0c22b",
        "tags" : [
        ]
      },
      {
        "id" : "36fb90ae-df3d-4a6a-af43-21c1e7495080",
        "parentId" : "13ea1ef2-1b65-46b6-a926-2ac06c255953",
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Thank you for the clarification!",
        "createdAt" : "2019-05-24T17:39:43Z",
        "updatedAt" : "2019-05-29T21:38:19Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      }
    ],
    "commit" : "e46c09bfa6252f687e2cb68cffdbac6fdc34735a",
    "line" : 38,
    "diffHunk" : "@@ -1,1 +36,40 @@// calculated as below:\n//    Qa = 255.0 / Max(A𝑓32)\n//    Au8 = round(Qa * A𝑓32).\n// With MIN_FIRST quantization, Q'a and A'u8 can be calculated as below:\n//    Q'a = 255.0 / (Max(A𝑓32) – Min(A𝑓32))"
  },
  {
    "id" : "67387756-d726-4591-8c6e-f0580c565932",
    "prId" : 26909,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/26909#pullrequestreview-241865879",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "858520ee-6f67-4512-8fea-27a3f42b80ed",
        "parentId" : null,
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Please add a newline before this line.",
        "createdAt" : "2019-05-24T18:12:30Z",
        "updatedAt" : "2019-05-29T21:38:19Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      }
    ],
    "commit" : "e46c09bfa6252f687e2cb68cffdbac6fdc34735a",
    "line" : 138,
    "diffHunk" : "@@ -1,1 +136,140 @@};\n\n// With quantization, input, weight, bias, and output can have different types.\n// So we use different template parameters for each type.\n// TODO(intel-tf): The template type \"T\" is currently used to match the"
  },
  {
    "id" : "9bafa507-7289-4efc-93b5-bc55152b77f2",
    "prId" : 26909,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/26909#pullrequestreview-241865879",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3439a878-f360-4994-8c66-43bac1b84089",
        "parentId" : null,
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Please add a comment for this group of variables, i.e., forward stream primitives. Or merge it with the previous group (remove the empty line above).",
        "createdAt" : "2019-05-24T18:16:55Z",
        "updatedAt" : "2019-05-29T21:38:19Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      }
    ],
    "commit" : "e46c09bfa6252f687e2cb68cffdbac6fdc34735a",
    "line" : 215,
    "diffHunk" : "@@ -1,1 +213,217 @@    // Inner-product primitive\n    std::shared_ptr<mkldnn::primitive> matmul_fwd;\n    std::shared_ptr<mkldnn::stream> fwd_stream;\n    std::vector<mkldnn::primitive> fwd_primitives;\n"
  },
  {
    "id" : "8a256210-da73-46e9-8672-8591af376e04",
    "prId" : 26909,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/26909#pullrequestreview-241865879",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c44dd976-9a89-4e90-b061-f1b2b6ff7970",
        "parentId" : null,
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Please add `errors::InvalidArgument` for unexpected `mode_string`.",
        "createdAt" : "2019-05-24T18:33:38Z",
        "updatedAt" : "2019-05-29T21:38:19Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      }
    ],
    "commit" : "e46c09bfa6252f687e2cb68cffdbac6fdc34735a",
    "line" : 445,
    "diffHunk" : "@@ -1,1 +443,447 @@          \"Quantization mode must be either MIN_FIRST or SCALED, but received \",\n          mode_string));\n    }\n  }\n"
  },
  {
    "id" : "fe4af39b-1d91-454b-88cf-c43db5189f90",
    "prId" : 26909,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/26909#pullrequestreview-241865879",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d86ebdb2-3bb7-4f3c-95ac-58703aebc67a",
        "parentId" : null,
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Same as above. This blank line could be removed. But up to you.",
        "createdAt" : "2019-05-24T18:35:34Z",
        "updatedAt" : "2019-05-29T21:38:19Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      }
    ],
    "commit" : "e46c09bfa6252f687e2cb68cffdbac6fdc34735a",
    "line" : 291,
    "diffHunk" : "@@ -1,1 +289,293 @@    context_.src_fmt = static_cast<mkldnn::memory::format>(\n        context_.fwd_pd.get()->src_primitive_desc().desc().data.format);\n\n    context_.weight_fmt = static_cast<mkldnn::memory::format>(\n        context_.fwd_pd.get()->weights_primitive_desc().desc().data.format);"
  },
  {
    "id" : "70cc635f-3257-4fd0-98ff-883a7c1d903d",
    "prId" : 26909,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/26909#pullrequestreview-241865879",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fd0740c2-c77d-4077-971c-c135fe0a554a",
        "parentId" : null,
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Since you use `Ws8` in the actual implementation, please add an additional line\r\n`= Q'a * Qw * B𝑓32 + Q'a * Min(A𝑓32) * 1 * Ws8`.",
        "createdAt" : "2019-05-24T20:34:34Z",
        "updatedAt" : "2019-05-29T21:38:19Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      }
    ],
    "commit" : "e46c09bfa6252f687e2cb68cffdbac6fdc34735a",
    "line" : 59,
    "diffHunk" : "@@ -1,1 +57,61 @@// With MIN_FIRST quantization of activation, the scaled bias tensor with\n// compensation, B's32, is calculated as below:\n//      B's32 = Q'a * Qw * B𝑓32 + Q'a * Qw * Min(A𝑓32) * 1 * W𝑓32\n//            = Q'a * Qw * B𝑓32 + Q'a * Min(A𝑓32) * 1 * Ws8.\n// where, 1 denotes a row vector matching the outermost dim of W𝑓32."
  },
  {
    "id" : "6f3fd8a8-b937-4cae-997c-776efa50e369",
    "prId" : 26909,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/26909#pullrequestreview-242952922",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "626ace22-80e7-42c5-ae9a-1752472425a0",
        "parentId" : null,
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Should this have `TypeContraint` for `Tbias` as well?",
        "createdAt" : "2019-05-24T20:42:36Z",
        "updatedAt" : "2019-05-29T21:38:19Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      },
      {
        "id" : "69bbf5da-5d44-4298-b317-34b7400ca847",
        "parentId" : "626ace22-80e7-42c5-ae9a-1752472425a0",
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "This hasn't been addressed.",
        "createdAt" : "2019-05-28T17:33:53Z",
        "updatedAt" : "2019-05-29T21:38:19Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      },
      {
        "id" : "3a8f11f5-de21-4b7f-a3c3-d315dc98e624",
        "parentId" : "626ace22-80e7-42c5-ae9a-1752472425a0",
        "authorId" : "2f37d57c-3887-4235-87c2-9c3d11e0c22b",
        "body" : "@penpornk Mistakenly, an attribute for bias type was not added in `tensorflow/core/ops/mkl_nn_ops.cc` line no 853 for this operator. I have added a comment to add that in a future PR. Can we go with current form? Because a modification here will involve modification to other places in other PRs and possibly in graph rewrite.",
        "createdAt" : "2019-05-28T19:35:18Z",
        "updatedAt" : "2019-05-29T21:38:19Z",
        "lastEditedBy" : "2f37d57c-3887-4235-87c2-9c3d11e0c22b",
        "tags" : [
        ]
      },
      {
        "id" : "02526ada-d52a-4fde-b13f-5cf81959d18e",
        "parentId" : "626ace22-80e7-42c5-ae9a-1752472425a0",
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Got it. Sure, let's keep it for future PRs.",
        "createdAt" : "2019-05-28T22:26:51Z",
        "updatedAt" : "2019-05-29T21:38:19Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      }
    ],
    "commit" : "e46c09bfa6252f687e2cb68cffdbac6fdc34735a",
    "line" : 844,
    "diffHunk" : "@@ -1,1 +842,846 @@        .TypeConstraint<quint8>(\"T1\")\n        .TypeConstraint<qint8>(\"T2\")\n        .TypeConstraint<qint32>(\"Toutput\")\n        .Label(mkl_op_registry::kMklQuantizedOpLabel),\n    MklDnnQuantizedMatMulReluOp<CPUDevice, quint8, qint8, float, qint32>);"
  },
  {
    "id" : "4a13f9cf-f3c1-4b66-a3fd-8a721d865f7a",
    "prId" : 26909,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/26909#pullrequestreview-241865879",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "43f35c1b-8f4d-4507-8e4d-5f04bade2bc2",
        "parentId" : null,
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Please add a blank line above this line.",
        "createdAt" : "2019-05-24T20:50:21Z",
        "updatedAt" : "2019-05-29T21:38:19Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      }
    ],
    "commit" : "e46c09bfa6252f687e2cb68cffdbac6fdc34735a",
    "line" : 870,
    "diffHunk" : "@@ -1,1 +868,872 @@}  // namespace tensorflow\n\n#endif  // INTEL_MKL"
  }
]