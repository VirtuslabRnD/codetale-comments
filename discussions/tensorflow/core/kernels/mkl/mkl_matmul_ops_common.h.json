[
  {
    "id" : "0a062989-3dd4-47d9-8da5-17e2785d1e35",
    "prId" : 47577,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/47577#pullrequestreview-616853515",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e7766055-e01f-4a12-b968-65fcf71aa95b",
        "parentId" : null,
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Just FYI, TensorFlow can read cache sizes through Eigen, although that may come with some latency costs.\r\nhttps://github.com/tensorflow/tensorflow/blob/add0a785e5af7d39cbb6801e2aefd83db39738b0/tensorflow/core/kernels/conv_grad_ops_3d.cc#L395",
        "createdAt" : "2021-03-20T00:09:05Z",
        "updatedAt" : "2021-03-20T00:12:36Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      }
    ],
    "commit" : "96930b5ea3ecbe514e9c40974259d82c7554415f",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +34,38 @@namespace tensorflow {\n\n#define L1_SIZE 32 * 1024\ntypedef Eigen::ThreadPoolDevice CPUDevice;\n"
  },
  {
    "id" : "9d568adf-00db-4473-bce6-7bb482e59154",
    "prId" : 47577,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/47577#pullrequestreview-616853515",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "df97436c-3f61-4bc8-98f4-bb32ddcddd5b",
        "parentId" : null,
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Just curious, why is `L1_SiZE` multiplied by 8? If it's some magic constant, please say so in the comment (in the code).",
        "createdAt" : "2021-03-20T00:11:18Z",
        "updatedAt" : "2021-03-20T00:12:36Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      }
    ],
    "commit" : "96930b5ea3ecbe514e9c40974259d82c7554415f",
    "line" : 12,
    "diffHunk" : "@@ -1,1 +42,46 @@  // total size is < few L1's. So we will do this simple calculation\n  // to determine if the MM should be run on a single thread.\n  return ((sizeof(float) * (m * n + k * (m + n))) < L1_SIZE * 8);\n}\n"
  }
]