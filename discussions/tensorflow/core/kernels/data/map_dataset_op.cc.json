[
  {
    "id" : "40c9b4a7-208d-4ed2-992e-b51137245139",
    "prId" : 28531,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/28531#pullrequestreview-236222431",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "abd18fc8-c5dc-4443-b95f-a638fa2aa0bb",
        "parentId" : null,
        "authorId" : "b4c739be-8aba-4687-9314-60b582f3b6d6",
        "body" : "put the kernel registration into anonymous namespace ... applies to other .cc files as well",
        "createdAt" : "2019-05-11T14:30:21Z",
        "updatedAt" : "2019-05-23T15:43:16Z",
        "lastEditedBy" : "b4c739be-8aba-4687-9314-60b582f3b6d6",
        "tags" : [
        ]
      }
    ],
    "commit" : "0928e53708715d11da6b425be20ccbe1fadc1770",
    "line" : 363,
    "diffHunk" : "@@ -1,1 +203,207 @@\nnamespace {\nREGISTER_KERNEL_BUILDER(Name(\"MapDataset\").Device(DEVICE_CPU), MapDatasetOp);\nREGISTER_KERNEL_BUILDER(Name(\"ExperimentalMapDataset\")\n                            .Device(DEVICE_GPU)"
  },
  {
    "id" : "1fae5d9c-f692-4379-99ae-201d74382f82",
    "prId" : 28531,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/28531#pullrequestreview-236383782",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e040575d-e1cf-45c7-94f2-63536877c58a",
        "parentId" : null,
        "authorId" : "b4c739be-8aba-4687-9314-60b582f3b6d6",
        "body" : "what do we need this for?",
        "createdAt" : "2019-05-11T14:31:06Z",
        "updatedAt" : "2019-05-23T15:43:16Z",
        "lastEditedBy" : "b4c739be-8aba-4687-9314-60b582f3b6d6",
        "tags" : [
        ]
      },
      {
        "id" : "811596af-197a-4985-a4a8-f7de75e68563",
        "parentId" : "e040575d-e1cf-45c7-94f2-63536877c58a",
        "authorId" : "2a8db88d-c925-4270-871e-79c6b27c2fdb",
        "body" : "@jsimsa  There are some similar usages in other TF classes (e.g. [hlo_cost_analysis.h](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/compiler/xla/service/hlo_cost_analysis.h#L42-L45) and [hlo_cost_analysis.cc](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/compiler/xla/service/hlo_cost_analysis.cc#L34-L37)).\r\n\r\nWithout this declare, there will be some errors as below when running the unit test. \r\n\r\n```\r\nexec ${PAGER:-/usr/bin/less} \"$0\" || exit 1\r\nExecuting tests from //tensorflow/core/kernels/data:map_dataset_op_test\r\n-----------------------------------------------------------------------------\r\ndyld: Symbol not found: __ZN10tensorflow4data12MapDatasetOp12kDatasetTypeE\r\n  Referenced from: /private/var/tmp/_bazel_fei/5dc7b372a7c45427ff30500d3e22fe26/execroot/org_tensorflow/bazel-out/darwin-opt/bin/tensorflow/core/kernels/data/map_dataset_op_test.runfiles/org_tensorflow/tensorflow/core/kernels/data/map_dataset_op_test\r\n  Expected in: flat namespace\r\n in /private/var/tmp/_bazel_fei/5dc7b372a7c45427ff30500d3e22fe26/execroot/org_tensorflow/bazel-out/darwin-opt/bin/tensorflow/core/kernels/data/map_dataset_op_test.runfiles/org_tensorflow/tensorflow/core/kernels/data/map_dataset_op_test\r\nexternal/bazel_tools/tools/test/test-setup.sh: line 310: 19316 Abort trap: 6           \"${TEST_PATH}\" \"$@\" 2>&1\r\n```",
        "createdAt" : "2019-05-11T16:24:51Z",
        "updatedAt" : "2019-05-23T15:43:16Z",
        "lastEditedBy" : "2a8db88d-c925-4270-871e-79c6b27c2fdb",
        "tags" : [
        ]
      }
    ],
    "commit" : "0928e53708715d11da6b425be20ccbe1fadc1770",
    "line" : 22,
    "diffHunk" : "@@ -1,1 +28,32 @@// description of the following op.\n\nconstexpr char MapDatasetOp::kDatasetType[];\nconstexpr char MapDatasetOp::kInputDataset[];\nconstexpr char MapDatasetOp::kOtherArguments[];"
  },
  {
    "id" : "b49674a8-8968-45da-8b25-b3b59b93aec4",
    "prId" : 28531,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/28531#pullrequestreview-240207991",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3f52f23d-243e-4c88-adbf-155e0edbeb33",
        "parentId" : null,
        "authorId" : "b4c739be-8aba-4687-9314-60b582f3b6d6",
        "body" : "Let's define all the input and attr names as named constants of `MapDatasetOp`.",
        "createdAt" : "2019-05-21T17:58:54Z",
        "updatedAt" : "2019-05-23T15:43:16Z",
        "lastEditedBy" : "b4c739be-8aba-4687-9314-60b582f3b6d6",
        "tags" : [
        ]
      }
    ],
    "commit" : "0928e53708715d11da6b425be20ccbe1fadc1770",
    "line" : 151,
    "diffHunk" : "@@ -1,1 +102,106 @@    b->BuildAttrValue(preserve_cardinality_, &preserve_cardinality_attr);\n\n    TF_RETURN_IF_ERROR(b->AddDataset(\n        this, {std::make_pair(0, input_graph_node)},  // Single tensor inputs.\n        {std::make_pair(1, other_arguments)},         // Tensor list inputs."
  }
]