[
  {
    "id" : "9c867e5d-ea67-43b9-be36-9c5a3dae6047",
    "prId" : 12580,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/12580#pullrequestreview-59425055",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6ad2769d-4604-4894-9681-67bc2507f5c6",
        "parentId" : null,
        "authorId" : "6bc97f28-dad4-4ccf-a190-5a69645348d5",
        "body" : "Could you move this function to fused_batch_norm_op.cc?",
        "createdAt" : "2017-08-29T20:39:51Z",
        "updatedAt" : "2017-09-20T02:21:36Z",
        "lastEditedBy" : "6bc97f28-dad4-4ccf-a190-5a69645348d5",
        "tags" : [
        ]
      },
      {
        "id" : "a3a3234c-25f4-45e1-a6ff-cdd1393b1e9b",
        "parentId" : "6ad2769d-4604-4894-9681-67bc2507f5c6",
        "authorId" : "2cab004c-cfc3-4ee0-b0ff-8f1d40b1e35d",
        "body" : "If I understand the build process correctly, this functor needs to be instantiated in both fused_batch_norm_op.cc and fused_batch_norm_op.cu.cc, to be compiled to two kernels by nvcc and gcc respectively.  Therefore it has to be in a header file to be included by both .cc and .cu.cc. This seems like what's been done for other kernels as well (e.g. reverse_op).",
        "createdAt" : "2017-08-29T23:02:18Z",
        "updatedAt" : "2017-09-20T02:21:36Z",
        "lastEditedBy" : "2cab004c-cfc3-4ee0-b0ff-8f1d40b1e35d",
        "tags" : [
        ]
      },
      {
        "id" : "794de4f6-ac73-4333-a7d2-b2ea8a630688",
        "parentId" : "6ad2769d-4604-4894-9681-67bc2507f5c6",
        "authorId" : "6bc97f28-dad4-4ccf-a190-5a69645348d5",
        "body" : "Sounds good. ",
        "createdAt" : "2017-08-30T01:27:30Z",
        "updatedAt" : "2017-09-20T02:21:36Z",
        "lastEditedBy" : "6bc97f28-dad4-4ccf-a190-5a69645348d5",
        "tags" : [
        ]
      }
    ],
    "commit" : "f33ea380e3615e052929b635e5fa998d27cefa11",
    "line" : 25,
    "diffHunk" : "@@ -1,1 +55,59 @@// Both CPU and GPU will use this functor.\ntemplate <typename Device, typename T>\nstruct FusedBatchNormFreezeGrad {\n  void operator()(const Device& d, const Tensor& y_backprop_input,\n                  const Tensor& x_input, const Tensor& scale_input,"
  },
  {
    "id" : "9e94dea6-d685-46b5-9756-513de9398efa",
    "prId" : 12580,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/12580#pullrequestreview-63846548",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a0993250-0f21-4040-8b03-89f1db54baf3",
        "parentId" : null,
        "authorId" : "6bc97f28-dad4-4ccf-a190-5a69645348d5",
        "body" : "Should this be inside functor namespace? Note this test failure: tensorflow/core/kernels/fused_batch_norm_op.cc:645:7: error: 'FusedBatchNormFreezeGrad' is not a member of 'tensorflow::functor'\r\n\r\nat https://ci.tensorflow.org/job/tensorflow-pull-requests-cpu-python3/6452/console",
        "createdAt" : "2017-09-19T21:26:58Z",
        "updatedAt" : "2017-09-20T02:21:36Z",
        "lastEditedBy" : "6bc97f28-dad4-4ccf-a190-5a69645348d5",
        "tags" : [
        ]
      },
      {
        "id" : "9b2e9c45-b125-49b5-8f13-147b158508cb",
        "parentId" : "a0993250-0f21-4040-8b03-89f1db54baf3",
        "authorId" : "2cab004c-cfc3-4ee0-b0ff-8f1d40b1e35d",
        "body" : "Looks like this header is only included when GPU is enabled. I'll fix it.",
        "createdAt" : "2017-09-19T21:39:17Z",
        "updatedAt" : "2017-09-20T02:21:36Z",
        "lastEditedBy" : "2cab004c-cfc3-4ee0-b0ff-8f1d40b1e35d",
        "tags" : [
        ]
      },
      {
        "id" : "a2559312-6f43-4643-984e-afe7c152e83b",
        "parentId" : "a0993250-0f21-4040-8b03-89f1db54baf3",
        "authorId" : "2cab004c-cfc3-4ee0-b0ff-8f1d40b1e35d",
        "body" : "Ah this is more complicated than I thought. Looks like I need to change BUILD file somehow.",
        "createdAt" : "2017-09-20T01:22:36Z",
        "updatedAt" : "2017-09-20T02:21:36Z",
        "lastEditedBy" : "2cab004c-cfc3-4ee0-b0ff-8f1d40b1e35d",
        "tags" : [
        ]
      }
    ],
    "commit" : "f33ea380e3615e052929b635e5fa998d27cefa11",
    "line" : 25,
    "diffHunk" : "@@ -1,1 +55,59 @@// Both CPU and GPU will use this functor.\ntemplate <typename Device, typename T>\nstruct FusedBatchNormFreezeGrad {\n  void operator()(const Device& d, const Tensor& y_backprop_input,\n                  const Tensor& x_input, const Tensor& scale_input,"
  }
]