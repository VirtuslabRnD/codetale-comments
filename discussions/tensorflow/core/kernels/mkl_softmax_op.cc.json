[
  {
    "id" : "a2333f42-7104-4f5e-826b-2c7d73736a0c",
    "prId" : 32151,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/32151#pullrequestreview-292081952",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a126e034-f6e1-4695-a586-ad64349720a4",
        "parentId" : null,
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Why do the variables need to be shared pointers? It seems the objects they point to are always a newly allocated objects.",
        "createdAt" : "2019-09-19T20:57:30Z",
        "updatedAt" : "2019-09-21T06:53:15Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      },
      {
        "id" : "8392225f-f4c9-4f36-9851-5d15769a60a1",
        "parentId" : "a126e034-f6e1-4695-a586-ad64349720a4",
        "authorId" : "b290c238-d054-4554-ad7a-c1f31856dbbc",
        "body" : "We use shared_ptr just for easily resource management.",
        "createdAt" : "2019-09-21T06:46:44Z",
        "updatedAt" : "2019-09-21T06:53:15Z",
        "lastEditedBy" : "b290c238-d054-4554-ad7a-c1f31856dbbc",
        "tags" : [
        ]
      },
      {
        "id" : "6806e194-1be6-407e-8ad6-343335df3838",
        "parentId" : "a126e034-f6e1-4695-a586-ad64349720a4",
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "If that's the case, would `unique_ptr` also work for you? It should be more efficient than `shared_ptr`.",
        "createdAt" : "2019-09-23T21:35:15Z",
        "updatedAt" : "2019-09-23T21:37:12Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      },
      {
        "id" : "19a6ace4-9999-4229-9e5d-5aa4b57c3a4a",
        "parentId" : "a126e034-f6e1-4695-a586-ad64349720a4",
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Never mind. I see this in other PRs as well. I think this is more of a design question. I'll bring this up in a sync meeting later.",
        "createdAt" : "2019-09-23T22:10:05Z",
        "updatedAt" : "2019-09-23T22:10:10Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      }
    ],
    "commit" : "abcf219ba386ba04369a5b561fb9363ebb3c7b7c",
    "line" : 70,
    "diffHunk" : "@@ -1,1 +83,87 @@\n    // Memory desc\n    std::shared_ptr<memory::desc> src_md;\n\n    // Softmax primitive"
  },
  {
    "id" : "ee866da1-e371-4d0b-8494-5244e4ef0551",
    "prId" : 24057,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/24057#pullrequestreview-182473799",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "04b02bab-927e-490f-b1a4-37000fb2481d",
        "parentId" : null,
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "I thought MKL tensors are in NCHW format? Could you please add comments on why the layout is set this way (in the file)?\r\n\r\nAlso, why does layout matter in softmax? (NHWC vs NCHW, etc.)",
        "createdAt" : "2018-12-05T19:31:32Z",
        "updatedAt" : "2018-12-11T02:46:49Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      },
      {
        "id" : "6413ce04-19df-4a87-8e05-718b444e0556",
        "parentId" : "04b02bab-927e-490f-b1a4-37000fb2481d",
        "authorId" : "88acce95-5242-4e51-ae4a-7bea4ff809a0",
        "body" : "Thanks, I will add comments.\r\nWhen input is MKL tensor, layout_type here is used for output tensor. When input is MKL tensor, output is also MKL tensor, but we need to set its TF layout_type.  TF layout is NHWC.\r\nWhen input is TF tensor, layout_type here is no special sense. We use axis to define on which dimension to do softmax.",
        "createdAt" : "2018-12-06T02:29:41Z",
        "updatedAt" : "2018-12-11T02:46:49Z",
        "lastEditedBy" : "88acce95-5242-4e51-ae4a-7bea4ff809a0",
        "tags" : [
        ]
      },
      {
        "id" : "f41ec64c-7937-483a-9c3e-e91a9144e4b6",
        "parentId" : "04b02bab-927e-490f-b1a4-37000fb2481d",
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Thank you for the explanation! This PR should be good to go after the comments.",
        "createdAt" : "2018-12-06T22:14:03Z",
        "updatedAt" : "2018-12-11T02:46:49Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      }
    ],
    "commit" : "60f89ee911649a94b2483f71363e5dad6dda5901",
    "line" : 61,
    "diffHunk" : "@@ -1,1 +93,97 @@        case 4:\n          if (src_mkl_shape.IsMklTensor()) {\n            layout_type = memory::format::nhwc;\n          } else {\n            layout_type = memory::format::nchw;"
  }
]