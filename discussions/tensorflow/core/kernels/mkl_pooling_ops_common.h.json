[
  {
    "id" : "9223e37e-a53c-488f-9498-7505a6e94a3d",
    "prId" : 41624,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/41624#pullrequestreview-456198396",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b35a40af-e90e-4d0a-806c-adda7f173d5f",
        "parentId" : null,
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Could you please add a comment that these are only used in v0 code and should be cleaned up when v0 is removed?",
        "createdAt" : "2020-07-22T16:45:01Z",
        "updatedAt" : "2020-07-23T01:41:18Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      },
      {
        "id" : "9149316f-439f-4a10-914e-0e3b26a5ab8a",
        "parentId" : "b35a40af-e90e-4d0a-806c-adda7f173d5f",
        "authorId" : "bd0099d1-d419-490b-9eec-ebb5c3552393",
        "body" : "Hi Penporn, this issue does not happen with DNN v0.x build. I have sent a message to Yang to add a comment as you suggested. \r\n\r\nBTW, v0 code clean-up will be in either TF 2.4 or 2.5. We may prefer to keeping v0 integration code for TF 2.4 as it will be helpful for  future trouble-shooting work. Thanks!",
        "createdAt" : "2020-07-22T20:57:08Z",
        "updatedAt" : "2020-07-23T01:41:18Z",
        "lastEditedBy" : "bd0099d1-d419-490b-9eec-ebb5c3552393",
        "tags" : [
        ]
      },
      {
        "id" : "07b57664-34d4-4f53-b441-2ede33532a6d",
        "parentId" : "b35a40af-e90e-4d0a-806c-adda7f173d5f",
        "authorId" : "bd0099d1-d419-490b-9eec-ebb5c3552393",
        "body" : "We will tell you when we decide to clean up v0 code, as it will generate lots of PR's ...",
        "createdAt" : "2020-07-22T20:59:54Z",
        "updatedAt" : "2020-07-23T01:41:18Z",
        "lastEditedBy" : "bd0099d1-d419-490b-9eec-ebb5c3552393",
        "tags" : [
        ]
      },
      {
        "id" : "d45d9c82-805e-459e-93df-bb04679537f8",
        "parentId" : "b35a40af-e90e-4d0a-806c-adda7f173d5f",
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "@gzmkl Thank you for the quick answer! I understand that v0 removal will take time and a lot of PR, and I don't mean to rush the removal (please take your time). Just wanted to mark these variables because they are not explicitly wrapped in `#ifdef`s and might be harder to spot during the clean-ups. :)\r\n\r\nNow that I think of it, maybe we should wrap them in an `#ifdef`. Up to @ShengYang1 then.",
        "createdAt" : "2020-07-22T21:41:54Z",
        "updatedAt" : "2020-07-23T01:41:18Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      },
      {
        "id" : "a1118c7d-25e4-4bc3-8ea2-ea7d1cb6b6d4",
        "parentId" : "b35a40af-e90e-4d0a-806c-adda7f173d5f",
        "authorId" : "b290c238-d054-4554-ad7a-c1f31856dbbc",
        "body" : "`#ifdef` added, and also cleaned some v1 code to not use `diff_src_md`.",
        "createdAt" : "2020-07-23T01:51:17Z",
        "updatedAt" : "2020-07-23T01:51:17Z",
        "lastEditedBy" : "b290c238-d054-4554-ad7a-c1f31856dbbc",
        "tags" : [
        ]
      },
      {
        "id" : "ff7035ba-aab0-4bcc-b08f-ea74bf95f163",
        "parentId" : "b35a40af-e90e-4d0a-806c-adda7f173d5f",
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Thank you for the clean up!",
        "createdAt" : "2020-07-27T23:17:53Z",
        "updatedAt" : "2020-07-27T23:18:08Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      }
    ],
    "commit" : "eecdbbaa288f7307b6c8e7d3e986078195feda85",
    "line" : 45,
    "diffHunk" : "@@ -1,1 +270,274 @@#ifndef ENABLE_MKLDNN_V1\n    std::shared_ptr<mkldnn::memory::desc> diff_src_md;\n    std::shared_ptr<mkldnn::memory::desc> diff_dst_md;\n#endif\n"
  },
  {
    "id" : "84cfed1e-c7e6-49b2-a855-e6d1082f3a58",
    "prId" : 38137,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/38137#pullrequestreview-386012278",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4fc3b797-c509-498c-91cb-57496fd96a2a",
        "parentId" : null,
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Should this be guarded with `#ifdef ENABLE_MKLDNN_V1`?",
        "createdAt" : "2020-04-01T20:57:29Z",
        "updatedAt" : "2020-04-01T23:14:14Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      },
      {
        "id" : "faa332b6-a63a-491c-9e26-294b44ff3c5f",
        "parentId" : "4fc3b797-c509-498c-91cb-57496fd96a2a",
        "authorId" : "f1b3c014-4b6e-43e3-b9bc-45605cfc1356",
        "body" : "Addressed it.",
        "createdAt" : "2020-04-01T23:15:01Z",
        "updatedAt" : "2020-04-01T23:15:02Z",
        "lastEditedBy" : "f1b3c014-4b6e-43e3-b9bc-45605cfc1356",
        "tags" : [
        ]
      }
    ],
    "commit" : "94208b15449eaf3fb0aad2dc7339f3d613211642",
    "line" : 28,
    "diffHunk" : "@@ -1,1 +75,79 @@#ifdef ENABLE_MKLDNN_V1\n        src_md(src_md),\n        diff_dst_md(diff_dst_md) {\n  }\n#else"
  },
  {
    "id" : "da8dbb39-345c-4468-a04c-ec7a8e6bbac3",
    "prId" : 23724,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/23724#pullrequestreview-179403237",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f3b93a55-300c-45e1-ab20-72b9e42b3865",
        "parentId" : null,
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Please add a comment describing the variable.",
        "createdAt" : "2018-11-15T23:12:58Z",
        "updatedAt" : "2018-11-29T01:17:45Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      },
      {
        "id" : "d277a49b-b8b1-4b5b-8d87-6b6db8473fdb",
        "parentId" : "f3b93a55-300c-45e1-ab20-72b9e42b3865",
        "authorId" : "25745d2d-fe01-49de-975c-879c043e0b34",
        "body" : "Added.",
        "createdAt" : "2018-11-28T16:49:07Z",
        "updatedAt" : "2018-11-29T01:17:45Z",
        "lastEditedBy" : "25745d2d-fe01-49de-975c-879c043e0b34",
        "tags" : [
        ]
      }
    ],
    "commit" : "7dbc68791c6d5384e5807fefdeee79ccccc4008b",
    "line" : 38,
    "diffHunk" : "@@ -1,1 +101,105 @@\n    // Kind of propagation, forward or backward\n    mkldnn::prop_kind prop_kind;\n\n    // expected memory format"
  },
  {
    "id" : "fe0c6232-8bbb-4dde-9303-243b9f5dd597",
    "prId" : 23724,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/23724#pullrequestreview-179403330",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1c8d09da-f8c2-47bd-ba70-1e0c15b5d58a",
        "parentId" : null,
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "For uniformity, could you please wrap this line in brackets {}? \r\n```c++\r\n} else {\r\n   ...\r\n}\r\n```",
        "createdAt" : "2018-11-15T23:18:12Z",
        "updatedAt" : "2018-11-29T01:17:45Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      },
      {
        "id" : "bb09f7c7-a0b9-4f2d-ab55-6be55862f9b1",
        "parentId" : "1c8d09da-f8c2-47bd-ba70-1e0c15b5d58a",
        "authorId" : "25745d2d-fe01-49de-975c-879c043e0b34",
        "body" : "Done.",
        "createdAt" : "2018-11-28T16:49:17Z",
        "updatedAt" : "2018-11-29T01:17:45Z",
        "lastEditedBy" : "25745d2d-fe01-49de-975c-879c043e0b34",
        "tags" : [
        ]
      }
    ],
    "commit" : "7dbc68791c6d5384e5807fefdeee79ccccc4008b",
    "line" : 60,
    "diffHunk" : "@@ -1,1 +454,458 @@      data_format = \"NHWC\";\n    } else {\n      OP_REQUIRES_OK(context, context->GetAttr(\"data_format\", &data_format));\n    }\n    OP_REQUIRES(context, FormatFromString(data_format, &this->data_format_tf_),"
  },
  {
    "id" : "8322a38f-13e5-4ed2-bb49-d4f163bccb60",
    "prId" : 19403,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/19403#pullrequestreview-139225793",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bd417d40-05e0-45ba-a065-09173f06aff9",
        "parentId" : null,
        "authorId" : "0ba8fb18-637a-4ab3-a7c8-cd971823fe45",
        "body" : "I think it would make sense to move this to the base class. I suspect we might want to use this shorthand in a number of other kernels.",
        "createdAt" : "2018-07-18T19:46:10Z",
        "updatedAt" : "2018-07-31T15:47:59Z",
        "lastEditedBy" : "0ba8fb18-637a-4ab3-a7c8-cd971823fe45",
        "tags" : [
        ]
      },
      {
        "id" : "444f73f6-7abf-4d1f-b358-db6fe920fd72",
        "parentId" : "bd417d40-05e0-45ba-a065-09173f06aff9",
        "authorId" : "bd0099d1-d419-490b-9eec-ebb5c3552393",
        "body" : "Well, it does not make sense to move this to opkernel base class as it involves \"pooling\" specific parameters. \r\nThis method does not apply to other MKL ops. \r\n",
        "createdAt" : "2018-07-20T22:15:16Z",
        "updatedAt" : "2018-07-31T15:47:59Z",
        "lastEditedBy" : "bd0099d1-d419-490b-9eec-ebb5c3552393",
        "tags" : [
        ]
      }
    ],
    "commit" : "6fdc6be324df7e3f7e3162e161ef4e869bd888fb",
    "line" : 344,
    "diffHunk" : "@@ -1,1 +489,493 @@  }\n\n  void AllocateEmptyOutputTensor(\n      OpKernelContext* context,\n      const int kOutputIndex,"
  },
  {
    "id" : "2790bcb3-a7eb-4047-a832-96d39f0380e1",
    "prId" : 19403,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/19403#pullrequestreview-139681201",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f58fe654-70e8-4fa5-aa90-8d33998f2437",
        "parentId" : null,
        "authorId" : "0ba8fb18-637a-4ab3-a7c8-cd971823fe45",
        "body" : "There's a lot of code duplication between the Fwd and Bwd class. Perhaps derive one from the other or both from a shared base class?",
        "createdAt" : "2018-07-18T22:20:53Z",
        "updatedAt" : "2018-07-31T15:47:59Z",
        "lastEditedBy" : "0ba8fb18-637a-4ab3-a7c8-cd971823fe45",
        "tags" : [
        ]
      },
      {
        "id" : "945051d7-1a1a-429f-809b-3ba913899fa0",
        "parentId" : "f58fe654-70e8-4fa5-aa90-8d33998f2437",
        "authorId" : "bd0099d1-d419-490b-9eec-ebb5c3552393",
        "body" : "Have investigated the possibility and found it is not easy \r\nbecause creations of fwd bwd primitives (including memory::desc, primitive_desc, and primitive) are quite different, so are the \"context_\" data members. \r\nPlan to spend more time on this and refactor later in future PR. ",
        "createdAt" : "2018-07-20T23:59:28Z",
        "updatedAt" : "2018-07-31T15:47:59Z",
        "lastEditedBy" : "bd0099d1-d419-490b-9eec-ebb5c3552393",
        "tags" : [
        ]
      },
      {
        "id" : "7f7cf28f-e4e2-435a-9120-0429256031e3",
        "parentId" : "f58fe654-70e8-4fa5-aa90-8d33998f2437",
        "authorId" : "0ba8fb18-637a-4ab3-a7c8-cd971823fe45",
        "body" : "SGTM",
        "createdAt" : "2018-07-23T22:44:47Z",
        "updatedAt" : "2018-07-31T15:47:59Z",
        "lastEditedBy" : "0ba8fb18-637a-4ab3-a7c8-cd971823fe45",
        "tags" : [
        ]
      }
    ],
    "commit" : "6fdc6be324df7e3f7e3162e161ef4e869bd888fb",
    "line" : 301,
    "diffHunk" : "@@ -1,1 +322,326 @@    std::string prefix = \"pooling_bwd\";\n    FactoryKeyCreator key_creator;\n    key_creator.AddAsKey(prefix);\n    key_creator.AddAsKey(bwdParams.src_dims);\n    key_creator.AddAsKey(bwdParams.dst_dims);"
  }
]