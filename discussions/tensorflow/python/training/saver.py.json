[
  {
    "id" : "c5488980-7f5c-4039-ba2d-415ac0e71e2f",
    "prId" : 20985,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/20985#pullrequestreview-139555027",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "36d15e51-2d4d-4a81-bade-7ba54140a070",
        "parentId" : null,
        "authorId" : "5f311952-9020-4294-a943-21cbd17dde41",
        "body" : "This seems to undo the intent of the original code, because it doesn't ensure that it is copied to CPU *on the same machine*.",
        "createdAt" : "2018-07-20T22:33:15Z",
        "updatedAt" : "2018-07-20T22:33:15Z",
        "lastEditedBy" : "5f311952-9020-4294-a943-21cbd17dde41",
        "tags" : [
        ]
      },
      {
        "id" : "290840c9-f5f1-422a-8ebf-2fec51b00f70",
        "parentId" : "36d15e51-2d4d-4a81-bade-7ba54140a070",
        "authorId" : "f3f38e20-ecc8-4cc6-9aad-14a2dba17439",
        "body" : "Agreed. I am not sure why we are reverting the fix. ",
        "createdAt" : "2018-07-20T23:11:24Z",
        "updatedAt" : "2018-07-20T23:11:25Z",
        "lastEditedBy" : "f3f38e20-ecc8-4cc6-9aad-14a2dba17439",
        "tags" : [
        ]
      },
      {
        "id" : "28ea26ad-1eee-4702-b2f4-268d7f90de0a",
        "parentId" : "36d15e51-2d4d-4a81-bade-7ba54140a070",
        "authorId" : "08dd9781-056c-4bb2-b8e3-a92243f1ce70",
        "body" : "@agarwal-ashish It does the same job as your fix. Because it is under the context of v.device, it will just replace the last part of device to 'device:CPU:0'. \r\ne.g.\r\n'/job:ps/task:1/device:CPU:1' -->'/job:ps/task:1/device:CPU:0' \r\n'/job:ps/task:1/device:GPU:0' -->'/job:ps/task:1/device:CPU:0' ",
        "createdAt" : "2018-07-23T02:29:43Z",
        "updatedAt" : "2018-07-23T02:29:44Z",
        "lastEditedBy" : "08dd9781-056c-4bb2-b8e3-a92243f1ce70",
        "tags" : [
        ]
      },
      {
        "id" : "f5d2cd19-1103-4ac2-a950-2fd1f6b2cfec",
        "parentId" : "36d15e51-2d4d-4a81-bade-7ba54140a070",
        "authorId" : "5f311952-9020-4294-a943-21cbd17dde41",
        "body" : "Ah, that's correct... I missed the indentation change. ",
        "createdAt" : "2018-07-23T15:38:48Z",
        "updatedAt" : "2018-07-23T15:38:54Z",
        "lastEditedBy" : "5f311952-9020-4294-a943-21cbd17dde41",
        "tags" : [
        ]
      },
      {
        "id" : "9377a9fc-9e6c-44af-b5c0-174e04b86731",
        "parentId" : "36d15e51-2d4d-4a81-bade-7ba54140a070",
        "authorId" : "0ba8fb18-637a-4ab3-a7c8-cd971823fe45",
        "body" : "I missed that too and hence bounced it to the authors. Thanks for pointing out, @jackonan ",
        "createdAt" : "2018-07-23T16:31:26Z",
        "updatedAt" : "2018-07-23T16:31:27Z",
        "lastEditedBy" : "0ba8fb18-637a-4ab3-a7c8-cd971823fe45",
        "tags" : [
        ]
      }
    ],
    "commit" : "0c11bcb5f3443ce870f31f5ba013ae8bc375ad2d",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +130,134 @@              # we copy them to CPU on the same machine first.\n              with ops.device(\"/device:CPU:0\"):\n                return array_ops.identity(x)\n          return f\n"
  },
  {
    "id" : "574237f0-9035-4153-913f-13b2959dfbf6",
    "prId" : 17055,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/17055#pullrequestreview-97253904",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6540cb12-de44-4fbf-8b4b-2e72f4cd4766",
        "parentId" : null,
        "authorId" : "790d4095-991a-4f3f-b02b-5a0e25c6c19f",
        "body" : "Revert this file",
        "createdAt" : "2018-02-15T22:31:46Z",
        "updatedAt" : "2018-02-16T18:34:28Z",
        "lastEditedBy" : "790d4095-991a-4f3f-b02b-5a0e25c6c19f",
        "tags" : [
        ]
      },
      {
        "id" : "997c5da1-105d-4dbd-9e45-988af0d65298",
        "parentId" : "6540cb12-de44-4fbf-8b4b-2e72f4cd4766",
        "authorId" : "28fabc34-a1ac-4aba-988b-9c9e03232122",
        "body" : "This is actually needed. We need to roll this back and propagate this rollback also internally to fix the last pull from github.\r\nThis file and evaluation_test.py changes are a part of the rollback, I manually verified those two.",
        "createdAt" : "2018-02-16T06:53:50Z",
        "updatedAt" : "2018-02-16T18:34:28Z",
        "lastEditedBy" : "28fabc34-a1ac-4aba-988b-9c9e03232122",
        "tags" : [
        ]
      },
      {
        "id" : "2f5549e7-28d9-4112-b8f6-4180cae41cad",
        "parentId" : "6540cb12-de44-4fbf-8b4b-2e72f4cd4766",
        "authorId" : "790d4095-991a-4f3f-b02b-5a0e25c6c19f",
        "body" : "Okay sounds good.",
        "createdAt" : "2018-02-16T17:21:51Z",
        "updatedAt" : "2018-02-16T18:34:28Z",
        "lastEditedBy" : "790d4095-991a-4f3f-b02b-5a0e25c6c19f",
        "tags" : [
        ]
      }
    ],
    "commit" : "3b7470a27ac0aebdc62ebf4d5a635948b0976be6",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +1600,1604 @@      A string: path prefix used for the checkpoint files.  If the saver is\n        sharded, this string ends with: '-?????-of-nnnnn' where 'nnnnn'\n        is the number of shards created.\n      If the saver is empty, returns None.\n"
  },
  {
    "id" : "961154bc-e6ed-4d5c-8ca4-f330d3d9b88d",
    "prId" : 3695,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/3695#pullrequestreview-14856125",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6bb77613-8d77-4036-86df-b74068626593",
        "parentId" : null,
        "authorId" : "f7c6d68e-adf3-4cd8-b583-52aa20f5c087",
        "body" : "I'm a bit leery of this type of comment that references the structure of the code, since code changes over time and the comment may become outdated and confusing.\n\nWhy not move this check a few lines up, so it immediatley follows setting save_path = os.path.dirname(save_path)? The test that checks if the session is a Session can occur after the save path is setup. And the comment will no longer be necessary, since the immediately pre-ceeding line will be the save_path setup.\n",
        "createdAt" : "2016-08-09T19:25:13Z",
        "updatedAt" : "2016-08-10T06:35:49Z",
        "lastEditedBy" : "f7c6d68e-adf3-4cd8-b583-52aa20f5c087",
        "tags" : [
        ]
      },
      {
        "id" : "ec2368f4-01f3-474c-8423-1ba0b6bfc681",
        "parentId" : "6bb77613-8d77-4036-86df-b74068626593",
        "authorId" : "d7943254-4e2f-4a94-a161-7765e6756fa6",
        "body" : "@danmane You have a good point here. I moved the check up and changed it to work on unmodified `os.path.dirname(save_path)`.\nI think it's more explicit than setting `save_path = os.path.dirname(save_path)`, which is just bound to cause confusion sooner or later.\n",
        "createdAt" : "2016-08-10T06:40:29Z",
        "updatedAt" : "2016-08-10T06:40:38Z",
        "lastEditedBy" : "d7943254-4e2f-4a94-a161-7765e6756fa6",
        "tags" : [
        ]
      },
      {
        "id" : "aa838220-93ba-4cf7-af1c-9a8aa3712814",
        "parentId" : "6bb77613-8d77-4036-86df-b74068626593",
        "authorId" : "a46c72bb-51b3-4f76-a30c-ad0fb255e65a",
        "body" : "save_file = 'model.ckpt'\r\n\r\nWhen I try to do \r\n\r\n```\r\ntf.saver = tf.train.Saver()\r\nwith tf.Session() as sess:\r\n     # Do something \r\n     saver.save(sess, save_file)\r\n```\r\n\r\nI get this error: \r\n```\r\nC:\\Program Files\\Anaconda3\\envs\\IntroToTensorFlow\\lib\\site-packages\\tensorflow\\python\\training\\saver.py in save(self, sess, save_path, global_step, latest_filename, meta_graph_suffix, write_meta_graph, write_state)\r\n   1312     if not gfile.IsDirectory(os.path.dirname(save_path)):\r\n   1313       raise ValueError(\r\n-> 1314           \"Parent directory of {} doesn't exist, can't save.\".format(save_path))\r\n   1315 \r\n   1316     save_path = os.path.dirname(save_path)\r\n\r\nValueError: Parent directory of model.ckpt doesn't exist, can't save.\r\n```\r\n\r\nI am using tensorflow 0.12.0 in ancaconda 3 using windows 8.\r\n\r\n**It works fine in a docker VM that I am using.**",
        "createdAt" : "2017-01-02T15:22:57Z",
        "updatedAt" : "2017-01-02T15:24:17Z",
        "lastEditedBy" : "a46c72bb-51b3-4f76-a30c-ad0fb255e65a",
        "tags" : [
        ]
      },
      {
        "id" : "c1ee21c7-d318-4bc5-b31e-68c00c869bb0",
        "parentId" : "6bb77613-8d77-4036-86df-b74068626593",
        "authorId" : "d7943254-4e2f-4a94-a161-7765e6756fa6",
        "body" : "I don't have a Windows machine to try, but\r\n\r\n    os.path.exists(os.path.dirname(\"whatever\"))\r\n\r\nindeed returns False on my machine. A solution would be to use\r\n\r\n    if not gfile.IsDirectory(os.path.abspath(os.path.dirname(save_path))):\r\n\r\non line 1312, as \r\n\r\n    os.path.exists(os.path.abspath(os.path.dirname(\"whatever\")))\r\n\r\nreturns True, as it should. I'll make that change.",
        "createdAt" : "2017-01-02T15:37:10Z",
        "updatedAt" : "2017-01-02T15:37:50Z",
        "lastEditedBy" : "d7943254-4e2f-4a94-a161-7765e6756fa6",
        "tags" : [
        ]
      },
      {
        "id" : "e551932b-f57f-432e-bcbf-2590aaa44ae0",
        "parentId" : "6bb77613-8d77-4036-86df-b74068626593",
        "authorId" : "d7943254-4e2f-4a94-a161-7765e6756fa6",
        "body" : "Addressed in https://github.com/tensorflow/tensorflow/pull/6601",
        "createdAt" : "2017-01-02T15:49:15Z",
        "updatedAt" : "2017-01-02T15:49:15Z",
        "lastEditedBy" : "d7943254-4e2f-4a94-a161-7765e6756fa6",
        "tags" : [
        ]
      }
    ],
    "commit" : "b4f9bcd7ab8cb1dc24ea300a46c5f55b865e7abc",
    "line" : 11,
    "diffHunk" : "@@ -1,1 +1074,1078 @@      raise TypeError(\"'sess' must be a Session; %s\" % sess)\n\n    # Note a few lines above save_path was set to os.path.dirname(save_path)\n    if not os.path.exists(save_path):\n      raise ValueError(\"Parent directory {} doesn't exist, can't save.\".format(save_path))"
  }
]