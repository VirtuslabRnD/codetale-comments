[
  {
    "id" : "1f0bd974-473d-41b7-9ce0-336fb2577b22",
    "prId" : 13193,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/13193#pullrequestreview-64726769",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f4bb3195-86f6-4adf-896b-62f9bed3926d",
        "parentId" : null,
        "authorId" : "3c462bc6-aae1-413d-908f-fff1b1ed68ef",
        "body" : "The C++ shape fn can do this correctly, but has a bug - it is explicitly checking input_tensor instead of just calling MakeShapeFromShapeTensor  (MakeShapeFromShapeTensor used to not be able to handle this case correctly, but now does).\r\n\r\nCan you instead change core/ops/nn_ops.cc -> the InputTensorShapeOrUnknown function doesn't need to call input_tensor and check for nullptr, it can just call MakeShapeFromShapeTensor.",
        "createdAt" : "2017-09-21T19:37:39Z",
        "updatedAt" : "2017-09-23T01:32:58Z",
        "lastEditedBy" : "3c462bc6-aae1-413d-908f-fff1b1ed68ef",
        "tags" : [
        ]
      },
      {
        "id" : "766be5ec-b84e-4056-9a3b-0acd8714c366",
        "parentId" : "f4bb3195-86f6-4adf-896b-62f9bed3926d",
        "authorId" : "04d6768a-662f-42f5-9152-0bb9c7d64855",
        "body" : "Thanks @cwhipkey! The `MakeShapeFromShapeTensor` works great. I didn't notice it before. The PR has been updated.",
        "createdAt" : "2017-09-22T20:41:06Z",
        "updatedAt" : "2017-09-23T01:32:58Z",
        "lastEditedBy" : "04d6768a-662f-42f5-9152-0bb9c7d64855",
        "tags" : [
        ]
      },
      {
        "id" : "78b40807-fd31-451c-bf69-0adc54dbb3f9",
        "parentId" : "f4bb3195-86f6-4adf-896b-62f9bed3926d",
        "authorId" : "3c462bc6-aae1-413d-908f-fff1b1ed68ef",
        "body" : "I think all the callers to InputTensorShapeOrUnknown would benefit from this change - would you mind changing that function instead, to not do the nullptr check and to have the WithRank addition?",
        "createdAt" : "2017-09-22T21:02:07Z",
        "updatedAt" : "2017-09-23T01:32:58Z",
        "lastEditedBy" : "3c462bc6-aae1-413d-908f-fff1b1ed68ef",
        "tags" : [
        ]
      },
      {
        "id" : "df59bab9-9049-4629-8e9f-1f0bf935e9ab",
        "parentId" : "f4bb3195-86f6-4adf-896b-62f9bed3926d",
        "authorId" : "04d6768a-662f-42f5-9152-0bb9c7d64855",
        "body" : "Thanks @cwhipkey, done.",
        "createdAt" : "2017-09-23T00:52:30Z",
        "updatedAt" : "2017-09-23T01:32:58Z",
        "lastEditedBy" : "04d6768a-662f-42f5-9152-0bb9c7d64855",
        "tags" : [
        ]
      }
    ],
    "commit" : "1c485a91470323b880f5d3d27470b946910dfc13",
    "line" : 1,
    "diffHunk" : "@@ -1,1 +22,26 @@from six.moves import xrange  # pylint: disable=redefined-builtin\n\nfrom tensorflow.python.client import device_lib\nfrom tensorflow.python.framework import constant_op\nfrom tensorflow.python.framework import dtypes"
  }
]