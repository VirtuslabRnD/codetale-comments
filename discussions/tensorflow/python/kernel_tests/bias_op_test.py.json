[
  {
    "id" : "6ceffb13-bbdd-42a0-8f14-255cde1a6860",
    "prId" : 4411,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/4411#pullrequestreview-1370504",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fc8fc103-be90-4c0e-a52a-181d1facd9cb",
        "parentId" : null,
        "authorId" : "17de39de-cc9c-45a3-95c0-7f6d00026c06",
        "body" : "Same here. \n",
        "createdAt" : "2016-09-23T17:28:39Z",
        "updatedAt" : "2016-09-23T17:41:48Z",
        "lastEditedBy" : "17de39de-cc9c-45a3-95c0-7f6d00026c06",
        "tags" : [
        ]
      }
    ],
    "commit" : "3f7374316e116450ad6c2ba76cb5c55f24c2297f",
    "line" : 20,
    "diffHunk" : "@@ -1,1 +151,155 @@        _, bias_jacob_n = tf.test.compute_gradient(\n            bias_tensor, bias.shape, output_tensor, np_input.shape)\n        \n        bias_add_grad = tf.gradients(tf.nn.l2_loss(output_tensor),\n                                     bias_tensor)[0]"
  },
  {
    "id" : "af8ba7a8-f3db-448e-a69a-400c73034bb6",
    "prId" : 4411,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/4411#pullrequestreview-2592930",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "700f3e20-67e6-486c-b35a-8ec355e3bff3",
        "parentId" : null,
        "authorId" : "28fabc34-a1ac-4aba-988b-9c9e03232122",
        "body" : "I think we have a python3 issue here. Our nightlies are failing on this test:\nhttp://ci.tensorflow.org/view/Nightly/job/nightly-matrix-linux-gpu/TF_BUILD_IS_OPT=OPT,TF_BUILD_IS_PIP=NO_PIP,TF_BUILD_PYTHON_VERSION=PYTHON3,label=gpu-linux/247/consoleFull\n\nI was also able to reproduce the problem locally using the following command:\n$ bazel test tensorflow/python/kernel_tests:bias_op_test -c opt --config=cuda\n",
        "createdAt" : "2016-10-02T06:26:38Z",
        "updatedAt" : "2016-10-02T06:26:38Z",
        "lastEditedBy" : "28fabc34-a1ac-4aba-988b-9c9e03232122",
        "tags" : [
        ]
      },
      {
        "id" : "90ba99fb-13ad-44ee-9120-ab55d9c734e1",
        "parentId" : "700f3e20-67e6-486c-b35a-8ec355e3bff3",
        "authorId" : "c48743e8-dfb4-47a0-b873-6d5270705314",
        "body" : "Is there anything I can do here? The only thing I can think of is that the data format string is being handled incorrectly (I know Python 2 and 3 handle strings differently, although that's the extent of my current knowledge on the topic), which might explain why it's failing only on the GPU.\n",
        "createdAt" : "2016-10-03T18:22:04Z",
        "updatedAt" : "2016-10-03T18:28:51Z",
        "lastEditedBy" : "c48743e8-dfb4-47a0-b873-6d5270705314",
        "tags" : [
        ]
      },
      {
        "id" : "00ac2387-3104-4580-b18e-8718e6dd9ce5",
        "parentId" : "700f3e20-67e6-486c-b35a-8ec355e3bff3",
        "authorId" : "c48743e8-dfb4-47a0-b873-6d5270705314",
        "body" : "Indeed, this appears to be the issue. Right now the data_format of the bias op is being compared to a Python string literal. From looking at [another similar code snippet](https://github.com/tensorflow/tensorflow/blob/450e9386e0cc4b81b49adb9184859411f43ef259/tensorflow/python/framework/common_shapes.py#L185), it appears I should have been more careful to make it an ASCII string. I'll fix this shortly.\n",
        "createdAt" : "2016-10-03T18:55:31Z",
        "updatedAt" : "2016-10-03T18:58:24Z",
        "lastEditedBy" : "c48743e8-dfb4-47a0-b873-6d5270705314",
        "tags" : [
        ]
      },
      {
        "id" : "0ac9ffe2-fede-4ced-a00c-34b745e692ff",
        "parentId" : "700f3e20-67e6-486c-b35a-8ec355e3bff3",
        "authorId" : "28fabc34-a1ac-4aba-988b-9c9e03232122",
        "body" : "Sorry, I was reading through my email backlog, and just saw your update.\nThank you very much for looking into this!\n",
        "createdAt" : "2016-10-03T19:53:36Z",
        "updatedAt" : "2016-10-03T19:53:36Z",
        "lastEditedBy" : "28fabc34-a1ac-4aba-988b-9c9e03232122",
        "tags" : [
        ]
      }
    ],
    "commit" : "3f7374316e116450ad6c2ba76cb5c55f24c2297f",
    "line" : 10,
    "diffHunk" : "@@ -1,1 +134,138 @@                                   bias_tensor)[0]\n      grad_jacob_t, grad_jacob_n = tf.test.compute_gradient(\n          output_tensor, np_input.shape, bias_add_grad, bias.shape)\n      \n      if dtype == np.float16:"
  }
]