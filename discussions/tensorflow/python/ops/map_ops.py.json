[
  {
    "id" : "8f9bcc0e-ff42-4c08-8d55-0b6b0192f8be",
    "prId" : 42299,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/42299#pullrequestreview-466697851",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "34878f15-4dbc-4761-bc12-5805679726ab",
        "parentId" : null,
        "authorId" : "e3ded934-167f-4260-a0ce-d4d2e9a707c9",
        "body" : "Maybe simplify a bit\r\n\r\n```\r\ndef EraseGrad(op, dmap):\r\n  return dmap, None\r\n```",
        "createdAt" : "2020-08-13T12:06:38Z",
        "updatedAt" : "2020-08-13T21:02:57Z",
        "lastEditedBy" : "e3ded934-167f-4260-a0ce-d4d2e9a707c9",
        "tags" : [
        ]
      }
    ],
    "commit" : "8698d83037e15482848a7c61ea57c355b4fdf172",
    "line" : 54,
    "diffHunk" : "@@ -1,1 +65,69 @@\n@ops.RegisterGradient(\"TensorMapErase\")\ndef EraseGrad(op, dmap):\n  key_grad = None\n  map_grad = dmap"
  },
  {
    "id" : "fea2f990-18e9-4061-994d-e52eb569ac05",
    "prId" : 42141,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/42141#pullrequestreview-465185979",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c8230f1a-b151-467e-a998-d51f32bd5391",
        "parentId" : null,
        "authorId" : "e3ded934-167f-4260-a0ce-d4d2e9a707c9",
        "body" : "I missed this earlier but why do we need a dtype arg for `TensorMapErase`?",
        "createdAt" : "2020-08-11T15:33:09Z",
        "updatedAt" : "2020-08-12T18:45:26Z",
        "lastEditedBy" : "e3ded934-167f-4260-a0ce-d4d2e9a707c9",
        "tags" : [
        ]
      }
    ],
    "commit" : "c9333c74d9ae563b9cdf2377017136ed77fb12d6",
    "line" : 11,
    "diffHunk" : "@@ -1,1 +68,72 @@  key_grad = None\n  (value_grad, map_grad) = control_flow_ops.cond(tensor_map_has_key(dmap, k),\n                                                 lambda: (tensor_map_lookup(dmap, k, v.dtype), tensor_map_erase(dmap, k, v.dtype)[0]),\n                                                 lambda: (array_ops.zeros_like(v), dmap))\n  return map_grad, key_grad, value_grad"
  },
  {
    "id" : "8d9a770d-db3f-4c55-bc8c-16f4ae098150",
    "prId" : 42141,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/42141#pullrequestreview-465199522",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6dcd531f-7b13-48e7-80af-94d493188eb1",
        "parentId" : null,
        "authorId" : "e3ded934-167f-4260-a0ce-d4d2e9a707c9",
        "body" : "Another alternative would be to not return the erased tensor from `TensorMapErase`. Then `EraseGrad` would simply return `dmap`.\r\n\r\n@mdanatg what do you think?",
        "createdAt" : "2020-08-11T15:38:23Z",
        "updatedAt" : "2020-08-12T18:45:26Z",
        "lastEditedBy" : "e3ded934-167f-4260-a0ce-d4d2e9a707c9",
        "tags" : [
        ]
      },
      {
        "id" : "c41f8b86-d8c3-439f-ad11-6dde1c9e99bc",
        "parentId" : "6dcd531f-7b13-48e7-80af-94d493188eb1",
        "authorId" : "6d710ed1-8ddd-4cc0-acf7-45a1b4f8ceba",
        "body" : "Yes, I think this makes a good reason to tilt the balance in favor of not returning the erased value.",
        "createdAt" : "2020-08-11T15:48:10Z",
        "updatedAt" : "2020-08-12T18:45:26Z",
        "lastEditedBy" : "6d710ed1-8ddd-4cc0-acf7-45a1b4f8ceba",
        "tags" : [
        ]
      }
    ],
    "commit" : "c9333c74d9ae563b9cdf2377017136ed77fb12d6",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +76,80 @@  _, k = op.inputs\n  key_grad = None\n  map_grad = tensor_map_insert(dmap, k, dval)\n  return map_grad, key_grad"
  },
  {
    "id" : "34f7f1de-3c32-4533-852d-44551ff4defe",
    "prId" : 41345,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/41345#pullrequestreview-453329569",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "89df9c27-0a93-4888-a963-bdbe4122c30f",
        "parentId" : null,
        "authorId" : "e3ded934-167f-4260-a0ce-d4d2e9a707c9",
        "body" : "As Dan suggested, we can merge these two conds. We can do this in a followup PR.",
        "createdAt" : "2020-07-22T13:42:34Z",
        "updatedAt" : "2020-08-06T22:45:59Z",
        "lastEditedBy" : "e3ded934-167f-4260-a0ce-d4d2e9a707c9",
        "tags" : [
        ]
      }
    ],
    "commit" : "9c8581efc5c58f09924d86e4ede497223f854d1e",
    "line" : 61,
    "diffHunk" : "@@ -1,1 +59,63 @@  _, k, v = op.inputs\n  key_grad = None\n  value_grad = control_flow_ops.cond(tensor_map_has_key(dmap, k),\n                                     lambda: tensor_map_lookup(dmap, k, v.dtype),\n                                     lambda: array_ops.zeros_like(v))"
  }
]