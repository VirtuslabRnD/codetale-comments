[
  {
    "id" : "c4bdab77-9d3f-4312-a071-c7bed510644b",
    "prId" : 43859,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/43859#pullrequestreview-514925861",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d886acfa-7732-4f61-81f2-a58cf1c56b9f",
        "parentId" : null,
        "authorId" : "b4c739be-8aba-4687-9314-60b582f3b6d6",
        "body" : "this is generally not correct because it does not preserve semantics of stateful map functions\r\n\r\nplease revert this change",
        "createdAt" : "2020-10-22T16:22:39Z",
        "updatedAt" : "2020-10-22T16:22:40Z",
        "lastEditedBy" : "b4c739be-8aba-4687-9314-60b582f3b6d6",
        "tags" : [
        ]
      },
      {
        "id" : "c030a801-9f87-4df3-97a3-087155923215",
        "parentId" : "d886acfa-7732-4f61-81f2-a58cf1c56b9f",
        "authorId" : "6d710ed1-8ddd-4cc0-acf7-45a1b4f8ceba",
        "body" : "Thanks for the heads up. I'll send a rollback.",
        "createdAt" : "2020-10-22T16:36:21Z",
        "updatedAt" : "2020-10-22T16:36:21Z",
        "lastEditedBy" : "6d710ed1-8ddd-4cc0-acf7-45a1b4f8ceba",
        "tags" : [
        ]
      },
      {
        "id" : "a3d9437d-cb0e-46ed-af9c-5d4144cf7de5",
        "parentId" : "d886acfa-7732-4f61-81f2-a58cf1c56b9f",
        "authorId" : "c0e6af67-982a-4e5a-980e-4580b05253a0",
        "body" : "Good catch, sorry about that.",
        "createdAt" : "2020-10-22T16:45:18Z",
        "updatedAt" : "2020-10-22T16:45:19Z",
        "lastEditedBy" : "c0e6af67-982a-4e5a-980e-4580b05253a0",
        "tags" : [
        ]
      }
    ],
    "commit" : "baed1044d21d55b7faf664ab5a84cc0c304285ba",
    "line" : 18,
    "diffHunk" : "@@ -1,1 +430,434 @@def _tf_dataset_map(fn, *iterables):\n  zipped_dataset = dataset_ops.DatasetV2.zip(iterables)\n  return zipped_dataset.map(fn, num_parallel_calls=dataset_ops.AUTOTUNE)\n\n"
  },
  {
    "id" : "90280b96-796f-4707-9178-7505f155cfda",
    "prId" : 36812,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/36812#pullrequestreview-360103166",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ea9a0820-8d74-4e35-a21d-19cbc9df2397",
        "parentId" : null,
        "authorId" : "6d710ed1-8ddd-4cc0-acf7-45a1b4f8ceba",
        "body" : "Optional: If the rank is static, you could have an extra check for an early warning:\r\n\r\n```\r\nif mapped.shape.rank is not None and mapped.shape.rank != 1:\r\n  raise ValueError('sort only supports only 1D tensors')\r\n```",
        "createdAt" : "2020-02-17T14:23:42Z",
        "updatedAt" : "2020-02-28T04:47:20Z",
        "lastEditedBy" : "6d710ed1-8ddd-4cc0-acf7-45a1b4f8ceba",
        "tags" : [
        ]
      },
      {
        "id" : "ce05c977-ef27-4474-b8ac-865eea9ad7a3",
        "parentId" : "ea9a0820-8d74-4e35-a21d-19cbc9df2397",
        "authorId" : "5819e000-5efc-4722-a5f6-5c6b5f56b247",
        "body" : "Thanks @mdanatg, the PR has been updated.",
        "createdAt" : "2020-02-18T06:54:00Z",
        "updatedAt" : "2020-02-28T04:47:20Z",
        "lastEditedBy" : "5819e000-5efc-4722-a5f6-5c6b5f56b247",
        "tags" : [
        ]
      }
    ],
    "commit" : "703cb116d28d434125e4f020444826cf624c060e",
    "line" : 40,
    "diffHunk" : "@@ -1,1 +484,488 @@    if mapped.shape.rank is not None and mapped.shape.rank != 1:\n      raise ValueError('sort only supports only 1D tensors')\n    with ops.control_dependencies(\n        [check_ops.assert_rank_v2(\n            mapped, 1, 'sort only supports only 1D tensors')]):"
  },
  {
    "id" : "4bfeb6b7-a2c9-4b50-ba84-a3942ec33d6b",
    "prId" : 34089,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/34089#pullrequestreview-314277049",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e099d9a9-fc4b-4c77-ba6e-b83aaf05d68c",
        "parentId" : null,
        "authorId" : "6d710ed1-8ddd-4cc0-acf7-45a1b4f8ceba",
        "body" : "A great addition would be a verification that looks at `iterable.element_spec` and raises an error if the dataset contains anything other than a single `bool` scalar tensor. The error message can be something like this:  `in graph mode, the \"any\" builtin only supports datasets that return bool scalars; got: {}`.format(iterable.element_spec)",
        "createdAt" : "2019-11-08T14:58:48Z",
        "updatedAt" : "2019-11-11T16:27:56Z",
        "lastEditedBy" : "6d710ed1-8ddd-4cc0-acf7-45a1b4f8ceba",
        "tags" : [
        ]
      },
      {
        "id" : "ee657f20-fc9a-4f08-baee-52be637f27fe",
        "parentId" : "e099d9a9-fc4b-4c77-ba6e-b83aaf05d68c",
        "authorId" : "04d6768a-662f-42f5-9152-0bb9c7d64855",
        "body" : "Thanks. The PR has been updated to check and makes sure element_spec only consists of tf.bool.",
        "createdAt" : "2019-11-08T15:32:47Z",
        "updatedAt" : "2019-11-11T16:27:56Z",
        "lastEditedBy" : "04d6768a-662f-42f5-9152-0bb9c7d64855",
        "tags" : [
        ]
      }
    ],
    "commit" : "b5bf5c908634f7f2b0b10882d1896bdafb3f38f6",
    "line" : 23,
    "diffHunk" : "@@ -1,1 +397,401 @@# as tf.data's filter+take is done in pipeline so it will stop\n# as soon as `take(1)` returns.\ndef _tf_dataset_any(iterable):\n  # check and make sure iterable.element_spec only consists of one\n  # element of tf.bool."
  }
]