[
  {
    "id" : "1856a902-2806-4bf7-977d-b60f4419a182",
    "prId" : 15106,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/15106#pullrequestreview-86203135",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0c41d250-b168-42b3-ba33-613bddfe192e",
        "parentId" : null,
        "authorId" : "28fabc34-a1ac-4aba-988b-9c9e03232122",
        "body" : "I think this may not be the best solution.\r\nTF test environments, for example, has a lot of ivybridge and sandybridge machines. This option will disable running on those machines.\r\n\r\nShould we lock to those instead of broadwell?",
        "createdAt" : "2017-12-22T22:14:19Z",
        "updatedAt" : "2017-12-22T22:14:24Z",
        "lastEditedBy" : "28fabc34-a1ac-4aba-988b-9c9e03232122",
        "tags" : [
        ]
      },
      {
        "id" : "625dd105-3e8c-400a-82ec-32b163e09cce",
        "parentId" : "0c41d250-b168-42b3-ba33-613bddfe192e",
        "authorId" : "f8fdffda-0f78-4047-80eb-39d50943d149",
        "body" : "The problem here is that Eigen has an issue with AVX512 that we haven't resolved yet. Once that issue has been fixed, we'll changed this back to native so that the container can be built on any architecture. ",
        "createdAt" : "2018-01-02T17:52:24Z",
        "updatedAt" : "2018-01-02T17:52:24Z",
        "lastEditedBy" : "f8fdffda-0f78-4047-80eb-39d50943d149",
        "tags" : [
        ]
      },
      {
        "id" : "6910d0dc-1a1d-487c-a433-060a354cc0ef",
        "parentId" : "0c41d250-b168-42b3-ba33-613bddfe192e",
        "authorId" : "28fabc34-a1ac-4aba-988b-9c9e03232122",
        "body" : "Just to confirm then, we are OK with this not working on ivy bridge machines?\r\n\r\nMy understanding was once we have MKL, we can actually build the rest of the binary with as little optimizations as possible. So even disabling AVX here should not deliver a big performance hit to us?\r\nIn other words, as is we wont be able to reliably run this dockerfile in TF official CI because of our ivy bridge machines. Otherwise I am ok with the rest of the change.",
        "createdAt" : "2018-01-02T18:04:35Z",
        "updatedAt" : "2018-01-02T18:04:36Z",
        "lastEditedBy" : "28fabc34-a1ac-4aba-988b-9c9e03232122",
        "tags" : [
        ]
      }
    ],
    "commit" : "e9c81f40a521373f1fae79dbf898cf33f4682c89",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +55,59 @@    bazel build --config=mkl \\\n                --config=\"opt\" \\\n                --copt=\"-march=broadwell\" \\\n                --copt=\"-O3\" \\\n                //tensorflow/tools/pip_package:build_pip_package && \\"
  },
  {
    "id" : "de28f295-c7ef-4086-8e1c-17cdf7c9e605",
    "prId" : 14468,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/14468#pullrequestreview-78217409",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a09ad485-e9e3-409c-b01b-d03a7ac009a9",
        "parentId" : null,
        "authorId" : "f6dee183-85d3-4087-a77c-340c099b6887",
        "body" : "besides the point a bit, but can we re-use some existing Dockerfile and FROM it to avoid duplication?",
        "createdAt" : "2017-11-11T21:42:21Z",
        "updatedAt" : "2017-11-21T17:26:52Z",
        "lastEditedBy" : "f6dee183-85d3-4087-a77c-340c099b6887",
        "tags" : [
        ]
      },
      {
        "id" : "f1f4b7f0-f2c7-4866-8ac7-7434aa780b19",
        "parentId" : "a09ad485-e9e3-409c-b01b-d03a7ac009a9",
        "authorId" : "f8fdffda-0f78-4047-80eb-39d50943d149",
        "body" : "Suggestions?",
        "createdAt" : "2017-11-14T23:37:45Z",
        "updatedAt" : "2017-11-21T17:26:52Z",
        "lastEditedBy" : "f8fdffda-0f78-4047-80eb-39d50943d149",
        "tags" : [
        ]
      },
      {
        "id" : "5da993c7-c0ec-418f-90fc-ff3ff833b610",
        "parentId" : "a09ad485-e9e3-409c-b01b-d03a7ac009a9",
        "authorId" : "f6dee183-85d3-4087-a77c-340c099b6887",
        "body" : "Well if you use FROM original tensorflow image and just replace tensorflow libs with built ones you'll keep API of original container with significantly less code",
        "createdAt" : "2017-11-15T04:41:10Z",
        "updatedAt" : "2017-11-21T17:26:52Z",
        "lastEditedBy" : "f6dee183-85d3-4087-a77c-340c099b6887",
        "tags" : [
        ]
      },
      {
        "id" : "343783cf-7f75-47ca-8bbb-f1c10dc3ce47",
        "parentId" : "a09ad485-e9e3-409c-b01b-d03a7ac009a9",
        "authorId" : "28fabc34-a1ac-4aba-988b-9c9e03232122",
        "body" : "I think this may need a larger refactoring, I would like to move to something like this for all TF containers eventually, but I think it is outside the scope of this change.",
        "createdAt" : "2017-11-16T22:00:42Z",
        "updatedAt" : "2017-11-21T17:26:52Z",
        "lastEditedBy" : "28fabc34-a1ac-4aba-988b-9c9e03232122",
        "tags" : [
        ]
      },
      {
        "id" : "e13cd8fc-c830-4897-a239-93793d018074",
        "parentId" : "a09ad485-e9e3-409c-b01b-d03a7ac009a9",
        "authorId" : "f8fdffda-0f78-4047-80eb-39d50943d149",
        "body" : "@gunan Do you want me to make a change here? It's not clear from your comment.",
        "createdAt" : "2017-11-21T16:43:30Z",
        "updatedAt" : "2017-11-21T17:26:52Z",
        "lastEditedBy" : "f8fdffda-0f78-4047-80eb-39d50943d149",
        "tags" : [
        ]
      },
      {
        "id" : "867a12d2-32ae-46e1-ac7c-8f030f12b47f",
        "parentId" : "a09ad485-e9e3-409c-b01b-d03a7ac009a9",
        "authorId" : "28fabc34-a1ac-4aba-988b-9c9e03232122",
        "body" : "No need for change. This is something I will need to look at.",
        "createdAt" : "2017-11-21T18:42:32Z",
        "updatedAt" : "2017-11-21T18:42:36Z",
        "lastEditedBy" : "28fabc34-a1ac-4aba-988b-9c9e03232122",
        "tags" : [
        ]
      }
    ],
    "commit" : "526802e472b371c8e68f4fdf97bfe41b97c84801",
    "line" : 79,
    "diffHunk" : "@@ -1,1 +77,81 @@| Docker container running Ubuntu\t\t\t\t\\n\\\n| with TensorFlow ${TF_BRANCH} optimized for CPU\t\t\\n\\\n| with Intel(R) MKL\t\t\t\t\t\t\\n\\\n|\t\t\t\t\t\t\t\t\\n\\\n||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||\\n\\"
  },
  {
    "id" : "99dbc429-40ef-4172-9fb9-459ccd378911",
    "prId" : 14468,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/14468#pullrequestreview-78228679",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f5250f8d-2025-4046-a8f5-4843212ff627",
        "parentId" : null,
        "authorId" : "28fabc34-a1ac-4aba-988b-9c9e03232122",
        "body" : "I just noticed. our devel images may already have TF checked out in this location. Could you make sure this wont break? Just running docker build once with this dockerfile should be sufficient.",
        "createdAt" : "2017-11-21T18:42:13Z",
        "updatedAt" : "2017-11-21T18:42:36Z",
        "lastEditedBy" : "28fabc34-a1ac-4aba-988b-9c9e03232122",
        "tags" : [
        ]
      },
      {
        "id" : "0d9b2524-2328-41f5-bdf3-f25ad27d0abf",
        "parentId" : "f5250f8d-2025-4046-a8f5-4843212ff627",
        "authorId" : "f8fdffda-0f78-4047-80eb-39d50943d149",
        "body" : "Line 23-24 removes the /tensorflow directory from the parent devel image. It doesn't break. I've been rebuilding --no-cache with each change to make sure.",
        "createdAt" : "2017-11-21T19:19:35Z",
        "updatedAt" : "2017-11-21T19:19:35Z",
        "lastEditedBy" : "f8fdffda-0f78-4047-80eb-39d50943d149",
        "tags" : [
        ]
      }
    ],
    "commit" : "526802e472b371c8e68f4fdf97bfe41b97c84801",
    "line" : 28,
    "diffHunk" : "@@ -1,1 +26,30 @@    cd tensorflow && \\\n    git checkout ${TF_BRANCH}\nWORKDIR /tensorflow\n\n# Configure the build for CPU with MKL by accepting default build options and"
  }
]