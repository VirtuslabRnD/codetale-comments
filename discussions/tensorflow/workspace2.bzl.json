[
  {
    "id" : "06efbd66-bf26-437d-8721-a6f91ecd5a57",
    "prId" : 47775,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/47775#pullrequestreview-618792629",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "de8e64d6-9a57-469a-adf6-1ef4e0f241fc",
        "parentId" : null,
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "The main oneDNN repo is also at v2.1 as of last Wednesday. \r\nhttps://github.com/tensorflow/tensorflow/blob/f66c3fd05c7e212335a8d88f717a40ce8855222a/tensorflow/workspace2.bzl#L169-L173\r\n\r\nBut we might upgrade it one more time before the TF 2.5 branch cut. So I'm okay with having a separate repo for `mkl_dnn_acl_compatible` for now. Could you please add a TODO to merge this with the main oneDNN repo after the branch cut? Thank you!",
        "createdAt" : "2021-03-22T20:56:08Z",
        "updatedAt" : "2021-03-24T19:59:25Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      },
      {
        "id" : "314f8ee5-c2ba-4f7b-b5aa-36beb822dcd5",
        "parentId" : "de8e64d6-9a57-469a-adf6-1ef4e0f241fc",
        "authorId" : "5a8329aa-95e3-47a3-9af8-1712c35acf20",
        "body" : "@penpornk, many thanks for the comments. I can also rebase this PR on the current TF master, what do you think about it?",
        "createdAt" : "2021-03-22T23:08:02Z",
        "updatedAt" : "2021-03-24T19:59:25Z",
        "lastEditedBy" : "5a8329aa-95e3-47a3-9af8-1712c35acf20",
        "tags" : [
        ]
      },
      {
        "id" : "a628c57f-c3b3-4ef5-9559-973e1a4cb42f",
        "parentId" : "de8e64d6-9a57-469a-adf6-1ef4e0f241fc",
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "@alenik01 Thank you for the quick reply!\r\nIf we upgrade `mkl_dnn_v1` to newer than v2.1, would that still be fine with your code?",
        "createdAt" : "2021-03-22T23:13:35Z",
        "updatedAt" : "2021-03-24T19:59:25Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      },
      {
        "id" : "1f9482a8-a3fa-42e5-af5a-4ded11ad9916",
        "parentId" : "de8e64d6-9a57-469a-adf6-1ef4e0f241fc",
        "authorId" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "body" : "Actually let's keep this separate repo (`mkl_dnn_acl_compatible`) for now, to be safe. Since the branch cut deadline is in 3 days. We should aim to get this PR in by today or tomorrow. (For any PR, there is a chance it breaks nightly tests and gets reverted the next day.)",
        "createdAt" : "2021-03-22T23:45:09Z",
        "updatedAt" : "2021-03-24T19:59:25Z",
        "lastEditedBy" : "72acf7f0-6473-4b57-a71f-2a44410818c5",
        "tags" : [
        ]
      },
      {
        "id" : "155786ae-923a-47a3-986f-fe31d243ae4b",
        "parentId" : "de8e64d6-9a57-469a-adf6-1ef4e0f241fc",
        "authorId" : "5a8329aa-95e3-47a3-9af8-1712c35acf20",
        "body" : "@penpornk,\r\n>If we upgrade mkl_dnn_v1 to newer than v2.1, would that still be fine with your code?\r\n\r\nyes, it will be fine. v2.2 is also a bit faster on AArch64.",
        "createdAt" : "2021-03-23T16:14:09Z",
        "updatedAt" : "2021-03-24T19:59:25Z",
        "lastEditedBy" : "5a8329aa-95e3-47a3-9af8-1712c35acf20",
        "tags" : [
        ]
      }
    ],
    "commit" : "10f7d23b9c8cfa4362df05028317d8bae59f9d3a",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +194,198 @@       build_file = \"//third_party/mkl_dnn:mkldnn_acl.BUILD\",\n       sha256 = \"5f7fd92e2d0bf83580656695d4404e2cd1390ecad36496fd8ba10b5adc905f70\",\n       strip_prefix = \"oneDNN-2.1\",\n       urls = [\n            \"https://storage.googleapis.com/mirror.tensorflow.org/github.com/oneapi-src/oneDNN/archive/v2.1.tar.gz\","
  },
  {
    "id" : "ab76971d-f9c5-403e-879a-7c0e20d59c6a",
    "prId" : 46965,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/46965#pullrequestreview-601171249",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7a64a681-540b-4feb-a5df-e958439a73f7",
        "parentId" : null,
        "authorId" : "2861a495-42d5-4ac3-b543-23cf14c0a980",
        "body" : "How hard would it be to remove the dependency on this library and use the cuDNN C interface directly?",
        "createdAt" : "2021-02-27T08:35:06Z",
        "updatedAt" : "2021-03-17T02:37:34Z",
        "lastEditedBy" : "2861a495-42d5-4ac3-b543-23cf14c0a980",
        "tags" : [
        ]
      },
      {
        "id" : "cf61630c-d063-4929-b1c6-49bcca4f357f",
        "parentId" : "7a64a681-540b-4feb-a5df-e958439a73f7",
        "authorId" : "8df6b2a7-a5b8-4771-8241-49fd7ff5a2aa",
        "body" : "Directly using the C interface (i.e. the CUDNN backend APIs) will introduce many many more lines of code, since we need to explicitly handle the creation of the newly introduced descriptors: ops, opGraphs, engines, enginePlans, etc. Also, for each of them, there are bunch of attributes that we need to set one by one by using backend API calls. Besides, we have to be very careful about when we need to reclaim those objects, meaning for each object, we also need to put it in a unique_ptr with a dedicated deleter.",
        "createdAt" : "2021-03-01T19:37:18Z",
        "updatedAt" : "2021-03-17T02:37:34Z",
        "lastEditedBy" : "8df6b2a7-a5b8-4771-8241-49fd7ff5a2aa",
        "tags" : [
        ]
      },
      {
        "id" : "100a1f40-e226-4bbd-a3dd-2a8ed2cc6081",
        "parentId" : "7a64a681-540b-4feb-a5df-e958439a73f7",
        "authorId" : "db119d71-0485-413b-9ea8-fd044b814e31",
        "body" : "My understanding is that if we don't use this dependency, we have to invent it by ourselves. StreamExecutor has a lot of RAII wrappers for cuDNN structs. As long as the dependency is header-only, we can depend on it as-if we invent it in the repository (no ABI issues).",
        "createdAt" : "2021-03-01T21:13:50Z",
        "updatedAt" : "2021-03-17T02:37:34Z",
        "lastEditedBy" : "db119d71-0485-413b-9ea8-fd044b814e31",
        "tags" : [
        ]
      }
    ],
    "commit" : "6838420da8ce4672d23d497c28932528d022fe2a",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +166,170 @@        ],\n    )\n\n    tf_http_archive(\n        name = \"mkl_dnn\","
  }
]