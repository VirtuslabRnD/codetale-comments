[
  {
    "id" : "bcabf381-fdf4-4097-a9b5-232857637c99",
    "prId" : 28212,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/28212#pullrequestreview-232155687",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b44d11ec-7b19-4b0d-afbc-126af90ee37c",
        "parentId" : null,
        "authorId" : "17c7ac59-5bd2-4868-890a-c8756afed506",
        "body" : "is this status leaked?",
        "createdAt" : "2019-04-30T00:29:55Z",
        "updatedAt" : "2019-05-01T20:29:38Z",
        "lastEditedBy" : "17c7ac59-5bd2-4868-890a-c8756afed506",
        "tags" : [
        ]
      },
      {
        "id" : "94e22a7d-403c-45ba-abb3-7d393436d211",
        "parentId" : "b44d11ec-7b19-4b0d-afbc-126af90ee37c",
        "authorId" : "44bac885-95e2-45aa-ac3f-da1e724327a4",
        "body" : "Good catch, fixing it.",
        "createdAt" : "2019-04-30T13:04:02Z",
        "updatedAt" : "2019-05-01T20:29:38Z",
        "lastEditedBy" : "44bac885-95e2-45aa-ac3f-da1e724327a4",
        "tags" : [
        ]
      }
    ],
    "commit" : "8f72487e0c75fad863349604d5008b51b7e5e152",
    "line" : 118,
    "diffHunk" : "@@ -1,1 +116,120 @@  if (op == nullptr) return;\n  const char* cname = env->GetStringUTFChars(device_name, nullptr);\n  TF_Status* status = TF_NewStatus();\n  TFE_OpSetDevice(op, cname, status);\n  throwExceptionIfNotOK(env, status);"
  },
  {
    "id" : "4f42c0ce-b903-4329-9751-ac299a526d64",
    "prId" : 28212,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/28212#pullrequestreview-231959428",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7e933dc0-9ea7-4059-84fd-115db4c22714",
        "parentId" : null,
        "authorId" : "17c7ac59-5bd2-4868-890a-c8756afed506",
        "body" : "status return value not checked?",
        "createdAt" : "2019-04-30T00:30:10Z",
        "updatedAt" : "2019-05-01T20:29:38Z",
        "lastEditedBy" : "17c7ac59-5bd2-4868-890a-c8756afed506",
        "tags" : [
        ]
      }
    ],
    "commit" : "8f72487e0c75fad863349604d5008b51b7e5e152",
    "line" : 122,
    "diffHunk" : "@@ -1,1 +120,124 @@  throwExceptionIfNotOK(env, status);\n  TF_DeleteStatus(status);\n  env->ReleaseStringUTFChars(device_name, cname);\n}\n"
  },
  {
    "id" : "8c732d8d-842c-474a-815b-ce2547ddc74b",
    "prId" : 28212,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/28212#pullrequestreview-232163626",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4bb6e06b-08e2-461a-9165-c091c4cca842",
        "parentId" : null,
        "authorId" : "17c7ac59-5bd2-4868-890a-c8756afed506",
        "body" : "should we clean up and return if requireTensorHandle returns nullptr? Maybe this loop will call throwException multiple times. I'm not sure what the semantics are if we do that.",
        "createdAt" : "2019-04-30T00:32:03Z",
        "updatedAt" : "2019-05-01T20:29:38Z",
        "lastEditedBy" : "17c7ac59-5bd2-4868-890a-c8756afed506",
        "tags" : [
        ]
      },
      {
        "id" : "6eac6ac6-bcf3-4dc0-bcf8-bb35f0877bac",
        "parentId" : "4bb6e06b-08e2-461a-9165-c091c4cca842",
        "authorId" : "44bac885-95e2-45aa-ac3f-da1e724327a4",
        "body" : "I think it would be wiser to handle it, yes. I'll make the change.",
        "createdAt" : "2019-04-30T13:19:15Z",
        "updatedAt" : "2019-05-01T20:29:38Z",
        "lastEditedBy" : "44bac885-95e2-45aa-ac3f-da1e724327a4",
        "tags" : [
        ]
      }
    ],
    "commit" : "8f72487e0c75fad863349604d5008b51b7e5e152",
    "line" : 146,
    "diffHunk" : "@@ -1,1 +144,148 @@      new TFE_TensorHandle* [num_inputs]);\n  for (int i = 0; i < num_inputs; ++i) {\n    tensor_handles[i] = requireTensorHandle(env, cinput_handles[i]);\n    if (tensor_handles[i] == nullptr) {\n      env->ReleaseLongArrayElements(input_handles, cinput_handles, JNI_ABORT);"
  },
  {
    "id" : "2dba935c-893d-47a8-89e1-21ff8074598d",
    "prId" : 28212,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/28212#pullrequestreview-232160151",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6675de59-64ae-413f-b72a-f42529fb0b32",
        "parentId" : null,
        "authorId" : "17c7ac59-5bd2-4868-890a-c8756afed506",
        "body" : "what's the deal with the left shift?",
        "createdAt" : "2019-04-30T00:34:22Z",
        "updatedAt" : "2019-05-01T20:29:38Z",
        "lastEditedBy" : "17c7ac59-5bd2-4868-890a-c8756afed506",
        "tags" : [
        ]
      },
      {
        "id" : "45d61815-4e32-440d-bb45-d995508f4b8e",
        "parentId" : "6675de59-64ae-413f-b72a-f42529fb0b32",
        "authorId" : "44bac885-95e2-45aa-ac3f-da1e724327a4",
        "body" : "Ah, beautiful JNI code... that basically a optimized way to copy `shapes_length` 64-bits values from `shapes_elems` to `cshapes` (i << 3 == i * 8 bytes) ",
        "createdAt" : "2019-04-30T13:12:44Z",
        "updatedAt" : "2019-05-01T20:29:38Z",
        "lastEditedBy" : "44bac885-95e2-45aa-ac3f-da1e724327a4",
        "tags" : [
        ]
      }
    ],
    "commit" : "8f72487e0c75fad863349604d5008b51b7e5e152",
    "line" : 309,
    "diffHunk" : "@@ -1,1 +307,311 @@    jlong* shapes_elems =\n        static_cast<jlong*>(env->GetPrimitiveArrayCritical(shapes, nullptr));\n    std::memcpy(cshapes.get(), shapes_elems, shapes_length << 3);\n    env->ReleasePrimitiveArrayCritical(shapes, shapes_elems, JNI_ABORT);\n    int64_t* cshapes_ptr = cshapes.get();"
  },
  {
    "id" : "71353bba-727b-41e3-8b27-722ef0f21688",
    "prId" : 28212,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/28212#pullrequestreview-232161473",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "85b830a0-ed7b-403f-8a59-bd80d6c87652",
        "parentId" : null,
        "authorId" : "17c7ac59-5bd2-4868-890a-c8756afed506",
        "body" : "status leaked?",
        "createdAt" : "2019-04-30T00:35:21Z",
        "updatedAt" : "2019-05-01T20:29:38Z",
        "lastEditedBy" : "17c7ac59-5bd2-4868-890a-c8756afed506",
        "tags" : [
        ]
      },
      {
        "id" : "317a834f-e046-4c04-a64a-bf08c54401b4",
        "parentId" : "85b830a0-ed7b-403f-8a59-bd80d6c87652",
        "authorId" : "44bac885-95e2-45aa-ac3f-da1e724327a4",
        "body" : "good catch again, thanks!",
        "createdAt" : "2019-04-30T13:15:23Z",
        "updatedAt" : "2019-05-01T20:29:38Z",
        "lastEditedBy" : "44bac885-95e2-45aa-ac3f-da1e724327a4",
        "tags" : [
        ]
      }
    ],
    "commit" : "8f72487e0c75fad863349604d5008b51b7e5e152",
    "line" : 324,
    "diffHunk" : "@@ -1,1 +322,326 @@  }\n  const char* cname = env->GetStringUTFChars(attr_name, nullptr);\n  TF_Status* status = TF_NewStatus();\n  TFE_OpSetAttrShapeList(op, cname, cdims.get(), cnum_dims.get(),\n                         num_dims_length, status);"
  }
]