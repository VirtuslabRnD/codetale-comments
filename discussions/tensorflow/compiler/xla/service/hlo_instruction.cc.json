[
  {
    "id" : "10d50c1e-e5b5-45d2-864b-49247f0143a8",
    "prId" : 48806,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/48806#pullrequestreview-659212326",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d0fcfe91-3701-4eea-afb5-606d976d36f8",
        "parentId" : null,
        "authorId" : "46fa9a61-9f6f-4ecb-a276-f19713d630df",
        "body" : "This looks not thread safe. Do we need a mutex? (Cf. global map examples in XLA:GPU, e.g. autotuning)",
        "createdAt" : "2021-05-12T21:54:41Z",
        "updatedAt" : "2021-05-12T21:56:17Z",
        "lastEditedBy" : "46fa9a61-9f6f-4ecb-a276-f19713d630df",
        "tags" : [
        ]
      },
      {
        "id" : "34892582-41b6-4c25-86b7-16fd5df0acfd",
        "parentId" : "d0fcfe91-3701-4eea-afb5-606d976d36f8",
        "authorId" : "04e5d7bd-a136-4f0a-9cb0-0e56fd16cec3",
        "body" : "Static local variable initialization is thread safe ([ref to Stackoverflow](https://stackoverflow.com/questions/8102125/is-local-static-variable-initialization-thread-safe-in-c11)).\r\n\r\nSo, if we don't update the map, this piece of code is thread safe. Let me see if I can update the declaration to `static const auto* map`.\r\n\r\nFrankly I just use the coding style in the same file ([here](https://github.com/tensorflow/tensorflow/pull/48806/files#diff-9c21cb9f1d5f87998d7ea54e5f659af355f4d3096f9ba94871f32c112087f75aR3812)).",
        "createdAt" : "2021-05-13T19:34:38Z",
        "updatedAt" : "2021-05-14T00:06:33Z",
        "lastEditedBy" : "04e5d7bd-a136-4f0a-9cb0-0e56fd16cec3",
        "tags" : [
        ]
      }
    ],
    "commit" : "6571b86b4819d1a5e15cbdc85563a122d992920d",
    "line" : 36,
    "diffHunk" : "@@ -1,1 +3842,3846 @@    return map;\n  }();\n  auto found = map->find(absl::AsciiStrToLower(name));\n  if (found == map->end()) {\n    return InvalidArgument(\"Unknown schedule\");"
  }
]