[
  {
    "id" : "0086d93c-8be9-4788-b0ed-b35dcaf5b954",
    "prId" : 28399,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/28399#pullrequestreview-244922523",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ee79042b-2d33-4920-81bb-24fb1540edae",
        "parentId" : null,
        "authorId" : "3c76b64e-5fbc-43db-843d-8c0f62dadcab",
        "body" : "Please add a test for the EXPECT_TRUE case too.",
        "createdAt" : "2019-06-03T15:08:01Z",
        "updatedAt" : "2019-06-04T04:43:10Z",
        "lastEditedBy" : "3c76b64e-5fbc-43db-843d-8c0f62dadcab",
        "tags" : [
        ]
      }
    ],
    "commit" : "be4cdca87894da1e2ade25bd120183274228f295",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +644,648 @@}\n\nTEST_F(GpuFusibleTest, IsFusibleAsMultiOutputFusionRoot) {\n  auto module = ParseHloString(R\"(\n    HloModule test_module"
  },
  {
    "id" : "0f89b63e-84a3-4da3-98c3-d965562c2adf",
    "prId" : 28399,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/28399#pullrequestreview-245784477",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bfcfde7d-1b7c-4199-b217-ec29131e6ce7",
        "parentId" : null,
        "authorId" : "3c76b64e-5fbc-43db-843d-8c0f62dadcab",
        "body" : "This constant is scalar but it's not fused either. Maybe I'm misunderstanding the test?",
        "createdAt" : "2019-06-03T15:22:30Z",
        "updatedAt" : "2019-06-04T04:43:10Z",
        "lastEditedBy" : "3c76b64e-5fbc-43db-843d-8c0f62dadcab",
        "tags" : [
        ]
      },
      {
        "id" : "104b86b2-ee97-4fb9-a675-cc8664166418",
        "parentId" : "bfcfde7d-1b7c-4199-b217-ec29131e6ce7",
        "authorId" : "18176ba4-227a-40df-8c5a-3de2ab65878a",
        "body" : "This is because of the following check in gpu_fusible.cc:\r\n if (producer.opcode() == HloOpcode::kConstant) {\r\n    return ShapeUtil::IsEffectiveScalar(producer.shape()) &&\r\n           consumer.opcode() == HloOpcode::kFusion;\r\n  }\r\n\r\n",
        "createdAt" : "2019-06-04T04:41:46Z",
        "updatedAt" : "2019-06-04T04:43:10Z",
        "lastEditedBy" : "18176ba4-227a-40df-8c5a-3de2ab65878a",
        "tags" : [
        ]
      },
      {
        "id" : "dcb488d8-d401-4892-8560-965b5b874f1d",
        "parentId" : "bfcfde7d-1b7c-4199-b217-ec29131e6ce7",
        "authorId" : "3c76b64e-5fbc-43db-843d-8c0f62dadcab",
        "body" : "Right, that makes sense. Please add a comment to the HLO since this isn't completely obvious.",
        "createdAt" : "2019-06-04T13:49:29Z",
        "updatedAt" : "2019-06-04T13:51:10Z",
        "lastEditedBy" : "3c76b64e-5fbc-43db-843d-8c0f62dadcab",
        "tags" : [
        ]
      },
      {
        "id" : "c6e8fa85-a80f-402f-8161-1addb419fdff",
        "parentId" : "bfcfde7d-1b7c-4199-b217-ec29131e6ce7",
        "authorId" : "18176ba4-227a-40df-8c5a-3de2ab65878a",
        "body" : "There is a comment in the test:\r\n  // Do not fuse if producer is a non-scalar constant or *consumer is non-fusion node*.\r\n",
        "createdAt" : "2019-06-05T02:23:15Z",
        "updatedAt" : "2019-06-05T02:23:15Z",
        "lastEditedBy" : "18176ba4-227a-40df-8c5a-3de2ab65878a",
        "tags" : [
        ]
      }
    ],
    "commit" : "be4cdca87894da1e2ade25bd120183274228f295",
    "line" : 209,
    "diffHunk" : "@@ -1,1 +849,853 @@      constant = f32[16] constant({0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15})\n      broadcast = f32[16,16,16,16]{3,2,1,0} broadcast(constant), dimensions={0}\n      constant.1 = f32[] constant(0)\n      reduce = f32[] reduce(broadcast, constant.1), dimensions={0,1,2,3},\n                                                         to_apply=add"
  }
]