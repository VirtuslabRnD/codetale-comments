[
  {
    "id" : "cda77a23-c343-49d0-9a0c-8daec38d046d",
    "prId" : 35572,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/35572#pullrequestreview-344240189",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "caea7de0-cc64-4839-8c07-aee9c1c7974f",
        "parentId" : null,
        "authorId" : "46fa9a61-9f6f-4ecb-a276-f19713d630df",
        "body" : "Could we just optionally match amdgpu_kernel using a regexp instead of duplication?",
        "createdAt" : "2020-01-15T17:29:20Z",
        "updatedAt" : "2020-01-16T03:01:36Z",
        "lastEditedBy" : "46fa9a61-9f6f-4ecb-a276-f19713d630df",
        "tags" : [
        ]
      },
      {
        "id" : "2abe0421-aae7-4396-9234-a6750cfdadb4",
        "parentId" : "caea7de0-cc64-4839-8c07-aee9c1c7974f",
        "authorId" : "46fa9a61-9f6f-4ecb-a276-f19713d630df",
        "body" : "Same applies below.",
        "createdAt" : "2020-01-15T17:29:36Z",
        "updatedAt" : "2020-01-16T03:01:36Z",
        "lastEditedBy" : "46fa9a61-9f6f-4ecb-a276-f19713d630df",
        "tags" : [
        ]
      },
      {
        "id" : "9d1d20c4-9838-4942-858d-4555d4cb852f",
        "parentId" : "caea7de0-cc64-4839-8c07-aee9c1c7974f",
        "authorId" : "80b3505d-f76d-48ab-b8fe-fe7925204b98",
        "body" : "this may not be viable.\r\n\r\nWe want to check for presence of `amdgpu_kernel` in ROCm mode, so having a regexp that optionally matches `amdgpu_kernel` will not work, since it will pass even if `amdgpu_kernel` is not present!\r\n\r\ncan we leave this as is?",
        "createdAt" : "2020-01-16T01:55:50Z",
        "updatedAt" : "2020-01-16T03:01:36Z",
        "lastEditedBy" : "80b3505d-f76d-48ab-b8fe-fe7925204b98",
        "tags" : [
        ]
      },
      {
        "id" : "5e3997df-4a01-4833-a650-a8947565899f",
        "parentId" : "caea7de0-cc64-4839-8c07-aee9c1c7974f",
        "authorId" : "46fa9a61-9f6f-4ecb-a276-f19713d630df",
        "body" : "OK sure, in general we have to weigh in the risk of one of the branches getting stale (recall that currently we do not run ROCM tests internally, so it's possible that someone would update the nvidia branch, but not the ROCM branch) vs. the exact pattern you want to match. So here I would say that matching `amdgpu_kernel` is not important enough to have two branches, but since the pattern is small I don't care that much either.",
        "createdAt" : "2020-01-16T21:44:56Z",
        "updatedAt" : "2020-01-16T21:44:56Z",
        "lastEditedBy" : "46fa9a61-9f6f-4ecb-a276-f19713d630df",
        "tags" : [
        ]
      },
      {
        "id" : "9041b4e5-766a-4079-9b4e-b87de7c38fee",
        "parentId" : "caea7de0-cc64-4839-8c07-aee9c1c7974f",
        "authorId" : "80b3505d-f76d-48ab-b8fe-fe7925204b98",
        "body" : "@whchung , what say you?\r\n\r\nIf you are okay with it, I can push out new PR which makes the check for `amdgpu_kernel` optional?",
        "createdAt" : "2020-01-16T21:49:57Z",
        "updatedAt" : "2020-01-16T21:49:58Z",
        "lastEditedBy" : "80b3505d-f76d-48ab-b8fe-fe7925204b98",
        "tags" : [
        ]
      }
    ],
    "commit" : "3e4a3d5c83be06c05a0522edd5c5690dda5efa3b",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +65,69 @@          .ValueOrDie();\n  auto expected_ir = is_built_with_rocm_ ? R\"(\n; CHECK-LABEL: define amdgpu_kernel void @fusion\n; CHECK: slice0\n; CHECK: }"
  },
  {
    "id" : "67cd6c60-e179-44d7-bbf8-94534a01f01c",
    "prId" : 34880,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/34880#pullrequestreview-329030172",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "dabfde78-e763-421b-9f15-087406a924b2",
        "parentId" : null,
        "authorId" : "46fa9a61-9f6f-4ecb-a276-f19713d630df",
        "body" : "These are execution and HLO tests.\r\nGiven that this change affects codegen function, could we also have a FileCheck-like test for the produced IR?",
        "createdAt" : "2019-12-09T16:31:59Z",
        "updatedAt" : "2019-12-12T19:13:32Z",
        "lastEditedBy" : "46fa9a61-9f6f-4ecb-a276-f19713d630df",
        "tags" : [
        ]
      }
    ],
    "commit" : "f6af4a54a1ecc1db750084781b0e409eddead606",
    "line" : 28,
    "diffHunk" : "@@ -1,1 +26,30 @@namespace {\n\nclass GpuSliceInputFusionTest : public GpuCodegenTest {\n protected:\n  GpuSliceInputFusionTest() {}"
  },
  {
    "id" : "24d0f4c3-0e2b-42fb-becc-994e0be8eccb",
    "prId" : 34880,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/34880#pullrequestreview-330196956",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a97890b6-7b56-4ce0-aab4-f4a9d86c677c",
        "parentId" : null,
        "authorId" : "46fa9a61-9f6f-4ecb-a276-f19713d630df",
        "body" : "Could we have a slightly more involved codegen test? This commit adds quite a lot of codegen logic.",
        "createdAt" : "2019-12-09T16:34:10Z",
        "updatedAt" : "2019-12-12T19:13:32Z",
        "lastEditedBy" : "46fa9a61-9f6f-4ecb-a276-f19713d630df",
        "tags" : [
        ]
      },
      {
        "id" : "952c13b9-03cb-4347-a48a-cfcffba5fa3f",
        "parentId" : "a97890b6-7b56-4ce0-aab4-f4a9d86c677c",
        "authorId" : "04e5d7bd-a136-4f0a-9cb0-0e56fd16cec3",
        "body" : "Do you mean to add a more involved test pattern or you feel the IR CHECK is not enough?",
        "createdAt" : "2019-12-10T00:49:25Z",
        "updatedAt" : "2019-12-12T19:13:32Z",
        "lastEditedBy" : "04e5d7bd-a136-4f0a-9cb0-0e56fd16cec3",
        "tags" : [
        ]
      },
      {
        "id" : "9416a4d6-b497-4d27-ae55-5b4a5b770376",
        "parentId" : "a97890b6-7b56-4ce0-aab4-f4a9d86c677c",
        "authorId" : "46fa9a61-9f6f-4ecb-a276-f19713d630df",
        "body" : "Yes, a more involved pattern would be nice.",
        "createdAt" : "2019-12-10T18:44:24Z",
        "updatedAt" : "2019-12-12T19:13:32Z",
        "lastEditedBy" : "46fa9a61-9f6f-4ecb-a276-f19713d630df",
        "tags" : [
        ]
      },
      {
        "id" : "224b8422-a23f-478c-96c6-fa1fb6ed4cc7",
        "parentId" : "a97890b6-7b56-4ce0-aab4-f4a9d86c677c",
        "authorId" : "04e5d7bd-a136-4f0a-9cb0-0e56fd16cec3",
        "body" : "I gave some more contexts in the main discussion thread. I will wait for your response there.",
        "createdAt" : "2019-12-10T22:48:23Z",
        "updatedAt" : "2019-12-12T19:13:32Z",
        "lastEditedBy" : "04e5d7bd-a136-4f0a-9cb0-0e56fd16cec3",
        "tags" : [
        ]
      }
    ],
    "commit" : "f6af4a54a1ecc1db750084781b0e409eddead606",
    "line" : 68,
    "diffHunk" : "@@ -1,1 +66,70 @@  CompileAndVerifyIr(std::move(hlo_module),\n                     R\"(\n; CHECK-LABEL: define void @fusion\n; CHECK: slice0\n; CHECK: }"
  }
]