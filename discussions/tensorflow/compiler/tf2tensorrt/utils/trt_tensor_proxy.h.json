[
  {
    "id" : "02b795d8-c6fd-4f41-b690-a726f94fdd3e",
    "prId" : 48917,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/48917#pullrequestreview-687754096",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2929d4bf-734c-471d-8e3d-b53e94183ef9",
        "parentId" : null,
        "authorId" : "90c49754-7917-45e3-8dd2-8e09527f3d4c",
        "body" : "I think we don't need this class, instead, just use ITensorProxy which is already a wrapper of a pointer.",
        "createdAt" : "2021-05-10T22:41:12Z",
        "updatedAt" : "2021-05-10T22:42:30Z",
        "lastEditedBy" : "90c49754-7917-45e3-8dd2-8e09527f3d4c",
        "tags" : [
        ]
      },
      {
        "id" : "dcf370e3-a6cf-4833-a4a3-450e0bd33259",
        "parentId" : "2929d4bf-734c-471d-8e3d-b53e94183ef9",
        "authorId" : "53c3ad32-5f8d-4187-bb81-3faeb47b61f3",
        "body" : "I like this idea as well, I'm putting together those changes for some tests",
        "createdAt" : "2021-06-04T20:29:47Z",
        "updatedAt" : "2021-06-04T20:29:48Z",
        "lastEditedBy" : "53c3ad32-5f8d-4187-bb81-3faeb47b61f3",
        "tags" : [
        ]
      },
      {
        "id" : "eec3b1c8-7cb8-412e-8965-dca9e63117bb",
        "parentId" : "2929d4bf-734c-471d-8e3d-b53e94183ef9",
        "authorId" : "53c3ad32-5f8d-4187-bb81-3faeb47b61f3",
        "body" : "These changes are scheduled for the follow up PR mentioned here: https://github.com/tensorflow/tensorflow/pull/48917#issuecomment-864244135",
        "createdAt" : "2021-06-18T22:25:09Z",
        "updatedAt" : "2021-06-18T22:25:09Z",
        "lastEditedBy" : "53c3ad32-5f8d-4187-bb81-3faeb47b61f3",
        "tags" : [
        ]
      }
    ],
    "commit" : "b3a98336d0dea159ea292206f9d254f04581759b",
    "line" : 421,
    "diffHunk" : "@@ -1,1 +419,423 @@};\n\nclass ITensorProxyPtr\n{\npublic:"
  },
  {
    "id" : "75e363cc-dcba-4199-ad5a-8e8a2357caa9",
    "prId" : 48917,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/48917#pullrequestreview-687754004",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "86362aec-3e56-4959-a19e-ac7658c4f455",
        "parentId" : null,
        "authorId" : "90c49754-7917-45e3-8dd2-8e09527f3d4c",
        "body" : "I think we should change this to SimpleITensor* simple_tensor_, and let TRT_TensorOrWeights owns the object.",
        "createdAt" : "2021-05-10T23:13:56Z",
        "updatedAt" : "2021-05-10T23:13:59Z",
        "lastEditedBy" : "90c49754-7917-45e3-8dd2-8e09527f3d4c",
        "tags" : [
        ]
      },
      {
        "id" : "11703d4f-01d7-44c6-bfee-14b1bf7c249b",
        "parentId" : "86362aec-3e56-4959-a19e-ac7658c4f455",
        "authorId" : "53c3ad32-5f8d-4187-bb81-3faeb47b61f3",
        "body" : "Now that the former FakeTensor class is now incorporated into SimpleTensor, would it be better to leave the SimpleTensor owned by ITensorProxy for any tests that don't involve the converter's use of TRT_TensorOrWeights?",
        "createdAt" : "2021-06-14T18:23:51Z",
        "updatedAt" : "2021-06-14T18:23:51Z",
        "lastEditedBy" : "53c3ad32-5f8d-4187-bb81-3faeb47b61f3",
        "tags" : [
        ]
      },
      {
        "id" : "f20e8312-1dbd-4011-aec8-eaed77c99acb",
        "parentId" : "86362aec-3e56-4959-a19e-ac7658c4f455",
        "authorId" : "90c49754-7917-45e3-8dd2-8e09527f3d4c",
        "body" : "I think the answer depends on how you want to position ITensorProxy. To me, ITensorProxy is to provide a program interface for treating SimpleITensor and nvinfers::ITensor the same way (for TF-TRT validation and conversion). As it is a proxy, it should be copiable. If you agree on this, we should NOT make ITensorProxy owning the object to SimpleITensor. Instead, callers, such as the tests and TRT_TensorOrWeights should create and own SimpleITensor. ",
        "createdAt" : "2021-06-15T22:48:01Z",
        "updatedAt" : "2021-06-15T22:48:01Z",
        "lastEditedBy" : "90c49754-7917-45e3-8dd2-8e09527f3d4c",
        "tags" : [
        ]
      },
      {
        "id" : "a71ce62c-faf8-42c1-9680-dbea5bc55967",
        "parentId" : "86362aec-3e56-4959-a19e-ac7658c4f455",
        "authorId" : "53c3ad32-5f8d-4187-bb81-3faeb47b61f3",
        "body" : "Makes sense; this change is scheduled to be added in the follow up PR mentioned here: https://github.com/tensorflow/tensorflow/pull/48917#issuecomment-864244135",
        "createdAt" : "2021-06-18T22:24:44Z",
        "updatedAt" : "2021-06-18T22:24:44Z",
        "lastEditedBy" : "53c3ad32-5f8d-4187-bb81-3faeb47b61f3",
        "tags" : [
        ]
      }
    ],
    "commit" : "b3a98336d0dea159ea292206f9d254f04581759b",
    "line" : 416,
    "diffHunk" : "@@ -1,1 +414,418 @@  // implementation of ITensor and is used for testing and by TrtNodeValidator\n  //  to validate the graph nodes.\n  std::shared_ptr<SimpleITensor> simple_tensor_ = nullptr;\n\n  TensorType ttype_;"
  },
  {
    "id" : "dcc4f96f-e5d5-4505-b23d-5ee65119d41d",
    "prId" : 48917,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/48917#pullrequestreview-676637855",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "66bebbe2-be6f-4cf0-a7e7-326328235775",
        "parentId" : null,
        "authorId" : "90c49754-7917-45e3-8dd2-8e09527f3d4c",
        "body" : "This code can't be compiled. Please note that the order of the class member initialization needs to be the same as the order of the class member declaration. Similar in a few other constructors here.",
        "createdAt" : "2021-05-14T15:44:32Z",
        "updatedAt" : "2021-05-14T15:45:24Z",
        "lastEditedBy" : "90c49754-7917-45e3-8dd2-8e09527f3d4c",
        "tags" : [
        ]
      },
      {
        "id" : "32c0b3d3-7ce9-4202-b54d-fb9197f65c4a",
        "parentId" : "66bebbe2-be6f-4cf0-a7e7-326328235775",
        "authorId" : "53c3ad32-5f8d-4187-bb81-3faeb47b61f3",
        "body" : "Good catch, I've moved the tensor type to be the last declared member of the class which looks to take care of the issue ",
        "createdAt" : "2021-06-04T20:22:44Z",
        "updatedAt" : "2021-06-04T20:22:44Z",
        "lastEditedBy" : "53c3ad32-5f8d-4187-bb81-3faeb47b61f3",
        "tags" : [
        ]
      }
    ],
    "commit" : "b3a98336d0dea159ea292206f9d254f04581759b",
    "line" : 133,
    "diffHunk" : "@@ -1,1 +131,135 @@  explicit ITensorProxy(nvinfer1::DataType trt_dtype, const nvinfer1::Dims& trt_dims)\n    : simple_tensor_(std::unique_ptr<SimpleITensor>(new SimpleITensor(trt_dtype, trt_dims))),\n      ttype_(TensorType::kSIMPLE) {}\n\n  //! Variants for testing purposes"
  }
]