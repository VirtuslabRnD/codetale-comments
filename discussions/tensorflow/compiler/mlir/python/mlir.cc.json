[
  {
    "id" : "4c5b343e-a205-45dc-863f-b6f7dbb9824e",
    "prId" : 49380,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/49380#pullrequestreview-672746799",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ca3970d3-8212-44bc-b372-8c1aa51f8579",
        "parentId" : null,
        "authorId" : "79b78984-b8e9-4fc7-aa98-92198b35ecca",
        "body" : "Could all this logic be implemented in python instead? Have the API take a python list instead of doing string manipulation in C++?",
        "createdAt" : "2021-05-21T05:58:10Z",
        "updatedAt" : "2021-05-21T05:59:10Z",
        "lastEditedBy" : "79b78984-b8e9-4fc7-aa98-92198b35ecca",
        "tags" : [
        ]
      },
      {
        "id" : "329cda7e-8f84-4b5b-8509-9ce4c3004a37",
        "parentId" : "ca3970d3-8212-44bc-b372-8c1aa51f8579",
        "authorId" : "42d2dc99-41e6-4e5b-b96d-bf3a05c98a65",
        "body" : "For functions like `SavedModelToMlir` the string manipulation is done in cpp.",
        "createdAt" : "2021-05-23T05:45:10Z",
        "updatedAt" : "2021-05-23T05:45:10Z",
        "lastEditedBy" : "42d2dc99-41e6-4e5b-b96d-bf3a05c98a65",
        "tags" : [
        ]
      },
      {
        "id" : "756b90ce-fe15-43c8-afb1-ca8f7c4da859",
        "parentId" : "ca3970d3-8212-44bc-b372-8c1aa51f8579",
        "authorId" : "42d2dc99-41e6-4e5b-b96d-bf3a05c98a65",
        "body" : "I implemented that just to be consistent. I think python implementation would be more compact.",
        "createdAt" : "2021-05-23T05:53:17Z",
        "updatedAt" : "2021-05-23T05:53:36Z",
        "lastEditedBy" : "42d2dc99-41e6-4e5b-b96d-bf3a05c98a65",
        "tags" : [
        ]
      },
      {
        "id" : "4a119bee-33f3-4861-8b49-445d1c153408",
        "parentId" : "ca3970d3-8212-44bc-b372-8c1aa51f8579",
        "authorId" : "79b78984-b8e9-4fc7-aa98-92198b35ecca",
        "body" : " If you agree that the python implementation makes sense here, let's do it.\r\n\r\nWe should likely migrate the `SavedModelToMlir` as well, but that's orthogonal.",
        "createdAt" : "2021-05-23T16:59:31Z",
        "updatedAt" : "2021-05-23T16:59:43Z",
        "lastEditedBy" : "79b78984-b8e9-4fc7-aa98-92198b35ecca",
        "tags" : [
        ]
      },
      {
        "id" : "4f5d41dc-8cac-4d5a-af81-e8afba45fb5e",
        "parentId" : "ca3970d3-8212-44bc-b372-8c1aa51f8579",
        "authorId" : "4358d2f3-5ce2-4ab5-98bc-229a6695f26a",
        "body" : "But it's probably not great to have inconsistency b/w the paths - i.e., one API using the list and the other comma separated ones? I think both should be migrated in one shot if that's the better interface -- that's better from a git history/change standpoint as well?",
        "createdAt" : "2021-05-24T01:14:02Z",
        "updatedAt" : "2021-05-24T01:14:02Z",
        "lastEditedBy" : "4358d2f3-5ce2-4ab5-98bc-229a6695f26a",
        "tags" : [
        ]
      },
      {
        "id" : "9dca12c3-91d1-407a-9afe-66c76cf176d8",
        "parentId" : "ca3970d3-8212-44bc-b372-8c1aa51f8579",
        "authorId" : "79b78984-b8e9-4fc7-aa98-92198b35ecca",
        "body" : "If you prefer to avoid introducing inconsistency, then please migrate the API first, then rebase this patch on top of it :)",
        "createdAt" : "2021-05-24T01:39:30Z",
        "updatedAt" : "2021-05-24T01:39:30Z",
        "lastEditedBy" : "79b78984-b8e9-4fc7-aa98-92198b35ecca",
        "tags" : [
        ]
      },
      {
        "id" : "475bf460-3d22-4b2e-b455-1f8a569e5069",
        "parentId" : "ca3970d3-8212-44bc-b372-8c1aa51f8579",
        "authorId" : "42d2dc99-41e6-4e5b-b96d-bf3a05c98a65",
        "body" : "@joker-eph @bondhugula During the implementation, I realized we can have this minor string manipulation over here instead of doing it at different places. Also, we need to populate the GraphImportConfig over here. I think if the whole logic is present over one place it would be nice to debug/understand.",
        "createdAt" : "2021-06-01T07:36:56Z",
        "updatedAt" : "2021-06-01T07:37:01Z",
        "lastEditedBy" : "42d2dc99-41e6-4e5b-b96d-bf3a05c98a65",
        "tags" : [
        ]
      }
    ],
    "commit" : "beaa0a141695c96d34e03f9b8d110efcf2175b7b",
    "line" : 111,
    "diffHunk" : "@@ -1,1 +186,190 @@    node_shapes.push_back(dims);\n  }\n  std::vector<string> output_nodes = absl::StrSplit(output_names, ',');\n\n  GraphDebugInfo debug_info;"
  },
  {
    "id" : "1ac50050-e548-4214-ada2-ba04bc8acf43",
    "prId" : 49380,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/49380#pullrequestreview-666230316",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e4c16d6a-ddb9-461a-929f-3cdc072552a2",
        "parentId" : null,
        "authorId" : "79b78984-b8e9-4fc7-aa98-92198b35ecca",
        "body" : "Can you make all these error message more specific?",
        "createdAt" : "2021-05-21T05:58:41Z",
        "updatedAt" : "2021-05-21T05:59:10Z",
        "lastEditedBy" : "79b78984-b8e9-4fc7-aa98-92198b35ecca",
        "tags" : [
        ]
      },
      {
        "id" : "0c60a6c4-4d5d-4f0c-aa75-6747214242b0",
        "parentId" : "e4c16d6a-ddb9-461a-929f-3cdc072552a2",
        "authorId" : "42d2dc99-41e6-4e5b-b96d-bf3a05c98a65",
        "body" : "Done.",
        "createdAt" : "2021-05-23T05:34:28Z",
        "updatedAt" : "2021-05-23T05:34:28Z",
        "lastEditedBy" : "42d2dc99-41e6-4e5b-b96d-bf3a05c98a65",
        "tags" : [
        ]
      }
    ],
    "commit" : "beaa0a141695c96d34e03f9b8d110efcf2175b7b",
    "line" : 148,
    "diffHunk" : "@@ -1,1 +223,227 @@        \"Length of input node array and data type doesn't match\");\n    Set_TF_Status_from_Status(status, s);\n    return \"// error\";\n  }\n"
  },
  {
    "id" : "9f91cc8b-0009-4f00-a129-b31a1faa676d",
    "prId" : 49380,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/49380#pullrequestreview-691094528",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e118e862-ec7c-4190-8418-f2997b7cacfc",
        "parentId" : null,
        "authorId" : "b8a75509-bf1b-4545-b677-822db2bc48e8",
        "body" : "Wouldn't skipping empty strings ignore scalar inputs? Or is there a different way to specify the shape for scalars?",
        "createdAt" : "2021-06-22T13:29:58Z",
        "updatedAt" : "2021-06-22T13:29:59Z",
        "lastEditedBy" : "b8a75509-bf1b-4545-b677-822db2bc48e8",
        "tags" : [
        ]
      },
      {
        "id" : "b82141c7-3438-445e-83b3-f0d8a1cb88ac",
        "parentId" : "e118e862-ec7c-4190-8418-f2997b7cacfc",
        "authorId" : "79b78984-b8e9-4fc7-aa98-92198b35ecca",
        "body" : "Indeed can you provide a test? @pashu123 may be able to follow up on this, otherwise I may have a look",
        "createdAt" : "2021-06-22T19:45:44Z",
        "updatedAt" : "2021-06-22T19:45:55Z",
        "lastEditedBy" : "79b78984-b8e9-4fc7-aa98-92198b35ecca",
        "tags" : [
        ]
      },
      {
        "id" : "6548abb5-93fc-4e38-aeb5-dcb973fdd56e",
        "parentId" : "e118e862-ec7c-4190-8418-f2997b7cacfc",
        "authorId" : "b8a75509-bf1b-4545-b677-822db2bc48e8",
        "body" : "Setting [this line](https://github.com/tensorflow/tensorflow/pull/49380/files#diff-939c5353442f3db942479a8865c36c9565eee07d60d7157ef35150ff65276562R66) to\r\n```\r\ninput_data_shapes=[\"\", \"\"],\r\n```\r\nresults in a failure with\r\n```\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Length of input node array and data shape doesn't match\r\n```\r\nThis could be used as a test case.\r\n",
        "createdAt" : "2021-06-22T20:04:37Z",
        "updatedAt" : "2021-06-22T20:04:37Z",
        "lastEditedBy" : "b8a75509-bf1b-4545-b677-822db2bc48e8",
        "tags" : [
        ]
      },
      {
        "id" : "ef99f5c1-e0c4-42eb-b76b-23fc50a15267",
        "parentId" : "e118e862-ec7c-4190-8418-f2997b7cacfc",
        "authorId" : "42d2dc99-41e6-4e5b-b96d-bf3a05c98a65",
        "body" : "@joker-eph Sure I will look into this.",
        "createdAt" : "2021-06-23T05:08:20Z",
        "updatedAt" : "2021-06-23T05:08:21Z",
        "lastEditedBy" : "42d2dc99-41e6-4e5b-b96d-bf3a05c98a65",
        "tags" : [
        ]
      },
      {
        "id" : "0a940b5b-8d0d-4a5b-94ed-95465e68785f",
        "parentId" : "e118e862-ec7c-4190-8418-f2997b7cacfc",
        "authorId" : "79b78984-b8e9-4fc7-aa98-92198b35ecca",
        "body" : "Fixed in eaa32809303070b698533a84f6198e0d553ad065",
        "createdAt" : "2021-06-23T20:08:34Z",
        "updatedAt" : "2021-06-23T20:08:34Z",
        "lastEditedBy" : "79b78984-b8e9-4fc7-aa98-92198b35ecca",
        "tags" : [
        ]
      }
    ],
    "commit" : "beaa0a141695c96d34e03f9b8d110efcf2175b7b",
    "line" : 97,
    "diffHunk" : "@@ -1,1 +172,176 @@  for (const string& shape_str : node_shapes_str) {\n    dims.clear();\n    if(shape_str.empty()) continue;\n    for (const auto& dim_str : absl::StrSplit(shape_str, ',')) {\n      int size;"
  },
  {
    "id" : "1c5b12bb-9f03-4554-a32a-cb5c585555a4",
    "prId" : 49380,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/49380#pullrequestreview-695117644",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7ead117b-f476-4ae4-915c-ba1a46b11a64",
        "parentId" : null,
        "authorId" : "b8a75509-bf1b-4545-b677-822db2bc48e8",
        "body" : "Looks like if `output_names` is empty (e.g. because `output_names=[]` was passed to `import_graphdef`) this results in an error:\r\n```\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Output  was not found in graph\r\n```\r\n\r\nIt may be enough to do\r\n```\r\n  if (!output_names.empty()) {\r\n    std::vector<string> output_nodes = absl::StrSplit(output_names, ',');\r\n  }\r\n```",
        "createdAt" : "2021-06-29T14:31:31Z",
        "updatedAt" : "2021-06-29T14:31:31Z",
        "lastEditedBy" : "b8a75509-bf1b-4545-b677-822db2bc48e8",
        "tags" : [
        ]
      }
    ],
    "commit" : "beaa0a141695c96d34e03f9b8d110efcf2175b7b",
    "line" : 111,
    "diffHunk" : "@@ -1,1 +186,190 @@    node_shapes.push_back(dims);\n  }\n  std::vector<string> output_nodes = absl::StrSplit(output_names, ',');\n\n  GraphDebugInfo debug_info;"
  }
]