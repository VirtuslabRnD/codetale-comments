[
  {
    "id" : "d78af051-d809-43b6-8a54-1038ef853e5e",
    "prId" : 43034,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/43034#pullrequestreview-566889551",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "58d985ec-7583-4b45-928a-2427423b0586",
        "parentId" : null,
        "authorId" : "2861a495-42d5-4ac3-b543-23cf14c0a980",
        "body" : "I'd expect async compilation to always happen on nodes placed on regular CPU and GPU devices, and thus this always being null if async compilation is enabled.  Have you seen otherwise?",
        "createdAt" : "2021-01-13T03:32:53Z",
        "updatedAt" : "2021-02-27T00:51:15Z",
        "lastEditedBy" : "2861a495-42d5-4ac3-b543-23cf14c0a980",
        "tags" : [
        ]
      },
      {
        "id" : "3b4385bf-8e40-4650-b1ce-d9cade123041",
        "parentId" : "58d985ec-7583-4b45-928a-2427423b0586",
        "authorId" : "ce170c1c-de15-4dea-9405-50e61baf5684",
        "body" : "no, did not. But there is a possibility for a custom allocator, which is a shared_ptr.\r\nThat is what triggered making the allocator a shared_ptr as well.",
        "createdAt" : "2021-01-13T04:44:48Z",
        "updatedAt" : "2021-02-27T00:51:15Z",
        "lastEditedBy" : "ce170c1c-de15-4dea-9405-50e61baf5684",
        "tags" : [
        ]
      }
    ],
    "commit" : "597499a8fef673b413b9ceb5610a0c65f8a1440e",
    "line" : 24,
    "diffHunk" : "@@ -1,1 +76,80 @@  // is placed on a regular CPU or GPU device then device_allocator_ is null.\n  // The allocator is of unknown provenance; keep it in a shared pointer to\n  // set an artificial refcount of one.\n  std::shared_ptr<se::DeviceMemoryAllocator> device_allocator_;\n"
  }
]