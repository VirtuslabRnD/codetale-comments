[
  {
    "id" : "e604c23c-34bd-40ad-ba45-466fcf57a4f2",
    "prId" : 13185,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/13185#pullrequestreview-64058513",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "881dac89-01e1-47ec-a5a9-732ddaa3d46a",
        "parentId" : null,
        "authorId" : "ff531721-78ce-45aa-b6a0-b9f2e664f0c2",
        "body" : "I'm not quite sure I follow why this is helping. `c` is referenced at the end of the function as well (in `c.toGo()`), so doesn't that mean that `c`'s finalizer will not be called before then, so `c.feeds` should remain referenced?",
        "createdAt" : "2017-09-20T16:42:47Z",
        "updatedAt" : "2017-09-20T16:45:34Z",
        "lastEditedBy" : "ff531721-78ce-45aa-b6a0-b9f2e664f0c2",
        "tags" : [
        ]
      },
      {
        "id" : "ba1d3c02-df26-486b-bd8c-3db6593f5638",
        "parentId" : "881dac89-01e1-47ec-a5a9-732ddaa3d46a",
        "authorId" : "d0548fbe-a88a-464d-a39a-b50996564654",
        "body" : "This does not seem right because \"c\" has no references to \"feeds\" either.\r\nI have just checked with runtime.KeepAlive(c) and it keeps crashing, as expected.",
        "createdAt" : "2017-09-20T16:48:08Z",
        "updatedAt" : "2017-09-20T16:48:08Z",
        "lastEditedBy" : "d0548fbe-a88a-464d-a39a-b50996564654",
        "tags" : [
        ]
      },
      {
        "id" : "a22e3d01-8dda-4746-a76c-2b7d41cf8f0c",
        "parentId" : "881dac89-01e1-47ec-a5a9-732ddaa3d46a",
        "authorId" : "ff531721-78ce-45aa-b6a0-b9f2e664f0c2",
        "body" : "Or is it that individual fields of `c` are being independently GCed?",
        "createdAt" : "2017-09-20T16:49:18Z",
        "updatedAt" : "2017-09-20T16:49:18Z",
        "lastEditedBy" : "ff531721-78ce-45aa-b6a0-b9f2e664f0c2",
        "tags" : [
        ]
      },
      {
        "id" : "df6151fa-1b03-4dae-9137-0cc04920324a",
        "parentId" : "881dac89-01e1-47ec-a5a9-732ddaa3d46a",
        "authorId" : "ff531721-78ce-45aa-b6a0-b9f2e664f0c2",
        "body" : "Ah, sorry, yeah, you're right - I was not reading the `feeds` vs. `c.feeds` correctly.\r\nThanks very much!",
        "createdAt" : "2017-09-20T16:57:36Z",
        "updatedAt" : "2017-09-20T17:02:40Z",
        "lastEditedBy" : "ff531721-78ce-45aa-b6a0-b9f2e664f0c2",
        "tags" : [
        ]
      },
      {
        "id" : "1215410f-41f1-4765-83a5-4b3ae8c8b6f8",
        "parentId" : "881dac89-01e1-47ec-a5a9-732ddaa3d46a",
        "authorId" : "d0548fbe-a88a-464d-a39a-b50996564654",
        "body" : "That is because \"c.feeds\" does not reference \"feeds\". Instead it references each tensor's \".c()\", which is different object from GC's point of view, unrelated to \"feeds\" in general.",
        "createdAt" : "2017-09-20T16:59:42Z",
        "updatedAt" : "2017-09-20T17:01:54Z",
        "lastEditedBy" : "d0548fbe-a88a-464d-a39a-b50996564654",
        "tags" : [
        ]
      },
      {
        "id" : "322e3e97-7835-4770-a588-c611e4bbdb79",
        "parentId" : "881dac89-01e1-47ec-a5a9-732ddaa3d46a",
        "authorId" : "ff531721-78ce-45aa-b6a0-b9f2e664f0c2",
        "body" : "Would it also make sense to call `runtime.KeepAlive(fetches)` and `runtime.KeepAlive(targets)`?",
        "createdAt" : "2017-09-20T17:02:23Z",
        "updatedAt" : "2017-09-20T17:02:23Z",
        "lastEditedBy" : "ff531721-78ce-45aa-b6a0-b9f2e664f0c2",
        "tags" : [
        ]
      },
      {
        "id" : "2b3dcae3-7d62-4f37-9285-32c10d82ed8e",
        "parentId" : "881dac89-01e1-47ec-a5a9-732ddaa3d46a",
        "authorId" : "d0548fbe-a88a-464d-a39a-b50996564654",
        "body" : "For Operation object there is no finalizer destructor defined, so that means op.c could only point to some constant node of a graph (have not checked this though). In that case Operation object can be harvested by GC independently from it's \".c\" part and without any side effects. ",
        "createdAt" : "2017-09-20T17:42:48Z",
        "updatedAt" : "2017-09-20T17:42:48Z",
        "lastEditedBy" : "d0548fbe-a88a-464d-a39a-b50996564654",
        "tags" : [
        ]
      }
    ],
    "commit" : "846454faae5a66fa430b03c82f571440919070f3",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +92,96 @@\n\t// Make sure GC won't harvest input tensors until SessionRun() is finished\n\truntime.KeepAlive(feeds)\n\n\tif err := status.Err(); err != nil {"
  }
]