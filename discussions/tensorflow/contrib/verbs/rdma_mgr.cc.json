[
  {
    "id" : "3316beec-4e47-42c3-bc71-e959f9bd33dc",
    "prId" : 14290,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/14290#pullrequestreview-77182583",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "549a8f7b-d43c-488e-b3fa-95d51865507f",
        "parentId" : null,
        "authorId" : "1f91e1ca-cefb-4416-8a41-76785bbd0b7f",
        "body" : "Can this while loop hang if one of the remote nodes is down?",
        "createdAt" : "2017-11-16T03:00:36Z",
        "updatedAt" : "2017-11-16T15:16:33Z",
        "lastEditedBy" : "1f91e1ca-cefb-4416-8a41-76785bbd0b7f",
        "tags" : [
        ]
      },
      {
        "id" : "de0ebc3a-1a6e-4f92-9c99-5743ca0eb6b2",
        "parentId" : "549a8f7b-d43c-488e-b3fa-95d51865507f",
        "authorId" : "caa54da6-1b86-4c0b-bd8a-7039d71d8b05",
        "body" : "If the remote node is down we will get an error earlier in channel creation or when sending ping. \r\nThe only option for the loop to hang is when the remote node failes between receiving ping to sending reply.\r\nIn this case we will successfully send the ping to remote, it will receive it and go down for some reason before sending reply so we'll be polling the completion queue forever, similar to the case when remote node goes down after connectivity check and we are stuck in the while(true) [here](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/verbs/rdma.cc#L443).",
        "createdAt" : "2017-11-16T15:09:25Z",
        "updatedAt" : "2017-11-16T15:16:33Z",
        "lastEditedBy" : "caa54da6-1b86-4c0b-bd8a-7039d71d8b05",
        "tags" : [
        ]
      },
      {
        "id" : "6e3af724-9d21-4908-a763-f9a288b3b5bb",
        "parentId" : "549a8f7b-d43c-488e-b3fa-95d51865507f",
        "authorId" : "1f91e1ca-cefb-4416-8a41-76785bbd0b7f",
        "body" : "Make sense. Thanks for explanation.",
        "createdAt" : "2017-11-16T16:39:30Z",
        "updatedAt" : "2017-11-16T16:39:30Z",
        "lastEditedBy" : "1f91e1ca-cefb-4416-8a41-76785bbd0b7f",
        "tags" : [
        ]
      }
    ],
    "commit" : "d43d00be13ff271eb8a2e6a14eb7ac01a51934ff",
    "line" : 49,
    "diffHunk" : "@@ -1,1 +161,165 @@      }\n    }  // for\n  }    // while\n  CHECK(rcnt == scnt) << \"Connectivity check failed!\";\n  rdma_adapter_->StartPolling();"
  }
]