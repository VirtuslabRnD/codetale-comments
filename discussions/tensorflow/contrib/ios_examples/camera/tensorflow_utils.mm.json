[
  {
    "id" : "f9e4cbfb-2d92-4668-9fe4-bab5b8a9e5b2",
    "prId" : 4457,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/4457#pullrequestreview-559495",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8d939a2d-73f6-4e01-8f3d-5f41ee9aa06c",
        "parentId" : null,
        "authorId" : "3c462bc6-aae1-413d-908f-fff1b1ed68ef",
        "body" : "Does it do this even if the constant is not used in some other expression?  We should probably make it so that single ImmutableConst nodes don't get constant-folded into single constant nodes.\n",
        "createdAt" : "2016-09-19T14:30:03Z",
        "updatedAt" : "2016-09-20T10:33:04Z",
        "lastEditedBy" : "3c462bc6-aae1-413d-908f-fff1b1ed68ef",
        "tags" : [
        ]
      }
    ],
    "commit" : "d6f387ac14119a959fab5e87680f79aaa2807978",
    "line" : 200,
    "diffHunk" : "@@ -1,1 +184,188 @@  tensorflow::SessionOptions options;\n  // Disable optimizations on this graph so that constant folding doesn't\n  // increase the memory footprint by creating new constant copies of the weight\n  // parameters.\n  options.config.mutable_graph_options()"
  },
  {
    "id" : "558109af-8867-4dfa-9aaa-d6547f9f6ab3",
    "prId" : 4457,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/4457#pullrequestreview-717944",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "acb83791-80b4-4339-9f98-0d8fd5af07a4",
        "parentId" : null,
        "authorId" : "3c462bc6-aae1-413d-908f-fff1b1ed68ef",
        "body" : "Does it do this even if the constant is not used in some other expression?  We should probably make it so that single ImmutableConst nodes don't get constant-folded into single constant nodes.\n\nThat said, skipping optimization on all mobile models would make sense anyway if we just run the optimizations as an offline process?\n",
        "createdAt" : "2016-09-19T14:30:03Z",
        "updatedAt" : "2016-09-20T10:33:04Z",
        "lastEditedBy" : "3c462bc6-aae1-413d-908f-fff1b1ed68ef",
        "tags" : [
        ]
      },
      {
        "id" : "e8d5967d-225b-4b45-aed5-f3f1a1d1e954",
        "parentId" : "acb83791-80b4-4339-9f98-0d8fd5af07a4",
        "authorId" : "2424ca1f-2171-47cc-b401-ceb61b6f3fde",
        "body" : "This only happens if it's used in a subsequent expression, so in general it's doing the right thing. It would be good to have an option to disable this optimization just for subgraphs that have ImmutableConsts as their source though. I'd also like to get constant folding into optimize_graph as an offline process too.\n",
        "createdAt" : "2016-09-20T10:18:35Z",
        "updatedAt" : "2016-09-20T10:33:04Z",
        "lastEditedBy" : "2424ca1f-2171-47cc-b401-ceb61b6f3fde",
        "tags" : [
        ]
      }
    ],
    "commit" : "d6f387ac14119a959fab5e87680f79aaa2807978",
    "line" : 200,
    "diffHunk" : "@@ -1,1 +184,188 @@  tensorflow::SessionOptions options;\n  // Disable optimizations on this graph so that constant folding doesn't\n  // increase the memory footprint by creating new constant copies of the weight\n  // parameters.\n  options.config.mutable_graph_options()"
  }
]