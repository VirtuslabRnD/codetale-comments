[
  {
    "id" : "2cd2649d-9196-45a0-9628-63eaf3e17161",
    "prId" : 17567,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/17567#pullrequestreview-102434381",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "341c7069-feed-4d7d-aece-44427b16999d",
        "parentId" : null,
        "authorId" : "28fabc34-a1ac-4aba-988b-9c9e03232122",
        "body" : "I cannot see any code path that raises this specific error message.\r\nFrom what I can see this is the error you will see:\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/framework/load_library.py#L55",
        "createdAt" : "2018-03-08T19:40:15Z",
        "updatedAt" : "2018-03-08T19:40:15Z",
        "lastEditedBy" : "28fabc34-a1ac-4aba-988b-9c9e03232122",
        "tags" : [
        ]
      },
      {
        "id" : "9c9f6e2f-ff99-46fb-905f-eb74a69a30be",
        "parentId" : "341c7069-feed-4d7d-aece-44427b16999d",
        "authorId" : "1c0d3996-f30e-4521-a42e-7a5cdc08f5b5",
        "body" : "It's raised from [here](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/framework/errors_impl.py#L516).",
        "createdAt" : "2018-03-08T19:49:11Z",
        "updatedAt" : "2018-03-08T19:49:11Z",
        "lastEditedBy" : "1c0d3996-f30e-4521-a42e-7a5cdc08f5b5",
        "tags" : [
        ]
      }
    ],
    "commit" : "b1033e52142a0071b6a81969e1e387ea940f6cd6",
    "line" : 10,
    "diffHunk" : "@@ -1,1 +24,28 @@try:\n  from tensorflow.contrib.tensorrt.python import *\nexcept errors.NotFoundError as e:\n  no_trt_message = (\n      '**** Failed to initialize TensorRT. This is either because the TensorRT'"
  },
  {
    "id" : "37e268fb-dd7a-44c5-83ad-2abe2757cf84",
    "prId" : 17517,
    "prUrl" : "https://github.com/tensorflow/tensorflow/pull/17517#pullrequestreview-102434170",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "13b82bfc-c53d-4e4f-b9a3-d8a2721ac9d4",
        "parentId" : null,
        "authorId" : "28fabc34-a1ac-4aba-988b-9c9e03232122",
        "body" : "We should not be using general `Exception` types.\r\nThis will throw an `ImportError` so we should use that instead.\r\nCould you send a followup fix for that?",
        "createdAt" : "2018-03-08T06:20:48Z",
        "updatedAt" : "2018-03-08T06:20:48Z",
        "lastEditedBy" : "28fabc34-a1ac-4aba-988b-9c9e03232122",
        "tags" : [
        ]
      },
      {
        "id" : "09466724-0158-47b8-a11f-fe0592bc0506",
        "parentId" : "13b82bfc-c53d-4e4f-b9a3-d8a2721ac9d4",
        "authorId" : "e07b7c87-7b3c-46ad-8dba-53305318d8d0",
        "body" : "Just to be clear here.\r\nAre you suggesting to \r\na. catch general ```Exception``` and throw an ```ImportError```\r\nOr\r\nb. catch only ```ImportError``` and throw it,",
        "createdAt" : "2018-03-08T16:22:07Z",
        "updatedAt" : "2018-03-08T16:22:07Z",
        "lastEditedBy" : "e07b7c87-7b3c-46ad-8dba-53305318d8d0",
        "tags" : [
        ]
      },
      {
        "id" : "99a10506-6ffb-43b5-9094-0028a1e4eacd",
        "parentId" : "13b82bfc-c53d-4e4f-b9a3-d8a2721ac9d4",
        "authorId" : "1c0d3996-f30e-4521-a42e-7a5cdc08f5b5",
        "body" : "I think it'll actually throw a `tensorflow.python.framework.errors_impl.NotFoundError`.",
        "createdAt" : "2018-03-08T16:40:26Z",
        "updatedAt" : "2018-03-08T16:40:26Z",
        "lastEditedBy" : "1c0d3996-f30e-4521-a42e-7a5cdc08f5b5",
        "tags" : [
        ]
      },
      {
        "id" : "38e807b6-48c6-410a-95b4-b8399e5eaff1",
        "parentId" : "13b82bfc-c53d-4e4f-b9a3-d8a2721ac9d4",
        "authorId" : "e07b7c87-7b3c-46ad-8dba-53305318d8d0",
        "body" : "I notice that it throws \r\n```\r\nNotFoundError: libnvinfer.so.4: cannot open shared object file: No such file or directory\r\n``` \r\n\r\nI could catch ```Exception``` and throw an ```ImportError``` with the original text attached after our warning. so that any error happens our message gets printed.\r\n\r\n```\r\nImportError: **** Failed to initialize TensorRT. This is either because the TensorRT installation path is not in LD_LIBRARY_PATH, or because you do not have it installed. If not installed, please go to https://developer.nvidia.com/tensorrt to download and install TensorRT ****\r\nlibnvinfer.so.4: cannot open shared object file: No such file or directory\r\n```\r\n",
        "createdAt" : "2018-03-08T17:00:09Z",
        "updatedAt" : "2018-03-08T17:00:32Z",
        "lastEditedBy" : "e07b7c87-7b3c-46ad-8dba-53305318d8d0",
        "tags" : [
        ]
      },
      {
        "id" : "d97fde73-cb5d-433b-b4d8-cd4c5878c692",
        "parentId" : "13b82bfc-c53d-4e4f-b9a3-d8a2721ac9d4",
        "authorId" : "34b6b0a4-d35f-403e-9960-5c426c7c4474",
        "body" : "Don't we only want to catch the exception type we expect?",
        "createdAt" : "2018-03-08T18:07:32Z",
        "updatedAt" : "2018-03-08T18:07:32Z",
        "lastEditedBy" : "34b6b0a4-d35f-403e-9960-5c426c7c4474",
        "tags" : [
        ]
      },
      {
        "id" : "fca8d4e8-8a30-4439-8d62-091772dc1ce2",
        "parentId" : "13b82bfc-c53d-4e4f-b9a3-d8a2721ac9d4",
        "authorId" : "1c0d3996-f30e-4521-a42e-7a5cdc08f5b5",
        "body" : "@gunan @yifeif Then how about something like:\r\n```\r\ntry:\r\n  from tensorflow.contrib.tensorrt.python import *\r\nexcept NotFoundError as e:\r\n  if e contains 'libnv.*: cannot open shared object file':\r\n    no_trt_message = ...\r\n    raise ImportError(no_trt_message, e)\r\n  else:\r\n    raise e\r\n```",
        "createdAt" : "2018-03-08T18:20:34Z",
        "updatedAt" : "2018-03-08T18:20:34Z",
        "lastEditedBy" : "1c0d3996-f30e-4521-a42e-7a5cdc08f5b5",
        "tags" : [
        ]
      },
      {
        "id" : "20e3cc22-d4b7-4666-85b2-93db5275f65f",
        "parentId" : "13b82bfc-c53d-4e4f-b9a3-d8a2721ac9d4",
        "authorId" : "34b6b0a4-d35f-403e-9960-5c426c7c4474",
        "body" : "I think we can just change what we have now from `except Exception as e:` to `except NotFoundError as e:`",
        "createdAt" : "2018-03-08T18:28:21Z",
        "updatedAt" : "2018-03-08T18:28:21Z",
        "lastEditedBy" : "34b6b0a4-d35f-403e-9960-5c426c7c4474",
        "tags" : [
        ]
      },
      {
        "id" : "843add96-7802-4b89-b70b-dc223337208d",
        "parentId" : "13b82bfc-c53d-4e4f-b9a3-d8a2721ac9d4",
        "authorId" : "28fabc34-a1ac-4aba-988b-9c9e03232122",
        "body" : "I am really puzzled, I cannot see any code path that throws the NotFoundError.\r\nI think NotFoundError gets thrown when we are executing a graph.\r\n\r\nIs there a way to catch this during tensorrt import/access time?",
        "createdAt" : "2018-03-08T19:48:39Z",
        "updatedAt" : "2018-03-08T19:48:39Z",
        "lastEditedBy" : "28fabc34-a1ac-4aba-988b-9c9e03232122",
        "tags" : [
        ]
      }
    ],
    "commit" : "f7b1d233ed39eed24e3c1489738df01f700112e3",
    "line" : 10,
    "diffHunk" : "@@ -1,1 +22,26 @@try:\n  from tensorflow.contrib.tensorrt.python import *\nexcept Exception as e:\n  no_trt_message = (\n      '**** Failed to initialize TensorRT. This is either because the TensorRT'"
  }
]