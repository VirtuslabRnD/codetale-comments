[
  {
    "id" : "71e8580f-738d-4675-bdee-44467d7d36ef",
    "prId" : 387,
    "prUrl" : "https://github.com/akka/alpakka/pull/387#pullrequestreview-50716105",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0115aa6f-5870-46f5-91b2-873a64854936",
        "parentId" : null,
        "authorId" : "40712532-616a-452a-bb94-6e07e5dfe884",
        "body" : "You can write this function without mutating local vars. Something like this:\r\n```scala\r\n  import scala.collection.JavaConverters._\r\n\r\n  private def createMessageBatch(messages: Array[String]): SendMessageBatchRequest =\r\n    new SendMessageBatchRequest(\r\n      queueUrl,\r\n      messages\r\n        .toList\r\n        .zipWithIndex\r\n        .map { case (message, id) => new SendMessageBatchRequestEntry(id.toString, message) }\r\n        .asJava\r\n    )\r\n```",
        "createdAt" : "2017-07-18T18:59:16Z",
        "updatedAt" : "2017-12-24T21:56:41Z",
        "lastEditedBy" : "40712532-616a-452a-bb94-6e07e5dfe884",
        "tags" : [
        ]
      },
      {
        "id" : "a4040608-3311-4fa7-aec5-3c1b2b3885b7",
        "parentId" : "0115aa6f-5870-46f5-91b2-873a64854936",
        "authorId" : "9550b4b5-47a0-4a04-8093-5542c38707d9",
        "body" : "@SergeiShabanau, the reason why I do not use `zipWithIndex` with `map` is to avoid unnecessary memory allocations and also please correct me if I am wrong but basically this code is iterating three times, but with one local variable I guess we can do that with one iteration. Even though according to Asymptotic Notation they are both O(n), I thought fewer iterations might be better. However, if it confuses the logic here, I can change that part. ",
        "createdAt" : "2017-07-18T19:20:53Z",
        "updatedAt" : "2017-12-24T21:56:41Z",
        "lastEditedBy" : "9550b4b5-47a0-4a04-8093-5542c38707d9",
        "tags" : [
        ]
      }
    ],
    "commit" : "2e1c0d9b0059f0dd7a2d336239e1ce70a3c21fae",
    "line" : 152,
    "diffHunk" : "@@ -1,1 +150,154 @@            val batchRequest = new SendMessageBatchRequest(queueUrl, messageRequestEntries)\n            batchRequest\n          }\n        }\n      )"
  }
]