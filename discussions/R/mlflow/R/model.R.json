[
  {
    "id" : "4d63b571-206f-4288-b77d-030b41a70850",
    "prId" : 370,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/370#pullrequestreview-152757533",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6460f060-1595-4e14-9695-b2028acae62c",
        "parentId" : null,
        "authorId" : "d79ebb0f-0833-4329-8a37-7ae540003587",
        "body" : "This is pretty cool! It might not be clear to the user which flavor is gonna be produced though. I think we should also provide an ability for the user to explicitly specify list of flavors he / she wants to store. Can we add an optional argument flavors with user provided list of flavors to be saved? And if provided we would go over the list and save each flavor into the same model? ",
        "createdAt" : "2018-09-05T18:18:57Z",
        "updatedAt" : "2018-09-06T05:32:27Z",
        "lastEditedBy" : "d79ebb0f-0833-4329-8a37-7ae540003587",
        "tags" : [
        ]
      },
      {
        "id" : "b745140c-0059-4cc9-881a-bb29038ca8b9",
        "parentId" : "6460f060-1595-4e14-9695-b2028acae62c",
        "authorId" : "28fa28f9-d432-4350-8fa9-8ac895cb5b86",
        "body" : "Well, I understand the suggestion... However, each model would also be different. We could generalize this function to save a list of models, something like:\r\n\r\n```\r\ntf_graph <- train_tensorflow_model()\r\npredictor <- crate(~ stats::predict(model, .x), model)\r\n\r\n# Save model to predict in GPU or CPU\r\nmlflow_save_model(c(tf_graph, predictor), path = \"model\")\r\n```\r\n\r\nWhich feels a bit far fetched since we don't even have an implementation for TF, etc. The good news, we can implement this later without breaking the API compatibility since everything in R is a vector.",
        "createdAt" : "2018-09-06T03:04:22Z",
        "updatedAt" : "2018-09-06T05:32:27Z",
        "lastEditedBy" : "28fa28f9-d432-4350-8fa9-8ac895cb5b86",
        "tags" : [
        ]
      }
    ],
    "commit" : "00260d4bf5f1100a72f3354f1b505bee22089a95",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +13,17 @@#' @importFrom yaml write_yaml\n#' @export\nmlflow_save_model <- function(x, path = \"model\", dependencies = NULL) {\n  supported_deps <- list(\n    \"r-dependencies.txt\" = \"r_dependencies\","
  },
  {
    "id" : "3abe6efe-ce3d-4de5-991a-cae58580582a",
    "prId" : 370,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/370#pullrequestreview-152775042",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "68fa7ddb-ad47-4011-a704-b053d1898ed9",
        "parentId" : null,
        "authorId" : "d79ebb0f-0833-4329-8a37-7ae540003587",
        "body" : "Load model should take optional run_id and if provided it should load the model from artifact.\r\n\r\nSimilar as for save model, it might be good if user is able to explicitly specify the list flavors, this time providing a priority ordering of flavors. E.g.  Spark ML model can be loaded as spark ml or as mleap, mleap is more efificent in certain scenarios but is not always available. So user might then write \r\n\r\n```\r\nmlflow_load_model <- function(model_path, flavors = NULL) {...}\r\n```\r\nand user could then call this as follows\r\n```\r\nmlflow_load_model <- (model_path, flavors=c(\"mleap\", \"sparkml\"))\r\n```\r\n ",
        "createdAt" : "2018-09-05T18:34:47Z",
        "updatedAt" : "2018-09-06T05:32:27Z",
        "lastEditedBy" : "d79ebb0f-0833-4329-8a37-7ae540003587",
        "tags" : [
        ]
      },
      {
        "id" : "e690e248-8a8b-4867-9e86-5b6b0481758d",
        "parentId" : "68fa7ddb-ad47-4011-a704-b053d1898ed9",
        "authorId" : "28fa28f9-d432-4350-8fa9-8ac895cb5b86",
        "body" : "`mlflow_load_model` is currently an internal function. In R, public functions get specified in the `NAMESPACE` file, we usually don't edit this file by hand but rather use `roxygen` to annotate which functions are public, which you can find by looking for `#' @export` directives. `mlflow_load_model` gets used in the following function which does contain a `run_id`:\r\n\r\n```r\r\nmlflow_rfunc_predict <- function(\r\n  model_path,\r\n  run_uuid = NULL,\r\n  input_path = NULL,\r\n  output_path = NULL,\r\n  data = NULL,\r\n  restore = FALSE\r\n) \r\n```\r\n\r\nRight, similar comment to save model, this seems like a pretty advanced scenario we could enable once we start seeing us or the community implementing custom flavors in R. Let me open a github issue to at least track this... https://github.com/mlflow/mlflow/issues/441",
        "createdAt" : "2018-09-06T05:15:23Z",
        "updatedAt" : "2018-09-06T05:32:27Z",
        "lastEditedBy" : "28fa28f9-d432-4350-8fa9-8ac895cb5b86",
        "tags" : [
        ]
      }
    ],
    "commit" : "00260d4bf5f1100a72f3354f1b505bee22089a95",
    "line" : 62,
    "diffHunk" : "@@ -1,1 +60,64 @@}\n\nmlflow_load_model <- function(model_path) {\n  spec <- yaml::read_yaml(fs::path(model_path, \"MLmodel\"))\n"
  }
]