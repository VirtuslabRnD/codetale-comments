[
  {
    "id" : "f39de579-c6d3-431e-b5b1-1ef017d8a190",
    "prId" : 100039,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/100039#pullrequestreview-608186768",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f9efffbf-6f29-4631-9d9a-67fbd59f8a35",
        "parentId" : null,
        "authorId" : "31a2ac00-6c67-4307-a4bc-bfd13f41ef27",
        "body" : "Looks like we need to import feature/features",
        "createdAt" : "2021-03-09T22:58:33Z",
        "updatedAt" : "2021-03-10T00:48:04Z",
        "lastEditedBy" : "31a2ac00-6c67-4307-a4bc-bfd13f41ef27",
        "tags" : [
        ]
      }
    ],
    "commit" : "628160c2c40858f2f60e8a7e8f1cb16cf4e4880e",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +354,358 @@\t}\n\n\tif feature.DefaultFeatureGate.Enabled(features.PodOverhead) {\n\t\trequests = quota.Add(requests, pod.Spec.Overhead)\n\t\tlimits = quota.Add(limits, pod.Spec.Overhead)"
  },
  {
    "id" : "9223261c-af83-4f5d-97cf-4536fd4c3b7c",
    "prId" : 100038,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/100038#pullrequestreview-608188819",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b856cc89-6b3b-4fbe-81e4-f0ace5b331dd",
        "parentId" : null,
        "authorId" : "31a2ac00-6c67-4307-a4bc-bfd13f41ef27",
        "body" : "Looks like we need to import feature/features",
        "createdAt" : "2021-03-09T23:02:04Z",
        "updatedAt" : "2021-03-10T00:49:58Z",
        "lastEditedBy" : "31a2ac00-6c67-4307-a4bc-bfd13f41ef27",
        "tags" : [
        ]
      }
    ],
    "commit" : "c1895d761f5192e4a624b31d1204c45220e7813d",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +354,358 @@\t}\n\n\tif feature.DefaultFeatureGate.Enabled(features.PodOverhead) {\n\t\trequests = quota.Add(requests, pod.Spec.Overhead)\n\t\tlimits = quota.Add(limits, pod.Spec.Overhead)"
  },
  {
    "id" : "86ea784c-0dac-4634-9994-ba07c3abf200",
    "prId" : 100037,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/100037#pullrequestreview-608188203",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "729d90c9-0948-4649-a634-b2a225de7f1f",
        "parentId" : null,
        "authorId" : "31a2ac00-6c67-4307-a4bc-bfd13f41ef27",
        "body" : "Looks like we need to import feature/features",
        "createdAt" : "2021-03-09T23:01:06Z",
        "updatedAt" : "2021-03-10T00:51:18Z",
        "lastEditedBy" : "31a2ac00-6c67-4307-a4bc-bfd13f41ef27",
        "tags" : [
        ]
      }
    ],
    "commit" : "d3417520d28f151f7d1af55b3b78188c8dbfd098",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +354,358 @@\t}\n\n\tif feature.DefaultFeatureGate.Enabled(features.PodOverhead) {\n\t\trequests = quota.Add(requests, pod.Spec.Overhead)\n\t\tlimits = quota.Add(limits, pod.Spec.Overhead)"
  },
  {
    "id" : "3916990d-b78c-4663-918e-88e0af13d7d3",
    "prId" : 99600,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/99600#pullrequestreview-608157540",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8ae4a78e-0b17-4f3e-bc53-1f290b432722",
        "parentId" : null,
        "authorId" : "6eca0ade-9879-4dd7-ad14-547e16f5c041",
        "body" : "i wish we had this in beta as intended; happy we caught it prior to moving to GA.",
        "createdAt" : "2021-03-09T22:22:07Z",
        "updatedAt" : "2021-03-09T22:28:43Z",
        "lastEditedBy" : "6eca0ade-9879-4dd7-ad14-547e16f5c041",
        "tags" : [
        ]
      }
    ],
    "commit" : "df48ee49d895908725825cb55695bf9ddfee9839",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +355,359 @@\t}\n\n\tif feature.DefaultFeatureGate.Enabled(features.PodOverhead) {\n\t\trequests = quota.Add(requests, pod.Spec.Overhead)\n\t\tlimits = quota.Add(limits, pod.Spec.Overhead)"
  },
  {
    "id" : "96d59e27-793c-460a-8640-f4f4a490e09d",
    "prId" : 98582,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/98582#pullrequestreview-591481046",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1d570bc1-43b9-45e0-ae1b-42d238822f5f",
        "parentId" : null,
        "authorId" : "06cbf859-1cac-4be7-80e6-3b34dcff1812",
        "body" : "Should we guard this by feature gate? or, it would have been dropped if the feature is disabled?",
        "createdAt" : "2021-02-16T02:07:05Z",
        "updatedAt" : "2021-03-04T03:53:09Z",
        "lastEditedBy" : "06cbf859-1cac-4be7-80e6-3b34dcff1812",
        "tags" : [
        ]
      },
      {
        "id" : "a67fc97a-af85-477a-918c-c6fb637f0ec1",
        "parentId" : "1d570bc1-43b9-45e0-ae1b-42d238822f5f",
        "authorId" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "body" : "not sure what the best practice here. @liggitt ?",
        "createdAt" : "2021-02-16T02:29:30Z",
        "updatedAt" : "2021-03-04T03:53:09Z",
        "lastEditedBy" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "tags" : [
        ]
      },
      {
        "id" : "5a081195-388c-4b9b-bb23-37f407d6a771",
        "parentId" : "1d570bc1-43b9-45e0-ae1b-42d238822f5f",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "If this returns **false** if the feature is disabled, then cross-namespace pods would not be constrained by the quota. Since this code is used by the API server (at pod creation time) and by the controller-manager (at quota reconciliation time), this is the possible skew we could encounter:\r\n\r\n* API server with feature on, active controller-manager with feature off\r\n  * quota would be consumed on pod creation, controller-manager would frequently reset consumed quota to 0 (because it wouldn't think it applied to any pods)\r\n* API server with feature off, active controller-manager with feature on\r\n  * quota would not constrain pod creation (because the API server wouldn't think it applied to any pods), controller-manager would frequently recompute consumed quota\r\n\r\nNeither of those scenarios prevents creation or deletion of pods that should be allowed, so I would recommend returning false if the feature is disabled.\r\n\r\nWill the scheduler also ignore the new namespace selector field if the feature is disabled?",
        "createdAt" : "2021-02-16T16:12:28Z",
        "updatedAt" : "2021-03-04T03:53:09Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "d65e8fdf-ff6c-45cf-90bc-8e87047bcbc0",
        "parentId" : "1d570bc1-43b9-45e0-ae1b-42d238822f5f",
        "authorId" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "body" : "> Neither of those scenarios prevents creation or deletion of pods that should be allowed, so I would recommend returning false if the feature is disabled.\r\n\r\nDone.\r\n\r\n> Will the scheduler also ignore the new namespace selector field if the feature is disabled?\r\n\r\nYes, this is the plan.\r\n",
        "createdAt" : "2021-02-16T18:57:58Z",
        "updatedAt" : "2021-03-04T03:53:09Z",
        "lastEditedBy" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "tags" : [
        ]
      }
    ],
    "commit" : "3c5f018f8e73bd6b1d84529cda06f6c3c204d274",
    "line" : 24,
    "diffHunk" : "@@ -1,1 +311,315 @@\t\treturn podMatchesSelector(pod, selector)\n\tcase corev1.ResourceQuotaScopeCrossNamespacePodAffinity:\n\t\treturn usesCrossNamespacePodAffinity(pod), nil\n\t}\n\treturn false, nil"
  },
  {
    "id" : "8cf19197-e3a5-48d5-a97c-e479498e0eea",
    "prId" : 98582,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/98582#pullrequestreview-591481046",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "dfa8e24f-4211-4d45-b5de-363fba8d7e65",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "should this check `(len(term.Namespaces) != 0 && term.Namespaces != [pod.Namespace])`?",
        "createdAt" : "2021-02-16T15:54:27Z",
        "updatedAt" : "2021-03-04T03:53:09Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "43945394-fc41-41d3-807b-7a55c8131868",
        "parentId" : "dfa8e24f-4211-4d45-b5de-363fba8d7e65",
        "authorId" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "body" : "The pod's namespace is considered by the scheduler when `len(term.Namespaces)=0`. It is not added by apiserver automatically to the slice.",
        "createdAt" : "2021-02-16T18:00:38Z",
        "updatedAt" : "2021-03-04T03:53:09Z",
        "lastEditedBy" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "tags" : [
        ]
      }
    ],
    "commit" : "3c5f018f8e73bd6b1d84529cda06f6c3c204d274",
    "line" : 32,
    "diffHunk" : "@@ -1,1 +385,389 @@}\n\nfunc crossNamespacePodAffinityTerm(term *corev1.PodAffinityTerm) bool {\n\treturn len(term.Namespaces) != 0 || term.NamespaceSelector != nil\n}"
  }
]