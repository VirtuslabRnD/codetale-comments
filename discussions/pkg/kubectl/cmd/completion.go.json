[
  {
    "id" : "a243b5b0-0404-4da5-8fa2-4c7a685d44da",
    "prId" : 50561,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/50561#pullrequestreview-56407589",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fb2cfcf5-b358-47f7-9cee-1c050efc4395",
        "parentId" : null,
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "this is a bad hint. Can we update it to: `echo 'source <(kubectl completion bash)' > $(brew --prefix)/etc/bash_completion.d/kubectl` ?",
        "createdAt" : "2017-08-15T06:42:33Z",
        "updatedAt" : "2017-08-18T21:29:55Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "f3cd37ce-81e6-444c-8c06-a0e92868405c",
        "parentId" : "fb2cfcf5-b358-47f7-9cee-1c050efc4395",
        "authorId" : "1256edc4-2c21-4b50-9371-9c0a50744653",
        "body" : "this actually isn't a bad hint.. if you pipe the output to this file, it will automatically be loaded by bash_completion on start\r\n\r\nref: https://kubernetes.io/docs/tasks/tools/install-kubectl/#enabling-shell-autocompletion",
        "createdAt" : "2017-08-15T17:22:29Z",
        "updatedAt" : "2017-08-18T21:29:55Z",
        "lastEditedBy" : "1256edc4-2c21-4b50-9371-9c0a50744653",
        "tags" : [
        ]
      }
    ],
    "commit" : "0153f8de1a17668cb8e0a38b02c81d77711a8285",
    "line" : 44,
    "diffHunk" : "@@ -1,1 +64,68 @@\t\t## If kubectl is installed via homebrew, this should start working immediately.\n\t\t## If you've installed via other means, you may need add the completion to your completion directory\n\t\t    kubectl completion bash > $(brew --prefix)/etc/bash_completion.d/kubectl\n\n"
  },
  {
    "id" : "b6c4a09d-d3f1-4021-9c41-10d674e951f5",
    "prId" : 50561,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/50561#pullrequestreview-56534227",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "27aae403-6f1f-4f7f-9109-5f964e9fdc40",
        "parentId" : null,
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "same here. This is a bad hint.",
        "createdAt" : "2017-08-15T06:43:13Z",
        "updatedAt" : "2017-08-18T21:29:55Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "78ec9ecd-8835-419f-805d-b8e0134cd463",
        "parentId" : "27aae403-6f1f-4f7f-9109-5f964e9fdc40",
        "authorId" : "1256edc4-2c21-4b50-9371-9c0a50744653",
        "body" : "This isn't a bad hint either. You're piping the output to a file, and then sourcing it. This is actually just reformatting what was already there.",
        "createdAt" : "2017-08-15T17:24:12Z",
        "updatedAt" : "2017-08-18T21:29:55Z",
        "lastEditedBy" : "1256edc4-2c21-4b50-9371-9c0a50744653",
        "tags" : [
        ]
      },
      {
        "id" : "855e58bb-af66-4f59-b891-5a3e128328f6",
        "parentId" : "27aae403-6f1f-4f7f-9109-5f964e9fdc40",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "We shouldn't store the output, but call `source <(kubectl completion bash)`. Otherwise, people will complain on the next kubectl update that things break.",
        "createdAt" : "2017-08-16T05:52:16Z",
        "updatedAt" : "2017-08-18T21:29:55Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      }
    ],
    "commit" : "0153f8de1a17668cb8e0a38b02c81d77711a8285",
    "line" : 51,
    "diffHunk" : "@@ -1,1 +71,75 @@\t\t    source <(kubectl completion bash)\n\t\t## Write bash completion code to a file and source if from .bash_profile\n\t\t    kubectl completion bash > ~/.kube/completion.bash.inc\n\t\t    printf \"\n\t\t      # Kubectl shell completion"
  },
  {
    "id" : "9149b48e-0361-4b0b-8337-bc865d3e8502",
    "prId" : 50561,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/50561#pullrequestreview-57015696",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2b2dc65e-8fed-48cb-9dd0-bd3a4a100cd6",
        "parentId" : null,
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "and again.",
        "createdAt" : "2017-08-15T06:43:44Z",
        "updatedAt" : "2017-08-18T21:29:55Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "c2b6f359-3bf8-401c-a177-aafcd495cc98",
        "parentId" : "2b2dc65e-8fed-48cb-9dd0-bd3a4a100cd6",
        "authorId" : "1256edc4-2c21-4b50-9371-9c0a50744653",
        "body" : "This is actually the step you do to load the kubectl completion on startup in zsh. zsh looks for a compdef in it's fpath",
        "createdAt" : "2017-08-15T17:24:50Z",
        "updatedAt" : "2017-08-18T21:29:55Z",
        "lastEditedBy" : "1256edc4-2c21-4b50-9371-9c0a50744653",
        "tags" : [
        ]
      },
      {
        "id" : "677a7185-31ab-4e43-bb06-2246935080b5",
        "parentId" : "2b2dc65e-8fed-48cb-9dd0-bd3a4a100cd6",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "I like this compdef approach. Just wondering whether we can combine it with `source <(kubectl completion zsh)`, i.e. not storing the output of kubectl, but sourcing it again when zsh loads the kubectl completion. The usecase I have in mind is that of kubectl which comes either via some packaging system or via the gcloud cli. I would bet people forget to update their completion when a new kubectl is installed.",
        "createdAt" : "2017-08-17T15:52:07Z",
        "updatedAt" : "2017-08-18T21:29:55Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "e8b180da-e26b-419b-85b1-a9471f2346fb",
        "parentId" : "2b2dc65e-8fed-48cb-9dd0-bd3a4a100cd6",
        "authorId" : "1256edc4-2c21-4b50-9371-9c0a50744653",
        "body" : "My concern is that both the bash completion [FAQ](https://github.com/scop/bash-completion#faq) and the zsh [docs](http://zsh.sourceforge.net/Doc/Release/Completion-System.html#index-completion-system_002c-autoloaded-functions) suggest that the preferred thing to do is to store them in a file. I agree that sourcing directly from the application keeps it up to date, but it could also be a performance issue loading the functions into memory instead of loading them as needed from files dynamically.",
        "createdAt" : "2017-08-17T18:32:24Z",
        "updatedAt" : "2017-08-18T21:29:55Z",
        "lastEditedBy" : "1256edc4-2c21-4b50-9371-9c0a50744653",
        "tags" : [
        ]
      }
    ],
    "commit" : "0153f8de1a17668cb8e0a38b02c81d77711a8285",
    "line" : 62,
    "diffHunk" : "@@ -1,1 +81,85 @@\t\t    source <(kubectl completion zsh)\n\t\t# Set the kubectl completion code for zsh[1] to autoload on startup\n\t\t    kubectl completion zsh > \"${fpath[1]}/_kubectl\"`))\n)\n"
  },
  {
    "id" : "3c793062-2033-4a33-b258-56a21aeac065",
    "prId" : 50561,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/50561#pullrequestreview-56966015",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "38e62a36-c911-4f7e-a85d-536781ba5ce2",
        "parentId" : null,
        "authorId" : "b1ad4056-936e-4ce6-ab7b-55870c4e6024",
        "body" : "+1 to having a single source of truth here.",
        "createdAt" : "2017-08-17T15:35:42Z",
        "updatedAt" : "2017-08-18T21:29:55Z",
        "lastEditedBy" : "b1ad4056-936e-4ce6-ab7b-55870c4e6024",
        "tags" : [
        ]
      }
    ],
    "commit" : "0153f8de1a17668cb8e0a38b02c81d77711a8285",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +52,56 @@\n\t\tDetailed instructions on how to do this are available here:\n\t\thttps://kubernetes.io/docs/tasks/tools/install-kubectl/#enabling-shell-autocompletion\n\n\t\tNote for zsh users: [1] zsh completions are only supported in versions of zsh >= 5.2`))"
  }
]