[
  {
    "id" : "063524a0-0f40-4e37-9d74-4d90aff797d9",
    "prId" : 38855,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/38855#pullrequestreview-13559392",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b1187ec3-e068-42a3-9fb7-1eea26d3f80a",
        "parentId" : null,
        "authorId" : "8e448017-7838-493d-a424-33cada0da657",
        "body" : "Please add unit tests to `goroutinemap_test.go`",
        "createdAt" : "2016-12-16T22:35:55Z",
        "updatedAt" : "2016-12-21T02:31:26Z",
        "lastEditedBy" : "8e448017-7838-493d-a424-33cada0da657",
        "tags" : [
        ]
      },
      {
        "id" : "a79f82b7-28ec-4777-a13f-0b2132bdaf56",
        "parentId" : "b1187ec3-e068-42a3-9fb7-1eea26d3f80a",
        "authorId" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "body" : "Added test.",
        "createdAt" : "2016-12-19T14:18:48Z",
        "updatedAt" : "2016-12-21T02:31:26Z",
        "lastEditedBy" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "tags" : [
        ]
      }
    ],
    "commit" : "7b423085faa2edd4cdcab44ac512f7b904e35383",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +66,70 @@\t// or have failed but are not pending. The test should wait until operations are either\n\t// complete or have failed.\n\tWaitForCompletion()\n\n\t// IsOperationPending returns true if the operation is pending (currently"
  },
  {
    "id" : "dd3f3b77-f1e2-41f5-9c25-aa4e03fb15b0",
    "prId" : 28939,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ec11b184-3038-4098-98a0-4aca4de78b2f",
        "parentId" : null,
        "authorId" : "9680f0db-1c00-49c9-968a-be3d5084d153",
        "body" : "@saad-ali Why are we changing the locking?\n",
        "createdAt" : "2016-07-19T17:45:21Z",
        "updatedAt" : "2016-07-20T04:54:49Z",
        "lastEditedBy" : "9680f0db-1c00-49c9-968a-be3d5084d153",
        "tags" : [
        ]
      },
      {
        "id" : "9b1f1377-a0a9-47ac-9951-22f35b587306",
        "parentId" : "ec11b184-3038-4098-98a0-4aca4de78b2f",
        "authorId" : "9680f0db-1c00-49c9-968a-be3d5084d153",
        "body" : "@smarterclayton \n",
        "createdAt" : "2016-07-19T18:07:09Z",
        "updatedAt" : "2016-07-20T04:54:49Z",
        "lastEditedBy" : "9680f0db-1c00-49c9-968a-be3d5084d153",
        "tags" : [
        ]
      },
      {
        "id" : "35baf92b-f1ed-43ba-9660-fdbd3cd47072",
        "parentId" : "ec11b184-3038-4098-98a0-4aca4de78b2f",
        "authorId" : "8e448017-7838-493d-a424-33cada0da657",
        "body" : "To address clayton's earlier comment:\n\n> nit: we prefer lock sync.Mutex because it prevents Mutex from being public to the goRoutineMap, unless you have a need for that.\n> I would prefer getting access to Lock being impossible from outside this object without a good justification.\n",
        "createdAt" : "2016-07-19T21:30:30Z",
        "updatedAt" : "2016-07-20T04:54:49Z",
        "lastEditedBy" : "8e448017-7838-493d-a424-33cada0da657",
        "tags" : [
        ]
      },
      {
        "id" : "51b361fa-0f39-4d72-8dfd-1689ba8c96ed",
        "parentId" : "ec11b184-3038-4098-98a0-4aca4de78b2f",
        "authorId" : "9680f0db-1c00-49c9-968a-be3d5084d153",
        "body" : "+1\n\nOn Tue, Jul 19, 2016 at 2:31 PM, Saad Ali notifications@github.com wrote:\n\n> In pkg/util/goroutinemap/goroutinemap.go\n> https://github.com/kubernetes/kubernetes/pull/28939#discussion_r71427500\n> :\n> \n> > ```\n> > return g\n> > ```\n> > \n> >  }\n> > \n> >  type goRoutineMap struct {\n> >     operations                map[string]operation\n> >     exponentialBackOffOnError bool\n> >     cond                      *sync.Cond\n> > -   sync.Mutex\n> > -   lock                      *sync.Mutex\n> \n> To address clayton's earlier comment:\n> \n> nit: we prefer lock sync.Mutex because it prevents Mutex from being public\n> to the goRoutineMap, unless you have a need for that.\n> I would prefer getting access to Lock being impossible from outside this\n> object without a good justification.\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> https://github.com/kubernetes/kubernetes/pull/28939/files/f344f35d4d1b693130ed5f82f76696c9064b2609#r71427500,\n> or mute the thread\n> https://github.com/notifications/unsubscribe-auth/ASzXe3rRsIQCYlsd5goLyTSUR5XsiCrJks5qXUIngaJpZM4JMGj8\n> .\n",
        "createdAt" : "2016-07-19T21:33:12Z",
        "updatedAt" : "2016-07-20T04:54:49Z",
        "lastEditedBy" : "9680f0db-1c00-49c9-968a-be3d5084d153",
        "tags" : [
        ]
      }
    ],
    "commit" : "88d495026dd3f741b1398531cbf6c484c0c03773",
    "line" : 58,
    "diffHunk" : "@@ -1,1 +77,81 @@\texponentialBackOffOnError bool\n\tcond                      *sync.Cond\n\tlock                      *sync.Mutex\n}\n"
  },
  {
    "id" : "78ece8de-a6dd-4808-9537-6d5a26106466",
    "prId" : 27970,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a6da51d7-ad13-4813-9d39-e31f9dd710ab",
        "parentId" : null,
        "authorId" : "8e448017-7838-493d-a424-33cada0da657",
        "body" : "Would be nice to have unit tests for new method. You can add them in a separate PR if you'd like.\n",
        "createdAt" : "2016-08-05T22:03:42Z",
        "updatedAt" : "2016-08-15T18:29:44Z",
        "lastEditedBy" : "8e448017-7838-493d-a424-33cada0da657",
        "tags" : [
        ]
      }
    ],
    "commit" : "f19a1148db1b7584be6b6b60abaf8c0bd1503ed3",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +62,66 @@\t// IsOperationPending returns true if the operation is pending, otherwise\n\t// returns false\n\tIsOperationPending(operationName string) bool\n}\n"
  },
  {
    "id" : "7b89576a-5a35-4133-86ca-3e147e3c1521",
    "prId" : 27567,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ad36ea5f-f9d8-4b00-8c69-9772a81c53bb",
        "parentId" : null,
        "authorId" : "44594ff0-8fbc-44a7-84f9-654ffd54270f",
        "body" : "Do we want to set an upper bound for the durationBeforeRetry\n",
        "createdAt" : "2016-06-20T21:13:48Z",
        "updatedAt" : "2016-06-21T01:20:41Z",
        "lastEditedBy" : "44594ff0-8fbc-44a7-84f9-654ffd54270f",
        "tags" : [
        ]
      },
      {
        "id" : "b8af810c-f5f5-45dc-81f3-cd109eea0c8d",
        "parentId" : "ad36ea5f-f9d8-4b00-8c69-9772a81c53bb",
        "authorId" : "8e448017-7838-493d-a424-33cada0da657",
        "body" : "Good idea. Done.\n",
        "createdAt" : "2016-06-21T00:40:03Z",
        "updatedAt" : "2016-06-21T01:20:41Z",
        "lastEditedBy" : "8e448017-7838-493d-a424-33cada0da657",
        "tags" : [
        ]
      }
    ],
    "commit" : "e716ddc771be0b4314590ca924547ab74b2ff684",
    "line" : 129,
    "diffHunk" : "@@ -1,1 +137,141 @@\t\t\texistingOp.durationBeforeRetry = initialDurationBeforeRetry\n\t\t} else {\n\t\t\texistingOp.durationBeforeRetry = 2 * existingOp.durationBeforeRetry\n\t\t\tif existingOp.durationBeforeRetry > maxDurationBeforeRetry {\n\t\t\t\texistingOp.durationBeforeRetry = maxDurationBeforeRetry"
  },
  {
    "id" : "c70e0a23-d0c5-4b13-9767-ca3373142f47",
    "prId" : 25597,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "26c56e0a-4fce-452b-999e-c8e915068188",
        "parentId" : null,
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "while you're at it, this should be GoroutineMap.  \"Goroutine\" is a noun.\n",
        "createdAt" : "2016-05-14T03:14:27Z",
        "updatedAt" : "2016-05-14T03:14:27Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      }
    ],
    "commit" : "f7196337c79fec9e19f36f40d8b8dc7d7ccdf8b4",
    "line" : 3,
    "diffHunk" : "@@ -1,1 +30,34 @@\n// GoRoutineMap defines the supported set of operations.\ntype GoRoutineMap interface {\n\t// Run adds operationName to the list of running operations and spawns a new\n\t// go routine to execute the operation. If an operation with the same name"
  },
  {
    "id" : "6322abaa-e7de-4245-a663-50aa55eb6b8a",
    "prId" : 25400,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "33303480-849e-45ff-bdaf-4489ae10454d",
        "parentId" : null,
        "authorId" : "8e448017-7838-493d-a424-33cada0da657",
        "body" : "nit: This method does not need to be public--it should only be called internally.\n",
        "createdAt" : "2016-05-10T18:45:06Z",
        "updatedAt" : "2016-05-16T09:40:11Z",
        "lastEditedBy" : "8e448017-7838-493d-a424-33cada0da657",
        "tags" : [
        ]
      },
      {
        "id" : "fef29d70-c89f-438a-8622-fe0e420f7f42",
        "parentId" : "33303480-849e-45ff-bdaf-4489ae10454d",
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "Not really, it's part of `error` interface\n",
        "createdAt" : "2016-05-11T08:20:17Z",
        "updatedAt" : "2016-05-16T09:40:11Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      },
      {
        "id" : "738cdca4-5f76-4816-a451-79e0e5b64e92",
        "parentId" : "33303480-849e-45ff-bdaf-4489ae10454d",
        "authorId" : "8e448017-7838-493d-a424-33cada0da657",
        "body" : "Ack\n",
        "createdAt" : "2016-05-11T18:33:26Z",
        "updatedAt" : "2016-05-16T09:40:11Z",
        "lastEditedBy" : "8e448017-7838-493d-a424-33cada0da657",
        "tags" : [
        ]
      }
    ],
    "commit" : "e5bea6abbae41feb872c42fe6a6494382f380ff2",
    "line" : 22,
    "diffHunk" : "@@ -1,1 +96,100 @@var _ error = alreadyExistsError{}\n\nfunc (err alreadyExistsError) Error() string {\n\treturn fmt.Sprintf(\"Failed to create operation with name %q. An operation with that name already exists\", err.operationName)\n}"
  },
  {
    "id" : "20c2c997-0449-4360-a65a-e28b28e63a6e",
    "prId" : 25400,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b034989c-a30e-48c6-bde2-955472ad8e49",
        "parentId" : null,
        "authorId" : "8e448017-7838-493d-a424-33cada0da657",
        "body" : "nit: add comment on public method\n",
        "createdAt" : "2016-05-10T18:45:35Z",
        "updatedAt" : "2016-05-16T09:40:11Z",
        "lastEditedBy" : "8e448017-7838-493d-a424-33cada0da657",
        "tags" : [
        ]
      },
      {
        "id" : "7863a8a9-cfd7-4077-9742-9454d400d2ec",
        "parentId" : "b034989c-a30e-48c6-bde2-955472ad8e49",
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "comment added.\n",
        "createdAt" : "2016-05-11T08:28:15Z",
        "updatedAt" : "2016-05-16T09:40:11Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      }
    ],
    "commit" : "e5bea6abbae41feb872c42fe6a6494382f380ff2",
    "line" : null,
    "diffHunk" : "@@ -1,1 +106,110 @@// IsAlreadyExists returns true if an error returned from NewGoRoutine indicates\n// that operation with the same name already exists.\nfunc IsAlreadyExists(err error) bool {\n\tswitch err.(type) {\n\tcase alreadyExistsError:"
  },
  {
    "id" : "1a0cccf3-42bd-402a-b982-a184de0a06ad",
    "prId" : 24838,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b25ca59f-1963-427d-85d3-7e6e321e134e",
        "parentId" : null,
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "@pmorie suggests to use sets.String from `pkg/util/sets`\n",
        "createdAt" : "2016-05-03T07:06:41Z",
        "updatedAt" : "2016-05-03T07:06:41Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      },
      {
        "id" : "84cf89a0-9e1f-4ec3-8a16-1f0f369a11be",
        "parentId" : "b25ca59f-1963-427d-85d3-7e6e321e134e",
        "authorId" : null,
        "body" : "I prefer this because it allows you to do `if mySet[myKey] {}`\n",
        "createdAt" : "2016-05-03T13:32:55Z",
        "updatedAt" : "2016-05-03T13:32:56Z",
        "lastEditedBy" : null,
        "tags" : [
        ]
      },
      {
        "id" : "2a7fbf93-bcfe-424c-99ea-d4a6fa09a951",
        "parentId" : "b25ca59f-1963-427d-85d3-7e6e321e134e",
        "authorId" : "8e448017-7838-493d-a424-33cada0da657",
        "body" : "> I prefer this because it allows you to do if mySet[myKey] {}\n\n+1\n",
        "createdAt" : "2016-05-03T20:21:33Z",
        "updatedAt" : "2016-05-03T20:21:33Z",
        "lastEditedBy" : "8e448017-7838-493d-a424-33cada0da657",
        "tags" : [
        ]
      },
      {
        "id" : "49e1925e-c879-4c80-bdde-ef4857d1a75b",
        "parentId" : "b25ca59f-1963-427d-85d3-7e6e321e134e",
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "good point\n",
        "createdAt" : "2016-05-04T07:59:46Z",
        "updatedAt" : "2016-05-04T07:59:46Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      }
    ],
    "commit" : "53bb527e352f385a2b5e4e95a4d09626350c70be",
    "line" : 50,
    "diffHunk" : "@@ -1,1 +48,52 @@\ntype goRoutineMap struct {\n\toperations map[string]bool\n\tsync.Mutex\n}"
  },
  {
    "id" : "ec999954-9a92-41b5-aa21-2f095732bd70",
    "prId" : 24838,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c29acc24-66de-4273-a49a-83c37e0e038d",
        "parentId" : null,
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "shouldn't this be called Run() or Go() ?\n",
        "createdAt" : "2016-05-13T22:18:01Z",
        "updatedAt" : "2016-05-13T22:18:01Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      },
      {
        "id" : "72808259-d850-42a0-880e-944c979a69c8",
        "parentId" : "c29acc24-66de-4273-a49a-83c37e0e038d",
        "authorId" : "8e448017-7838-493d-a424-33cada0da657",
        "body" : "Ya, that would make more sense :) I'll send out a PR.\n",
        "createdAt" : "2016-05-13T23:00:42Z",
        "updatedAt" : "2016-05-13T23:00:42Z",
        "lastEditedBy" : "8e448017-7838-493d-a424-33cada0da657",
        "tags" : [
        ]
      },
      {
        "id" : "ff191bdb-b4c4-453a-890a-644cf2620de4",
        "parentId" : "c29acc24-66de-4273-a49a-83c37e0e038d",
        "authorId" : "8e448017-7838-493d-a424-33cada0da657",
        "body" : "https://github.com/kubernetes/kubernetes/pull/25597\n",
        "createdAt" : "2016-05-13T23:07:43Z",
        "updatedAt" : "2016-05-13T23:07:43Z",
        "lastEditedBy" : "8e448017-7838-493d-a424-33cada0da657",
        "tags" : [
        ]
      }
    ],
    "commit" : "53bb527e352f385a2b5e4e95a4d09626350c70be",
    "line" : 39,
    "diffHunk" : "@@ -1,1 +37,41 @@\t// removed from the list of executing operations allowing a new operation\n\t// to be started with the same name without error.\n\tNewGoRoutine(operationName string, operation func() error) error\n}\n"
  }
]