[
  {
    "id" : "923b579a-284d-42d8-95ec-9b9245ad1c8b",
    "prId" : 73101,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/73101#pullrequestreview-194660011",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "11b6530b-e15d-4851-92e0-5a49bf10d980",
        "parentId" : null,
        "authorId" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "body" : "side note to future reviewers, `status` returns `0` even for missing services:\r\nhttps://www.calculate-linux.org/main/en/rc-service\r\nthus the string check from combined output.\r\n",
        "createdAt" : "2019-01-19T15:15:02Z",
        "updatedAt" : "2019-04-08T20:27:48Z",
        "lastEditedBy" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "tags" : [
        ]
      },
      {
        "id" : "0a0e7825-1647-4968-b787-340dfd213e22",
        "parentId" : "11b6530b-e15d-4851-92e0-5a49bf10d980",
        "authorId" : "cccc7bed-95f4-42a9-83ef-6ba1a4dca7ec",
        "body" : "We may need to put in a comment somewhere for this.",
        "createdAt" : "2019-01-21T11:22:21Z",
        "updatedAt" : "2019-04-08T20:27:48Z",
        "lastEditedBy" : "cccc7bed-95f4-42a9-83ef-6ba1a4dca7ec",
        "tags" : [
        ]
      },
      {
        "id" : "fd84729e-5863-42bd-98bd-4c584f7ebe48",
        "parentId" : "11b6530b-e15d-4851-92e0-5a49bf10d980",
        "authorId" : "969ffd54-0690-4f11-8bae-a7154c11c4e5",
        "body" : "If the service exists but it is not enabled , the exist code is[ 3 if openrc finds a service which is stopped](https://github.com/OpenRC/openrc/blob/eeba6df4761777be5af7f9a2876223155921ee37/sh/supervise-daemon.sh#L99).\r\nIn the [openrc the code is 1 if the service is not found](https://github.com/OpenRC/openrc/blob/025c9693ccab9c6220520ace47aa81553e7ea600/src/rc/rc-service.c#L126) \r\n@neolit123 , @rosti  what do you think about changing the code to:\r\n```\r\nfunc (openrc OpenRCInitSystem) ServiceExists(service string) bool {\r\n    args := []string{service, \"status\"}\r\n    cmd := exec.Command(\"rc-service\", args...)\r\n    var stderr bytes.Buffer\r\n    cmd.Stderr = &stderr\r\n    cmd.Run()\r\n    if strings.Contains(string(stderr.Bytes()), \"does not exist\") {\r\n    \treturn false\r\n    }\r\n    return true\r\n}\r\n```\r\nI am not sure how acceptable it is the k8s community not to handle the error return from `cmd.Run`. ",
        "createdAt" : "2019-01-21T14:40:04Z",
        "updatedAt" : "2019-04-08T20:27:48Z",
        "lastEditedBy" : "969ffd54-0690-4f11-8bae-a7154c11c4e5",
        "tags" : [
        ]
      },
      {
        "id" : "ce79c352-8f7f-49e5-8436-5e5751179d7c",
        "parentId" : "11b6530b-e15d-4851-92e0-5a49bf10d980",
        "authorId" : "969ffd54-0690-4f11-8bae-a7154c11c4e5",
        "body" : "I added the commit the latest commit.",
        "createdAt" : "2019-01-21T15:44:07Z",
        "updatedAt" : "2019-04-08T20:27:48Z",
        "lastEditedBy" : "969ffd54-0690-4f11-8bae-a7154c11c4e5",
        "tags" : [
        ]
      }
    ],
    "commit" : "2a40ef473f906b6a165690480dc000b9e5560258",
    "line" : 36,
    "diffHunk" : "@@ -1,1 +68,72 @@func (openrc OpenRCInitSystem) ServiceExists(service string) bool {\n\targs := []string{service, \"status\"}\n\toutBytes, _ := exec.Command(\"rc-service\", args...).CombinedOutput()\n\tif strings.Contains(string(outBytes), \"does not exist\") {\n\t\treturn false"
  },
  {
    "id" : "bccb782b-88ae-472c-b28b-a492403f75ad",
    "prId" : 73101,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/73101#pullrequestreview-194366808",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "05bf96ac-9f17-4251-9b43-8b8aff4b3a31",
        "parentId" : null,
        "authorId" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "body" : "please update the year in the header for this file from 2016 -> 2019.\r\n",
        "createdAt" : "2019-01-19T15:18:10Z",
        "updatedAt" : "2019-04-08T20:27:48Z",
        "lastEditedBy" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "tags" : [
        ]
      },
      {
        "id" : "b4225503-657a-4456-b999-e972a1b5b5eb",
        "parentId" : "05bf96ac-9f17-4251-9b43-8b8aff4b3a31",
        "authorId" : "969ffd54-0690-4f11-8bae-a7154c11c4e5",
        "body" : "done.",
        "createdAt" : "2019-01-19T19:07:40Z",
        "updatedAt" : "2019-04-08T20:27:48Z",
        "lastEditedBy" : "969ffd54-0690-4f11-8bae-a7154c11c4e5",
        "tags" : [
        ]
      }
    ],
    "commit" : "2a40ef473f906b6a165690480dc000b9e5560258",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +46,50 @@}\n\ntype OpenRCInitSystem struct{}\n\nfunc (openrc OpenRCInitSystem) ServiceStart(service string) error {"
  },
  {
    "id" : "717d2f98-91d3-426d-91a6-58ea556a3423",
    "prId" : 73101,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/73101#pullrequestreview-224469740",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e12c404f-6d6f-4af1-a3ff-dff4fc4295b6",
        "parentId" : null,
        "authorId" : "cccc7bed-95f4-42a9-83ef-6ba1a4dca7ec",
        "body" : "Why are we adding this one? Is it going to be used somewhere?",
        "createdAt" : "2019-04-09T10:51:50Z",
        "updatedAt" : "2019-04-09T10:55:17Z",
        "lastEditedBy" : "cccc7bed-95f4-42a9-83ef-6ba1a4dca7ec",
        "tags" : [
        ]
      },
      {
        "id" : "eaa45225-04fc-49ae-bc15-6dadaf0b202f",
        "parentId" : "e12c404f-6d6f-4af1-a3ff-dff4fc4295b6",
        "authorId" : "969ffd54-0690-4f11-8bae-a7154c11c4e5",
        "body" : "It is already defined in:\r\n\r\nhttps://github.com/kubernetes/kubernetes/blob/2a40ef473f906b6a165690480dc000b9e5560258/pkg/util/initsystem/initsystem.go#L171\r\n\r\nhttps://github.com/kubernetes/kubernetes/blob/2a40ef473f906b6a165690480dc000b9e5560258/pkg/util/initsystem/initsystem.go#L101\r\n\r\nThe next person after me, who will want to add an interface to init system foobar, should not guess this should be implemented. That is why I added this to Interface.",
        "createdAt" : "2019-04-09T13:44:13Z",
        "updatedAt" : "2019-04-09T13:44:14Z",
        "lastEditedBy" : "969ffd54-0690-4f11-8bae-a7154c11c4e5",
        "tags" : [
        ]
      },
      {
        "id" : "98ae1754-5307-4d7f-950b-7afb2fb2a6b1",
        "parentId" : "e12c404f-6d6f-4af1-a3ff-dff4fc4295b6",
        "authorId" : "cccc7bed-95f4-42a9-83ef-6ba1a4dca7ec",
        "body" : "It's not. These methods are added by this PR. This is the content of the latest master:\r\nhttps://github.com/kubernetes/kubernetes/blob/master/pkg/util/initsystem/initsystem.go",
        "createdAt" : "2019-04-09T14:14:09Z",
        "updatedAt" : "2019-04-09T14:14:10Z",
        "lastEditedBy" : "cccc7bed-95f4-42a9-83ef-6ba1a4dca7ec",
        "tags" : [
        ]
      },
      {
        "id" : "97c93837-9e55-4c95-ac0c-c7c81b77d8ad",
        "parentId" : "e12c404f-6d6f-4af1-a3ff-dff4fc4295b6",
        "authorId" : "969ffd54-0690-4f11-8bae-a7154c11c4e5",
        "body" : "Your comment was only on `EnableCommand`. I have added enable command to all init systems.\r\nThis is because it should be used by kubeadm to enbale the service in the future.\r\nCurrently this task is done by the package maintainer for the debian package.\r\n```\r\ngrep enable /var/lib/dpkg/info/kubelet.postinst \r\n# Automatically added by dh_systemd_enable\r\n# was-enabled defaults to true, so new installations run enable.\r\nif deb-systemd-helper --quiet was-enabled kubelet.service; then\r\n\tdeb-systemd-helper enable kubelet.service >/dev/null || true\r\n```\r\n\r\nBut this better be done explicitly by the package if one desires. \r\nRHEL based system do not enable services by default.\r\nThey only install them.",
        "createdAt" : "2019-04-09T15:09:31Z",
        "updatedAt" : "2019-04-09T15:09:32Z",
        "lastEditedBy" : "969ffd54-0690-4f11-8bae-a7154c11c4e5",
        "tags" : [
        ]
      }
    ],
    "commit" : "2a40ef473f906b6a165690480dc000b9e5560258",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +25,29 @@type InitSystem interface {\n\t// return a string describing how to enable a service\n\tEnableCommand(service string) string\n\n\t// ServiceStart tries to start a specific service"
  },
  {
    "id" : "a3f2c23b-7de9-4f28-9843-94d434f6a1ff",
    "prId" : 53553,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/53553#pullrequestreview-73066779",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "aa51ed0c-72ae-4ca8-82b8-c5e76da85611",
        "parentId" : null,
        "authorId" : "d0e97b49-eba2-4b22-8695-df4f8a6776ad",
        "body" : "Not going to make you do this, since this was already this way, but it would probably be good to switch to `util.exec` for testability...",
        "createdAt" : "2017-10-21T03:14:39Z",
        "updatedAt" : "2017-11-01T14:37:13Z",
        "lastEditedBy" : "d0e97b49-eba2-4b22-8695-df4f8a6776ad",
        "tags" : [
        ]
      },
      {
        "id" : "05a2609d-3550-471f-a7d5-ee098da259e9",
        "parentId" : "aa51ed0c-72ae-4ca8-82b8-c5e76da85611",
        "authorId" : "bfe6ebf1-cfa7-4758-abb1-9960fa09b194",
        "body" : "maybe @bsteciuk can follow up later?",
        "createdAt" : "2017-10-31T06:51:18Z",
        "updatedAt" : "2017-11-01T14:37:13Z",
        "lastEditedBy" : "bfe6ebf1-cfa7-4758-abb1-9960fa09b194",
        "tags" : [
        ]
      }
    ],
    "commit" : "44fbec29c4344517a75cb3e95b36e01d24e76af3",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +44,48 @@func (sysd SystemdInitSystem) ServiceStart(service string) error {\n\targs := []string{\"start\", service}\n\terr := exec.Command(\"systemctl\", args...).Run()\n\treturn err\n}"
  },
  {
    "id" : "5cd5a8ba-c7c3-451a-b12b-b3df689448e0",
    "prId" : 34341,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/34341#pullrequestreview-4112930",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "01741997-8aee-40f2-b224-15c73097aa46",
        "parentId" : null,
        "authorId" : "d37d9758-bdf5-4c23-a40e-a85099689a0c",
        "body" : "Just being curios: what would dbus/native code look like for this?\n",
        "createdAt" : "2016-10-13T16:37:03Z",
        "updatedAt" : "2016-10-13T16:50:42Z",
        "lastEditedBy" : "d37d9758-bdf5-4c23-a40e-a85099689a0c",
        "tags" : [
        ]
      }
    ],
    "commit" : "4231c046dd6830ab5cc52b7d0c8e80e811daf2e4",
    "line" : 39,
    "diffHunk" : "@@ -1,1 +37,41 @@func (sysd SystemdInitSystem) ServiceExists(service string) bool {\n\targs := []string{\"status\", service}\n\toutBytes, _ := exec.Command(\"systemctl\", args...).Output()\n\toutput := string(outBytes)\n\tif strings.Contains(output, \"Loaded: not-found\") {"
  }
]