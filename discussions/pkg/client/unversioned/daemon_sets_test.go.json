[
  {
    "id" : "70639930-7351-45f6-b711-d89448781896",
    "prId" : 18229,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fbba941d-1a43-464a-b5e3-5532f5754fb6",
        "parentId" : null,
        "authorId" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "body" : "unversionedTest?\n\nWe do not use underscores in go.\n",
        "createdAt" : "2015-12-04T21:30:58Z",
        "updatedAt" : "2015-12-09T18:40:15Z",
        "lastEditedBy" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "tags" : [
        ]
      },
      {
        "id" : "9c712667-7818-45b0-a105-88e8b4c5e83b",
        "parentId" : "fbba941d-1a43-464a-b5e3-5532f5754fb6",
        "authorId" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "body" : "That's the blackbox testing feature. https://splice.com/blog/lesser-known-features-go-test/\n\nAnd for the package name, I think the convention in this project is using under score.\n",
        "createdAt" : "2015-12-04T21:40:18Z",
        "updatedAt" : "2015-12-09T18:40:15Z",
        "lastEditedBy" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "tags" : [
        ]
      },
      {
        "id" : "87eccfa2-899b-443a-b369-e3d584c3a9d6",
        "parentId" : "fbba941d-1a43-464a-b5e3-5532f5754fb6",
        "authorId" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "body" : "> And for the package name, I think the convention in this project is using under score.\n\nWhere is the convention documented. Is there any other pkgs has underscore in names in k8s?\n",
        "createdAt" : "2015-12-04T21:49:53Z",
        "updatedAt" : "2015-12-09T18:40:15Z",
        "lastEditedBy" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "tags" : [
        ]
      },
      {
        "id" : "065d96d7-3805-4f12-9ad3-36e932063b79",
        "parentId" : "fbba941d-1a43-464a-b5e3-5532f5754fb6",
        "authorId" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "body" : "Actually it probably is a Go convention. If you `git grep \"^package .*_.*\"` in the repo you will find many examples.\n\nA black-box test example: https://github.com/kubernetes/kubernetes/blob/master/pkg/api/deep_copy_test.go#L17\n",
        "createdAt" : "2015-12-04T22:00:22Z",
        "updatedAt" : "2015-12-09T18:40:15Z",
        "lastEditedBy" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "tags" : [
        ]
      },
      {
        "id" : "38d49d24-613e-405e-9fa0-9d6296b5f091",
        "parentId" : "fbba941d-1a43-464a-b5e3-5532f5754fb6",
        "authorId" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "body" : "OK. The pkg naming convention is not using underscore in go. \nPlease check https://golang.org/doc/effective_go.html#package-names.\n\nI cannot see why you add the `_test` prefix. Test files that declare a package with the suffix \"_test\" will be compiled as a separate package, and then linked and run with the main test binary. The main reason we want to put it into a different pkg is to avoid circle import I think.\n",
        "createdAt" : "2015-12-04T23:20:06Z",
        "updatedAt" : "2015-12-09T18:40:15Z",
        "lastEditedBy" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "tags" : [
        ]
      },
      {
        "id" : "3a276be8-09cd-4221-851f-1ce435206903",
        "parentId" : "fbba941d-1a43-464a-b5e3-5532f5754fb6",
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "The _test suffix is actually a go convention. It has a special meaning, that we're going to test the public interface only. Take a look, for example, at the standard library strings package: https://golang.org/src/strings/search_test.go\n",
        "createdAt" : "2015-12-04T23:36:52Z",
        "updatedAt" : "2015-12-09T18:40:15Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      },
      {
        "id" : "386b0e2b-0c2e-4c99-9f05-85d1e5835348",
        "parentId" : "fbba941d-1a43-464a-b5e3-5532f5754fb6",
        "authorId" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "body" : "@lavalamp I know it has a special naming. I am not sure why do we want it for this file. And I want to clarify `_test` is not a pkg naming convention that we should use for any cases. \n",
        "createdAt" : "2015-12-04T23:40:12Z",
        "updatedAt" : "2015-12-09T18:40:15Z",
        "lastEditedBy" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "tags" : [
        ]
      },
      {
        "id" : "4da77fde-4090-41bc-abdc-f11833fc4447",
        "parentId" : "fbba941d-1a43-464a-b5e3-5532f5754fb6",
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "Go allows you to have files with `package \"x\"` and `package \"x_test\"` in the same directory, and it's the only case when you're allowed to have files with different package directives co-located like that.\n\nThere's two legit reasons for doing such a thing:\n1. You need to break an import cycle - I assume that is the case here. E.g., you want to test packages x and y, but y imports x. There's no way to do this if you're part of package x.\n2. You want to test the public interface and provably not access any private members.\n",
        "createdAt" : "2015-12-04T23:44:25Z",
        "updatedAt" : "2015-12-09T18:40:15Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      },
      {
        "id" : "6233798b-160d-4551-927c-b2acd4ee4f0e",
        "parentId" : "fbba941d-1a43-464a-b5e3-5532f5754fb6",
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "Sorry, I can't seem to find the official go documentation of this feature, but here is a decent explanation, scroll down to \"black-box test package\" https://splice.com/blog/lesser-known-features-go-test/\n",
        "createdAt" : "2015-12-04T23:47:43Z",
        "updatedAt" : "2015-12-09T18:40:15Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      },
      {
        "id" : "3af68765-e347-48d3-8035-a189d95ca045",
        "parentId" : "fbba941d-1a43-464a-b5e3-5532f5754fb6",
        "authorId" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "body" : "@lavalamp OK. I did not notice there is an import cycle by my eye. :( The unversion pkg is named to `client`.\n\n>  Sorry, I can't seem to find the official go documentation of this feature, but here is a decent explanation, scroll down to \"black-box test package\" https://splice.com/blog/lesser-known-features-go-test/\n\nThe official doc is at https://golang.org/cmd/go/#hdr-Test_packages. \n\nIt is the same as I mentioned 3 replies above.\n",
        "createdAt" : "2015-12-04T23:54:53Z",
        "updatedAt" : "2015-12-09T18:40:15Z",
        "lastEditedBy" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "tags" : [
        ]
      },
      {
        "id" : "5a502731-a12f-43c5-9065-414a825bdea6",
        "parentId" : "fbba941d-1a43-464a-b5e3-5532f5754fb6",
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "Ah gotcha, very sorry, clearly I did not read the above very carefully at all :)\n\nbtw, I believe your suggestion of \"unversionedTest\" will not compile, since there are other files in package \"unversioned\" in the directory.\n\nBut ordinarily, I agree that we wouldn't use \"_\" in a package name.\n",
        "createdAt" : "2015-12-05T00:01:43Z",
        "updatedAt" : "2015-12-09T18:40:15Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      },
      {
        "id" : "ec03d03a-6d60-4dcf-9465-8c2f50604b84",
        "parentId" : "fbba941d-1a43-464a-b5e3-5532f5754fb6",
        "authorId" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "body" : "Just to emphasize @xiang90's point: https://golang.org/doc/effective_go.html#package-names: \"there should be no need for underscores or mixedCaps\". though this rule is not strictly followed in our codebase.\n\n\"_test\" is a special case. And yes, we need to use it to break cyclic imports.\n",
        "createdAt" : "2015-12-05T00:03:38Z",
        "updatedAt" : "2015-12-09T18:40:15Z",
        "lastEditedBy" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "tags" : [
        ]
      },
      {
        "id" : "3b348ca6-ad7e-4722-98d5-1bfc8ee47590",
        "parentId" : "fbba941d-1a43-464a-b5e3-5532f5754fb6",
        "authorId" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "body" : "> btw, I believe your suggestion of \"unversionedTest\" will not compile,\n\nYea... I was wrong for the beginning. Did not take a very close look at the beginning.\n",
        "createdAt" : "2015-12-05T00:04:38Z",
        "updatedAt" : "2015-12-09T18:40:15Z",
        "lastEditedBy" : "55c0e4a8-86f8-4426-a163-752ee421c57e",
        "tags" : [
        ]
      }
    ],
    "commit" : "6f0eb521a63020b41358c6b0744608f1699e944c",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +15,19 @@*/\n\npackage unversioned_test\n\nimport ("
  }
]