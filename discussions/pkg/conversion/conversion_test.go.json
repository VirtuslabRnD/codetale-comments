[
  {
    "id" : "7efc8e6e-0f31-475e-a986-42bec22f14b2",
    "prId" : 7163,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "32193337-cf08-4d18-87b8-41e2d5bef64e",
        "parentId" : null,
        "authorId" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "body" : "I believe you need to keep a reference to this to keep the compiler from optimizing it out of the loop.  http://dave.cheney.net/2013/06/30/how-to-write-benchmarks-in-go\n",
        "createdAt" : "2015-04-22T14:39:41Z",
        "updatedAt" : "2015-04-22T14:39:41Z",
        "lastEditedBy" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "tags" : [
        ]
      },
      {
        "id" : "4f1a1ad8-6fc6-4535-9121-bd53e5d8ddea",
        "parentId" : "32193337-cf08-4d18-87b8-41e2d5bef64e",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "that's interesting - but from the:\nhttps://github.com/GoogleCloudPlatform/kubernetes/pull/7107#issuecomment-95208804\nit doesn't seem that compiler optimized it out.\n",
        "createdAt" : "2015-04-22T14:43:58Z",
        "updatedAt" : "2015-04-22T14:43:58Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      },
      {
        "id" : "c4e71364-a3ec-4b03-b3c8-adf40f0945dc",
        "parentId" : "32193337-cf08-4d18-87b8-41e2d5bef64e",
        "authorId" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "body" : "Yeah, I'm never positive - I'm pretty sure gccgo _will_ optimize it out, and ultimately I think we want golang to optimize that away if it can.\n\n----- Original Message -----\n\n> > -   data, err := ioutil.ReadFile(\"pod_example.json\")\n> > -   if err != nil {\n> > -       b.Fatalf(\"unexpected error while reading file: %v\", err)\n> > -   }\n> > -   var pod api.Pod\n> > -   if err := api.Scheme.DecodeInto(data, &pod); err != nil {\n> > -       b.Fatalf(\"unexpected error decoding pod: %v\", err)\n> > -   }\n> >   +\n> > -   scheme := api.Scheme.Raw()\n> > -   for i := 0; i < b.N; i++ {\n> > -       versionedObj, err := scheme.ConvertToVersion(&pod, testapi.Version())\n> > -       if err != nil {\n> > -           b.Fatalf(\"Conversion error: %v\", err)\n> > -       }\n> > -       _, err = scheme.ConvertToVersion(versionedObj, scheme.InternalVersion)\n> \n> that's interesting - but from the:\n> https://github.com/GoogleCloudPlatform/kubernetes/pull/7107#issuecomment-95208804\n> it doesn't seem that compiler optimized it out.\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/GoogleCloudPlatform/kubernetes/pull/7163/files#r28878916\n",
        "createdAt" : "2015-04-22T14:56:19Z",
        "updatedAt" : "2015-04-22T14:56:19Z",
        "lastEditedBy" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "tags" : [
        ]
      }
    ],
    "commit" : "ea314d55f709b9a4b8289731b777d951717bd3fd",
    "line" : 46,
    "diffHunk" : "@@ -1,1 +44,48 @@\t\t\tb.Fatalf(\"Conversion error: %v\", err)\n\t\t}\n\t\t_, err = scheme.ConvertToVersion(versionedObj, scheme.InternalVersion)\n\t\tif err != nil {\n\t\t\tb.Fatalf(\"Conversion error: %v\", err)"
  }
]