[
  {
    "id" : "3307f646-ca12-4887-b54c-e279ce5f3652",
    "prId" : 73455,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/73455#pullrequestreview-197881992",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ba8c82f6-87b5-400c-9599-afd4646d16d0",
        "parentId" : null,
        "authorId" : "6dd71efb-88b1-4bb0-b30a-0df658362f14",
        "body" : "ref: https://github.com/kubernetes/kubernetes/blob/master/pkg/util/strings/escape.go#L33 vs https://github.com/kubernetes/utils/blob/master/strings/escape.go#L35 ",
        "createdAt" : "2019-01-30T02:38:08Z",
        "updatedAt" : "2019-01-31T14:01:43Z",
        "lastEditedBy" : "6dd71efb-88b1-4bb0-b30a-0df658362f14",
        "tags" : [
        ]
      }
    ],
    "commit" : "cf1fb8a1cd1e908b29fbcc37d32375d820a6537b",
    "line" : 23,
    "diffHunk" : "@@ -1,1 +72,76 @@\texecPath := path.Join(pluginDir, name)\n\n\tdriverName := utilstrings.UnescapeQualifiedName(name)\n\n\tflexPlugin := &flexVolumePlugin{"
  },
  {
    "id" : "0a31578d-cf36-4288-bcd6-03b00775bfcd",
    "prId" : 73455,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/73455#pullrequestreview-197882136",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "99ec7595-dbb6-4813-8487-cd8510c59827",
        "parentId" : null,
        "authorId" : "6dd71efb-88b1-4bb0-b30a-0df658362f14",
        "body" : "ref: https://github.com/kubernetes/kubernetes/blob/master/pkg/util/strings/escape.go#L41 vs https://github.com/kubernetes/utils/blob/master/strings/escape.go#L28 ",
        "createdAt" : "2019-01-30T02:38:52Z",
        "updatedAt" : "2019-01-31T14:01:43Z",
        "lastEditedBy" : "6dd71efb-88b1-4bb0-b30a-0df658362f14",
        "tags" : [
        ]
      }
    ],
    "commit" : "cf1fb8a1cd1e908b29fbcc37d32375d820a6537b",
    "line" : 32,
    "diffHunk" : "@@ -1,1 +186,190 @@\tif plugin.capabilities.SupportsMetrics {\n\t\tmetricsProvider = volume.NewMetricsStatFS(plugin.host.GetPodVolumeDir(\n\t\t\tpod.UID, utilstrings.EscapeQualifiedName(sourceDriver), spec.Name()))\n\t} else {\n\t\tmetricsProvider = &volume.MetricsNil{}"
  },
  {
    "id" : "a05e0333-5f79-469e-82ca-f0c8ac7dbbda",
    "prId" : 67508,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/67508#pullrequestreview-150201046",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fc55995a-37ff-4c2b-b023-66b9a52f3037",
        "parentId" : null,
        "authorId" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "body" : "Is this accurate? Since flex is also used for ephemeral storage, any plugin that says it supports is going to default to statfs based implementation. The problem with that is - for ephemeral storage, the storage space could be shared with the host and hence statsfs likely will not return accurate information. Same as CSI, I am afraid this information has to come from plugin itself.\r\n\r\nIn fact - this is perhaps more applicable to flex than CSI because there are quite a bit of flex plugins that are used for ephemeral data/tokens etc. ",
        "createdAt" : "2018-08-23T19:13:31Z",
        "updatedAt" : "2018-08-23T19:13:31Z",
        "lastEditedBy" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "tags" : [
        ]
      },
      {
        "id" : "086d2ec7-ac87-45cc-8e2d-f28d240e100d",
        "parentId" : "fc55995a-37ff-4c2b-b023-66b9a52f3037",
        "authorId" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "body" : "cc @chakri-nelluri ",
        "createdAt" : "2018-08-23T19:15:49Z",
        "updatedAt" : "2018-08-23T19:15:49Z",
        "lastEditedBy" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "tags" : [
        ]
      },
      {
        "id" : "c5c472df-e1e2-4d69-b59b-707ce2606d6a",
        "parentId" : "fc55995a-37ff-4c2b-b023-66b9a52f3037",
        "authorId" : "cb578771-ab57-49a0-afd6-27da11c87c6d",
        "body" : "@gnufied If the plugins like ephemeral storage cannot support, can we assume they won't return true for SupportsMetrics? With that assumption, the change LGTM.",
        "createdAt" : "2018-08-24T08:49:51Z",
        "updatedAt" : "2018-08-24T08:49:51Z",
        "lastEditedBy" : "cb578771-ab57-49a0-afd6-27da11c87c6d",
        "tags" : [
        ]
      },
      {
        "id" : "715f8e88-75d7-4411-a2d9-61d0556e7340",
        "parentId" : "fc55995a-37ff-4c2b-b023-66b9a52f3037",
        "authorId" : "cb578771-ab57-49a0-afd6-27da11c87c6d",
        "body" : "We can extend this call to Flex driver, but given we are planning to phase out flex in favor of CSI, I would hold off extending it unless there is a real push asking for it.",
        "createdAt" : "2018-08-24T08:51:23Z",
        "updatedAt" : "2018-08-24T08:51:23Z",
        "lastEditedBy" : "cb578771-ab57-49a0-afd6-27da11c87c6d",
        "tags" : [
        ]
      },
      {
        "id" : "80976029-d8da-4f07-a604-38ad86220ec0",
        "parentId" : "fc55995a-37ff-4c2b-b023-66b9a52f3037",
        "authorId" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "body" : "okay, lets get this shipped. Does not sound like a blocker. ",
        "createdAt" : "2018-08-28T16:08:46Z",
        "updatedAt" : "2018-08-28T16:08:46Z",
        "lastEditedBy" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "tags" : [
        ]
      }
    ],
    "commit" : "6777dc7404af60ac6683951d2b83953b147e4de7",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +179,183 @@\n\tvar metricsProvider volume.MetricsProvider\n\tif plugin.capabilities.SupportsMetrics {\n\t\tmetricsProvider = volume.NewMetricsStatFS(plugin.host.GetPodVolumeDir(\n\t\t\tpod.UID, utilstrings.EscapeQualifiedNameForDisk(sourceDriver), spec.Name()))"
  },
  {
    "id" : "0329749b-c2c8-448b-b06d-569b210f809f",
    "prId" : 47503,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/47503#pullrequestreview-44366038",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "459a270d-064c-4318-b1bf-bbb8b0cbda49",
        "parentId" : null,
        "authorId" : "8e448017-7838-493d-a424-33cada0da657",
        "body" : "How about making the default false, aka non-attachable? And if a plugin implements attach, then they must explicitly also set capability to true?",
        "createdAt" : "2017-06-14T22:54:17Z",
        "updatedAt" : "2017-06-17T18:34:30Z",
        "lastEditedBy" : "8e448017-7838-493d-a424-33cada0da657",
        "tags" : [
        ]
      },
      {
        "id" : "0c0380f0-6243-4ccf-86ba-cee57eed590d",
        "parentId" : "459a270d-064c-4318-b1bf-bbb8b0cbda49",
        "authorId" : "cb578771-ab57-49a0-afd6-27da11c87c6d",
        "body" : "That is going to break existing plugins. That is the only reason. Doesn't benefit too much either-way.",
        "createdAt" : "2017-06-15T00:16:51Z",
        "updatedAt" : "2017-06-17T18:34:30Z",
        "lastEditedBy" : "cb578771-ab57-49a0-afd6-27da11c87c6d",
        "tags" : [
        ]
      },
      {
        "id" : "19e255c2-8bc6-4d82-8386-7da621cd38d8",
        "parentId" : "459a270d-064c-4318-b1bf-bbb8b0cbda49",
        "authorId" : "8e448017-7838-493d-a424-33cada0da657",
        "body" : "To clarify it would break existing post-1.6 drivers right? Pre-1.6 drivers would continue to work as is if the default was false, right?",
        "createdAt" : "2017-06-15T16:53:04Z",
        "updatedAt" : "2017-06-17T18:34:30Z",
        "lastEditedBy" : "8e448017-7838-493d-a424-33cada0da657",
        "tags" : [
        ]
      },
      {
        "id" : "54c7eab4-9b22-4aac-8d3f-571171af2a99",
        "parentId" : "459a270d-064c-4318-b1bf-bbb8b0cbda49",
        "authorId" : "cb578771-ab57-49a0-afd6-27da11c87c6d",
        "body" : "Yes. For Post 1.6 drivers. Users have to modify their drivers to work for 1.6+ anyways, because of change mount callout.",
        "createdAt" : "2017-06-15T17:08:54Z",
        "updatedAt" : "2017-06-17T18:34:30Z",
        "lastEditedBy" : "cb578771-ab57-49a0-afd6-27da11c87c6d",
        "tags" : [
        ]
      },
      {
        "id" : "6df7f587-c0b5-4a1b-a827-59d9fce82f59",
        "parentId" : "459a270d-064c-4318-b1bf-bbb8b0cbda49",
        "authorId" : "8e448017-7838-493d-a424-33cada0da657",
        "body" : "Ack. Ok fine to leave as is.",
        "createdAt" : "2017-06-15T17:35:25Z",
        "updatedAt" : "2017-06-17T18:34:30Z",
        "lastEditedBy" : "8e448017-7838-493d-a424-33cada0da657",
        "tags" : [
        ]
      }
    ],
    "commit" : "894b9b2add77034772cc8860857ca566a1eee110",
    "line" : 61,
    "diffHunk" : "@@ -1,1 +86,90 @@\t}\n\n\t// By default all plugins are attachable, unless they report otherwise.\n\tcap, ok := res.Capabilities[attachCapability]\n\tif ok {"
  },
  {
    "id" : "4a4f99d7-ea59-4b34-b71d-c61c6e1527ec",
    "prId" : 46382,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/46382#pullrequestreview-42187784",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a711de73-e2f9-41fa-b90c-a62781536c1d",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "not a big deal, but I would have expected `flexvolume.kubernetes.io/...`",
        "createdAt" : "2017-06-02T14:31:03Z",
        "updatedAt" : "2017-06-13T01:04:00Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "f2806bd0-c861-4b67-97af-553804ecc830",
        "parentId" : "a711de73-e2f9-41fa-b90c-a62781536c1d",
        "authorId" : "34f61776-88da-4b26-aa20-3c4f92530d05",
        "body" : "Not sure if there'd be an issue with two '/' s, since vendor and driver are separated by a slash in driverName as well. /cc @chakri-nelluri ",
        "createdAt" : "2017-06-06T00:33:54Z",
        "updatedAt" : "2017-06-13T01:04:00Z",
        "lastEditedBy" : "34f61776-88da-4b26-aa20-3c4f92530d05",
        "tags" : [
        ]
      }
    ],
    "commit" : "8b2e1b55e05da4e0737220dbcf03b388740ffc9e",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +63,67 @@// Name is part of the volume.VolumePlugin interface.\nfunc (plugin *flexVolumePlugin) GetPluginName() string {\n\treturn \"flexvolume-\" + plugin.driverName\n}\n"
  },
  {
    "id" : "f1deb3bc-6a9f-4ed6-b7f8-3b97fa49e8aa",
    "prId" : 41804,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/41804#pullrequestreview-23837447",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3db008b6-51f6-455b-af2f-3c8e22afd30a",
        "parentId" : null,
        "authorId" : "8e448017-7838-493d-a424-33cada0da657",
        "body" : "Trying to understand this. Is the purpose here to have a cache, so that you can fail fast based on previous invocations of driver, instead of having to invoke the driver and parse the response every time?\r\n\r\nAlso, does the `plugin` object  have a separate instance for every driver? How is that controlled?",
        "createdAt" : "2017-02-23T22:20:52Z",
        "updatedAt" : "2017-02-25T01:18:26Z",
        "lastEditedBy" : "8e448017-7838-493d-a424-33cada0da657",
        "tags" : [
        ]
      },
      {
        "id" : "80ac3f90-c556-43c8-8cb2-bb3cf59f23e2",
        "parentId" : "3db008b6-51f6-455b-af2f-3c8e22afd30a",
        "authorId" : "8e448017-7838-493d-a424-33cada0da657",
        "body" : "> Yes. It is for optimization.\r\n> We have a separate plugin object for each driver.\r\n\r\nAck.",
        "createdAt" : "2017-02-24T23:52:41Z",
        "updatedAt" : "2017-02-25T01:18:26Z",
        "lastEditedBy" : "8e448017-7838-493d-a424-33cada0da657",
        "tags" : [
        ]
      }
    ],
    "commit" : "0d2af70e95dc25141d6d179a088b3d1af26eb206",
    "line" : 173,
    "diffHunk" : "@@ -1,1 +171,175 @@\tplugin.Lock()\n\tdefer plugin.Unlock()\n\tplugin.unsupportedCommands = append(plugin.unsupportedCommands, commands...)\n}\n"
  }
]