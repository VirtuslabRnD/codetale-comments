[
  {
    "id" : "9b4196ef-1a85-4054-b786-7359cdebde00",
    "prId" : 78267,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/78267#pullrequestreview-244062642",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7fafb4ed-5ece-4a66-b0d0-21e5cd106773",
        "parentId" : null,
        "authorId" : "542e5d2f-2ff9-4674-ab44-78f31768e7a1",
        "body" : "I'm not sure what this entire block does. It seems like there is no result from this. the errors we're checking for in here could be other unit tests but I don't think need to be captured in the unmap test.\r\n\r\nAFAIK `translateSpec` and `NewBlockVolumeMapper` would be implementations details of `GenerateUnmapVolumeFunc` which we're actually testing later anyway",
        "createdAt" : "2019-05-28T23:14:22Z",
        "updatedAt" : "2019-06-11T05:33:12Z",
        "lastEditedBy" : "542e5d2f-2ff9-4674-ab44-78f31768e7a1",
        "tags" : [
        ]
      },
      {
        "id" : "36febf7d-67f6-4450-ada7-2912666735ce",
        "parentId" : "7fafb4ed-5ece-4a66-b0d0-21e5cd106773",
        "authorId" : "2b5e7cd9-1cd6-4552-b858-212c3c30dc28",
        "body" : "Actually I wrote this part to run the test, not to test the behavior of some functionality related with this part, because `GenerateUnmapVolumeFunc` call [`blockVolumePlugin.NewBlockVolumeUnmapper`](https://github.com/kubernetes/kubernetes/blob/3ccb63bb1b4d8a9e9a5e32bdd2750e44a6067ad4/pkg/volume/util/operationexecutor/operation_generator.go#L1198) and when the plugin is csi, csi plugin [looks a file](https://github.com/kubernetes/kubernetes/blob/3ccb63bb1b4d8a9e9a5e32bdd2750e44a6067ad4/pkg/volume/csi/csi_plugin.go#L699) that contains some information about the volume, and `GenerateUnmapVolumeFunc`fails if csi plugin can't find that file.\r\n\r\nI call `plugin.NewBlockVolumeMapper` for csi enabled case to create that file.",
        "createdAt" : "2019-05-29T01:18:50Z",
        "updatedAt" : "2019-06-11T05:33:12Z",
        "lastEditedBy" : "2b5e7cd9-1cd6-4552-b858-212c3c30dc28",
        "tags" : [
        ]
      },
      {
        "id" : "ac8d9a21-9e03-4437-91f0-86537eb371df",
        "parentId" : "7fafb4ed-5ece-4a66-b0d0-21e5cd106773",
        "authorId" : "542e5d2f-2ff9-4674-ab44-78f31768e7a1",
        "body" : "Thanks for the explanation, I get it now! Could you add a comment in the code explaining this. It's not clear from reading the code why `NewBlockVolumeMapper` is being called",
        "createdAt" : "2019-05-29T01:38:02Z",
        "updatedAt" : "2019-06-11T05:33:12Z",
        "lastEditedBy" : "542e5d2f-2ff9-4674-ab44-78f31768e7a1",
        "tags" : [
        ]
      },
      {
        "id" : "6718ea27-c8f1-461d-9dfe-a63e71fadac4",
        "parentId" : "7fafb4ed-5ece-4a66-b0d0-21e5cd106773",
        "authorId" : "2b5e7cd9-1cd6-4552-b858-212c3c30dc28",
        "body" : "fixed, thanks!",
        "createdAt" : "2019-05-30T22:34:34Z",
        "updatedAt" : "2019-06-11T05:33:12Z",
        "lastEditedBy" : "2b5e7cd9-1cd6-4552-b858-212c3c30dc28",
        "tags" : [
        ]
      }
    ],
    "commit" : "db1c07750aa66ef02c2db06446a7b792181ae3e5",
    "line" : 123,
    "diffHunk" : "@@ -1,1 +121,125 @@\t\tvolumeToUnmount := getTestVolumeToUnmount(pod, tc.pvSpec, tc.pluginName)\n\n\t\tif tc.isCsiMigrationEnabled {\n\t\t\t// GenerateUnmapVolumeFunc call blockVolumePlugin.NewBlockVolumeUnmapper and when the plugin is csi,\n\t\t\t// csi plugin looks a file that contains some information about the volume,"
  },
  {
    "id" : "42588024-ec56-4660-bc8f-7feeba3bcbef",
    "prId" : 78267,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/78267#pullrequestreview-245661232",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "72e51b43-a26a-4078-adfc-97e7efeae844",
        "parentId" : null,
        "authorId" : "542e5d2f-2ff9-4674-ab44-78f31768e7a1",
        "body" : "`if !tc.isCsiMigrationEnabled` we should explicitly turn off the feature gates in preparation for whenever the gates are on by default.",
        "createdAt" : "2019-06-03T20:34:26Z",
        "updatedAt" : "2019-06-11T05:33:12Z",
        "lastEditedBy" : "542e5d2f-2ff9-4674-ab44-78f31768e7a1",
        "tags" : [
        ]
      },
      {
        "id" : "bb836af5-146c-4210-83b7-2844de72e56e",
        "parentId" : "72e51b43-a26a-4078-adfc-97e7efeae844",
        "authorId" : "2b5e7cd9-1cd6-4552-b858-212c3c30dc28",
        "body" : "fixed, thanks!",
        "createdAt" : "2019-06-04T19:41:30Z",
        "updatedAt" : "2019-06-11T05:33:12Z",
        "lastEditedBy" : "2b5e7cd9-1cd6-4552-b858-212c3c30dc28",
        "tags" : [
        ]
      }
    ],
    "commit" : "db1c07750aa66ef02c2db06446a7b792181ae3e5",
    "line" : 111,
    "diffHunk" : "@@ -1,1 +109,113 @@\t\tif tc.isCsiMigrationEnabled {\n\t\t\texpectedPluginName = fmt.Sprintf(\"%s:%s\", csi.CSIPluginName, tc.csiDriverName)\n\t\t}\n\t\tdefer featuregatetesting.SetFeatureGateDuringTest(t, utilfeature.DefaultFeatureGate, features.CSIMigration, tc.isCsiMigrationEnabled)()\n\t\tdefer featuregatetesting.SetFeatureGateDuringTest(t, utilfeature.DefaultFeatureGate, tc.csiMigrationFeature, tc.isCsiMigrationEnabled)()"
  },
  {
    "id" : "e6f6cab3-afc5-439f-bd88-7e93b0c6964e",
    "prId" : 78267,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/78267#pullrequestreview-245721161",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ba51ce78-6562-413e-8b29-ad6f3c991684",
        "parentId" : null,
        "authorId" : "542e5d2f-2ff9-4674-ab44-78f31768e7a1",
        "body" : "are there no helper functions that exist in the codebase that do this exact thing? It's fine if the answer is no, but I'm just curious. Want to avoid duplicating code as much as possible",
        "createdAt" : "2019-06-03T20:37:59Z",
        "updatedAt" : "2019-06-11T05:33:12Z",
        "lastEditedBy" : "542e5d2f-2ff9-4674-ab44-78f31768e7a1",
        "tags" : [
        ]
      },
      {
        "id" : "6d8c7282-91f9-4c52-96dd-be9f66977194",
        "parentId" : "ba51ce78-6562-413e-8b29-ad6f3c991684",
        "authorId" : "2b5e7cd9-1cd6-4552-b858-212c3c30dc28",
        "body" : "I found [some functions](https://github.com/kubernetes/kubernetes/blob/master/staging/src/k8s.io/apiserver/pkg/admission/metrics/testutil_test.go) that do the similar things but couldn't be sure about refactoring them to reuse, wdyt?",
        "createdAt" : "2019-06-04T19:40:03Z",
        "updatedAt" : "2019-06-11T05:33:12Z",
        "lastEditedBy" : "2b5e7cd9-1cd6-4552-b858-212c3c30dc28",
        "tags" : [
        ]
      },
      {
        "id" : "e779e690-14cf-42ce-8516-98fdf655f972",
        "parentId" : "ba51ce78-6562-413e-8b29-ad6f3c991684",
        "authorId" : "542e5d2f-2ff9-4674-ab44-78f31768e7a1",
        "body" : "I think it's fine to not refactor. I was hoping there would be some common util functions that already exist but it seems like that's not the case.",
        "createdAt" : "2019-06-04T21:48:40Z",
        "updatedAt" : "2019-06-11T05:33:12Z",
        "lastEditedBy" : "542e5d2f-2ff9-4674-ab44-78f31768e7a1",
        "tags" : [
        ]
      }
    ],
    "commit" : "db1c07750aa66ef02c2db06446a7b792181ae3e5",
    "line" : 169,
    "diffHunk" : "@@ -1,1 +167,171 @@}\n\nfunc findMetricWithNameAndLabels(metricFamilyName string, labelFilter map[string]string) *io_prometheus_client.Metric {\n\tmetricFamily := getMetricFamily(metricFamilyName)\n\tif metricFamily == nil {"
  }
]