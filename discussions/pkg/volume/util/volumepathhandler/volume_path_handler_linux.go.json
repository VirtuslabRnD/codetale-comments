[
  {
    "id" : "7536ef8e-c71f-4fb1-af9b-5031b0e62f09",
    "prId" : 96889,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/96889#pullrequestreview-561823071",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "405779a6-3f28-4d48-bc28-57041fa66f15",
        "parentId" : null,
        "authorId" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "body" : "should we instead call `losetup` on expanded path, so as if behaviour of losetup changes in future - we don't break anything?",
        "createdAt" : "2020-12-15T02:19:27Z",
        "updatedAt" : "2020-12-16T08:34:25Z",
        "lastEditedBy" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "tags" : [
        ]
      },
      {
        "id" : "755b3e8c-8751-40e2-9816-3603e550eb89",
        "parentId" : "405779a6-3f28-4d48-bc28-57041fa66f15",
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "I think evaluating paths before calling losetup is not useful. But I see your point, I added check for both `realPath` and original `path`, just in case.",
        "createdAt" : "2020-12-16T08:35:27Z",
        "updatedAt" : "2020-12-16T08:35:28Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      },
      {
        "id" : "4bd9da29-fdf6-4a3f-9cf9-bb03df8a3447",
        "parentId" : "405779a6-3f28-4d48-bc28-57041fa66f15",
        "authorId" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "body" : "> I think evaluating paths before calling losetup is not useful.\r\n\r\nCan you explain why is it not useful? Do you foresee any breakage? From very afar it sounds like it is better to pass expanded path to losetup and scan for only one path rather than two (both real and symlink).",
        "createdAt" : "2020-12-18T15:52:52Z",
        "updatedAt" : "2020-12-18T15:53:16Z",
        "lastEditedBy" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "tags" : [
        ]
      },
      {
        "id" : "226fee83-84cc-4f19-9cc4-eb58b35c2187",
        "parentId" : "405779a6-3f28-4d48-bc28-57041fa66f15",
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "The initial concern was that losetup can change in the future and it may not expand symlinks in `losetup -j` output. So if it lists symlinks instead of evaluating them, we should check for the unevaluated path too.",
        "createdAt" : "2021-01-05T14:17:49Z",
        "updatedAt" : "2021-01-05T14:17:49Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      }
    ],
    "commit" : "357a8c3f550a91912332cb41ceac790caf00e9f1",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +135,139 @@\tif err != nil {\n\t\treturn \"\", fmt.Errorf(\"failed to evaluate path %s: %s\", path, err)\n\t}\n\n\t// losetup -j {path} returns device in the format:"
  }
]