[
  {
    "id" : "238e3f7e-a768-4b2d-a908-44a2ff24ecd5",
    "prId" : 27970,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "67dd4065-e534-47fa-85b0-75a9a657c4f2",
        "parentId" : null,
        "authorId" : "8e448017-7838-493d-a424-33cada0da657",
        "body" : "Is this correct fo flocker? If not, leave it unset.\n",
        "createdAt" : "2016-08-06T03:53:42Z",
        "updatedAt" : "2016-08-15T18:29:44Z",
        "lastEditedBy" : "8e448017-7838-493d-a424-33cada0da657",
        "tags" : [
        ]
      },
      {
        "id" : "8aff7c6e-96f3-42dd-858b-a7ad9c4fcd33",
        "parentId" : "67dd4065-e534-47fa-85b0-75a9a657c4f2",
        "authorId" : "44594ff0-8fbc-44a7-84f9-654ffd54270f",
        "body" : "keep it for now because it is used in create UniqueVolumeName\n",
        "createdAt" : "2016-08-12T18:06:12Z",
        "updatedAt" : "2016-08-15T18:29:44Z",
        "lastEditedBy" : "44594ff0-8fbc-44a7-84f9-654ffd54270f",
        "tags" : [
        ]
      }
    ],
    "commit" : "f19a1148db1b7584be6b6b60abaf8c0bd1503ed3",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +123,127 @@\t\tVolumeSource: api.VolumeSource{\n\t\t\tFlocker: &api.FlockerVolumeSource{\n\t\t\t\tDatasetName: volumeName,\n\t\t\t},\n\t\t},"
  },
  {
    "id" : "7eab2f03-ca0c-4657-9b53-6cc1d85a344a",
    "prId" : 15352,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ad89f418-a5d8-4214-85f5-a166b1ee0486",
        "parentId" : null,
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "@agonzalezro any idea what to do for Flocker here?\n",
        "createdAt" : "2015-10-21T04:41:48Z",
        "updatedAt" : "2015-10-22T20:41:20Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      },
      {
        "id" : "467fb809-e7c3-4b39-a6eb-b50a56de9ef8",
        "parentId" : "ad89f418-a5d8-4214-85f5-a166b1ee0486",
        "authorId" : "5d21b690-19ff-4630-9f4f-14bdd9e68b16",
        "body" : "Hi, I spoke with @mattbates about this and Flocker is running (and it's mounting the volumes) as root. I don't know if this is going to cause any troubles in the future related with this PR. How could we check further? And what exactly do we need to check?\n",
        "createdAt" : "2015-10-21T20:19:10Z",
        "updatedAt" : "2015-10-22T20:41:20Z",
        "lastEditedBy" : "5d21b690-19ff-4630-9f4f-14bdd9e68b16",
        "tags" : [
        ]
      },
      {
        "id" : "0722d226-edc3-44f1-87d1-52a8373f6e97",
        "parentId" : "ad89f418-a5d8-4214-85f5-a166b1ee0486",
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "The main question is whether we can know whether flocker volumes are ever\nused in a shared mode (like NFS) or only in exclusive mode\n\nOn Wed, Oct 21, 2015 at 1:19 PM, Alexandre González <\nnotifications@github.com> wrote:\n\n> In pkg/volume/flocker/plugin.go\n> https://github.com/kubernetes/kubernetes/pull/15352#discussion_r42676406\n> :\n> \n> > @@ -113,6 +113,10 @@ type flockerBuilder struct {\n> >     readOnly bool\n> >  }\n> > \n> > +func (_ *flockerBuilder) SupportsOwnershipManagement() bool {\n> > -   return false\n> \n> Hi, I spoke with @mattbates https://github.com/mattbates about this and\n> Flocker is run (and it's mounting the volumes) as root. I don't know if\n> this is going to cause any troubles in the future related with this PR. How\n> could we check further? And what exactly do we need to check?\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/kubernetes/kubernetes/pull/15352/files#r42676406.\n",
        "createdAt" : "2015-10-21T20:43:49Z",
        "updatedAt" : "2015-10-22T20:41:20Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      },
      {
        "id" : "c573ac96-7092-497b-84fa-ec448971a3f5",
        "parentId" : "ad89f418-a5d8-4214-85f5-a166b1ee0486",
        "authorId" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "body" : "I am going to assume this is `false` for now.  We can enable it later once @agonzalezro has a chance to catch up with the work and make a call.\n",
        "createdAt" : "2015-10-21T21:34:44Z",
        "updatedAt" : "2015-10-22T20:41:20Z",
        "lastEditedBy" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "tags" : [
        ]
      }
    ],
    "commit" : "3cd12f5e0580e330a77412a6d722fd51d9dfe57f",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +115,119 @@\nfunc (_ *flockerBuilder) SupportsOwnershipManagement() bool {\n\treturn false\n}\n"
  },
  {
    "id" : "a22600fb-894e-4246-ad5d-0a2c8feafc3b",
    "prId" : 14328,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d674e606-1f4d-4c78-9418-dbeb92c359aa",
        "parentId" : null,
        "authorId" : "727fc82d-d969-41a4-a614-7fefce94f9a6",
        "body" : "You can just `return spec.Volume != nil && spec.Volume.Flocker != nil`\n\nThis plugin is not a Persistent Volume, so you can ignore that part of the CanSupport check.\n",
        "createdAt" : "2015-09-22T02:00:10Z",
        "updatedAt" : "2015-10-01T00:12:35Z",
        "lastEditedBy" : "727fc82d-d969-41a4-a614-7fefce94f9a6",
        "tags" : [
        ]
      },
      {
        "id" : "323b26bb-1b8a-4e2b-a2f9-02f7065d212a",
        "parentId" : "d674e606-1f4d-4c78-9418-dbeb92c359aa",
        "authorId" : "727fc82d-d969-41a4-a614-7fefce94f9a6",
        "body" : "nm :) I overlooked Flocker in the PVVolumeSource struct.  Your check above is correct.\n",
        "createdAt" : "2015-09-22T02:05:13Z",
        "updatedAt" : "2015-10-01T00:12:35Z",
        "lastEditedBy" : "727fc82d-d969-41a4-a614-7fefce94f9a6",
        "tags" : [
        ]
      }
    ],
    "commit" : "fa39c2b0321a1d63665b24559746f9323c2f4fb7",
    "line" : null,
    "diffHunk" : "@@ -1,1 +71,75 @@\nfunc (p flockerPlugin) CanSupport(spec *volume.Spec) bool {\n\treturn (spec.PersistentVolume != nil && spec.PersistentVolume.Spec.Flocker != nil) ||\n\t\t(spec.Volume != nil && spec.Volume.Flocker != nil)\n}"
  },
  {
    "id" : "a8d9fc14-c425-4268-a15b-d15a67d1f844",
    "prId" : 14328,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "73bab176-ac48-4452-adda-75c72644814d",
        "parentId" : null,
        "authorId" : "727fc82d-d969-41a4-a614-7fefce94f9a6",
        "body" : "Not a PV.  This last line will panic.\n",
        "createdAt" : "2015-09-22T02:02:28Z",
        "updatedAt" : "2015-10-01T00:12:35Z",
        "lastEditedBy" : "727fc82d-d969-41a4-a614-7fefce94f9a6",
        "tags" : [
        ]
      },
      {
        "id" : "379ab1f4-0ed1-42e7-b468-c2e399538938",
        "parentId" : "73bab176-ac48-4452-adda-75c72644814d",
        "authorId" : "727fc82d-d969-41a4-a614-7fefce94f9a6",
        "body" : "Same as above.  I missed flocker in PV struct.  Looks good here.\n",
        "createdAt" : "2015-09-22T02:06:00Z",
        "updatedAt" : "2015-10-01T00:12:35Z",
        "lastEditedBy" : "727fc82d-d969-41a4-a614-7fefce94f9a6",
        "tags" : [
        ]
      }
    ],
    "commit" : "fa39c2b0321a1d63665b24559746f9323c2f4fb7",
    "line" : 84,
    "diffHunk" : "@@ -1,1 +82,86 @@\t\treturn spec.Volume.Flocker, readOnly\n\t}\n\treturn spec.PersistentVolume.Spec.Flocker, readOnly\n}\n"
  },
  {
    "id" : "8e0d0a97-72ea-4b8e-ab41-6a1907e97e9c",
    "prId" : 14328,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a6a7b640-c8d7-4dc1-a6d6-1b0c83b49207",
        "parentId" : null,
        "authorId" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "body" : "you don't want to delete the volume?\n",
        "createdAt" : "2015-09-22T13:46:49Z",
        "updatedAt" : "2015-10-01T00:12:35Z",
        "lastEditedBy" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "tags" : [
        ]
      },
      {
        "id" : "2e0eab25-3084-4588-9622-ea7aa14ec2fd",
        "parentId" : "a6a7b640-c8d7-4dc1-a6d6-1b0c83b49207",
        "authorId" : "5d21b690-19ff-4630-9f4f-14bdd9e68b16",
        "body" : "The idea of Flocker is that you can move it between pods. I don't see at this stage any need for removing volume. Flocker agent will mount/dismount it when needed.\n",
        "createdAt" : "2015-09-22T17:45:01Z",
        "updatedAt" : "2015-10-01T00:12:35Z",
        "lastEditedBy" : "5d21b690-19ff-4630-9f4f-14bdd9e68b16",
        "tags" : [
        ]
      },
      {
        "id" : "6b9efa9a-3fb1-4c18-b176-b75ca57fab6e",
        "parentId" : "a6a7b640-c8d7-4dc1-a6d6-1b0c83b49207",
        "authorId" : "727fc82d-d969-41a4-a614-7fefce94f9a6",
        "body" : "But when the volume is moved between pods and between hosts, don't you want to clean up the orphaned directory on the old host?\n",
        "createdAt" : "2015-09-23T02:25:34Z",
        "updatedAt" : "2015-10-01T00:12:35Z",
        "lastEditedBy" : "727fc82d-d969-41a4-a614-7fefce94f9a6",
        "tags" : [
        ]
      },
      {
        "id" : "cc7774c7-81dc-4ddd-b5f3-a148855277b4",
        "parentId" : "a6a7b640-c8d7-4dc1-a6d6-1b0c83b49207",
        "authorId" : "f71133c8-efc7-4163-bf3e-4442a9b2c654",
        "body" : "Not in this case, no. If and when the same dataset is requested elsewhere (by datasetName in the volume spec), the Flocker agent will umount/detach and reattach/mount the volume. If a volume is not required, at this stage it is a manual operation to destroy it. Hope that helps explain.\n",
        "createdAt" : "2015-09-25T17:13:46Z",
        "updatedAt" : "2015-10-01T00:12:35Z",
        "lastEditedBy" : "f71133c8-efc7-4163-bf3e-4442a9b2c654",
        "tags" : [
        ]
      },
      {
        "id" : "a8c0ba9c-bfdd-49ac-8e42-fa9a5c55d551",
        "parentId" : "a6a7b640-c8d7-4dc1-a6d6-1b0c83b49207",
        "authorId" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "body" : "This makes me wonder if there is any utility in using Flocker as a PV, since the semantics seem intrinsic to how the Flocker agent handles volumes.\n",
        "createdAt" : "2015-09-30T22:01:44Z",
        "updatedAt" : "2015-10-01T00:12:35Z",
        "lastEditedBy" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "tags" : [
        ]
      }
    ],
    "commit" : "fa39c2b0321a1d63665b24559746f9323c2f4fb7",
    "line" : 103,
    "diffHunk" : "@@ -1,1 +101,105 @@}\n\nfunc (p *flockerPlugin) NewCleaner(datasetName string, podUID types.UID) (volume.Cleaner, error) {\n\t// Flocker agent will take care of this, there is nothing we can do here\n\treturn nil, nil"
  }
]