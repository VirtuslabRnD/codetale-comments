[
  {
    "id" : "91b3d10d-e3ee-408d-88d8-3ca15b40277c",
    "prId" : 15158,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2ccfc277-60cf-496c-ad7d-4e9e894dd004",
        "parentId" : null,
        "authorId" : "5d21b690-19ff-4630-9f4f-14bdd9e68b16",
        "body" : "I wonder if there is a better way of getting this `dir` than returning it here (it's not being used in 3 out of 4 functions). Perhaps with the builder created in line 212? There is no problem doing the cleanup there because the function `SetupAt` was not called yet.\n",
        "createdAt" : "2015-10-07T14:43:40Z",
        "updatedAt" : "2015-10-08T22:42:21Z",
        "lastEditedBy" : "5d21b690-19ff-4630-9f4f-14bdd9e68b16",
        "tags" : [
        ]
      },
      {
        "id" : "0150d23f-dafc-4845-9730-93e6ca109b11",
        "parentId" : "2ccfc277-60cf-496c-ad7d-4e9e894dd004",
        "authorId" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "body" : "Honestly I'd rather return the dir here and just ignore it when not needed\nvs. incorporating logic into the unit test that reaches into the bowels of\na structure to extract the path some other way. This seems much more\nstraightforward.\n\nOn Wed, Oct 7, 2015 at 10:44 AM, Alexandre González <\nnotifications@github.com> wrote:\n\n> In pkg/volume/flocker/plugin_test.go\n> https://github.com/kubernetes/kubernetes/pull/15158#discussion_r41398502\n> :\n> \n> > ```\n> > plugMgr := volume.VolumePluginMgr{}\n> > ```\n> > -   plugMgr.InitPlugins(ProbeVolumePlugins(), volume.NewFakeVolumeHost(\"/foo/bar\", nil, nil))\n> > -   return plugMgr\n> > -   dir, err := ioutil.TempDir(\"\", \"flocker\")\n> > -   assert.NoError(t, err)\n> > -   plugMgr.InitPlugins(ProbeVolumePlugins(), volume.NewFakeVolumeHost(dir, nil, nil))\n> > -   return plugMgr, dir\n> \n> I wonder if there is a better way of getting this dir than returning it\n> here (it's not being used in 3 out of 4 functions). Perhaps with the\n> builder created in line 212? There is no problem doing the cleanup there\n> because the function SetupAt was not called yet.\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/kubernetes/kubernetes/pull/15158/files#r41398502.\n",
        "createdAt" : "2015-10-07T15:29:08Z",
        "updatedAt" : "2015-10-08T22:42:21Z",
        "lastEditedBy" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "tags" : [
        ]
      }
    ],
    "commit" : "a7c06e57acb69edc561cd747823d459705ec3350",
    "line" : 21,
    "diffHunk" : "@@ -1,1 +36,40 @@\tassert.NoError(t, err)\n\tplugMgr.InitPlugins(ProbeVolumePlugins(), volume.NewFakeVolumeHost(dir, nil, nil))\n\treturn plugMgr, dir\n}\n"
  }
]