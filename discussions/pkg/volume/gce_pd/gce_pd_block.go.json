[
  {
    "id" : "44979d84-8ef8-4f76-bbee-644a38c4cf06",
    "prId" : 58710,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/58710#pullrequestreview-97878852",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "397c4ab7-61d0-49de-bf95-53d19119f8a2",
        "parentId" : null,
        "authorId" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "body" : "Again, why 1?",
        "createdAt" : "2018-02-16T22:09:13Z",
        "updatedAt" : "2018-02-23T19:16:25Z",
        "lastEditedBy" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "tags" : [
        ]
      },
      {
        "id" : "205f7651-df4d-4dfe-b5aa-d9b2aa9b3caf",
        "parentId" : "397c4ab7-61d0-49de-bf95-53d19119f8a2",
        "authorId" : "e15ef128-90ac-4a14-8795-b5be15e790ce",
        "body" : "Same, `Base` returns \".\" for an empty path so would indicate an error condition",
        "createdAt" : "2018-02-20T15:54:26Z",
        "updatedAt" : "2018-02-23T19:16:25Z",
        "lastEditedBy" : "e15ef128-90ac-4a14-8795-b5be15e790ce",
        "tags" : [
        ]
      }
    ],
    "commit" : "2c0129cd148289bfbfba84d0d100c15df822f143",
    "line" : 64,
    "diffHunk" : "@@ -1,1 +62,66 @@\t//   plugins/kubernetes.io/gce-pd/volumeDevices/vol-XXXXXX\n\tpdName := filepath.Base(globalMapPath)\n\tif len(pdName) <= 1 {\n\t\treturn nil, fmt.Errorf(\"failed to get pd name from global path=%s\", globalMapPath)\n\t}"
  },
  {
    "id" : "c7cbbe5f-d6af-4a87-9cc0-ea829b26d1d1",
    "prId" : 58710,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/58710#pullrequestreview-98596624",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fbd01bec-baf7-4343-9cbf-f789404bd3a7",
        "parentId" : null,
        "authorId" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "body" : "Hmmm partition is not being reconstructed (same with filesystem).  I wonder if that could be a problem.  I need to think about that a little more.",
        "createdAt" : "2018-02-16T22:11:41Z",
        "updatedAt" : "2018-02-23T19:16:25Z",
        "lastEditedBy" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "tags" : [
        ]
      },
      {
        "id" : "5ad364e8-5511-49a1-aaf9-e334c20ab2da",
        "parentId" : "fbd01bec-baf7-4343-9cbf-f789404bd3a7",
        "authorId" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "body" : "When we unmap, do we need to know the actual device path?  Or do we just cleanup the symlinks that only use volume name?",
        "createdAt" : "2018-02-16T22:18:49Z",
        "updatedAt" : "2018-02-23T19:16:25Z",
        "lastEditedBy" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "tags" : [
        ]
      },
      {
        "id" : "ae348204-bd3d-4ed1-a275-54097f7c1042",
        "parentId" : "fbd01bec-baf7-4343-9cbf-f789404bd3a7",
        "authorId" : "e15ef128-90ac-4a14-8795-b5be15e790ce",
        "body" : "I think we need the devicePath, Unmap will clean up the sym links and the loopback devices as far as I can tell.",
        "createdAt" : "2018-02-20T15:55:57Z",
        "updatedAt" : "2018-02-23T19:16:25Z",
        "lastEditedBy" : "e15ef128-90ac-4a14-8795-b5be15e790ce",
        "tags" : [
        ]
      },
      {
        "id" : "56c09593-a6bc-48bf-b762-d59ba3d43215",
        "parentId" : "fbd01bec-baf7-4343-9cbf-f789404bd3a7",
        "authorId" : "967a712d-9784-41d4-920d-42eaba99fb24",
        "body" : "yes, In order to remove loopback device, devicePath like `/dev/sdc` is needed. If the block volume is created for partitioned device like `/dev/sdc1`, then kubelet needs `devicePath + partition number` to remove loopback device.",
        "createdAt" : "2018-02-22T04:17:45Z",
        "updatedAt" : "2018-02-23T19:16:25Z",
        "lastEditedBy" : "967a712d-9784-41d4-920d-42eaba99fb24",
        "tags" : [
        ]
      },
      {
        "id" : "f3e214d4-8b16-4eda-9d0a-0a010fa3794b",
        "parentId" : "fbd01bec-baf7-4343-9cbf-f789404bd3a7",
        "authorId" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "body" : "So for regular scenario, the device path for partitions should be what attacher returns.  For reconstruction, do we need to correctly reconstruct the partition number?",
        "createdAt" : "2018-02-22T04:48:54Z",
        "updatedAt" : "2018-02-23T19:16:25Z",
        "lastEditedBy" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "tags" : [
        ]
      },
      {
        "id" : "c2a8655a-3329-416f-9de8-f76525f65888",
        "parentId" : "fbd01bec-baf7-4343-9cbf-f789404bd3a7",
        "authorId" : "967a712d-9784-41d4-920d-42eaba99fb24",
        "body" : ">> So for regular scenario, the device path for partitions should be what attacher returns. \r\n\r\nCorrect.\r\n\r\n>> For reconstruction, do we need to correctly reconstruct the partition number?\r\n\r\nI suppose we don't need to create full spec during reconstruction but at least, reconstructed spec must have members to create block volume mapper successfully. If block volume is created by partitioned devicePath in previous, symlink is connected to the `devicePath` including partition number. Therefore kubelet can retrieve devicePath from symlink instead of using value of `partition` .\r\n\r\nWe need this logic in @jingxu97 's next reconstruction update PR.",
        "createdAt" : "2018-02-22T15:03:05Z",
        "updatedAt" : "2018-02-23T19:16:25Z",
        "lastEditedBy" : "967a712d-9784-41d4-920d-42eaba99fb24",
        "tags" : [
        ]
      }
    ],
    "commit" : "2c0129cd148289bfbfba84d0d100c15df822f143",
    "line" : 72,
    "diffHunk" : "@@ -1,1 +70,74 @@\t\t\tPersistentVolumeSource: v1.PersistentVolumeSource{\n\t\t\t\tGCEPersistentDisk: &v1.GCEPersistentDiskVolumeSource{\n\t\t\t\t\tPDName: pdName,\n\t\t\t\t},\n\t\t\t},"
  },
  {
    "id" : "2204c092-622e-4763-917d-42ca9128e95e",
    "prId" : 58710,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/58710#pullrequestreview-98443778",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "94c2d3d9-c7be-40ce-9601-469009ae2394",
        "parentId" : null,
        "authorId" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "body" : "You need to use this partition number when returning the global device path for this volume.  @mtanino is it SetUp() that returns the global device path?",
        "createdAt" : "2018-02-21T20:03:43Z",
        "updatedAt" : "2018-02-23T19:16:25Z",
        "lastEditedBy" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "tags" : [
        ]
      },
      {
        "id" : "9fe16ac2-70f7-43c7-96b6-e3a3e72258f3",
        "parentId" : "94c2d3d9-c7be-40ce-9601-469009ae2394",
        "authorId" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "body" : "Or because this is attachable, is it returned in the attach method?",
        "createdAt" : "2018-02-21T20:07:53Z",
        "updatedAt" : "2018-02-23T19:16:25Z",
        "lastEditedBy" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "tags" : [
        ]
      },
      {
        "id" : "b6c12338-3adf-4c8f-89ac-17d3a91f27ae",
        "parentId" : "94c2d3d9-c7be-40ce-9601-469009ae2394",
        "authorId" : "e15ef128-90ac-4a14-8795-b5be15e790ce",
        "body" : "it is used in the `attacher`",
        "createdAt" : "2018-02-21T21:59:26Z",
        "updatedAt" : "2018-02-23T19:16:25Z",
        "lastEditedBy" : "e15ef128-90ac-4a14-8795-b5be15e790ce",
        "tags" : [
        ]
      },
      {
        "id" : "dfa64f11-d15b-4de8-9ace-a60ccd3dea17",
        "parentId" : "94c2d3d9-c7be-40ce-9601-469009ae2394",
        "authorId" : "967a712d-9784-41d4-920d-42eaba99fb24",
        "body" : ">> Or because this is attachable, is it returned in the attach method?\r\n\r\nyes, gce plugins is attachable and cloud provider supports remote attach for the plugin.\r\nSo the `devicePath` is returned during Attach() operation.",
        "createdAt" : "2018-02-22T04:11:52Z",
        "updatedAt" : "2018-02-23T19:16:25Z",
        "lastEditedBy" : "967a712d-9784-41d4-920d-42eaba99fb24",
        "tags" : [
        ]
      }
    ],
    "commit" : "2c0129cd148289bfbfba84d0d100c15df822f143",
    "line" : 110,
    "diffHunk" : "@@ -1,1 +108,112 @@\t\t\tpodUID:    podUID,\n\t\t\tpdName:    pdName,\n\t\t\tpartition: partition,\n\t\t\tmanager:   manager,\n\t\t\tmounter:   mounter,"
  },
  {
    "id" : "2bec1f0a-55b7-43fd-970e-7eee2f01a014",
    "prId" : 58710,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/58710#pullrequestreview-98379107",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "776fd5ac-1ea3-49ab-8f3b-417bc41a9655",
        "parentId" : null,
        "authorId" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "body" : "Test case for this function?",
        "createdAt" : "2018-02-21T20:07:07Z",
        "updatedAt" : "2018-02-23T19:16:25Z",
        "lastEditedBy" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "tags" : [
        ]
      },
      {
        "id" : "c2795b5c-a743-423a-bbc9-e4237c9e76e6",
        "parentId" : "776fd5ac-1ea3-49ab-8f3b-417bc41a9655",
        "authorId" : "e15ef128-90ac-4a14-8795-b5be15e790ce",
        "body" : "I'll add one",
        "createdAt" : "2018-02-21T22:06:40Z",
        "updatedAt" : "2018-02-23T19:16:25Z",
        "lastEditedBy" : "e15ef128-90ac-4a14-8795-b5be15e790ce",
        "tags" : [
        ]
      }
    ],
    "commit" : "2c0129cd148289bfbfba84d0d100c15df822f143",
    "line" : 156,
    "diffHunk" : "@@ -1,1 +154,158 @@// GetGlobalMapPath returns global map path and error\n// path: plugins/kubernetes.io/{PluginName}/volumeDevices/pdName\nfunc (pd *gcePersistentDisk) GetGlobalMapPath(spec *volume.Spec) (string, error) {\n\tvolumeSource, _, err := getVolumeSource(spec)\n\tif err != nil {"
  },
  {
    "id" : "6686a782-a729-422e-b41b-0718e7f5b56b",
    "prId" : 58710,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/58710#pullrequestreview-98379171",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b62d6a52-01a8-4083-918c-8f774a44af6b",
        "parentId" : null,
        "authorId" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "body" : "Test case?",
        "createdAt" : "2018-02-21T20:07:14Z",
        "updatedAt" : "2018-02-23T19:16:25Z",
        "lastEditedBy" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "tags" : [
        ]
      },
      {
        "id" : "ad229305-de3e-42b5-a393-b26def9ba482",
        "parentId" : "b62d6a52-01a8-4083-918c-8f774a44af6b",
        "authorId" : "e15ef128-90ac-4a14-8795-b5be15e790ce",
        "body" : "I'll add one",
        "createdAt" : "2018-02-21T22:06:50Z",
        "updatedAt" : "2018-02-23T19:16:25Z",
        "lastEditedBy" : "e15ef128-90ac-4a14-8795-b5be15e790ce",
        "tags" : [
        ]
      }
    ],
    "commit" : "2c0129cd148289bfbfba84d0d100c15df822f143",
    "line" : 166,
    "diffHunk" : "@@ -1,1 +164,168 @@// GetPodDeviceMapPath returns pod device map path and volume name\n// path: pods/{podUid}/volumeDevices/kubernetes.io~aws\nfunc (pd *gcePersistentDisk) GetPodDeviceMapPath() (string, string) {\n\tname := gcePersistentDiskPluginName\n\treturn pd.plugin.host.GetPodVolumeDeviceDir(pd.podUID, kstrings.EscapeQualifiedNameForDisk(name)), pd.volName"
  }
]