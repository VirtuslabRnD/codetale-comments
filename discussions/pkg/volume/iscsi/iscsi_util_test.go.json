[
  {
    "id" : "4ef0a896-d0cd-408a-bf3e-a84d30f7ab50",
    "prId" : 85153,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/85153#pullrequestreview-316504854",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "620d8d1a-3787-4530-9b5e-fe60f0dcd167",
        "parentId" : null,
        "authorId" : "56b792dc-dc04-4881-bdb0-21266a20a436",
        "body" : "@msau42: I went ahead and set the `Output` for the `iscsiadm show` command. This causes the code in https://github.com/kubernetes/kubernetes/blob/e7ce8d8a6f82a366a94ee7eb2a29b023cb361007/pkg/volume/iscsi/iscsi_util.go#L837-L855 to be used instead of being skipped, which is a good thing.\r\n\r\nHowever, since these tests are actually trying to verify exact commands, I have to make sure that the commands are run the exact same way every time.  Because https://github.com/kubernetes/kubernetes/blob/e7ce8d8a6f82a366a94ee7eb2a29b023cb361007/pkg/volume/iscsi/iscsi_util.go#L888 is used to iterate over a map, and map iteration is random, this was causing the test to be flaky.\r\n\r\nThus, I added a bit of code in `iscsi_util.go` to make that iteration be stable. Hope that's okay. It's either that or don't validate the commands anymore. I think this is better.",
        "createdAt" : "2019-11-13T19:38:55Z",
        "updatedAt" : "2019-11-13T21:13:29Z",
        "lastEditedBy" : "56b792dc-dc04-4881-bdb0-21266a20a436",
        "tags" : [
        ]
      }
    ],
    "commit" : "367f8791313de4ec095274b08b871b430a9488bb",
    "line" : 175,
    "diffHunk" : "@@ -1,1 +305,309 @@\t\t\tCmd:    \"iscsiadm\",\n\t\t\tArgs:   []string{\"-m\", \"iface\", \"-I\", \"\", \"-o\", \"show\"},\n\t\t\tOutput: \"iface.ipaddress = <empty>\\niface.transport_name = tcp\\niface.initiatorname = <empty>\\n\",\n\t\t},\n\t\t{"
  },
  {
    "id" : "2db298e3-210e-4a46-b8a4-b47a49305387",
    "prId" : 48789,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/48789#pullrequestreview-49604930",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e89c89e9-38c5-4fcf-ac4c-dff08b583998",
        "parentId" : null,
        "authorId" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "body" : "can you add a unit test for `cloneIface` as well?",
        "createdAt" : "2017-07-12T14:54:57Z",
        "updatedAt" : "2017-08-21T16:37:43Z",
        "lastEditedBy" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "tags" : [
        ]
      },
      {
        "id" : "e0368826-5c3e-407d-bdf7-9a112fa76740",
        "parentId" : "e89c89e9-38c5-4fcf-ac4c-dff08b583998",
        "authorId" : "967a712d-9784-41d4-920d-42eaba99fb24",
        "body" : "Agree.",
        "createdAt" : "2017-07-12T15:00:18Z",
        "updatedAt" : "2017-08-21T16:37:43Z",
        "lastEditedBy" : "967a712d-9784-41d4-920d-42eaba99fb24",
        "tags" : [
        ]
      },
      {
        "id" : "601678b7-2933-4368-a157-a13a582de42e",
        "parentId" : "e89c89e9-38c5-4fcf-ac4c-dff08b583998",
        "authorId" : "967a712d-9784-41d4-920d-42eaba99fb24",
        "body" : "Will be added in next patch.",
        "createdAt" : "2017-07-12T20:11:06Z",
        "updatedAt" : "2017-08-21T16:37:43Z",
        "lastEditedBy" : "967a712d-9784-41d4-920d-42eaba99fb24",
        "tags" : [
        ]
      }
    ],
    "commit" : "b0d4664a27781d73180cd2f63b2b516a8a0e2558",
    "line" : 22,
    "diffHunk" : "@@ -1,1 +189,193 @@}\n\nfunc TestParseIscsiadmShow(t *testing.T) {\n\tfakeIscsiadmOutput1 := \"# BEGIN RECORD 2.0-873\\n\" +\n\t\t\"iface.iscsi_ifacename = default\\n\" +"
  },
  {
    "id" : "b854ed4d-d9c3-4c06-bc25-587c10c2891e",
    "prId" : 29532,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c9693199-445e-40f5-b8a1-ed618805852e",
        "parentId" : null,
        "authorId" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "body" : "and add a test without `iface.transport_name` in it\n",
        "createdAt" : "2016-07-25T13:56:20Z",
        "updatedAt" : "2016-07-26T01:15:38Z",
        "lastEditedBy" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "tags" : [
        ]
      },
      {
        "id" : "17df18dc-7bef-4167-891e-e51635f1032c",
        "parentId" : "c9693199-445e-40f5-b8a1-ed618805852e",
        "authorId" : "39d00568-d146-4737-a948-060380891e9d",
        "body" : "Left it out on purpose, based on the same reasoning as above\n",
        "createdAt" : "2016-07-25T15:54:59Z",
        "updatedAt" : "2016-07-26T01:15:38Z",
        "lastEditedBy" : "39d00568-d146-4737-a948-060380891e9d",
        "tags" : [
        ]
      }
    ],
    "commit" : "531a961a96efef2be1640f240d6039ff6e7908b1",
    "line" : null,
    "diffHunk" : "@@ -1,1 +107,111 @@\t\t\t\"iface.iscsi_ifacename = default\\n\" +\n\t\t\t\"iface.initiatorname = <empty>\\n\" +\n\t\t\t\"# END RECORD\"}\n\ttransportName := extractTransportname(fakeIscsiadmOutput[0])\n\tif transportName != \"tcp\" {"
  }
]