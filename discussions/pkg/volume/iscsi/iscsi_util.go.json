[
  {
    "id" : "ad030ac7-14ac-4e01-a45a-aca40939392a",
    "prId" : 80091,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/80091#pullrequestreview-264790223",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5b097f1b-8bea-4dc7-807e-3243b53c1c14",
        "parentId" : null,
        "authorId" : "464046a5-36cb-4f77-ae2a-07c568c4c1b6",
        "body" : "is this relying on lun to be the ref counter?  That won't work in a RWM case for a block device I don't think",
        "createdAt" : "2019-07-19T16:54:44Z",
        "updatedAt" : "2019-07-24T12:22:06Z",
        "lastEditedBy" : "464046a5-36cb-4f77-ae2a-07c568c4c1b6",
        "tags" : [
        ]
      },
      {
        "id" : "074ec33e-a9a9-4b71-9a73-d231d1dabe5e",
        "parentId" : "5b097f1b-8bea-4dc7-807e-3243b53c1c14",
        "authorId" : "255dd885-bee4-4c1f-baef-ba11f903dc5c",
        "body" : "Not sure if I understand the question correctly, but the prefix doesn't have the lun, so the counter doesn't rely on it (only on portal + iqn).",
        "createdAt" : "2019-07-22T12:27:30Z",
        "updatedAt" : "2019-07-24T12:22:06Z",
        "lastEditedBy" : "255dd885-bee4-4c1f-baef-ba11f903dc5c",
        "tags" : [
        ]
      },
      {
        "id" : "ddca1545-391a-498f-90d5-63cef79c4f52",
        "parentId" : "5b097f1b-8bea-4dc7-807e-3243b53c1c14",
        "authorId" : "464046a5-36cb-4f77-ae2a-07c568c4c1b6",
        "body" : "Yeah, I was worried there was a uniqueness check based on lun number somewhere else in the changes.  Thanks for clarifying.",
        "createdAt" : "2019-07-22T12:47:03Z",
        "updatedAt" : "2019-07-24T12:22:06Z",
        "lastEditedBy" : "464046a5-36cb-4f77-ae2a-07c568c4c1b6",
        "tags" : [
        ]
      }
    ],
    "commit" : "44d7510ee05040ce90337215880c7a76b51e7404",
    "line" : 154,
    "diffHunk" : "@@ -1,1 +927,931 @@\t\t\tprefix := portal + \"-\" + iqn\n\t\t\tif strings.HasPrefix(volumeMount, prefix) {\n\t\t\t\tcounter++\n\t\t\t}\n\t\t}"
  },
  {
    "id" : "0ee0ae59-bef0-4b71-a1dc-f65baf8c5dc3",
    "prId" : 80091,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/80091#pullrequestreview-265914244",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5fe49459-fc21-47d6-a4f0-58d92070d2aa",
        "parentId" : null,
        "authorId" : "255dd885-bee4-4c1f-baef-ba11f903dc5c",
        "body" : "In order to prevent races, the lock here is necessary just like in `DetachDisk`.",
        "createdAt" : "2019-07-24T09:57:13Z",
        "updatedAt" : "2019-07-24T12:22:06Z",
        "lastEditedBy" : "255dd885-bee4-4c1f-baef-ba11f903dc5c",
        "tags" : [
        ]
      }
    ],
    "commit" : "44d7510ee05040ce90337215880c7a76b51e7404",
    "line" : 98,
    "diffHunk" : "@@ -1,1 +703,707 @@\t// If device is no longer used, see if need to logout the target\n\tif isSessionBusy(c.iscsiDisk.plugin.host, portals[0], iqn) {\n\t\treturn nil\n\t}\n"
  },
  {
    "id" : "e5c06e06-6d4a-46cd-95f8-3dc8813438e7",
    "prId" : 78941,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/78941#pullrequestreview-266085398",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5cfeb019-3945-49a6-b544-271b982e16b8",
        "parentId" : null,
        "authorId" : "255dd885-bee4-4c1f-baef-ba11f903dc5c",
        "body" : "The changes LGTM, specially the device flushing; however, IDK iSCSI well enough to be sure these are the only exit codes we could/should ignore.\r\n\r\nFor example, looking through the exit codes it seems we should always retry on `ISCSI_ERR_AGAIN` and `ISCSI_ERR_BUSY`, but not for `ISCSI_ERR_ACCESS` and `ISCSI_ERR_INVAL`. To make it more difficult, I think each of these codes are tied to a specific set of commands.",
        "createdAt" : "2019-07-19T14:38:59Z",
        "updatedAt" : "2019-07-25T08:11:35Z",
        "lastEditedBy" : "255dd885-bee4-4c1f-baef-ba11f903dc5c",
        "tags" : [
        ]
      },
      {
        "id" : "c6d527b7-873c-4f97-9ff6-644f8dd2f4a1",
        "parentId" : "5cfeb019-3945-49a6-b544-271b982e16b8",
        "authorId" : "255dd885-bee4-4c1f-baef-ba11f903dc5c",
        "body" : "Anyway, I think it's OK to retry regardless",
        "createdAt" : "2019-07-19T15:03:19Z",
        "updatedAt" : "2019-07-25T08:11:35Z",
        "lastEditedBy" : "255dd885-bee4-4c1f-baef-ba11f903dc5c",
        "tags" : [
        ]
      },
      {
        "id" : "24ed8043-8fed-4221-9b41-83b2e1685c92",
        "parentId" : "5cfeb019-3945-49a6-b544-271b982e16b8",
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "I don't see ISCSI_ERR_AGAIN and ISCSI_ERR_BUSY in my man page (iscsiadm version 6.2.0.876-1)",
        "createdAt" : "2019-07-23T12:23:06Z",
        "updatedAt" : "2019-07-25T08:11:35Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      },
      {
        "id" : "e73d543d-a439-4011-9abd-614b18b0ebc2",
        "parentId" : "5cfeb019-3945-49a6-b544-271b982e16b8",
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "I saw `ISCSI_ERR_NO_OBJS_FOUND` for deleting already deleted session and I think I saw `ISCSI_ERR_SESS_NOT_FOUND` in some log.\r\n",
        "createdAt" : "2019-07-23T12:36:38Z",
        "updatedAt" : "2019-07-25T08:11:35Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      },
      {
        "id" : "b5bd55a9-d0a8-4d14-9d1b-09da2746b0a4",
        "parentId" : "5cfeb019-3945-49a6-b544-271b982e16b8",
        "authorId" : "255dd885-bee4-4c1f-baef-ba11f903dc5c",
        "body" : "I was looking at the [iscsi_err.h](https://github.com/open-iscsi/open-iscsi/blob/7d121d12ad6ba7783308c25ffd338a9fa0cc402b/include/iscsi_err.h#L7) file, so maybe these exit codes aren't returned by iscsiadm (they're probably used in other utilities).",
        "createdAt" : "2019-07-23T13:00:55Z",
        "updatedAt" : "2019-07-25T08:11:35Z",
        "lastEditedBy" : "255dd885-bee4-4c1f-baef-ba11f903dc5c",
        "tags" : [
        ]
      },
      {
        "id" : "47a74e4f-3c43-4ab7-b938-27fc46f219fb",
        "parentId" : "5cfeb019-3945-49a6-b544-271b982e16b8",
        "authorId" : "464046a5-36cb-4f77-ae2a-07c568c4c1b6",
        "body" : "There are a bunch of different things that can be returned from iscsiadm that may or may not matter.  One way to approach this is ignore any error, and do a verify that things were cleaned up, if it has the error is irrelevant.",
        "createdAt" : "2019-07-23T14:06:15Z",
        "updatedAt" : "2019-07-25T08:11:35Z",
        "lastEditedBy" : "464046a5-36cb-4f77-ae2a-07c568c4c1b6",
        "tags" : [
        ]
      },
      {
        "id" : "15f8df56-94e8-461d-a5f8-e71d3fd841c9",
        "parentId" : "5cfeb019-3945-49a6-b544-271b982e16b8",
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "> verify that things were cleaned up\r\n\r\nI can check that iface and node need to be deleted easily (`-m [node|iface] -o show`).\r\n\r\nI am not sure if it's possible to check if `iscsiadm -m node -p 127.0.0.1 -T iqn.2003-01.io.k8s:e2e.volume-8751 --logout` is needed. `iscsiadm -m node -o show` is the same before and after logout. How can I map node / iqn to a session without too much parsing of `iscsiadm -m session -o show -P 2`?",
        "createdAt" : "2019-07-24T14:42:37Z",
        "updatedAt" : "2019-07-25T08:11:35Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      },
      {
        "id" : "10d49c40-b6a9-42d2-ae19-cb0173d05634",
        "parentId" : "5cfeb019-3945-49a6-b544-271b982e16b8",
        "authorId" : "464046a5-36cb-4f77-ae2a-07c568c4c1b6",
        "body" : "Yeah, I was thinking of using the approach to check for sessions; I may be overthinking this though.",
        "createdAt" : "2019-07-24T15:02:39Z",
        "updatedAt" : "2019-07-25T08:11:35Z",
        "lastEditedBy" : "464046a5-36cb-4f77-ae2a-07c568c4c1b6",
        "tags" : [
        ]
      }
    ],
    "commit" : "cdcd2e282192e8353e1a2afbcb6bfda66d42260a",
    "line" : 27,
    "diffHunk" : "@@ -1,1 +740,744 @@\t\tif err != nil {\n\t\t\tklog.Errorf(\"iscsi: failed to delete node record Error: %s\", string(out))\n\t\t\treturn err\n\t\t}\n\t}"
  },
  {
    "id" : "c3bbc21b-52d3-4074-ad32-b533a4e96244",
    "prId" : 74524,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/74524#pullrequestreview-208003167",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "229a5629-8fd5-4588-82ab-7b563e9bcdb1",
        "parentId" : null,
        "authorId" : "3f681241-1a29-4fbf-bddc-1df89a871240",
        "body" : "For reviewers, iscsiadm use code per error:\r\n\r\nhttps://github.com/open-iscsi/open-iscsi/blob/7d121d12ad6ba7783308c25ffd338a9fa0cc402b/include/iscsi_err.h#L37-L38",
        "createdAt" : "2019-02-26T11:18:07Z",
        "updatedAt" : "2019-02-26T16:13:46Z",
        "lastEditedBy" : "3f681241-1a29-4fbf-bddc-1df89a871240",
        "tags" : [
        ]
      },
      {
        "id" : "bc8bb00f-c142-477c-8e43-b9dfc9d5edc4",
        "parentId" : "229a5629-8fd5-4588-82ab-7b563e9bcdb1",
        "authorId" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "body" : "thanks @redbaron \r\n@bertinatto please add this reference in your comment",
        "createdAt" : "2019-02-26T14:57:26Z",
        "updatedAt" : "2019-02-26T16:13:46Z",
        "lastEditedBy" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "tags" : [
        ]
      }
    ],
    "commit" : "d60d7e905f5e9c10f238135f5b8b06d1ac053ba9",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +56,60 @@\t// 'iscsiadm' error code stating that a session is logged in\n\t// See https://github.com/open-iscsi/open-iscsi/blob/7d121d12ad6ba7783308c25ffd338a9fa0cc402b/include/iscsi_err.h#L37-L38\n\tiscsiadmErrorSessExists = 15\n)\n"
  },
  {
    "id" : "471018ea-84f8-4681-ae00-5ca7269ff82d",
    "prId" : 69140,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/69140#pullrequestreview-159449986",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d0d83616-0795-491e-8d52-72717fb33a61",
        "parentId" : null,
        "authorId" : "3f681241-1a29-4fbf-bddc-1df89a871240",
        "body" : "can it change between check and umount attempt? maybe unmount unconditionally but recognise a \"not mounted\" error ?",
        "createdAt" : "2018-09-27T09:22:20Z",
        "updatedAt" : "2018-10-02T07:20:02Z",
        "lastEditedBy" : "3f681241-1a29-4fbf-bddc-1df89a871240",
        "tags" : [
        ]
      },
      {
        "id" : "c6d55617-7a2d-4ece-9fd0-9977c1fae2d3",
        "parentId" : "d0d83616-0795-491e-8d52-72717fb33a61",
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "Kubelet itself makes sure that only one `UnmountDevice` runs for a given volume. So it can't change unless something else (admin) unmounts things in parallel.\r\n\r\nAnd even if the volume is unmounted by admin after the check, the volume plugin calls `umount`, which fails, and kubelet re-tries `UnmountDevice` in a short while, now with correct check.",
        "createdAt" : "2018-09-27T09:58:30Z",
        "updatedAt" : "2018-10-02T07:20:02Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      },
      {
        "id" : "32643c90-a9ab-4719-9e9c-802e92a85e22",
        "parentId" : "d0d83616-0795-491e-8d52-72717fb33a61",
        "authorId" : "3f681241-1a29-4fbf-bddc-1df89a871240",
        "body" : "It just feels akin to file exist check before deleting it, just deleting is more correct and no races",
        "createdAt" : "2018-09-27T13:40:04Z",
        "updatedAt" : "2018-10-02T07:20:02Z",
        "lastEditedBy" : "3f681241-1a29-4fbf-bddc-1df89a871240",
        "tags" : [
        ]
      }
    ],
    "commit" : "e5fbb3538f9fd987dea4aeeab17e97946fe92669",
    "line" : 27,
    "diffHunk" : "@@ -1,1 +559,563 @@\t\treturn err\n\t}\n\tif !notMnt {\n\t\tif err := c.mounter.Unmount(mntPath); err != nil {\n\t\t\tglog.Errorf(\"iscsi detach disk: failed to unmount: %s\\nError: %v\", mntPath, err)"
  },
  {
    "id" : "1a9a606a-8680-41a9-ba93-24a3b21ea26b",
    "prId" : 69140,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/69140#pullrequestreview-160345051",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "15f70536-af69-461f-a865-3593bda2d10e",
        "parentId" : null,
        "authorId" : "255dd885-bee4-4c1f-baef-ba11f903dc5c",
        "body" : "Would it make sense to use `k8s.io/kubernetes/pkg/volume/util`'s `UnmountPath` instead?",
        "createdAt" : "2018-10-01T14:37:17Z",
        "updatedAt" : "2018-10-02T07:20:02Z",
        "lastEditedBy" : "255dd885-bee4-4c1f-baef-ba11f903dc5c",
        "tags" : [
        ]
      },
      {
        "id" : "c6633890-afcb-4d42-a89d-bc128115dea1",
        "parentId" : "15f70536-af69-461f-a865-3593bda2d10e",
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "Good point, fixed.",
        "createdAt" : "2018-10-01T15:11:42Z",
        "updatedAt" : "2018-10-02T07:20:02Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      }
    ],
    "commit" : "e5fbb3538f9fd987dea4aeeab17e97946fe92669",
    "line" : 28,
    "diffHunk" : "@@ -1,1 +560,564 @@\t}\n\tif !notMnt {\n\t\tif err := c.mounter.Unmount(mntPath); err != nil {\n\t\t\tglog.Errorf(\"iscsi detach disk: failed to unmount: %s\\nError: %v\", mntPath, err)\n\t\t\treturn err"
  },
  {
    "id" : "e88992bb-ccf2-4024-8dda-c8bc92f73a48",
    "prId" : 68141,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/68141#pullrequestreview-161058348",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d54204d5-d371-41ae-aa3c-23d5cfa3b7b0",
        "parentId" : null,
        "authorId" : "3eb39df2-c27a-40ed-9fab-cabae1c6353d",
        "body" : "A blank line above `//update` is better",
        "createdAt" : "2018-10-03T04:55:20Z",
        "updatedAt" : "2018-10-08T11:02:12Z",
        "lastEditedBy" : "3eb39df2-c27a-40ed-9fab-cabae1c6353d",
        "tags" : [
        ]
      },
      {
        "id" : "3c77acca-ac9f-4d35-bbcd-64862e940804",
        "parentId" : "d54204d5-d371-41ae-aa3c-23d5cfa3b7b0",
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "Done",
        "createdAt" : "2018-10-03T08:32:44Z",
        "updatedAt" : "2018-10-08T11:02:12Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      }
    ],
    "commit" : "362be3a58beb02c3c1e6342ee3d84cbfa02cc318",
    "line" : 82,
    "diffHunk" : "@@ -1,1 +340,344 @@\t\t\t\tb.exec.Run(\"iscsiadm\", \"-m\", \"discoverydb\", \"-t\", \"sendtargets\", \"-p\", tp, \"-I\", b.Iface, \"-o\", \"new\")\n\n\t\t\t\t// update discoverydb with CHAP secret\n\t\t\t\terr = updateISCSIDiscoverydb(b, tp)\n\t\t\t\tif err != nil {"
  },
  {
    "id" : "8d76128d-d366-496b-8481-40355e30ad38",
    "prId" : 68141,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/68141#pullrequestreview-161058394",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7eae4a1f-328e-4986-a409-b40f07bae54c",
        "parentId" : null,
        "authorId" : "3eb39df2-c27a-40ed-9fab-cabae1c6353d",
        "body" : "same here.",
        "createdAt" : "2018-10-03T04:55:54Z",
        "updatedAt" : "2018-10-08T11:02:12Z",
        "lastEditedBy" : "3eb39df2-c27a-40ed-9fab-cabae1c6353d",
        "tags" : [
        ]
      },
      {
        "id" : "9d6763b7-85b6-43ff-b1aa-b91347426c92",
        "parentId" : "7eae4a1f-328e-4986-a409-b40f07bae54c",
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "added blank spaces all over the place :-)\r\n(but not between `if` and the true block, that looks weird).",
        "createdAt" : "2018-10-03T08:32:52Z",
        "updatedAt" : "2018-10-08T11:02:12Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      }
    ],
    "commit" : "362be3a58beb02c3c1e6342ee3d84cbfa02cc318",
    "line" : 91,
    "diffHunk" : "@@ -1,1 +349,353 @@\t\t\t\tout, err = b.exec.Run(\"iscsiadm\", \"-m\", \"discoverydb\", \"-t\", \"sendtargets\", \"-p\", tp, \"-I\", b.Iface, \"--discover\")\n\t\t\t\tif err != nil {\n\t\t\t\t\t// delete discoverydb record\n\t\t\t\t\tb.exec.Run(\"iscsiadm\", \"-m\", \"discoverydb\", \"-t\", \"sendtargets\", \"-p\", tp, \"-I\", b.Iface, \"-o\", \"delete\")\n\t\t\t\t\tlastErr = fmt.Errorf(\"iscsi: failed to sendtargets to portal %s output: %s, err %v\", tp, string(out), err)"
  },
  {
    "id" : "3e6c5d20-643c-4407-b0cf-279675797c65",
    "prId" : 68141,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/68141#pullrequestreview-161006052",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e839155b-408a-4cb0-8503-ec3267f8f7fb",
        "parentId" : null,
        "authorId" : "3eb39df2-c27a-40ed-9fab-cabae1c6353d",
        "body" : "same here.",
        "createdAt" : "2018-10-03T04:56:09Z",
        "updatedAt" : "2018-10-08T11:02:12Z",
        "lastEditedBy" : "3eb39df2-c27a-40ed-9fab-cabae1c6353d",
        "tags" : [
        ]
      }
    ],
    "commit" : "362be3a58beb02c3c1e6342ee3d84cbfa02cc318",
    "line" : 99,
    "diffHunk" : "@@ -1,1 +357,361 @@\t\t\t\terr = updateISCSINode(b, tp)\n\t\t\t\tif err != nil {\n\t\t\t\t\t// failure to update node db is rare. But deleting record will likely impact those who already start using it.\n\t\t\t\t\tlastErr = fmt.Errorf(\"iscsi: failed to update iscsi node to portal %s error: %v\", tp, err)\n\t\t\t\t\tcontinue"
  },
  {
    "id" : "519b2a0f-1234-487b-9fc4-889c986da5cc",
    "prId" : 68141,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/68141#pullrequestreview-162423063",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5d198f56-2257-496f-905e-836c98cfc3b6",
        "parentId" : null,
        "authorId" : "3eb39df2-c27a-40ed-9fab-cabae1c6353d",
        "body" : "Can we make `10` as a constant and avoid hardcoding?",
        "createdAt" : "2018-10-04T05:17:05Z",
        "updatedAt" : "2018-10-08T11:02:12Z",
        "lastEditedBy" : "3eb39df2-c27a-40ed-9fab-cabae1c6353d",
        "tags" : [
        ]
      },
      {
        "id" : "e4c4420a-5372-44d9-b6ec-a11609171796",
        "parentId" : "5d198f56-2257-496f-905e-836c98cfc3b6",
        "authorId" : "3eb39df2-c27a-40ed-9fab-cabae1c6353d",
        "body" : "@jsafrane in case you missed above comment :)",
        "createdAt" : "2018-10-05T10:32:13Z",
        "updatedAt" : "2018-10-08T11:02:12Z",
        "lastEditedBy" : "3eb39df2-c27a-40ed-9fab-cabae1c6353d",
        "tags" : [
        ]
      },
      {
        "id" : "14c88d80-54af-4b36-87d1-de8ba9643edf",
        "parentId" : "5d198f56-2257-496f-905e-836c98cfc3b6",
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "Changed to const.",
        "createdAt" : "2018-10-08T11:02:32Z",
        "updatedAt" : "2018-10-08T11:02:32Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      },
      {
        "id" : "b32b6fc0-c377-4813-a6fa-5780200d8cd5",
        "parentId" : "5d198f56-2257-496f-905e-836c98cfc3b6",
        "authorId" : "3eb39df2-c27a-40ed-9fab-cabae1c6353d",
        "body" : "Thanks @jsafrane ",
        "createdAt" : "2018-10-08T11:12:23Z",
        "updatedAt" : "2018-10-08T11:12:23Z",
        "lastEditedBy" : "3eb39df2-c27a-40ed-9fab-cabae1c6353d",
        "tags" : [
        ]
      }
    ],
    "commit" : "362be3a58beb02c3c1e6342ee3d84cbfa02cc318",
    "line" : 245,
    "diffHunk" : "@@ -1,1 +454,458 @@\tif len(bkpPortal) > 1 {\n\t\t// Multipath volume was requested. Wait up to 10 seconds for the multipath device to appear.\n\t\tdevicePath = waitForMultiPathToExist(devicePathList, 10, b.deviceUtil)\n\t} else {\n\t\t// For PVs with 1 portal, just try one time to find the multipath device. This"
  },
  {
    "id" : "a02c7ef4-1454-428d-a942-64d18df9efe7",
    "prId" : 63176,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/63176#pullrequestreview-121554252",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "db42611a-763d-458e-b1df-6d57e18d15cf",
        "parentId" : null,
        "authorId" : "3eb39df2-c27a-40ed-9fab-cabae1c6353d",
        "body" : "Does updateISCSIDIscoverydb() or updateISCSINode() can have a inconsistent view of portal map compared to iscsi db ?",
        "createdAt" : "2018-05-08T15:50:45Z",
        "updatedAt" : "2018-07-25T04:01:56Z",
        "lastEditedBy" : "3eb39df2-c27a-40ed-9fab-cabae1c6353d",
        "tags" : [
        ]
      },
      {
        "id" : "3056de15-a094-4997-a98b-80d26a5208e7",
        "parentId" : "db42611a-763d-458e-b1df-6d57e18d15cf",
        "authorId" : "61f426fc-ef91-47d4-9d27-f5a1dd2b265b",
        "body" : "I didn't write that code -- my changed just moved it. Based on what I know about iscsiadm, it stores some things in its databases, but probably not the SCSI hosts -- those it gets at runtime.\r\n\r\nAre you worried about a new bug here, or are you considering an alternative implementation?",
        "createdAt" : "2018-05-18T19:59:28Z",
        "updatedAt" : "2018-07-25T04:01:56Z",
        "lastEditedBy" : "61f426fc-ef91-47d4-9d27-f5a1dd2b265b",
        "tags" : [
        ]
      }
    ],
    "commit" : "6d23d8edbba3680fd6da096faf6ed3a5f3e43000",
    "line" : 83,
    "diffHunk" : "@@ -1,1 +305,309 @@\t\t\t\tcontinue\n\t\t\t}\n\t\t\terr = updateISCSINode(b, tp)\n\t\t\tif err != nil {\n\t\t\t\t// failure to update node db is rare. But deleting record will likely impact those who already start using it."
  },
  {
    "id" : "04fa293d-7eab-4da9-8cc7-b23c84016cc8",
    "prId" : 51628,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/51628#pullrequestreview-59573293",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0e9d8e6e-2fae-427c-a5e4-7526a638e96d",
        "parentId" : null,
        "authorId" : "93379813-c6cb-43b0-9742-0424ecb8da56",
        "body" : "Should add a comment here to show that the directory is created below and that is why os.IsNotExist() is avoided. Or, reorganize the flow.",
        "createdAt" : "2017-08-30T14:27:21Z",
        "updatedAt" : "2017-08-30T14:28:19Z",
        "lastEditedBy" : "93379813-c6cb-43b0-9742-0424ecb8da56",
        "tags" : [
        ]
      }
    ],
    "commit" : "540752d0a1e7875c2a15ce96b28ab376431f58a3",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +301,305 @@\tglobalPDPath := b.manager.MakeGlobalPDName(*b.iscsiDisk)\n\tnotMnt, err := b.mounter.IsLikelyNotMountPoint(globalPDPath)\n\tif err != nil && !os.IsNotExist(err) {\n\t\treturn \"\", fmt.Errorf(\"Heuristic determination of mount point failed:%v\", err)\n\t}"
  },
  {
    "id" : "24074f72-8f18-442f-a2e8-f67cd4a3436c",
    "prId" : 48789,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/48789#pullrequestreview-57235657",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "477e6e95-11e8-4095-adb4-3ba6d8dad069",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "an error here is ignored?",
        "createdAt" : "2017-08-10T14:00:51Z",
        "updatedAt" : "2017-08-21T16:37:43Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "4fb57708-7c07-4e89-b451-89a76f13fe6f",
        "parentId" : "477e6e95-11e8-4095-adb4-3ba6d8dad069",
        "authorId" : "967a712d-9784-41d4-920d-42eaba99fb24",
        "body" : "@liggitt \r\nThank you for the comment. I think we should decide the SPEC.\r\nThere are two options here,\r\n- iSCSI plugin returns error if cloneIface() fails.\r\n- iSCSI plugin continue to create volume using \"default\" iface.\r\n\r\nCurrently, the behavior is latter case. But at least, we should log returned error even if the plugin continue to the volume creation.",
        "createdAt" : "2017-08-10T14:12:16Z",
        "updatedAt" : "2017-08-21T16:37:43Z",
        "lastEditedBy" : "967a712d-9784-41d4-920d-42eaba99fb24",
        "tags" : [
        ]
      },
      {
        "id" : "2345a190-c434-4c3c-8bc3-ad8ea6000465",
        "parentId" : "477e6e95-11e8-4095-adb4-3ba6d8dad069",
        "authorId" : "967a712d-9784-41d4-920d-42eaba99fb24",
        "body" : "Error handling added .",
        "createdAt" : "2017-08-18T15:34:24Z",
        "updatedAt" : "2017-08-21T16:37:43Z",
        "lastEditedBy" : "967a712d-9784-41d4-920d-42eaba99fb24",
        "tags" : [
        ]
      }
    ],
    "commit" : "b0d4664a27781d73180cd2f63b2b516a8a0e2558",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +211,215 @@\t\t// new iface name is <target portal>:<volume name>\n\t\tnewIface := bkpPortal[0] + \":\" + b.volName\n\t\terr = cloneIface(b, newIface)\n\t\tif err != nil {\n\t\t\tglog.Errorf(\"iscsi: failed to clone iface: %s error: %v\", b.Iface, err)"
  },
  {
    "id" : "c376047c-2773-41d0-882b-355c89163ac7",
    "prId" : 48789,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/48789#pullrequestreview-57235709",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0feedadb-9ebe-4c82-83ad-936048f7e714",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "if loaded from json, portals has the possibility to be zero-length, and this will panic",
        "createdAt" : "2017-08-10T14:03:55Z",
        "updatedAt" : "2017-08-21T16:37:43Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "c9690956-dace-46c2-ae67-cb185a8f6b2f",
        "parentId" : "0feedadb-9ebe-4c82-83ad-936048f7e714",
        "authorId" : "967a712d-9784-41d4-920d-42eaba99fb24",
        "body" : "@liggitt \r\nI'll add length check for the portals before using it.",
        "createdAt" : "2017-08-10T14:22:23Z",
        "updatedAt" : "2017-08-21T16:37:43Z",
        "lastEditedBy" : "967a712d-9784-41d4-920d-42eaba99fb24",
        "tags" : [
        ]
      },
      {
        "id" : "0ce79526-ba80-4513-b540-47de5a79dc44",
        "parentId" : "0feedadb-9ebe-4c82-83ad-936048f7e714",
        "authorId" : "967a712d-9784-41d4-920d-42eaba99fb24",
        "body" : "Length check added.",
        "createdAt" : "2017-08-18T15:34:35Z",
        "updatedAt" : "2017-08-21T16:37:43Z",
        "lastEditedBy" : "967a712d-9784-41d4-920d-42eaba99fb24",
        "tags" : [
        ]
      }
    ],
    "commit" : "b0d4664a27781d73180cd2f63b2b516a8a0e2558",
    "line" : 65,
    "diffHunk" : "@@ -1,1 +395,399 @@\t\t\t// Delete the iface after all sessions have logged out\n\t\t\t// If the iface is not created via iscsi plugin, skip to delete\n\t\t\tif initiatorName != \"\" && found && iface == (portals[0]+\":\"+c.volName) {\n\t\t\t\tdelete := []string{\"-m\", \"iface\", \"-I\", iface, \"-o\", \"delete\"}\n\t\t\t\tout, err := c.plugin.execCommand(\"iscsiadm\", delete)"
  },
  {
    "id" : "0ed2ff98-27f4-47f9-93f6-38977c26c379",
    "prId" : 46239,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/46239#pullrequestreview-41354466",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9c71acc9-d81f-4ab7-a70f-d33ef6c2f31e",
        "parentId" : null,
        "authorId" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "body" : "nit: make a note here, the iscsi config json is not deleted ",
        "createdAt" : "2017-05-31T20:26:59Z",
        "updatedAt" : "2017-05-31T20:54:29Z",
        "lastEditedBy" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "tags" : [
        ]
      },
      {
        "id" : "373a8e75-bd08-49ee-80e7-5857ddb34af7",
        "parentId" : "9c71acc9-d81f-4ab7-a70f-d33ef6c2f31e",
        "authorId" : "967a712d-9784-41d4-920d-42eaba99fb24",
        "body" : "done",
        "createdAt" : "2017-05-31T20:54:36Z",
        "updatedAt" : "2017-05-31T20:54:36Z",
        "lastEditedBy" : "967a712d-9784-41d4-920d-42eaba99fb24",
        "tags" : [
        ]
      }
    ],
    "commit" : "aebaee39d596b00bb066d7d6ad4bc4a0f9dbff63",
    "line" : 66,
    "diffHunk" : "@@ -1,1 +169,173 @@}\n\nfunc (util *ISCSIUtil) loadISCSI(conf *iscsiDisk, mnt string) error {\n\t// NOTE: The iscsi config json is not deleted after logging out from target portals.\n\tfile := path.Join(mnt, \"iscsi.json\")"
  },
  {
    "id" : "baa5c3a9-dd03-465c-9f3b-f759422aea51",
    "prId" : 43396,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/43396#pullrequestreview-29454811",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0a47f4d2-418c-4d0d-bedb-9169a73da83e",
        "parentId" : null,
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "You should clear username/password on error",
        "createdAt" : "2017-03-21T09:22:58Z",
        "updatedAt" : "2017-04-07T16:38:36Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      },
      {
        "id" : "92af25cb-9152-4830-b2da-267c1c363fbe",
        "parentId" : "0a47f4d2-418c-4d0d-bedb-9169a73da83e",
        "authorId" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "body" : "done",
        "createdAt" : "2017-03-28T13:50:22Z",
        "updatedAt" : "2017-04-07T16:38:36Z",
        "lastEditedBy" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "tags" : [
        ]
      }
    ],
    "commit" : "8eb6d6cfa7a74f27b5bf209fc82d2990e23eb707",
    "line" : 85,
    "diffHunk" : "@@ -1,1 +190,194 @@\t\t\tb.plugin.execCommand(\"iscsiadm\", []string{\"-m\", \"discoverydb\", \"-t\", \"sendtargets\", \"-p\", tp, \"-I\", b.iface, \"-o\", \"new\"})\n\t\t\t// update discoverydb with CHAP secret\n\t\t\terr = updateISCSIDiscoverydb(b, tp)\n\t\t\tif err != nil {\n\t\t\t\tlastErr = fmt.Errorf(\"iscsi: failed to update discoverydb to portal %s error: %v\", tp, err)"
  },
  {
    "id" : "a721c833-d462-4b21-a8dc-3ccac2063b92",
    "prId" : 43396,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/43396#pullrequestreview-29454783",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "45dd2518-91c1-4a12-93d2-a569e4c2d1c5",
        "parentId" : null,
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "Can this `waitForPathToExist` ever succeed if we know that CHAP is enabled and we did not set username / password? IMO it adds unnecessary 1 second delay.",
        "createdAt" : "2017-03-21T09:33:14Z",
        "updatedAt" : "2017-04-07T16:38:36Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      },
      {
        "id" : "ae0a2085-2c35-42b1-b194-0159d6302420",
        "parentId" : "45dd2518-91c1-4a12-93d2-a569e4c2d1c5",
        "authorId" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "body" : "this is to detect if the devices are already created. 1 is retry.",
        "createdAt" : "2017-03-28T13:50:18Z",
        "updatedAt" : "2017-04-07T16:38:36Z",
        "lastEditedBy" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "tags" : [
        ]
      }
    ],
    "commit" : "8eb6d6cfa7a74f27b5bf209fc82d2990e23eb707",
    "line" : 78,
    "diffHunk" : "@@ -1,1 +185,189 @@\t\t\tdevicePath = strings.Join([]string{\"/dev/disk/by-path/pci\", \"*\", \"ip\", tp, \"iscsi\", b.iqn, \"lun\", b.lun}, \"-\")\n\t\t}\n\t\texist := waitForPathToExist(devicePath, 1, iscsiTransport)\n\t\tif exist == false {\n\t\t\t// build discoverydb and discover iscsi target"
  },
  {
    "id" : "2f507624-0bc8-4bdd-999e-1b7693970e68",
    "prId" : 41196,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/41196#pullrequestreview-21077738",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a3bb0b43-1453-47e1-bd0f-c8c4b70881cc",
        "parentId" : null,
        "authorId" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "body" : "also see this https://github.com/kubernetes/kubernetes/issues/41041#issuecomment-278117872",
        "createdAt" : "2017-02-09T16:02:11Z",
        "updatedAt" : "2017-02-14T20:51:13Z",
        "lastEditedBy" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "tags" : [
        ]
      },
      {
        "id" : "badd97d0-3ce9-4857-a965-e224ca8603a2",
        "parentId" : "a3bb0b43-1453-47e1-bd0f-c8c4b70881cc",
        "authorId" : "8de886b3-3c14-4376-9ec8-1a10fb18e6cd",
        "body" : "I thought about changing the HasPrefix call to Contains but I wanted to account for the iface as well and log out only if there are no other pods that use that specific iface. I know it's not foul proof especially when there are multiple ifaces using the same transport to the same target as the devices that get mounted are not necessarily the ones that were imported on the given iface, but I could not find a better solution until now.",
        "createdAt" : "2017-02-09T16:37:39Z",
        "updatedAt" : "2017-02-14T20:51:13Z",
        "lastEditedBy" : "8de886b3-3c14-4376-9ec8-1a10fb18e6cd",
        "tags" : [
        ]
      },
      {
        "id" : "2a5a6f1a-3555-4aaf-8e30-66cac8ed7f0b",
        "parentId" : "a3bb0b43-1453-47e1-bd0f-c8c4b70881cc",
        "authorId" : "5f5dd29a-d526-4711-8114-fae834f17efb",
        "body" : "This seems like a solid solution to me, at least for the moment.  In the long-term, I'm concerned about cases where sessions that exist independently of Kubernetes get logged off because a pod used a volume connected to the target using the same interface (I think this is the same concern @CristianPop cited just now, but I'm not totally sure).  Solving that might be doable with something like resolving all of the symlinks in /dev/disk/by-path to their devices and then checking whether any of the devices that belong to the session are still mounted; I don't know if this would behave well with multipathing, though.\r\n\r\nAt any rate, this is a better fix than just changing HasPrefix to Contains.",
        "createdAt" : "2017-02-09T18:07:44Z",
        "updatedAt" : "2017-02-14T20:51:13Z",
        "lastEditedBy" : "5f5dd29a-d526-4711-8114-fae834f17efb",
        "tags" : [
        ]
      }
    ],
    "commit" : "b23b4754981a74a1c87ed2a69f73ed9a5bebbb97",
    "line" : 47,
    "diffHunk" : "@@ -1,1 +216,220 @@\t\t\treturn err\n\t\t}\n\t\trefCount, err := getDevicePrefixRefCount(c.mounter, prefix)\n\t\tif err == nil && refCount == 0 {\n\t\t\t// This portal/iqn/iface is no longer referenced, log out."
  },
  {
    "id" : "03d6fdde-39e7-4e96-adf1-11ca14209321",
    "prId" : 29532,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e3a703fc-3b33-431d-a88e-b4964202a822",
        "parentId" : null,
        "authorId" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "body" : "add the above log info to `err` so we know where the problem comes from in kubectl output.\n",
        "createdAt" : "2016-07-25T13:46:55Z",
        "updatedAt" : "2016-07-26T01:15:38Z",
        "lastEditedBy" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "tags" : [
        ]
      },
      {
        "id" : "35c32780-4da8-41ed-9678-27c98064ba50",
        "parentId" : "e3a703fc-3b33-431d-a88e-b4964202a822",
        "authorId" : "39d00568-d146-4737-a948-060380891e9d",
        "body" : "Will do\n",
        "createdAt" : "2016-07-25T15:55:23Z",
        "updatedAt" : "2016-07-26T01:15:38Z",
        "lastEditedBy" : "39d00568-d146-4737-a948-060380891e9d",
        "tags" : [
        ]
      },
      {
        "id" : "f6867fd9-3184-40e9-9c62-d0aae26cf93f",
        "parentId" : "e3a703fc-3b33-431d-a88e-b4964202a822",
        "authorId" : "39d00568-d146-4737-a948-060380891e9d",
        "body" : "@rootfs kinda confused how to do this. The rest of the function just prints out with glog.Errorf and returns just the error\n",
        "createdAt" : "2016-07-25T21:15:03Z",
        "updatedAt" : "2016-07-26T01:15:38Z",
        "lastEditedBy" : "39d00568-d146-4737-a948-060380891e9d",
        "tags" : [
        ]
      },
      {
        "id" : "5ce7bab1-d1e9-4696-9366-7fd6a41365f9",
        "parentId" : "e3a703fc-3b33-431d-a88e-b4964202a822",
        "authorId" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "body" : "ok, let's make a separate PR to reformat these err \n",
        "createdAt" : "2016-07-25T23:51:41Z",
        "updatedAt" : "2016-07-26T01:15:38Z",
        "lastEditedBy" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "tags" : [
        ]
      }
    ],
    "commit" : "531a961a96efef2be1640f240d6039ff6e7908b1",
    "line" : 38,
    "diffHunk" : "@@ -1,1 +106,110 @@\tif err != nil {\n\t\tglog.Errorf(\"iscsi: could not read iface %s error: %s\", b.iface, string(out))\n\t\treturn err\n\t}\n"
  },
  {
    "id" : "ce18c7fd-cb10-423d-8723-b4eac3e1cf53",
    "prId" : 16877,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d4bcc07f-3305-415c-87ee-4b20cb8c333b",
        "parentId" : null,
        "authorId" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "body" : "I don't have the setup. Any reference in [udev](https://github.com/systemd/systemd/blob/master/src/udev/udev-builtin-path_id.c) I can see this device path?\n",
        "createdAt" : "2015-11-07T14:53:43Z",
        "updatedAt" : "2015-12-09T01:29:03Z",
        "lastEditedBy" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "tags" : [
        ]
      },
      {
        "id" : "3243c728-f081-45c8-ab5b-4a3d228caaf7",
        "parentId" : "d4bcc07f-3305-415c-87ee-4b20cb8c333b",
        "authorId" : "39d00568-d146-4737-a948-060380891e9d",
        "body" : "I think [this](https://github.com/systemd/systemd/blob/master/src/udev/udev-builtin-path_id.c#L665) is what you want.\n\nYou can take a look at the openstack changes that do the same [here](https://github.com/openstack/os-brick/commit/15a55bd5d1e3ad274afafb43b96b8b88bb7d6ff8) and [here](https://github.com/openstack/nova/commit/554647a4deee6ece221eb79fc93551de72b17ae3)\n",
        "createdAt" : "2015-11-07T21:51:38Z",
        "updatedAt" : "2015-12-09T01:29:03Z",
        "lastEditedBy" : "39d00568-d146-4737-a948-060380891e9d",
        "tags" : [
        ]
      },
      {
        "id" : "204470f0-4635-4b72-b2b4-cf060fa1b999",
        "parentId" : "d4bcc07f-3305-415c-87ee-4b20cb8c333b",
        "authorId" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "body" : "thanks\n",
        "createdAt" : "2015-11-09T14:34:46Z",
        "updatedAt" : "2015-12-09T01:29:03Z",
        "lastEditedBy" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "tags" : [
        ]
      }
    ],
    "commit" : "6e46fa1fd4c6222993e4fb7d64fd694fdebb6f9c",
    "line" : 47,
    "diffHunk" : "@@ -1,1 +103,107 @@\t\tdevicePath = strings.Join([]string{\"/dev/disk/by-path/ip\", b.portal, \"iscsi\", b.iqn, \"lun\", b.lun}, \"-\")\n\t} else {\n\t\tdevicePath = strings.Join([]string{\"/dev/disk/by-path/pci\", \"*\", \"ip\", b.portal, \"iscsi\", b.iqn, \"lun\", b.lun}, \"-\")\n\t}\n\texist := waitForPathToExist(devicePath, 1, b.iface)"
  },
  {
    "id" : "9635ee81-8b9f-4f2e-b45f-c2dbe005db51",
    "prId" : 5506,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d94619af-08fd-45c6-b443-1475a304a234",
        "parentId" : null,
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "I think I asked this before - why is the PREFIX semantic required, rather than exact match?  Can you explain that?  and if so, please comment it.\n",
        "createdAt" : "2015-04-01T04:32:19Z",
        "updatedAt" : "2015-04-06T20:20:31Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      },
      {
        "id" : "518fa763-ac24-4c63-84d8-4f4d881c4543",
        "parentId" : "d94619af-08fd-45c6-b443-1475a304a234",
        "authorId" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "body" : "the comments are in the comment lines :) Below is an expanded (or rather boring) details.\n\nBasically this prefix semantics is to aggregate disk paths that belong to the same iSCSI target/iqn pair. An iSCSI target could expose multiple LUNs through the same IQN, and Linux iSCSI initiator creates disk paths that start the same prefix but end with different LUN number. And you see that is why exact match cannot do the job right.\n\nWhen we decide whether it is time to logout a target, we have to see if none of the LUNs are used any more. That's where the prefix based ref count kicks in. If we only count the disks using exact match, we could log other disks out.\n\nI think GCE PD has something similar, each PD disk path ends with a partition number. \n",
        "createdAt" : "2015-04-01T13:33:33Z",
        "updatedAt" : "2015-04-06T20:20:31Z",
        "lastEditedBy" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "tags" : [
        ]
      }
    ],
    "commit" : "7a82af31de839f70b3e50e71cb52a587e0091b82",
    "line" : null,
    "diffHunk" : "@@ -1,1 +52,56 @@// When we decide whether it is time to logout a target, we have to see if none of the LUNs are used any more.\n// That's where the prefix based ref count kicks in. If we only count the disks using exact match, we could log other disks out.\nfunc getDevicePrefixRefCount(mounter mount.Interface, deviceNamePrefix string) (int, error) {\n\tmps, err := mounter.List()\n\tif err != nil {"
  }
]