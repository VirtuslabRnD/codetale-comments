[
  {
    "id" : "067bb68b-9750-4c0a-a80e-4a26029658b7",
    "prId" : 89193,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/89193#pullrequestreview-383258441",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b4a06ded-4389-41f3-a8eb-4995f3ed62e0",
        "parentId" : null,
        "authorId" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "body" : "We explicitly ignore default mode for tokens. Why do we need to change this?",
        "createdAt" : "2020-03-27T23:51:39Z",
        "updatedAt" : "2020-05-05T01:25:34Z",
        "lastEditedBy" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "tags" : [
        ]
      },
      {
        "id" : "01b7427d-de96-48af-8168-48e4a33d7cf3",
        "parentId" : "b4a06ded-4389-41f3-a8eb-4995f3ed62e0",
        "authorId" : "f64c354b-61cb-4b89-b58f-f464e7ad4f94",
        "body" : "the fallback is 0444 when no runAsUser or fsGroup is present.",
        "createdAt" : "2020-03-28T00:00:17Z",
        "updatedAt" : "2020-05-05T01:25:34Z",
        "lastEditedBy" : "f64c354b-61cb-4b89-b58f-f464e7ad4f94",
        "tags" : [
        ]
      },
      {
        "id" : "ff5854f7-d2be-453a-b982-42d3eddab8ed",
        "parentId" : "b4a06ded-4389-41f3-a8eb-4995f3ed62e0",
        "authorId" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "body" : "Ugh, I can't read. Thanks.",
        "createdAt" : "2020-03-28T00:03:39Z",
        "updatedAt" : "2020-05-05T01:25:34Z",
        "lastEditedBy" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "tags" : [
        ]
      }
    ],
    "commit" : "3db7275b549559696c42c0b5f51c9a2397e9571d",
    "line" : 24,
    "diffHunk" : "@@ -1,1 +331,335 @@\t\t\t// When FsGroup is set, we depend on SetVolumeOwnership to\n\t\t\t// change from 0600 to 0640.\n\t\t\tmode := *s.source.DefaultMode\n\t\t\tif mounterArgs.FsUser != nil || mounterArgs.FsGroup != nil {\n\t\t\t\tmode = 0600"
  },
  {
    "id" : "6e31bcf9-f3e4-4962-a377-eddddb657c5d",
    "prId" : 89193,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/89193#pullrequestreview-384424334",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3371fe3b-8a42-4b36-a158-c62e6750b165",
        "parentId" : null,
        "authorId" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "body" : "So one flip side of this implementation is - it won't easily work for other ephemeral volume types, which was discussed in sig-storage call.",
        "createdAt" : "2020-03-30T15:36:53Z",
        "updatedAt" : "2020-05-05T01:25:34Z",
        "lastEditedBy" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "tags" : [
        ]
      },
      {
        "id" : "012c103b-f2b4-485b-9254-c9551792e656",
        "parentId" : "3371fe3b-8a42-4b36-a158-c62e6750b165",
        "authorId" : "f64c354b-61cb-4b89-b58f-f464e7ad4f94",
        "body" : "yea, it is intended to limit the scope to only projected service account token but this can be easily extended to other projected sources, non-projected secrets, non-projected configMap..etc.",
        "createdAt" : "2020-03-31T06:06:01Z",
        "updatedAt" : "2020-05-05T01:25:34Z",
        "lastEditedBy" : "f64c354b-61cb-4b89-b58f-f464e7ad4f94",
        "tags" : [
        ]
      }
    ],
    "commit" : "3db7275b549559696c42c0b5f51c9a2397e9571d",
    "line" : 28,
    "diffHunk" : "@@ -1,1 +335,339 @@\t\t\t\tmode = 0600\n\t\t\t}\n\n\t\t\tvar auds []string\n\t\t\tif len(tp.Audience) != 0 {"
  },
  {
    "id" : "d0a5787e-8d15-4dce-8b3f-e2a792340c47",
    "prId" : 89193,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/89193#pullrequestreview-403897807",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fa711f45-00ee-4ea8-b437-929d5f764d73",
        "parentId" : null,
        "authorId" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "body" : "This dereference is vaguely scary, but looks fine since we check nil above.",
        "createdAt" : "2020-04-30T00:08:41Z",
        "updatedAt" : "2020-05-05T01:25:34Z",
        "lastEditedBy" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "tags" : [
        ]
      },
      {
        "id" : "ec229124-1dae-4ff4-acd7-37c4b908825b",
        "parentId" : "fa711f45-00ee-4ea8-b437-929d5f764d73",
        "authorId" : "f64c354b-61cb-4b89-b58f-f464e7ad4f94",
        "body" : "added a test case for DefaultMode == nil",
        "createdAt" : "2020-04-30T21:41:42Z",
        "updatedAt" : "2020-05-05T01:25:34Z",
        "lastEditedBy" : "f64c354b-61cb-4b89-b58f-f464e7ad4f94",
        "tags" : [
        ]
      }
    ],
    "commit" : "3db7275b549559696c42c0b5f51c9a2397e9571d",
    "line" : 24,
    "diffHunk" : "@@ -1,1 +331,335 @@\t\t\t// When FsGroup is set, we depend on SetVolumeOwnership to\n\t\t\t// change from 0600 to 0640.\n\t\t\tmode := *s.source.DefaultMode\n\t\t\tif mounterArgs.FsUser != nil || mounterArgs.FsGroup != nil {\n\t\t\t\tmode = 0600"
  },
  {
    "id" : "7e65ab83-6db2-4855-8578-bddd291bf1be",
    "prId" : 67978,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/67978#pullrequestreview-151235838",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5ef96d9d-4e3c-44ac-9875-322d10fc445b",
        "parentId" : null,
        "authorId" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "body" : "How can this fail?",
        "createdAt" : "2018-08-30T18:40:42Z",
        "updatedAt" : "2018-10-23T02:24:22Z",
        "lastEditedBy" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "tags" : [
        ]
      },
      {
        "id" : "cf3d191c-e411-4c22-8ab9-46681d5d3ec6",
        "parentId" : "5ef96d9d-4e3c-44ac-9875-322d10fc445b",
        "authorId" : "451e6d32-0495-410e-a53b-943e3dd34a71",
        "body" : "@mikedanese  \r\nMaybe the dir  does not exist, or  the dir we want to tear down here is used by other processes.\r\nI think we need to make sure the projected volume itself has been removed successfully, after that, go to clean tokens.",
        "createdAt" : "2018-08-31T01:35:27Z",
        "updatedAt" : "2018-10-23T02:24:22Z",
        "lastEditedBy" : "451e6d32-0495-410e-a53b-943e3dd34a71",
        "tags" : [
        ]
      }
    ],
    "commit" : "060f3a84d97f4a7b792f0f58f7adb703b8bedc70",
    "line" : 29,
    "diffHunk" : "@@ -1,1 +371,375 @@\t\treturn err\n\t}\n\tif err = wrapped.TearDownAt(dir); err != nil {\n\t\treturn err\n\t}"
  },
  {
    "id" : "99dd0a55-7987-4031-af80-b70350aedb8d",
    "prId" : 67978,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/67978#pullrequestreview-163774302",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "12b8c662-3ff8-45c5-973b-5d5704eaeb2d",
        "parentId" : null,
        "authorId" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "body" : "Do you need this new method? It seems like it could just be handled in TearDownAt by a small number of volume plugins?",
        "createdAt" : "2018-10-09T22:26:23Z",
        "updatedAt" : "2018-10-23T02:24:22Z",
        "lastEditedBy" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "tags" : [
        ]
      },
      {
        "id" : "4e534a35-84c7-428e-a3cd-cb5504f90acc",
        "parentId" : "12b8c662-3ff8-45c5-973b-5d5704eaeb2d",
        "authorId" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "body" : "Can you explain this a little more?",
        "createdAt" : "2018-10-09T22:56:26Z",
        "updatedAt" : "2018-10-23T02:24:22Z",
        "lastEditedBy" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "tags" : [
        ]
      },
      {
        "id" : "4dd5f91f-2d83-4bfb-8d11-a6a3b5f51e8a",
        "parentId" : "12b8c662-3ff8-45c5-973b-5d5704eaeb2d",
        "authorId" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "body" : "hmm, maybe that doesn't make sense. I'm not too familiar with this code.",
        "createdAt" : "2018-10-09T23:14:40Z",
        "updatedAt" : "2018-10-23T02:24:22Z",
        "lastEditedBy" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "tags" : [
        ]
      },
      {
        "id" : "ce8f1db9-97a5-41b5-8852-f3f1fc2a2707",
        "parentId" : "12b8c662-3ff8-45c5-973b-5d5704eaeb2d",
        "authorId" : "451e6d32-0495-410e-a53b-943e3dd34a71",
        "body" : "@tallclair Hello, if you don't have strong view about this patch, could you please approve it. Thank you~",
        "createdAt" : "2018-10-11T11:47:14Z",
        "updatedAt" : "2018-10-23T02:24:22Z",
        "lastEditedBy" : "451e6d32-0495-410e-a53b-943e3dd34a71",
        "tags" : [
        ]
      }
    ],
    "commit" : "060f3a84d97f4a7b792f0f58f7adb703b8bedc70",
    "line" : 33,
    "diffHunk" : "@@ -1,1 +375,379 @@\t}\n\n\tc.plugin.deleteServiceAccountToken(c.podUID)\n\treturn nil\n}"
  },
  {
    "id" : "77b41869-ca6b-4686-9a91-0d9dc975a523",
    "prId" : 67978,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/67978#pullrequestreview-167037999",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "40c13346-d3c6-4858-90c1-108dae6a8610",
        "parentId" : null,
        "authorId" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "body" : "Only call this if there is a `ServiceAccountToken` source.",
        "createdAt" : "2018-10-15T20:27:04Z",
        "updatedAt" : "2018-10-23T02:24:22Z",
        "lastEditedBy" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "tags" : [
        ]
      },
      {
        "id" : "698ca368-acf8-4836-aff4-4b2dde55b50b",
        "parentId" : "40c13346-d3c6-4858-90c1-108dae6a8610",
        "authorId" : "451e6d32-0495-410e-a53b-943e3dd34a71",
        "body" : "@tallclair  Currently we can't not get the volume's detail directly in projectedVolumeUnmounter. As far as I can see, we need record projected volume's information in projectedPlugin each time NewMounter() was invoked, so projectedVolumeUnmounter could use that information to do check.\r\nI think the negative impact here is limited if we just delete tokens without serviceaccount source bounded check.\r\nWDYT",
        "createdAt" : "2018-10-19T09:40:48Z",
        "updatedAt" : "2018-10-23T02:24:22Z",
        "lastEditedBy" : "451e6d32-0495-410e-a53b-943e3dd34a71",
        "tags" : [
        ]
      },
      {
        "id" : "938dcb53-6e80-49cd-be4e-279a9156e2d8",
        "parentId" : "40c13346-d3c6-4858-90c1-108dae6a8610",
        "authorId" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "body" : "```suggestion\r\nfunc hasServiceAccountToken(sources []v1.VolumeProjection) bool {\r\n  for _, src := range sources {\r\n    if src.ServiceAccountToken != nil {\r\n      return true\r\n    }\r\n  }\r\n  return false\r\n}\r\n// ...\r\nif hasSAToken(c.sources) {\r\n  c.plugin.deleteServiceAccountToken(c.podUID)\r\n}\r\n```\r\nAm I missing something?",
        "createdAt" : "2018-10-19T21:29:10Z",
        "updatedAt" : "2018-10-23T02:24:22Z",
        "lastEditedBy" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "tags" : [
        ]
      },
      {
        "id" : "0f85f984-74a6-404b-b5a3-6b5de9238153",
        "parentId" : "40c13346-d3c6-4858-90c1-108dae6a8610",
        "authorId" : "451e6d32-0495-410e-a53b-943e3dd34a71",
        "body" : "@tallclair When projectedVolumeMounter  constructed, the sources would not be filled by any data. And I have confirmed that the code you gave is not reasonable because c.sources is always empty.\r\nhttps://github.com/kubernetes/kubernetes/blob/cbb422c214dd70735258b8e0af3b721613c2f188/pkg/volume/projected/projected.go#L123",
        "createdAt" : "2018-10-20T05:14:37Z",
        "updatedAt" : "2018-10-23T02:24:22Z",
        "lastEditedBy" : "451e6d32-0495-410e-a53b-943e3dd34a71",
        "tags" : [
        ]
      },
      {
        "id" : "1f6f4ca0-c124-4e8f-ae34-59de8d37dc01",
        "parentId" : "40c13346-d3c6-4858-90c1-108dae6a8610",
        "authorId" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "body" : "I see. Seems like the projectedVolume type should not be embedded then, but that's unrelated to this PR.\r\nThanks for clarifying.",
        "createdAt" : "2018-10-22T18:10:55Z",
        "updatedAt" : "2018-10-23T02:24:22Z",
        "lastEditedBy" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "tags" : [
        ]
      }
    ],
    "commit" : "060f3a84d97f4a7b792f0f58f7adb703b8bedc70",
    "line" : 33,
    "diffHunk" : "@@ -1,1 +375,379 @@\t}\n\n\tc.plugin.deleteServiceAccountToken(c.podUID)\n\treturn nil\n}"
  },
  {
    "id" : "8fd54c63-cde8-45a9-aa1d-ad1114e421f0",
    "prId" : 65429,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/65429#pullrequestreview-131530039",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8ebabf74-b20b-410a-ae2e-f661c8f3b098",
        "parentId" : null,
        "authorId" : "fa530650-5886-4415-a42f-0dee2e0e9ae3",
        "body" : "I guess the current behaviour does the same thing? Please let me know if I'm missing something. :)\r\n\r\n```\r\nvar readOnly bool\r\nvar volumeSource *v1.ProjectedVolumeSource\r\n```\r\n\r\nwill make sure that `nil, false, ...` is returned if not set in the if condition, since the default value (if not initialized) is `false` for the bool and `nil` for the pointer.",
        "createdAt" : "2018-06-25T09:12:34Z",
        "updatedAt" : "2018-06-25T09:12:34Z",
        "lastEditedBy" : "fa530650-5886-4415-a42f-0dee2e0e9ae3",
        "tags" : [
        ]
      },
      {
        "id" : "d494292d-0b2a-458f-b38c-fdb8c7209b94",
        "parentId" : "8ebabf74-b20b-410a-ae2e-f661c8f3b098",
        "authorId" : "451e6d32-0495-410e-a53b-943e3dd34a71",
        "body" : "@nikhita  this function would  always return fmt.Errorf(\"Spec does not reference a projected volume type\")",
        "createdAt" : "2018-06-25T09:15:56Z",
        "updatedAt" : "2018-06-25T09:15:56Z",
        "lastEditedBy" : "451e6d32-0495-410e-a53b-943e3dd34a71",
        "tags" : [
        ]
      },
      {
        "id" : "3bdfa754-f862-46d6-9295-013eff4ab0f3",
        "parentId" : "8ebabf74-b20b-410a-ae2e-f661c8f3b098",
        "authorId" : "fa530650-5886-4415-a42f-0dee2e0e9ae3",
        "body" : "oh of course :woman_facepalming: ",
        "createdAt" : "2018-06-25T09:23:29Z",
        "updatedAt" : "2018-06-25T09:23:30Z",
        "lastEditedBy" : "fa530650-5886-4415-a42f-0dee2e0e9ae3",
        "tags" : [
        ]
      },
      {
        "id" : "fbcd46d3-8f4f-4eaf-b4f8-1fd61b0f4af1",
        "parentId" : "8ebabf74-b20b-410a-ae2e-f661c8f3b098",
        "authorId" : "fa530650-5886-4415-a42f-0dee2e0e9ae3",
        "body" : "@WanLinghao thanks for catching this! :)",
        "createdAt" : "2018-06-25T09:26:02Z",
        "updatedAt" : "2018-06-25T09:26:02Z",
        "lastEditedBy" : "fa530650-5886-4415-a42f-0dee2e0e9ae3",
        "tags" : [
        ]
      }
    ],
    "commit" : "06b1eae63c32e61feecc03cd98e372016bf7833b",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +367,371 @@\t}\n\n\treturn nil, false, fmt.Errorf(\"Spec does not reference a projected volume type\")\n}"
  },
  {
    "id" : "ed3acc3d-b852-4266-9136-3085f3882e03",
    "prId" : 62005,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/62005#pullrequestreview-108678928",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7c32891b-a8e6-479e-88fb-c5d4d9b5bb46",
        "parentId" : null,
        "authorId" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "body" : "Do we put gates here or do they go on the API side or both.",
        "createdAt" : "2018-04-02T17:00:01Z",
        "updatedAt" : "2018-06-05T00:22:45Z",
        "lastEditedBy" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "tags" : [
        ]
      },
      {
        "id" : "ae9cb058-3156-4310-8f2a-b225d81d20fe",
        "parentId" : "7c32891b-a8e6-479e-88fb-c5d4d9b5bb46",
        "authorId" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "body" : "Both. Added feature gate.",
        "createdAt" : "2018-04-02T17:31:17Z",
        "updatedAt" : "2018-06-05T00:22:45Z",
        "lastEditedBy" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "tags" : [
        ]
      }
    ],
    "commit" : "91feb345aa021fd69161a6635f5d6fcf50af8680",
    "line" : 78,
    "diffHunk" : "@@ -1,1 +303,307 @@\t\t\t\tpayload[k] = v\n\t\t\t}\n\t\tcase source.ServiceAccountToken != nil:\n\t\t\tif !utilfeature.DefaultFeatureGate.Enabled(features.TokenRequestProjection) {\n\t\t\t\terrlist = append(errlist, fmt.Errorf(\"pod request ServiceAccountToken projection but the TokenRequestProjection feature was not enabled\"))"
  },
  {
    "id" : "b23c6e41-1f0c-4733-8510-cbd1ea726b64",
    "prId" : 37237,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/37237#pullrequestreview-21021753",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a136050e-690c-4087-bb91-daabdb635953",
        "parentId" : null,
        "authorId" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "body" : "Let's be consistent in naming and call this package `projection` and name the types that way as well.",
        "createdAt" : "2017-02-09T17:52:30Z",
        "updatedAt" : "2017-02-20T18:10:10Z",
        "lastEditedBy" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "tags" : [
        ]
      }
    ],
    "commit" : "ec701a65e80f2767708060027c4a4664d8ec46a0",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +15,19 @@*/\n\npackage projected\n\nimport ("
  }
]