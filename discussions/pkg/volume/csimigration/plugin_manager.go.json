[
  {
    "id" : "f6c4d7ee-0d81-44b5-99f4-9b1830bcf0e8",
    "prId" : 83098,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/83098#pullrequestreview-317209158",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4b580b44-c543-47fb-95c6-04728d658803",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "granted the \"turn on all alpha features\" CI job is an unusual case, but I'm reconsidering making this a failure given the gymnastics https://github.com/kubernetes/test-infra/pull/15286/files has to go through. Maybe just warning in these cases would be sufficient, to tell someone they've turned on a particular feature or feature complete flag that doesn't make a lot of sense",
        "createdAt" : "2019-11-14T19:35:05Z",
        "updatedAt" : "2019-11-15T01:28:24Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "129f15328bfc159e759260408fedbb9ea1ab2b61",
    "line" : 156,
    "diffHunk" : "@@ -1,1 +154,158 @@\t}\n\treturn nil\n}"
  },
  {
    "id" : "70121f1e-0f6c-47f8-8c92-80f3ac57ce9e",
    "prId" : 83098,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/83098#pullrequestreview-317303755",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4b0996cc-1f3b-4d4a-ae87-ce23b638d52f",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "nothing in this method uses `pm`... this could be a function instead of a method, then be used by kube-controller-manager and kubelet so they don't have to maintain their own plugin -> feature name mapping",
        "createdAt" : "2019-11-14T20:58:53Z",
        "updatedAt" : "2019-11-15T01:28:24Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "cb4f4c7e-ddbb-42ee-8eae-e8b5b40697eb",
        "parentId" : "4b0996cc-1f3b-4d4a-ae87-ce23b638d52f",
        "authorId" : "98986d5f-c846-4478-8363-8a016e3d6b89",
        "body" : "@liggitt I completely agree that in the context of the above, `IsMigrationCompleteForPlugin`/`IsMigrationEnabledForPlugin` could be a function instead of method. However, the reason I did not make it a function is: enabling the unit testing of modules using these methods (such as the pv_controller) and align with the overall pattern introduced in https://github.com/kubernetes/kubernetes/pull/82683. \r\n\r\nSo having these as methods allows an easy way for unit tests for the controller using these to create an interface implementing `IsMigrationCompleteForPlugin`/`IsMigrationEnabledForPlugin` and use fake plugins (for example for [pv_controller](https://github.com/kubernetes/kubernetes/pull/83098/files#diff-6c9081ca34ca47769f31d0df75a50934R532)).",
        "createdAt" : "2019-11-14T21:46:55Z",
        "updatedAt" : "2019-11-15T01:28:24Z",
        "lastEditedBy" : "98986d5f-c846-4478-8363-8a016e3d6b89",
        "tags" : [
        ]
      },
      {
        "id" : "0e066637-377a-4354-a81d-8a32e0e1b1df",
        "parentId" : "4b0996cc-1f3b-4d4a-ae87-ce23b638d52f",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "having the feature mapping in multiple places is going to be hard to maintain if more things are added to migration (especially if implementations fall back to reporting false if an unknown plugin is asked about). I still think these should collapse to a single authoritative spot in the code, but that can be a follow up. David opened https://github.com/kubernetes/kubernetes/issues/85313 to track that.",
        "createdAt" : "2019-11-14T22:11:27Z",
        "updatedAt" : "2019-11-15T01:28:24Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "a8dcbc7e-0f34-4f83-9cf0-46c8b0adc3d3",
        "parentId" : "4b0996cc-1f3b-4d4a-ae87-ce23b638d52f",
        "authorId" : "98986d5f-c846-4478-8363-8a016e3d6b89",
        "body" : "Totally agree about single spot in the code for the mappings rather than multiple places.",
        "createdAt" : "2019-11-14T22:28:43Z",
        "updatedAt" : "2019-11-15T01:28:24Z",
        "lastEditedBy" : "98986d5f-c846-4478-8363-8a016e3d6b89",
        "tags" : [
        ]
      }
    ],
    "commit" : "129f15328bfc159e759260408fedbb9ea1ab2b61",
    "line" : 52,
    "diffHunk" : "@@ -1,1 +50,54 @@// IsMigrationCompleteForPlugin indicates whether CSI migration has been completed\n// for a particular storage plugin\nfunc (pm PluginManager) IsMigrationCompleteForPlugin(pluginName string) bool {\n\t// CSIMigration feature and plugin specific migration feature flags should\n\t// be enabled for plugin specific migration completion feature flags to be"
  },
  {
    "id" : "eeaf536c-4280-4027-b5c8-d0d01c3332d3",
    "prId" : 83098,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/83098#pullrequestreview-317282771",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cfa73ef9-e6bb-4aa5-859c-aa03b56bacdf",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "same here, nothing in this method uses `pm`... this could be a function instead of a method, then be used by kube-controller-manager and kubelet so they don't have to maintain their own plugin -> feature name mapping",
        "createdAt" : "2019-11-14T20:59:04Z",
        "updatedAt" : "2019-11-15T01:28:24Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "d6a659b2-87e3-4cd3-be07-91543a1319f7",
        "parentId" : "cfa73ef9-e6bb-4aa5-859c-aa03b56bacdf",
        "authorId" : "98986d5f-c846-4478-8363-8a016e3d6b89",
        "body" : "Explained [above](https://github.com/kubernetes/kubernetes/pull/83098#discussion_r346562857)",
        "createdAt" : "2019-11-14T21:48:45Z",
        "updatedAt" : "2019-11-15T01:28:24Z",
        "lastEditedBy" : "98986d5f-c846-4478-8363-8a016e3d6b89",
        "tags" : [
        ]
      }
    ],
    "commit" : "129f15328bfc159e759260408fedbb9ea1ab2b61",
    "line" : 78,
    "diffHunk" : "@@ -1,1 +76,80 @@// IsMigrationEnabledForPlugin indicates whether CSI migration has been enabled\n// for a particular storage plugin\nfunc (pm PluginManager) IsMigrationEnabledForPlugin(pluginName string) bool {\n\t// CSIMigration feature should be enabled along with the plugin-specific one\n\tif !utilfeature.DefaultFeatureGate.Enabled(features.CSIMigration) {"
  }
]