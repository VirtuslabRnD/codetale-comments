[
  {
    "id" : "2f275f12-b854-44e1-994f-bc5db7c2fddb",
    "prId" : 18580,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b6332dbd-cb8e-478f-aba9-ced61073c9f4",
        "parentId" : null,
        "authorId" : "766f642e-1622-4803-803b-05ce306fc30e",
        "body" : "what makes you think this is on tmpfs?\n",
        "createdAt" : "2015-12-11T18:50:24Z",
        "updatedAt" : "2015-12-14T15:47:25Z",
        "lastEditedBy" : "766f642e-1622-4803-803b-05ce306fc30e",
        "tags" : [
        ]
      },
      {
        "id" : "ffdbc5ec-eb57-4423-bbf9-5ff8b907ed44",
        "parentId" : "b6332dbd-cb8e-478f-aba9-ced61073c9f4",
        "authorId" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "body" : "`os.TempDir()` gives you /tmp on linux...\n",
        "createdAt" : "2015-12-11T19:46:29Z",
        "updatedAt" : "2015-12-14T15:47:25Z",
        "lastEditedBy" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "tags" : [
        ]
      },
      {
        "id" : "110b0dca-7ec9-4ac2-897c-b50152eb6306",
        "parentId" : "b6332dbd-cb8e-478f-aba9-ced61073c9f4",
        "authorId" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "body" : "I suppose you're right though, it's really expected usage of an empty temporary directory however that might be defined on your system.\n",
        "createdAt" : "2015-12-11T19:51:09Z",
        "updatedAt" : "2015-12-14T15:47:25Z",
        "lastEditedBy" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "tags" : [
        ]
      },
      {
        "id" : "ae90bb1c-c9fb-478e-892a-ceb7751aecf8",
        "parentId" : "b6332dbd-cb8e-478f-aba9-ced61073c9f4",
        "authorId" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "body" : "So this method is not working around a tmpfs issue, but rather a GCE ext4 issue. Should we rename the method appropriately?\n",
        "createdAt" : "2015-12-11T22:53:28Z",
        "updatedAt" : "2015-12-14T15:47:25Z",
        "lastEditedBy" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "tags" : [
        ]
      },
      {
        "id" : "9368e0b4-a482-4b5e-bda9-7d9fb644a420",
        "parentId" : "b6332dbd-cb8e-478f-aba9-ced61073c9f4",
        "authorId" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "body" : "Yeah, I'll rename the method to be what it represents.  The issue isn't with any filesystem, really, it's with the assumptions baked into the test.\n",
        "createdAt" : "2015-12-11T23:27:32Z",
        "updatedAt" : "2015-12-14T15:47:25Z",
        "lastEditedBy" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "tags" : [
        ]
      }
    ],
    "commit" : "eb89c2519a7522f8caa276ef463aae8d7bcd3913",
    "line" : 23,
    "diffHunk" : "@@ -1,1 +276,280 @@// a tmpfs filesystem on this system.\nfunc FindEmptyDirectoryUsageOnTmpfs() (*resource.Quantity, error) {\n\ttmpDir, err := ioutil.TempDir(os.TempDir(), \"metrics_du_test\")\n\tif err != nil {\n\t\treturn nil, err"
  },
  {
    "id" : "02f9783a-265e-49c0-b26d-e0e10e659211",
    "prId" : 18580,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9cbc819b-5024-4a2e-a42b-c688fb03fce7",
        "parentId" : null,
        "authorId" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "body" : "Can we reuse existing `du` code? And why is the usage not `0` to begin with?\n",
        "createdAt" : "2015-12-11T19:51:52Z",
        "updatedAt" : "2015-12-14T15:47:25Z",
        "lastEditedBy" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "tags" : [
        ]
      },
      {
        "id" : "dac48cf8-1ab3-45dc-9d34-c89ef302259a",
        "parentId" : "9cbc819b-5024-4a2e-a42b-c688fb03fce7",
        "authorId" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "body" : "@vissh under the debian flavor in GCE, directories in /tmp report 4096 under du. :(\n",
        "createdAt" : "2015-12-11T19:54:50Z",
        "updatedAt" : "2015-12-14T15:47:25Z",
        "lastEditedBy" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "tags" : [
        ]
      },
      {
        "id" : "441862d0-3214-4b89-a0f1-c90783d4543e",
        "parentId" : "9cbc819b-5024-4a2e-a42b-c688fb03fce7",
        "authorId" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "body" : "I don't think `/tmp` is a tmpfs on GCE. But it does report 4096 as usage.\n",
        "createdAt" : "2015-12-11T22:51:59Z",
        "updatedAt" : "2015-12-14T15:47:25Z",
        "lastEditedBy" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "tags" : [
        ]
      },
      {
        "id" : "df5e9eeb-fdeb-443c-be24-228da6e2b8c0",
        "parentId" : "9cbc819b-5024-4a2e-a42b-c688fb03fce7",
        "authorId" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "body" : "@vishh you're right:\n\n```\npmorie@du-test:~$ mount\nsysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)\nproc on /proc type proc (rw,nosuid,nodev,noexec,relatime)\nudev on /dev type devtmpfs (rw,relatime,size=10240k,nr_inodes=472940,mode=755)\ndevpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)\ntmpfs on /run type tmpfs (rw,nosuid,relatime,size=760208k,mode=755)\n/dev/sda1 on / type ext4 (rw,relatime,data=ordered)\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\ntmpfs on /dev/shm type tmpfs (rw,nosuid,nodev)\ntmpfs on /run/lock type tmpfs (rw,nosuid,nodev,noexec,relatime,size=5120k)\ntmpfs on /sys/fs/cgroup type tmpfs (ro,nosuid,nodev,noexec,mode=755)\ncgroup on /sys/fs/cgroup/systemd type cgroup (rw,nosuid,nodev,noexec,relatime,xattr,release_agent=/lib/systemd/s\nystemd-cgroups-agent,name=systemd)\npstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)\ncgroup on /sys/fs/cgroup/cpuset type cgroup (rw,nosuid,nodev,noexec,relatime,cpuset)\ncgroup on /sys/fs/cgroup/cpu,cpuacct type cgroup (rw,nosuid,nodev,noexec,relatime,cpu,cpuacct)\ncgroup on /sys/fs/cgroup/devices type cgroup (rw,nosuid,nodev,noexec,relatime,devices)\ncgroup on /sys/fs/cgroup/freezer type cgroup (rw,nosuid,nodev,noexec,relatime,freezer)\ncgroup on /sys/fs/cgroup/net_cls,net_prio type cgroup (rw,nosuid,nodev,noexec,relatime,net_cls,net_prio)\ncgroup on /sys/fs/cgroup/blkio type cgroup (rw,nosuid,nodev,noexec,relatime,blkio)\ncgroup on /sys/fs/cgroup/perf_event type cgroup (rw,nosuid,nodev,noexec,relatime,perf_event)\nsystemd-1 on /proc/sys/fs/binfmt_misc type autofs (rw,relatime,fd=23,pgrp=1,timeout=300,minproto=5,maxproto=5,di\nrect)\ndebugfs on /sys/kernel/debug type debugfs (rw,relatime)\nmqueue on /dev/mqueue type mqueue (rw,relatime)\nhugetlbfs on /dev/hugepages type hugetlbfs (rw,relatime)\n```\n",
        "createdAt" : "2015-12-11T23:28:57Z",
        "updatedAt" : "2015-12-14T15:47:25Z",
        "lastEditedBy" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "tags" : [
        ]
      }
    ],
    "commit" : "eb89c2519a7522f8caa276ef463aae8d7bcd3913",
    "line" : 27,
    "diffHunk" : "@@ -1,1 +280,284 @@\t\treturn nil, err\n\t}\n\tout, err := exec.Command(\"nice\", \"-n\", \"19\", \"du\", \"-s\", \"-B\", \"1\", tmpDir).CombinedOutput()\n\tif err != nil {\n\t\treturn nil, fmt.Errorf(\"failed command 'du' on %s with error %v\", tmpDir, err)"
  }
]