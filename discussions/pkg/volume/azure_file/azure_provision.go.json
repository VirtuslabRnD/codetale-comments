[
  {
    "id" : "139eba1e-6a52-487e-932b-db3a47a11f01",
    "prId" : 99122,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/99122#pullrequestreview-592134454",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b73cce00-93a2-4198-9035-294b2e86737c",
        "parentId" : null,
        "authorId" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "body" : "@andyzhangx what do you think about this change?",
        "createdAt" : "2021-02-17T12:20:14Z",
        "updatedAt" : "2021-02-17T12:20:15Z",
        "lastEditedBy" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "tags" : [
        ]
      }
    ],
    "commit" : "8d804287d34080630cbe420032ff8e7e74271724",
    "line" : 11,
    "diffHunk" : "@@ -1,1 +215,219 @@\t\t// when using azure file premium, the shares have a minimum size\n\t\tif fileShareSize < minimumPremiumShareSize {\n\t\t\tfileShareSize = minimumPremiumShareSize\n\t\t}\n\t}"
  },
  {
    "id" : "6f161576-ef79-4ced-af43-c094d1196719",
    "prId" : 90350,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/90350#pullrequestreview-408605550",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b3c950ed-42d4-4c18-9e63-8473f4f4e684",
        "parentId" : null,
        "authorId" : "e0218e0a-9e55-43f5-8929-04673eea9015",
        "body" : "this is restricting to use node resource group, while storage account could also be in external resource group, .e.g.\r\n```\r\n---\r\nkind: StorageClass\r\napiVersion: storage.k8s.io/v1\r\nmetadata:\r\n  name: azurefile\r\nprovisioner: kubernetes.io/azure-file\r\nparameters:\r\n  skuName: Standard_LRS\r\n  resourceGroup: EXISTING_RESOURCE_GROUP_NAME\r\n```",
        "createdAt" : "2020-04-29T08:44:14Z",
        "updatedAt" : "2020-05-12T05:35:52Z",
        "lastEditedBy" : "e0218e0a-9e55-43f5-8929-04673eea9015",
        "tags" : [
        ]
      },
      {
        "id" : "161c5b3d-cce7-431e-b8a0-bc3988db767b",
        "parentId" : "b3c950ed-42d4-4c18-9e63-8473f4f4e684",
        "authorId" : "e0218e0a-9e55-43f5-8929-04673eea9015",
        "body" : "and in this PR, `f.resourceGroup` could only have one determined value, which means azure file share can only exists in node resource group, this issue could be the blocker here.",
        "createdAt" : "2020-04-29T08:50:23Z",
        "updatedAt" : "2020-05-12T05:35:52Z",
        "lastEditedBy" : "e0218e0a-9e55-43f5-8929-04673eea9015",
        "tags" : [
        ]
      },
      {
        "id" : "565e0dba-6ffa-4975-88ff-78798c68349d",
        "parentId" : "b3c950ed-42d4-4c18-9e63-8473f4f4e684",
        "authorId" : "e0218e0a-9e55-43f5-8929-04673eea9015",
        "body" : "one workaround is add a new field(`azurestorageresourcegroupname`) in secret:\r\nhttps://github.com/kubernetes/kubernetes/blob/0c3c2cd6ac8c9ffefc38f9746034e546331b9cd6/pkg/volume/azure_file/azure_util.go#L62-L67\r\nshould make sure it's backward-compatible",
        "createdAt" : "2020-04-29T08:55:58Z",
        "updatedAt" : "2020-05-12T05:35:52Z",
        "lastEditedBy" : "e0218e0a-9e55-43f5-8929-04673eea9015",
        "tags" : [
        ]
      },
      {
        "id" : "21015bcd-df7e-4e6b-ad34-387e30d1b62c",
        "parentId" : "b3c950ed-42d4-4c18-9e63-8473f4f4e684",
        "authorId" : "1fb95b3f-bcb1-456b-927f-cb13d92f6f43",
        "body" : "I use another workaround. Set the resourceGroup into PV annotation. This way won't make users change the usage. PTAL.",
        "createdAt" : "2020-05-09T02:57:08Z",
        "updatedAt" : "2020-05-12T05:35:52Z",
        "lastEditedBy" : "1fb95b3f-bcb1-456b-927f-cb13d92f6f43",
        "tags" : [
        ]
      }
    ],
    "commit" : "01713f2411d8be01aa2742a5a2646dd8e3d923a4",
    "line" : 134,
    "diffHunk" : "@@ -1,1 +247,251 @@\t}\n\n\treturn azureCloudProvider, azureCloudProvider.ResourceGroup, nil\n}"
  },
  {
    "id" : "719686eb-a93d-46d6-9385-4983addf2466",
    "prId" : 90350,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/90350#pullrequestreview-408622205",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "00eb6c27-8d1c-4c6a-b33a-5862a6164c7e",
        "parentId" : null,
        "authorId" : "e0218e0a-9e55-43f5-8929-04673eea9015",
        "body" : "the default resource group is in `azureCloudProvider`, so it's not necessary to return `resourceGroup` here.",
        "createdAt" : "2020-05-09T05:24:45Z",
        "updatedAt" : "2020-05-12T05:35:52Z",
        "lastEditedBy" : "e0218e0a-9e55-43f5-8929-04673eea9015",
        "tags" : [
        ]
      },
      {
        "id" : "aa722c34-bc94-4e0f-8be4-70a58119bef5",
        "parentId" : "00eb6c27-8d1c-4c6a-b33a-5862a6164c7e",
        "authorId" : "1fb95b3f-bcb1-456b-927f-cb13d92f6f43",
        "body" : "Acctually, `azureCloudProvider` is an interface. We can not directly get the `resourceGroup`. Need to make a type assertion and judge the result firstly. Only in the function which has handled like this can we get `resourceGroup`. Otherwise, out of the function, need to assert type again. \r\n\r\nSo in order to reduce the duplicated code, I put the `resourceGroup` into return values.\r\n",
        "createdAt" : "2020-05-09T07:29:05Z",
        "updatedAt" : "2020-05-12T05:35:52Z",
        "lastEditedBy" : "1fb95b3f-bcb1-456b-927f-cb13d92f6f43",
        "tags" : [
        ]
      }
    ],
    "commit" : "01713f2411d8be01aa2742a5a2646dd8e3d923a4",
    "line" : 126,
    "diffHunk" : "@@ -1,1 +241,245 @@\n// Return cloud provider\nfunc getAzureCloudProvider(cloudProvider cloudprovider.Interface) (azureCloudProvider, string, error) {\n\tazureCloudProvider, ok := cloudProvider.(*azure.Cloud)\n\tif !ok || azureCloudProvider == nil {"
  },
  {
    "id" : "bf6a3eb4-76fe-46d4-9153-87cdf78faf56",
    "prId" : 69718,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/69718#pullrequestreview-165444390",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7adbb4a8-0d44-4de5-9ef1-8084c1b89518",
        "parentId" : null,
        "authorId" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "body" : "For the `azure premium file only supports pvc size >= 100GB` issue, could we add a check here? The error message `Cannot downgrade quota while the prior quota change is in progress` is misleading, we should replace it with a more clear message.",
        "createdAt" : "2018-10-12T07:38:44Z",
        "updatedAt" : "2018-10-17T03:27:49Z",
        "lastEditedBy" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "tags" : [
        ]
      },
      {
        "id" : "cba31137-8dc7-4c66-8284-901970d7c762",
        "parentId" : "7adbb4a8-0d44-4de5-9ef1-8084c1b89518",
        "authorId" : "e0218e0a-9e55-43f5-8929-04673eea9015",
        "body" : "@feiskyer we may not add a check here since `100GB` limit may change in the near future, there are also some constraints in quota size, it should be in a range, while we would not add chose checks either. I have already talked with azure premium file team, they think the error message is not correct, they would change that message.",
        "createdAt" : "2018-10-15T02:51:12Z",
        "updatedAt" : "2018-10-17T03:27:49Z",
        "lastEditedBy" : "e0218e0a-9e55-43f5-8929-04673eea9015",
        "tags" : [
        ]
      },
      {
        "id" : "06409dd8-b934-42c0-9446-876e94fb6d4a",
        "parentId" : "7adbb4a8-0d44-4de5-9ef1-8084c1b89518",
        "authorId" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "body" : "Looks reasonable. Please add the error message to release note, so that users could find it easily.",
        "createdAt" : "2018-10-15T03:08:30Z",
        "updatedAt" : "2018-10-17T03:27:49Z",
        "lastEditedBy" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "tags" : [
        ]
      },
      {
        "id" : "b8db7b01-9029-4ec1-a5c2-4fd0676524a6",
        "parentId" : "7adbb4a8-0d44-4de5-9ef1-8084c1b89518",
        "authorId" : "e0218e0a-9e55-43f5-8929-04673eea9015",
        "body" : "After further investigation, I found this error message is caused by the second API call by set file share quota, I will try to address this issue in another PR: use one API call to create file share\r\nhttps://github.com/kubernetes/kubernetes/blob/02cca1f11a8ae570369540564604d0cde06e0720/pkg/cloudprovider/providers/azure/azure_file.go#L70-L71",
        "createdAt" : "2018-10-15T06:48:43Z",
        "updatedAt" : "2018-10-17T03:27:49Z",
        "lastEditedBy" : "e0218e0a-9e55-43f5-8929-04673eea9015",
        "tags" : [
        ]
      },
      {
        "id" : "5408b6f5-7734-40c2-a5fb-20e5dbef26ef",
        "parentId" : "7adbb4a8-0d44-4de5-9ef1-8084c1b89518",
        "authorId" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "body" : "Maybe a separate commit is better? so that you don't need add 'Cannot downgrade quota while the prior quota change is in progress. Please try again later' to release notes",
        "createdAt" : "2018-10-17T00:23:21Z",
        "updatedAt" : "2018-10-17T03:27:49Z",
        "lastEditedBy" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "tags" : [
        ]
      },
      {
        "id" : "f9a865a8-5095-4b3c-8565-684db316cede",
        "parentId" : "7adbb4a8-0d44-4de5-9ef1-8084c1b89518",
        "authorId" : "e0218e0a-9e55-43f5-8929-04673eea9015",
        "body" : "@feiskyer I have fixed it in new commit, PTAL, now it's using one API call",
        "createdAt" : "2018-10-17T03:28:21Z",
        "updatedAt" : "2018-10-17T03:28:21Z",
        "lastEditedBy" : "e0218e0a-9e55-43f5-8929-04673eea9015",
        "tags" : [
        ]
      }
    ],
    "commit" : "bc2c79a43af1ad47218643c0a3b58b3388606336",
    "line" : 28,
    "diffHunk" : "@@ -1,1 +178,182 @@\tif strings.HasPrefix(strings.ToLower(sku), \"premium\") {\n\t\taccountKind = string(storage.FileStorage)\n\t}\n\taccount, key, err := a.azureProvider.CreateFileShare(name, account, sku, accountKind, resourceGroup, location, requestGiB)\n\tif err != nil {"
  },
  {
    "id" : "91138d28-0b48-4864-980c-a7fd845f35b6",
    "prId" : 53172,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/53172#pullrequestreview-66051066",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "52347248-2d38-49d8-9357-52438d6f24a7",
        "parentId" : null,
        "authorId" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "body" : "Some test/docs would be nice about why we are doing what we are doing and also making sure it doesn't regress. ",
        "createdAt" : "2017-09-28T15:01:07Z",
        "updatedAt" : "2017-09-28T15:01:07Z",
        "lastEditedBy" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "tags" : [
        ]
      },
      {
        "id" : "19fa7a88-c611-407e-b610-47eebb441352",
        "parentId" : "52347248-2d38-49d8-9357-52438d6f24a7",
        "authorId" : "e0218e0a-9e55-43f5-8929-04673eea9015",
        "body" : "yes, I will add azure file test case in master branch first, since this is only a cherry pick, shall we merge this PR first?",
        "createdAt" : "2017-09-29T02:29:23Z",
        "updatedAt" : "2017-09-29T02:29:23Z",
        "lastEditedBy" : "e0218e0a-9e55-43f5-8929-04673eea9015",
        "tags" : [
        ]
      },
      {
        "id" : "831b5f80-3981-47c8-beae-332966387968",
        "parentId" : "52347248-2d38-49d8-9357-52438d6f24a7",
        "authorId" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "body" : "@gnufied agreed with andy, this is a cherry-pick aimed to fix a critical bug. ",
        "createdAt" : "2017-09-29T02:36:56Z",
        "updatedAt" : "2017-09-29T02:36:56Z",
        "lastEditedBy" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "tags" : [
        ]
      },
      {
        "id" : "de44a59e-881b-4980-a90e-18b01aaa5d32",
        "parentId" : "52347248-2d38-49d8-9357-52438d6f24a7",
        "authorId" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "body" : "The original PR was opened without cherry-pick title I think, so I didn't think it was a cherry-pick.",
        "createdAt" : "2017-09-29T03:08:13Z",
        "updatedAt" : "2017-09-29T03:08:13Z",
        "lastEditedBy" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "tags" : [
        ]
      }
    ],
    "commit" : "69e73b24a47463883a4113ab3739cb2f571771ec",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +142,146 @@\tname := volume.GenerateVolumeName(a.options.ClusterName, a.options.PVName, 63)\n\tname = strings.Replace(name, \"--\", \"-\", -1)\n\tcapacity := a.options.PVC.Spec.Resources.Requests[v1.ResourceName(v1.ResourceStorage)]\n\trequestBytes := capacity.Value()\n\trequestGB := int(volume.RoundUpSize(requestBytes, 1024*1024*1024))"
  }
]