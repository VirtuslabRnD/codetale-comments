[
  {
    "id" : "cd75ec57-2a96-44d0-a3dc-071c8e33f1a1",
    "prId" : 9384,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2aeccaa7-5a72-4bdc-ab5c-d8e36e2524ca",
        "parentId" : null,
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "reference https://github.com/GoogleCloudPlatform/kubernetes/issues/2630 here?\n",
        "createdAt" : "2015-07-27T17:07:40Z",
        "updatedAt" : "2015-07-29T22:36:54Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      }
    ],
    "commit" : "5394aa979f195a7b480ca0f46d996f6fe05910e2",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +33,37 @@// TODO: in the near future, this will be changed to be more restrictive\n// and the group will be set to allow containers to use emptyDir volumes\n// from the group attribute.\n//\n// https://github.com/GoogleCloudPlatform/kubernetes/issues/2630"
  },
  {
    "id" : "ced729d3-0ee4-49bb-a683-3ab2531ec3f9",
    "prId" : 9384,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "285b0c1a-19a0-43ee-865c-1a01854325b5",
        "parentId" : null,
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "Can I just say how annoying it is to sprinkle selinux all over the codebase.  Is this REALLY the best we can do?\n",
        "createdAt" : "2015-07-27T17:17:25Z",
        "updatedAt" : "2015-07-29T22:36:54Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      },
      {
        "id" : "97d6f56d-c177-46c1-873d-da120df90b43",
        "parentId" : "285b0c1a-19a0-43ee-865c-1a01854325b5",
        "authorId" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "body" : "I agree.  I'm actually starting to gather reqs on solving this for other volumes, and I think we can have a follow-up to push the SELinux code up to a higher level so that the volume plugins won't have to do this work individually.  Are you cool w/ that @thockin ?\n",
        "createdAt" : "2015-07-27T18:59:27Z",
        "updatedAt" : "2015-07-29T22:36:54Z",
        "lastEditedBy" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "tags" : [
        ]
      },
      {
        "id" : "7f96cebc-d82f-4937-9944-f1d54d46bcbd",
        "parentId" : "285b0c1a-19a0-43ee-865c-1a01854325b5",
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "yes\n\nOn Mon, Jul 27, 2015 at 12:00 PM, Paul Morie notifications@github.com\nwrote:\n\n> In pkg/volume/empty_dir/empty_dir.go\n> https://github.com/GoogleCloudPlatform/kubernetes/pull/9384#discussion_r35572994\n> :\n> \n> > @@ -168,26 +206,66 @@ func (ed *emptyDir) setupTmpfs(dir string) error {\n> >     // By default a tmpfs mount will receive a different SELinux context\n> >     // from that of the Kubelet root directory which is not readable from\n> >     // the SELinux context of a docker container.\n> > -   //\n> > -   // getTmpfsMountOptions gets the mount option to set the context of\n> > -   // the tmpfs mount so that it can be read from the SELinux context of\n> > -   // the container.\n> > -   opts := ed.getTmpfsMountOptions()\n> > -   glog.V(3).Infof(\"pod %v: mounting tmpfs for volume %v with opts %v\", ed.podUID, ed.volName, opts)\n> > -   var opts []string\n> > -   if selinuxContext != \"\" {\n> \n> I agree. I'm actually starting to gather reqs on solving this for other\n> volumes, and I think we can have a follow-up to push the SELinux code up to\n> a higher level so that the volume plugins won't have to do this work\n> individually. Are you cool w/ that @thockin https://github.com/thockin ?\n> \n> â€”\n> Reply to this email directly or view it on GitHub\n> https://github.com/GoogleCloudPlatform/kubernetes/pull/9384/files#r35572994\n> .\n",
        "createdAt" : "2015-07-27T20:57:26Z",
        "updatedAt" : "2015-07-29T22:36:54Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      },
      {
        "id" : "79ce38fa-874f-4042-9d09-89330d93bb24",
        "parentId" : "285b0c1a-19a0-43ee-865c-1a01854325b5",
        "authorId" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "body" : "@thockin Created https://github.com/GoogleCloudPlatform/kubernetes/issues/11917\n",
        "createdAt" : "2015-07-28T03:58:25Z",
        "updatedAt" : "2015-07-29T22:36:54Z",
        "lastEditedBy" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "tags" : [
        ]
      }
    ],
    "commit" : "5394aa979f195a7b480ca0f46d996f6fe05910e2",
    "line" : null,
    "diffHunk" : "@@ -1,1 +213,217 @@\t// which is not readable from the SELinux context of a docker container.\n\tvar opts []string\n\tif selinuxContext != \"\" {\n\t\topts = []string{fmt.Sprintf(\"rootcontext=\\\"%v\\\"\", selinuxContext)}\n\t} else {"
  },
  {
    "id" : "a78ba024-81e0-4c2b-a06a-49b9000d743b",
    "prId" : 9384,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "56605dba-6511-4bbe-89ae-29c9b1114b9f",
        "parentId" : null,
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "I thought I submitted this comment, but it is gone.\n\nBoth of these end up calling SetupDir() - any reason not to factor it as\n\n```\nSetupDir()\nswitch medium {\n...\n}\n```\n",
        "createdAt" : "2015-07-27T17:21:36Z",
        "updatedAt" : "2015-07-29T22:36:54Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      },
      {
        "id" : "c762903a-a029-4f35-9992-733ba15fe449",
        "parentId" : "56605dba-6511-4bbe-89ae-29c9b1114b9f",
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "i.e. does it help to encapsulate selinux mess at all?\n",
        "createdAt" : "2015-07-27T17:22:07Z",
        "updatedAt" : "2015-07-29T22:36:54Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      },
      {
        "id" : "feabad20-5c8d-4306-a2d2-289f5e38c71a",
        "parentId" : "56605dba-6511-4bbe-89ae-29c9b1114b9f",
        "authorId" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "body" : "You're right, we can pull it up and call `setupDir` for both cases and then call `setupTmpfs` for memory medium.\n",
        "createdAt" : "2015-07-27T20:47:18Z",
        "updatedAt" : "2015-07-29T22:36:54Z",
        "lastEditedBy" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "tags" : [
        ]
      }
    ],
    "commit" : "5394aa979f195a7b480ca0f46d996f6fe05910e2",
    "line" : 109,
    "diffHunk" : "@@ -1,1 +172,176 @@\tswitch ed.medium {\n\tcase api.StorageMediumDefault:\n\t\terr = ed.setupDir(dir, securityContext)\n\tcase api.StorageMediumMemory:\n\t\terr = ed.setupTmpfs(dir, securityContext)"
  },
  {
    "id" : "ad2f920a-808f-46ea-9846-45293a914149",
    "prId" : 6379,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9babadac-2d50-4b6d-a436-d4b8d4d61653",
        "parentId" : null,
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "Why is this block duplicated from above?\n",
        "createdAt" : "2015-04-10T06:25:05Z",
        "updatedAt" : "2015-04-13T17:47:15Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      },
      {
        "id" : "e36e9476-9f6e-4b12-bc2c-4c1911865c71",
        "parentId" : "9babadac-2d50-4b6d-a436-d4b8d4d61653",
        "authorId" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "body" : "Inadvertent, I will fix.\n",
        "createdAt" : "2015-04-10T16:41:50Z",
        "updatedAt" : "2015-04-13T17:47:15Z",
        "lastEditedBy" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "tags" : [
        ]
      }
    ],
    "commit" : "c98e89fca0a188997737a3acdd913f39920a7e31",
    "line" : null,
    "diffHunk" : "@@ -1,1 +198,202 @@\t// If the directory is a mountpoint with medium memory, there is no\n\t// work to do since we are already in the desired state.\n\tif isMnt && medium == mediumMemory {\n\t\treturn nil\n\t}"
  }
]