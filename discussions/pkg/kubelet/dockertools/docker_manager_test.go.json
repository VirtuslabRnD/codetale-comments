[
  {
    "id" : "cdf16dc1-1a5b-404b-9dc5-4e5d68d54b01",
    "prId" : 33233,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/33233#pullrequestreview-2419650",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b8d5a04e-f809-4175-950a-c756ff9115c6",
        "parentId" : null,
        "authorId" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "body" : "Hm, seems like we need a builder for fake docker client and fake docker manager.\n`TestDockerManagerBuilder().HTTPClient(xx).ImageManager(xx)....Build()`\n\nWe can do this cleanup in the future. :)\n",
        "createdAt" : "2016-09-30T23:06:44Z",
        "updatedAt" : "2016-09-30T23:10:20Z",
        "lastEditedBy" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "tags" : [
        ]
      },
      {
        "id" : "20800c7e-6f2e-4103-b345-0497c48dc015",
        "parentId" : "b8d5a04e-f809-4175-950a-c756ff9115c6",
        "authorId" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "body" : "If we do that, it'd most likely land in the new dockershim package :)\n",
        "createdAt" : "2016-09-30T23:47:30Z",
        "updatedAt" : "2016-09-30T23:47:30Z",
        "lastEditedBy" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "tags" : [
        ]
      },
      {
        "id" : "ec2f968e-30a5-4e02-9b30-ee22c653138c",
        "parentId" : "b8d5a04e-f809-4175-950a-c756ff9115c6",
        "authorId" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "body" : "or the kuberuntime, depending on the test context\n",
        "createdAt" : "2016-09-30T23:47:47Z",
        "updatedAt" : "2016-09-30T23:47:47Z",
        "lastEditedBy" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "tags" : [
        ]
      },
      {
        "id" : "9e9a6578-c00e-49fc-972d-0d9762c53fa6",
        "parentId" : "b8d5a04e-f809-4175-950a-c756ff9115c6",
        "authorId" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "body" : "Agree!\n",
        "createdAt" : "2016-10-01T00:04:29Z",
        "updatedAt" : "2016-10-01T00:04:29Z",
        "lastEditedBy" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "tags" : [
        ]
      }
    ],
    "commit" : "e6a6513552112f06c8ba4eacdfec60a0559cf752",
    "line" : 27,
    "diffHunk" : "@@ -1,1 +161,165 @@}\n\nfunc newTestDockerManagerWithRealImageManager() (*DockerManager, *FakeDockerClient) {\n\treturn createTestDockerManager(nil, nil)\n}"
  },
  {
    "id" : "1c296f8e-1d17-4221-946a-ea8a83290dcd",
    "prId" : 29171,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "af9dc809-490a-4326-ac02-745e151f17bc",
        "parentId" : null,
        "authorId" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "body" : "This test just verifies that the `GetPodNetworkStatus` is called during SyncPod....It doesn't seem particularly meaningful to me.\n",
        "createdAt" : "2016-07-19T15:40:25Z",
        "updatedAt" : "2016-07-19T16:02:15Z",
        "lastEditedBy" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "tags" : [
        ]
      },
      {
        "id" : "7cf25945-87c5-4ccc-b810-a040721ccd84",
        "parentId" : "af9dc809-490a-4326-ac02-745e151f17bc",
        "authorId" : "2fa5a4c6-e0a7-4dbe-a80e-7770a5dc92a1",
        "body" : "Due to the `gomock` expectations setup on the network plugin, it verifies it was called with the correct arguments only or else there would be a missing expectation. It tests the original issue here of the arguments being backwards. Happy to remove or rework it if you have a better suggestion or think it's overkill to ensure this fix doesn't regress.\n",
        "createdAt" : "2016-07-19T15:57:34Z",
        "updatedAt" : "2016-07-19T16:02:15Z",
        "lastEditedBy" : "2fa5a4c6-e0a7-4dbe-a80e-7770a5dc92a1",
        "tags" : [
        ]
      },
      {
        "id" : "a8012b95-70c2-445e-9e50-cd5afe5237d3",
        "parentId" : "af9dc809-490a-4326-ac02-745e151f17bc",
        "authorId" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "body" : "Preventing regression is of course good :)\n\nI am just not a big fan of merely checking function calls as it could grow really fast and become hard to maintain, while offering little value. For example, the test only checks that the function is called with arguments in a certain order, but whether they are the right order is a big question mark. We'll have to maintain both the test and the real code from now on.\n\nI skimmed through the code, and there is no straightforward way to test this since the network plugin is completely mocked out. An integration/e2e test might be a better fit in this case. I'm inclined to remove this test, but can be convinced otherwise.\n",
        "createdAt" : "2016-07-19T17:08:01Z",
        "updatedAt" : "2016-07-19T17:08:01Z",
        "lastEditedBy" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "tags" : [
        ]
      },
      {
        "id" : "92103d6c-43ee-49e2-9254-62544a838160",
        "parentId" : "af9dc809-490a-4326-ac02-745e151f17bc",
        "authorId" : "2fa5a4c6-e0a7-4dbe-a80e-7770a5dc92a1",
        "body" : "It can't be e2e because afaik you can't set the network plugin to exec and there's no externally visible impact otherwise.\n\nMaking this an integration test would just move the argument-order validation down one level from a mock to a real exec'd program, so it has a similar problem that it's now just putting the order in another location.\n\nMaybe deleting it is the best solution.\n",
        "createdAt" : "2016-07-19T21:59:31Z",
        "updatedAt" : "2016-07-19T21:59:31Z",
        "lastEditedBy" : "2fa5a4c6-e0a7-4dbe-a80e-7770a5dc92a1",
        "tags" : [
        ]
      },
      {
        "id" : "4c107cd8-3a08-427d-b1ac-a7e566249982",
        "parentId" : "af9dc809-490a-4326-ac02-745e151f17bc",
        "authorId" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "body" : "So the real problem is that we don't test the `exec` network plugin anywhere. Otherwise, this bug would've been caught easily. Maybe we should try increasing the test coverage of that in the future.\n",
        "createdAt" : "2016-07-19T22:59:28Z",
        "updatedAt" : "2016-07-19T22:59:28Z",
        "lastEditedBy" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "tags" : [
        ]
      },
      {
        "id" : "5502a600-1725-48da-9fc7-853d13b1c8bb",
        "parentId" : "af9dc809-490a-4326-ac02-745e151f17bc",
        "authorId" : "2fa5a4c6-e0a7-4dbe-a80e-7770a5dc92a1",
        "body" : "After a feature is deprecated (from the network plugin page, 'deprecated in favor of CNI plugins') is probably the wrong time to start writing tests for it though :smile:\n",
        "createdAt" : "2016-07-19T23:38:13Z",
        "updatedAt" : "2016-07-19T23:38:13Z",
        "lastEditedBy" : "2fa5a4c6-e0a7-4dbe-a80e-7770a5dc92a1",
        "tags" : [
        ]
      },
      {
        "id" : "5acadce0-6292-4124-98f7-26edbd7aabaa",
        "parentId" : "af9dc809-490a-4326-ac02-745e151f17bc",
        "authorId" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "body" : "Let's pretend that this is a more general issue, and not just for exec ;)\n",
        "createdAt" : "2016-07-19T23:40:43Z",
        "updatedAt" : "2016-07-19T23:40:43Z",
        "lastEditedBy" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "tags" : [
        ]
      },
      {
        "id" : "d237dfd5-6257-44be-9090-32931bba57a3",
        "parentId" : "af9dc809-490a-4326-ac02-745e151f17bc",
        "authorId" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "body" : "On this matter I tend to agree with @yujuhong -- this particular test is very whiteboxy.  I personally think `TestGetPodStatusFromNetworkPlugin` is enough.  For the record I do appreciate the effort that went into this -- I just think the other test is sufficient.  That aside, this LGTM.\n",
        "createdAt" : "2016-07-20T20:48:06Z",
        "updatedAt" : "2016-07-20T20:48:06Z",
        "lastEditedBy" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "tags" : [
        ]
      }
    ],
    "commit" : "13dca52f3c2cd19a5cd6e1ebc78fa4421a6fcde3",
    "line" : 77,
    "diffHunk" : "@@ -1,1 +2268,2272 @@}\n\nfunc TestSyncPodGetsPodIPFromNetworkPlugin(t *testing.T) {\n\tconst (\n\t\tcontainerID      = \"123\""
  }
]