[
  {
    "id" : "e3868075-9bb3-499a-95a0-a55f45452512",
    "prId" : 26451,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4a0dd4a9-c909-4c35-b2be-0f90bd4ee1c3",
        "parentId" : null,
        "authorId" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "body" : "Why is this lock needed?\n",
        "createdAt" : "2016-05-27T21:28:13Z",
        "updatedAt" : "2016-05-27T21:49:58Z",
        "lastEditedBy" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "tags" : [
        ]
      },
      {
        "id" : "92fe0e9d-9733-4ee4-8853-6066e1685042",
        "parentId" : "4a0dd4a9-c909-4c35-b2be-0f90bd4ee1c3",
        "authorId" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "body" : "Discussed with @timstclair, and he said it is possible that summary api is called by multiple threads, so I added the lock here. :)\n",
        "createdAt" : "2016-05-27T21:44:28Z",
        "updatedAt" : "2016-05-27T21:49:58Z",
        "lastEditedBy" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "tags" : [
        ]
      }
    ],
    "commit" : "52a3d8a19d8250948842ec0ff901bbd10e6189e7",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +29,33 @@// imageStatsProvider exposes stats about all images currently available.\ntype imageStatsProvider struct {\n\tsync.Mutex\n\t// layers caches the current layers, key is the layer ID.\n\tlayers map[string]*dockertypes.ImageHistory"
  },
  {
    "id" : "ff91b1cd-7baf-425a-90a3-46118eaef7d1",
    "prId" : 23595,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8897fe32-fe82-4ee8-887a-c20099fdff63",
        "parentId" : null,
        "authorId" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "body" : "(nit) we usually separate message & err with a colon `: %v`\n",
        "createdAt" : "2016-03-31T22:50:43Z",
        "updatedAt" : "2016-04-25T23:00:54Z",
        "lastEditedBy" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "tags" : [
        ]
      },
      {
        "id" : "db842f69-dc22-4eb0-b76c-2ad3d3c77795",
        "parentId" : "8897fe32-fe82-4ee8-887a-c20099fdff63",
        "authorId" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "body" : "Is this applicable across the repo? Almost all the code I have written uses `-`....\n",
        "createdAt" : "2016-03-31T23:24:44Z",
        "updatedAt" : "2016-04-25T23:00:54Z",
        "lastEditedBy" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "tags" : [
        ]
      },
      {
        "id" : "fede8837-b4b0-4f8c-9390-095dfb924325",
        "parentId" : "8897fe32-fe82-4ee8-887a-c20099fdff63",
        "authorId" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "body" : "I don't think there's anything in the style guide about it, but:\n\n``` console\n$ git grep -E '(glog|fmt)\\.(Warning|Info|Error)f\\(\\\"[^\"].*:\\ %v\\\".*\\berr' | wc -l\n1200\n$ git grep -E '(glog|fmt)\\.(Warning|Info|Error)f\\(\\\"[^\"].*\\ -\\ %v\\\".*\\berr' | wc -l\n25\n```\n",
        "createdAt" : "2016-03-31T23:48:18Z",
        "updatedAt" : "2016-04-25T23:00:54Z",
        "lastEditedBy" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "tags" : [
        ]
      }
    ],
    "commit" : "e566948a754bfe9f81189e7333fc62fd123e34e3",
    "line" : null,
    "diffHunk" : "@@ -1,1 +36,40 @@\timages, err := isp.c.ListImages(dockertypes.ImageListOptions{})\n\tif err != nil {\n\t\treturn nil, fmt.Errorf(\"failed to list docker images - %v\", err)\n\t}\n\t// A map of all the image layers to its corresponding size."
  },
  {
    "id" : "a68f2fc3-4734-41c8-9062-fba2a502cc23",
    "prId" : 23595,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ebca1e53-9247-421f-b274-65ed2332b0c0",
        "parentId" : null,
        "authorId" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "body" : "Doesn't this mean we'll only add the first layer for each image? Is that intentional?\n",
        "createdAt" : "2016-04-25T20:35:57Z",
        "updatedAt" : "2016-04-25T23:00:54Z",
        "lastEditedBy" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "tags" : [
        ]
      },
      {
        "id" : "0271a6ed-1d34-4125-9ad6-31f116c67fd7",
        "parentId" : "ebca1e53-9247-421f-b274-65ed2332b0c0",
        "authorId" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "body" : "Do the unit tests still pass with this? If it's not intentional and the tests do still pass, please update the tests to fail on this.\n",
        "createdAt" : "2016-04-25T20:37:42Z",
        "updatedAt" : "2016-04-25T23:00:54Z",
        "lastEditedBy" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "tags" : [
        ]
      },
      {
        "id" : "975b720d-edb6-45ea-a8a4-25f6714f9fe2",
        "parentId" : "ebca1e53-9247-421f-b274-65ed2332b0c0",
        "authorId" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "body" : "Hmm. `history` contains all the layers for an image. Let's look at an example:\n\n``` shell\n$ docker history bef5c7a893fd\nIMAGE               CREATED             CREATED BY                                      SIZE                COMMENT\nbef5c7a893fd        4 days ago          /bin/sh -c #(nop) ENTRYPOINT [\"/usr/bin/cadvi   0 B                 \n5714946567e8        4 days ago          /bin/sh -c #(nop) EXPOSE 8080/tcp               0 B                 \nd5092c6dfc49        4 days ago          /bin/sh -c #(nop) ADD file:5047bc1f57482bfdc9   23.75 MB            \nfb1790e81294        4 days ago          /bin/sh -c apk add --update ca-certificates d   19.99 MB            \n3d239f12c85f        4 weeks ago         /bin/sh -c #(nop) ENV GLIBC_VERSION=2.23-r1     0 B                 \n86fbae24586c        4 weeks ago         /bin/sh -c #(nop) MAINTAINER dengnan@google.c   0 B                 \n342c0650e86b        7 weeks ago         /bin/sh -c #(nop) ADD file:cda4b589f22e7984e3   5.258 MB \n```\n\nFor this example, history would be a list of layer elements where each line in the output above matches a layer.\nThe key for each layer will be mostly unique, expect for the `<missing>` case, which is handled by using the `Created By` field. That field is expected to contain the command that was run for that layer and hence it must be unique.\n\nAm I misreading my code?\n",
        "createdAt" : "2016-04-25T22:17:58Z",
        "updatedAt" : "2016-04-25T23:00:54Z",
        "lastEditedBy" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "tags" : [
        ]
      },
      {
        "id" : "0177e2bd-addb-454f-ab9f-7ed7134a1fe9",
        "parentId" : "ebca1e53-9247-421f-b274-65ed2332b0c0",
        "authorId" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "body" : "Ah, sorry, my mistake. I misread `key` as the image key, not the layer key. What you have makes sense.\n",
        "createdAt" : "2016-04-25T22:24:41Z",
        "updatedAt" : "2016-04-25T23:00:54Z",
        "lastEditedBy" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "tags" : [
        ]
      }
    ],
    "commit" : "e566948a754bfe9f81189e7333fc62fd123e34e3",
    "line" : 67,
    "diffHunk" : "@@ -1,1 +65,69 @@\t\t\t\tret.TotalStorageBytes += uint64(layer.Size)\n\t\t\t}\n\t\t\timageMap.Insert(key)\n\t\t}\n\t}"
  }
]