[
  {
    "id" : "fe53d744-0c05-4fdc-891f-9763d6231cf0",
    "prId" : 57369,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/57369#pullrequestreview-85464960",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d024e513-1e33-49ff-9d2d-d514479c9858",
        "parentId" : null,
        "authorId" : "8b309230-89cb-4a04-bf89-29a323dad0d8",
        "body" : "Should we set both requests and limits? That would match the validation change we discussed.",
        "createdAt" : "2017-12-19T19:36:38Z",
        "updatedAt" : "2017-12-22T23:56:42Z",
        "lastEditedBy" : "8b309230-89cb-4a04-bf89-29a323dad0d8",
        "tags" : [
        ]
      },
      {
        "id" : "b01da8cd-df30-43d8-9db5-a699bd0fa3d9",
        "parentId" : "d024e513-1e33-49ff-9d2d-d514479c9858",
        "authorId" : "8b309230-89cb-4a04-bf89-29a323dad0d8",
        "body" : "Same question for the init containers and regular containers in `TestInitContainerDeviceAllocation` below, which doesn't use this `makePod` function.",
        "createdAt" : "2017-12-19T19:37:25Z",
        "updatedAt" : "2017-12-22T23:56:42Z",
        "lastEditedBy" : "8b309230-89cb-4a04-bf89-29a323dad0d8",
        "tags" : [
        ]
      },
      {
        "id" : "47f5fb5b-1738-47ad-8ee0-bf339f718ffc",
        "parentId" : "d024e513-1e33-49ff-9d2d-d514479c9858",
        "authorId" : "784d1027-6681-40bf-820f-6ec72067791f",
        "body" : "I think this PR is just a revert patch, maybe we can discuss this in another place :)",
        "createdAt" : "2017-12-20T06:49:40Z",
        "updatedAt" : "2017-12-22T23:56:42Z",
        "lastEditedBy" : "784d1027-6681-40bf-820f-6ec72067791f",
        "tags" : [
        ]
      },
      {
        "id" : "e1f45107-1775-4352-bc8e-33a145f8e3a2",
        "parentId" : "d024e513-1e33-49ff-9d2d-d514479c9858",
        "authorId" : "8b309230-89cb-4a04-bf89-29a323dad0d8",
        "body" : "It isn’t though. I don’t think this diff was created with git revert, because those init containers were touched by the original patch.",
        "createdAt" : "2017-12-20T08:06:03Z",
        "updatedAt" : "2017-12-22T23:56:42Z",
        "lastEditedBy" : "8b309230-89cb-4a04-bf89-29a323dad0d8",
        "tags" : [
        ]
      },
      {
        "id" : "41cc8c62-a329-4318-b6ed-eb44407844c4",
        "parentId" : "d024e513-1e33-49ff-9d2d-d514479c9858",
        "authorId" : "51f59c69-efc0-451a-bd8f-d9fa2c281fd3",
        "body" : "@ConnorDoyle \r\n> Should we set both requests and limits? That would match the validation change we discussed.\r\n\r\nThere is a point in adding requests only if we scan through both, requests and limits, in the code. With this PR, we are scanning limits only. Therefore even if we add requests in the test case pods, those would be simple ignored and will add no value.\r\n\r\nFixed `TestInitContainerDeviceAllocation` to use `limits`. Thanks for pointing that out. Test case was passing with requests because all allocations were coming empty and thus were able to satisfy the `IsSuperset` condition of the test. Fixed this as well by asserting device count in the allocation to make sure allocation is not empty.",
        "createdAt" : "2017-12-23T00:05:12Z",
        "updatedAt" : "2017-12-23T00:05:12Z",
        "lastEditedBy" : "51f59c69-efc0-451a-bd8f-d9fa2c281fd3",
        "tags" : [
        ]
      },
      {
        "id" : "03354ff9-0247-4c1e-a00a-204a94688dbc",
        "parentId" : "d024e513-1e33-49ff-9d2d-d514479c9858",
        "authorId" : "611b3189-700b-4eda-8a2a-2c4280218d7c",
        "body" : "Btw, for these unit tests it perhaps doesn't matter, but I think in general on kubelet-level unit tests, we probably want to set both Requests and Limits. This matches the behavior that API server will automatically sets Requests equal to Limits when only Limits is set, and on most of the scheduler related code (some of them is also run by kubelet during admission), we look at Requests.",
        "createdAt" : "2017-12-25T06:55:02Z",
        "updatedAt" : "2017-12-25T06:55:03Z",
        "lastEditedBy" : "611b3189-700b-4eda-8a2a-2c4280218d7c",
        "tags" : [
        ]
      }
    ],
    "commit" : "8749c5c989080acd3da8b04c93171b2dd19ada93",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +376,380 @@\t\t\t\t{\n\t\t\t\t\tResources: v1.ResourceRequirements{\n\t\t\t\t\t\tLimits: limits,\n\t\t\t\t\t},\n\t\t\t\t},"
  }
]