[
  {
    "id" : "c43770e7-3f31-4ec0-aff1-13e65bb229da",
    "prId" : 102970,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/102970#pullrequestreview-697725609",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "214a923e-181f-4f94-8eb1-ef590a77f3a4",
        "parentId" : null,
        "authorId" : "db4d847e-0006-4342-9243-2f3f71f190b9",
        "body" : "I'm a little confused here, as I understand `rp.Memory` refers to MemoryLimit -- https://github.com/kubernetes/kubernetes/blob/master/pkg/kubelet/cm/types.go#L27\r\n\r\nWhy are we setting memory.min == MemoryLimit? \r\n\r\nIs this trying to fullfill point #5 on from the KEP? https://github.com/kubernetes/enhancements/tree/master/keps/sig-node/2570-memory-qos#containerpod\r\n\r\n> If kubelet sets --cgroups-per-qos=true, we set memory.min=sum(pod[i].spec.containers[j].resources.requests[memory]) to make ancestor cgroups propagation effective\r\n\r\n",
        "createdAt" : "2021-06-30T01:13:19Z",
        "updatedAt" : "2021-06-30T21:59:40Z",
        "lastEditedBy" : "db4d847e-0006-4342-9243-2f3f71f190b9",
        "tags" : [
        ]
      },
      {
        "id" : "0f9fb989-a0ae-48e7-80e6-9a2a1c6cdcee",
        "parentId" : "214a923e-181f-4f94-8eb1-ef590a77f3a4",
        "authorId" : "c840f310-2760-4562-b9d3-14db6553a5a6",
        "body" : "This is to enforce the memory qos for node according to kube-reserved or system-reserved setttings, implementing points 1 & 2 at https://github.com/kubernetes/enhancements/tree/master/keps/sig-node/2570-memory-qos#node",
        "createdAt" : "2021-07-01T02:07:41Z",
        "updatedAt" : "2021-07-01T02:07:41Z",
        "lastEditedBy" : "c840f310-2760-4562-b9d3-14db6553a5a6",
        "tags" : [
        ]
      },
      {
        "id" : "337a98d8-d4f8-4ac4-ba04-5e684753561a",
        "parentId" : "214a923e-181f-4f94-8eb1-ef590a77f3a4",
        "authorId" : "db4d847e-0006-4342-9243-2f3f71f190b9",
        "body" : "I see, it would be great to note this as a comment here or perhaps link to the KEP as you did in your comment.\r\n\r\n\r\nOne additional question, is this code path (i.e. `enforceExistingCgroup()`) called specifically only for when `enforce-node-allocatable=kube-reserved` and `enforce-node-allocatable=system-reserved` are set?",
        "createdAt" : "2021-07-02T00:00:28Z",
        "updatedAt" : "2021-07-02T00:22:59Z",
        "lastEditedBy" : "db4d847e-0006-4342-9243-2f3f71f190b9",
        "tags" : [
        ]
      }
    ],
    "commit" : "c3d9b10ca834b88516c6e059eb038eae19266ddf",
    "line" : 31,
    "diffHunk" : "@@ -1,1 +144,148 @@\t\t\t\trp.Unified = make(map[string]string)\n\t\t\t}\n\t\t\trp.Unified[MemoryMin] = strconv.FormatInt(*rp.Memory, 10)\n\t\t}\n\t}"
  }
]