[
  {
    "id" : "f1b9c020-8b7d-4e2e-84eb-2e30c45add6c",
    "prId" : 91181,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/91181#pullrequestreview-415266415",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "85a6c289-c7b4-4d4e-a15e-97733c5b9799",
        "parentId" : null,
        "authorId" : "d7870cae-47b0-4c8e-8527-be8fc4be86de",
        "body" : "Can you share a little more about the name `ContainerCheckpoint` and how its the most appropriate replacement for `DockershimCheckpoint`?",
        "createdAt" : "2020-05-19T02:30:56Z",
        "updatedAt" : "2020-05-24T15:45:51Z",
        "lastEditedBy" : "d7870cae-47b0-4c8e-8527-be8fc4be86de",
        "tags" : [
        ]
      },
      {
        "id" : "a2ef3773-a594-4a0c-96ed-c16e55aaceb2",
        "parentId" : "85a6c289-c7b4-4d4e-a15e-97733c5b9799",
        "authorId" : "eb6b9a1c-7262-428a-8c7f-7ed4411c4d68",
        "body" : "The golint error here is:\r\n```\r\ndocker_checkpoint.go:35:6: type name will be used as dockershim.DockershimCheckpoint by other packages, and that stutters; consider calling this Checkpoint\r\n```\r\n\r\nBecause there is already a PodSandboxCheckpoint implement this interface. I think ContainerCheckpoint would be more general. May be a DockerCheckpoint, KataCheckpoint or any other type container's Checkpoint will implement this interface in the future.",
        "createdAt" : "2020-05-19T14:42:06Z",
        "updatedAt" : "2020-05-24T15:45:51Z",
        "lastEditedBy" : "eb6b9a1c-7262-428a-8c7f-7ed4411c4d68",
        "tags" : [
        ]
      },
      {
        "id" : "2823a94a-e92f-4a37-bf2f-8ffea341fb85",
        "parentId" : "85a6c289-c7b4-4d4e-a15e-97733c5b9799",
        "authorId" : "d7870cae-47b0-4c8e-8527-be8fc4be86de",
        "body" : "Could `ProcessContainerCheckpoint` be even more specific? Or does that just increase confusion?",
        "createdAt" : "2020-05-19T22:14:30Z",
        "updatedAt" : "2020-05-24T15:45:51Z",
        "lastEditedBy" : "d7870cae-47b0-4c8e-8527-be8fc4be86de",
        "tags" : [
        ]
      },
      {
        "id" : "fc21d140-8221-4e56-a64a-60814cf47e4e",
        "parentId" : "85a6c289-c7b4-4d4e-a15e-97733c5b9799",
        "authorId" : "eb6b9a1c-7262-428a-8c7f-7ed4411c4d68",
        "body" : "For this interface name, I think ContainerCheckpoint may be more suitable. There exist an implement of PodSandboxCheckpoint, and the podsandbox is just a special container. But say it's a process container sounds not good ? ",
        "createdAt" : "2020-05-20T12:10:22Z",
        "updatedAt" : "2020-05-24T15:45:51Z",
        "lastEditedBy" : "eb6b9a1c-7262-428a-8c7f-7ed4411c4d68",
        "tags" : [
        ]
      }
    ],
    "commit" : "d43817b5ec92b6cd0127a344183c7ee0436e0b0a",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +35,39 @@)\n\n// ContainerCheckpoint provides the interface for process container's checkpoint data\ntype ContainerCheckpoint interface {\n\tcheckpointmanager.Checkpoint"
  },
  {
    "id" : "70577513-5245-4717-91fe-2501ec81e1e1",
    "prId" : 90209,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/90209#pullrequestreview-396977365",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e9b82a8f-21f2-4a79-ae29-57f8f34822a3",
        "parentId" : null,
        "authorId" : "d7870cae-47b0-4c8e-8527-be8fc4be86de",
        "body" : "I'm also seeing similar wording in https://sourcegraph.com/github.com/kubernetes/kubernetes@master/-/blob/staging/src/k8s.io/cri-api/pkg/apis/runtime/v1alpha2/api.proto#L308. \r\n\r\nCan you please share more context around this update? Is it only pertinent here or also in the file I linked above?",
        "createdAt" : "2020-04-16T23:33:01Z",
        "updatedAt" : "2020-04-17T01:37:04Z",
        "lastEditedBy" : "d7870cae-47b0-4c8e-8527-be8fc4be86de",
        "tags" : [
        ]
      },
      {
        "id" : "b3ab0108-24b6-46ea-abb2-4226f214f823",
        "parentId" : "e9b82a8f-21f2-4a79-ae29-57f8f34822a3",
        "authorId" : "6d537447-1121-432a-99da-44c339e1a653",
        "body" : "hi @mattjmcnaughton Thanks for your codereview\r\n\r\nThe Pod structure is defined as follows\r\n\r\n```\r\n// Pod is a collection of containers that can run on a host. This resource is created\r\n// by clients and scheduled onto hosts.\r\ntype Pod struct {\r\n\tmetav1.TypeMeta `json:\",inline\"`\r\n\t// Standard object's metadata.\r\n\t// More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#metadata\r\n\t// +optional\r\n\tmetav1.ObjectMeta `json:\"metadata,omitempty\" protobuf:\"bytes,1,opt,name=metadata\"`\r\n\r\n\t// Specification of the desired behavior of the pod.\r\n\t// More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status\r\n\t// +optional\r\n\tSpec PodSpec `json:\"spec,omitempty\" protobuf:\"bytes,2,opt,name=spec\"`\r\n\r\n\t// Most recently observed status of the pod.\r\n\t// This data may not be up to date.\r\n\t// Populated by the system.\r\n\t// Read-only.\r\n\t// More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#spec-and-status\r\n\t// +optional\r\n\tStatus PodStatus `json:\"status,omitempty\" protobuf:\"bytes,3,opt,name=status\"`\r\n}\r\n``` \r\n\r\nPod name and namespace are defined in ObjectMeta, not in PodSpec\r\n",
        "createdAt" : "2020-04-17T01:41:13Z",
        "updatedAt" : "2020-04-17T01:41:13Z",
        "lastEditedBy" : "6d537447-1121-432a-99da-44c339e1a653",
        "tags" : [
        ]
      },
      {
        "id" : "cb27e866-4e77-4f47-b512-ec2cda485fff",
        "parentId" : "e9b82a8f-21f2-4a79-ae29-57f8f34822a3",
        "authorId" : "6eca0ade-9879-4dd7-ad14-547e16f5c041",
        "body" : "in this context, it is accurate that this references the Pod name/namespace on the API resource itself.",
        "createdAt" : "2020-04-21T04:25:30Z",
        "updatedAt" : "2020-04-21T04:27:36Z",
        "lastEditedBy" : "6eca0ade-9879-4dd7-ad14-547e16f5c041",
        "tags" : [
        ]
      }
    ],
    "commit" : "5796b7a32e5c8969858e689cdebf97789bb37cad",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +62,66 @@\t// Version of the pod sandbox checkpoint schema.\n\tVersion string `json:\"version\"`\n\t// Pod name of the sandbox. Same as the pod name in the Pod ObjectMeta.\n\tName string `json:\"name\"`\n\t// Pod namespace of the sandbox. Same as the pod namespace in the Pod ObjectMeta."
  },
  {
    "id" : "3d2ad226-b520-42d1-841a-efe6a26796d8",
    "prId" : 39903,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/39903#pullrequestreview-18963988",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "df3593a8-3f6e-4b75-8400-27e531f2245e",
        "parentId" : null,
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "Maybe this should include a checksum of some sort?  Maybe DeepHashObject() md5 with the checksum field set to nil, then store the checksum when writing, and reverse that when reading.",
        "createdAt" : "2017-01-18T05:16:49Z",
        "updatedAt" : "2017-02-02T18:19:56Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      },
      {
        "id" : "ae3298e4-cf9e-4c5d-a393-837d16b3681e",
        "parentId" : "df3593a8-3f6e-4b75-8400-27e531f2245e",
        "authorId" : "e83108b8-1fb2-416b-9298-d5b70c14f708",
        "body" : "For validating if it is corrupted? \r\nDiscard it if corrupted?",
        "createdAt" : "2017-01-20T01:33:03Z",
        "updatedAt" : "2017-02-02T18:19:56Z",
        "lastEditedBy" : "e83108b8-1fb2-416b-9298-d5b70c14f708",
        "tags" : [
        ]
      },
      {
        "id" : "b3c584ef-32d9-4a9d-81b1-79b4e640358f",
        "parentId" : "df3593a8-3f6e-4b75-8400-27e531f2245e",
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "yes, exactly - at least then you know you lost information",
        "createdAt" : "2017-01-22T01:05:05Z",
        "updatedAt" : "2017-02-02T18:19:56Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      },
      {
        "id" : "21016a0e-cb89-4fd1-9b32-36981bbd47fc",
        "parentId" : "df3593a8-3f6e-4b75-8400-27e531f2245e",
        "authorId" : "e83108b8-1fb2-416b-9298-d5b70c14f708",
        "body" : "I added the checksum. If the sandbox still exists, then the checkpoint will get clean up in GC. But if sandbox is gone and checkpoint is corrupted, the current implementation basically ignores it and leave it there. ",
        "createdAt" : "2017-01-25T01:36:58Z",
        "updatedAt" : "2017-02-02T18:19:56Z",
        "lastEditedBy" : "e83108b8-1fb2-416b-9298-d5b70c14f708",
        "tags" : [
        ]
      },
      {
        "id" : "eb0a25fe-8e82-46a6-a902-9b71ab1369d8",
        "parentId" : "df3593a8-3f6e-4b75-8400-27e531f2245e",
        "authorId" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "body" : "maybe we should clean up the corrupt checkpoints?",
        "createdAt" : "2017-01-26T03:00:15Z",
        "updatedAt" : "2017-02-02T18:19:56Z",
        "lastEditedBy" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "tags" : [
        ]
      },
      {
        "id" : "b5e1c362-363f-42c0-b900-07d5ef78fbe4",
        "parentId" : "df3593a8-3f6e-4b75-8400-27e531f2245e",
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "if you clean it up, you have no chance to post-mortem.  If we want to clean up, I would do something like clean up only if older than 2 weeks.",
        "createdAt" : "2017-01-26T06:59:23Z",
        "updatedAt" : "2017-02-02T18:19:56Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      },
      {
        "id" : "96eb96ac-e6fa-47ae-b996-599064225fe4",
        "parentId" : "df3593a8-3f6e-4b75-8400-27e531f2245e",
        "authorId" : "e83108b8-1fb2-416b-9298-d5b70c14f708",
        "body" : "What if I log the content of the corrupted checkpoint and then just delete it? ",
        "createdAt" : "2017-01-27T00:01:04Z",
        "updatedAt" : "2017-02-02T18:19:56Z",
        "lastEditedBy" : "e83108b8-1fb2-416b-9298-d5b70c14f708",
        "tags" : [
        ]
      },
      {
        "id" : "c0f5abfa-c18e-4a21-bd60-08fc4e5d51d7",
        "parentId" : "df3593a8-3f6e-4b75-8400-27e531f2245e",
        "authorId" : "e83108b8-1fb2-416b-9298-d5b70c14f708",
        "body" : "Here is the latest patch: \r\nLog the content of the checkpoint file if it fails to unmarshal. If failed to unmarshal or checksum is not valid, CheckpointHandler returns CorruptCheckpointError. \r\nDockershim GC checks if the error is CorruptCheckpointError, log the checkpoint object and remove the checkpoint",
        "createdAt" : "2017-01-27T02:25:41Z",
        "updatedAt" : "2017-02-02T18:19:56Z",
        "lastEditedBy" : "e83108b8-1fb2-416b-9298-d5b70c14f708",
        "tags" : [
        ]
      },
      {
        "id" : "a709e598-f934-4dde-94b1-d9d61e00fcc6",
        "parentId" : "df3593a8-3f6e-4b75-8400-27e531f2245e",
        "authorId" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "body" : "SGTM",
        "createdAt" : "2017-01-30T23:13:06Z",
        "updatedAt" : "2017-02-02T18:19:56Z",
        "lastEditedBy" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "tags" : [
        ]
      }
    ],
    "commit" : "51526d310385d6f3791db8bd00ed16abab46658f",
    "line" : 57,
    "diffHunk" : "@@ -1,1 +55,59 @@\n// PodSandboxCheckpoint is the checkpoint structure for a sandbox\ntype PodSandboxCheckpoint struct {\n\t// Version of the pod sandbox checkpoint schema.\n\tVersion string `json:\"version\"`"
  },
  {
    "id" : "a039486e-5cd5-489c-8c82-614b98473671",
    "prId" : 39903,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/39903#pullrequestreview-17817840",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e88e984a-268b-4e77-8613-9a79a87160f3",
        "parentId" : null,
        "authorId" : "7dd504ec-7e63-45b3-98f8-6eb1c683e9c2",
        "body" : "It seems this PR only focus on checkpointing `PortMappings`, right?\r\n\r\nAs I recalled we mentioned checkpoint in many places to solve different problems. (Sorry, don't have them handy). We may need a umbrella issue to gather them all (or reference it if already has). ",
        "createdAt" : "2017-01-19T08:17:30Z",
        "updatedAt" : "2017-02-02T18:19:56Z",
        "lastEditedBy" : "7dd504ec-7e63-45b3-98f8-6eb1c683e9c2",
        "tags" : [
        ]
      },
      {
        "id" : "e02f9803-4af2-4007-9f8d-0a268f664341",
        "parentId" : "e88e984a-268b-4e77-8613-9a79a87160f3",
        "authorId" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "body" : "Only network-related data (namespace and port-mapping) is required now, but we may checkpoint more data in the future.",
        "createdAt" : "2017-01-19T09:15:06Z",
        "updatedAt" : "2017-02-02T18:19:56Z",
        "lastEditedBy" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "tags" : [
        ]
      },
      {
        "id" : "74545cff-e9aa-4763-a578-73dc2e7b04ae",
        "parentId" : "e88e984a-268b-4e77-8613-9a79a87160f3",
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "If https://github.com/containernetworking/cni/issues/353 flies, maybe we don't need this at all?",
        "createdAt" : "2017-01-22T01:04:45Z",
        "updatedAt" : "2017-02-02T18:19:56Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      }
    ],
    "commit" : "51526d310385d6f3791db8bd00ed16abab46658f",
    "line" : 54,
    "diffHunk" : "@@ -1,1 +52,56 @@type CheckpointData struct {\n\tPortMappings []*PortMapping `json:\"port_mappings,omitempty\"`\n}\n\n// PodSandboxCheckpoint is the checkpoint structure for a sandbox"
  }
]