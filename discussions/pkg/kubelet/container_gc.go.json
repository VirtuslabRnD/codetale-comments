[
  {
    "id" : "fdd12e4d-9f60-4ca2-9f57-b6302b2fcaa5",
    "prId" : 10830,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f341f80b-678b-4533-a16b-dfdc35da8efb",
        "parentId" : null,
        "authorId" : null,
        "body" : "As far as I can determine, this won't work, as the stat() call on the dead symlink will succeed?\n\ne.g. (and yes, the results are the same under linux):\n\n```\n4 lrwxr-xr-x 1 quinton eng   8 Jul  7 13:43 test.sym -> test.txt\n0 -rw-r--r-- 1 quinton eng   0 Jul  7 13:42 test.txt\nquinton-macbookpro:symlink-test quinton$ stat test.sym\n  File: ‘test.sym’ -> ‘test.txt’\n  Size: 8           Blocks: 8          IO Block: 4096   symbolic link\nDevice: 1000004h/16777220d  Inode: 64971777    Links: 1\nAccess: (0755/lrwxr-xr-x)  Uid: (157215/ quinton)   Gid: ( 5000/     eng)\nAccess: 2015-07-07 13:43:05.000000000 -0700\nModify: 2015-07-07 13:43:05.000000000 -0700\nChange: 2015-07-07 13:43:05.000000000 -0700\n Birth: 2015-07-07 13:43:05.000000000 -0700\nquinton-macbookpro:symlink-test quinton$ rm test.txt\nquinton-macbookpro:symlink-test quinton$ stat test.sym\n  File: ‘test.sym’ -> ‘test.txt’\n  Size: 8           Blocks: 8          IO Block: 4096   symbolic link\nDevice: 1000004h/16777220d  Inode: 64971777    Links: 1\nAccess: (0755/lrwxr-xr-x)  Uid: (157215/ quinton)   Gid: ( 5000/     eng)\nAccess: 2015-07-07 13:43:05.000000000 -0700\nModify: 2015-07-07 13:43:05.000000000 -0700\nChange: 2015-07-07 13:43:05.000000000 -0700\n Birth: 2015-07-07 13:43:05.000000000 -0700\n```\n\nAm I missing something?\n",
        "createdAt" : "2015-07-07T21:09:23Z",
        "updatedAt" : "2015-07-08T07:44:03Z",
        "lastEditedBy" : null,
        "tags" : [
        ]
      },
      {
        "id" : "29d44ccc-46b4-495b-a284-0dda5aa4ba3b",
        "parentId" : "f341f80b-678b-4533-a16b-dfdc35da8efb",
        "authorId" : "6cc3c868-173f-40ea-8728-da5974495fb9",
        "body" : "What's your test code like? are you sure you're using os.Stat & not os.Lstat? former should follow symlink. worked in my tests earlier but will retry tomorrow to make sure.\n",
        "createdAt" : "2015-07-07T21:41:43Z",
        "updatedAt" : "2015-07-08T07:44:03Z",
        "lastEditedBy" : "6cc3c868-173f-40ea-8728-da5974495fb9",
        "tags" : [
        ]
      },
      {
        "id" : "b7397e2f-0684-49ff-afcd-91aa1b087654",
        "parentId" : "f341f80b-678b-4533-a16b-dfdc35da8efb",
        "authorId" : null,
        "body" : "I didn't write test code, I just used the standard 'stat' command line tool, as per my comment above (without the -L option to follow links).\n",
        "createdAt" : "2015-07-07T21:54:12Z",
        "updatedAt" : "2015-07-08T07:44:03Z",
        "lastEditedBy" : null,
        "tags" : [
        ]
      },
      {
        "id" : "f6ae2544-51c6-4af5-9d48-57a5eb389d4b",
        "parentId" : "f341f80b-678b-4533-a16b-dfdc35da8efb",
        "authorId" : "6cc3c868-173f-40ea-8728-da5974495fb9",
        "body" : "ah sorry I didn't know about stat cmd line tool. anyway, os.Stat follows symlinks so this is why it works. os.Lstat would be the equivalent of what you did with stat.\n",
        "createdAt" : "2015-07-07T21:57:44Z",
        "updatedAt" : "2015-07-08T07:44:03Z",
        "lastEditedBy" : "6cc3c868-173f-40ea-8728-da5974495fb9",
        "tags" : [
        ]
      },
      {
        "id" : "b49fe9f8-e1b1-4c4e-8aa5-18126abe0114",
        "parentId" : "f341f80b-678b-4533-a16b-dfdc35da8efb",
        "authorId" : null,
        "body" : "Yes, sounds like you're all good. Just checking.\n",
        "createdAt" : "2015-07-07T22:01:03Z",
        "updatedAt" : "2015-07-08T07:44:03Z",
        "lastEditedBy" : null,
        "tags" : [
        ]
      }
    ],
    "commit" : "8e482462fb325168403966090331dc2f1c957028",
    "line" : null,
    "diffHunk" : "@@ -1,1 +176,180 @@\tlogSymlinks, _ := filepath.Glob(path.Join(cgc.containerLogsDir, fmt.Sprintf(\"*.%s\", dockertools.LogSuffix)))\n\tfor _, logSymlink := range logSymlinks {\n\t\tif _, err = os.Stat(logSymlink); os.IsNotExist(err) {\n\t\t\terr = os.Remove(logSymlink)\n\t\t\tif err != nil {"
  }
]