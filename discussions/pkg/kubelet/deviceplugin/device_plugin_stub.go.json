[
  {
    "id" : "036fdf52-75f9-4ce2-9a9a-554188f686f4",
    "prId" : 52561,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/52561#pullrequestreview-63752627",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5e1ea545-089b-4dd3-8e27-a130ee3ea455",
        "parentId" : null,
        "authorId" : "ac146833-f0d6-4680-968a-749269c0d55d",
        "body" : "This whole loop is useless. `m.server.GetServiceInfo()` returns the number of services as soon as `RegisterDevicePluginServer` is called.\r\n",
        "createdAt" : "2017-09-19T12:51:46Z",
        "updatedAt" : "2017-09-19T12:52:01Z",
        "lastEditedBy" : "ac146833-f0d6-4680-968a-749269c0d55d",
        "tags" : [
        ]
      },
      {
        "id" : "88847bbe-30ee-4d0d-b1cf-554b5b3544c1",
        "parentId" : "5e1ea545-089b-4dd3-8e27-a130ee3ea455",
        "authorId" : "611b3189-700b-4eda-8a2a-2c4280218d7c",
        "body" : "I think it returns the number of services when they are ready, not as soon as RegisterDevicePluginServer is called.",
        "createdAt" : "2017-09-19T16:37:28Z",
        "updatedAt" : "2017-09-19T16:37:28Z",
        "lastEditedBy" : "611b3189-700b-4eda-8a2a-2c4280218d7c",
        "tags" : [
        ]
      },
      {
        "id" : "4616d689-cb36-4b77-ba76-d372386e7caa",
        "parentId" : "5e1ea545-089b-4dd3-8e27-a130ee3ea455",
        "authorId" : "ac146833-f0d6-4680-968a-749269c0d55d",
        "body" : "https://github.com/grpc/grpc-go/blob/master/server.go#L376\r\n\r\nYou can also test this:\r\n```golang\r\nm.server = grpc.NewServer([]grpc.ServerOption{}...)\r\npluginapi.RegisterDevicePluginServer(m.server, m)\r\nfmt.Println(m.server.GetServiceInfo())\r\n```",
        "createdAt" : "2017-09-19T17:03:52Z",
        "updatedAt" : "2017-09-19T17:04:45Z",
        "lastEditedBy" : "ac146833-f0d6-4680-968a-749269c0d55d",
        "tags" : [
        ]
      },
      {
        "id" : "93971044-4ec2-4e0e-aaa2-0e4eb1107b0b",
        "parentId" : "5e1ea545-089b-4dd3-8e27-a130ee3ea455",
        "authorId" : "611b3189-700b-4eda-8a2a-2c4280218d7c",
        "body" : "Hmm, this is interesting to know. I thought GetServiceInfo returns ready-to-serve no. of methods, but looking at the code, it is indeed should return No. of methods right after registration. However, I did verify that if I removed this code block, running 'bazel test --runs_per_test=20 //pkg/kubelet/deviceplugin:go_default_test' became flaky (I think mostly on endpoint_test.go) but with the current code, the tests all passed. I think we will need to spend more time understand this code. For now, I would like to keep it this way to make sure the tests are not flaky.",
        "createdAt" : "2017-09-19T18:11:11Z",
        "updatedAt" : "2017-09-19T18:11:12Z",
        "lastEditedBy" : "611b3189-700b-4eda-8a2a-2c4280218d7c",
        "tags" : [
        ]
      }
    ],
    "commit" : "34dccc5d2a7c10ba8a3cf43c3273d66ec2491f35",
    "line" : 2,
    "diffHunk" : "@@ -1,1 +69,73 @@\tgo m.server.Serve(sock)\n\t// Wait till grpc server is ready.\n\tfor i := 0; i < 10; i++ {\n\t\tservices := m.server.GetServiceInfo()\n\t\tif len(services) > 1 {"
  },
  {
    "id" : "93a37b27-656f-4030-8c3a-0488ed69bf6d",
    "prId" : 52290,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/52290#pullrequestreview-62610213",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5e9c0576-2443-45fd-ad04-2c00af8b801f",
        "parentId" : null,
        "authorId" : "87a378b9-1941-4a57-a346-cf12dbb73416",
        "body" : "Does this method need to be exported?",
        "createdAt" : "2017-09-13T23:32:12Z",
        "updatedAt" : "2017-09-14T22:25:07Z",
        "lastEditedBy" : "87a378b9-1941-4a57-a346-cf12dbb73416",
        "tags" : [
        ]
      },
      {
        "id" : "48f7acbf-2823-48cf-8427-9b6a40269336",
        "parentId" : "5e9c0576-2443-45fd-ad04-2c00af8b801f",
        "authorId" : "611b3189-700b-4eda-8a2a-2c4280218d7c",
        "body" : "Right now, this stub is not used outside but it could be if we want to test integration with device plugin, at which point we will want to have this API exported.",
        "createdAt" : "2017-09-14T00:00:56Z",
        "updatedAt" : "2017-09-14T22:25:07Z",
        "lastEditedBy" : "611b3189-700b-4eda-8a2a-2c4280218d7c",
        "tags" : [
        ]
      }
    ],
    "commit" : "5cac9fc984c2c5b22ce2956ba349f68a38cb2a62",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +89,93 @@\n// Register registers the device plugin for the given resourceName with Kubelet.\nfunc (m *Stub) Register(kubeletEndpoint, resourceName string) error {\n\tconn, err := grpc.Dial(kubeletEndpoint, grpc.WithInsecure(),\n\t\tgrpc.WithDialer(func(addr string, timeout time.Duration) (net.Conn, error) {"
  },
  {
    "id" : "b1d1103c-0902-47cb-bbc6-1aee97f9f589",
    "prId" : 51209,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/51209#pullrequestreview-59091346",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "138a1c84-4fa2-43e7-b3f1-2d543007d913",
        "parentId" : null,
        "authorId" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "body" : "Why is the \"stub\" starting a grpc server?",
        "createdAt" : "2017-08-28T17:27:00Z",
        "updatedAt" : "2017-09-01T18:56:49Z",
        "lastEditedBy" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "tags" : [
        ]
      },
      {
        "id" : "9be632b8-8ce8-447b-be99-0badd844acc3",
        "parentId" : "138a1c84-4fa2-43e7-b3f1-2d543007d913",
        "authorId" : "611b3189-700b-4eda-8a2a-2c4280218d7c",
        "body" : "This stub is used in endpoint_test.go.",
        "createdAt" : "2017-08-28T23:10:31Z",
        "updatedAt" : "2017-09-01T18:56:49Z",
        "lastEditedBy" : "611b3189-700b-4eda-8a2a-2c4280218d7c",
        "tags" : [
        ]
      }
    ],
    "commit" : "02001af752cb6068ecab42ec5fd6a2792df38945",
    "line" : 65,
    "diffHunk" : "@@ -1,1 +63,67 @@\t}\n\n\tm.server = grpc.NewServer([]grpc.ServerOption{}...)\n\tpluginapi.RegisterDevicePluginServer(m.server, m)\n"
  },
  {
    "id" : "23e4b643-2f1a-49bd-9cdc-fadf59f1367b",
    "prId" : 51209,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/51209#pullrequestreview-65892100",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d2280638-ffe6-49ae-aff1-cec8c6acdf03",
        "parentId" : null,
        "authorId" : "7dd504ec-7e63-45b3-98f8-6eb1c683e9c2",
        "body" : "@jiayingz Why use `log.Println()` instead of `glog`? Is this a separate binary?",
        "createdAt" : "2017-09-28T14:22:04Z",
        "updatedAt" : "2017-09-28T14:22:04Z",
        "lastEditedBy" : "7dd504ec-7e63-45b3-98f8-6eb1c683e9c2",
        "tags" : [
        ]
      },
      {
        "id" : "6cf75a82-6d03-40e7-9f29-56061e910550",
        "parentId" : "d2280638-ffe6-49ae-aff1-cec8c6acdf03",
        "authorId" : "ac146833-f0d6-4680-968a-749269c0d55d",
        "body" : "Hi @resouer this is fixed in a follow up PR.\r\n`device_plugin_stub.go` is invoked from tests only though :)\r\n\r\nThanks for the review!",
        "createdAt" : "2017-09-28T15:04:15Z",
        "updatedAt" : "2017-09-28T15:04:24Z",
        "lastEditedBy" : "ac146833-f0d6-4680-968a-749269c0d55d",
        "tags" : [
        ]
      }
    ],
    "commit" : "02001af752cb6068ecab42ec5fd6a2792df38945",
    "line" : 77,
    "diffHunk" : "@@ -1,1 +75,79 @@\t\ttime.Sleep(1 * time.Second)\n\t}\n\tlog.Println(\"Starting to serve on\", m.socket)\n\n\treturn nil"
  }
]