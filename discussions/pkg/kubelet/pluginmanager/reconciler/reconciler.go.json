[
  {
    "id" : "162a5208-8e57-43ac-bc68-dc41d16e6f4d",
    "prId" : 97193,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/97193#pullrequestreview-553847385",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "dce515c2-23b7-4f40-9766-e98aa4394b8d",
        "parentId" : null,
        "authorId" : "8eff55b7-2f52-4dd6-b8a6-b75a1c427179",
        "body" : "Can you explain why we need a copy here?",
        "createdAt" : "2020-12-16T13:44:55Z",
        "updatedAt" : "2020-12-16T13:45:58Z",
        "lastEditedBy" : "8eff55b7-2f52-4dd6-b8a6-b75a1c427179",
        "tags" : [
        ]
      },
      {
        "id" : "8c9d8b6f-f2fd-4afa-ae39-f12078561b41",
        "parentId" : "dce515c2-23b7-4f40-9766-e98aa4394b8d",
        "authorId" : "5c4757f6-5a7a-438b-b77f-778928cb6979",
        "body" : "A data race. You can see my second modify place `fix reconcile's field handler data race problem.` before.\r\nHere we return reference of handler and release the lock which control the race of handler.\r\nSupport that one routine is use this reference of handler. The other routine use `AddHandler ` to set it. The lock doesn't promise this kind race.\r\n\r\n\r\n\r\n\r\n",
        "createdAt" : "2020-12-16T14:13:33Z",
        "updatedAt" : "2020-12-16T14:18:24Z",
        "lastEditedBy" : "5c4757f6-5a7a-438b-b77f-778928cb6979",
        "tags" : [
        ]
      },
      {
        "id" : "7cd26d1c-4b57-4a62-bd06-c0525cf260ef",
        "parentId" : "dce515c2-23b7-4f40-9766-e98aa4394b8d",
        "authorId" : "8eff55b7-2f52-4dd6-b8a6-b75a1c427179",
        "body" : "I don't have enough context on this part of the code to know if it is better to copy this or add proper locking around accessing it.\r\n\r\n/cc @derekwaynecarr can hopeully find the right person to look at it.",
        "createdAt" : "2020-12-16T16:12:30Z",
        "updatedAt" : "2020-12-16T16:12:31Z",
        "lastEditedBy" : "8eff55b7-2f52-4dd6-b8a6-b75a1c427179",
        "tags" : [
        ]
      }
    ],
    "commit" : "93606f8ba3f6c83fad5a4d56562e80d0c41e919b",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +105,109 @@\t\tcopyHandlers[pluginType] = handler\n\t}\n\treturn copyHandlers\n}\n"
  },
  {
    "id" : "8667b09d-d365-49c3-b568-4bf566796096",
    "prId" : 88006,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/88006#pullrequestreview-370704231",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "71ab4c89-54f7-4007-acce-48534d2c8fd0",
        "parentId" : null,
        "authorId" : "f8f9446d-82d7-43cf-88d1-cecfb048866d",
        "body" : "As an improvement, we can switch `handlers` to using `sync.Map` so we can eliminate the mutex here. We should probably also rename `handlers` to `typeToHandlers` for more clarity. I'll leave it to you to decide whether to do it in this PR or a followup PR. ",
        "createdAt" : "2020-03-06T20:35:32Z",
        "updatedAt" : "2020-03-31T13:57:34Z",
        "lastEditedBy" : "f8f9446d-82d7-43cf-88d1-cecfb048866d",
        "tags" : [
        ]
      },
      {
        "id" : "b61030cf-ba68-4c24-b750-8b49823b330d",
        "parentId" : "71ab4c89-54f7-4007-acce-48534d2c8fd0",
        "authorId" : "42b1e004-4fa7-4e43-84cf-5378839b49ad",
        "body" : "Responded above.\r\nThis can be done in a follow-up.",
        "createdAt" : "2020-03-07T00:52:24Z",
        "updatedAt" : "2020-03-31T13:57:34Z",
        "lastEditedBy" : "42b1e004-4fa7-4e43-84cf-5378839b49ad",
        "tags" : [
        ]
      }
    ],
    "commit" : "c7bde41478ffa395f35a3edd8985e874500a055c",
    "line" : 12,
    "diffHunk" : "@@ -1,1 +78,82 @@\tactualStateOfWorld  cache.ActualStateOfWorld\n\thandlers            map[string]cache.PluginHandler\n\tpathToHandlers      cache.SocketPluginHandlers\n\tsync.RWMutex\n}"
  },
  {
    "id" : "6e790497-280d-4cb2-aea2-f0776eb056f9",
    "prId" : 73891,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/73891#pullrequestreview-222503313",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "db90920a-ca1c-4219-955e-18b9d0320d18",
        "parentId" : null,
        "authorId" : "8e448017-7838-493d-a424-33cada0da657",
        "body" : "Add a compile type interface implementation check:\r\n\r\n```Go\r\nvar _ Reconciler = &reconciler{}\r\n```",
        "createdAt" : "2019-04-03T23:48:27Z",
        "updatedAt" : "2019-05-30T23:01:15Z",
        "lastEditedBy" : "8e448017-7838-493d-a424-33cada0da657",
        "tags" : [
        ]
      }
    ],
    "commit" : "5e185544421d5504b0fe2ae32c8ebfb3000a1224",
    "line" : 73,
    "diffHunk" : "@@ -1,1 +71,75 @@}\n\ntype reconciler struct {\n\toperationExecutor   operationexecutor.OperationExecutor\n\tloopSleepDuration   time.Duration"
  },
  {
    "id" : "b2bffeff-90a7-44d0-9cda-948993ba0a46",
    "prId" : 73891,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/73891#pullrequestreview-244420888",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "574e054d-27a3-4a79-ab1e-e2920d8cff98",
        "parentId" : null,
        "authorId" : "42b1e004-4fa7-4e43-84cf-5378839b49ad",
        "body" : "Getting read lock should suffice",
        "createdAt" : "2019-05-31T17:32:35Z",
        "updatedAt" : "2019-05-31T17:34:42Z",
        "lastEditedBy" : "42b1e004-4fa7-4e43-84cf-5378839b49ad",
        "tags" : [
        ]
      }
    ],
    "commit" : "5e185544421d5504b0fe2ae32c8ebfb3000a1224",
    "line" : 100,
    "diffHunk" : "@@ -1,1 +98,102 @@\nfunc (rc *reconciler) getHandlers() map[string]cache.PluginHandler {\n\trc.Lock()\n\tdefer rc.Unlock()\n"
  }
]