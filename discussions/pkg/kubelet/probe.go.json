[
  {
    "id" : "54713d3e-3ee5-484f-987a-976e79e150fa",
    "prId" : 7009,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "664d461b-1f70-41c6-b27d-d82fe2d32b0f",
        "parentId" : null,
        "authorId" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "body" : "Do we expect the function to be called outside of this package? Why capitalized the name?\n",
        "createdAt" : "2015-04-17T23:44:40Z",
        "updatedAt" : "2015-04-17T23:44:40Z",
        "lastEditedBy" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "tags" : [
        ]
      },
      {
        "id" : "5e936c8f-b03f-4ed7-b9eb-878b9e93e2e5",
        "parentId" : "664d461b-1f70-41c6-b27d-d82fe2d32b0f",
        "authorId" : "227eb550-8b08-4420-9a78-279f840bd8de",
        "body" : "@yujuhong Yes, I am expecting to move it to kubelet/prober, otherwise container runtime cannot import it.\n",
        "createdAt" : "2015-04-18T00:11:47Z",
        "updatedAt" : "2015-04-18T00:11:51Z",
        "lastEditedBy" : "227eb550-8b08-4420-9a78-279f840bd8de",
        "tags" : [
        ]
      },
      {
        "id" : "091b3faf-8f1d-4b8f-b035-c215d548d693",
        "parentId" : "664d461b-1f70-41c6-b27d-d82fe2d32b0f",
        "authorId" : "227eb550-8b08-4420-9a78-279f840bd8de",
        "body" : "Or move it to kubelet/container...\n\nActually this function does feel to belong to kubelet in some sense... Hopefully if kubelet someday does not import dockertools or rkt directly, we can move them back...\n",
        "createdAt" : "2015-04-18T00:14:16Z",
        "updatedAt" : "2015-04-18T00:14:29Z",
        "lastEditedBy" : "227eb550-8b08-4420-9a78-279f840bd8de",
        "tags" : [
        ]
      },
      {
        "id" : "d9ffcc7c-e6c2-483c-a504-aa41ff5081de",
        "parentId" : "664d461b-1f70-41c6-b27d-d82fe2d32b0f",
        "authorId" : "227eb550-8b08-4420-9a78-279f840bd8de",
        "body" : "Another way to work around this is to define an interface in kubelet/container:\n\n``` go\ntype prober interface {\n    Probe()\n}\n```\n\nAnd then we can pass the kubelet as this interface to the runtime without the circular import problem.\n\nBut I feel it's cleaner to just move it to kubelet/prober. What's your opinion?\n",
        "createdAt" : "2015-04-18T00:19:51Z",
        "updatedAt" : "2015-04-18T00:19:51Z",
        "lastEditedBy" : "227eb550-8b08-4420-9a78-279f840bd8de",
        "tags" : [
        ]
      }
    ],
    "commit" : "1d58992df76df3e9325b2b11ff5d3d7e3289af21",
    "line" : 30,
    "diffHunk" : "@@ -1,1 +53,57 @@// NewProber creates a Prober, it takes a command runner and\n// several container info managers.\nfunc NewProber(\n\trunner dockertools.ContainerCommandRunner,\n\treadinessManager *kubecontainer.ReadinessManager,"
  },
  {
    "id" : "dfb660f6-bece-40ae-9d52-a8814e581f7e",
    "prId" : 5148,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e5caeb9c-c5a2-4676-a160-be816fdf4bfd",
        "parentId" : null,
        "authorId" : "b7abca6a-d6be-4008-a014-3b5ca0e90529",
        "body" : "I think we can collapse these back into one function that takes the probe and the defaultResult. The code is near identical.\n",
        "createdAt" : "2015-03-07T00:22:10Z",
        "updatedAt" : "2015-03-07T00:57:26Z",
        "lastEditedBy" : "b7abca6a-d6be-4008-a014-3b5ca0e90529",
        "tags" : [
        ]
      },
      {
        "id" : "d1ef5c09-89e3-4cf3-b937-0413bedde5ae",
        "parentId" : "e5caeb9c-c5a2-4676-a160-be816fdf4bfd",
        "authorId" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "body" : "deja vu :)\nhttps://github.com/GoogleCloudPlatform/kubernetes/pull/4048#discussion_r24036442\n",
        "createdAt" : "2015-03-07T00:31:12Z",
        "updatedAt" : "2015-03-07T00:57:26Z",
        "lastEditedBy" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "tags" : [
        ]
      },
      {
        "id" : "08f6ff24-5022-4f5a-843e-1056b2f95d07",
        "parentId" : "e5caeb9c-c5a2-4676-a160-be816fdf4bfd",
        "authorId" : "227eb550-8b08-4420-9a78-279f840bd8de",
        "body" : "I would argue that the old function that takes the `defaultResult` is rather confusing. That looks like a generic function at first glance, but indeed it reduces the repeatness by hurting the readability IMO\n",
        "createdAt" : "2015-03-07T00:34:11Z",
        "updatedAt" : "2015-03-07T00:57:26Z",
        "lastEditedBy" : "227eb550-8b08-4420-9a78-279f840bd8de",
        "tags" : [
        ]
      },
      {
        "id" : "0844b97a-47a8-415e-9e70-2f46f56a577b",
        "parentId" : "e5caeb9c-c5a2-4676-a160-be816fdf4bfd",
        "authorId" : "b7abca6a-d6be-4008-a014-3b5ca0e90529",
        "body" : "How about we meet in the middle and keep the functions separate but do the for loop in a helper? That way the defaultResult part is called out explicitly and the meaty heart of the function is re-used :)\n",
        "createdAt" : "2015-03-07T00:37:11Z",
        "updatedAt" : "2015-03-07T00:57:26Z",
        "lastEditedBy" : "b7abca6a-d6be-4008-a014-3b5ca0e90529",
        "tags" : [
        ]
      },
      {
        "id" : "3d19dafd-5c57-45c3-b458-8dbceab5ad0e",
        "parentId" : "e5caeb9c-c5a2-4676-a160-be816fdf4bfd",
        "authorId" : "b7abca6a-d6be-4008-a014-3b5ca0e90529",
        "body" : "I mean just the loop\n",
        "createdAt" : "2015-03-07T00:37:45Z",
        "updatedAt" : "2015-03-07T00:57:26Z",
        "lastEditedBy" : "b7abca6a-d6be-4008-a014-3b5ca0e90529",
        "tags" : [
        ]
      },
      {
        "id" : "caf5a68d-3054-466e-b0b0-aaccd205111e",
        "parentId" : "e5caeb9c-c5a2-4676-a160-be816fdf4bfd",
        "authorId" : "227eb550-8b08-4420-9a78-279f840bd8de",
        "body" : "@vmarmol :+1: What function name will you suggest? tryRunProbe?\n",
        "createdAt" : "2015-03-07T00:42:27Z",
        "updatedAt" : "2015-03-07T00:57:26Z",
        "lastEditedBy" : "227eb550-8b08-4420-9a78-279f840bd8de",
        "tags" : [
        ]
      },
      {
        "id" : "fd1c9f37-c1a8-4b23-84db-4dfd9759d3db",
        "parentId" : "e5caeb9c-c5a2-4676-a160-be816fdf4bfd",
        "authorId" : "227eb550-8b08-4420-9a78-279f840bd8de",
        "body" : "@mikedanese Ah... Thanks for the reference. Think we should keep the different name anyway.\n",
        "createdAt" : "2015-03-07T00:47:21Z",
        "updatedAt" : "2015-03-07T00:57:26Z",
        "lastEditedBy" : "227eb550-8b08-4420-9a78-279f840bd8de",
        "tags" : [
        ]
      },
      {
        "id" : "ee0a7305-e103-443c-a9fc-c3a278baec6c",
        "parentId" : "e5caeb9c-c5a2-4676-a160-be816fdf4bfd",
        "authorId" : "b7abca6a-d6be-4008-a014-3b5ca0e90529",
        "body" : "LOL, I'm the worst person for names but: runProbeWithRetries()?\n",
        "createdAt" : "2015-03-07T00:50:09Z",
        "updatedAt" : "2015-03-07T00:57:26Z",
        "lastEditedBy" : "b7abca6a-d6be-4008-a014-3b5ca0e90529",
        "tags" : [
        ]
      },
      {
        "id" : "311da089-0b8c-4c7d-b530-7269e4ec740e",
        "parentId" : "e5caeb9c-c5a2-4676-a160-be816fdf4bfd",
        "authorId" : "227eb550-8b08-4420-9a78-279f840bd8de",
        "body" : "Yet seems to be better than me.\nDone.\n",
        "createdAt" : "2015-03-07T00:56:16Z",
        "updatedAt" : "2015-03-07T00:57:26Z",
        "lastEditedBy" : "227eb550-8b08-4420-9a78-279f840bd8de",
        "tags" : [
        ]
      }
    ],
    "commit" : "276fb1731c4e7e4d69276297093f6f71e3d9eb0f",
    "line" : 74,
    "diffHunk" : "@@ -1,1 +79,83 @@// probeContainerLiveness probes the liveness of a container.\n// If the initalDelay since container creation on liveness probe has not passed the probe will return probe.Success.\nfunc (kl *Kubelet) probeContainerLiveness(pod *api.BoundPod, status api.PodStatus, container api.Container, dockerContainer *docker.APIContainers) (probe.Result, error) {\n\tp := container.LivenessProbe\n\tif p == nil {"
  },
  {
    "id" : "75a99a11-7a84-4464-acc4-64b9e9f56af7",
    "prId" : 4048,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "98615d32-8f91-45c0-9f88-340bf099c121",
        "parentId" : null,
        "authorId" : "7be32503-562e-4caa-838d-bba025e626b5",
        "body" : "Why does this return Success rather than the defaultResult? In what scenario would defaultResult be failure?\n",
        "createdAt" : "2015-02-07T01:20:20Z",
        "updatedAt" : "2015-02-10T16:30:18Z",
        "lastEditedBy" : "7be32503-562e-4caa-838d-bba025e626b5",
        "tags" : [
        ]
      },
      {
        "id" : "f3f14d7d-f105-4ff0-a656-91244865b7d9",
        "parentId" : "98615d32-8f91-45c0-9f88-340bf099c121",
        "authorId" : "7be32503-562e-4caa-838d-bba025e626b5",
        "body" : "Ok, nevermind. A comment would be useful.\n",
        "createdAt" : "2015-02-07T01:23:42Z",
        "updatedAt" : "2015-02-10T16:30:18Z",
        "lastEditedBy" : "7be32503-562e-4caa-838d-bba025e626b5",
        "tags" : [
        ]
      }
    ],
    "commit" : "c72c2a0d1e654d9b6c418a7f4fc5a5e827b0e18c",
    "line" : null,
    "diffHunk" : "@@ -1,1 +57,61 @@\tresult := probe.Unknown\n\tif p == nil {\n\t\treturn probe.Success, nil\n\t}\n\tif time.Now().Unix()-dockerContainer.Created < p.InitialDelaySeconds {"
  }
]