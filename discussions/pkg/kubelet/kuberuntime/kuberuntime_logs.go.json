[
  {
    "id" : "2b36df6f-a16f-4ede-99e7-d63f835e040c",
    "prId" : 50381,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/50381#pullrequestreview-59624414",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "78c2aaa2-932c-4192-a707-9bee378d789d",
        "parentId" : null,
        "authorId" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "body" : "The reset is not needed then.",
        "createdAt" : "2017-08-29T01:07:36Z",
        "updatedAt" : "2017-08-29T01:08:12Z",
        "lastEditedBy" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "tags" : [
        ]
      },
      {
        "id" : "d6fb8775-ef49-402c-bc74-d6530884cf87",
        "parentId" : "78c2aaa2-932c-4192-a707-9bee378d789d",
        "authorId" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "body" : "@sczizzo could you fix this? Thanks!",
        "createdAt" : "2017-08-30T16:57:11Z",
        "updatedAt" : "2017-08-30T16:57:11Z",
        "lastEditedBy" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "tags" : [
        ]
      }
    ],
    "commit" : "dab138236c3c4745fcc6329f7dc6722bf76e09fb",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +287,291 @@func parseDockerJSONLog(log []byte, msg *logMessage) error {\n\tvar l = &jsonlog.JSONLog{}\n\tl.Reset()\n\n\t// TODO: JSON decoding is fairly expensive, we should evaluate this."
  },
  {
    "id" : "4c7fd29b-7638-4fe1-84c4-27003ee71fc5",
    "prId" : 35348,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/35348#pullrequestreview-5969453",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7b061968-1299-4683-8d0b-7efc1cc59b2d",
        "parentId" : null,
        "authorId" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "body" : "nit: Should doc those supported log formats (togather with delimiter and eol) in CRI interface.\n",
        "createdAt" : "2016-10-22T15:59:59Z",
        "updatedAt" : "2016-10-27T00:38:36Z",
        "lastEditedBy" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "tags" : [
        ]
      },
      {
        "id" : "c233a5ab-25f1-4226-a608-1f03bff18024",
        "parentId" : "7b061968-1299-4683-8d0b-7efc1cc59b2d",
        "authorId" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "body" : "@yujuhong One question is that for unsupported logging format, should we just return error? Or return raw log data ignoring any kubectl logs options?\n",
        "createdAt" : "2016-10-24T17:29:38Z",
        "updatedAt" : "2016-10-27T00:38:36Z",
        "lastEditedBy" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "tags" : [
        ]
      },
      {
        "id" : "10f492b7-c71d-46f5-aed6-863eb70b1a6c",
        "parentId" : "7b061968-1299-4683-8d0b-7efc1cc59b2d",
        "authorId" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "body" : "I think it's reasonable to return an error for now. \n",
        "createdAt" : "2016-10-26T22:18:19Z",
        "updatedAt" : "2016-10-27T00:38:36Z",
        "lastEditedBy" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "tags" : [
        ]
      },
      {
        "id" : "cb0b25be-0ad0-45cc-86b6-0490132cd037",
        "parentId" : "7b061968-1299-4683-8d0b-7efc1cc59b2d",
        "authorId" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "body" : "ACK\n",
        "createdAt" : "2016-10-26T23:35:57Z",
        "updatedAt" : "2016-10-27T00:38:36Z",
        "lastEditedBy" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "tags" : [
        ]
      }
    ],
    "commit" : "e403ccef75509b3116f50ec4dceb2f9c103c4179",
    "line" : 204,
    "diffHunk" : "@@ -1,1 +202,206 @@\tparseCRILog,        // CRI log format parse function\n\tparseDockerJSONLog, // Docker JSON log format parse function\n}\n\n// parseCRILog parses logs in CRI log format. CRI Log format example:"
  },
  {
    "id" : "7858c7c0-b092-4e31-b137-e300d7840c07",
    "prId" : 35348,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/35348#pullrequestreview-5968713",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8cab4054-7a32-485a-b89b-a93faa2b64c1",
        "parentId" : null,
        "authorId" : "775ff044-67f8-4bdc-93af-09db25e4fe71",
        "body" : "is there a way to specify a multi-character delimiter?  its probably not needed for stdout/stderr but for the future state of handling more arbitrary log files (stacktraces in an application log file jump to mind) it'd be nice to have multi-char event delimiters sorted out already.\n\nif this is out of scope for now, please ignore.\n",
        "createdAt" : "2016-10-24T16:59:47Z",
        "updatedAt" : "2016-10-27T00:38:36Z",
        "lastEditedBy" : "775ff044-67f8-4bdc-93af-09db25e4fe71",
        "tags" : [
        ]
      },
      {
        "id" : "553427c8-cab5-410e-98d6-aa383f0b011d",
        "parentId" : "8cab4054-7a32-485a-b89b-a93faa2b64c1",
        "authorId" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "body" : "@coffeepac Currently, we only plan to support docker logging format and the CRI defined format.\n\nIn CRI defined format, runtime should decorate logs with timestamp and stream type, for example:\n\n```\n2016-10-06T00:17:09.669794202Z stdout log content 1\n```\n\nCurrently, we assume `log content 1` is one line, and should be ended with `\\n`. We may:\n1) Assume all runtime should convert their logging into CRI format, which means that they may need to replace or escape their eol.\n2) Support more logging formats.\n\nI think 1) is the current plan. @yujuhong \n",
        "createdAt" : "2016-10-24T17:35:29Z",
        "updatedAt" : "2016-10-27T00:38:36Z",
        "lastEditedBy" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "tags" : [
        ]
      },
      {
        "id" : "8a125d43-7fdc-4ba6-a425-bc1060a54d71",
        "parentId" : "8cab4054-7a32-485a-b89b-a93faa2b64c1",
        "authorId" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "body" : "@coffeepac I think this is a valid request, and it's worth more discussion. We will not support this for the v1alpha1 CRI, but feel free to open an issue/proposal and cc sig-node.\n",
        "createdAt" : "2016-10-26T23:28:32Z",
        "updatedAt" : "2016-10-27T00:38:36Z",
        "lastEditedBy" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "tags" : [
        ]
      }
    ],
    "commit" : "e403ccef75509b3116f50ec4dceb2f9c103c4179",
    "line" : null,
    "diffHunk" : "@@ -1,1 +137,141 @@\tmsg := &logMessage{}\n\tfor {\n\t\tl, err := r.ReadBytes(eol[0])\n\t\tif err != nil {\n\t\t\tif err != io.EOF { // This is an real error"
  },
  {
    "id" : "2b099aa9-6de5-4d1e-99b6-20d190977ed7",
    "prId" : 35348,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/35348#pullrequestreview-5969168",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4082aeed-67b1-4e7a-935b-96978e525a72",
        "parentId" : null,
        "authorId" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "body" : "Would recommend implementing maxBytes at this level.\n",
        "createdAt" : "2016-10-25T01:10:01Z",
        "updatedAt" : "2016-10-27T00:38:36Z",
        "lastEditedBy" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "tags" : [
        ]
      },
      {
        "id" : "a940581f-b5c3-4468-a531-01c44689ba2e",
        "parentId" : "4082aeed-67b1-4e7a-935b-96978e525a72",
        "authorId" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "body" : "ACK. Will try to do this in `tail`.\n",
        "createdAt" : "2016-10-25T02:38:03Z",
        "updatedAt" : "2016-10-27T00:38:36Z",
        "lastEditedBy" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "tags" : [
        ]
      },
      {
        "id" : "c342bcc9-bc0a-4073-bb56-5e26eaaf9391",
        "parentId" : "4082aeed-67b1-4e7a-935b-96978e525a72",
        "authorId" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "body" : "maxBytes is particularly important for UIs to avoid blowing out browsers - doesn't have to be 100% accurate (original design allowed maxbytes to be slightly inaccurate), but is important to prevent DoS on kubelet as well.\n",
        "createdAt" : "2016-10-25T02:49:45Z",
        "updatedAt" : "2016-10-27T00:38:36Z",
        "lastEditedBy" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "tags" : [
        ]
      },
      {
        "id" : "aa26590d-7c29-4305-b3d5-51157022ae7b",
        "parentId" : "4082aeed-67b1-4e7a-935b-96978e525a72",
        "authorId" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "body" : "Done.\n",
        "createdAt" : "2016-10-26T23:32:47Z",
        "updatedAt" : "2016-10-27T00:38:36Z",
        "lastEditedBy" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "tags" : [
        ]
      }
    ],
    "commit" : "e403ccef75509b3116f50ec4dceb2f9c103c4179",
    "line" : 105,
    "diffHunk" : "@@ -1,1 +103,107 @@\t\topts.since = now.Add(-time.Duration(*apiOpts.SinceSeconds) * time.Second)\n\t}\n\tif apiOpts.SinceTime != nil && apiOpts.SinceTime.After(opts.since) {\n\t\topts.since = apiOpts.SinceTime.Time\n\t}"
  },
  {
    "id" : "ecb84c2d-6221-4e88-85fd-99432272a459",
    "prId" : 35348,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/35348#pullrequestreview-5970148",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5fd63cc1-9598-43d6-9585-4a88b0cbe00f",
        "parentId" : null,
        "authorId" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "body" : "This is hellishly expensive (I think).  Can you leave a TODO / open an issue to evaluate the performance of this later on?\n",
        "createdAt" : "2016-10-25T01:11:28Z",
        "updatedAt" : "2016-10-27T00:38:36Z",
        "lastEditedBy" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "tags" : [
        ]
      },
      {
        "id" : "0c949871-8dc4-42d9-8938-4772df25a840",
        "parentId" : "5fd63cc1-9598-43d6-9585-4a88b0cbe00f",
        "authorId" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "body" : "Docker logs also does json decoding, the only difference is that we are using `json.Unmarshal`, docker is using `json.Decoder` https://github.com/docker/docker/blob/b248de7e332b6e67b08a8981f68060e6ae629ccf/daemon/logger/jsonfilelog/read.go#L125.\n\nWill there be a big performance difference between these two?\n",
        "createdAt" : "2016-10-25T02:28:12Z",
        "updatedAt" : "2016-10-27T00:38:36Z",
        "lastEditedBy" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "tags" : [
        ]
      },
      {
        "id" : "47c70f15-e5a5-4f19-bc6a-9b14fb93a522",
        "parentId" : "5fd63cc1-9598-43d6-9585-4a88b0cbe00f",
        "authorId" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "body" : "They're both equally bad.  This is fine for now but I'd like to replace this with a zero-allocation scanning approach later that avoids the expense of unmarshal.\n",
        "createdAt" : "2016-10-25T02:48:36Z",
        "updatedAt" : "2016-10-27T00:38:36Z",
        "lastEditedBy" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "tags" : [
        ]
      },
      {
        "id" : "1dd8d985-859e-4d0c-865c-793783b891f1",
        "parentId" : "5fd63cc1-9598-43d6-9585-4a88b0cbe00f",
        "authorId" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "body" : "Hm, I see. I'll leave a TODO here.\n",
        "createdAt" : "2016-10-25T03:11:28Z",
        "updatedAt" : "2016-10-27T00:38:36Z",
        "lastEditedBy" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "tags" : [
        ]
      },
      {
        "id" : "f626837e-501f-4f56-abca-f4887a481fc9",
        "parentId" : "5fd63cc1-9598-43d6-9585-4a88b0cbe00f",
        "authorId" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "body" : "Done.\n",
        "createdAt" : "2016-10-26T23:43:05Z",
        "updatedAt" : "2016-10-27T00:38:36Z",
        "lastEditedBy" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "tags" : [
        ]
      }
    ],
    "commit" : "e403ccef75509b3116f50ec4dceb2f9c103c4179",
    "line" : null,
    "diffHunk" : "@@ -1,1 +247,251 @@\tl := dockerJSONLog\n\t// TODO: JSON decoding is fairly expensive, we should evaluate this.\n\tif err := json.Unmarshal(log, l); err != nil {\n\t\treturn fmt.Errorf(\"failed with %v to unmarshal log %q\", err, l)\n\t}"
  }
]