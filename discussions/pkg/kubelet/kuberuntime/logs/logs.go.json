[
  {
    "id" : "b193ab58-de28-44e8-950e-a979c451f399",
    "prId" : 93920,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/93920#pullrequestreview-547382619",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "71282c3f-c866-4de3-9d8b-c7bbcf089db2",
        "parentId" : null,
        "authorId" : "6eca0ade-9879-4dd7-ad14-547e16f5c041",
        "body" : "just noting:\r\n\r\nthe default is -1 for tail (read all log) and default for follow is false.",
        "createdAt" : "2020-12-08T16:05:06Z",
        "updatedAt" : "2020-12-08T16:20:57Z",
        "lastEditedBy" : "6eca0ade-9879-4dd7-ad14-547e16f5c041",
        "tags" : [
        ]
      }
    ],
    "commit" : "44c24758b02042692b5f719e926f8baffb01bf0a",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +304,308 @@\t}\n\n\tlimitedMode := (opts.tail >= 0) && (!opts.follow)\n\tlimitedNum := opts.tail\n\t// Start parsing the logs."
  },
  {
    "id" : "5fea844b-b378-4bad-af09-8ee582bb4683",
    "prId" : 93920,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/93920#pullrequestreview-547382619",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9e289afc-9f11-496e-9011-ef95955c03b1",
        "parentId" : null,
        "authorId" : "6eca0ade-9879-4dd7-ad14-547e16f5c041",
        "body" : "I am confused why this is needed.  wont `FindTailLineStartIndex` relative to the tail option handle this?",
        "createdAt" : "2020-12-08T16:09:48Z",
        "updatedAt" : "2020-12-08T16:20:57Z",
        "lastEditedBy" : "6eca0ade-9879-4dd7-ad14-547e16f5c041",
        "tags" : [
        ]
      },
      {
        "id" : "d4fadb7f-972f-47f4-938d-ae1180e71f95",
        "parentId" : "9e289afc-9f11-496e-9011-ef95955c03b1",
        "authorId" : "6eca0ade-9879-4dd7-ad14-547e16f5c041",
        "body" : "I read this closer, and understand if writes are still happening relative to this tail option, users may get additional log lines.",
        "createdAt" : "2020-12-08T16:19:32Z",
        "updatedAt" : "2020-12-08T16:20:57Z",
        "lastEditedBy" : "6eca0ade-9879-4dd7-ad14-547e16f5c041",
        "tags" : [
        ]
      }
    ],
    "commit" : "44c24758b02042692b5f719e926f8baffb01bf0a",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +316,320 @@\tmsg := &logMessage{}\n\tfor {\n\t\tif stop || (limitedMode && limitedNum == 0) {\n\t\t\tklog.V(2).Infof(\"Finish parsing log file %q\", path)\n\t\t\treturn nil"
  },
  {
    "id" : "4b6b717f-ddac-48d9-8c43-a5bcab7bb197",
    "prId" : 89013,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/89013#pullrequestreview-376509794",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cb021392-b72b-4dc9-bd2c-97fbbd1c4859",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "note the type this comes from so people don't think we can arbitrarily rename these fields",
        "createdAt" : "2020-03-17T18:36:33Z",
        "updatedAt" : "2020-03-18T01:26:28Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "5d17c71e-3050-48ae-990f-0ce85fbb767f",
        "parentId" : "cb021392-b72b-4dc9-bd2c-97fbbd1c4859",
        "authorId" : "bd04f755-e62f-45fb-8771-4cc2b5db49d4",
        "body" : "ok, adding a note.",
        "createdAt" : "2020-03-18T01:24:05Z",
        "updatedAt" : "2020-03-18T01:26:28Z",
        "lastEditedBy" : "bd04f755-e62f-45fb-8771-4cc2b5db49d4",
        "tags" : [
        ]
      },
      {
        "id" : "7768b3ee-b675-411f-a15c-ba22945b9b7d",
        "parentId" : "cb021392-b72b-4dc9-bd2c-97fbbd1c4859",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "even stronger phrasing, as in \"this deserializes the json log format returned by docker; do not modify this struct's fields or json serialization\"",
        "createdAt" : "2020-03-18T01:35:30Z",
        "updatedAt" : "2020-03-18T01:35:30Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "825f99c396823a4430213086dc513e6983d3b0b1",
    "line" : 12,
    "diffHunk" : "@@ -1,1 +165,169 @@}\n\n// jsonLog is a log message, typically a single entry from a given log stream.\n// since the data structure is originally from docker, we should be careful to\n// with any changes to jsonLog"
  },
  {
    "id" : "2cdee68a-ecd6-477f-b851-cf418707138b",
    "prId" : 81747,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/81747#pullrequestreview-278112498",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e784e708-cb7a-46cb-a42e-65ac3c477883",
        "parentId" : null,
        "authorId" : "d2b16581-e7e9-48b8-9f76-6f6bcb9ec300",
        "body" : "Since you are re-using the path variable, won't path always be empty string when err != nil?",
        "createdAt" : "2019-08-21T22:33:20Z",
        "updatedAt" : "2019-08-21T22:44:28Z",
        "lastEditedBy" : "d2b16581-e7e9-48b8-9f76-6f6bcb9ec300",
        "tags" : [
        ]
      },
      {
        "id" : "e0d9c092-69c0-456c-b2df-c652d560d59e",
        "parentId" : "e784e708-cb7a-46cb-a42e-65ac3c477883",
        "authorId" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "body" : "True. Will update.",
        "createdAt" : "2019-08-21T22:41:12Z",
        "updatedAt" : "2019-08-21T22:44:28Z",
        "lastEditedBy" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "tags" : [
        ]
      },
      {
        "id" : "fd3e8b36-3bef-469a-90fa-2978e4e9e430",
        "parentId" : "e784e708-cb7a-46cb-a42e-65ac3c477883",
        "authorId" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "body" : "Done",
        "createdAt" : "2019-08-21T22:44:31Z",
        "updatedAt" : "2019-08-21T22:44:34Z",
        "lastEditedBy" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "tags" : [
        ]
      }
    ],
    "commit" : "7767ff3bb2bd4cd6b2c1fc9649558d941590474d",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +280,284 @@\tevaluated, err := filepath.EvalSymlinks(path)\n\tif err != nil {\n\t\treturn fmt.Errorf(\"failed to try resolving symlinks in path %q: %v\", path, err)\n\t}\n\tpath = evaluated"
  },
  {
    "id" : "4b941f17-5393-4f15-8969-e9e756da8fe6",
    "prId" : 73041,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/73041#pullrequestreview-193998330",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "66e6daf5-1412-4704-9432-20f7cd0e16ff",
        "parentId" : null,
        "authorId" : "2e700334-1db1-41da-bb64-1b6195185431",
        "body" : "I don't know what I'm doing, so ignore me if I make no sense, but it's surprising to me that `Chmod` counts as \"recreated\".  Should we silently ignore it instead?",
        "createdAt" : "2019-01-18T08:57:06Z",
        "updatedAt" : "2019-03-31T10:15:51Z",
        "lastEditedBy" : "2e700334-1db1-41da-bb64-1b6195185431",
        "tags" : [
        ]
      },
      {
        "id" : "d730e43f-aebd-4417-b5cd-2888f472ff6a",
        "parentId" : "66e6daf5-1412-4704-9432-20f7cd0e16ff",
        "authorId" : "b3fe9735-08f4-4c07-a325-0279623e8b9b",
        "body" : "I've added it as I've seen the Chmod event coming from fsnotify instead of Rename or Create when the log file was replaced with rename(2).",
        "createdAt" : "2019-01-18T08:59:39Z",
        "updatedAt" : "2019-03-31T10:15:51Z",
        "lastEditedBy" : "b3fe9735-08f4-4c07-a325-0279623e8b9b",
        "tags" : [
        ]
      }
    ],
    "commit" : "31397083b2861a2a037f947184cd1f666622b5be",
    "line" : 99,
    "diffHunk" : "@@ -1,1 +426,430 @@\t\t\tcase fsnotify.Remove:\n\t\t\t\tfallthrough\n\t\t\tcase fsnotify.Chmod:\n\t\t\t\treturn true, true, nil\n\t\t\tdefault:"
  },
  {
    "id" : "47a29da4-6804-4639-a2c7-ffebe1e09989",
    "prId" : 73041,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/73041#pullrequestreview-193999038",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "10a11df0-1760-41c0-a485-cac2d563b5de",
        "parentId" : null,
        "authorId" : "2e700334-1db1-41da-bb64-1b6195185431",
        "body" : "Don't you need [explicit `fallthrough` statements][1] in Go?  https://play.golang.org/p/1nol1bGX2DR (or maybe I'm just misunderstanding your intention here?)\r\n\r\n[1]: https://golang.org/ref/spec#Fallthrough_statements",
        "createdAt" : "2019-01-18T09:00:37Z",
        "updatedAt" : "2019-03-31T10:15:51Z",
        "lastEditedBy" : "2e700334-1db1-41da-bb64-1b6195185431",
        "tags" : [
        ]
      },
      {
        "id" : "dcec47b0-9d72-4bd3-898f-46cebdd45b9f",
        "parentId" : "10a11df0-1760-41c0-a485-cac2d563b5de",
        "authorId" : "b3fe9735-08f4-4c07-a325-0279623e8b9b",
        "body" : "yes I do :-)",
        "createdAt" : "2019-01-18T09:01:41Z",
        "updatedAt" : "2019-03-31T10:15:51Z",
        "lastEditedBy" : "b3fe9735-08f4-4c07-a325-0279623e8b9b",
        "tags" : [
        ]
      }
    ],
    "commit" : "31397083b2861a2a037f947184cd1f666622b5be",
    "line" : 93,
    "diffHunk" : "@@ -1,1 +420,424 @@\t\t\tcase fsnotify.Write:\n\t\t\t\treturn true, false, nil\n\t\t\tcase fsnotify.Create:\n\t\t\t\tfallthrough\n\t\t\tcase fsnotify.Rename:"
  },
  {
    "id" : "2b667803-3291-4ba1-a7ca-bfdaaec10bb4",
    "prId" : 63160,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/63160#pullrequestreview-115412933",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "df16e242-eb54-4a3e-9920-9eca8e0d34e0",
        "parentId" : null,
        "authorId" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "body" : "The container may in starting state, use `s.State == runtimeapi.ContainerState_CONTAINER_EXITED` instead?",
        "createdAt" : "2018-04-26T02:03:34Z",
        "updatedAt" : "2018-04-26T21:54:19Z",
        "lastEditedBy" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "tags" : [
        ]
      },
      {
        "id" : "7aac9c1b-b2bc-46da-83c4-2a068a7350a9",
        "parentId" : "df16e242-eb54-4a3e-9920-9eca8e0d34e0",
        "authorId" : "8e9f49fc-1050-4601-b81c-83bf660c5eb8",
        "body" : "I was just reusing the logic that already existed there as to not complicate things.",
        "createdAt" : "2018-04-26T02:24:38Z",
        "updatedAt" : "2018-04-26T21:54:19Z",
        "lastEditedBy" : "8e9f49fc-1050-4601-b81c-83bf660c5eb8",
        "tags" : [
        ]
      }
    ],
    "commit" : "5da3a1d514a13212a6d2386ac01a07dccbcaef83",
    "line" : 10,
    "diffHunk" : "@@ -1,1 +361,365 @@\t}\n\t// Only keep following container log when it is running.\n\tif s.State != runtimeapi.ContainerState_CONTAINER_RUNNING {\n\t\tglog.V(5).Infof(\"Container %q is not running (state=%q)\", id, s.State)\n\t\t// Do not return error because it's normal that the container stops"
  },
  {
    "id" : "3ac583ae-2184-449d-99df-c65818631677",
    "prId" : 63160,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/63160#pullrequestreview-116612584",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e2fd59fc-7fdc-4d87-afeb-25aca301f530",
        "parentId" : null,
        "authorId" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "body" : "There's a bug here I just spotted - if you are following the logs of a pod that is terminating the last loop of this will return an error vs just cleanly stopping.\r\n\r\nSo you should get:\r\n\r\n```\r\nlogs 1\r\nlogs 2\r\n# container dies\r\n# clean exit\r\n```\r\n\r\nand instead you get:\r\n\r\n```\r\nlogs 1\r\nlogs 2\r\n# container dies\r\n# this code calls status and gets a Container does not exist error\r\nerror: container XYZ does not exist\r\n```\r\n\r\nWe need to explicitly check for container does not exist error from this call and `return false, nil` if it matches.",
        "createdAt" : "2018-04-29T05:21:14Z",
        "updatedAt" : "2018-04-29T05:21:36Z",
        "lastEditedBy" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "tags" : [
        ]
      },
      {
        "id" : "576f02f9-9844-459b-a641-beebda2c1952",
        "parentId" : "e2fd59fc-7fdc-4d87-afeb-25aca301f530",
        "authorId" : "8e9f49fc-1050-4601-b81c-83bf660c5eb8",
        "body" : "Just to be clear, this PR didn't introduce this behavior.  It just didn't fix it.",
        "createdAt" : "2018-05-01T15:41:18Z",
        "updatedAt" : "2018-05-01T15:41:18Z",
        "lastEditedBy" : "8e9f49fc-1050-4601-b81c-83bf660c5eb8",
        "tags" : [
        ]
      },
      {
        "id" : "61fac8a0-2426-4375-a5af-d3e764d891bb",
        "parentId" : "e2fd59fc-7fdc-4d87-afeb-25aca301f530",
        "authorId" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "body" : "Yes, I just also saw it while testing and observed it in the code.  This code can't safely assume that ContainerStatus can return a pod so we should fix it while we're in here.",
        "createdAt" : "2018-05-01T16:05:26Z",
        "updatedAt" : "2018-05-01T16:05:26Z",
        "lastEditedBy" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "tags" : [
        ]
      },
      {
        "id" : "76e128b4-478e-4788-b42e-767681ad7342",
        "parentId" : "e2fd59fc-7fdc-4d87-afeb-25aca301f530",
        "authorId" : "8e9f49fc-1050-4601-b81c-83bf660c5eb8",
        "body" : "follow on PR for this https://github.com/kubernetes/kubernetes/pull/63334",
        "createdAt" : "2018-05-01T16:10:57Z",
        "updatedAt" : "2018-05-01T16:10:57Z",
        "lastEditedBy" : "8e9f49fc-1050-4601-b81c-83bf660c5eb8",
        "tags" : [
        ]
      }
    ],
    "commit" : "5da3a1d514a13212a6d2386ac01a07dccbcaef83",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +356,360 @@\nfunc isContainerRunning(id string, r internalapi.RuntimeService) (bool, error) {\n\ts, err := r.ContainerStatus(id)\n\tif err != nil {\n\t\treturn false, err"
  },
  {
    "id" : "859d78c5-f8fc-4cca-8064-a4267fe27f42",
    "prId" : 55922,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/55922#pullrequestreview-77343942",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "839bd6b1-9b7c-4aeb-bdca-19a7922efa09",
        "parentId" : null,
        "authorId" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "body" : "This is a cleanup for https://github.com/kubernetes/kubernetes/pull/55631#issuecomment-344743772.",
        "createdAt" : "2017-11-17T05:46:30Z",
        "updatedAt" : "2017-11-21T00:36:11Z",
        "lastEditedBy" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "tags" : [
        ]
      }
    ],
    "commit" : "2bc0532eb31dc15bcc0fe21a9bb359520908f4b0",
    "line" : 100,
    "diffHunk" : "@@ -1,1 +291,295 @@\twriter := newLogWriter(stdout, stderr, opts)\n\tmsg := &logMessage{}\n\tfor {\n\t\tif stop {\n\t\t\tglog.V(2).Infof(\"Finish parsing log file %q\", path)"
  },
  {
    "id" : "3f53041c-76b3-4cb4-8354-fe3a8bf7c234",
    "prId" : 55922,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/55922#pullrequestreview-77518828",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3b46f879-2243-4918-b43b-46f4a42219c6",
        "parentId" : null,
        "authorId" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "body" : "Will this break old log format? e.g. a single line with no tag set.",
        "createdAt" : "2017-11-17T08:57:05Z",
        "updatedAt" : "2017-11-21T00:36:11Z",
        "lastEditedBy" : "0df1da34-610c-4ce5-b0cf-bbda668bf9c1",
        "tags" : [
        ]
      },
      {
        "id" : "0d1f97fd-8cbc-4573-a217-111a48ecc3bd",
        "parentId" : "3b46f879-2243-4918-b43b-46f4a42219c6",
        "authorId" : "fb41b733-ba12-42d8-b026-942db6e3696f",
        "body" : "Yes, and each next log metadata change can do it too, that's why I push towards JSON format instead",
        "createdAt" : "2017-11-17T11:29:28Z",
        "updatedAt" : "2017-11-21T00:36:11Z",
        "lastEditedBy" : "fb41b733-ba12-42d8-b026-942db6e3696f",
        "tags" : [
        ]
      },
      {
        "id" : "cd18d746-896d-47c8-9c80-df837294675a",
        "parentId" : "3b46f879-2243-4918-b43b-46f4a42219c6",
        "authorId" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "body" : "If we don't want to break current format, we could use the following format instead:\r\n```\r\nTIMESTAMP TAG CONTENT\r\n2016-10-06T00:17:09.669794202Z stdout:P log content 1\r\n```\r\nIt just depends on whether we think we should keep backward compatibility now. And `kubectl` and `fluentd` should tolerant sub fields in all implementation.\r\n\r\nAnd in the future, we could always extend the tag field with new sub field, if we really have to.",
        "createdAt" : "2017-11-17T18:17:47Z",
        "updatedAt" : "2017-11-21T00:36:11Z",
        "lastEditedBy" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "tags" : [
        ]
      },
      {
        "id" : "0f0eac5a-4d40-4df3-b7b8-2ee45a29de74",
        "parentId" : "3b46f879-2243-4918-b43b-46f4a42219c6",
        "authorId" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "body" : "And we could switch to json format in the future if we really need many metadata fields, which is unlikely.",
        "createdAt" : "2017-11-17T18:19:09Z",
        "updatedAt" : "2017-11-21T00:36:11Z",
        "lastEditedBy" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "tags" : [
        ]
      }
    ],
    "commit" : "2bc0532eb31dc15bcc0fe21a9bb359520908f4b0",
    "line" : 59,
    "diffHunk" : "@@ -1,1 +152,156 @@\tidx = bytes.Index(log, delimiter)\n\tif idx < 0 {\n\t\treturn fmt.Errorf(\"log tag is not found\")\n\t}\n\t// Keep this forward compatible."
  },
  {
    "id" : "604b4bb0-db41-4f73-a4bf-958063963f44",
    "prId" : 55922,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/55922#pullrequestreview-77602422",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "40a04695-768b-471b-bf2f-21f8233cd2fd",
        "parentId" : null,
        "authorId" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "body" : "This changes the existing behavior of `kubectl`. We should still print the partial line.",
        "createdAt" : "2017-11-18T01:08:51Z",
        "updatedAt" : "2017-11-21T00:36:11Z",
        "lastEditedBy" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "tags" : [
        ]
      },
      {
        "id" : "294c0066-d585-4a68-a33b-c46ec05ebde2",
        "parentId" : "40a04695-768b-471b-bf2f-21f8233cd2fd",
        "authorId" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "body" : "Offline discussed. The logic is not changed.",
        "createdAt" : "2017-11-18T01:44:31Z",
        "updatedAt" : "2017-11-21T00:36:11Z",
        "lastEditedBy" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "tags" : [
        ]
      }
    ],
    "commit" : "2bc0532eb31dc15bcc0fe21a9bb359520908f4b0",
    "line" : 169,
    "diffHunk" : "@@ -1,1 +321,325 @@\t\t\t\t\treturn err\n\t\t\t\t}\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\t// Should stop after writing the remaining content."
  }
]