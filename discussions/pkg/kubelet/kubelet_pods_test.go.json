[
  {
    "id" : "f82e1768-3c93-4897-9eb0-987a2dd366cd",
    "prId" : 102821,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/102821#pullrequestreview-683425958",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0c9cc909-3b59-4097-8371-520e3e777624",
        "parentId" : null,
        "authorId" : "31a2ac00-6c67-4307-a4bc-bfd13f41ef27",
        "body" : "There is currently 0 unit test coverage for this (rather complex) function. I have added tests for the two cases that are affected. Previously, case 2 was failing: container did not have a previous termination state set, so their phase would be calculated as Pending due to the waiting containers with no previous stopped.",
        "createdAt" : "2021-06-14T23:09:51Z",
        "updatedAt" : "2021-06-14T23:09:51Z",
        "lastEditedBy" : "31a2ac00-6c67-4307-a4bc-bfd13f41ef27",
        "tags" : [
        ]
      }
    ],
    "commit" : "9469756b6cb6470f333cab15ef49464517e02290",
    "line" : 103,
    "diffHunk" : "@@ -1,1 +2399,2403 @@\t\t\tdefer testKubelet.Cleanup()\n\t\t\tkl := testKubelet.kubelet\n\t\t\tcontainerStatuses := kl.convertToAPIContainerStatuses(\n\t\t\t\ttest.pod,\n\t\t\t\ttest.currentStatus,"
  },
  {
    "id" : "6c34a740-025c-4ad9-b918-ffc7c41e64d8",
    "prId" : 102568,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/102568#pullrequestreview-677467863",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f5f19b60-0626-449d-997f-7be4d2f29544",
        "parentId" : null,
        "authorId" : "31a2ac00-6c67-4307-a4bc-bfd13f41ef27",
        "body" : "I could copy-paste the test cases for RestartAlways for the RestartOnFailure cases if someone thinks there's any value... put this comment here as an explanation for why I didn't.",
        "createdAt" : "2021-06-03T20:28:42Z",
        "updatedAt" : "2021-06-03T20:28:42Z",
        "lastEditedBy" : "31a2ac00-6c67-4307-a4bc-bfd13f41ef27",
        "tags" : [
        ]
      },
      {
        "id" : "a0fbbaa4-6de0-459d-ad06-6dd941a1e962",
        "parentId" : "f5f19b60-0626-449d-997f-7be4d2f29544",
        "authorId" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "body" : "I'm fine with that.",
        "createdAt" : "2021-06-07T14:14:57Z",
        "updatedAt" : "2021-06-07T14:14:57Z",
        "lastEditedBy" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "tags" : [
        ]
      }
    ],
    "commit" : "dfd67c7d79eb2ed61b0101300a27202e1c6b51e2",
    "line" : 246,
    "diffHunk" : "@@ -1,1 +2305,2309 @@// No special init-specific logic for this, see RestartAlways case\n// func TestPodPhaseWithRestartOnFailureInitContainers(t *testing.T) {\n// }\n\nfunc TestGetExec(t *testing.T) {"
  },
  {
    "id" : "07ca3af6-5e49-468b-affb-7c96c42fb7e1",
    "prId" : 97979,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/97979#pullrequestreview-570887042",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "82ff9b75-8fb9-494a-a1c3-002520a21938",
        "parentId" : null,
        "authorId" : "31a2ac00-6c67-4307-a4bc-bfd13f41ef27",
        "body" : "Great tests \\o/",
        "createdAt" : "2021-01-19T00:50:21Z",
        "updatedAt" : "2021-03-04T20:46:48Z",
        "lastEditedBy" : "31a2ac00-6c67-4307-a4bc-bfd13f41ef27",
        "tags" : [
        ]
      },
      {
        "id" : "4f1180a5-23a9-4abb-ad14-4e4eeab9665e",
        "parentId" : "82ff9b75-8fb9-494a-a1c3-002520a21938",
        "authorId" : "224e1088-78fe-4bdd-99d1-31be3e464996",
        "body" : "+1 great coverage",
        "createdAt" : "2021-01-19T03:47:50Z",
        "updatedAt" : "2021-03-04T20:46:48Z",
        "lastEditedBy" : "224e1088-78fe-4bdd-99d1-31be3e464996",
        "tags" : [
        ]
      }
    ],
    "commit" : "5fd1651fc1280e7a8feb74f3bf551dfba50a5c63",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +2548,2552 @@}\n\nfunc TestGenerateAPIPodStatusPodIPs(t *testing.T) {\n\ttestcases := []struct {\n\t\tname      string"
  },
  {
    "id" : "3b71a6ec-3e4f-43ca-b4b0-ae96937a193f",
    "prId" : 90216,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/90216#pullrequestreview-602781321",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "63125a4a-630d-46bb-86ad-d64d256f0908",
        "parentId" : null,
        "authorId" : "31a2ac00-6c67-4307-a4bc-bfd13f41ef27",
        "body" : "Would increasing max `i` make it more likely we hit the race (and more likely this test ensures the right behaviour)?",
        "createdAt" : "2021-01-19T01:21:58Z",
        "updatedAt" : "2021-03-09T09:14:35Z",
        "lastEditedBy" : "31a2ac00-6c67-4307-a4bc-bfd13f41ef27",
        "tags" : [
        ]
      },
      {
        "id" : "930a6e6f-2429-4d60-b31d-d4e4a49e48d7",
        "parentId" : "63125a4a-630d-46bb-86ad-d64d256f0908",
        "authorId" : "c5277080-6605-4c27-a06c-4fab1d1902cc",
        "body" : "My understanding is that the Golang race detector uses pure happens-before detection. As there are no synchronisation events in the tested function (no locks, no channels, ...) each routine should have its own independent vector clock increased independently. As both will attempt to write to the impacted area of memory (`kubecontainer.PodStatus.ContainerStatuses`), I believe the race detector will catch the data race consistently. \r\n\r\nI've tried to reproduce locally by reverting the fix and running `go test ./pkg/kubelet/ -race -run TestConvertToAPIContainerStatusesDataRace` 100 times and it seems to catch the race every time.\r\n\r\nNot an expert on the subject, happy to change it or discuss further if you'd like ! ðŸ™‚  \r\n",
        "createdAt" : "2021-01-19T09:52:25Z",
        "updatedAt" : "2021-03-09T09:14:35Z",
        "lastEditedBy" : "c5277080-6605-4c27-a06c-4fab1d1902cc",
        "tags" : [
        ]
      },
      {
        "id" : "3e6dc585-5ea4-4f0b-88d8-7a957c2d5ea9",
        "parentId" : "63125a4a-630d-46bb-86ad-d64d256f0908",
        "authorId" : "154a8533-a24d-4af9-81fb-0e2db0a9acf3",
        "body" : "This explanation matches my (admittedly limited) knowledge and is worth to be distilled in a comment right before the `for` loop because is most likely what any reader in the future is going to wonder. Another option is to just add a link to this github comment.",
        "createdAt" : "2021-03-03T11:16:02Z",
        "updatedAt" : "2021-03-09T09:14:35Z",
        "lastEditedBy" : "154a8533-a24d-4af9-81fb-0e2db0a9acf3",
        "tags" : [
        ]
      }
    ],
    "commit" : "bb3fe633b471a28eb3ea437a128bd730a118427f",
    "line" : 36,
    "diffHunk" : "@@ -1,1 +3246,3250 @@\t// should have its own vector clock increased independently. Golang race detector uses pure happens-before\n\t// detection, so would catch a race condition consistently, despite only spawning 2 goroutines\n\tfor i := 0; i < 2; i++ {\n\t\tgo func() {\n\t\t\tkl.convertToAPIContainerStatuses(pod, criStatus, []v1.ContainerStatus{}, []v1.Container{}, false, false)"
  },
  {
    "id" : "2d6a5c9e-4a47-4b28-9a29-db2cf5e7f166",
    "prId" : 50646,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/50646#pullrequestreview-57054076",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "10533e69-0fc1-453d-97e2-0f90ba8d2edb",
        "parentId" : null,
        "authorId" : "bb4cf218-381a-40ad-ac0c-0c2c66685cd4",
        "body" : "No need to this test? It's already tested in above?",
        "createdAt" : "2017-08-17T20:50:10Z",
        "updatedAt" : "2017-08-17T20:53:53Z",
        "lastEditedBy" : "bb4cf218-381a-40ad-ac0c-0c2c66685cd4",
        "tags" : [
        ]
      },
      {
        "id" : "76fd64e7-aa70-4896-8f5f-05b18ae49dd7",
        "parentId" : "10533e69-0fc1-453d-97e2-0f90ba8d2edb",
        "authorId" : "9871391c-3aef-493b-a8b7-9e1747c2cd85",
        "body" : "tests different file path just to be exhaustive",
        "createdAt" : "2017-08-17T21:00:25Z",
        "updatedAt" : "2017-08-17T21:00:30Z",
        "lastEditedBy" : "9871391c-3aef-493b-a8b7-9e1747c2cd85",
        "tags" : [
        ]
      }
    ],
    "commit" : "1e7c0a4b0c15c1fd1dbdccd587da42eb587f47a9",
    "line" : 31,
    "diffHunk" : "@@ -1,1 +215,219 @@\t\t\t\"hosts_test_file2\",\n\t\t\t[]v1.HostAlias{},\n\t\t\t`# another hosts file for testing.\n127.0.0.1\tlocalhost\n::1\tlocalhost ip6-localhost ip6-loopback"
  },
  {
    "id" : "108b87cd-ad9c-4a4b-a302-0ae83003e78c",
    "prId" : 50646,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/50646#pullrequestreview-57054076",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "120612e6-c938-4f5b-9b26-52904756fdae",
        "parentId" : null,
        "authorId" : "bb4cf218-381a-40ad-ac0c-0c2c66685cd4",
        "body" : "This test seems to be only testing `nodeHostsFileContent()` ?\r\nAny test to verify that `hostNetwork=true` hostAlias ?",
        "createdAt" : "2017-08-17T20:51:26Z",
        "updatedAt" : "2017-08-17T20:53:53Z",
        "lastEditedBy" : "bb4cf218-381a-40ad-ac0c-0c2c66685cd4",
        "tags" : [
        ]
      },
      {
        "id" : "f3324a61-eb07-4846-ac76-02cc7cf6720c",
        "parentId" : "120612e6-c938-4f5b-9b26-52904756fdae",
        "authorId" : "9871391c-3aef-493b-a8b7-9e1747c2cd85",
        "body" : "in `ensureHostsFile`, `nodeHostsFileContent` is only called when `hostNetwork=true`. so this is already testing the case.",
        "createdAt" : "2017-08-17T20:59:58Z",
        "updatedAt" : "2017-08-17T21:00:30Z",
        "lastEditedBy" : "9871391c-3aef-493b-a8b7-9e1747c2cd85",
        "tags" : [
        ]
      }
    ],
    "commit" : "1e7c0a4b0c15c1fd1dbdccd587da42eb587f47a9",
    "line" : 2,
    "diffHunk" : "@@ -1,1 +183,187 @@}\n\nfunc TestNodeHostsFileContent(t *testing.T) {\n\ttestCases := []struct {\n\t\thostsFileName            string"
  },
  {
    "id" : "8f231572-94fe-4054-ad4d-90aa12f5709b",
    "prId" : 45148,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/45148#pullrequestreview-35538727",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "192487dc-8867-4d25-b74b-a1dc88c6ad3b",
        "parentId" : null,
        "authorId" : "9871391c-3aef-493b-a8b7-9e1747c2cd85",
        "body" : "should we add validation that there are not duplicate hostnames in case someone adds:\r\n\r\n```golang\r\n[]v1.HostAlias{\r\n\t{IP: \"123.45.67.89\", Hostnames: []string{\"foo\", \"bar\"}},\r\n\t{IP: \"456.78.90.123\", Hostnames: []string{\"foo\", \"bar\"}},\r\n}\r\n```\r\n\r\nwhich results in\r\n\r\n```\r\n123.45.67.89\tfoo\r\n123.45.67.89\tbar\r\n456.78.90.123\tfoo\r\n456.78.90.123\tbar\r\n```",
        "createdAt" : "2017-04-29T18:40:07Z",
        "updatedAt" : "2017-04-29T18:40:19Z",
        "lastEditedBy" : "9871391c-3aef-493b-a8b7-9e1747c2cd85",
        "tags" : [
        ]
      },
      {
        "id" : "5ede27c6-85fc-4b6f-a4db-6b3cfd8acec7",
        "parentId" : "192487dc-8867-4d25-b74b-a1dc88c6ad3b",
        "authorId" : "0cb25f61-407b-45d9-abc1-c6ab269734ad",
        "body" : "And shouldn't we validate for proper IPv4 IPs? :-)",
        "createdAt" : "2017-04-29T20:12:59Z",
        "updatedAt" : "2017-04-29T20:12:59Z",
        "lastEditedBy" : "0cb25f61-407b-45d9-abc1-c6ab269734ad",
        "tags" : [
        ]
      },
      {
        "id" : "afd2d317-6ddf-47f7-8162-d8b0ea64c38a",
        "parentId" : "192487dc-8867-4d25-b74b-a1dc88c6ad3b",
        "authorId" : "9871391c-3aef-493b-a8b7-9e1747c2cd85",
        "body" : "https://github.com/kubernetes/kubernetes/commit/78d66626dee5450f2fe1f4a4d444205056005627",
        "createdAt" : "2017-04-29T21:25:45Z",
        "updatedAt" : "2017-04-29T21:25:45Z",
        "lastEditedBy" : "9871391c-3aef-493b-a8b7-9e1747c2cd85",
        "tags" : [
        ]
      },
      {
        "id" : "152bdac2-2359-4cb8-b299-796dba7f3593",
        "parentId" : "192487dc-8867-4d25-b74b-a1dc88c6ad3b",
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "I think dups is fine - it's your own fault.",
        "createdAt" : "2017-05-01T04:35:47Z",
        "updatedAt" : "2017-05-01T04:35:53Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      }
    ],
    "commit" : "407fe8b356f951a9e7fb3805faed3f9d899c5d6a",
    "line" : 68,
    "diffHunk" : "@@ -1,1 +194,198 @@456.78.90.123\tpark\n456.78.90.123\tdoo\n456.78.90.123\tboo\n`,\n\t\t},"
  },
  {
    "id" : "5545c2d4-e56a-48b2-8a37-99740ebf9367",
    "prId" : 36245,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/36245#pullrequestreview-13551432",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7cf82750-1660-41d6-85d2-0e1648097c0c",
        "parentId" : null,
        "authorId" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "body" : "nit, since `EnvFrom` is processed before `Env`, it makes tests of this functionality much more readable to me if `EnvFrom` appears before `Env`.",
        "createdAt" : "2016-12-19T13:37:51Z",
        "updatedAt" : "2017-01-03T16:45:52Z",
        "lastEditedBy" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "tags" : [
        ]
      }
    ],
    "commit" : "94866b3beee16e9db416395be9e3b27b81da2902",
    "line" : null,
    "diffHunk" : "@@ -1,1 +621,625 @@\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tEnv: []v1.EnvVar{\n\t\t\t\t\t{\n\t\t\t\t\t\tName:  \"TEST_LITERAL\","
  }
]