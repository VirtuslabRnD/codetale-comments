[
  {
    "id" : "2d5aa119-d5d7-4739-871f-62c48f802da4",
    "prId" : 88568,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/88568#pullrequestreview-365373958",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5e65ea01-7609-4f8b-93d4-0b32ccdd2a9d",
        "parentId" : null,
        "authorId" : "d7870cae-47b0-4c8e-8527-be8fc4be86de",
        "body" : "Just to confirm... we want to remove the entire `prometheus_resource_metrics.go` file in 1.20?",
        "createdAt" : "2020-02-26T13:43:45Z",
        "updatedAt" : "2020-02-26T13:47:11Z",
        "lastEditedBy" : "d7870cae-47b0-4c8e-8527-be8fc4be86de",
        "tags" : [
        ]
      },
      {
        "id" : "188ed210-acb1-41b7-ad67-d458da309d7e",
        "parentId" : "5e65ea01-7609-4f8b-93d4-0b32ccdd2a9d",
        "authorId" : "ae15cfb8-5436-4398-94e0-d443e413b257",
        "body" : "100% right. Please see comments above\r\n> These metrics have been adapted to new endpoint `/metrics/resource` as well as new `Desc`s.",
        "createdAt" : "2020-02-27T01:57:39Z",
        "updatedAt" : "2020-02-27T01:58:18Z",
        "lastEditedBy" : "ae15cfb8-5436-4398-94e0-d443e413b257",
        "tags" : [
        ]
      },
      {
        "id" : "6787c9f3-1c7b-4ef5-aafa-20b398153a24",
        "parentId" : "5e65ea01-7609-4f8b-93d4-0b32ccdd2a9d",
        "authorId" : "ae15cfb8-5436-4398-94e0-d443e413b257",
        "body" : "And these metrics have almost a copy at [here](https://github.com/kubernetes/kubernetes/blob/master/pkg/kubelet/metrics/collectors/resource_metrics.go).",
        "createdAt" : "2020-02-27T02:15:20Z",
        "updatedAt" : "2020-02-27T02:15:21Z",
        "lastEditedBy" : "ae15cfb8-5436-4398-94e0-d443e413b257",
        "tags" : [
        ]
      }
    ],
    "commit" : "7b7c73bf8754f2d9c7c3bfa7f3a196fdb19e74f1",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +28,32 @@// These metrics have been adapted to new endpoint `/metrics/resource` as well as new `Desc`s.\n// In general, we don't need to maintain these deprecated metrics any more.\n// TODO(RainbowMango): Remove this file in release 1.20.0+.\n\nvar ("
  },
  {
    "id" : "6bc95e09-69ef-47e0-bc63-887338c2805d",
    "prId" : 73946,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/73946#pullrequestreview-208720319",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7ac5c5d7-44d5-45c4-9de2-d9034b26b6a9",
        "parentId" : null,
        "authorId" : "3a4b4830-dc71-4d7e-a7db-de2453284945",
        "body" : "add a note for posterity about not using the normal collectors due to leak issues/efficiency/etc.",
        "createdAt" : "2019-02-15T22:49:12Z",
        "updatedAt" : "2019-03-07T23:39:51Z",
        "lastEditedBy" : "3a4b4830-dc71-4d7e-a7db-de2453284945",
        "tags" : [
        ]
      },
      {
        "id" : "77dea806-67a4-4151-836a-599b881b81a3",
        "parentId" : "7ac5c5d7-44d5-45c4-9de2-d9034b26b6a9",
        "authorId" : "d2b16581-e7e9-48b8-9f76-6f6bcb9ec300",
        "body" : "I'm not actually aware of what you are referencing.  I'm just following the design of our other prometheus endpoints in cAdvisor or the kubelet.  Would you mind expounding on those, and I can include them?",
        "createdAt" : "2019-02-19T21:29:24Z",
        "updatedAt" : "2019-03-07T23:39:51Z",
        "lastEditedBy" : "d2b16581-e7e9-48b8-9f76-6f6bcb9ec300",
        "tags" : [
        ]
      },
      {
        "id" : "04f53115-8274-4013-9b33-413b422a42a0",
        "parentId" : "7ac5c5d7-44d5-45c4-9de2-d9034b26b6a9",
        "authorId" : "3a4b4830-dc71-4d7e-a7db-de2453284945",
        "body" : "ah, there's a reason we don't use normal prometheus collectors, which is that with pods and containers frequently starting and stopping, it's easy to \"leak\" metric collectors for those, which leads to all the expected issues with a reference leak.  Instead, we use this pattern, since at an given point in time we can easily answer the question \"what are all the metrics available\".",
        "createdAt" : "2019-02-27T00:46:22Z",
        "updatedAt" : "2019-03-07T23:39:51Z",
        "lastEditedBy" : "3a4b4830-dc71-4d7e-a7db-de2453284945",
        "tags" : [
        ]
      },
      {
        "id" : "b7db30d7-084a-4127-9d08-9a9c4348dacf",
        "parentId" : "7ac5c5d7-44d5-45c4-9de2-d9034b26b6a9",
        "authorId" : "d2b16581-e7e9-48b8-9f76-6f6bcb9ec300",
        "body" : "added",
        "createdAt" : "2019-02-27T19:13:32Z",
        "updatedAt" : "2019-03-07T23:39:51Z",
        "lastEditedBy" : "d2b16581-e7e9-48b8-9f76-6f6bcb9ec300",
        "tags" : [
        ]
      },
      {
        "id" : "69119432-1471-49bf-b319-c1a906ae4f10",
        "parentId" : "7ac5c5d7-44d5-45c4-9de2-d9034b26b6a9",
        "authorId" : "d2b16581-e7e9-48b8-9f76-6f6bcb9ec300",
        "body" : "added a comment",
        "createdAt" : "2019-02-27T19:28:26Z",
        "updatedAt" : "2019-03-07T23:39:51Z",
        "lastEditedBy" : "d2b16581-e7e9-48b8-9f76-6f6bcb9ec300",
        "tags" : [
        ]
      }
    ],
    "commit" : "6051664c0fb0eb78a84cea8bf5a1e1e4584de50e",
    "line" : 91,
    "diffHunk" : "@@ -1,1 +89,93 @@// leak metric collectors for containers or pods that no longer exist.  Instead, implement\n// prometheus.Collector in a way that only collects metrics for active containers.\nfunc (rc *resourceMetricCollector) Collect(ch chan<- prometheus.Metric) {\n\trc.errors.Set(0)\n\tdefer rc.errors.Collect(ch)"
  },
  {
    "id" : "fa735799-d034-4f61-b83d-68cd956a7e6a",
    "prId" : 73946,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/73946#pullrequestreview-211440356",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ee2057f1-dc49-44ae-8b05-0aa972d21ebc",
        "parentId" : null,
        "authorId" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "body" : "prefer: `var _ prometheus.Collector = &resourceMetricCollector{}`",
        "createdAt" : "2019-03-05T23:53:52Z",
        "updatedAt" : "2019-03-07T23:39:51Z",
        "lastEditedBy" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "tags" : [
        ]
      },
      {
        "id" : "3dc5be4a-0609-4889-b89e-422248a2a56e",
        "parentId" : "ee2057f1-dc49-44ae-8b05-0aa972d21ebc",
        "authorId" : "d2b16581-e7e9-48b8-9f76-6f6bcb9ec300",
        "body" : "done",
        "createdAt" : "2019-03-06T19:58:41Z",
        "updatedAt" : "2019-03-07T23:39:51Z",
        "lastEditedBy" : "d2b16581-e7e9-48b8-9f76-6f6bcb9ec300",
        "tags" : [
        ]
      }
    ],
    "commit" : "6051664c0fb0eb78a84cea8bf5a1e1e4584de50e",
    "line" : 76,
    "diffHunk" : "@@ -1,1 +74,78 @@var _ prometheus.Collector = &resourceMetricCollector{}\n\n// Describe implements prometheus.Collector\nfunc (rc *resourceMetricCollector) Describe(ch chan<- *prometheus.Desc) {\n\trc.errors.Describe(ch)"
  },
  {
    "id" : "cfcf8632-13ed-4b85-809f-b226d55a5a3c",
    "prId" : 73946,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/73946#pullrequestreview-212062797",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "56d41e8c-fcf8-44c5-85ef-0efa71e33463",
        "parentId" : null,
        "authorId" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "body" : "I hate to be that guy, but this could use a unit test...",
        "createdAt" : "2019-03-05T23:57:42Z",
        "updatedAt" : "2019-03-07T23:39:51Z",
        "lastEditedBy" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "tags" : [
        ]
      },
      {
        "id" : "277363ea-eaa7-429a-8cf3-738feb2b3623",
        "parentId" : "56d41e8c-fcf8-44c5-85ef-0efa71e33463",
        "authorId" : "d2b16581-e7e9-48b8-9f76-6f6bcb9ec300",
        "body" : "done",
        "createdAt" : "2019-03-07T22:48:00Z",
        "updatedAt" : "2019-03-07T23:39:51Z",
        "lastEditedBy" : "d2b16581-e7e9-48b8-9f76-6f6bcb9ec300",
        "tags" : [
        ]
      }
    ],
    "commit" : "6051664c0fb0eb78a84cea8bf5a1e1e4584de50e",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +15,19 @@*/\n\npackage stats\n\nimport ("
  }
]