[
  {
    "id" : "acda5e19-68fe-4163-91ca-16ee88cac09d",
    "prId" : 64006,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/64006#pullrequestreview-121595527",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fa578d22-23d6-4b73-b93a-2c8155dfc086",
        "parentId" : null,
        "authorId" : "98677041-8dd3-472f-8583-94ee9e37145c",
        "body" : "should probably comment the baseurl structure element on line 74 above so people know it will/may be updated after start() otherwise someone might rval it early...",
        "createdAt" : "2018-05-18T16:12:11Z",
        "updatedAt" : "2018-05-31T22:26:42Z",
        "lastEditedBy" : "98677041-8dd3-472f-8583-94ee9e37145c",
        "tags" : [
        ]
      },
      {
        "id" : "db5e4329-2b06-4347-a74b-ca39842db254",
        "parentId" : "fa578d22-23d6-4b73-b93a-2c8155dfc086",
        "authorId" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "body" : "Will do.",
        "createdAt" : "2018-05-18T23:14:11Z",
        "updatedAt" : "2018-05-31T22:26:42Z",
        "lastEditedBy" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "tags" : [
        ]
      },
      {
        "id" : "3e2df8b8-315b-49ff-83db-253f0d135e42",
        "parentId" : "fa578d22-23d6-4b73-b93a-2c8155dfc086",
        "authorId" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "body" : "Done.",
        "createdAt" : "2018-05-18T23:17:30Z",
        "updatedAt" : "2018-05-31T22:26:42Z",
        "lastEditedBy" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "tags" : [
        ]
      }
    ],
    "commit" : "746c32db4cf47a0245ef1c1aa053df49fcf51c13",
    "line" : 25,
    "diffHunk" : "@@ -1,1 +241,245 @@\t}\n\t// Use the actual address as baseURL host. This handles the \"0\" port case.\n\ts.config.BaseURL.Host = listener.Addr().String()\n\tif s.config.TLSConfig != nil {\n\t\treturn s.server.ServeTLS(listener, \"\", \"\") // Use certs from TLSConfig."
  },
  {
    "id" : "b85a2a94-0cd8-46fe-a93f-faafed8d266d",
    "prId" : 64006,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/64006#pullrequestreview-125084855",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8cbff971-09ac-4965-8cbd-b790d7dedd5d",
        "parentId" : null,
        "authorId" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "body" : "As mentioned elsewhere, can we provide a \"unix\" option?",
        "createdAt" : "2018-06-01T01:23:25Z",
        "updatedAt" : "2018-06-01T01:24:56Z",
        "lastEditedBy" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "tags" : [
        ]
      },
      {
        "id" : "ecb512ce-489b-4748-8339-2cf2721cff4e",
        "parentId" : "8cbff971-09ac-4965-8cbd-b790d7dedd5d",
        "authorId" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "body" : "Ditto.",
        "createdAt" : "2018-06-01T08:28:52Z",
        "updatedAt" : "2018-06-01T08:28:52Z",
        "lastEditedBy" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "tags" : [
        ]
      }
    ],
    "commit" : "746c32db4cf47a0245ef1c1aa053df49fcf51c13",
    "line" : 20,
    "diffHunk" : "@@ -1,1 +236,240 @@\t}\n\n\tlistener, err := net.Listen(\"tcp\", s.config.Addr)\n\tif err != nil {\n\t\treturn err"
  },
  {
    "id" : "73996b02-c8f2-450d-9281-251b3480f1b5",
    "prId" : 35330,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/35330#pullrequestreview-5767429",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d942ed07-bdf6-45c7-ab6d-37d14dbd3a09",
        "parentId" : null,
        "authorId" : "2fa5a4c6-e0a7-4dbe-a80e-7770a5dc92a1",
        "body" : "Why does `GetAttach` have the `tty` argument?\nI don't get how the runtime can figure out how to set that, since all the runtime has to go on is the `AttachRequest` anyways, right?\n",
        "createdAt" : "2016-10-25T22:05:37Z",
        "updatedAt" : "2016-10-26T21:40:38Z",
        "lastEditedBy" : "2fa5a4c6-e0a7-4dbe-a80e-7770a5dc92a1",
        "tags" : [
        ]
      },
      {
        "id" : "6b740f6c-6a38-4363-af6a-af731550368f",
        "parentId" : "d942ed07-bdf6-45c7-ab6d-37d14dbd3a09",
        "authorId" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "body" : "The tty argument is there because the current implementation needs it to determine which streams to setup. It needs to be provided as an additional parameter from the runtime shim, since it's not provided in the request. It's the runtime shim's responsibility to provide it based on the ContainerConfig. There's some discussion on it [here](https://docs.google.com/document/d/1OE_QoInPlVCK9rMAx9aybRmgFiVjHpJCHI9LrfdNM_s/edit?disco=AAAAAysm47s).\n",
        "createdAt" : "2016-10-25T22:15:45Z",
        "updatedAt" : "2016-10-26T21:40:38Z",
        "lastEditedBy" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "tags" : [
        ]
      },
      {
        "id" : "4727fc28-7aaa-4b17-91b2-075a5f3a8bc7",
        "parentId" : "d942ed07-bdf6-45c7-ab6d-37d14dbd3a09",
        "authorId" : "2fa5a4c6-e0a7-4dbe-a80e-7770a5dc92a1",
        "body" : "This seems like something we might want to revisit later because the kubelet should also know the ContainerConfig, so it might as well be part of the request\n",
        "createdAt" : "2016-10-25T23:37:08Z",
        "updatedAt" : "2016-10-26T21:40:38Z",
        "lastEditedBy" : "2fa5a4c6-e0a7-4dbe-a80e-7770a5dc92a1",
        "tags" : [
        ]
      },
      {
        "id" : "66faa687-26cc-4604-bbf2-89fcd4250967",
        "parentId" : "d942ed07-bdf6-45c7-ab6d-37d14dbd3a09",
        "authorId" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "body" : "Yeah, makes sense. Let's deal with it in a follow up though.\n",
        "createdAt" : "2016-10-25T23:56:17Z",
        "updatedAt" : "2016-10-26T21:40:38Z",
        "lastEditedBy" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "tags" : [
        ]
      }
    ],
    "commit" : "4ee4128270b65d680219af2e4c98ee1ac1da70fe",
    "line" : 45,
    "diffHunk" : "@@ -1,1 +43,47 @@\t// Requests must not be nil. Responses may be nil iff an error is returned.\n\tGetExec(*runtimeapi.ExecRequest) (*runtimeapi.ExecResponse, error)\n\tGetAttach(req *runtimeapi.AttachRequest, tty bool) (*runtimeapi.AttachResponse, error)\n\tGetPortForward(*runtimeapi.PortForwardRequest) (*runtimeapi.PortForwardResponse, error)\n"
  },
  {
    "id" : "b7830dc0-0f91-4a1e-85e6-6a0ffc64f217",
    "prId" : 35330,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/35330#pullrequestreview-5759862",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "486ac8c6-d1c8-4d8e-8701-c61f109676da",
        "parentId" : null,
        "authorId" : "2fa5a4c6-e0a7-4dbe-a80e-7770a5dc92a1",
        "body" : "Should each of these take a `ctx` as well?\n",
        "createdAt" : "2016-10-25T22:06:56Z",
        "updatedAt" : "2016-10-26T21:40:38Z",
        "lastEditedBy" : "2fa5a4c6-e0a7-4dbe-a80e-7770a5dc92a1",
        "tags" : [
        ]
      },
      {
        "id" : "23c9a29e-8e59-4802-89dd-72c369b73326",
        "parentId" : "486ac8c6-d1c8-4d8e-8701-c61f109676da",
        "authorId" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "body" : "What would it be used for? This interface is directly implemented in this library, so the arguments were mostly determined based on what the implementation needed.\n",
        "createdAt" : "2016-10-25T22:16:58Z",
        "updatedAt" : "2016-10-26T21:40:38Z",
        "lastEditedBy" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "tags" : [
        ]
      },
      {
        "id" : "d09f2bad-ceae-4382-89b7-b8422ca772ed",
        "parentId" : "486ac8c6-d1c8-4d8e-8701-c61f109676da",
        "authorId" : "2fa5a4c6-e0a7-4dbe-a80e-7770a5dc92a1",
        "body" : "Yeah, nvm, you're right.\n",
        "createdAt" : "2016-10-25T22:49:58Z",
        "updatedAt" : "2016-10-26T21:40:38Z",
        "lastEditedBy" : "2fa5a4c6-e0a7-4dbe-a80e-7770a5dc92a1",
        "tags" : [
        ]
      }
    ],
    "commit" : "4ee4128270b65d680219af2e4c98ee1ac1da70fe",
    "line" : 44,
    "diffHunk" : "@@ -1,1 +42,46 @@\t// Get the serving URL for the requests. Server must be started before these are called.\n\t// Requests must not be nil. Responses may be nil iff an error is returned.\n\tGetExec(*runtimeapi.ExecRequest) (*runtimeapi.ExecResponse, error)\n\tGetAttach(req *runtimeapi.AttachRequest, tty bool) (*runtimeapi.AttachResponse, error)\n\tGetPortForward(*runtimeapi.PortForwardRequest) (*runtimeapi.PortForwardResponse, error)"
  },
  {
    "id" : "eaea660c-b9e8-4a4c-a8e6-839d254359b3",
    "prId" : 35330,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/35330#pullrequestreview-5767977",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9223b0a3-9324-426e-8772-b8d71160f1c4",
        "parentId" : null,
        "authorId" : "2fa5a4c6-e0a7-4dbe-a80e-7770a5dc92a1",
        "body" : "Presumably this will be expected to be an address the user of the *let configures (e.g. `rktlet --stream-address=$x`), where that is an address reachable by the api server?\n\nDocs somewhere might help here.. maybe even a \"CRI runtime implementers guide\" that mentions that.\n",
        "createdAt" : "2016-10-25T22:46:51Z",
        "updatedAt" : "2016-10-26T21:40:38Z",
        "lastEditedBy" : "2fa5a4c6-e0a7-4dbe-a80e-7770a5dc92a1",
        "tags" : [
        ]
      },
      {
        "id" : "1cf8096d-ecaf-4ecf-aed2-21c4a2365ef7",
        "parentId" : "9223b0a3-9324-426e-8772-b8d71160f1c4",
        "authorId" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "body" : "Yes, it should be the host:port address the server listens on (I'll fix the comment). If the server is running in the CRI shim, it will probably be using host networking and look like <node host name>:<some port>. We should have an overrideable default port, similar to the kubelet/cadvisor ports.\n\nIf the server is running in a pod networking namespace, the address will need to be configured automatically. Most likely the runtime shim will pick a free port from some range and use the pod's IP as the hostname.\n\n> Docs somewhere might help here.. maybe even a \"CRI runtime implementers guide\" that mentions that.\n\nI'd like to hold off on writing docs until the dockershim implementation is done, as that process might uncover unexpected issues. Once that is done we can reevaluate whether it is sufficient for that to serve as an example implementation, or we need a more explicit walkthrough.\nOr were you just asking for better comments here?\n",
        "createdAt" : "2016-10-25T22:56:50Z",
        "updatedAt" : "2016-10-26T21:40:38Z",
        "lastEditedBy" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "tags" : [
        ]
      },
      {
        "id" : "36fe415a-df47-497e-a7bd-289bc1d8b09a",
        "parentId" : "9223b0a3-9324-426e-8772-b8d71160f1c4",
        "authorId" : "2fa5a4c6-e0a7-4dbe-a80e-7770a5dc92a1",
        "body" : "A better comment for now would help, though it's not too bad as is.\n",
        "createdAt" : "2016-10-25T23:36:06Z",
        "updatedAt" : "2016-10-26T21:40:38Z",
        "lastEditedBy" : "2fa5a4c6-e0a7-4dbe-a80e-7770a5dc92a1",
        "tags" : [
        ]
      },
      {
        "id" : "65fbfc70-0187-4326-b8c9-2f9b6154df82",
        "parentId" : "9223b0a3-9324-426e-8772-b8d71160f1c4",
        "authorId" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "body" : "Done.\n",
        "createdAt" : "2016-10-26T00:01:24Z",
        "updatedAt" : "2016-10-26T21:40:38Z",
        "lastEditedBy" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "tags" : [
        ]
      }
    ],
    "commit" : "4ee4128270b65d680219af2e4c98ee1ac1da70fe",
    "line" : null,
    "diffHunk" : "@@ -1,1 +66,70 @@type Config struct {\n\t// The host:port address the server will listen on.\n\tAddr string\n\n\t// How long to leave idle connections open for."
  },
  {
    "id" : "278afb84-f45b-4d34-999f-4b8c0525a08f",
    "prId" : 35330,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/35330#pullrequestreview-5774707",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bddd8d64-d4ce-47dc-ad46-31c389c56b77",
        "parentId" : null,
        "authorId" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "body" : "Would it be easier for the first version to keep the server running forever? dockershim would only need to create the server once. \n",
        "createdAt" : "2016-10-25T23:28:31Z",
        "updatedAt" : "2016-10-26T21:40:38Z",
        "lastEditedBy" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "tags" : [
        ]
      },
      {
        "id" : "f13d41ef-9e1f-4fbb-b970-f2e132a23447",
        "parentId" : "bddd8d64-d4ce-47dc-ad46-31c389c56b77",
        "authorId" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "body" : "That's what this implementation does. If `!stayUp` an \"unimplemented\" error is returned. The idea was to illustrate the eventual API, but if it would be less confusing I can remove that parameter.\n",
        "createdAt" : "2016-10-26T00:14:50Z",
        "updatedAt" : "2016-10-26T21:40:38Z",
        "lastEditedBy" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "tags" : [
        ]
      },
      {
        "id" : "888f92ee-8e69-4304-b569-f423bd0e9d34",
        "parentId" : "bddd8d64-d4ce-47dc-ad46-31c389c56b77",
        "authorId" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "body" : "Ah..I read it wrong. Sorry about it. \n",
        "createdAt" : "2016-10-26T01:26:12Z",
        "updatedAt" : "2016-10-26T21:40:38Z",
        "lastEditedBy" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "tags" : [
        ]
      }
    ],
    "commit" : "4ee4128270b65d680219af2e4c98ee1ac1da70fe",
    "line" : 51,
    "diffHunk" : "@@ -1,1 +49,53 @@\t// addr is the address to serve on (address:port) stayUp indicates whether the server should\n\t// listen until Stop() is called, or automatically stop after all expected connections are\n\t// closed. Calling Get{Exec,Attach,PortForward} increments the expected connection count.\n\t// Function does not return until the server is stopped.\n\tStart(stayUp bool) error"
  },
  {
    "id" : "53ba29fb-8ba4-4155-b120-6fa68349f376",
    "prId" : 35330,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/35330#pullrequestreview-5769371",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "08f16910-9d80-4e80-a99f-157c03850813",
        "parentId" : null,
        "authorId" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "body" : "nit: add a comment to the field.\n",
        "createdAt" : "2016-10-25T23:30:21Z",
        "updatedAt" : "2016-10-26T21:40:38Z",
        "lastEditedBy" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "tags" : [
        ]
      },
      {
        "id" : "3201247f-8c74-4ca5-80e5-ff24baf97b49",
        "parentId" : "08f16910-9d80-4e80-a99f-157c03850813",
        "authorId" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "body" : "Done.\n",
        "createdAt" : "2016-10-26T00:17:11Z",
        "updatedAt" : "2016-10-26T21:40:38Z",
        "lastEditedBy" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "tags" : [
        ]
      }
    ],
    "commit" : "4ee4128270b65d680219af2e4c98ee1ac1da70fe",
    "line" : null,
    "diffHunk" : "@@ -1,1 +76,80 @@\t// k8s.io/kubernetes/pkg/kubelet/server/remotecommand/constants.go for available protocols.\n\t// Only used for SPDY streaming.\n\tSupportedProtocols []string\n\n\t// The config for serving over TLS. If nil, TLS will not be used."
  },
  {
    "id" : "7bc0b68e-7991-4331-be05-734ff3b0e5ae",
    "prId" : 35330,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/35330#pullrequestreview-5778085",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "65f61108-e41a-439a-bfd5-2e44b24cb23a",
        "parentId" : null,
        "authorId" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "body" : "Why 4 hours? It seems pretty long.\n",
        "createdAt" : "2016-10-25T23:36:06Z",
        "updatedAt" : "2016-10-26T21:40:38Z",
        "lastEditedBy" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "tags" : [
        ]
      },
      {
        "id" : "d964c582-925f-407d-b376-06b5f27fc716",
        "parentId" : "65f61108-e41a-439a-bfd5-2e44b24cb23a",
        "authorId" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "body" : "It's the default used by Kubelet: https://github.com/kubernetes/kubernetes/blob/b23798d4b5841b3e5dacf0e7b7e91f00c74482fa/pkg/apis/componentconfig/v1alpha1/defaults.go#L304\n",
        "createdAt" : "2016-10-26T00:15:51Z",
        "updatedAt" : "2016-10-26T21:40:38Z",
        "lastEditedBy" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "tags" : [
        ]
      },
      {
        "id" : "65d3a569-4389-4c99-84c3-a4c2b13b1b53",
        "parentId" : "65f61108-e41a-439a-bfd5-2e44b24cb23a",
        "authorId" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "body" : "What's the point of having this default config without using it anywhere (besides the tests)? I think for the docker implementation, we still need to pass the `StreamIdleTimeout` from kubelet to DockerService for now. \n",
        "createdAt" : "2016-10-26T01:30:17Z",
        "updatedAt" : "2016-10-26T21:40:38Z",
        "lastEditedBy" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "tags" : [
        ]
      },
      {
        "id" : "7c8d3842-f16e-4fba-9958-2e1af90daa90",
        "parentId" : "65f61108-e41a-439a-bfd5-2e44b24cb23a",
        "authorId" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "body" : "A couple reasons. The CreationTimeout and SupportedProtocols are actually hardcoded in Kubernetes currently. This gives a way for CRI implementations to have some \"recommended defaults\" they can fall back on. It's optional for other implementations, but these will be the default in the docker shim.  We'll still pipe the idle timeout through from the flag, but I'll refactor the flag default to use this value.\n",
        "createdAt" : "2016-10-26T02:13:07Z",
        "updatedAt" : "2016-10-26T21:40:38Z",
        "lastEditedBy" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "tags" : [
        ]
      }
    ],
    "commit" : "4ee4128270b65d680219af2e4c98ee1ac1da70fe",
    "line" : 87,
    "diffHunk" : "@@ -1,1 +85,89 @@// some fields like Addr must still be provided.\nvar DefaultConfig = Config{\n\tStreamIdleTimeout:     4 * time.Hour,\n\tStreamCreationTimeout: remotecommand.DefaultStreamCreationTimeout,\n\tSupportedProtocols:    remotecommand.SupportedStreamingProtocols,"
  }
]