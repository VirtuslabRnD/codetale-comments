[
  {
    "id" : "286d0e0d-270a-4ab8-9483-47351d295889",
    "prId" : 84099,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/84099#pullrequestreview-304209812",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "99515676-7dcd-4213-b23a-a014bd3d44a8",
        "parentId" : null,
        "authorId" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "body" : "we should be able to remove the fakes as well, tests can use fake clientset to create a sharedinformerfactory.",
        "createdAt" : "2019-10-19T02:50:24Z",
        "updatedAt" : "2019-10-19T11:10:53Z",
        "lastEditedBy" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "tags" : [
        ]
      },
      {
        "id" : "0ab9e1bb-6adb-4420-811f-00bb7d64ea94",
        "parentId" : "99515676-7dcd-4213-b23a-a014bd3d44a8",
        "authorId" : "9829b6c0-e54c-401b-8d97-73e5aa4e83c1",
        "body" : "SG",
        "createdAt" : "2019-10-19T03:18:10Z",
        "updatedAt" : "2019-10-19T11:10:53Z",
        "lastEditedBy" : "9829b6c0-e54c-401b-8d97-73e5aa4e83c1",
        "tags" : [
        ]
      },
      {
        "id" : "e06f581b-c4d2-48d4-bf46-1b66a1974774",
        "parentId" : "99515676-7dcd-4213-b23a-a014bd3d44a8",
        "authorId" : "9829b6c0-e54c-401b-8d97-73e5aa4e83c1",
        "body" : "After some digging, I think we can't remove the `Fake.*Lister` since some of the test depends on them, ex:\r\n\r\n```go\r\n// FakePodLister implements PodLister on an []v1.Pods for test purposes.\r\ntype FakePodLister []*v1.Pod\r\n\r\n// List returns []*v1.Pod matching a query.\r\nfunc (f FakePodLister) List(s labels.Selector) (selected []*v1.Pod, err error) {\r\n\tfor _, pod := range f {\r\n\t\tif s.Matches(labels.Set(pod.Labels)) {\r\n\t\t\tselected = append(selected, pod)\r\n\t\t}\r\n\t}\r\n\treturn selected, nil\r\n}\r\n\r\n// FilteredList returns pods matching a pod filter and a label selector.\r\nfunc (f FakePodLister) FilteredList(podFilter algorithm.PodFilter, s labels.Selector) (selected []*v1.Pod, err error) {\r\n\tfor _, pod := range f {\r\n\t\tif podFilter(pod) && s.Matches(labels.Set(pod.Labels)) {\r\n\t\t\tselected = append(selected, pod)\r\n\t\t}\r\n\t}\r\n\treturn selected, nil\r\n}\r\n```\r\n",
        "createdAt" : "2019-10-19T09:12:06Z",
        "updatedAt" : "2019-10-19T11:10:53Z",
        "lastEditedBy" : "9829b6c0-e54c-401b-8d97-73e5aa4e83c1",
        "tags" : [
        ]
      },
      {
        "id" : "70edf8dd-7771-4c4f-a0f0-a8ccd0e2b3f2",
        "parentId" : "99515676-7dcd-4213-b23a-a014bd3d44a8",
        "authorId" : "9829b6c0-e54c-401b-8d97-73e5aa4e83c1",
        "body" : "However, I try to remove every `Fake.*Lister` which created with an empty array of objects.",
        "createdAt" : "2019-10-19T09:13:08Z",
        "updatedAt" : "2019-10-19T11:10:53Z",
        "lastEditedBy" : "9829b6c0-e54c-401b-8d97-73e5aa4e83c1",
        "tags" : [
        ]
      },
      {
        "id" : "bb64a0e9-bd66-4462-bcd9-65350f655856",
        "parentId" : "99515676-7dcd-4213-b23a-a014bd3d44a8",
        "authorId" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "body" : "I didn't mean all of them, just the ones related to this PR, is there a problem with removing the fake  ServiceLister, ControllerLister, ReplicaSetLister and PDBLister?",
        "createdAt" : "2019-10-19T10:41:18Z",
        "updatedAt" : "2019-10-19T11:10:53Z",
        "lastEditedBy" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "tags" : [
        ]
      },
      {
        "id" : "b0f64a78-def3-4127-9bc3-006c911cf549",
        "parentId" : "99515676-7dcd-4213-b23a-a014bd3d44a8",
        "authorId" : "9829b6c0-e54c-401b-8d97-73e5aa4e83c1",
        "body" : "Yes, we can't replace them with fake informer factory, because the tests use fake listers with an array of objects like this:\r\n\r\nhttps://github.com/kubernetes/kubernetes/blob/ff7a09928b2c0071c93936ca7157ddc7b004d9fe/pkg/scheduler/algorithm/priorities/selector_spreading_test.go#L341-L345\r\n\r\nThe only fake lister we could remove is the FakePDBLister, and please take a look at the lastest commit.",
        "createdAt" : "2019-10-19T10:57:16Z",
        "updatedAt" : "2019-10-19T11:10:53Z",
        "lastEditedBy" : "9829b6c0-e54c-401b-8d97-73e5aa4e83c1",
        "tags" : [
        ]
      },
      {
        "id" : "c22941fc-e191-469e-bd33-6c91a12e8944",
        "parentId" : "99515676-7dcd-4213-b23a-a014bd3d44a8",
        "authorId" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "body" : "Ok, sg",
        "createdAt" : "2019-10-19T11:49:27Z",
        "updatedAt" : "2019-10-19T11:49:27Z",
        "lastEditedBy" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "tags" : [
        ]
      }
    ],
    "commit" : "ce33fcc311fcd106330c80f3866c7d139381b7ea",
    "line" : 20,
    "diffHunk" : "@@ -1,1 +54,58 @@}\n\nvar _ corelisters.ServiceLister = &FakeServiceLister{}\n\n// FakeServiceLister implements ServiceLister on []v1.Service for test purposes."
  }
]