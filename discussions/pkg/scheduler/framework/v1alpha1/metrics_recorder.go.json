[
  {
    "id" : "dbd7cb42-0d5b-4137-aa22-f21f9e818a5d",
    "prId" : 84522,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/84522#pullrequestreview-315659015",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "23bd9520-dbb4-44cc-8955-6d9f6308140f",
        "parentId" : null,
        "authorId" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "body" : "[NewConfigFactory](https://github.com/kubernetes/kubernetes/blob/0968636760dae228581b7b515cf605fccd7e2969/pkg/scheduler/scheduler.go#L297) should accept the scheduler's main [```stopCh```](https://github.com/kubernetes/kubernetes/tree/master/pkg/scheduler#L260) as a parameter, which we should pass to NewFramework, and then pass it to the newMetricsRecorder. I don't think we need isStoppedCh. We can do this plumping in a separate PR that we merge before this one.",
        "createdAt" : "2019-11-11T18:35:29Z",
        "updatedAt" : "2019-11-12T18:00:36Z",
        "lastEditedBy" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "tags" : [
        ]
      },
      {
        "id" : "3b818cae-eec6-4e3a-818b-311c45c33d99",
        "parentId" : "23bd9520-dbb4-44cc-8955-6d9f6308140f",
        "authorId" : "a650878f-0c10-41c7-b0fc-033031305d77",
        "body" : "I agree it's cleaner to pass the stopCh but it requires quite a bit of plumbing. The goroutine should terminate once the scheduler main process is terminated, so maybe it's not important to pass the stopCh?\r\n\r\nThe `isStoppedCh` is required for test only. I can update the comment.",
        "createdAt" : "2019-11-11T18:56:42Z",
        "updatedAt" : "2019-11-12T18:00:36Z",
        "lastEditedBy" : "a650878f-0c10-41c7-b0fc-033031305d77",
        "tags" : [
        ]
      },
      {
        "id" : "3d7912e2-e7aa-4797-a3e5-b06874deec7a",
        "parentId" : "23bd9520-dbb4-44cc-8955-6d9f6308140f",
        "authorId" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "body" : "so stopCh is also for unit tests at the moment, right?",
        "createdAt" : "2019-11-11T19:57:09Z",
        "updatedAt" : "2019-11-12T18:00:36Z",
        "lastEditedBy" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "tags" : [
        ]
      },
      {
        "id" : "1c659830-166d-4fe3-90a4-b640994e8d8b",
        "parentId" : "23bd9520-dbb4-44cc-8955-6d9f6308140f",
        "authorId" : "a650878f-0c10-41c7-b0fc-033031305d77",
        "body" : "yes and I updated the comment.",
        "createdAt" : "2019-11-12T16:16:35Z",
        "updatedAt" : "2019-11-12T18:00:36Z",
        "lastEditedBy" : "a650878f-0c10-41c7-b0fc-033031305d77",
        "tags" : [
        ]
      }
    ],
    "commit" : "af6a8160c3e3f2831e421923c24d9ee388bc1040",
    "line" : 57,
    "diffHunk" : "@@ -1,1 +55,59 @@\t\tinterval:    interval,\n\t\tstopCh:      make(chan struct{}),\n\t\tisStoppedCh: make(chan struct{}),\n\t}\n\tgo recorder.run()"
  }
]