[
  {
    "id" : "9655d8c1-9a19-4863-b71d-d0123df8e685",
    "prId" : 91084,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/91084#pullrequestreview-412732646",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "687330cb-56f0-44f6-a5bc-24434f169d7a",
        "parentId" : null,
        "authorId" : "06cbf859-1cac-4be7-80e6-3b34dcff1812",
        "body" : "nit: add an arg (to tell required or preferred) to `schedutil.GetPodAntiAffinityTerms` so we don't need L142~L151.",
        "createdAt" : "2020-05-14T22:09:58Z",
        "updatedAt" : "2020-05-15T14:23:29Z",
        "lastEditedBy" : "06cbf859-1cac-4be7-80e6-3b34dcff1812",
        "tags" : [
        ]
      },
      {
        "id" : "41b5f908-edac-4306-817f-b84df0316f1e",
        "parentId" : "687330cb-56f0-44f6-a5bc-24434f169d7a",
        "authorId" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "body" : "we will need this logic somewhere, either here or inside the other function. Having it here will be shorter because there we will have to check the arg.",
        "createdAt" : "2020-05-15T00:44:03Z",
        "updatedAt" : "2020-05-15T14:23:29Z",
        "lastEditedBy" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "tags" : [
        ]
      },
      {
        "id" : "6ce51d5a-76f0-4e5c-9693-d8661df8e0bf",
        "parentId" : "687330cb-56f0-44f6-a5bc-24434f169d7a",
        "authorId" : "31fbce73-ef64-43f8-9faa-047479d8fc32",
        "body" : "Uhm... this inconsistency between preferred and required bothers me a bit. But we can get rid of it once we remove the dependency from queue to `GetPodAffinityTerms`.\r\n\r\nOther than that, it might be simpler to do:\r\n\r\n```\r\npodInfo := &PodInfo{Pod: pod}\r\n```\r\n\r\nand then fill up the rest from within the conditionals checking for `!= nil`",
        "createdAt" : "2020-05-15T14:47:11Z",
        "updatedAt" : "2020-05-15T14:47:42Z",
        "lastEditedBy" : "31fbce73-ef64-43f8-9faa-047479d8fc32",
        "tags" : [
        ]
      },
      {
        "id" : "9c2704d4-8f9a-417e-8009-b25aa9274594",
        "parentId" : "687330cb-56f0-44f6-a5bc-24434f169d7a",
        "authorId" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "body" : "```GetPodAffinityTerms``` and  ```GetPodAntiAffinityTerms``` doesn't just check for nil, but also encapsulates the now commented out logic to append the ```*RequiredDuringExecution``` terms. Let's merge this as is and move all those checks here as you suggest once the queue's dependency on ```GetPodAffinityTerms``` is removed.",
        "createdAt" : "2020-05-15T15:07:51Z",
        "updatedAt" : "2020-05-15T15:07:55Z",
        "lastEditedBy" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "tags" : [
        ]
      }
    ],
    "commit" : "087839daf7de4ca2a507022d962c90ec67da3d53",
    "line" : 71,
    "diffHunk" : "@@ -1,1 +155,159 @@\t\tRequiredAffinityTerms:      getAffinityTerms(pod, schedutil.GetPodAffinityTerms(pod.Spec.Affinity)),\n\t\tRequiredAntiAffinityTerms:  getAffinityTerms(pod, schedutil.GetPodAntiAffinityTerms(pod.Spec.Affinity)),\n\t\tPreferredAffinityTerms:     getWeightedAffinityTerms(pod, preferredAffinityTerms),\n\t\tPreferredAntiAffinityTerms: getWeightedAffinityTerms(pod, preferredAntiAffinityTerms),\n\t}"
  },
  {
    "id" : "a2e50929-0463-48a5-baa4-0a8bf191f2b6",
    "prId" : 91062,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/91062#pullrequestreview-411248097",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "03c0aa61-ab44-4f8d-af31-6a4add7b1ba3",
        "parentId" : null,
        "authorId" : "31fbce73-ef64-43f8-9faa-047479d8fc32",
        "body" : "it could still happen in malformed tests, which might lead to confusion.\r\nNot sure if it's worth the extra machinery to propagate the error. I'll leave it to you.",
        "createdAt" : "2020-05-13T19:30:24Z",
        "updatedAt" : "2020-05-14T14:31:05Z",
        "lastEditedBy" : "31fbce73-ef64-43f8-9faa-047479d8fc32",
        "tags" : [
        ]
      },
      {
        "id" : "8ddda610-2e4e-478c-a201-39365aacad39",
        "parentId" : "03c0aa61-ab44-4f8d-af31-6a4add7b1ba3",
        "authorId" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "body" : "propagating the error will be painful. I think I am fine with this.",
        "createdAt" : "2020-05-13T19:54:28Z",
        "updatedAt" : "2020-05-14T14:31:05Z",
        "lastEditedBy" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "tags" : [
        ]
      }
    ],
    "commit" : "5e0211c72de097b931296f5a08c6a94945548312",
    "line" : 49,
    "diffHunk" : "@@ -1,1 +103,107 @@\t\tif t == nil {\n\t\t\t// We get here if the label selector failed to process, this is not supposed\n\t\t\t// to happen because the pod should have been validated by the api server.\n\t\t\treturn nil\n\t\t}"
  },
  {
    "id" : "ac41b3f6-a7f2-4f15-b437-43524bb00af8",
    "prId" : 90319,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/90319#pullrequestreview-397468811",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cc40a4b2-3ebe-4e58-895e-d4b07d4b90ea",
        "parentId" : null,
        "authorId" : "31fbce73-ef64-43f8-9faa-047479d8fc32",
        "body" : "just to confirm... we are not using this type yet, right?",
        "createdAt" : "2020-04-21T14:51:32Z",
        "updatedAt" : "2020-04-22T01:45:32Z",
        "lastEditedBy" : "31fbce73-ef64-43f8-9faa-047479d8fc32",
        "tags" : [
        ]
      },
      {
        "id" : "59493a1f-3281-4de3-a155-8ab9830ac315",
        "parentId" : "cc40a4b2-3ebe-4e58-895e-d4b07d4b90ea",
        "authorId" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "body" : "We are, it is the type used by NodeInfo.Pods/NodeInfo.PodsWithAffinity. I will follow up with two PRs: 1) add the first pre-computed data (the pre-processed selectors), 2) change PodLister interface to PodInfoLister.",
        "createdAt" : "2020-04-21T16:25:41Z",
        "updatedAt" : "2020-04-22T01:45:32Z",
        "lastEditedBy" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "tags" : [
        ]
      }
    ],
    "commit" : "a15168288792daa23c993e551894229161dabdd0",
    "line" : 38,
    "diffHunk" : "@@ -1,1 +65,69 @@// accelerate processing. This information is typically immutable (e.g., pre-processed\n// inter-pod affinity selectors).\ntype PodInfo struct {\n\tPod *v1.Pod\n}"
  },
  {
    "id" : "ae82a8d7-1d02-41df-83be-4b3d2f0ef702",
    "prId" : 89222,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/89222#pullrequestreview-398198792",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4b52ef76-b48a-4f9a-9f79-9db04be76152",
        "parentId" : null,
        "authorId" : "31fbce73-ef64-43f8-9faa-047479d8fc32",
        "body" : "tests cases please. A couple is fine.",
        "createdAt" : "2020-04-22T13:37:37Z",
        "updatedAt" : "2020-04-22T17:09:06Z",
        "lastEditedBy" : "31fbce73-ef64-43f8-9faa-047479d8fc32",
        "tags" : [
        ]
      }
    ],
    "commit" : "d54822d1934496986d7b03865e4b1ed7b53b9467",
    "line" : 29,
    "diffHunk" : "@@ -1,1 +467,471 @@\n\tfor _, ic := range pod.Spec.InitContainers {\n\t\tresPtr.SetMaxResource(ic.Resources.Requests)\n\t\tnon0CPUReq, non0MemReq := schedutil.GetNonzeroRequests(&ic.Resources.Requests)\n\t\tif non0CPU < non0CPUReq {"
  }
]