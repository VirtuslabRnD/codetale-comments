[
  {
    "id" : "068e8de3-9fc1-4c84-95b3-54be3e08cd02",
    "prId" : 5554,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "de23b53d-d52c-41cd-a2e8-8c8abd10d439",
        "parentId" : null,
        "authorId" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "body" : "Why isn't this a more classic \"each update\" controller?  Unless I'm mistaken you only need to process updated namespaces (delete triggers a watch).  The sync can be above this level (invokes handleNext).  What am I missing?\n",
        "createdAt" : "2015-03-18T03:18:01Z",
        "updatedAt" : "2015-03-24T14:44:45Z",
        "lastEditedBy" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "tags" : [
        ]
      },
      {
        "id" : "33032dc1-a9b3-454d-9296-3a1d62384af4",
        "parentId" : "de23b53d-d52c-41cd-a2e8-8c8abd10d439",
        "authorId" : "6eca0ade-9879-4dd7-ad14-547e16f5c041",
        "body" : "I planned on switching to @lavalamp new controller framework when available so did not focus too much on making this complicated in the interim.\n",
        "createdAt" : "2015-03-18T17:02:28Z",
        "updatedAt" : "2015-03-24T14:44:45Z",
        "lastEditedBy" : "6eca0ade-9879-4dd7-ad14-547e16f5c041",
        "tags" : [
        ]
      },
      {
        "id" : "329d6a58-8b28-4809-8666-dab89276eada",
        "parentId" : "de23b53d-d52c-41cd-a2e8-8c8abd10d439",
        "authorId" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "body" : "That's fine - I just recently used the openshift one and it was easy enough I forgot it's slightly lagging upstream... :)\n\n----- Original Message -----\n\n> > -       store:      store,\n> > -   }\n> > -   // set the synchronization handler\n> > -   nm.syncHandler = nm.terminateNamespace\n> > -   return nm\n> >   +}\n> >   +\n> >   +// Run begins syncing at the specified period interval\n> >   +func (nm *NamespaceManager) Run(period time.Duration) {\n> > -   nm.syncTime = time.Tick(period)\n> > -   go util.Forever(func() { nm.synchronize() }, period)\n> >   +}\n> >   +\n> >   +// Iterate over the each namespace that is in terminating phase and\n> >   perform necessary clean-up\n> >   +func (nm *NamespaceManager) synchronize() {\n> > -   namespaceObjs := nm.store.List()\n> \n> I planned on switching to @lavalamp new controller framework when available\n> so did not focus too much on making this complicated in the interim.\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/GoogleCloudPlatform/kubernetes/pull/5554/files#r26683573\n",
        "createdAt" : "2015-03-18T21:07:16Z",
        "updatedAt" : "2015-03-24T14:44:45Z",
        "lastEditedBy" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "tags" : [
        ]
      }
    ],
    "commit" : "84c9709299c2928d758a028cbab0d513ba739c9d",
    "line" : 78,
    "diffHunk" : "@@ -1,1 +76,80 @@// Iterate over the each namespace that is in terminating phase and perform necessary clean-up\nfunc (nm *NamespaceManager) synchronize() {\n\tnamespaceObjs := nm.store.List()\n\twg := sync.WaitGroup{}\n\twg.Add(len(namespaceObjs))"
  }
]