[
  {
    "id" : "634208d6-50f6-4295-b1e7-6f7501a82ff2",
    "prId" : 58123,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/58123#pullrequestreview-89994677",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ef05f395-2171-4dc7-9051-7aff5186acab",
        "parentId" : null,
        "authorId" : "fa477146-9a47-4754-b38c-de8062e65e13",
        "body" : "You need to calculate the disables as well. Otherwise a default enabled plugin will remain enabled, but compatibility demands that it be disabled.",
        "createdAt" : "2018-01-17T12:42:40Z",
        "updatedAt" : "2018-01-19T05:21:42Z",
        "lastEditedBy" : "fa477146-9a47-4754-b38c-de8062e65e13",
        "tags" : [
        ]
      },
      {
        "id" : "d1375693-d833-4866-b9ac-4a78be76d7e8",
        "parentId" : "ef05f395-2171-4dc7-9051-7aff5186acab",
        "authorId" : "fa477146-9a47-4754-b38c-de8062e65e13",
        "body" : "> deads2k just now  Member\r\n> You need to calculate the disables as well. Otherwise a default enabled plugin will remain enabled, but compatibility demands that it be disabled.\r\n\r\nand add a test that validates that.  I glossed over it in my last review.",
        "createdAt" : "2018-01-17T12:43:02Z",
        "updatedAt" : "2018-01-19T05:21:42Z",
        "lastEditedBy" : "fa477146-9a47-4754-b38c-de8062e65e13",
        "tags" : [
        ]
      },
      {
        "id" : "33b35800-fddc-493d-8952-4237d707e107",
        "parentId" : "ef05f395-2171-4dc7-9051-7aff5186acab",
        "authorId" : "c29e1906-5f0b-4d7b-af8b-d664805e8c8e",
        "body" : "DefaultOffPlugins is set in [NewAdmissionOptions](https://github.com/hzxuzhonghu/kubernetes/blob/17c4045bc15a346e33775b997710d64718abf8a1/pkg/kubeapiserver/options/admission.go#L59), and also processed in [genericapiserver](https://github.com/hzxuzhonghu/kubernetes/blob/17c4045bc15a346e33775b997710d64718abf8a1/staging/src/k8s.io/apiserver/pkg/server/options/admission.go#L197).",
        "createdAt" : "2018-01-17T15:48:24Z",
        "updatedAt" : "2018-01-19T05:21:42Z",
        "lastEditedBy" : "c29e1906-5f0b-4d7b-af8b-d664805e8c8e",
        "tags" : [
        ]
      },
      {
        "id" : "c3d44736-ecd1-4d19-aeaf-c3e7ae206d7d",
        "parentId" : "ef05f395-2171-4dc7-9051-7aff5186acab",
        "authorId" : "c29e1906-5f0b-4d7b-af8b-d664805e8c8e",
        "body" : "And sure we can disable a default enabled plugin.",
        "createdAt" : "2018-01-17T15:51:18Z",
        "updatedAt" : "2018-01-19T05:21:42Z",
        "lastEditedBy" : "c29e1906-5f0b-4d7b-af8b-d664805e8c8e",
        "tags" : [
        ]
      },
      {
        "id" : "24320d70-cf3a-4f94-a0ad-07d3dd79c9c2",
        "parentId" : "ef05f395-2171-4dc7-9051-7aff5186acab",
        "authorId" : "c29e1906-5f0b-4d7b-af8b-d664805e8c8e",
        "body" : ">and add a test that validates that. \r\n\r\nYes, there is already a test case https://github.com/hzxuzhonghu/kubernetes/blob/17c4045bc15a346e33775b997710d64718abf8a1/staging/src/k8s.io/apiserver/pkg/server/options/admission_test.go#L63~L68",
        "createdAt" : "2018-01-18T01:27:51Z",
        "updatedAt" : "2018-01-19T05:21:42Z",
        "lastEditedBy" : "c29e1906-5f0b-4d7b-af8b-d664805e8c8e",
        "tags" : [
        ]
      },
      {
        "id" : "02d55bdb-0400-4762-b7e8-d85a8ffb2e52",
        "parentId" : "ef05f395-2171-4dc7-9051-7aff5186acab",
        "authorId" : "fa477146-9a47-4754-b38c-de8062e65e13",
        "body" : "> Yes, there is already a test case https://github.com/hzxuzhonghu/kubernetes/blob/17c4045bc15a346e33775b997710d64718abf8a1/staging/src/k8s.io/apiserver/pkg/server/options/admission_test.go#L63~L68\r\n\r\nIt looks like that test is focused on the normal calculation.  What I'm pointing how here is that if a user specifices `--admission-control=one, two` for kube-apiserver and recommended is \"one, two, three, four\" and defaultOff is \"four\", the user expects to end up with \"one, two\", but actually gets \"one, two, three\", right?",
        "createdAt" : "2018-01-18T16:30:49Z",
        "updatedAt" : "2018-01-19T05:21:42Z",
        "lastEditedBy" : "fa477146-9a47-4754-b38c-de8062e65e13",
        "tags" : [
        ]
      },
      {
        "id" : "e79ff8c6-5a4c-4ff0-991f-73ae7595f05f",
        "parentId" : "ef05f395-2171-4dc7-9051-7aff5186acab",
        "authorId" : "c29e1906-5f0b-4d7b-af8b-d664805e8c8e",
        "body" : "Get it, I will add this case.",
        "createdAt" : "2018-01-19T01:29:40Z",
        "updatedAt" : "2018-01-19T05:21:42Z",
        "lastEditedBy" : "c29e1906-5f0b-4d7b-af8b-d664805e8c8e",
        "tags" : [
        ]
      },
      {
        "id" : "25daefbe-9c19-4ec9-b0c0-d0d64d2dd777",
        "parentId" : "ef05f395-2171-4dc7-9051-7aff5186acab",
        "authorId" : "c29e1906-5f0b-4d7b-af8b-d664805e8c8e",
        "body" : "@deads2k Done https://github.com/hzxuzhonghu/kubernetes/blob/dd9ba4d84f5d74942302c53b8b465bb367c37a8e/staging/src/k8s.io/apiserver/pkg/server/options/admission_test.go#L81-L95",
        "createdAt" : "2018-01-19T02:04:04Z",
        "updatedAt" : "2018-01-19T05:21:42Z",
        "lastEditedBy" : "c29e1906-5f0b-4d7b-af8b-d664805e8c8e",
        "tags" : [
        ]
      }
    ],
    "commit" : "5c9e020d7dfb369d3cdfb765baa3dff922d8e83d",
    "line" : 119,
    "diffHunk" : "@@ -1,1 +117,121 @@\tif a.PluginNames != nil {\n\t\t// pass PluginNames to generic AdmissionOptions\n\t\ta.GenericAdmission.EnablePlugins = a.PluginNames\n\t}\n"
  }
]