[
  {
    "id" : "ce07005c-a1c9-4bb1-97d5-710b7c55d42c",
    "prId" : 57978,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/57978#pullrequestreview-87400793",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c8a3d243-9bdc-4977-ad8f-53957a180f72",
        "parentId" : null,
        "authorId" : "5d1f7040-18ac-4dc2-aadb-f39c5601803e",
        "body" : "It looks like you have created a new VM object and new datacenter object and replaced the old nodeinfo. Then do you need to release/destroy the old VM and datacenter object? There is a DeleteVM method in virtualmachine.go. I am wondering if replace current NodeInfo with new objects will leave dangling objects behind.",
        "createdAt" : "2018-01-08T23:23:40Z",
        "updatedAt" : "2018-01-08T23:23:40Z",
        "lastEditedBy" : "5d1f7040-18ac-4dc2-aadb-f39c5601803e",
        "tags" : [
        ]
      },
      {
        "id" : "a7216cb9-44e6-4174-a333-fd2e8dc9747d",
        "parentId" : "c8a3d243-9bdc-4977-ad8f-53957a180f72",
        "authorId" : "aa835454-a07b-4060-964a-acdc4f1509b8",
        "body" : "@luomiao the DeleteVM function does deletion of actual vSphere VM. We don't want to do that. Our intention here is just to renew the vclib VirtualMachine struct, which in turn extends govmomi VirtualMachine, by setting up new client object. The vSphere VM should remain intact. \r\n\r\nAny on going operation that still has handle to older vclib VirtualMachine object can continue to use it without any foreseeable race condition (for now at least :)). Once those operations finish the older VirtualMachine struct instance, which is no longer being referenced by NodeInfo or any other ongoing operation, will get garbage collected. \r\n\r\nHope that answers your concern.",
        "createdAt" : "2018-01-08T23:40:54Z",
        "updatedAt" : "2018-01-08T23:40:54Z",
        "lastEditedBy" : "aa835454-a07b-4060-964a-acdc4f1509b8",
        "tags" : [
        ]
      },
      {
        "id" : "cc75a5de-5630-4665-854a-f38701a33dd1",
        "parentId" : "c8a3d243-9bdc-4977-ad8f-53957a180f72",
        "authorId" : "5d1f7040-18ac-4dc2-aadb-f39c5601803e",
        "body" : "Got it, thanks for the explanation :)",
        "createdAt" : "2018-01-09T02:39:42Z",
        "updatedAt" : "2018-01-09T02:39:42Z",
        "lastEditedBy" : "5d1f7040-18ac-4dc2-aadb-f39c5601803e",
        "tags" : [
        ]
      }
    ],
    "commit" : "25b1cd4958e0da5a99f7239a9aec65cb39b91984",
    "line" : 103,
    "diffHunk" : "@@ -1,1 +352,356 @@\t\t}\n\t}\n\tvm := nodeInfo.vm.RenewVM(vsphereInstance.conn.GoVmomiClient)\n\treturn &NodeInfo{vm: &vm, dataCenter: vm.Datacenter, vcServer: nodeInfo.vcServer}, nil\n}"
  },
  {
    "id" : "52c56627-5528-4c51-86b8-cb02c03aa1c7",
    "prId" : 55845,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/55845#pullrequestreview-77349447",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c02b2675-d125-4179-be4e-4277142f642f",
        "parentId" : null,
        "authorId" : "44594ff0-8fbc-44a7-84f9-654ffd54270f",
        "body" : "I think it starts supporting go 1.9",
        "createdAt" : "2017-11-17T05:36:37Z",
        "updatedAt" : "2017-11-17T22:51:36Z",
        "lastEditedBy" : "44594ff0-8fbc-44a7-84f9-654ffd54270f",
        "tags" : [
        ]
      },
      {
        "id" : "d3945133-8076-40dd-9ebb-28579e1f1fb4",
        "parentId" : "c02b2675-d125-4179-be4e-4277142f642f",
        "authorId" : "6b5decf9-6290-41db-8baf-621f127bd536",
        "body" : "Hi Jing,\r\n\r\nFirst of all, thanks for the review.\r\n\r\nSince internally we have tested this code, lets keep using map.\r\nWe will work on changing map to concurrent map post 1.9 changes.\r\n",
        "createdAt" : "2017-11-17T06:41:19Z",
        "updatedAt" : "2017-11-17T22:51:36Z",
        "lastEditedBy" : "6b5decf9-6290-41db-8baf-621f127bd536",
        "tags" : [
        ]
      }
    ],
    "commit" : "79e1da68d2f93f8becc903f84f4da515989eaa69",
    "line" : 38,
    "diffHunk" : "@@ -1,1 +36,40 @@\ntype NodeManager struct {\n\t// TODO: replace map with concurrent map when k8s supports go v1.9\n\n\t// Maps the VC server to VSphereInstance"
  },
  {
    "id" : "3880b031-5ce8-4ef5-a68d-489995a465cb",
    "prId" : 55845,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/55845#pullrequestreview-77513820",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9bdad62f-665a-434b-a2e0-a7733ca7fc90",
        "parentId" : null,
        "authorId" : "6b5decf9-6290-41db-8baf-621f127bd536",
        "body" : "Hi Jing, NodeManager is used in vsphere.go\r\nPlease search for NodeManager in vsphere.go and you will find plenty of references.\r\n",
        "createdAt" : "2017-11-17T18:00:02Z",
        "updatedAt" : "2017-11-17T22:51:36Z",
        "lastEditedBy" : "6b5decf9-6290-41db-8baf-621f127bd536",
        "tags" : [
        ]
      }
    ],
    "commit" : "79e1da68d2f93f8becc903f84f4da515989eaa69",
    "line" : 37,
    "diffHunk" : "@@ -1,1 +35,39 @@}\n\ntype NodeManager struct {\n\t// TODO: replace map with concurrent map when k8s supports go v1.9\n"
  }
]