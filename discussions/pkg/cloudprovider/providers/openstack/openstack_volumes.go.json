[
  {
    "id" : "ece594f3-988d-4135-a17b-3ba0244dd51b",
    "prId" : 56846,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/56846#pullrequestreview-87878011",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "63bba848-c091-41bb-afe1-24162b38c5e1",
        "parentId" : null,
        "authorId" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "body" : "why did you change this - just curious..",
        "createdAt" : "2018-01-10T14:51:38Z",
        "updatedAt" : "2018-01-10T17:09:47Z",
        "lastEditedBy" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "tags" : [
        ]
      },
      {
        "id" : "885b6a42-1b11-4c52-935e-d6c790e4cd27",
        "parentId" : "63bba848-c091-41bb-afe1-24162b38c5e1",
        "authorId" : "0cf405a8-951c-46f8-bbaf-cf214ebb52dd",
        "body" : "well there was case where the code did not work properly if instanceid was \"\". I can remove it, but I was thinking that it could help debugging in future.",
        "createdAt" : "2018-01-10T15:41:35Z",
        "updatedAt" : "2018-01-10T17:09:47Z",
        "lastEditedBy" : "0cf405a8-951c-46f8-bbaf-cf214ebb52dd",
        "tags" : [
        ]
      }
    ],
    "commit" : "4e1b5c6a3299327ff856d05443af8fa20ee760e7",
    "line" : 43,
    "diffHunk" : "@@ -1,1 +594,598 @@\tif instanceID == \"\" {\n\t\tglog.Warningf(\"calling DiskIsAttached with empty instanceid: %s %s\", instanceID, volumeID)\n\t}\n\tvolume, err := os.getVolume(volumeID)\n\tif err != nil {"
  },
  {
    "id" : "e40d15e6-f45e-4a4d-91c9-d77352276d13",
    "prId" : 56846,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/56846#pullrequestreview-88350604",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "30d34430-7562-4d35-9f87-3654e1dbac0a",
        "parentId" : null,
        "authorId" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "body" : "Can you add a comment about - why we are doing this? I assume that - instance-id of node exists after encountering first - \"/\" and it includes last \"/\" as well?  so something like - \"foobar/instance-id/\" ?\r\n\r\ncc @rootfs @pospispa ",
        "createdAt" : "2018-01-10T15:03:12Z",
        "updatedAt" : "2018-01-10T17:09:47Z",
        "lastEditedBy" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "tags" : [
        ]
      },
      {
        "id" : "74a4cef7-fd32-4d45-9f59-78b5c65eadf4",
        "parentId" : "30d34430-7562-4d35-9f87-3654e1dbac0a",
        "authorId" : "0cf405a8-951c-46f8-bbaf-cf214ebb52dd",
        "body" : "Basically what that code does is that it removes first '/', but is that the case always? srv.ID usually in openstack is UID of the instance. So it should not contain anything more than UID, but I am not sure.\r\n\r\nThat code is taken originally from here https://github.com/kubernetes/kubernetes/blob/master/pkg/volume/cinder/attacher.go#L427-L439 I was thinking that I will use same code, if there are really some special cases.",
        "createdAt" : "2018-01-10T15:53:20Z",
        "updatedAt" : "2018-01-10T17:09:47Z",
        "lastEditedBy" : "0cf405a8-951c-46f8-bbaf-cf214ebb52dd",
        "tags" : [
        ]
      },
      {
        "id" : "19dbb02f-7cf9-45e1-a7cf-8ec70ff15954",
        "parentId" : "30d34430-7562-4d35-9f87-3654e1dbac0a",
        "authorId" : "0cf405a8-951c-46f8-bbaf-cf214ebb52dd",
        "body" : "git blame tells that this function is originally committed by @jamiehannaford Jamie could you help us, what is purpose of this? Are there some special cases why this is implemented like this?\r\n",
        "createdAt" : "2018-01-10T15:57:49Z",
        "updatedAt" : "2018-01-10T17:09:47Z",
        "lastEditedBy" : "0cf405a8-951c-46f8-bbaf-cf214ebb52dd",
        "tags" : [
        ]
      },
      {
        "id" : "536b2f12-6559-4b11-8767-32aa9e6d7acd",
        "parentId" : "30d34430-7562-4d35-9f87-3654e1dbac0a",
        "authorId" : "0cf405a8-951c-46f8-bbaf-cf214ebb52dd",
        "body" : "might be that this is there because of this comment https://github.com/kubernetes/kubernetes/blob/master/pkg/cloudprovider/providers/openstack/openstack_instances.go#L161-L163 in future it is possible to return endpoint as: `<endpoint>/<instanceid>` and then this parser will strip that `<endpoint>/` out of it. ",
        "createdAt" : "2018-01-10T16:12:21Z",
        "updatedAt" : "2018-01-10T17:09:47Z",
        "lastEditedBy" : "0cf405a8-951c-46f8-bbaf-cf214ebb52dd",
        "tags" : [
        ]
      },
      {
        "id" : "8aa331c5-b2fd-4d04-9897-9bbbd6efc08f",
        "parentId" : "30d34430-7562-4d35-9f87-3654e1dbac0a",
        "authorId" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "body" : "cool. thank you for digging this. I was wondering about it a bit.. ",
        "createdAt" : "2018-01-10T16:24:45Z",
        "updatedAt" : "2018-01-10T17:09:47Z",
        "lastEditedBy" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "tags" : [
        ]
      },
      {
        "id" : "276cded0-0ba2-4baa-be7a-35526e09f016",
        "parentId" : "30d34430-7562-4d35-9f87-3654e1dbac0a",
        "authorId" : "bdc500eb-fd23-4d89-81ce-2986aa831dfa",
        "body" : "@zetaab Pretty sure I did not add this. Not sure why blame is saying otherwise. Looks like that comment addresses the reason though.",
        "createdAt" : "2018-01-12T00:27:28Z",
        "updatedAt" : "2018-01-12T00:27:28Z",
        "lastEditedBy" : "bdc500eb-fd23-4d89-81ce-2986aa831dfa",
        "tags" : [
        ]
      }
    ],
    "commit" : "4e1b5c6a3299327ff856d05443af8fa20ee760e7",
    "line" : 69,
    "diffHunk" : "@@ -1,1 +621,625 @@\tif ind := strings.LastIndex(instanceID, \"/\"); ind >= 0 {\n\t\tinstanceID = instanceID[(ind + 1):]\n\t}\n\tattached, err := os.DiskIsAttached(instanceID, volumeID)\n\treturn attached, instanceID, err"
  },
  {
    "id" : "134599ff-4f89-4133-8d91-1c97837ac1cc",
    "prId" : 56846,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/56846#pullrequestreview-87879899",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1510a474-56c8-4b11-8030-6c700c301061",
        "parentId" : null,
        "authorId" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "body" : "So this change is unrelated to issues this PR is supposed to fix right? I think this is fixing `VolumesAreAttached` mechanism but can we extract that into a separate PR? I feel as it is - we are fixing 2 bugs in this PR. This will be 3rd one.",
        "createdAt" : "2018-01-10T15:05:25Z",
        "updatedAt" : "2018-01-10T17:09:47Z",
        "lastEditedBy" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "tags" : [
        ]
      },
      {
        "id" : "071da808-bb80-4890-bbe6-15a8e37ddffe",
        "parentId" : "1510a474-56c8-4b11-8030-6c700c301061",
        "authorId" : "0cf405a8-951c-46f8-bbaf-cf214ebb52dd",
        "body" : "hmm, imo this should be here. Without this, if you shutdown node, it will mark all volumes as \"available\" in controller, but those are really attached to shutdowned node in openstack. This PR should fix those detach problems if node is shutdowned.",
        "createdAt" : "2018-01-10T15:46:27Z",
        "updatedAt" : "2018-01-10T17:09:47Z",
        "lastEditedBy" : "0cf405a8-951c-46f8-bbaf-cf214ebb52dd",
        "tags" : [
        ]
      }
    ],
    "commit" : "4e1b5c6a3299327ff856d05443af8fa20ee760e7",
    "line" : 106,
    "diffHunk" : "@@ -1,1 +665,669 @@\treturn os.DisksAreAttached(instanceID, volumeIDs)\n}\n\n// diskIsUsed returns true a disk is attached to any node.\nfunc (os *OpenStack) diskIsUsed(volumeID string) (bool, error) {"
  },
  {
    "id" : "60848e2e-d1b3-4ed3-93d1-dec41c3b60b2",
    "prId" : 55313,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/55313#pullrequestreview-75650251",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bb8fb855-983b-4d72-82de-f2e6e3371bec",
        "parentId" : null,
        "authorId" : "5fe5bdb9-52d3-4f2d-8554-f12673e65198",
        "body" : "How about checking \"0\" and \">1\"?\r\nIf \"0\", we can return \"\" soon.",
        "createdAt" : "2017-11-08T10:52:27Z",
        "updatedAt" : "2017-11-09T10:39:31Z",
        "lastEditedBy" : "5fe5bdb9-52d3-4f2d-8554-f12673e65198",
        "tags" : [
        ]
      },
      {
        "id" : "961d82ca-cd57-4055-aacf-9a99689eb8a6",
        "parentId" : "bb8fb855-983b-4d72-82de-f2e6e3371bec",
        "authorId" : "84bd6e4d-e890-403e-90b4-0b1f8179dba3",
        "body" : "Good point, I'm updating the commit.",
        "createdAt" : "2017-11-08T11:22:44Z",
        "updatedAt" : "2017-11-09T10:39:31Z",
        "lastEditedBy" : "84bd6e4d-e890-403e-90b4-0b1f8179dba3",
        "tags" : [
        ]
      },
      {
        "id" : "068b2841-b23a-4ffe-8f77-8a999ce20134",
        "parentId" : "bb8fb855-983b-4d72-82de-f2e6e3371bec",
        "authorId" : "84bd6e4d-e890-403e-90b4-0b1f8179dba3",
        "body" : "Updated the commit, immediately returning if getting none or multiple disk paths.\r\n\r\nWhile at it, I've also updated the log messages according to the k8s developer guide. Some of them were not formatted properly.",
        "createdAt" : "2017-11-08T12:40:17Z",
        "updatedAt" : "2017-11-09T10:39:31Z",
        "lastEditedBy" : "84bd6e4d-e890-403e-90b4-0b1f8179dba3",
        "tags" : [
        ]
      },
      {
        "id" : "831a85d3-dd33-4b71-9818-015ec98f85b4",
        "parentId" : "bb8fb855-983b-4d72-82de-f2e6e3371bec",
        "authorId" : "5fe5bdb9-52d3-4f2d-8554-f12673e65198",
        "body" : "Have you updated the commit?\r\nBut I can't find the codes which check \"0\".",
        "createdAt" : "2017-11-09T01:01:27Z",
        "updatedAt" : "2017-11-09T10:39:31Z",
        "lastEditedBy" : "5fe5bdb9-52d3-4f2d-8554-f12673e65198",
        "tags" : [
        ]
      },
      {
        "id" : "87996e3a-e4f2-4e0d-8791-2902ef42898f",
        "parentId" : "bb8fb855-983b-4d72-82de-f2e6e3371bec",
        "authorId" : "84bd6e4d-e890-403e-90b4-0b1f8179dba3",
        "body" : "Yes, well, I don't explicitly check for '0': if there's exactly one disk path, I return it, otherwise I'm logging an error message and returning an empty string immediately: https://github.com/petrutlucian94/kubernetes/blob/559f83a93daa5078603dd30430f2a18fbd7c1f4c/pkg/cloudprovider/providers/openstack/openstack_volumes.go#L374-L381\r\n\r\nIn case the previous link becomes unavailable due to a new commit, here's the snippet: http://paste.openstack.org/raw/625887 . This actually right below.\r\n\r\nMeanwhile, I've made some minor changes, ensuring that the gofmt/govet tests pass.",
        "createdAt" : "2017-11-09T08:23:47Z",
        "updatedAt" : "2017-11-09T10:43:37Z",
        "lastEditedBy" : "84bd6e4d-e890-403e-90b4-0b1f8179dba3",
        "tags" : [
        ]
      },
      {
        "id" : "63b4febc-9343-4ca1-837b-9e1a4b75b343",
        "parentId" : "bb8fb855-983b-4d72-82de-f2e6e3371bec",
        "authorId" : "5fe5bdb9-52d3-4f2d-8554-f12673e65198",
        "body" : "All right, thank you.",
        "createdAt" : "2017-11-10T02:31:40Z",
        "updatedAt" : "2017-11-10T02:31:47Z",
        "lastEditedBy" : "5fe5bdb9-52d3-4f2d-8554-f12673e65198",
        "tags" : [
        ]
      }
    ],
    "commit" : "559f83a93daa5078603dd30430f2a18fbd7c1f4c",
    "line" : 74,
    "diffHunk" : "@@ -1,1 +372,376 @@\t\t\t}\n\n\t\t\tif len(diskPaths) == 1 {\n\t\t\t\treturn diskPaths[0]\n\t\t\t}"
  },
  {
    "id" : "50b8c970-6b23-4e01-86eb-8b43f188df95",
    "prId" : 50042,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/50042#pullrequestreview-53961893",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f8c7601d-10ef-4fbe-9afe-58d99dddd074",
        "parentId" : null,
        "authorId" : "bd04f755-e62f-45fb-8771-4cc2b5db49d4",
        "body" : "Can we preserve/log the original error too? something like\r\n\r\n `glog.V(2).Infof(\"%s : %s\", errmsg, err.Error())`",
        "createdAt" : "2017-08-02T22:51:43Z",
        "updatedAt" : "2017-08-02T22:51:43Z",
        "lastEditedBy" : "bd04f755-e62f-45fb-8771-4cc2b5db49d4",
        "tags" : [
        ]
      },
      {
        "id" : "bba7c3db-0340-4f60-a91b-0969b109f4bd",
        "parentId" : "f8c7601d-10ef-4fbe-9afe-58d99dddd074",
        "authorId" : "44594ff0-8fbc-44a7-84f9-654ffd54270f",
        "body" : "I keep the log message with glog.V(2).Infof(errmsg) right?\r\n",
        "createdAt" : "2017-08-02T23:28:12Z",
        "updatedAt" : "2017-08-02T23:28:12Z",
        "lastEditedBy" : "44594ff0-8fbc-44a7-84f9-654ffd54270f",
        "tags" : [
        ]
      },
      {
        "id" : "2353c410-5fcb-4b95-b035-c7897488c9d8",
        "parentId" : "f8c7601d-10ef-4fbe-9afe-58d99dddd074",
        "authorId" : "bd04f755-e62f-45fb-8771-4cc2b5db49d4",
        "body" : "oops. never mind, i read this wrong, i think i was thinking about the err from DetachDisk and you have already removed that call :)",
        "createdAt" : "2017-08-02T23:36:20Z",
        "updatedAt" : "2017-08-02T23:36:21Z",
        "lastEditedBy" : "bd04f755-e62f-45fb-8771-4cc2b5db49d4",
        "tags" : [
        ]
      }
    ],
    "commit" : "8ffc361564e68c8998630326fedd82c3ff415454",
    "line" : 10,
    "diffHunk" : "@@ -1,1 +232,236 @@\t\t}\n\t\terrmsg := fmt.Sprintf(\"Disk %s is attached to a different instance (%s)\", volumeID, volume.AttachedServerId)\n\t\tglog.V(2).Infof(errmsg)\n\t\treturn \"\", errors.New(errmsg)\n\t}"
  },
  {
    "id" : "789695a5-a077-4e81-aaf3-e841da62f8d8",
    "prId" : 40423,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/40423#pullrequestreview-29289632",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c2fd03f2-1caa-4b22-b37f-a0636e7784e4",
        "parentId" : null,
        "authorId" : "58cf89ce-9cc3-4dce-b99b-49ae3682cc9a",
        "body" : "minor point: This is an openstack-python pattern, and not usual for golang.  Usually you want to glog the error *xor* return the error to your caller, presumably so they might glog it later with some additional context.",
        "createdAt" : "2017-03-27T15:54:15Z",
        "updatedAt" : "2017-03-27T15:55:01Z",
        "lastEditedBy" : "58cf89ce-9cc3-4dce-b99b-49ae3682cc9a",
        "tags" : [
        ]
      },
      {
        "id" : "310aa872-0232-4952-a267-3f4c7cd80680",
        "parentId" : "c2fd03f2-1caa-4b22-b37f-a0636e7784e4",
        "authorId" : "80c31010-de28-4a07-9078-d9f4780d371e",
        "body" : "@anguslees, thank you for the review, that is a direct port of logic of previous code. If/when time comes to add v3 support I will keep this in mind. ",
        "createdAt" : "2017-03-27T20:14:55Z",
        "updatedAt" : "2017-03-27T20:14:55Z",
        "lastEditedBy" : "80c31010-de28-4a07-9078-d9f4780d371e",
        "tags" : [
        ]
      }
    ],
    "commit" : "89f596f408d26b8866b7edd4ec0230895abb0b1b",
    "line" : 241,
    "diffHunk" : "@@ -1,1 +255,259 @@\tif volume.AttachedServerId != instanceID {\n\t\terrMsg := fmt.Sprintf(\"Disk: %s has no attachments or is not attached to compute: %s\", volume.Name, instanceID)\n\t\tglog.Errorf(errMsg)\n\t\treturn errors.New(errMsg)\n\t} else {"
  },
  {
    "id" : "28cc70c3-a1f6-426a-9fa9-10dc78774a3d",
    "prId" : 39055,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/39055#pullrequestreview-24139598",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "20747c8c-27cf-4e7d-9d28-7bb8fce3c0f2",
        "parentId" : null,
        "authorId" : "861d75ca-c927-4f5b-a0e8-1c1e7b169209",
        "body" : "I'm not super familiar with the release process here but 100% agreed with @codablock that this should not be pulled into mainline kube in its current state. For an example, lets say you're doing a `kubectl delete` on a webserver that's mid transaction. My expected behavior would be for the volume to be available until my pod fully exits, so the server can complete its final set of transactions. With this patch it would lose access to its volumes the instant a new pod gets scheduled which could cause data loss.\r\n\r\nI'd imagine there should be a check to the kube API before this detach call to verify that the volume is not in use by any active pods. If this check was added kube would simply keep retrying until the volume isn't in use, at which point it would detach and continue.",
        "createdAt" : "2017-02-28T01:23:32Z",
        "updatedAt" : "2017-02-28T01:23:32Z",
        "lastEditedBy" : "861d75ca-c927-4f5b-a0e8-1c1e7b169209",
        "tags" : [
        ]
      }
    ],
    "commit" : "fa1d6f38388ebf0def8eebe49fa4e40b4f1b487b",
    "line" : 11,
    "diffHunk" : "@@ -1,1 +56,60 @@\n\t\tglog.V(2).Infof(\"Disk %q is attached to a different compute (%q), detaching\", diskName, disk.Attachments[0][\"server_id\"])\n\t\terr = os.DetachDisk(fmt.Sprintf(\"%s\", disk.Attachments[0][\"server_id\"]), diskName)\n\t\tif err != nil {\n\t\t\treturn \"\", err"
  },
  {
    "id" : "070caf1b-1089-42cf-91ca-68970632b6ae",
    "prId" : 33270,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/33270#pullrequestreview-6344008",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e2d0f699-99cd-4462-99e0-43a1cacdf301",
        "parentId" : null,
        "authorId" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "body" : "is there any doc on the device path format?\n",
        "createdAt" : "2016-10-26T17:41:39Z",
        "updatedAt" : "2016-11-03T10:04:29Z",
        "lastEditedBy" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "tags" : [
        ]
      },
      {
        "id" : "263f89bd-efcf-458c-af46-92d0561a6c2e",
        "parentId" : "e2d0f699-99cd-4462-99e0-43a1cacdf301",
        "authorId" : "d8ef36ae-ed7e-4f09-a5d3-3267c3e5a930",
        "body" : "Not that I know of personally, udev probably does, but we've been using this pattern so long I'm no longer even sure of its origin :)\n",
        "createdAt" : "2016-10-29T08:18:19Z",
        "updatedAt" : "2016-11-03T10:04:29Z",
        "lastEditedBy" : "d8ef36ae-ed7e-4f09-a5d3-3267c3e5a930",
        "tags" : [
        ]
      }
    ],
    "commit" : "ce8eda94dfe5b05c87cfcf26d67d204e0c8a8b41",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +172,176 @@\t// Build a list of candidate device paths\n\tcandidateDeviceNodes := []string{\n\t\t// KVM\n\t\tfmt.Sprintf(\"virtio-%s\", diskId[:20]),\n\t\t// ESXi"
  },
  {
    "id" : "aa38c078-580e-4aba-9f97-2a113df653b2",
    "prId" : 30904,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a126b1a5-4269-4f01-9d1b-445a189ec27e",
        "parentId" : null,
        "authorId" : "8d7e3035-146d-4d3c-86b9-e61987a0f17b",
        "body" : "Have you run the e2e for provisioning + storage class with CINDER?  There's tests for CINDER but doesn't specify a volumeType.  \n",
        "createdAt" : "2016-08-18T20:25:47Z",
        "updatedAt" : "2016-08-22T13:28:40Z",
        "lastEditedBy" : "8d7e3035-146d-4d3c-86b9-e61987a0f17b",
        "tags" : [
        ]
      },
      {
        "id" : "ccaa01f1-2f5b-4af8-81b5-da2a155f9115",
        "parentId" : "a126b1a5-4269-4f01-9d1b-445a189ec27e",
        "authorId" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "body" : "There is no same VolumeType on every openstsack setup yet.\n",
        "createdAt" : "2016-08-18T20:29:38Z",
        "updatedAt" : "2016-08-22T13:28:40Z",
        "lastEditedBy" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "tags" : [
        ]
      },
      {
        "id" : "8d4e650e-65c3-4305-bae6-4629363a7a7b",
        "parentId" : "a126b1a5-4269-4f01-9d1b-445a189ec27e",
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "I agree with @rootfs, volume types and zones are defined by OpenStack admin after installation and `\"\"` is the only one we can be sure it is there.\n",
        "createdAt" : "2016-08-19T07:49:21Z",
        "updatedAt" : "2016-08-22T13:28:40Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      }
    ],
    "commit" : "259bce370ea8487bd0fb776e7f3da4ed78fcf031",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +151,155 @@\t\tName:         name,\n\t\tSize:         size,\n\t\tVolumeType:   vtype,\n\t\tAvailability: availability,\n\t}"
  }
]