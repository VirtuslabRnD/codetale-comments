[
  {
    "id" : "37873959-29cd-41aa-903a-2e0c20b09fcc",
    "prId" : 93979,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/93979#pullrequestreview-480150957",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ef2840be-af80-4519-870a-5264c740fc32",
        "parentId" : null,
        "authorId" : "c490e441-2b9f-41f2-8559-d47be0ea8836",
        "body" : "perhaps clarify that this waits for the service's first port to be ready, not for _all_ ports",
        "createdAt" : "2020-08-27T16:54:29Z",
        "updatedAt" : "2020-09-02T21:20:28Z",
        "lastEditedBy" : "c490e441-2b9f-41f2-8559-d47be0ea8836",
        "tags" : [
        ]
      },
      {
        "id" : "a38a5ddc-fd89-47ca-aa55-e5c17a34c3fc",
        "parentId" : "ef2840be-af80-4519-870a-5264c740fc32",
        "authorId" : "57f729dd-988a-4d1a-83bf-ee70bf637c64",
        "body" : "Fixed to just find the right ServicePort rather than indexes or whatever.",
        "createdAt" : "2020-09-01T22:07:56Z",
        "updatedAt" : "2020-09-02T21:20:28Z",
        "lastEditedBy" : "57f729dd-988a-4d1a-83bf-ee70bf637c64",
        "tags" : [
        ]
      }
    ],
    "commit" : "0cb5e554099b42c67a6191c348fcee80e862c7fd",
    "line" : 63,
    "diffHunk" : "@@ -1,1 +137,141 @@// addServiceAndWaitForInfoIndex adds the service to the proxy and waits for the\n// named port to be ready\nfunc addServiceAndWaitForInfo(t *testing.T, p *Proxier, servicePortName proxy.ServicePortName, service *v1.Service) *ServiceInfo {\n\tp.OnServiceAdd(service)\n\treturn waitForServiceInfo(t, p, servicePortName, service)"
  },
  {
    "id" : "6f222e05-9920-486f-b7cb-b51f1e5a0238",
    "prId" : 93979,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/93979#pullrequestreview-476909787",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "47018271-8475-4efc-87ed-ba96b5523c71",
        "parentId" : null,
        "authorId" : "c490e441-2b9f-41f2-8559-d47be0ea8836",
        "body" : "this should be something like `deleteServiceAndWait` (to make it clear that it does the deleting too, not just the waiting)\r\n\r\na comment about the purpose of `waitFunc` would be useful too",
        "createdAt" : "2020-08-27T16:55:41Z",
        "updatedAt" : "2020-09-02T21:20:28Z",
        "lastEditedBy" : "c490e441-2b9f-41f2-8559-d47be0ea8836",
        "tags" : [
        ]
      }
    ],
    "commit" : "0cb5e554099b42c67a6191c348fcee80e862c7fd",
    "line" : 72,
    "diffHunk" : "@@ -1,1 +146,150 @@// port's socket to close.\nfunc deleteServiceAndWait(t *testing.T, p *Proxier, svcInfo *ServiceInfo, service *v1.Service, waitFunc func(*Proxier, int) error) {\n\tp.OnServiceDelete(service)\n\t// Wait for the port to really close.\n\tif err := waitFunc(p, svcInfo.proxyPort); err != nil {"
  },
  {
    "id" : "317e79d9-1393-419b-97f1-0cf9d8b243ab",
    "prId" : 71735,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/71735#pullrequestreview-222156834",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ae55e313-ea62-4e21-98f5-a309aa414852",
        "parentId" : null,
        "authorId" : "c490e441-2b9f-41f2-8559-d47be0ea8836",
        "body" : "This is adding a `SyncLoop` thread and calls to `OnServiceSynced` and `OnEndpointsSynced`, but that has nothing to do with the cleanup/shutdown changes. It just snuck in here from a later commit.",
        "createdAt" : "2019-04-03T11:56:29Z",
        "updatedAt" : "2019-04-05T21:28:23Z",
        "lastEditedBy" : "c490e441-2b9f-41f2-8559-d47be0ea8836",
        "tags" : [
        ]
      }
    ],
    "commit" : "cc2b31a2f38487941125309ed56cd071e56cfac0",
    "line" : 37,
    "diffHunk" : "@@ -1,1 +238,242 @@}\n\nfunc startProxier(p *Proxier, t *testing.T) {\n\tgo func() {\n\t\tp.SyncLoop()"
  },
  {
    "id" : "c8818290-f69f-469f-9b93-2cf014d9bef0",
    "prId" : 25011,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7b3ed46c-2504-4cc7-86b9-4ea1fb5cfb98",
        "parentId" : null,
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "I think the os.Exit will cause the program to exit before it does the deferred tcp.Close().\n",
        "createdAt" : "2016-05-02T20:18:17Z",
        "updatedAt" : "2016-05-05T04:04:50Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      }
    ],
    "commit" : "5923fd352e894beb178f0b13356d1dff07b9d8bf",
    "line" : null,
    "diffHunk" : "@@ -1,1 +131,135 @@\t// it should be safe to call Close() multiple times.\n\ttcp.Close()\n\tos.Exit(ret)\n}\n"
  }
]