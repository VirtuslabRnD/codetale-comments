[
  {
    "id" : "d644f25e-c058-4a29-a118-300326e1259e",
    "prId" : 81531,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/81531#pullrequestreview-279938504",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0f6da912-dbb2-4869-8fed-29c197e1d638",
        "parentId" : null,
        "authorId" : "7aca96c2-45d7-4567-99be-0323d7556c55",
        "body" : "ssh tunnels is deprecated. As such the corresponding metrics should also be deprecated.",
        "createdAt" : "2019-08-27T02:35:43Z",
        "updatedAt" : "2019-08-27T19:47:26Z",
        "lastEditedBy" : "7aca96c2-45d7-4567-99be-0323d7556c55",
        "tags" : [
        ]
      },
      {
        "id" : "be5c90e5-369b-4753-adc0-b77b1ea50534",
        "parentId" : "0f6da912-dbb2-4869-8fed-29c197e1d638",
        "authorId" : "7aca96c2-45d7-4567-99be-0323d7556c55",
        "body" : "Can we either fix it here or at least make sure we file an issue?",
        "createdAt" : "2019-08-27T02:36:23Z",
        "updatedAt" : "2019-08-27T19:47:26Z",
        "lastEditedBy" : "7aca96c2-45d7-4567-99be-0323d7556c55",
        "tags" : [
        ]
      },
      {
        "id" : "f1349a37-5532-43f7-b853-6594b413d952",
        "parentId" : "0f6da912-dbb2-4869-8fed-29c197e1d638",
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "Deprecated metrics are going to be toggled in separate PRs. I will file an issue for this one in particular.",
        "createdAt" : "2019-08-27T02:40:57Z",
        "updatedAt" : "2019-08-27T19:47:26Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      },
      {
        "id" : "92ac8a76-744e-43b8-ad7b-9bd6c29625ad",
        "parentId" : "0f6da912-dbb2-4869-8fed-29c197e1d638",
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "For ref: https://github.com/kubernetes/kubernetes/issues/81984.",
        "createdAt" : "2019-08-27T03:28:52Z",
        "updatedAt" : "2019-08-27T19:47:26Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      }
    ],
    "commit" : "1700a315c188e4b9d434d1e51de75426aa9d7867",
    "line" : 30,
    "diffHunk" : "@@ -1,1 +58,62 @@\ttunnelOpenCounter = metrics.NewCounter(\n\t\t&metrics.CounterOpts{\n\t\t\tName:           \"ssh_tunnel_open_count\",\n\t\t\tHelp:           \"Counter of ssh tunnel total open attempts\",\n\t\t\tStabilityLevel: metrics.ALPHA,"
  },
  {
    "id" : "1bb80f87-a82c-4e09-b13b-a178bc061134",
    "prId" : 36549,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/36549#pullrequestreview-8655612",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2c856cf0-bdae-4602-be21-f6ae8d237524",
        "parentId" : null,
        "authorId" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "body" : "Hmm...do you need to handle the \"not found\" case, or is it safe to call `Close()` anyway?\n",
        "createdAt" : "2016-11-14T16:36:21Z",
        "updatedAt" : "2016-11-14T16:36:21Z",
        "lastEditedBy" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "tags" : [
        ]
      },
      {
        "id" : "9c14a7a2-8157-45d9-9fa6-c8583a502be5",
        "parentId" : "2c856cf0-bdae-4602-be21-f6ae8d237524",
        "authorId" : "3cd3a661-80f4-45b3-bae0-5a78fbaedc59",
        "body" : "It is safe to call 'Close()` (but it was worthwhile for me to revisit the logic here).\n\n`e` is the entry we have already decided we want to pull out of the list (if present) and close. It is an `sshTunnelEntry` (not a pointer) so dereferencing `e` is okay, and `e.Tunnel` won't be nil. If `e.Tunnel` was never set/opened, `Close()` will return an error.\n",
        "createdAt" : "2016-11-15T17:01:20Z",
        "updatedAt" : "2016-11-15T17:01:20Z",
        "lastEditedBy" : "3cd3a661-80f4-45b3-bae0-5a78fbaedc59",
        "tags" : [
        ]
      },
      {
        "id" : "d73c8f21-79f9-4815-b325-56c2ae618489",
        "parentId" : "2c856cf0-bdae-4602-be21-f6ae8d237524",
        "authorId" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "body" : "Sounds good.\n",
        "createdAt" : "2016-11-15T17:37:56Z",
        "updatedAt" : "2016-11-15T17:37:57Z",
        "lastEditedBy" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "tags" : [
        ]
      }
    ],
    "commit" : "1fdb3ee902082008f2d198783965bbf43b7070d0",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +386,390 @@\t}\n\tl.tunnelsLock.Unlock()\n\tif err := e.Tunnel.Close(); err != nil {\n\t\tglog.Infof(\"Failed to close removed tunnel: %v\", err)\n\t}"
  },
  {
    "id" : "f79bc557-99de-4961-a2e0-07911d6e4a60",
    "prId" : 34615,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/34615#pullrequestreview-3920250",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d7e3057d-6bca-4a5c-9b79-f7c591b5fca9",
        "parentId" : null,
        "authorId" : "3cd3a661-80f4-45b3-bae0-5a78fbaedc59",
        "body" : "This could be potentially expensive on large clusters, but I'm not sure how much it really matters.\n\nCan you add a TODO to change l.entries to a map of address->tunnel?\n",
        "createdAt" : "2016-10-12T17:18:43Z",
        "updatedAt" : "2016-10-12T18:54:57Z",
        "lastEditedBy" : "3cd3a661-80f4-45b3-bae0-5a78fbaedc59",
        "tags" : [
        ]
      }
    ],
    "commit" : "6f9fd4431aff58576604932afa5ed0cc26023de3",
    "line" : null,
    "diffHunk" : "@@ -1,1 +408,412 @@\t// Prefer same tunnel as kubelet\n\t// TODO: Change l.entries to a map of address->tunnel\n\tfor _, entry := range l.entries {\n\t\tif entry.Address == addr {\n\t\t\treturn entry.Tunnel, nil"
  },
  {
    "id" : "500981f4-7005-4fe1-9d5b-6c768ec68db3",
    "prId" : 28805,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fcc73225-0dbc-41c7-95d7-e7ee6a1a0dc3",
        "parentId" : null,
        "authorId" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "body" : "If conn times out, the NewClientConn will close it:\nhttps://github.com/golang/crypto/blob/master/ssh/client.go#L76, so we don't need to close it explicitly.\n",
        "createdAt" : "2016-07-11T23:47:32Z",
        "updatedAt" : "2016-07-13T17:47:19Z",
        "lastEditedBy" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "tags" : [
        ]
      },
      {
        "id" : "823d7751-a0bd-4edb-9f85-1bf57b656e24",
        "parentId" : "fcc73225-0dbc-41c7-95d7-e7ee6a1a0dc3",
        "authorId" : "3cd3a661-80f4-45b3-bae0-5a78fbaedc59",
        "body" : "Can you add this as a comment? (I'm now thinking of how helpful it would have been if I had commented this code better in the beginning).\n",
        "createdAt" : "2016-07-12T00:27:24Z",
        "updatedAt" : "2016-07-13T17:47:19Z",
        "lastEditedBy" : "3cd3a661-80f4-45b3-bae0-5a78fbaedc59",
        "tags" : [
        ]
      },
      {
        "id" : "0fb19344-0d7a-4e84-a991-b5faeedcf15d",
        "parentId" : "fcc73225-0dbc-41c7-95d7-e7ee6a1a0dc3",
        "authorId" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "body" : "Done.\n",
        "createdAt" : "2016-07-13T17:48:02Z",
        "updatedAt" : "2016-07-13T17:48:02Z",
        "lastEditedBy" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "tags" : [
        ]
      }
    ],
    "commit" : "d29b880efe482b02be41967f598fb40bcef8db80",
    "line" : null,
    "diffHunk" : "@@ -1,1 +179,183 @@\t// if conn times out, the NewClientConn will close it, so we will not end up\n\t// with hanging goroutines or open file descriptors.\n\tc, chans, reqs, err := ssh.NewClientConn(conn, addr, config)\n\tif err != nil {\n\t\treturn nil, err"
  },
  {
    "id" : "aef61903-c87f-4283-bd0a-4a83bf90ffc7",
    "prId" : 28805,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "80386a0c-75a6-4fe1-b1ca-75c3ea743301",
        "parentId" : null,
        "authorId" : "3cd3a661-80f4-45b3-bae0-5a78fbaedc59",
        "body" : "Does conn.SetDeadline break long-lived connections through the proxyDialer? (e.g. exec, attach). To test that, exec into a pod running a shell (e.g. `kubectl exec --namespace=kube-system kube-dns-v9-1234 -c kube2sky`), and leave it alone for > 2.5 minutes. If the shell is still alive, we're okay, but I'm guessing it won't be.\n",
        "createdAt" : "2016-07-12T00:33:36Z",
        "updatedAt" : "2016-07-13T17:47:19Z",
        "lastEditedBy" : "3cd3a661-80f4-45b3-bae0-5a78fbaedc59",
        "tags" : [
        ]
      }
    ],
    "commit" : "d29b880efe482b02be41967f598fb40bcef8db80",
    "line" : 51,
    "diffHunk" : "@@ -1,1 +172,176 @@\t\treturn nil, err\n\t}\n\tconn.SetDeadline(time.Now().Add(d.timeout))\n\t// set to 0 so that conn will not time out after Dial.\n\tdefer func() {"
  },
  {
    "id" : "a676bf7d-9bdf-4c93-8f48-3cf0e55a917a",
    "prId" : 28805,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c2b2f828-de5c-4bcf-977c-cd832c9ade8e",
        "parentId" : null,
        "authorId" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "body" : "I tested `kubectl exec redis-master-dep -c master -i -- bash -il`, it's alive after 150s. I think this defer call is effective.\n",
        "createdAt" : "2016-07-12T03:32:04Z",
        "updatedAt" : "2016-07-13T17:47:19Z",
        "lastEditedBy" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "tags" : [
        ]
      },
      {
        "id" : "09ca579b-4a11-4672-b1eb-08d3870f25b8",
        "parentId" : "c2b2f828-de5c-4bcf-977c-cd832c9ade8e",
        "authorId" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "body" : "@cjcullen could you take another look? I'll address your other comments if you think the approach is correct in general.\n",
        "createdAt" : "2016-07-13T00:00:04Z",
        "updatedAt" : "2016-07-13T17:47:19Z",
        "lastEditedBy" : "ca7e5a52-cab7-4f09-8ff8-da79f43339d4",
        "tags" : [
        ]
      }
    ],
    "commit" : "d29b880efe482b02be41967f598fb40bcef8db80",
    "line" : 54,
    "diffHunk" : "@@ -1,1 +175,179 @@\t// set to 0 so that conn will not time out after Dial.\n\tdefer func() {\n\t\tconn.SetDeadline(time.Time{})\n\t}()\n\t// if conn times out, the NewClientConn will close it, so we will not end up"
  },
  {
    "id" : "76f746ba-7fe2-4e56-ab5a-ebc7089680b4",
    "prId" : 23843,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b9abc97c-556c-48dc-970a-1d0d8e9f723e",
        "parentId" : null,
        "authorId" : "7766e039-aa4c-4476-9091-5cc8763fa8d6",
        "body" : "Leave a comment on why we chose 150 seconds\n",
        "createdAt" : "2016-04-04T23:18:49Z",
        "updatedAt" : "2016-04-04T23:35:38Z",
        "lastEditedBy" : "7766e039-aa4c-4476-9091-5cc8763fa8d6",
        "tags" : [
        ]
      },
      {
        "id" : "d1342b27-331f-4ab9-a7b3-923e1e364e09",
        "parentId" : "b9abc97c-556c-48dc-970a-1d0d8e9f723e",
        "authorId" : "3cd3a661-80f4-45b3-bae0-5a78fbaedc59",
        "body" : "Done.\n",
        "createdAt" : "2016-04-04T23:35:59Z",
        "updatedAt" : "2016-04-04T23:35:59Z",
        "lastEditedBy" : "3cd3a661-80f4-45b3-bae0-5a78fbaedc59",
        "tags" : [
        ]
      }
    ],
    "commit" : "cde4f6d613b42b06946a6b68b0d55f11e8aedadb",
    "line" : null,
    "diffHunk" : "@@ -1,1 +175,179 @@// 150 seconds is longer than the underlying default TCP backoff delay (127\n// seconds). This timeout is only intended to catch otherwise uncaught hangs.\nconst sshDialTimeout = 150 * time.Second\n\nvar realTimeoutDialer sshDialer = &timeoutDialer{&realSSHDialer{}, sshDialTimeout}"
  },
  {
    "id" : "88a1f642-7b56-4f1c-b40f-49e0df09a5cd",
    "prId" : 23843,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a6e88e72-71af-4d9c-887f-3169289b44d2",
        "parentId" : null,
        "authorId" : "7766e039-aa4c-4476-9091-5cc8763fa8d6",
        "body" : "I'm not super familiar with go's barrier model for order of execution across a channel send, but I'd guess it's safe to assume that the client variable gets set before err gets sent on the channel? The alternative would be to pass both the client and err via the channel.\n",
        "createdAt" : "2016-04-04T23:23:36Z",
        "updatedAt" : "2016-04-04T23:35:38Z",
        "lastEditedBy" : "7766e039-aa4c-4476-9091-5cc8763fa8d6",
        "tags" : [
        ]
      },
      {
        "id" : "4fc3ec0b-d6b5-411e-a537-13a8bce5b612",
        "parentId" : "a6e88e72-71af-4d9c-887f-3169289b44d2",
        "authorId" : "3cd3a661-80f4-45b3-bae0-5a78fbaedc59",
        "body" : "Yeah, it's safe: https://golang.org/ref/mem#tmp_7\n",
        "createdAt" : "2016-04-04T23:38:13Z",
        "updatedAt" : "2016-04-04T23:38:13Z",
        "lastEditedBy" : "3cd3a661-80f4-45b3-bae0-5a78fbaedc59",
        "tags" : [
        ]
      }
    ],
    "commit" : "cde4f6d613b42b06946a6b68b0d55f11e8aedadb",
    "line" : 34,
    "diffHunk" : "@@ -1,1 +185,189 @@\t\tdefer runtime.HandleCrash()\n\t\tvar err error\n\t\tclient, err = d.dialer.Dial(network, addr, config)\n\t\terrCh <- err\n\t}()"
  }
]