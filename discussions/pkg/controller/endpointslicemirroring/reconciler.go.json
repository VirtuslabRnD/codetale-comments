[
  {
    "id" : "65a73fc5-e4a2-4c0f-aa94-0974a591a4e0",
    "prId" : 98116,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/98116#pullrequestreview-579841583",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "da3fb162-0aa5-43e9-9d59-09470c20750d",
        "parentId" : null,
        "authorId" : "203dfb85-d185-4057-88b3-a1b4f09fd1fd",
        "body" : "we need apiequality, `reflect.Deepequal()` does differentiate between `nil` and `map[string]string{}`, and consider then different",
        "createdAt" : "2021-01-30T23:54:59Z",
        "updatedAt" : "2021-03-08T22:20:31Z",
        "lastEditedBy" : "203dfb85-d185-4057-88b3-a1b4f09fd1fd",
        "tags" : [
        ]
      }
    ],
    "commit" : "c421e22e2c6aa4d3fbe3abd7feb0035361539d22",
    "line" : 20,
    "diffHunk" : "@@ -1,1 +204,208 @@\t\ttotals = totalChanges(existingSlices[0], desiredSet)\n\t\tif totals.added == 0 && totals.updated == 0 && totals.removed == 0 &&\n\t\t\tapiequality.Semantic.DeepEqual(endpoints.Labels, compareLabels) &&\n\t\t\tapiequality.Semantic.DeepEqual(compareAnnotations, existingSlices[0].Annotations) {\n\t\t\treturn slices, totals"
  },
  {
    "id" : "92f526cc-28b7-4cd7-bb73-c8eaec371ee4",
    "prId" : 91637,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/91637#pullrequestreview-434391780",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "922fd543-0e50-4bfa-891e-50c50677ee10",
        "parentId" : null,
        "authorId" : "b714f738-aa05-4f49-a624-eaaf3e0cbb70",
        "body" : "we should emit an Event outside the loop if we see this",
        "createdAt" : "2020-06-18T06:45:00Z",
        "updatedAt" : "2020-07-06T19:44:10Z",
        "lastEditedBy" : "b714f738-aa05-4f49-a624-eaaf3e0cbb70",
        "tags" : [
        ]
      },
      {
        "id" : "6767cb20-a4ff-48b7-a40d-2ecb842c7bf0",
        "parentId" : "922fd543-0e50-4bfa-891e-50c50677ee10",
        "authorId" : "399a0f74-29de-4365-9ae5-f743ae5f278c",
        "body" : "Good call - updated to add a warning event below the loops.",
        "createdAt" : "2020-06-20T01:16:45Z",
        "updatedAt" : "2020-07-06T19:44:10Z",
        "lastEditedBy" : "399a0f74-29de-4365-9ae5-f743ae5f278c",
        "tags" : [
        ]
      }
    ],
    "commit" : "fa59370e9348e3f04fdf86defa1b8de132e39562",
    "line" : 87,
    "diffHunk" : "@@ -1,1 +85,89 @@\t\t\t} else {\n\t\t\t\tnumInvalidAddresses++\n\t\t\t\tklog.Warningf(\"Address in %s/%s Endpoints is not a valid IP, it will not be mirrored to an EndpointSlice: %s\", endpoints.Namespace, endpoints.Name, address.IP)\n\t\t\t}\n\t\t}"
  },
  {
    "id" : "30933863-9943-48a7-9b89-7afc6d148aac",
    "prId" : 91637,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/91637#pullrequestreview-434391797",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "eae3404f-ed27-420a-9ff6-8a550f230726",
        "parentId" : null,
        "authorId" : "b714f738-aa05-4f49-a624-eaaf3e0cbb70",
        "body" : "see above, record the fact that a warning occurred and emit a single warning outside the loop.",
        "createdAt" : "2020-06-18T06:47:49Z",
        "updatedAt" : "2020-07-06T19:44:10Z",
        "lastEditedBy" : "b714f738-aa05-4f49-a624-eaaf3e0cbb70",
        "tags" : [
        ]
      },
      {
        "id" : "32e7dd39-bf6b-4bf8-abe7-7c55492daeba",
        "parentId" : "eae3404f-ed27-420a-9ff6-8a550f230726",
        "authorId" : "399a0f74-29de-4365-9ae5-f743ae5f278c",
        "body" : "Good call - updated to add a warning event below the loops.",
        "createdAt" : "2020-06-20T01:16:56Z",
        "updatedAt" : "2020-07-06T19:44:10Z",
        "lastEditedBy" : "399a0f74-29de-4365-9ae5-f743ae5f278c",
        "tags" : [
        ]
      }
    ],
    "commit" : "fa59370e9348e3f04fdf86defa1b8de132e39562",
    "line" : 102,
    "diffHunk" : "@@ -1,1 +100,104 @@\t\t\t} else {\n\t\t\t\tnumInvalidAddresses++\n\t\t\t\tklog.Warningf(\"Address in %s/%s Endpoints is not a valid IP, it will not be mirrored to an EndpointSlice: %s\", endpoints.Namespace, endpoints.Name, address.IP)\n\t\t\t}\n\t\t}"
  },
  {
    "id" : "1ccb6dae-0f10-4d81-b5d4-571c1462d37c",
    "prId" : 91637,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/91637#pullrequestreview-440302175",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a47a89ff-390e-4149-b188-8c02619533cc",
        "parentId" : null,
        "authorId" : "b714f738-aa05-4f49-a624-eaaf3e0cbb70",
        "body" : "The semantics of this is little weird.\r\n\r\nImagine that the corresponding Endpoint has been marked for deletion and the user scales up their endpoints after that. Those endpoints will randomly be part of the resultant set. We are still updating the endpoint set, but not in its entirety. \r\n\r\nDoes it make more sense to not have special behavior for non-Finalized resources? This makes it harder reason about. Are we being too clever here?\r\n\r\n",
        "createdAt" : "2020-06-28T17:32:29Z",
        "updatedAt" : "2020-07-06T19:44:11Z",
        "lastEditedBy" : "b714f738-aa05-4f49-a624-eaaf3e0cbb70",
        "tags" : [
        ]
      },
      {
        "id" : "eed697d5-3b13-48f7-92e4-6d567ed2881c",
        "parentId" : "a47a89ff-390e-4149-b188-8c02619533cc",
        "authorId" : "399a0f74-29de-4365-9ae5-f743ae5f278c",
        "body" : "This is mirroring the approach we decided on in https://github.com/kubernetes/kubernetes/pull/91311. The goal here is to not conflict with garbage collection while still supporting existing EndpointSlices in the case deletion takes a long time. In the case of this controller with a 1:1 mapping between EndpointSlice and EndpointSubset, it seems unlikely that an EndpointSlice would be removed for any reason other than garbage collection when there is a non nil deletion timestamp.",
        "createdAt" : "2020-06-30T18:59:46Z",
        "updatedAt" : "2020-07-06T19:44:11Z",
        "lastEditedBy" : "399a0f74-29de-4365-9ae5-f743ae5f278c",
        "tags" : [
        ]
      }
    ],
    "commit" : "fa59370e9348e3f04fdf86defa1b8de132e39562",
    "line" : 239,
    "diffHunk" : "@@ -1,1 +237,241 @@\t// Don't create more EndpointSlices if corresponding Endpoints resource is\n\t// being deleted.\n\tif endpoints.DeletionTimestamp == nil {\n\t\tfor _, endpointSlice := range slices.toCreate {\n\t\t\tcreatedSlice, err := epsClient.Create(context.TODO(), endpointSlice, metav1.CreateOptions{})"
  },
  {
    "id" : "4e4e487b-f96b-4328-9cb1-4672916cf9fc",
    "prId" : 91637,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/91637#pullrequestreview-440302279",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "926f5c50-db52-4813-8e16-24065e345641",
        "parentId" : null,
        "authorId" : "b714f738-aa05-4f49-a624-eaaf3e0cbb70",
        "body" : "might make below easier to read\r\n\r\n`epsClient := r.client.DiscoveryV1beta1().EndpointSlices(endpoints.Namespace)`",
        "createdAt" : "2020-06-28T17:35:37Z",
        "updatedAt" : "2020-07-06T19:44:11Z",
        "lastEditedBy" : "b714f738-aa05-4f49-a624-eaaf3e0cbb70",
        "tags" : [
        ]
      },
      {
        "id" : "a7c50ecc-aaa2-4a75-b605-15312f117f53",
        "parentId" : "926f5c50-db52-4813-8e16-24065e345641",
        "authorId" : "399a0f74-29de-4365-9ae5-f743ae5f278c",
        "body" : "Updated, thanks!",
        "createdAt" : "2020-06-30T18:59:53Z",
        "updatedAt" : "2020-07-06T19:44:11Z",
        "lastEditedBy" : "399a0f74-29de-4365-9ae5-f743ae5f278c",
        "tags" : [
        ]
      }
    ],
    "commit" : "fa59370e9348e3f04fdf86defa1b8de132e39562",
    "line" : 237,
    "diffHunk" : "@@ -1,1 +235,239 @@\tepsClient := r.client.DiscoveryV1beta1().EndpointSlices(endpoints.Namespace)\n\n\t// Don't create more EndpointSlices if corresponding Endpoints resource is\n\t// being deleted.\n\tif endpoints.DeletionTimestamp == nil {"
  },
  {
    "id" : "b1569aa8-36b9-4b3e-bee8-6a023874da01",
    "prId" : 91637,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/91637#pullrequestreview-441292859",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a37d3062-9d82-4e2f-93cf-f591788ef46a",
        "parentId" : null,
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "Please - some comments on things like this would help :)",
        "createdAt" : "2020-07-01T21:05:00Z",
        "updatedAt" : "2020-07-06T19:44:11Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      },
      {
        "id" : "c027bafc-928a-4342-94dc-fec32284ea2a",
        "parentId" : "a37d3062-9d82-4e2f-93cf-f591788ef46a",
        "authorId" : "399a0f74-29de-4365-9ae5-f743ae5f278c",
        "body" : "Good call, I had some comments about this elsewhere but completely missed this place. I've added better comments for the surrounding reconciler fields as well.",
        "createdAt" : "2020-07-02T01:32:20Z",
        "updatedAt" : "2020-07-06T19:44:11Z",
        "lastEditedBy" : "399a0f74-29de-4365-9ae5-f743ae5f278c",
        "tags" : [
        ]
      }
    ],
    "commit" : "fa59370e9348e3f04fdf86defa1b8de132e39562",
    "line" : 53,
    "diffHunk" : "@@ -1,1 +51,55 @@\t// should be added to an EndpointSlice for an EndpointSubset. This allows\n\t// for a simple 1:1 mapping between EndpointSubset and EndpointSlice.\n\tmaxEndpointsPerSubset int32\n\n\t// metricsCache tracks values for total numbers of desired endpoints as well"
  }
]