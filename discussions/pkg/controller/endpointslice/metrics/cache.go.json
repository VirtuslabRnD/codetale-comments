[
  {
    "id" : "f79ed45c-4fdf-45f3-bf61-0163d79de903",
    "prId" : 83257,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/83257#pullrequestreview-302270585",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "33944543-3842-47ed-a7a4-cd1e1dbbc9cc",
        "parentId" : null,
        "authorId" : "e83108b8-1fb2-416b-9298-d5b70c14f708",
        "body" : "add comments for each parameter here. ",
        "createdAt" : "2019-10-14T20:25:26Z",
        "updatedAt" : "2019-10-24T00:33:50Z",
        "lastEditedBy" : "e83108b8-1fb2-416b-9298-d5b70c14f708",
        "tags" : [
        ]
      },
      {
        "id" : "965861f1-f197-4f75-87ff-4144f388351e",
        "parentId" : "33944543-3842-47ed-a7a4-cd1e1dbbc9cc",
        "authorId" : "399a0f74-29de-4365-9ae5-f743ae5f278c",
        "body" : "Done, thanks!",
        "createdAt" : "2019-10-16T00:43:52Z",
        "updatedAt" : "2019-10-24T00:33:50Z",
        "lastEditedBy" : "399a0f74-29de-4365-9ae5-f743ae5f278c",
        "tags" : [
        ]
      }
    ],
    "commit" : "724b142f076d3382372e014f2797dc72cf42e351",
    "line" : 40,
    "diffHunk" : "@@ -1,1 +38,42 @@\t// maxEndpointsPerSlice references the maximum number of endpoints that\n\t// should be added to an EndpointSlice.\n\tmaxEndpointsPerSlice int32\n\n\t// lock protects changes to numEndpoints and cache."
  },
  {
    "id" : "535b8f9b-bbcb-4432-a044-4caaba4e7009",
    "prId" : 83257,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/83257#pullrequestreview-302270550",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "72042b44-5eca-4cf9-8f4d-a5fe55861769",
        "parentId" : null,
        "authorId" : "e83108b8-1fb2-416b-9298-d5b70c14f708",
        "body" : "Add a comment explaining this algorithm. ",
        "createdAt" : "2019-10-14T20:27:22Z",
        "updatedAt" : "2019-10-24T00:33:50Z",
        "lastEditedBy" : "e83108b8-1fb2-416b-9298-d5b70c14f708",
        "tags" : [
        ]
      },
      {
        "id" : "43048348-c192-4788-b7b6-ed8e94d96ef4",
        "parentId" : "72042b44-5eca-4cf9-8f4d-a5fe55861769",
        "authorId" : "399a0f74-29de-4365-9ae5-f743ae5f278c",
        "body" : "Done, thanks!",
        "createdAt" : "2019-10-16T00:43:40Z",
        "updatedAt" : "2019-10-24T00:33:50Z",
        "lastEditedBy" : "399a0f74-29de-4365-9ae5-f743ae5f278c",
        "tags" : [
        ]
      }
    ],
    "commit" : "724b142f076d3382372e014f2797dc72cf42e351",
    "line" : 107,
    "diffHunk" : "@@ -1,1 +105,109 @@\t// To keep numEndpoints up to date, add the difference between the number of\n\t// endpoints in the provided spCache and any spCache it might be replacing.\n\tc.numEndpoints = c.numEndpoints + currNumEndpoints - prevNumEndpoints\n\n\tc.cache[serviceNN] = spCache"
  },
  {
    "id" : "d2a46c02-0ff7-4a22-9c35-f8b30a8d0739",
    "prId" : 83257,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/83257#pullrequestreview-302270517",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "70875989-1e7e-45e2-8c09-80b711499f1e",
        "parentId" : null,
        "authorId" : "e83108b8-1fb2-416b-9298-d5b70c14f708",
        "body" : "you need to delete service from globalCache first, right? \r\nOtherwise the efficiency will be off. ",
        "createdAt" : "2019-10-14T20:28:46Z",
        "updatedAt" : "2019-10-24T00:33:50Z",
        "lastEditedBy" : "e83108b8-1fb2-416b-9298-d5b70c14f708",
        "tags" : [
        ]
      },
      {
        "id" : "210986e8-9bba-4302-a7b2-51f6d80c6e00",
        "parentId" : "70875989-1e7e-45e2-8c09-80b711499f1e",
        "authorId" : "399a0f74-29de-4365-9ae5-f743ae5f278c",
        "body" : "Good catch, thanks!",
        "createdAt" : "2019-10-16T00:43:30Z",
        "updatedAt" : "2019-10-24T00:33:50Z",
        "lastEditedBy" : "399a0f74-29de-4365-9ae5-f743ae5f278c",
        "tags" : [
        ]
      }
    ],
    "commit" : "724b142f076d3382372e014f2797dc72cf42e351",
    "line" : 122,
    "diffHunk" : "@@ -1,1 +120,124 @@\t\tc.numEndpoints = c.numEndpoints - spCache.numEndpoints()\n\t\tdelete(c.cache, serviceNN)\n\t\tc.updateMetrics()\n\t}\n}"
  },
  {
    "id" : "a5c2dd99-4063-4d82-b0a0-ed3f654565b9",
    "prId" : 83257,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/83257#pullrequestreview-302952988",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e9c0e20f-b993-46e8-9335-eb98dd07ceef",
        "parentId" : null,
        "authorId" : "b714f738-aa05-4f49-a624-eaaf3e0cbb70",
        "body" : "Is maxEndpointsPerSlice ever updated from creation?\r\n\r\nUsually lock is in a block with guarded vars to make the relationship clear:\r\n```\r\nfoo\r\nbar\r\n\r\nlock\r\nlockedFoo\r\nlockedBar\r\n```",
        "createdAt" : "2019-10-16T20:51:09Z",
        "updatedAt" : "2019-10-24T00:33:50Z",
        "lastEditedBy" : "b714f738-aa05-4f49-a624-eaaf3e0cbb70",
        "tags" : [
        ]
      },
      {
        "id" : "fc3f6f6a-7468-45aa-bf70-c7ff2acb143d",
        "parentId" : "e9c0e20f-b993-46e8-9335-eb98dd07ceef",
        "authorId" : "399a0f74-29de-4365-9ae5-f743ae5f278c",
        "body" : "Makes sense, thanks for the tip!",
        "createdAt" : "2019-10-17T00:48:00Z",
        "updatedAt" : "2019-10-24T00:33:50Z",
        "lastEditedBy" : "399a0f74-29de-4365-9ae5-f743ae5f278c",
        "tags" : [
        ]
      }
    ],
    "commit" : "724b142f076d3382372e014f2797dc72cf42e351",
    "line" : 40,
    "diffHunk" : "@@ -1,1 +38,42 @@\t// maxEndpointsPerSlice references the maximum number of endpoints that\n\t// should be added to an EndpointSlice.\n\tmaxEndpointsPerSlice int32\n\n\t// lock protects changes to numEndpoints and cache."
  },
  {
    "id" : "59063a58-e484-4a69-aaa6-ae6577e23743",
    "prId" : 83257,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/83257#pullrequestreview-306264254",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f4c1cffa-0f91-431e-ba5d-5f06778335ee",
        "parentId" : null,
        "authorId" : "b714f738-aa05-4f49-a624-eaaf3e0cbb70",
        "body" : "comment about holding the lock",
        "createdAt" : "2019-10-17T19:57:39Z",
        "updatedAt" : "2019-10-24T00:33:50Z",
        "lastEditedBy" : "b714f738-aa05-4f49-a624-eaaf3e0cbb70",
        "tags" : [
        ]
      },
      {
        "id" : "7a053272-18e5-4436-9210-8c8395d7c628",
        "parentId" : "f4c1cffa-0f91-431e-ba5d-5f06778335ee",
        "authorId" : "399a0f74-29de-4365-9ae5-f743ae5f278c",
        "body" : "Done, thanks!",
        "createdAt" : "2019-10-24T00:34:23Z",
        "updatedAt" : "2019-10-24T00:34:23Z",
        "lastEditedBy" : "399a0f74-29de-4365-9ae5-f743ae5f278c",
        "tags" : [
        ]
      }
    ],
    "commit" : "724b142f076d3382372e014f2797dc72cf42e351",
    "line" : 147,
    "diffHunk" : "@@ -1,1 +145,149 @@// updateMetrics updates metrics with the values from this Cache.\n// Must be called holding lock.\nfunc (c *Cache) updateMetrics() {\n\tmUpdate := c.desiredAndActualSlices()\n\tNumEndpointSlices.WithLabelValues().Set(float64(mUpdate.actual))"
  }
]