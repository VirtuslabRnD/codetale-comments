[
  {
    "id" : "905fc4b4-ae2e-4707-9a46-8a1cdfa285f5",
    "prId" : 102022,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/102022#pullrequestreview-664510424",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7b5cf67d-6b96-4ed9-adfb-1e4aa10c94b2",
        "parentId" : null,
        "authorId" : "31fbce73-ef64-43f8-9faa-047479d8fc32",
        "body" : "add this change to the release note",
        "createdAt" : "2021-05-14T19:58:00Z",
        "updatedAt" : "2021-05-14T19:58:53Z",
        "lastEditedBy" : "31fbce73-ef64-43f8-9faa-047479d8fc32",
        "tags" : [
        ]
      },
      {
        "id" : "a9979528-15b0-4ce1-9c3a-5a84601f410c",
        "parentId" : "7b5cf67d-6b96-4ed9-adfb-1e4aa10c94b2",
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "Definitely, it's a breaking metrics change.",
        "createdAt" : "2021-05-19T21:52:12Z",
        "updatedAt" : "2021-05-19T21:53:02Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      },
      {
        "id" : "7c2c340a-c314-48fa-8845-45bc7484f586",
        "parentId" : "7b5cf67d-6b96-4ed9-adfb-1e4aa10c94b2",
        "authorId" : "31fbce73-ef64-43f8-9faa-047479d8fc32",
        "body" : "Not really breaking considering that this metric didn't hit a release yet.",
        "createdAt" : "2021-05-20T15:09:19Z",
        "updatedAt" : "2021-05-20T15:09:19Z",
        "lastEditedBy" : "31fbce73-ef64-43f8-9faa-047479d8fc32",
        "tags" : [
        ]
      }
    ],
    "commit" : "ba708e5fc9ed46c0afe6f60d6baf18bc1f5ffe0f",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +41,45 @@\t\t\tBuckets:        metrics.ExponentialBuckets(0.001, 2, 15),\n\t\t},\n\t\t[]string{\"completion_mode\", \"result\", \"action\"},\n\t)\n\t// JobSyncNum tracks the number of Job syncs. Possible label values:"
  },
  {
    "id" : "e9268355-0a97-4ab0-b533-a5eadce66862",
    "prId" : 102022,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/102022#pullrequestreview-687565563",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2dfde921-22a7-4306-974f-fe0f693384ee",
        "parentId" : null,
        "authorId" : "b7d2a698-a6e1-4031-bb69-8b45505badb5",
        "body" : "I haven't seen approval from the monitoring team on this change, yet. ",
        "createdAt" : "2021-06-18T15:47:01Z",
        "updatedAt" : "2021-06-18T15:47:07Z",
        "lastEditedBy" : "b7d2a698-a6e1-4031-bb69-8b45505badb5",
        "tags" : [
        ]
      },
      {
        "id" : "011dc860-e32f-461e-a0e1-d69edb27854e",
        "parentId" : "2dfde921-22a7-4306-974f-fe0f693384ee",
        "authorId" : "31fbce73-ef64-43f8-9faa-047479d8fc32",
        "body" : "@logicalhan PTAL",
        "createdAt" : "2021-06-18T16:04:18Z",
        "updatedAt" : "2021-06-18T16:04:18Z",
        "lastEditedBy" : "31fbce73-ef64-43f8-9faa-047479d8fc32",
        "tags" : [
        ]
      },
      {
        "id" : "d35d1c79-72e7-426a-9e28-db7b9e6cc2e2",
        "parentId" : "2dfde921-22a7-4306-974f-fe0f693384ee",
        "authorId" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "body" : "@logicalhan can you please review the metrics changes?",
        "createdAt" : "2021-06-18T16:16:09Z",
        "updatedAt" : "2021-06-18T16:16:09Z",
        "lastEditedBy" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "tags" : [
        ]
      }
    ],
    "commit" : "ba708e5fc9ed46c0afe6f60d6baf18bc1f5ffe0f",
    "line" : 10,
    "diffHunk" : "@@ -1,1 +32,36 @@\t//   completion_mode: Indexed, NonIndexed\n\t//   result:          success, error\n\t//   action:          reconciling, tracking, pods_created, pods_deleted\n\tJobSyncDurationSeconds = metrics.NewHistogramVec(\n\t\t&metrics.HistogramOpts{"
  },
  {
    "id" : "8c69dbe1-36f6-40dd-a0fa-29aed1c0d8f1",
    "prId" : 101292,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/101292#pullrequestreview-642483937",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5883b839-65c4-4363-886d-91e9172ecce3",
        "parentId" : null,
        "authorId" : "31fbce73-ef64-43f8-9faa-047479d8fc32",
        "body" : "The name of this package suggests it's deprecated. We can probably use prometheus as suggested here https://github.com/kubernetes/community/blob/master/contributors/devel/sig-instrumentation/instrumentation.md#quick-start",
        "createdAt" : "2021-04-20T21:26:08Z",
        "updatedAt" : "2021-05-05T17:04:06Z",
        "lastEditedBy" : "31fbce73-ef64-43f8-9faa-047479d8fc32",
        "tags" : [
        ]
      },
      {
        "id" : "6105c5f0-dc7c-492b-9a57-9d7c3dd3ada7",
        "parentId" : "5883b839-65c4-4363-886d-91e9172ecce3",
        "authorId" : "df1239cd-0c05-4df2-8edb-2a21070d1cf0",
        "body" : "The code of package metrics seems only wraps the prometheus, it also uses prometheus inside. https://github.com/kubernetes/kubernetes/blob/master/staging/src/k8s.io/component-base/metrics/histogram.go#L95",
        "createdAt" : "2021-04-21T12:53:26Z",
        "updatedAt" : "2021-05-05T17:04:06Z",
        "lastEditedBy" : "df1239cd-0c05-4df2-8edb-2a21070d1cf0",
        "tags" : [
        ]
      },
      {
        "id" : "3826b4e6-2961-41d3-82ed-d8f5b1e41832",
        "parentId" : "5883b839-65c4-4363-886d-91e9172ecce3",
        "authorId" : "31fbce73-ef64-43f8-9faa-047479d8fc32",
        "body" : "In that sense, there is no need for using legacyregistry, just use prometheus directly. Note that the guide was updated in February, so it's pretty up to date.",
        "createdAt" : "2021-04-21T13:28:23Z",
        "updatedAt" : "2021-05-05T17:04:06Z",
        "lastEditedBy" : "31fbce73-ef64-43f8-9faa-047479d8fc32",
        "tags" : [
        ]
      },
      {
        "id" : "f585752f-79e3-4b29-87f9-fa87f3b7c85e",
        "parentId" : "5883b839-65c4-4363-886d-91e9172ecce3",
        "authorId" : "df1239cd-0c05-4df2-8edb-2a21070d1cf0",
        "body" : "but the example in that guide was updated 6 years ago.\r\nhttps://github.com/kubernetes/kubernetes/blob/cd3299307d44665564e1a5c77d0daa0286603ff5/pkg/apiserver/apiserver.go#L53",
        "createdAt" : "2021-04-21T15:15:20Z",
        "updatedAt" : "2021-05-05T17:04:06Z",
        "lastEditedBy" : "df1239cd-0c05-4df2-8edb-2a21070d1cf0",
        "tags" : [
        ]
      },
      {
        "id" : "937c3efc-e85d-4693-ad5e-fb39c427dbfa",
        "parentId" : "5883b839-65c4-4363-886d-91e9172ecce3",
        "authorId" : "31fbce73-ef64-43f8-9faa-047479d8fc32",
        "body" : "@logicalhan what is the up-to-date recommendation?",
        "createdAt" : "2021-04-21T15:52:41Z",
        "updatedAt" : "2021-05-05T17:04:06Z",
        "lastEditedBy" : "31fbce73-ef64-43f8-9faa-047479d8fc32",
        "tags" : [
        ]
      },
      {
        "id" : "f79b4485-2667-43b1-8b9c-ff31a60886e5",
        "parentId" : "5883b839-65c4-4363-886d-91e9172ecce3",
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "You can't use prometheus directly, we actually have CI checks which should block you from merging PRs that use prometheus. The legacyregistry is deprecated because we want to eventually move off of using globals, which should happen hopefully this upcoming release. ",
        "createdAt" : "2021-04-22T17:06:21Z",
        "updatedAt" : "2021-05-05T17:04:06Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      },
      {
        "id" : "0e4266be-50bb-4705-b0c2-9b7392d01223",
        "parentId" : "5883b839-65c4-4363-886d-91e9172ecce3",
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "So the recommendation is to use the wrappers (from component base) and currently legacyregistry unless you are exposing a new metrics endpoint. I've submitted a PR to update the docs (https://github.com/kubernetes/community/pull/5737), sorry for the confusion.",
        "createdAt" : "2021-04-22T17:27:02Z",
        "updatedAt" : "2021-05-05T17:04:06Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      }
    ],
    "commit" : "0c99f29f98f3c58957bbf8edef27c939bfdbfe3b",
    "line" : 23,
    "diffHunk" : "@@ -1,1 +21,25 @@\n\t\"k8s.io/component-base/metrics\"\n\t\"k8s.io/component-base/metrics/legacyregistry\"\n)\n"
  }
]