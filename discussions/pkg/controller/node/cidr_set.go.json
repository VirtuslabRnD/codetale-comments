[
  {
    "id" : "3d28596c-f279-4cee-8d85-ad5ed2b92f24",
    "prId" : 43586,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/43586#pullrequestreview-38428218",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "201e3e82-a37d-40df-856a-8580867ebcfa",
        "parentId" : null,
        "authorId" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "body" : "Most of the code that underlies our allocation set logic assumes small ranges.  Even though this is just node for now, we're going to have to have some guards against wide mode ranges.  Some things that allocateNex my are backed by an uncompressed bitmap in etcd.  Those will all need max cidr guards",
        "createdAt" : "2017-04-06T04:48:42Z",
        "updatedAt" : "2017-08-03T17:13:34Z",
        "lastEditedBy" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "tags" : [
        ]
      },
      {
        "id" : "a8e3f4f9-42b5-4b90-a6e8-da75286a39b1",
        "parentId" : "201e3e82-a37d-40df-856a-8580867ebcfa",
        "authorId" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "body" : "Wide \"network\" ranges and \"allocateNext\"",
        "createdAt" : "2017-04-06T04:49:23Z",
        "updatedAt" : "2017-08-03T17:13:34Z",
        "lastEditedBy" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "tags" : [
        ]
      },
      {
        "id" : "d7c1224b-5bcd-4ac1-b19f-287a61934ab9",
        "parentId" : "201e3e82-a37d-40df-856a-8580867ebcfa",
        "authorId" : "cd7571ee-9c0c-4333-87be-61f1cb410e46",
        "body" : "I will look at that. I also updated the special notes section, this v6 code assumes the subnets be at least /64  (maximum 64 bits of prefix)\r\nThe reason for this is described in \r\nhttps://github.com/containernetworking/cni/pull/394#issuecomment-287090075\r\n",
        "createdAt" : "2017-04-06T19:08:24Z",
        "updatedAt" : "2017-08-03T17:13:34Z",
        "lastEditedBy" : "cd7571ee-9c0c-4333-87be-61f1cb410e46",
        "tags" : [
        ]
      },
      {
        "id" : "06a90f65-6977-4999-a782-aa942402b914",
        "parentId" : "201e3e82-a37d-40df-856a-8580867ebcfa",
        "authorId" : "cd7571ee-9c0c-4333-87be-61f1cb410e46",
        "body" : "@smarterclayton I updated the review, for the comments on the allocation logic and the bitmap I have a check to limit the bitmap size. Let me know if this addresses your concern. Also let me know if this should be applied to v4 as well as v6.",
        "createdAt" : "2017-04-18T01:34:35Z",
        "updatedAt" : "2017-08-03T17:13:34Z",
        "lastEditedBy" : "cd7571ee-9c0c-4333-87be-61f1cb410e46",
        "tags" : [
        ]
      },
      {
        "id" : "6fe4d142-296f-47e3-8f9a-9f99ebcf73bd",
        "parentId" : "201e3e82-a37d-40df-856a-8580867ebcfa",
        "authorId" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "body" : "That's fine, add a todo / open an issue that sparse ranges should be better supported.  There are enough sparse bitfield compression algos that we could have much larger ranges at some point in the future. ",
        "createdAt" : "2017-04-18T02:51:08Z",
        "updatedAt" : "2017-08-03T17:13:34Z",
        "lastEditedBy" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "tags" : [
        ]
      },
      {
        "id" : "7bfda534-9ea1-42c2-bd2e-fca57869ee79",
        "parentId" : "201e3e82-a37d-40df-856a-8580867ebcfa",
        "authorId" : "cd7571ee-9c0c-4333-87be-61f1cb410e46",
        "body" : "The todo was added, as well as opened the bug for the bitmap. Any other comments?",
        "createdAt" : "2017-05-16T15:41:16Z",
        "updatedAt" : "2017-08-03T17:13:34Z",
        "lastEditedBy" : "cd7571ee-9c0c-4333-87be-61f1cb410e46",
        "tags" : [
        ]
      }
    ],
    "commit" : "5e96523913d265a3472922032a18fb0987db0bd2",
    "line" : 18,
    "diffHunk" : "@@ -1,1 +49,53 @@\tclusterMaskSize, _ := clusterMask.Size()\n\n\tvar maxCIDRs int\n\tif ((clusterCIDR.IP.To4() == nil) && (subNetMaskSize-clusterMaskSize > clusterSubnetMaxDiff)) || (subNetMaskSize > maxPrefixLength) {\n\t\tmaxCIDRs = 0"
  },
  {
    "id" : "03587c28-196d-42f9-be16-6cbc6f859988",
    "prId" : 43586,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/43586#pullrequestreview-52667165",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "45dce322-77d9-4905-8596-76cf518445aa",
        "parentId" : null,
        "authorId" : "b714f738-aa05-4f49-a624-eaaf3e0cbb70",
        "body" : "Shouldn't this result in a error creating the cidrSet? I would rather it fail here than to have all of the allocation methods fail below...",
        "createdAt" : "2017-07-25T06:07:02Z",
        "updatedAt" : "2017-08-03T17:13:34Z",
        "lastEditedBy" : "b714f738-aa05-4f49-a624-eaaf3e0cbb70",
        "tags" : [
        ]
      },
      {
        "id" : "a2bd40bc-9e6b-42c8-aa7a-c9c76540caf8",
        "parentId" : "45dce322-77d9-4905-8596-76cf518445aa",
        "authorId" : "cd7571ee-9c0c-4333-87be-61f1cb410e46",
        "body" : "ok, I will add this. This will cause a change in the calling function, so I will add this change to PR#45792\r\nwhich is dependent on this commit.",
        "createdAt" : "2017-07-27T14:08:34Z",
        "updatedAt" : "2017-08-03T17:13:34Z",
        "lastEditedBy" : "cd7571ee-9c0c-4333-87be-61f1cb410e46",
        "tags" : [
        ]
      }
    ],
    "commit" : "5e96523913d265a3472922032a18fb0987db0bd2",
    "line" : 20,
    "diffHunk" : "@@ -1,1 +51,55 @@\tvar maxCIDRs int\n\tif ((clusterCIDR.IP.To4() == nil) && (subNetMaskSize-clusterMaskSize > clusterSubnetMaxDiff)) || (subNetMaskSize > maxPrefixLength) {\n\t\tmaxCIDRs = 0\n\t} else {\n\t\tmaxCIDRs = 1 << uint32(subNetMaskSize-clusterMaskSize)"
  },
  {
    "id" : "afa19b6f-0d59-4bc7-9e29-a9cfaa433278",
    "prId" : 43586,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/43586#pullrequestreview-52667165",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8de8df1f-f1cf-4ee5-8ada-afd3cfd23d51",
        "parentId" : null,
        "authorId" : "b714f738-aa05-4f49-a624-eaaf3e0cbb70",
        "body" : "Shouldn't this be an error?",
        "createdAt" : "2017-07-25T06:11:37Z",
        "updatedAt" : "2017-08-03T17:13:34Z",
        "lastEditedBy" : "b714f738-aa05-4f49-a624-eaaf3e0cbb70",
        "tags" : [
        ]
      },
      {
        "id" : "64c56d8e-6b4c-4107-a789-448ee982e11b",
        "parentId" : "8de8df1f-f1cf-4ee5-8ada-afd3cfd23d51",
        "authorId" : "cd7571ee-9c0c-4333-87be-61f1cb410e46",
        "body" : "thanks, added the error",
        "createdAt" : "2017-07-27T14:09:15Z",
        "updatedAt" : "2017-08-03T17:13:34Z",
        "lastEditedBy" : "cd7571ee-9c0c-4333-87be-61f1cb410e46",
        "tags" : [
        ]
      }
    ],
    "commit" : "5e96523913d265a3472922032a18fb0987db0bd2",
    "line" : 87,
    "diffHunk" : "@@ -1,1 +120,124 @@\tvar ipSize int\n\n\tif cidr == nil {\n\t\treturn -1, -1, fmt.Errorf(\"Error getting indices for cluster cidr %v, cidr is nil\", s.clusterCIDR)\n\t}"
  }
]