[
  {
    "id" : "bb80447f-6b8b-4e48-b92b-580090bccf69",
    "prId" : 7704,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "306e61fc-7fcb-451d-b73b-869f16790742",
        "parentId" : null,
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "This means that, if I allocate a /16 for portal_net, this object will be 8 KB.  I guess that's not too bad.  I hope nobody allocates a /9\n",
        "createdAt" : "2015-05-08T04:37:11Z",
        "updatedAt" : "2015-05-08T20:04:16Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      },
      {
        "id" : "f748e9d3-3182-4a5f-9d20-fa437996b58e",
        "parentId" : "306e61fc-7fcb-451d-b73b-869f16790742",
        "authorId" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "body" : "We can just switch to RLE and allocate to fill the available space, which means that this can be reduced to on average 4 bytes.  random isn't really useful except to discourage assuming count.  So we can easily allocate in a way to minimize an RLE encoding.\n\n> On May 8, 2015, at 12:37 AM, Tim Hockin notifications@github.com wrote:\n> \n> In pkg/registry/service/ipallocator/allocator.go:\n> \n> > -   if offset < 0 || offset >= r.max {\n> > -       return false\n> > -   }\n> >   +\n> > -   r.lock.Lock()\n> > -   defer r.lock.Unlock()\n> >   +\n> > -   return r.allocated.Bit(offset) == 1\n> >   +}\n> >   +\n> >   +// Snapshot saves the current state of the pool.\n> >   +func (r _Range) Snapshot() (_net.IPNet, []byte) {\n> > -   r.lock.Lock()\n> > -   defer r.lock.Unlock()\n> >   +\n> > -   return r.net, r.allocated.Bytes()\n> >   This means that, if I allocate a /16 for portal_net, this object will be 8 KB. I guess that's not too bad. I hope nobody allocates a /9\n> \n> â€”\n> Reply to this email directly or view it on GitHub.\n",
        "createdAt" : "2015-05-08T04:51:35Z",
        "updatedAt" : "2015-05-08T20:04:16Z",
        "lastEditedBy" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "tags" : [
        ]
      },
      {
        "id" : "982def97-f117-4a34-8f51-d59556de3cb3",
        "parentId" : "306e61fc-7fcb-451d-b73b-869f16790742",
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "Yeah, I forget why switching to random was important..\n",
        "createdAt" : "2015-05-08T04:57:56Z",
        "updatedAt" : "2015-05-08T20:04:16Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      }
    ],
    "commit" : "8bbb64cd8bb225bc725e8577b66264a867280502",
    "line" : 203,
    "diffHunk" : "@@ -1,1 +201,205 @@\tdefer r.lock.Unlock()\n\n\treturn r.net, r.allocated.Bytes()\n}\n"
  }
]