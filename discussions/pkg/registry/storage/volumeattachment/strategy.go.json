[
  {
    "id" : "bff0e923-e86e-40e8-888c-e05dcc145356",
    "prId" : 77703,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/77703#pullrequestreview-238198949",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "791e5e27-537a-48c2-9b07-367f628c1cab",
        "parentId" : null,
        "authorId" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "body" : "can you add unit tests for these",
        "createdAt" : "2019-05-10T01:43:17Z",
        "updatedAt" : "2019-05-30T09:35:54Z",
        "lastEditedBy" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "tags" : [
        ]
      },
      {
        "id" : "ce7ca66a-15d9-4366-9f7e-f004a6ccd3fc",
        "parentId" : "791e5e27-537a-48c2-9b07-367f628c1cab",
        "authorId" : "98986d5f-c846-4478-8363-8a016e3d6b89",
        "body" : "Done",
        "createdAt" : "2019-05-16T06:31:19Z",
        "updatedAt" : "2019-05-30T09:35:54Z",
        "lastEditedBy" : "98986d5f-c846-4478-8363-8a016e3d6b89",
        "tags" : [
        ]
      }
    ],
    "commit" : "de7be9d6133bb985d9f1d0fa029e03166f6cd0f4",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +66,70 @@\t}\n\n\tif !utilfeature.DefaultFeatureGate.Enabled(features.CSIMigration) {\n\t\tvolumeAttachment.Spec.Source.InlineVolumeSpec = nil\n\t}"
  },
  {
    "id" : "0b8c6d89-2367-4229-a4c6-92525621c615",
    "prId" : 77703,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/77703#pullrequestreview-244561930",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "29ee1ddf-14c9-4130-ab6b-6a320013e729",
        "parentId" : null,
        "authorId" : "42b1e004-4fa7-4e43-84cf-5378839b49ad",
        "body" : "shouldn't we check that the cast was successful ?\r\n",
        "createdAt" : "2019-05-31T21:34:58Z",
        "updatedAt" : "2019-05-31T21:34:58Z",
        "lastEditedBy" : "42b1e004-4fa7-4e43-84cf-5378839b49ad",
        "tags" : [
        ]
      },
      {
        "id" : "de782c81-f96e-45ef-bc09-987503f24440",
        "parentId" : "29ee1ddf-14c9-4130-ab6b-6a320013e729",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "no, this is well tested and is a programmer error if any other type comes through here",
        "createdAt" : "2019-05-31T21:44:31Z",
        "updatedAt" : "2019-05-31T21:44:32Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "97100a08-02d5-47b8-a7b1-0d6cd772590c",
        "parentId" : "29ee1ddf-14c9-4130-ab6b-6a320013e729",
        "authorId" : "42b1e004-4fa7-4e43-84cf-5378839b49ad",
        "body" : "What do you think of the following ?\r\n```\r\ndiff --git a/pkg/registry/storage/volumeattachment/strategy.go b/pkg/registry/storage/volumeattachment/strategy.go\r\nindex 183fe02d95..b3468d9370 100644\r\n--- a/pkg/registry/storage/volumeattachment/strategy.go\r\n+++ b/pkg/registry/storage/volumeattachment/strategy.go\r\n@@ -48,20 +48,17 @@ func (volumeAttachmentStrategy) NamespaceScoped() bool {\r\n }\r\n\r\n // ResetBeforeCreate clears the Status field which is not allowed to be set by end users on creation.\r\n-func (volumeAttachmentStrategy) PrepareForCreate(ctx context.Context, obj runtime.Object) {\r\n+func (volumeAttachmentStrategy) PrepareForCreate(ctx context.Context, volumeAttachment *storage.VolumeAttachment) {\r\n        var groupVersion schema.GroupVersion\r\n\r\n        if requestInfo, found := genericapirequest.RequestInfoFrom(ctx); found {\r\n                groupVersion = schema.GroupVersion{Group: requestInfo.APIGroup, Version: requestInfo.APIVersion}\r\n        }\r\n\r\n-       volumeAttachment := obj.(*storage.VolumeAttachment)\r\n-\r\n        switch groupVersion {\r\n        case storageapiv1beta1.SchemeGroupVersion:\r\n                // allow modification of status for v1beta1\r\n        default:\r\n-               volumeAttachment := obj.(*storage.VolumeAttachment)\r\n                volumeAttachment.Status = storage.VolumeAttachmentStatus{}\r\n        }\r\n```\r\nThis would make the parameter type more visible.\r\n\r\nthanks",
        "createdAt" : "2019-05-31T22:52:17Z",
        "updatedAt" : "2019-05-31T22:52:17Z",
        "lastEditedBy" : "42b1e004-4fa7-4e43-84cf-5378839b49ad",
        "tags" : [
        ]
      },
      {
        "id" : "5ea6dfbb-95af-48eb-98c9-fbf3bc739c83",
        "parentId" : "29ee1ddf-14c9-4130-ab6b-6a320013e729",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "No, PrepareForCreate is an interface all strategies implement",
        "createdAt" : "2019-05-31T22:55:18Z",
        "updatedAt" : "2019-05-31T22:55:19Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "55d0f387-fcc8-46c8-beaf-4c377980e6ef",
        "parentId" : "29ee1ddf-14c9-4130-ab6b-6a320013e729",
        "authorId" : "42b1e004-4fa7-4e43-84cf-5378839b49ad",
        "body" : "thanks for the explanation.",
        "createdAt" : "2019-06-01T00:25:16Z",
        "updatedAt" : "2019-06-01T00:25:16Z",
        "lastEditedBy" : "42b1e004-4fa7-4e43-84cf-5378839b49ad",
        "tags" : [
        ]
      }
    ],
    "commit" : "de7be9d6133bb985d9f1d0fa029e03166f6cd0f4",
    "line" : 16,
    "diffHunk" : "@@ -1,1 +56,60 @@\t}\n\n\tvolumeAttachment := obj.(*storage.VolumeAttachment)\n\n\tswitch groupVersion {"
  },
  {
    "id" : "e98fc229-11f9-4f0e-9b27-4c478985aa25",
    "prId" : 77703,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/77703#pullrequestreview-245030133",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c8f1626b-4429-4cbb-b0e6-2f39cae910b5",
        "parentId" : null,
        "authorId" : "42b1e004-4fa7-4e43-84cf-5378839b49ad",
        "body" : "This line can be removed.\r\n\r\nThe assignment happens on line 58",
        "createdAt" : "2019-05-31T23:38:05Z",
        "updatedAt" : "2019-05-31T23:38:05Z",
        "lastEditedBy" : "42b1e004-4fa7-4e43-84cf-5378839b49ad",
        "tags" : [
        ]
      },
      {
        "id" : "e049f094-6e14-4c85-9696-1baf79fa060c",
        "parentId" : "c8f1626b-4429-4cbb-b0e6-2f39cae910b5",
        "authorId" : "542e5d2f-2ff9-4674-ab44-78f31768e7a1",
        "body" : "Hi @tedyu, thank you for the suggestions. This PR has already merged. Could you please submit a cleanup PR for the nit you mentioned",
        "createdAt" : "2019-06-03T17:38:17Z",
        "updatedAt" : "2019-06-03T17:38:17Z",
        "lastEditedBy" : "542e5d2f-2ff9-4674-ab44-78f31768e7a1",
        "tags" : [
        ]
      },
      {
        "id" : "f95a92cd-4dd2-46f5-ae26-c0dd300f4352",
        "parentId" : "c8f1626b-4429-4cbb-b0e6-2f39cae910b5",
        "authorId" : "42b1e004-4fa7-4e43-84cf-5378839b49ad",
        "body" : "see #78659",
        "createdAt" : "2019-06-03T17:51:39Z",
        "updatedAt" : "2019-06-03T17:51:39Z",
        "lastEditedBy" : "42b1e004-4fa7-4e43-84cf-5378839b49ad",
        "tags" : [
        ]
      }
    ],
    "commit" : "de7be9d6133bb985d9f1d0fa029e03166f6cd0f4",
    "line" : 22,
    "diffHunk" : "@@ -1,1 +62,66 @@\t\t// allow modification of status for v1beta1\n\tdefault:\n\t\tvolumeAttachment := obj.(*storage.VolumeAttachment)\n\t\tvolumeAttachment.Status = storage.VolumeAttachmentStatus{}\n\t}"
  },
  {
    "id" : "791be3e3-b936-45ab-b1d9-4ebb1204f38c",
    "prId" : 69929,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/69929#pullrequestreview-173997886",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f5d8bca7-7abe-413b-9516-0107873ff588",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "same comment about defaulting to the spec/status split and only allowing status modification when we have positive identification of a request via the v1beta1 API",
        "createdAt" : "2018-11-10T06:48:41Z",
        "updatedAt" : "2018-11-14T22:58:11Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "1464b23e-b3af-4819-aa7a-a2b1b2c638e8",
        "parentId" : "f5d8bca7-7abe-413b-9516-0107873ff588",
        "authorId" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "body" : "fixed",
        "createdAt" : "2018-11-12T16:53:21Z",
        "updatedAt" : "2018-11-14T22:58:11Z",
        "lastEditedBy" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "tags" : [
        ]
      }
    ],
    "commit" : "eaff4fd4d227321b69616f264d86dcf785d1b5ae",
    "line" : 63,
    "diffHunk" : "@@ -1,1 +95,99 @@\tvar groupVersion schema.GroupVersion\n\n\tif requestInfo, found := genericapirequest.RequestInfoFrom(ctx); found {\n\t\tgroupVersion = schema.GroupVersion{Group: requestInfo.APIGroup, Version: requestInfo.APIVersion}\n\t}"
  },
  {
    "id" : "16fd89d6-40e2-4305-9f59-e3654099eae5",
    "prId" : 69929,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/69929#pullrequestreview-175173881",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "84ee4f69-2fd0-4c7f-88eb-50a5c1184e11",
        "parentId" : null,
        "authorId" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "body" : "This is a lot of fields to remember to reset for probably every api type, and a lot of places to update if we add new fields to meta in the future.  Could we have some common \"resetMeta\" function that all api types could share?",
        "createdAt" : "2018-11-13T18:17:36Z",
        "updatedAt" : "2018-11-14T22:58:11Z",
        "lastEditedBy" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "tags" : [
        ]
      },
      {
        "id" : "74e2e88c-a92c-4643-96dc-239f6858ce47",
        "parentId" : "84ee4f69-2fd0-4c7f-88eb-50a5c1184e11",
        "authorId" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "body" : "I would hope that a variant of commit that @liggitt linked will be merged in future in api-machinery repo but I wanted to avoid scope of this PR to not include apimachinery too. But I can indeed move this to a common util function. ",
        "createdAt" : "2018-11-13T20:01:00Z",
        "updatedAt" : "2018-11-14T22:58:11Z",
        "lastEditedBy" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "tags" : [
        ]
      },
      {
        "id" : "59c81998-0057-46a2-b45e-d37dcc6bbe7e",
        "parentId" : "84ee4f69-2fd0-4c7f-88eb-50a5c1184e11",
        "authorId" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "body" : "Agree I think this could be done as a separate cleanup pr",
        "createdAt" : "2018-11-13T20:04:09Z",
        "updatedAt" : "2018-11-14T22:58:11Z",
        "lastEditedBy" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "tags" : [
        ]
      },
      {
        "id" : "3baa9a1e-baaf-45fe-a693-a1cb7cb43aa7",
        "parentId" : "84ee4f69-2fd0-4c7f-88eb-50a5c1184e11",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "please open in a follow-up",
        "createdAt" : "2018-11-14T02:26:55Z",
        "updatedAt" : "2018-11-14T22:58:11Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "c8b2b1bc-1618-457d-9462-f439c80678b0",
        "parentId" : "84ee4f69-2fd0-4c7f-88eb-50a5c1184e11",
        "authorId" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "body" : "logged here - https://github.com/kubernetes/kubernetes/issues/71056 ",
        "createdAt" : "2018-11-15T03:01:05Z",
        "updatedAt" : "2018-11-15T03:01:05Z",
        "lastEditedBy" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "tags" : [
        ]
      }
    ],
    "commit" : "eaff4fd4d227321b69616f264d86dcf785d1b5ae",
    "line" : 101,
    "diffHunk" : "@@ -1,1 +138,142 @@\toldMeta := oldVolumeAttachment.ObjectMeta\n\tnewMeta := &newVolumeAttachment.ObjectMeta\n\tnewMeta.SetDeletionTimestamp(oldMeta.GetDeletionTimestamp())\n\tnewMeta.SetGeneration(oldMeta.GetGeneration())\n\tnewMeta.SetSelfLink(oldMeta.GetSelfLink())"
  }
]