[
  {
    "id" : "6f8bfcab-5000-4dd3-8c13-4b2f1ac0a42a",
    "prId" : 28304,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ad5be78d-9c45-4a01-82bd-7a95a02c1231",
        "parentId" : null,
        "authorId" : "020e031c-c298-4e7e-a533-9a04439c203c",
        "body" : "Don't non-resource URLS have a different set of verbs than resource URLs.  Does that get validated somewhere?  Or are verbs not validated at all, since they can be dynamic?\n",
        "createdAt" : "2016-07-12T16:45:33Z",
        "updatedAt" : "2016-07-12T17:02:03Z",
        "lastEditedBy" : "020e031c-c298-4e7e-a533-9a04439c203c",
        "tags" : [
        ]
      },
      {
        "id" : "58452b8f-99a4-4a6a-8fa3-4a39e10e6fc8",
        "parentId" : "ad5be78d-9c45-4a01-82bd-7a95a02c1231",
        "authorId" : "0af48e59-4be9-46ce-9275-aa218813b6fd",
        "body" : "Yes, they have a different verb set according to our documentation[0](with a little overlap). But unless there's a canonical list somewhere I'm more inclined to let \"verbs\" be anything and improve the documentation. \n\n[0] http://kubernetes.io/docs/admin/authorization/\n",
        "createdAt" : "2016-07-12T17:00:14Z",
        "updatedAt" : "2016-07-12T17:02:03Z",
        "lastEditedBy" : "0af48e59-4be9-46ce-9275-aa218813b6fd",
        "tags" : [
        ]
      }
    ],
    "commit" : "addc4b166c3b21b3ea94a1d50d579a84b86fde5f",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +75,79 @@\n\t// Non-resource URLs are unique because they only combine with verbs.\n\tfor _, nonResourceURL := range rule.NonResourceURLs {\n\t\tfor _, verb := range rule.Verbs {\n\t\t\tsubrules = append(subrules, rbac.PolicyRule{NonResourceURLs: []string{nonResourceURL}, Verbs: []string{verb}})"
  },
  {
    "id" : "985444ad-21ef-49bb-a1be-47c4d481c53f",
    "prId" : 28304,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "45a30624-5e09-467c-867f-f979aaa9ee03",
        "parentId" : null,
        "authorId" : "020e031c-c298-4e7e-a533-9a04439c203c",
        "body" : "Should a rule ever have both resource and non-resource sections?  I feel like it should not and it could be error prone in some way if it is allowed to.  WDYT?\n",
        "createdAt" : "2016-07-12T16:46:44Z",
        "updatedAt" : "2016-07-12T17:02:03Z",
        "lastEditedBy" : "020e031c-c298-4e7e-a533-9a04439c203c",
        "tags" : [
        ]
      },
      {
        "id" : "81b7f8ef-b06c-46d7-90cb-b3c72b22ffb0",
        "parentId" : "45a30624-5e09-467c-867f-f979aaa9ee03",
        "authorId" : "0af48e59-4be9-46ce-9275-aa218813b6fd",
        "body" : "An extremely common rule which uses both is going to be:\n\n``` yml\nkind: ClusterRole\napiVersion: rbac.authorization.k8s.io/v1alpha1\nmetadata:\n  name: admins\nrules:\n  - apiGroups: [\"*\"]\n    resources: [\"*\"]\n    verbs: [\"*\"]\n    nonResourceURLs: [\"*\"]\n```\n",
        "createdAt" : "2016-07-12T16:57:05Z",
        "updatedAt" : "2016-07-12T17:02:03Z",
        "lastEditedBy" : "0af48e59-4be9-46ce-9275-aa218813b6fd",
        "tags" : [
        ]
      }
    ],
    "commit" : "addc4b166c3b21b3ea94a1d50d579a84b86fde5f",
    "line" : 60,
    "diffHunk" : "@@ -1,1 +135,139 @@\tverbMatches := has(ownerRule.Verbs, rbac.VerbAll) || hasAll(ownerRule.Verbs, subRule.Verbs)\n\tgroupMatches := has(ownerRule.APIGroups, rbac.APIGroupAll) || hasAll(ownerRule.APIGroups, subRule.APIGroups)\n\tresourceMatches := has(ownerRule.Resources, rbac.ResourceAll) || hasAll(ownerRule.Resources, subRule.Resources)\n\tnonResourceURLMatches := nonResourceURLsCoversAll(ownerRule.NonResourceURLs, subRule.NonResourceURLs)\n"
  },
  {
    "id" : "41fdace2-0d7b-4761-b166-b9123eef5091",
    "prId" : 28304,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "86bc6a4b-9616-4037-91e2-d965d6cc17fc",
        "parentId" : null,
        "authorId" : "020e031c-c298-4e7e-a533-9a04439c203c",
        "body" : "Shouldn't the subrule either be a resource rule or not a resource rule?\n",
        "createdAt" : "2016-07-12T16:47:40Z",
        "updatedAt" : "2016-07-12T17:02:03Z",
        "lastEditedBy" : "020e031c-c298-4e7e-a533-9a04439c203c",
        "tags" : [
        ]
      },
      {
        "id" : "3c952d8f-0ee8-4056-8489-181dbc027990",
        "parentId" : "86bc6a4b-9616-4037-91e2-d965d6cc17fc",
        "authorId" : "0af48e59-4be9-46ce-9275-aa218813b6fd",
        "body" : "Yes. It'd be reasonable to rework this logic.\n",
        "createdAt" : "2016-07-12T16:57:50Z",
        "updatedAt" : "2016-07-12T17:02:03Z",
        "lastEditedBy" : "0af48e59-4be9-46ce-9275-aa218813b6fd",
        "tags" : [
        ]
      },
      {
        "id" : "2f003675-03bb-457e-84c4-d539f52000ef",
        "parentId" : "86bc6a4b-9616-4037-91e2-d965d6cc17fc",
        "authorId" : "0af48e59-4be9-46ce-9275-aa218813b6fd",
        "body" : "Going to hold off until we address https://github.com/kubernetes/kubernetes/issues/28292. The refactoring of this code for that issue encompasses this.\n",
        "createdAt" : "2016-07-12T21:12:34Z",
        "updatedAt" : "2016-07-12T21:12:34Z",
        "lastEditedBy" : "0af48e59-4be9-46ce-9275-aa218813b6fd",
        "tags" : [
        ]
      }
    ],
    "commit" : "addc4b166c3b21b3ea94a1d50d579a84b86fde5f",
    "line" : 62,
    "diffHunk" : "@@ -1,1 +136,140 @@\tgroupMatches := has(ownerRule.APIGroups, rbac.APIGroupAll) || hasAll(ownerRule.APIGroups, subRule.APIGroups)\n\tresourceMatches := has(ownerRule.Resources, rbac.ResourceAll) || hasAll(ownerRule.Resources, subRule.Resources)\n\tnonResourceURLMatches := nonResourceURLsCoversAll(ownerRule.NonResourceURLs, subRule.NonResourceURLs)\n\n\tresourceNameMatches := false"
  }
]