[
  {
    "id" : "95d3e129-178e-4341-9be0-d7b0bddb9a0f",
    "prId" : 60519,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/60519#pullrequestreview-100940804",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "41255d66-4213-48fb-b314-da90f4fc6827",
        "parentId" : null,
        "authorId" : "6252ac4b-6b9e-4dee-8931-ca3b934d52fc",
        "body" : "Having it not part of any priority class object does not sound right to me. why to treat lowest or default value differently than others?",
        "createdAt" : "2018-03-02T21:14:57Z",
        "updatedAt" : "2018-03-06T18:07:11Z",
        "lastEditedBy" : "6252ac4b-6b9e-4dee-8931-ca3b934d52fc",
        "tags" : [
        ]
      },
      {
        "id" : "3888c2fa-c36b-417e-b24d-e496a4a9ff37",
        "parentId" : "41255d66-4213-48fb-b314-da90f4fc6827",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "0 isn't the lowest... you can have negative values. 0 is just the default.",
        "createdAt" : "2018-03-02T21:17:55Z",
        "updatedAt" : "2018-03-06T18:07:11Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "7a77ec17-5e6a-4287-9841-573b1e026bb3",
        "parentId" : "41255d66-4213-48fb-b314-da90f4fc6827",
        "authorId" : "6252ac4b-6b9e-4dee-8931-ca3b934d52fc",
        "body" : "yeah sure, I did not mean that,  I just meant to have a class associated with each priority class value.",
        "createdAt" : "2018-03-02T21:25:28Z",
        "updatedAt" : "2018-03-06T18:07:11Z",
        "lastEditedBy" : "6252ac4b-6b9e-4dee-8931-ca3b934d52fc",
        "tags" : [
        ]
      },
      {
        "id" : "55ef533d-2116-45d7-9a35-632f362bda01",
        "parentId" : "41255d66-4213-48fb-b314-da90f4fc6827",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "when a pod does not specify a priorityClass, and there are no priority class objects, defaulting to 0 makes sense to me.",
        "createdAt" : "2018-03-02T21:27:34Z",
        "updatedAt" : "2018-03-06T18:07:11Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "0bd86632-7e8f-401c-8a31-b274192cd728",
        "parentId" : "41255d66-4213-48fb-b314-da90f4fc6827",
        "authorId" : "6252ac4b-6b9e-4dee-8931-ca3b934d52fc",
        "body" : "Conceptually i think it'd be better to default to a `default priority class` (with whatever value to it) not to some integer value.",
        "createdAt" : "2018-03-02T21:33:21Z",
        "updatedAt" : "2018-03-06T18:07:11Z",
        "lastEditedBy" : "6252ac4b-6b9e-4dee-8931-ca3b934d52fc",
        "tags" : [
        ]
      },
      {
        "id" : "2bdda188-20ba-4778-a606-f9028b9cff28",
        "parentId" : "41255d66-4213-48fb-b314-da90f4fc6827",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "> Conceptually i think it'd be better to default to a default priority class (with whatever value to it) not to some integer value.\r\n\r\nWe do, if one exists. If not, we have to pick a value, and since 0 is the value all previously existing pods would have, it makes sense to use here as well.",
        "createdAt" : "2018-03-02T21:38:22Z",
        "updatedAt" : "2018-03-06T18:07:11Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "7690c9c2-f951-4c8f-8e4a-770a3fa4fb73",
        "parentId" : "41255d66-4213-48fb-b314-da90f4fc6827",
        "authorId" : "6252ac4b-6b9e-4dee-8931-ca3b934d52fc",
        "body" : "Actually I am aware of that. if we have to pick 0 when default class does not exist, why not then just create an immortal class for that always like these system classes? the whole logic would still work the same way. Atleast we would always be dealing with classes, not this special case. ",
        "createdAt" : "2018-03-02T21:52:43Z",
        "updatedAt" : "2018-03-06T18:07:11Z",
        "lastEditedBy" : "6252ac4b-6b9e-4dee-8931-ca3b934d52fc",
        "tags" : [
        ]
      },
      {
        "id" : "22d2061a-b111-4d0f-8fc4-380c3528ae8d",
        "parentId" : "41255d66-4213-48fb-b314-da90f4fc6827",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : " Defaulting to zero happens in API defaulting. We don't need (or have access to in conversion) a priority class to represent that. ",
        "createdAt" : "2018-03-02T22:03:12Z",
        "updatedAt" : "2018-03-06T18:07:11Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "97a939a1-4403-4e1d-a1ae-9f1ab274a09a",
        "parentId" : "41255d66-4213-48fb-b314-da90f4fc6827",
        "authorId" : "6252ac4b-6b9e-4dee-8931-ca3b934d52fc",
        "body" : "I am not seeing if the value is being set to default to 0 at API level, at least thats what i thought https://github.com/kubernetes/kubernetes/blob/master/pkg/apis/scheduling/v1alpha1/zz_generated.defaults.go .\r\nBut this is being used here and set to default in admission plugin if we did set to default in the above we would not need this i think : https://github.com/kubernetes/kubernetes/blob/master/plugin/pkg/admission/priority/admission.go#L243 . ",
        "createdAt" : "2018-03-02T22:20:11Z",
        "updatedAt" : "2018-03-06T18:07:11Z",
        "lastEditedBy" : "6252ac4b-6b9e-4dee-8931-ca3b934d52fc",
        "tags" : [
        ]
      },
      {
        "id" : "c66c23e2-76cd-4b18-8aad-0b818c911337",
        "parentId" : "41255d66-4213-48fb-b314-da90f4fc6827",
        "authorId" : "6252ac4b-6b9e-4dee-8931-ca3b934d52fc",
        "body" : "ok i see the value is int32 so should get 0. then i think we dont need this: https://github.com/kubernetes/kubernetes/blob/master/plugin/pkg/admission/priority/admission.go#L243 and this special variable DefaultPriorityWhenNoDefaultClassExists. right?",
        "createdAt" : "2018-03-02T22:28:09Z",
        "updatedAt" : "2018-03-06T18:07:11Z",
        "lastEditedBy" : "6252ac4b-6b9e-4dee-8931-ca3b934d52fc",
        "tags" : [
        ]
      },
      {
        "id" : "d6356a5a-9d3f-45c2-ac73-60ee115c4ff3",
        "parentId" : "41255d66-4213-48fb-b314-da90f4fc6827",
        "authorId" : "6252ac4b-6b9e-4dee-8931-ca3b934d52fc",
        "body" : "Ignore the above. let me check again.",
        "createdAt" : "2018-03-02T22:29:54Z",
        "updatedAt" : "2018-03-06T18:07:11Z",
        "lastEditedBy" : "6252ac4b-6b9e-4dee-8931-ca3b934d52fc",
        "tags" : [
        ]
      },
      {
        "id" : "c9e5c1dd-897d-4e9b-99e7-f49a44d0267b",
        "parentId" : "41255d66-4213-48fb-b314-da90f4fc6827",
        "authorId" : "6252ac4b-6b9e-4dee-8931-ca3b934d52fc",
        "body" : "I checked priority class, whereas i should have checked pod's priority value. let me check that.",
        "createdAt" : "2018-03-02T22:30:21Z",
        "updatedAt" : "2018-03-06T18:07:11Z",
        "lastEditedBy" : "6252ac4b-6b9e-4dee-8931-ca3b934d52fc",
        "tags" : [
        ]
      },
      {
        "id" : "fd3c2996-a572-459f-b944-5c895d402085",
        "parentId" : "41255d66-4213-48fb-b314-da90f4fc6827",
        "authorId" : "6252ac4b-6b9e-4dee-8931-ca3b934d52fc",
        "body" : "Anyway I am ok with defaulting at API level but then I am wondering why we need DefaultPriorityWhenNoDefaultClassExists?",
        "createdAt" : "2018-03-02T22:31:55Z",
        "updatedAt" : "2018-03-06T18:07:11Z",
        "lastEditedBy" : "6252ac4b-6b9e-4dee-8931-ca3b934d52fc",
        "tags" : [
        ]
      },
      {
        "id" : "ed55fe1d-1b17-41d0-9ac5-cea9ef3331dd",
        "parentId" : "41255d66-4213-48fb-b314-da90f4fc6827",
        "authorId" : "6252ac4b-6b9e-4dee-8931-ca3b934d52fc",
        "body" : "I am assuming when you say its getting default to 0, its somewhere in https://github.com/kubernetes/api/blob/master/core/v1/generated.pb.go based on https://github.com/kubernetes/api/blob/master/core/v1/generated.proto#L3192. But as I said, in that case, I dont think we need any new constant like this `DefaultPriorityWhenNoDefaultClassExists`.",
        "createdAt" : "2018-03-02T22:43:17Z",
        "updatedAt" : "2018-03-06T18:07:11Z",
        "lastEditedBy" : "6252ac4b-6b9e-4dee-8931-ca3b934d52fc",
        "tags" : [
        ]
      },
      {
        "id" : "704ac78e-26c4-4026-8279-b944ca221188",
        "parentId" : "41255d66-4213-48fb-b314-da90f4fc6827",
        "authorId" : "15fb535e-c5be-47ce-a304-1cb5da5aca90",
        "body" : "Priority field is an *int32, not int32. `DefaultPriorityWhenNoDefaultClassExists` is needed to set the default.",
        "createdAt" : "2018-03-02T22:43:52Z",
        "updatedAt" : "2018-03-06T18:07:11Z",
        "lastEditedBy" : "15fb535e-c5be-47ce-a304-1cb5da5aca90",
        "tags" : [
        ]
      },
      {
        "id" : "073fb818-297b-4783-8482-d3b14d2d4987",
        "parentId" : "41255d66-4213-48fb-b314-da90f4fc6827",
        "authorId" : "6252ac4b-6b9e-4dee-8931-ca3b934d52fc",
        "body" : "I am not sure how else to convince that if we are not defaulting to 0 at API level, it would be better to default based on a priority class to keep it in sync with other cases where priority of a pod is pulled from a priority class. Again if we are defaulting to 0 at API level that is different thing and thats perfectly fine, but then we would not need DefaultPriorityWhenNoDefaultClassExists.",
        "createdAt" : "2018-03-02T22:51:31Z",
        "updatedAt" : "2018-03-06T18:07:11Z",
        "lastEditedBy" : "6252ac4b-6b9e-4dee-8931-ca3b934d52fc",
        "tags" : [
        ]
      },
      {
        "id" : "0512f2c3-a852-497c-a48d-6d48a4100ec9",
        "parentId" : "41255d66-4213-48fb-b314-da90f4fc6827",
        "authorId" : "15fb535e-c5be-47ce-a304-1cb5da5aca90",
        "body" : "@aveshagarwal \r\nThree points:\r\n1. The concern of this PR is something else. It would be better to have a separate issue to discuss such matters. I dislike the fact that we mix discussions of unrelated matters and slow down the flow of development. I have heard the same complaints from other colleagues as well. To be clear, I am not referring to you. This is something that many of us do and I may have done too. We should not mix discussions.\r\n2. We should be backward compatible and support Pods that do not have any priority class. So, we must not assume that all Pods have a priority class.\r\n3. Priority resolution happens in admission controller. So does priority resolution for pods without any PriorityClass.\r\n",
        "createdAt" : "2018-03-02T23:04:17Z",
        "updatedAt" : "2018-03-06T18:07:11Z",
        "lastEditedBy" : "15fb535e-c5be-47ce-a304-1cb5da5aca90",
        "tags" : [
        ]
      }
    ],
    "commit" : "9592a9ecf45d4dddb0009b0c8b2bd90b6c063a65",
    "line" : 3,
    "diffHunk" : "@@ -1,1 +23,27 @@\t// that do not specify any priority class and there is no priority class\n\t// marked as default.\n\tDefaultPriorityWhenNoDefaultClassExists = 0\n\t// HighestUserDefinablePriority is the highest priority for user defined priority classes. Priority values larger than 1 billion are reserved for Kubernetes system use.\n\tHighestUserDefinablePriority = int32(1000000000)"
  }
]