[
  {
    "id" : "2db6e847-09bc-4b5d-9961-46a1bf1b36b0",
    "prId" : 46254,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/46254#pullrequestreview-54548910",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "176296d6-fdd9-46a2-af2e-17e2fe9da545",
        "parentId" : null,
        "authorId" : "a6409368-42e0-44a9-bf79-9d3042ac3b65",
        "body" : "Can we add validation kubeletConfig unit tests? For example, kc has empty configuration, kc has an unknown configure, etc.\r\n\r\nI am ok for now to have all node-allocatable related config here, but I think in a long run, we should push down that validation to each sub-components. For example, containermgr in Kubelet validates its related configuration, runtime-shim validates related ones, etc. At the top level, we only validate the top-level configuration and invoke sub-component's validation. ",
        "createdAt" : "2017-08-03T00:01:29Z",
        "updatedAt" : "2017-08-08T19:21:50Z",
        "lastEditedBy" : "a6409368-42e0-44a9-bf79-9d3042ac3b65",
        "tags" : [
        ]
      },
      {
        "id" : "69cfab31-90c6-4c16-ab5b-85d0eca20a7f",
        "parentId" : "176296d6-fdd9-46a2-af2e-17e2fe9da545",
        "authorId" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "body" : "What if we just wrote validation helper functions for each sub-component in this file instead?\r\n\r\nI'd really like the validation of the config type to (a) live close to where the config type is defined and (b) run all the validation very early in the Kubelet's lifecycle. \r\n\r\nIf we had each component expose its own validation function, I think I'd also want each component to define it's own subset of the config type close to that validation function. I worry this will be confusing, as it will spread the API definition and validation around and could encourage too much granularity in the API.\r\n\r\nBasically I want to find the Kubelet's entire API in one place, and also find the valid ranges for those parameters in one place. And I want it to require as few parameters as possible.",
        "createdAt" : "2017-08-03T21:01:53Z",
        "updatedAt" : "2017-08-08T19:21:50Z",
        "lastEditedBy" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "tags" : [
        ]
      },
      {
        "id" : "caf69f7d-a4a3-42a3-964c-4053ae8c31aa",
        "parentId" : "176296d6-fdd9-46a2-af2e-17e2fe9da545",
        "authorId" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "body" : "And yes, we can add validation tests.",
        "createdAt" : "2017-08-03T21:07:41Z",
        "updatedAt" : "2017-08-08T19:21:50Z",
        "lastEditedBy" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "tags" : [
        ]
      },
      {
        "id" : "246b07b6-06b5-4eda-904d-7b134b34f1eb",
        "parentId" : "176296d6-fdd9-46a2-af2e-17e2fe9da545",
        "authorId" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "body" : "https://github.com/kubernetes/kubernetes/issues/50215",
        "createdAt" : "2017-08-07T00:51:24Z",
        "updatedAt" : "2017-08-08T19:21:50Z",
        "lastEditedBy" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "tags" : [
        ]
      }
    ],
    "commit" : "378544362cd4fb1b35a940c400ce7c31d9ad1b76",
    "line" : 29,
    "diffHunk" : "@@ -1,1 +27,31 @@const MaxCrashLoopThreshold = 10\n\n// ValidateKubeletConfiguration validates `kc` and returns an error if it is invalid\nfunc ValidateKubeletConfiguration(kc *componentconfig.KubeletConfiguration) error {\n\t// restrict crashloop threshold to between 0 and `maxCrashLoopThreshold`, inclusive"
  }
]