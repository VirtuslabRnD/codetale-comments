[
  {
    "id" : "4309b745-5f9e-4016-ae35-d35531267b98",
    "prId" : 96317,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/96317#pullrequestreview-530229421",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "30084f4f-0808-4a91-9b41-decff693f4da",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "curious how expensive this is... did we check the impact of adding many reflect calls to the defaulting path instead of generating `x == ...` checks for scalars?",
        "createdAt" : "2020-11-13T15:59:11Z",
        "updatedAt" : "2020-11-14T01:27:55Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "9a32fc6e-5af8-4fd8-b25e-68e6e4d3feda",
        "parentId" : "30084f4f-0808-4a91-9b41-decff693f4da",
        "authorId" : "3f579bf7-089d-41f0-abf9-3bf5462ec695",
        "body" : "We have a benchmark here https://github.com/kubernetes/gengo/pull/192#discussion_r520955114.\r\n\r\nThe Protocol string field is the only field that we are looking to apply this defaulting to for 1.20 and we already have a follow up task to use direct comparisons for primitive types.",
        "createdAt" : "2020-11-13T16:26:41Z",
        "updatedAt" : "2020-11-14T01:27:55Z",
        "lastEditedBy" : "3f579bf7-089d-41f0-abf9-3bf5462ec695",
        "tags" : [
        ]
      },
      {
        "id" : "9bee612e-3e95-4fac-bebb-b9eea6bbc03c",
        "parentId" : "30084f4f-0808-4a91-9b41-decff693f4da",
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "It was the first thing I asked too. It appears not to allocate, and it's slow but we only do it for this single field. @Jefftree will fix before we add more fields.",
        "createdAt" : "2020-11-13T16:54:14Z",
        "updatedAt" : "2020-11-14T01:27:55Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      }
    ],
    "commit" : "50e7aa49aa8f05c12ee72da92d1dc61900f86cac",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +110,114 @@\t\tfor j := range a.Ports {\n\t\t\tb := &a.Ports[j]\n\t\t\tif reflect.ValueOf(b.Protocol).IsZero() {\n\t\t\t\tb.Protocol = \"TCP\"\n\t\t\t}"
  }
]