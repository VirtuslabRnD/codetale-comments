[
  {
    "id" : "fb39ffcb-6621-4c56-8953-493c9a1b8f75",
    "prId" : 46677,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/46677#pullrequestreview-41206126",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d39ec39e-555f-48b2-8a08-c79dec75e41c",
        "parentId" : null,
        "authorId" : "fa477146-9a47-4754-b38c-de8062e65e13",
        "body" : "The original issue 95. :)",
        "createdAt" : "2017-05-31T11:48:58Z",
        "updatedAt" : "2017-06-01T02:07:45Z",
        "lastEditedBy" : "fa477146-9a47-4754-b38c-de8062e65e13",
        "tags" : [
        ]
      }
    ],
    "commit" : "ba59e14d442be8b6b42f707913df3e879c3e34c7",
    "line" : 64,
    "diffHunk" : "@@ -1,1 +184,188 @@\t// Other apiservers can still write. This is best-effort because there\n\t// are worse problems with TPR data than the possibility of going back\n\t// in time when migrating to CRD [citation needed].\n\tregistry.Freeze()\n"
  },
  {
    "id" : "f8346ab3-1953-409d-bf61-35e4f1da6f0b",
    "prId" : 39457,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/39457#pullrequestreview-16502024",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "dc03c918-bc8e-4232-abe7-760b25cd642c",
        "parentId" : null,
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "Will the upper check see this registration? This is master, above is controller manager.",
        "createdAt" : "2017-01-05T06:41:24Z",
        "updatedAt" : "2017-01-08T01:48:00Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "c147dc08-5a2e-42ca-9c39-17158dd3b822",
        "parentId" : "dc03c918-bc8e-4232-abe7-760b25cd642c",
        "authorId" : "948c8bee-49af-46ed-93a8-309275b51d61",
        "body" : "it won't, I add this because there are some calls in the apiserver which did the same check as above, for example: https://github.com/kubernetes/kubernetes/blob/master/pkg/registry/extensions/thirdpartyresourcedata/codec.go#L373.\r\n\r\nbut yeah, I did two things here, and I am still doing various of validation.",
        "createdAt" : "2017-01-05T06:50:55Z",
        "updatedAt" : "2017-01-08T01:48:00Z",
        "lastEditedBy" : "948c8bee-49af-46ed-93a8-309275b51d61",
        "tags" : [
        ]
      },
      {
        "id" : "9e1ded9f-49b6-48c8-81fb-5c2c4de88992",
        "parentId" : "dc03c918-bc8e-4232-abe7-760b25cd642c",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "Is anything broken in the apiserver due to not registering the thirdpartyresources? We are either missing a test or the whole registration is not necessary. In the later case, I would rather remove the whole registration logic for tprs.",
        "createdAt" : "2017-01-05T15:11:19Z",
        "updatedAt" : "2017-01-08T01:48:00Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "c0abb69a-cca9-43b7-8026-7f1e9bcf1b98",
        "parentId" : "dc03c918-bc8e-4232-abe7-760b25cd642c",
        "authorId" : "948c8bee-49af-46ed-93a8-309275b51d61",
        "body" : "@sttts along with your changes to add verbs for thirdpartyresources, the namespace controller will be aware of them, so let's reconsider the problem at https://github.com/kubernetes/kubernetes/issues/37278.\r\n\r\nWhen a namespace is going to be deleted, the namespace controller will delete all the deletable resources under that namespace, and in case it is a TPR resources, the delete options will fail to be decoded by a TPR gvk, and @caesarxuchao made a change in this pull request: https://github.com/kubernetes/kubernetes/pull/37328, if you look at the code, it checks whether the gvk is a TPR group version by calling `registered.IsThirdPartyAPIGroupVersion`, and that call depends on whether we register it or not.",
        "createdAt" : "2017-01-05T15:17:31Z",
        "updatedAt" : "2017-01-08T01:48:00Z",
        "lastEditedBy" : "948c8bee-49af-46ed-93a8-309275b51d61",
        "tags" : [
        ]
      },
      {
        "id" : "34af3ba0-51d0-4e67-bf06-19a0ff6a0f2e",
        "parentId" : "dc03c918-bc8e-4232-abe7-760b25cd642c",
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "The stuff in the registered package is intended to be static, write-once on application startup, so I'm a little surprised to see this method...",
        "createdAt" : "2017-01-12T23:29:18Z",
        "updatedAt" : "2017-01-12T23:29:18Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      },
      {
        "id" : "8e99f725-178c-437f-82e0-c9a28b5bfc59",
        "parentId" : "dc03c918-bc8e-4232-abe7-760b25cd642c",
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "And answering the question, this line could only possibly affect the copy of `registered` in the apiserver binary. It has no effect on the copy of `registered` that the garbage collector would use.\r\n\r\nIf you add this here, probably there is a corresponding place where it needs to be removed.",
        "createdAt" : "2017-01-12T23:33:07Z",
        "updatedAt" : "2017-01-12T23:33:07Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      },
      {
        "id" : "1509422c-8e11-45ea-b427-021abf04461d",
        "parentId" : "dc03c918-bc8e-4232-abe7-760b25cd642c",
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "hm, it's pretty weird that that function existed but was never called in the server. Perhaps it was intended for clients constructing their own RESTMapper.",
        "createdAt" : "2017-01-12T23:36:33Z",
        "updatedAt" : "2017-01-12T23:36:33Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      },
      {
        "id" : "41cc33f5-5425-4bf0-9e0d-27eef98c255d",
        "parentId" : "dc03c918-bc8e-4232-abe7-760b25cd642c",
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "Last thought: having this line here without explanation and without a test makes it hard to refactor this code into something understandable. @zhouhaibing089 it would be great if you could add a test :)",
        "createdAt" : "2017-01-12T23:37:06Z",
        "updatedAt" : "2017-01-12T23:37:06Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      },
      {
        "id" : "69b2d97e-9017-4700-a3f9-ec50458031a4",
        "parentId" : "dc03c918-bc8e-4232-abe7-760b25cd642c",
        "authorId" : "948c8bee-49af-46ed-93a8-309275b51d61",
        "body" : "@lavalamp thanks for your thoughts, i will do both: add an explanation and also a test.",
        "createdAt" : "2017-01-13T03:01:24Z",
        "updatedAt" : "2017-01-13T03:01:24Z",
        "lastEditedBy" : "948c8bee-49af-46ed-93a8-309275b51d61",
        "tags" : [
        ]
      }
    ],
    "commit" : "b25873a4bc254a982d1fbbd4d67779394e1be044",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +285,289 @@\n\tm.addThirdPartyResourceStorage(path, plural.Resource, thirdparty.Storage[plural.Resource].(*thirdpartyresourcedataetcd.REST), apiGroup)\n\tregistered.AddThirdPartyAPIGroupVersions(schema.GroupVersion{Group: group, Version: rsrc.Versions[0].Name})\n\treturn nil\n}"
  },
  {
    "id" : "b19d405f-b520-4c16-9939-68234395e362",
    "prId" : 39415,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/39415#pullrequestreview-15078464",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "14a6f276-57ec-4373-bfc8-f8663a5bd8d9",
        "parentId" : null,
        "authorId" : "948c8bee-49af-46ed-93a8-309275b51d61",
        "body" : "while I think it is fine to hardcode this list, but how about checking the `entry.Storage` and see whether it supports all the verbs actually?",
        "createdAt" : "2017-01-04T09:23:21Z",
        "updatedAt" : "2017-01-04T13:22:05Z",
        "lastEditedBy" : "948c8bee-49af-46ed-93a8-309275b51d61",
        "tags" : [
        ]
      },
      {
        "id" : "e35010e0-3ccc-4df2-868b-552d18aa9f74",
        "parentId" : "14a6f276-57ec-4373-bfc8-f8663a5bd8d9",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "which is done for non-3rdparty resources, but not in a nicely factored way we can easily reuse. Not sure it's worth the effort here.",
        "createdAt" : "2017-01-04T09:32:16Z",
        "updatedAt" : "2017-01-04T13:22:05Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      }
    ],
    "commit" : "b76958d75a01f08a683af0d70132b9d19522188c",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +209,213 @@\t\t\t\tKind:       obj.Kind(),\n\t\t\t\tVerbs: metav1.Verbs([]string{\n\t\t\t\t\t\"delete\", \"deletecollection\", \"get\", \"list\", \"patch\", \"create\", \"update\", \"watch\",\n\t\t\t\t}),\n\t\t\t})"
  },
  {
    "id" : "968c6582-3af8-4be7-a010-d518f621dab3",
    "prId" : 36996,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/36996#pullrequestreview-9167062",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "65636ab9-c92a-496c-9255-16171b327852",
        "parentId" : null,
        "authorId" : "9eb1241d-3dca-4a34-a85d-a880ba615f8c",
        "body" : "any reason to add check here?\n",
        "createdAt" : "2016-11-18T04:09:40Z",
        "updatedAt" : "2016-11-18T04:09:40Z",
        "lastEditedBy" : "9eb1241d-3dca-4a34-a85d-a880ba615f8c",
        "tags" : [
        ]
      },
      {
        "id" : "25266a06-9af4-49d3-b1e6-74b6c6d9e049",
        "parentId" : "65636ab9-c92a-496c-9255-16171b327852",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "to avoid the panic and allow recovery if a system already had a bad one loaded\n",
        "createdAt" : "2016-11-18T04:10:06Z",
        "updatedAt" : "2016-11-18T04:10:06Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "8a1e9117-f5c4-42d1-96fd-88375b63dc90",
        "parentId" : "65636ab9-c92a-496c-9255-16171b327852",
        "authorId" : "9eb1241d-3dca-4a34-a85d-a880ba615f8c",
        "body" : "That makes sense, could you please leave a comment here? I would like to get this merged before this #36977 \n",
        "createdAt" : "2016-11-18T04:13:56Z",
        "updatedAt" : "2016-11-18T04:13:56Z",
        "lastEditedBy" : "9eb1241d-3dca-4a34-a85d-a880ba615f8c",
        "tags" : [
        ]
      },
      {
        "id" : "1c4aa877-e5c7-4acf-b6d8-55ac1f3fda78",
        "parentId" : "65636ab9-c92a-496c-9255-16171b327852",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "I think the logic and returned error are pretty self-explanatory\n",
        "createdAt" : "2016-11-18T04:19:42Z",
        "updatedAt" : "2016-11-18T04:19:45Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "7a5461a17c8e055708ed895a82c3f99fd9102f3d",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +247,251 @@\t\treturn err\n\t}\n\tif len(rsrc.Versions) == 0 {\n\t\treturn fmt.Errorf(\"ThirdPartyResource %s has no defined versions\", rsrc.Name)\n\t}"
  }
]