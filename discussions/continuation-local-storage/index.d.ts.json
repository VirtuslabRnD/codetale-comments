[
  {
    "id" : "e63312b3-0902-4aae-a5f2-63d5044b3202",
    "prId" : 12709,
    "prUrl" : "https://github.com/DefinitelyTyped/DefinitelyTyped/pull/12709#pullrequestreview-10878171",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "23609670-3a55-41c6-b557-a7fc1adeabf6",
        "parentId" : null,
        "authorId" : "757af4b6-02f7-4bb5-82d6-1d11350c1603",
        "body" : "As regarding [this section](https://github.com/othiym23/node-continuation-local-storage#processnamespaces), `continuation-local-storage` provides an access of namespaces by `process`.\r\n\r\nI had been tried it at this line, but it doesn't work. @sandersn Could you advice about this?",
        "createdAt" : "2016-11-23T00:41:08Z",
        "updatedAt" : "2016-11-23T00:49:32Z",
        "lastEditedBy" : "757af4b6-02f7-4bb5-82d6-1d11350c1603",
        "tags" : [
        ]
      },
      {
        "id" : "e3188b31-404d-4d9b-a5f1-47e95619f4b5",
        "parentId" : "23609670-3a55-41c6-b557-a7fc1adeabf6",
        "authorId" : "ad9f05a4-d336-4549-96b0-f8a3b95c9764",
        "body" : "How do you have to import process and how do you have to refer to it? If you import it with import * and refer to it as cls.process, then export namespace should work. (Assuming the rest of the d.ts also uses top-level exports)",
        "createdAt" : "2016-11-28T15:43:11Z",
        "updatedAt" : "2016-11-28T15:43:11Z",
        "lastEditedBy" : "ad9f05a4-d336-4549-96b0-f8a3b95c9764",
        "tags" : [
        ]
      },
      {
        "id" : "99c21d3f-de3e-424c-84c1-1f8265a9fc39",
        "parentId" : "23609670-3a55-41c6-b557-a7fc1adeabf6",
        "authorId" : "757af4b6-02f7-4bb5-82d6-1d11350c1603",
        "body" : "The `process` is the global `process` of node.js. So it should be look like\r\n\r\n```typescript\r\nimport * as cls from 'continuation-local-storage';\r\nconsole.log(process.namespaces);\r\n```\r\n\r\nIt comes by a side-effect of importing `continuation-local-storage`.",
        "createdAt" : "2016-11-28T22:18:34Z",
        "updatedAt" : "2016-11-28T22:18:34Z",
        "lastEditedBy" : "757af4b6-02f7-4bb5-82d6-1d11350c1603",
        "tags" : [
        ]
      },
      {
        "id" : "c8e97e90-e009-4b56-ad13-de61f7667108",
        "parentId" : "23609670-3a55-41c6-b557-a7fc1adeabf6",
        "authorId" : "ad9f05a4-d336-4549-96b0-f8a3b95c9764",
        "body" : "The syntax you want is `declare module \"process\" { export var namespaces: ... }`\r\n\r\nWhen you use this syntax in a file with other exports or imports, it's interpreted as an augmentation of an existing module \"process\" instead of a declaration of a new one.",
        "createdAt" : "2016-11-30T17:21:07Z",
        "updatedAt" : "2016-11-30T17:21:08Z",
        "lastEditedBy" : "ad9f05a4-d336-4549-96b0-f8a3b95c9764",
        "tags" : [
        ]
      },
      {
        "id" : "282487ed-b5ef-4bdf-8aa5-92aafecffc34",
        "parentId" : "23609670-3a55-41c6-b557-a7fc1adeabf6",
        "authorId" : "757af4b6-02f7-4bb5-82d6-1d11350c1603",
        "body" : "With your solution, I got this\r\n```bash\r\n$ tsc\r\n\r\ncontinuation-local-storage-tests.ts(25,16): error TS2339: Property 'namespaces' does not exist on type 'Process'.\r\ncontinuation-local-storage-tests.ts(457,33): error TS2339: Property 'namespaces' does not exist on type 'Process'.\r\nindex.d.ts(27,16): error TS2671: Cannot augment module 'process' because it resolves to a non-module entity.\r\nindex.d.ts(28,26): error TS2503: Cannot find namespace 'ContinuationLocalStorage'.\r\n```\r\n\r\nIt looks like these resolved issues(https://github.com/Microsoft/TypeScript/issues/7148, https://github.com/Microsoft/TypeScript/issues/7545), but no luck for me with (tsc@2.0.9)\r\n\r\nWould I comment the interface out at this time?",
        "createdAt" : "2016-11-30T23:23:22Z",
        "updatedAt" : "2016-11-30T23:23:31Z",
        "lastEditedBy" : "757af4b6-02f7-4bb5-82d6-1d11350c1603",
        "tags" : [
        ]
      },
      {
        "id" : "c5b3cb5c-952e-48df-ac9f-2006a172af08",
        "parentId" : "23609670-3a55-41c6-b557-a7fc1adeabf6",
        "authorId" : "ad9f05a4-d336-4549-96b0-f8a3b95c9764",
        "body" : "Nice find of those bugs! The [discussion](https://github.com/Microsoft/TypeScript/issues/7148#issuecomment-197528646) in #7545 indicates that augmentation doesn't work for modules that export a variable with a global type. Maybe that's what is happening here?\r\n\r\nWhen you say \"comment out the interface\", you just mean dropping this augmentation for now, right?",
        "createdAt" : "2016-11-30T23:34:11Z",
        "updatedAt" : "2016-11-30T23:34:11Z",
        "lastEditedBy" : "ad9f05a4-d336-4549-96b0-f8a3b95c9764",
        "tags" : [
        ]
      },
      {
        "id" : "ff89c248-a2b5-4efc-912d-4a6dc993f61e",
        "parentId" : "23609670-3a55-41c6-b557-a7fc1adeabf6",
        "authorId" : "757af4b6-02f7-4bb5-82d6-1d11350c1603",
        "body" : "yes, the line to expose process.namespaces while NodeJS.Process exists as not augmentation-friendly.",
        "createdAt" : "2016-11-30T23:49:47Z",
        "updatedAt" : "2016-11-30T23:49:47Z",
        "lastEditedBy" : "757af4b6-02f7-4bb5-82d6-1d11350c1603",
        "tags" : [
        ]
      },
      {
        "id" : "9dfe492a-9531-4aad-b47d-f62f38a28485",
        "parentId" : "23609670-3a55-41c6-b557-a7fc1adeabf6",
        "authorId" : "ad9f05a4-d336-4549-96b0-f8a3b95c9764",
        "body" : "OK, do you want to remove the lines or leave them in, but commented out?",
        "createdAt" : "2016-12-01T00:02:40Z",
        "updatedAt" : "2016-12-01T00:02:40Z",
        "lastEditedBy" : "ad9f05a4-d336-4549-96b0-f8a3b95c9764",
        "tags" : [
        ]
      },
      {
        "id" : "997544c5-82d9-49a3-b11c-e60e18f3b451",
        "parentId" : "23609670-3a55-41c6-b557-a7fc1adeabf6",
        "authorId" : "757af4b6-02f7-4bb5-82d6-1d11350c1603",
        "body" : "later, leave and commented out for future.",
        "createdAt" : "2016-12-01T00:08:13Z",
        "updatedAt" : "2016-12-01T00:08:13Z",
        "lastEditedBy" : "757af4b6-02f7-4bb5-82d6-1d11350c1603",
        "tags" : [
        ]
      }
    ],
    "commit" : "52d3b66bea7236bcef5804fab7115c2ed17816e2",
    "line" : null,
    "diffHunk" : "@@ -1,1 +27,31 @@// declare namespace process {\n//   var namespaces: ContinuationLocalStorage.Namespace[];\n// }"
  }
]