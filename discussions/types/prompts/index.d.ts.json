[
  {
    "id" : "03c2d3a4-f792-4244-a0d3-4c20ec4ffdf1",
    "prId" : 52587,
    "prUrl" : "https://github.com/DefinitelyTyped/DefinitelyTyped/pull/52587#pullrequestreview-649008408",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f868debc-373b-431a-b974-30603214713f",
        "parentId" : null,
        "authorId" : "e876d362-aab9-4f92-9092-09c57b3e93d1",
        "body" : "According to the in the docs & code in the [source repo](https://github.com/terkelg/prompts/blob/22fe104947687f9916f2dac53e658965b325870f/lib/prompts.js) `choices` can only be an array. How does this fix the types exactly?",
        "createdAt" : "2021-04-28T16:48:18Z",
        "updatedAt" : "2021-04-30T09:24:37Z",
        "lastEditedBy" : "e876d362-aab9-4f92-9092-09c57b3e93d1",
        "tags" : [
        ]
      },
      {
        "id" : "c73f1626-bb93-4494-9fa0-039914eb8452",
        "parentId" : "f868debc-373b-431a-b974-30603214713f",
        "authorId" : "ca5f44ac-11fd-44b8-8fda-e5e03df18621",
        "body" : "Choices is an array but it can accept prev object the same way as other fields. For example, this `prompObject` fails with the current types:\r\n\r\n```\r\nconst questions: prompts.PromptObject<string>[] = [\r\n      {\r\n        type: 'autocomplete',\r\n        name: 'product',\r\n        message: 'Select a product',\r\n        choices: this.getChilds(''),\r\n        suggest: (input, choices) =>\r\n          Promise.resolve(\r\n            choices.filter((i) =>\r\n              i.title.toLowerCase().includes(input.toLowerCase()),\r\n            ),\r\n          ),\r\n        initial: 0,\r\n      },\r\n      {\r\n        type: 'autocomplete',\r\n        name: 'application',\r\n        message: 'Select an application',\r\n        choices: prev => this.getChilds(prev),\r\n        suggest: (input, choices) =>\r\n          Promise.resolve(\r\n            choices.filter((i) =>\r\n              i.title.toLowerCase().includes(input.toLowerCase()),\r\n            ),\r\n          ),\r\n        initial: 0,\r\n      }\r\n]\r\n```\r\nand using javascript or the modified typos works fine. In this scenario it will first ask you to select between some root options and in the second question to select an option child of this first selection, these choices are generated by `getChild()` function",
        "createdAt" : "2021-04-28T17:59:41Z",
        "updatedAt" : "2021-04-30T09:24:37Z",
        "lastEditedBy" : "ca5f44ac-11fd-44b8-8fda-e5e03df18621",
        "tags" : [
        ]
      },
      {
        "id" : "91dd7e1c-bbad-4493-8ee1-9dfc5177664d",
        "parentId" : "f868debc-373b-431a-b974-30603214713f",
        "authorId" : "e876d362-aab9-4f92-9092-09c57b3e93d1",
        "body" : "Ah found it! https://github.com/terkelg/prompts/blob/22fe104947687f9916f2dac53e658965b325870f/lib/index.js#L42\r\n\r\nYea makes sense. However it does this for all keys in the question object so could you update the types for all keys in `PromptObject` to use `PrevCaller`?",
        "createdAt" : "2021-04-28T19:13:21Z",
        "updatedAt" : "2021-04-30T09:24:37Z",
        "lastEditedBy" : "e876d362-aab9-4f92-9092-09c57b3e93d1",
        "tags" : [
        ]
      },
      {
        "id" : "3396e5d4-7f64-45b3-abf5-07e17574ff35",
        "parentId" : "f868debc-373b-431a-b974-30603214713f",
        "authorId" : "ca5f44ac-11fd-44b8-8fda-e5e03df18621",
        "body" : "test added and include prev in all the fields that I think make sense",
        "createdAt" : "2021-04-30T08:44:50Z",
        "updatedAt" : "2021-04-30T09:24:37Z",
        "lastEditedBy" : "ca5f44ac-11fd-44b8-8fda-e5e03df18621",
        "tags" : [
        ]
      }
    ],
    "commit" : "c47a2a70da5e654b0a606e0608be8dce82995972",
    "line" : 29,
    "diffHunk" : "@@ -1,1 +93,97 @@        active?: string | PrevCaller<T, string | Falsy>;\n        inactive?: string | PrevCaller<T, string | Falsy>;\n        choices?: Choice[] | PrevCaller<T, Choice[] | Falsy>;\n        hint?: string | PrevCaller<T, string | Falsy>;\n        warn?: string | PrevCaller<T, string | Falsy>;"
  }
]