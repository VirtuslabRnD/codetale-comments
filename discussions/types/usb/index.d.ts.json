[
  {
    "id" : "55ef7d4c-7bdf-4bc5-9c73-27e8871c34be",
    "prId" : 22832,
    "prUrl" : "https://github.com/DefinitelyTyped/DefinitelyTyped/pull/22832#pullrequestreview-88902402",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f380a041-97e4-416e-8485-a048e7bfaf97",
        "parentId" : null,
        "authorId" : "b33cc660-872b-4b45-9406-8167baefc2fc",
        "body" : "I think this still doesn't support the situation where `closeEndpoints` is passed in as a `Function`",
        "createdAt" : "2018-01-15T14:20:05Z",
        "updatedAt" : "2018-01-15T14:20:12Z",
        "lastEditedBy" : "b33cc660-872b-4b45-9406-8167baefc2fc",
        "tags" : [
        ]
      },
      {
        "id" : "d6208362-e83e-4bf8-96d1-59eef75ee172",
        "parentId" : "f380a041-97e4-416e-8485-a048e7bfaf97",
        "authorId" : "7232566d-5df4-4fe8-9811-c5b884999763",
        "body" : "`closeEndpoints` is never a function, the code supports a situation where `closeEndpoints` is not passed in and the `cb` callback function is the first parameter. From the `node-usb` code:\r\n\r\n```javascript\r\n\tif (typeof closeEndpoints == 'function') {\r\n\t\tcb = closeEndpoints;\r\n\t\tcloseEndpoints = null;\r\n\t}\r\n```\r\n\r\nHence why there are two definitions for `release()`:\r\n\r\n```javascript\r\n    release(closeEndpoints?: (err?: string) => void, cb?: (err?: string) => void): void;\r\n    release(cb?: (err?: string) => void): void;\r\n```",
        "createdAt" : "2018-01-15T16:24:48Z",
        "updatedAt" : "2018-01-15T16:24:48Z",
        "lastEditedBy" : "7232566d-5df4-4fe8-9811-c5b884999763",
        "tags" : [
        ]
      },
      {
        "id" : "1fcf1a61-e03a-4264-b4c5-dcab5feb78d8",
        "parentId" : "f380a041-97e4-416e-8485-a048e7bfaf97",
        "authorId" : "b33cc660-872b-4b45-9406-8167baefc2fc",
        "body" : "Oh i see, I didn't read that carefully enough (stopped at `if (typeof closeEndpoints == 'function')` 🤦‍♂️ ). That's what I get for reviewing on my phone. Sorry!",
        "createdAt" : "2018-01-15T18:15:45Z",
        "updatedAt" : "2018-01-15T18:15:45Z",
        "lastEditedBy" : "b33cc660-872b-4b45-9406-8167baefc2fc",
        "tags" : [
        ]
      },
      {
        "id" : "d6cc2cc8-a696-4138-860c-6c30af369ec6",
        "parentId" : "f380a041-97e4-416e-8485-a048e7bfaf97",
        "authorId" : "7232566d-5df4-4fe8-9811-c5b884999763",
        "body" : "👍 ",
        "createdAt" : "2018-01-15T18:23:04Z",
        "updatedAt" : "2018-01-15T18:23:04Z",
        "lastEditedBy" : "7232566d-5df4-4fe8-9811-c5b884999763",
        "tags" : [
        ]
      }
    ],
    "commit" : "9b7dcb9e20c0d1de70cb6d9da3d551e9a3f81ec8",
    "line" : 41,
    "diffHunk" : "@@ -1,1 +69,73 @@  constructor(device: Device, id: number);\n  claim(): void;\n  release(cb?: (err?: string) => void): void;\n  release(closeEndpoints?: boolean, cb?: (err?: string) => void): void;\n  isKernelDriverActive(): boolean;"
  },
  {
    "id" : "c2ab6ca9-6804-4b22-8011-b3738d1b1203",
    "prId" : 47007,
    "prUrl" : "https://github.com/DefinitelyTyped/DefinitelyTyped/pull/47007#pullrequestreview-481040318",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ffba6ff8-d91e-48ca-80cc-8a55eae6e4b0",
        "parentId" : null,
        "authorId" : "7232566d-5df4-4fe8-9811-c5b884999763",
        "body" : "TBF, I'm not sure about exposing these, but as they exist and `__open()` has already been exposed, I'm OK with it.",
        "createdAt" : "2020-09-01T09:11:34Z",
        "updatedAt" : "2020-09-02T17:33:13Z",
        "lastEditedBy" : "7232566d-5df4-4fe8-9811-c5b884999763",
        "tags" : [
        ]
      },
      {
        "id" : "421f3bef-9a08-4f70-acb0-0faa36a9f57c",
        "parentId" : "ffba6ff8-d91e-48ca-80cc-8a55eae6e4b0",
        "authorId" : "26d483d0-a03b-48c3-affa-85dea9ab6b1d",
        "body" : "Like I said, it's the only way to check the active configuration before selecting one.\r\nThis procedure is [in the official libusb documentation](http://libusb.sourceforge.net/api-1.0/libusb_caveats.html#configsel).",
        "createdAt" : "2020-09-01T12:49:14Z",
        "updatedAt" : "2020-09-02T17:33:13Z",
        "lastEditedBy" : "26d483d0-a03b-48c3-affa-85dea9ab6b1d",
        "tags" : [
        ]
      },
      {
        "id" : "bb041db8-06c4-4dce-a0df-62cb9081d6f8",
        "parentId" : "ffba6ff8-d91e-48ca-80cc-8a55eae6e4b0",
        "authorId" : "7232566d-5df4-4fe8-9811-c5b884999763",
        "body" : "I think the active configuration is available via:\r\n\r\n```\r\n<device>.configDescriptor.bConfigurationValue\r\n```",
        "createdAt" : "2020-09-01T14:17:28Z",
        "updatedAt" : "2020-09-02T17:33:13Z",
        "lastEditedBy" : "7232566d-5df4-4fe8-9811-c5b884999763",
        "tags" : [
        ]
      },
      {
        "id" : "ab22aa56-43ab-43c7-9d1f-d0d720c9b9e1",
        "parentId" : "ffba6ff8-d91e-48ca-80cc-8a55eae6e4b0",
        "authorId" : "26d483d0-a03b-48c3-affa-85dea9ab6b1d",
        "body" : "I thought so too; unfortunately `configDescriptor` is wrongly [cached on first access](https://github.com/tessel/node-usb/blob/cb760d799a0558c5160ba07874aceebcde495eaf/usb.js#L55). The issue is worse than it seems, because after a successful `setConfiguration`, the same (possibly cached) descriptor is [used to build the interfaces](https://github.com/tessel/node-usb/blob/cb760d799a0558c5160ba07874aceebcde495eaf/usb.js#L255).\r\n\r\nSo, right now, in order to perform the procedure you need to use `__getConfigDescriptor().bConfigurationValue` directly.",
        "createdAt" : "2020-09-01T15:14:17Z",
        "updatedAt" : "2020-09-02T17:33:13Z",
        "lastEditedBy" : "26d483d0-a03b-48c3-affa-85dea9ab6b1d",
        "tags" : [
        ]
      },
      {
        "id" : "0f49c3a5-9c39-40dc-99f3-6f87ae6361c8",
        "parentId" : "ffba6ff8-d91e-48ca-80cc-8a55eae6e4b0",
        "authorId" : "26d483d0-a03b-48c3-affa-85dea9ab6b1d",
        "body" : "I mean, the whole libusb API is very hazardous to use in cases where you need to manually configure / claim the device, but we'd need breaking API changes for a proper fix. That's why I suggest we expose these internals (so users can at least work around some of the issues in the meanwhile).",
        "createdAt" : "2020-09-01T15:27:32Z",
        "updatedAt" : "2020-09-02T17:33:13Z",
        "lastEditedBy" : "26d483d0-a03b-48c3-affa-85dea9ab6b1d",
        "tags" : [
        ]
      },
      {
        "id" : "d0cb4dec-4884-4ff7-9c61-bef157bd06f0",
        "parentId" : "ffba6ff8-d91e-48ca-80cc-8a55eae6e4b0",
        "authorId" : "7232566d-5df4-4fe8-9811-c5b884999763",
        "body" : "Would be awesome if this could be fixed in `node-usb` too!",
        "createdAt" : "2020-09-02T16:09:41Z",
        "updatedAt" : "2020-09-02T17:33:13Z",
        "lastEditedBy" : "7232566d-5df4-4fe8-9811-c5b884999763",
        "tags" : [
        ]
      },
      {
        "id" : "78169f34-5e7d-4828-835d-a6115b5f6b42",
        "parentId" : "ffba6ff8-d91e-48ca-80cc-8a55eae6e4b0",
        "authorId" : "26d483d0-a03b-48c3-affa-85dea9ab6b1d",
        "body" : "That would be awesome, yes... I suggested a patch to them a while ago, let's see if they reply.",
        "createdAt" : "2020-09-02T17:22:19Z",
        "updatedAt" : "2020-09-02T17:33:13Z",
        "lastEditedBy" : "26d483d0-a03b-48c3-affa-85dea9ab6b1d",
        "tags" : [
        ]
      }
    ],
    "commit" : "d570b0ddbf83486add85200b8b01e2b447348709",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +43,47 @@\n  __open(): void;\n  __getConfigDescriptor(): ConfigDescriptor;\n  __claimInterface(addr: number): void;\n  __detachKernelDriver(addr: number): void;"
  },
  {
    "id" : "b9b38794-5599-4444-9f0c-30f1dd8b6e06",
    "prId" : 47007,
    "prUrl" : "https://github.com/DefinitelyTyped/DefinitelyTyped/pull/47007#pullrequestreview-479546176",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1b11cac0-295c-4b44-915c-e5b19df90021",
        "parentId" : null,
        "authorId" : "7232566d-5df4-4fe8-9811-c5b884999763",
        "body" : "👍 ",
        "createdAt" : "2020-09-01T09:13:37Z",
        "updatedAt" : "2020-09-02T17:33:13Z",
        "lastEditedBy" : "7232566d-5df4-4fe8-9811-c5b884999763",
        "tags" : [
        ]
      }
    ],
    "commit" : "d570b0ddbf83486add85200b8b01e2b447348709",
    "line" : 72,
    "diffHunk" : "@@ -1,1 +119,123 @@   * The device must be open to use this method.\n   * @param desired\n   * @param callback\n   */\n  setConfiguration(desired: number, callback: (error: undefined | LibUSBException) => void): void;"
  },
  {
    "id" : "107f5c8e-8f2a-4d39-88b7-db7e8a17ed5b",
    "prId" : 47007,
    "prUrl" : "https://github.com/DefinitelyTyped/DefinitelyTyped/pull/47007#pullrequestreview-479797934",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fca7fb9c-0cc0-408d-8d19-f65c7879bfac",
        "parentId" : null,
        "authorId" : "7232566d-5df4-4fe8-9811-c5b884999763",
        "body" : "Does this no longer return a number?",
        "createdAt" : "2020-09-01T09:15:01Z",
        "updatedAt" : "2020-09-02T17:33:13Z",
        "lastEditedBy" : "7232566d-5df4-4fe8-9811-c5b884999763",
        "tags" : [
        ]
      },
      {
        "id" : "1bbe5d66-1897-4fcb-be39-1d6b4dad5d99",
        "parentId" : "fca7fb9c-0cc0-408d-8d19-f65c7879bfac",
        "authorId" : "26d483d0-a03b-48c3-affa-85dea9ab6b1d",
        "body" : "actually it never returned a number, AFAIK [[relevant blame line 1]](https://github.com/tessel/node-usb/blame/5c0d7ff6cd147e5beb53236d7d47da67ff017773/src/device.cc#L302) [[relevant blame line 2]](https://github.com/tessel/node-usb/blame/a69f1e9cb83d11d88cb009013b7346f8c3eac3a4/usb.js#L326)",
        "createdAt" : "2020-09-01T11:26:36Z",
        "updatedAt" : "2020-09-02T17:33:13Z",
        "lastEditedBy" : "26d483d0-a03b-48c3-affa-85dea9ab6b1d",
        "tags" : [
        ]
      },
      {
        "id" : "b5baa19a-a07d-4df7-8e18-91db0c32fe72",
        "parentId" : "fca7fb9c-0cc0-408d-8d19-f65c7879bfac",
        "authorId" : "7232566d-5df4-4fe8-9811-c5b884999763",
        "body" : "ack",
        "createdAt" : "2020-09-01T14:28:24Z",
        "updatedAt" : "2020-09-02T17:33:13Z",
        "lastEditedBy" : "7232566d-5df4-4fe8-9811-c5b884999763",
        "tags" : [
        ]
      }
    ],
    "commit" : "d570b0ddbf83486add85200b8b01e2b447348709",
    "line" : 117,
    "diffHunk" : "@@ -1,1 +312,316 @@   * The device must be open to use this method.\n   */\n  detachKernelDriver(): void;\n\n  /**"
  },
  {
    "id" : "22a60104-1110-4666-8fc7-57b7dc411b54",
    "prId" : 47007,
    "prUrl" : "https://github.com/DefinitelyTyped/DefinitelyTyped/pull/47007#pullrequestreview-479798022",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "309e3236-6504-4fc1-b834-14d4d98cc293",
        "parentId" : null,
        "authorId" : "7232566d-5df4-4fe8-9811-c5b884999763",
        "body" : "Does this no longer return a number?",
        "createdAt" : "2020-09-01T09:15:06Z",
        "updatedAt" : "2020-09-02T17:33:13Z",
        "lastEditedBy" : "7232566d-5df4-4fe8-9811-c5b884999763",
        "tags" : [
        ]
      },
      {
        "id" : "935a27a1-8c3b-407a-bbf8-c9aab0bffe0a",
        "parentId" : "309e3236-6504-4fc1-b834-14d4d98cc293",
        "authorId" : "26d483d0-a03b-48c3-affa-85dea9ab6b1d",
        "body" : "actually it never returned a number, AFAIK [[relevant blame line 1]](https://github.com/tessel/node-usb/blame/5c0d7ff6cd147e5beb53236d7d47da67ff017773/src/device.cc#L311) [[relevant blame line 2]](https://github.com/tessel/node-usb/blame/a69f1e9cb83d11d88cb009013b7346f8c3eac3a4/usb.js#L330)",
        "createdAt" : "2020-09-01T11:27:42Z",
        "updatedAt" : "2020-09-02T17:33:13Z",
        "lastEditedBy" : "26d483d0-a03b-48c3-affa-85dea9ab6b1d",
        "tags" : [
        ]
      },
      {
        "id" : "afb82941-de60-4db1-9084-c33c974e15a2",
        "parentId" : "309e3236-6504-4fc1-b834-14d4d98cc293",
        "authorId" : "7232566d-5df4-4fe8-9811-c5b884999763",
        "body" : "ack",
        "createdAt" : "2020-09-01T14:28:29Z",
        "updatedAt" : "2020-09-02T17:33:13Z",
        "lastEditedBy" : "7232566d-5df4-4fe8-9811-c5b884999763",
        "tags" : [
        ]
      }
    ],
    "commit" : "d570b0ddbf83486add85200b8b01e2b447348709",
    "line" : 125,
    "diffHunk" : "@@ -1,1 +319,323 @@   * The device must be open to use this method.\n   */\n  attachKernelDriver(): void;\n\n  /**"
  }
]