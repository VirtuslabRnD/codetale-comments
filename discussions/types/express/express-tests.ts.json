[
  {
    "id" : "6df4d23f-aea3-4544-91c0-64cb00afed82",
    "prId" : 17016,
    "prUrl" : "https://github.com/DefinitelyTyped/DefinitelyTyped/pull/17016#pullrequestreview-42525010",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "40e79ac5-a097-459e-9343-4037ee1ae808",
        "parentId" : null,
        "authorId" : "5c85bb1a-f137-4416-b14a-bb263f7d1410",
        "body" : "I don't like this part. The idea of test files is to test types by checking returning types with assumptions, like:\r\n```ts\r\nlet header: string | undefined;\r\nheader = req.get('existingHeader');\r\nheader = req.header('nonExistingHeader');\r\nheader = req.headers.existingHeader;\r\n```\r\nSo when someone changes the returned type of this method, the test won't pass. With type assertion it will be false positive.",
        "createdAt" : "2017-06-07T06:49:07Z",
        "updatedAt" : "2017-06-07T06:49:44Z",
        "lastEditedBy" : "5c85bb1a-f137-4416-b14a-bb263f7d1410",
        "tags" : [
        ]
      },
      {
        "id" : "06ae009b-936e-4df3-9764-b669661245ca",
        "parentId" : "40e79ac5-a097-459e-9343-4037ee1ae808",
        "authorId" : "cf4e473c-d186-4ff4-b9dc-b9055f6daced",
        "body" : "if you write\r\n```\r\nlet header: string | undefined;\r\nheader = req.get('existingHeader');\r\n```\r\nand `req.get` returns `string` only, it will pass because `string` can be assigned to `string | undefined`\r\n\r\nif you write what I did\r\n```\r\nreq.get('existingHeader') as string;\r\nreq.get('existingHeader') as undefined;\r\n```\r\nand req.get returns just `string`, you'll get an error `type string cannot be converted to type undefiend` on second statement\r\n\r\nthis was the only way I managed to write tests for this change in a way that they would fail before updating definitions and pass after they're updated",
        "createdAt" : "2017-06-07T07:43:13Z",
        "updatedAt" : "2017-06-07T07:43:13Z",
        "lastEditedBy" : "cf4e473c-d186-4ff4-b9dc-b9055f6daced",
        "tags" : [
        ]
      }
    ],
    "commit" : "72af5467eee6dc36dc47b01e229ce3db607adda8",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +72,76 @@        language = req.acceptsLanguages('en', 'ja');\n\n        let existingHeader1 = req.get('existingHeader') as string;\n        let nonExistingHeader1 = req.get('nonExistingHeader') as undefined;\n"
  }
]