[
  {
    "id" : "81a42b05-bb35-4857-8eaf-fea4cb3a70ac",
    "prId" : 37647,
    "prUrl" : "https://github.com/DefinitelyTyped/DefinitelyTyped/pull/37647#pullrequestreview-276836187",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "11154012-d685-4e89-8039-7b9908077b4c",
        "parentId" : null,
        "authorId" : "c5797251-256e-4248-8fab-01184997dc09",
        "body" : "Why the version change? This would be a breaking change.",
        "createdAt" : "2019-08-15T15:57:18Z",
        "updatedAt" : "2019-08-16T21:12:28Z",
        "lastEditedBy" : "c5797251-256e-4248-8fab-01184997dc09",
        "tags" : [
        ]
      },
      {
        "id" : "19b53dd3-4e00-4ea3-bcad-c5dfbbb6df0f",
        "parentId" : "11154012-d685-4e89-8039-7b9908077b4c",
        "authorId" : "0ec5ee53-1f04-4f9f-9087-2e5430305508",
        "body" : "> this would be a breaking change\r\n\r\nHardly, if [this extremely small set of breaking changes made by TS v3.0](https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes#typescript-30) is an issue then you should update your code base rather than resist upgrading. \r\n\r\nBut to answer your question, before I bumped it the tests failed, something to do with the imports the new tests and typings have to use.",
        "createdAt" : "2019-08-15T22:21:49Z",
        "updatedAt" : "2019-08-16T21:12:28Z",
        "lastEditedBy" : "0ec5ee53-1f04-4f9f-9087-2e5430305508",
        "tags" : [
        ]
      },
      {
        "id" : "be7c6670-5a67-4d4b-a2d9-160a033c378b",
        "parentId" : "11154012-d685-4e89-8039-7b9908077b4c",
        "authorId" : "ae1cf0f9-564e-40ad-9cdf-73f717fd1d58",
        "body" : "It's not always reasonable to ask consumers to upgrade TypeScript versions for their projects especially if it's not necessary. In the case of this PR I think the `esModuleInterop`, which is only used for the tests, is causing the requirement for a higher version. Please remove this flag and use `import JestEnvironmentPuppeteer = require('jest-environment-puppeteer')` instead.",
        "createdAt" : "2019-08-16T19:48:01Z",
        "updatedAt" : "2019-08-16T21:12:28Z",
        "lastEditedBy" : "ae1cf0f9-564e-40ad-9cdf-73f717fd1d58",
        "tags" : [
        ]
      },
      {
        "id" : "b2ff59bd-f413-49e9-a1e2-deecbc402d83",
        "parentId" : "11154012-d685-4e89-8039-7b9908077b4c",
        "authorId" : "0ec5ee53-1f04-4f9f-9087-2e5430305508",
        "body" : "@PranavSenthilnathan I tried bumping it back down to 2.8 and removing `esModuleInterop` and I got the errors again, it comes from the jest-mock library. Here is the error it throws:\r\n```\r\n1> jest-environment-puppeteer failing:\r\n1> Error: Errors in typescript@next for external dependencies:\r\n1> node_modules/@jest/environment/build/index.d.ts(11,8): error TS1259: Module '\"E:/dev/DefinitelyTyped/types/jest-environment-puppeteer/node_modules/jest-mock/build/index\"' can only be default-imported using the 'esModuleInterop' flag\r\n1> node_modules/@jest/source-map/build/getCallsite.d.ts(8,100): error TS2503: Cannot find namespace 'callsites'.\r\n1>\r\n1>     at E:\\dev\\DefinitelyTyped\\node_modules\\dtslint\\bin\\index.js:190:19\r\n1>     at Generator.next (<anonymous>)\r\n1>     at fulfilled (E:\\dev\\DefinitelyTyped\\node_modules\\dtslint\\bin\\index.js:5:58)\r\n```\r\n\r\nGoing back to either 3.0 or 3.4 without `esModuleInterop` still has it fail, so instead I tried version 2.8 with `esModuleInterop` and I ended up with another error, once again due to external dependencies, this is a long one so I dumped it on gist: https://gist.github.com/Favna/fb37f696dcc390fa593cedcf8050751b.\r\n\r\nNext thing I tried was TypeScript v3.0 with `esModuleInterop` which again threw an error:\r\n```\r\n=== ERRORS ===\r\nError in jest-environment-puppeteer\r\nError: Errors in typescript@3.0 for external dependencies:\r\nnode_modules/jest-mock/build/index.d.ts(125,162): error TS2304: Cannot find name 'Parameters'.\r\n\r\n    at E:\\dev\\DefinitelyTyped\\node_modules\\dtslint\\bin\\index.js:190:19\r\n    at Generator.next (<anonymous>)\r\n    at fulfilled (E:\\dev\\DefinitelyTyped\\node_modules\\dtslint\\bin\\index.js:5:58)\r\nError: The following packages had errors: jest-environment-puppeteer\r\n    at doRunTests (E:\\dev\\DefinitelyTyped\\node_modules\\types-publisher\\src\\tester\\test-runner.ts:235:11)\r\n    at processTicksAndRejections (internal/process/task_queues.js:86:5)\r\nerror Command failed with exit code 1.\r\n```\r\n\r\nUltimately I ended up going for TypeScript version 3.4 in 53b225ada2c234a28d8d22c2f2f9fc631c02fb45 after all and with `esModuleInterop`, but I maintained the requested `export = ` and `import .. = require('...')`. I also added a few extra ExpectType tests because the latter means you cannot directly import the interfaces and I'm told I can't have other `export` statements when usin `export =`.",
        "createdAt" : "2019-08-16T21:12:40Z",
        "updatedAt" : "2019-08-16T21:12:59Z",
        "lastEditedBy" : "0ec5ee53-1f04-4f9f-9087-2e5430305508",
        "tags" : [
        ]
      },
      {
        "id" : "3c9223a2-5c07-49fd-81f8-e12884cef87d",
        "parentId" : "11154012-d685-4e89-8039-7b9908077b4c",
        "authorId" : "e30eb346-917e-4cfa-b6d7-7688bc735d2e",
        "body" : "Its unfortunate that the packages you are depending on are using features from typescript 3+.",
        "createdAt" : "2019-08-19T21:55:02Z",
        "updatedAt" : "2019-08-19T21:55:02Z",
        "lastEditedBy" : "e30eb346-917e-4cfa-b6d7-7688bc735d2e",
        "tags" : [
        ]
      }
    ],
    "commit" : "53b225ada2c234a28d8d22c2f2f9fc631c02fb45",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +5,9 @@//                 Jeroen Claassens <https://github.com/favna>\n// Definitions: https://github.com/DefinitelyTyped/DefinitelyTyped\n// TypeScript Version: 3.4\n\nimport { JestEnvironment } from '@jest/environment';"
  }
]