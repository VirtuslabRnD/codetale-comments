[
  {
    "id" : "294e8b04-26d7-4bf8-9309-93445ab3dfa2",
    "prId" : 45552,
    "prUrl" : "https://github.com/DefinitelyTyped/DefinitelyTyped/pull/45552#pullrequestreview-437920192",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8f9a0569-49cb-4dad-80a3-7be8b585de06",
        "parentId" : null,
        "authorId" : "3de208b8-6e64-4b3f-bf56-e8e57cc33faf",
        "body" : "I still don't understand this, maybe another review will do a better job than me â€” What's the `const direction = rule.args.direction` doing here? It's just a constant declaration and doesn't have any tests/etc. to use its value?",
        "createdAt" : "2020-06-25T20:04:21Z",
        "updatedAt" : "2020-06-25T20:04:26Z",
        "lastEditedBy" : "3de208b8-6e64-4b3f-bf56-e8e57cc33faf",
        "tags" : [
        ]
      },
      {
        "id" : "0bc33251-6639-4615-95e9-84d2ddd162ce",
        "parentId" : "8f9a0569-49cb-4dad-80a3-7be8b585de06",
        "authorId" : "a9bd7111-be8d-498f-86db-cfcd5483c4a7",
        "body" : "That's right. The purpose of this PR is to fix a bug for the typing of `$_getRule`. Current typing implementation returns a type `ExtensionRule`, which is technically incorrect compared with what the javascript is returning. Most of the properties on `ExtensionRule` actually diverge from the [response from](https://github.com/hapijs/joi/blob/b3728a27513f88469022183814a8c4416ee709b1/lib/base.js#L646-L649) `$_getRule`. One example being the test I've added here: \r\n```typescript\r\nconst rule = schema.$_getRule('case');\r\n\r\n// PR changes\r\nrule.args            // type of Record<string, any>\r\nrule.args.direction  // works because underlying `args` are an object\r\n\r\n// Current release\r\nrule.args            // type of Array<RuleArgs | string>\r\nrule.args.direction  // typescript thinks `args` is an array, so accessing `direction` throws an error\r\n```\r\nThis test follows the same pattern this test for terms:\r\nhttps://github.com/DefinitelyTyped/DefinitelyTyped/blob/f7ca01985e75715920c20791367e028ed529772c/types/hapi__joi/hapi__joi-tests.ts#L1162-L1163\r\n\r\nLet me know if I can clarify further.",
        "createdAt" : "2020-06-25T23:15:11Z",
        "updatedAt" : "2020-06-25T23:15:12Z",
        "lastEditedBy" : "a9bd7111-be8d-498f-86db-cfcd5483c4a7",
        "tags" : [
        ]
      }
    ],
    "commit" : "33e12cfbf1c8ed0c240f65c9b2fd4899c12978f9",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +1161,1165 @@const rule = Joi.string().case('upper').$_getRule('case');\nif (rule && rule.args) {\n    const direction = rule.args.direction;\n}\n"
  }
]