[
  {
    "id" : "eb65d6b6-96c4-4377-a846-4a264aa44d08",
    "prId" : 10085,
    "prUrl" : "https://github.com/apache/kafka/pull/10085#pullrequestreview-648619488",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2541bb65-8da8-4ee7-a694-7a47f52aaebd",
        "parentId" : null,
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "Maybe a useful `Invariant` we can add here is that there always exists a snapshot corresponding to the log start offset.",
        "createdAt" : "2021-04-28T20:48:15Z",
        "updatedAt" : "2021-04-29T20:11:00Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      },
      {
        "id" : "7c9e2d41-4aa5-4100-9f5d-219ee7f67d08",
        "parentId" : "2541bb65-8da8-4ee7-a694-7a47f52aaebd",
        "authorId" : "4a7c311c-0954-4671-a0d2-266cb67437ad",
        "body" : "Yes. Good idea. Done.",
        "createdAt" : "2021-04-29T20:16:18Z",
        "updatedAt" : "2021-04-29T20:16:19Z",
        "lastEditedBy" : "4a7c311c-0954-4671-a0d2-266cb67437ad",
        "tags" : [
        ]
      }
    ],
    "commit" : "fbbf95304c34a52855ad56d51561e822d64ecc54",
    "line" : 47,
    "diffHunk" : "@@ -1,1 +723,727 @@                time,\n                random,\n                serde\n            );\n            node.initialize();"
  },
  {
    "id" : "932ccf8f-304a-47eb-a4e5-887dcaa34138",
    "prId" : 10085,
    "prUrl" : "https://github.com/apache/kafka/pull/10085#pullrequestreview-649636988",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f9f28a36-d60a-43b4-ba39-b9914be93aef",
        "parentId" : null,
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "Is there any noticeable change in simulation run time? It looks reasonable, but thought I'd check.",
        "createdAt" : "2021-04-30T19:25:26Z",
        "updatedAt" : "2021-04-30T19:25:27Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      },
      {
        "id" : "ddd1b349-5faf-4a63-8ba8-fd4da296e244",
        "parentId" : "f9f28a36-d60a-43b4-ba39-b9914be93aef",
        "authorId" : "4a7c311c-0954-4671-a0d2-266cb67437ad",
        "body" : "Good catch. I made some improvements After the improvements the simulation time went from 1 minute in trunk to a 1:41 minutes for this PR. It looks like a good amount of that time is spent in MockLog.validateOffsetAndEpoch. Let me see what we can do but we can also remove that functionality from the verification.",
        "createdAt" : "2021-04-30T20:59:32Z",
        "updatedAt" : "2021-04-30T21:03:44Z",
        "lastEditedBy" : "4a7c311c-0954-4671-a0d2-266cb67437ad",
        "tags" : [
        ]
      },
      {
        "id" : "a34b9486-f5f4-4660-ab08-b9f44f9188a1",
        "parentId" : "f9f28a36-d60a-43b4-ba39-b9914be93aef",
        "authorId" : "4a7c311c-0954-4671-a0d2-266cb67437ad",
        "body" : "Okay. The simulations now take less than a minute in total on my machine which is what I see on trunk in my machine.",
        "createdAt" : "2021-04-30T21:40:28Z",
        "updatedAt" : "2021-04-30T21:40:29Z",
        "lastEditedBy" : "4a7c311c-0954-4671-a0d2-266cb67437ad",
        "tags" : [
        ]
      }
    ],
    "commit" : "fbbf95304c34a52855ad56d51561e822d64ecc54",
    "line" : 92,
    "diffHunk" : "@@ -1,1 +968,972 @@    }\n\n    private static class SnapshotAtLogStart implements Invariant {\n        final Cluster cluster;\n"
  }
]