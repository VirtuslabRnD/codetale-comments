[
  {
    "id" : "ae9746d0-91c7-47f1-b96e-50f29695116f",
    "prId" : 10480,
    "prUrl" : "https://github.com/apache/kafka/pull/10480#pullrequestreview-645182934",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8481a381-c840-4677-ba8e-cc6b0a70c279",
        "parentId" : null,
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "A couple extra test cases to add:\r\n\r\n1. Can we add a test case for `flush()` to ensure that it forces an immediate drain?\r\n2. Can we add a test case in which we have undrained data when `appendLeaderChangeMessage` is called?",
        "createdAt" : "2021-04-26T23:35:10Z",
        "updatedAt" : "2021-04-28T19:54:04Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      }
    ],
    "commit" : "d043ff6bcf43648ef34031594a8620e64761618a",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +68,72 @@\n    @Test\n    public void testLeaderChangeMessageWritten() {\n        int leaderEpoch = 17;\n        long baseOffset = 0;"
  },
  {
    "id" : "34e25904-1d51-4aaf-a946-75cc332c3bb3",
    "prId" : 10480,
    "prUrl" : "https://github.com/apache/kafka/pull/10480#pullrequestreview-647414839",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6f914afb-96f1-450b-99ce-42479bd1d660",
        "parentId" : null,
        "authorId" : "4a7c311c-0954-4671-a0d2-266cb67437ad",
        "body" : "Let's check that `needsDrain` returns true after this point.",
        "createdAt" : "2021-04-28T19:03:43Z",
        "updatedAt" : "2021-04-28T19:54:04Z",
        "lastEditedBy" : "4a7c311c-0954-4671-a0d2-266cb67437ad",
        "tags" : [
        ]
      }
    ],
    "commit" : "d043ff6bcf43648ef34031594a8620e64761618a",
    "line" : 30,
    "diffHunk" : "@@ -1,1 +85,89 @@        );\n\n        acc.appendLeaderChangeMessage(new LeaderChangeMessage(), time.milliseconds());\n        assertTrue(acc.needsDrain(time.milliseconds()));\n"
  }
]