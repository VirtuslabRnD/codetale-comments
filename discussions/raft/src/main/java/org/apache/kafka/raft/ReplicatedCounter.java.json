[
  {
    "id" : "8643b858-51be-44e6-9e63-327566dc8e95",
    "prId" : 10085,
    "prUrl" : "https://github.com/apache/kafka/pull/10085#pullrequestreview-632837673",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6218d71d-343a-4e8b-b56a-5d5b6343de08",
        "parentId" : null,
        "authorId" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "body" : "As far as I can tell, we should be able to convert these two fields to local variables.",
        "createdAt" : "2021-04-05T18:10:05Z",
        "updatedAt" : "2021-04-29T20:10:59Z",
        "lastEditedBy" : "5c21df64-97d8-46ab-9722-a7e9ba1d7c49",
        "tags" : [
        ]
      },
      {
        "id" : "cdadf01e-8bf2-4ae6-a0cf-d2a84b2c0e1c",
        "parentId" : "6218d71d-343a-4e8b-b56a-5d5b6343de08",
        "authorId" : "4a7c311c-0954-4671-a0d2-266cb67437ad",
        "body" : "Yep. Not sure what I was thinking when I added those fields.",
        "createdAt" : "2021-04-09T22:58:04Z",
        "updatedAt" : "2021-04-29T20:10:59Z",
        "lastEditedBy" : "4a7c311c-0954-4671-a0d2-266cb67437ad",
        "tags" : [
        ]
      }
    ],
    "commit" : "fbbf95304c34a52855ad56d51561e822d64ecc54",
    "line" : 89,
    "diffHunk" : "@@ -1,1 +94,98 @@                }\n\n                nextReadOffset = batch.lastOffset() + 1;\n                readEpoch = batch.epoch();\n            }"
  },
  {
    "id" : "91bf9e19-ee1f-4e4f-8d2d-182e714df891",
    "prId" : 10932,
    "prUrl" : "https://github.com/apache/kafka/pull/10932#pullrequestreview-697367235",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c2ad3815-6937-45dc-9b40-4055ccac94ab",
        "parentId" : null,
        "authorId" : "d520dc4e-6bae-4b0b-90d6-4c0a1cabb518",
        "body" : "nit: Could we add some java doc here to explain why we need this? Thanks.",
        "createdAt" : "2021-07-01T10:04:15Z",
        "updatedAt" : "2021-07-01T10:04:29Z",
        "lastEditedBy" : "d520dc4e-6bae-4b0b-90d6-4c0a1cabb518",
        "tags" : [
        ]
      },
      {
        "id" : "3b61a6ee-70d7-411f-8f6b-ffc50c2854c2",
        "parentId" : "c2ad3815-6937-45dc-9b40-4055ccac94ab",
        "authorId" : "61abc174-b7e4-482c-b853-1017d85f94ca",
        "body" : "fair enough",
        "createdAt" : "2021-07-01T15:12:42Z",
        "updatedAt" : "2021-07-01T15:12:42Z",
        "lastEditedBy" : "61abc174-b7e4-482c-b853-1017d85f94ca",
        "tags" : [
        ]
      }
    ],
    "commit" : "b50fffe383752d423acc71ffb0a452d8c6312417",
    "line" : 25,
    "diffHunk" : "@@ -1,1 +173,177 @@\n    /** Use handleSnapshotCalls to verify leader is never asked to load snapshot */\n    public int handleSnapshotCalls() {\n        return handleSnapshotCalls;\n    }"
  },
  {
    "id" : "66f6f161-ac16-472a-9864-5c0004f2751e",
    "prId" : 10946,
    "prUrl" : "https://github.com/apache/kafka/pull/10946#pullrequestreview-697670730",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "76782dda-a1a3-4cf6-ae22-638c1e71b9cd",
        "parentId" : null,
        "authorId" : "514c0afb-8649-4fd9-a6ea-ee9e1b695274",
        "body" : "Do we need to assert that the `BatchReader` returned at least one record? If we don't, isn't it possible we could create a snapshot with lastCommittedOffset = -1, lastCommittedTimestamp = -1, etc. ?\r\n\r\nSo I guess we could just add a check that lastCommittedOffset != -1.",
        "createdAt" : "2021-07-01T21:26:53Z",
        "updatedAt" : "2021-07-01T21:26:53Z",
        "lastEditedBy" : "514c0afb-8649-4fd9-a6ea-ee9e1b695274",
        "tags" : [
        ]
      },
      {
        "id" : "0426cce5-1ab7-4bd8-a6d6-e0a44091979c",
        "parentId" : "76782dda-a1a3-4cf6-ae22-638c1e71b9cd",
        "authorId" : "4a7c311c-0954-4671-a0d2-266cb67437ad",
        "body" : "We are doing this within this check:\r\n```\r\nif (lastOffsetSnapshotted + snapshotDelayInRecords  < lastCommittedOffset) {\r\n```\r\nAs long as `snapshotDelayInRecords` is greater than `0`, which is the case here, I think we can be sure that `lastCommittedOffset` is not `-1`.",
        "createdAt" : "2021-07-01T21:32:49Z",
        "updatedAt" : "2021-07-01T21:32:49Z",
        "lastEditedBy" : "4a7c311c-0954-4671-a0d2-266cb67437ad",
        "tags" : [
        ]
      }
    ],
    "commit" : "ca411125119c47b3ed22fe86e1af1bec6371d06d",
    "line" : 21,
    "diffHunk" : "@@ -1,1 +109,113 @@                    lastOffsetSnapshotted\n                );\n                Optional<SnapshotWriter<Integer>> snapshot = client.createSnapshot(\n                    lastCommittedOffset,\n                    lastCommittedEpoch,"
  }
]