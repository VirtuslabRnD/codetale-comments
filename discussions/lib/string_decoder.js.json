[
  {
    "id" : "4f2d7755-3699-48f6-b652-bf493ecfa01b",
    "prId" : 6777,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2dc6cd74-8ef9-41f6-a0ed-36b881a02cd7",
        "parentId" : null,
        "authorId" : "d10ccdef-08de-4320-917e-16a9175dedcf",
        "body" : "I'm thinking it would make sense to move this into an internal util \n",
        "createdAt" : "2016-05-15T19:46:16Z",
        "updatedAt" : "2016-05-29T18:49:55Z",
        "lastEditedBy" : "d10ccdef-08de-4320-917e-16a9175dedcf",
        "tags" : [
        ]
      },
      {
        "id" : "b7be133e-d20a-4f93-827e-a11bfee71efc",
        "parentId" : "2dc6cd74-8ef9-41f6-a0ed-36b881a02cd7",
        "authorId" : "c5f34109-f61d-4540-9a67-e4a5494934e5",
        "body" : "Perhaps. I was working on some Buffer changes that might end up doing something similar.\n",
        "createdAt" : "2016-05-15T20:05:25Z",
        "updatedAt" : "2016-05-29T18:49:55Z",
        "lastEditedBy" : "c5f34109-f61d-4540-9a67-e4a5494934e5",
        "tags" : [
        ]
      },
      {
        "id" : "5c4b5f11-559b-43b4-8a31-81bbea4b74be",
        "parentId" : "2dc6cd74-8ef9-41f6-a0ed-36b881a02cd7",
        "authorId" : "d10ccdef-08de-4320-917e-16a9175dedcf",
        "body" : "fwiw, I had been experimenting with something similar in the speculative icu module work. See https://github.com/jasnell/node/blob/icu-module/lib/icu.js#L113-L134.\n",
        "createdAt" : "2016-05-15T20:49:15Z",
        "updatedAt" : "2016-05-29T18:49:55Z",
        "lastEditedBy" : "d10ccdef-08de-4320-917e-16a9175dedcf",
        "tags" : [
        ]
      }
    ],
    "commit" : "d23b7d2656dc25f6a33bcd436e15e9fd84aabc27",
    "line" : 11,
    "diffHunk" : "@@ -1,1 +5,9 @@// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var low;"
  },
  {
    "id" : "383440c2-1f7d-4d5e-94aa-5f4e2407d267",
    "prId" : 6777,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4d644391-d0ae-460a-8f87-9a064f96cbb5",
        "parentId" : null,
        "authorId" : "c8ef07ae-30f6-4919-9aa8-bf0160bbd4a0",
        "body" : "This should default to `utf8` when `encoding` is empty/undefined/generally false-y, no?\n",
        "createdAt" : "2016-05-16T00:15:38Z",
        "updatedAt" : "2016-05-29T18:49:55Z",
        "lastEditedBy" : "c8ef07ae-30f6-4919-9aa8-bf0160bbd4a0",
        "tags" : [
        ]
      },
      {
        "id" : "d18d7c69-0521-454b-816a-3450f4963305",
        "parentId" : "4d644391-d0ae-460a-8f87-9a064f96cbb5",
        "authorId" : "c5f34109-f61d-4540-9a67-e4a5494934e5",
        "body" : "Fixed + test added.\n",
        "createdAt" : "2016-05-16T04:38:18Z",
        "updatedAt" : "2016-05-29T18:49:55Z",
        "lastEditedBy" : "c5f34109-f61d-4540-9a67-e4a5494934e5",
        "tags" : [
        ]
      }
    ],
    "commit" : "d23b7d2656dc25f6a33bcd436e15e9fd84aabc27",
    "line" : 55,
    "diffHunk" : "@@ -1,1 +40,44 @@exports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {"
  },
  {
    "id" : "b2091028-22e9-43d4-a1c0-1ed5931abe41",
    "prId" : 6777,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7dc1e6a1-0854-4162-b9c3-8d4fe1973338",
        "parentId" : null,
        "authorId" : "4224fcfe-ee22-4bd8-9ed5-4e8efd7a90bc",
        "body" : "EDIT: Removed, misread.\n",
        "createdAt" : "2016-05-18T09:46:22Z",
        "updatedAt" : "2016-05-29T18:49:55Z",
        "lastEditedBy" : "4224fcfe-ee22-4bd8-9ed5-4e8efd7a90bc",
        "tags" : [
        ]
      }
    ],
    "commit" : "d23b7d2656dc25f6a33bcd436e15e9fd84aabc27",
    "line" : 159,
    "diffHunk" : "@@ -1,1 +80,84 @@  }\n  if (i < buf.length)\n    return (r ? r + this.text(buf, i) : this.text(buf, i));\n  return r || '';\n};"
  },
  {
    "id" : "ac47c0eb-dbc2-43b2-b476-5c74a1daae5f",
    "prId" : 7310,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "134488df-62aa-4684-a411-4dd2d4aef661",
        "parentId" : null,
        "authorId" : "d47a8b61-a8ac-4504-809d-8432d9e75d95",
        "body" : "Couldn't it still go negative here?\n",
        "createdAt" : "2016-06-21T16:40:55Z",
        "updatedAt" : "2016-06-24T03:50:16Z",
        "lastEditedBy" : "d47a8b61-a8ac-4504-809d-8432d9e75d95",
        "tags" : [
        ]
      },
      {
        "id" : "2616de34-ad6e-40ac-8d08-1b67c7f92c6e",
        "parentId" : "134488df-62aa-4684-a411-4dd2d4aef661",
        "authorId" : "c5f34109-f61d-4540-9a67-e4a5494934e5",
        "body" : "No, because if execution has reached here, `nb` would have to be a 2, 3, or 4-byte character indicator. So `self.lastNeed` would range from 0 to 2.\n",
        "createdAt" : "2016-06-21T16:56:04Z",
        "updatedAt" : "2016-06-24T03:50:16Z",
        "lastEditedBy" : "c5f34109-f61d-4540-9a67-e4a5494934e5",
        "tags" : [
        ]
      },
      {
        "id" : "afcf6b05-27b1-42c2-ab21-234f9860cbfa",
        "parentId" : "134488df-62aa-4684-a411-4dd2d4aef661",
        "authorId" : "d47a8b61-a8ac-4504-809d-8432d9e75d95",
        "body" : "Oh right, `nb` can't be 1.\n",
        "createdAt" : "2016-06-21T17:05:58Z",
        "updatedAt" : "2016-06-24T03:50:16Z",
        "lastEditedBy" : "d47a8b61-a8ac-4504-809d-8432d9e75d95",
        "tags" : [
        ]
      }
    ],
    "commit" : "5e8cbd7a4f04f1e28a83bfea957ea4c23b77d6e0",
    "line" : 51,
    "diffHunk" : "@@ -1,1 +113,117 @@  if (nb >= 0) {\n    if (nb > 0)\n      self.lastNeed = nb - 2;\n    return nb;\n  }"
  },
  {
    "id" : "4faa3177-4208-4334-b7ae-5c4dede33fed",
    "prId" : 7310,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3665c6eb-c5b9-4aa5-8337-204bb4031d25",
        "parentId" : null,
        "authorId" : "d47a8b61-a8ac-4504-809d-8432d9e75d95",
        "body" : "What is the reason to repeat it two more times?\n",
        "createdAt" : "2016-06-23T18:37:29Z",
        "updatedAt" : "2016-06-24T03:50:16Z",
        "lastEditedBy" : "d47a8b61-a8ac-4504-809d-8432d9e75d95",
        "tags" : [
        ]
      },
      {
        "id" : "a1788fc6-f302-428b-ac3e-458e0946d43a",
        "parentId" : "3665c6eb-c5b9-4aa5-8337-204bb4031d25",
        "authorId" : "c5f34109-f61d-4540-9a67-e4a5494934e5",
        "body" : "Because of the two preceding (valid) continuation bytes.\n",
        "createdAt" : "2016-06-24T02:28:30Z",
        "updatedAt" : "2016-06-24T03:50:16Z",
        "lastEditedBy" : "c5f34109-f61d-4540-9a67-e4a5494934e5",
        "tags" : [
        ]
      },
      {
        "id" : "073aa75c-161c-4bca-aba2-7b2d0de9e6a3",
        "parentId" : "3665c6eb-c5b9-4aa5-8337-204bb4031d25",
        "authorId" : "d47a8b61-a8ac-4504-809d-8432d9e75d95",
        "body" : "Sorry, but it is still not obvious to me.\n",
        "createdAt" : "2016-06-24T02:31:43Z",
        "updatedAt" : "2016-06-24T03:50:16Z",
        "lastEditedBy" : "d47a8b61-a8ac-4504-809d-8432d9e75d95",
        "tags" : [
        ]
      }
    ],
    "commit" : "5e8cbd7a4f04f1e28a83bfea957ea4c23b77d6e0",
    "line" : 94,
    "diffHunk" : "@@ -1,1 +152,156 @@      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd'.repeat(p + 2);\n      }\n    }"
  }
]