[
  {
    "id" : "408a4195-31c8-42e5-9509-f60c732e02ac",
    "prId" : 39396,
    "prUrl" : "https://github.com/ansible/ansible/pull/39396#pullrequestreview-115764691",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fe7d3e60-503b-43db-abf1-818e23af0649",
        "parentId" : null,
        "authorId" : "3d5987fe-7304-48f0-a541-f2863ae8b5aa",
        "body" : "In Pulp, roles are indexed by a UUID instead of an int id.",
        "createdAt" : "2018-04-26T22:03:54Z",
        "updatedAt" : "2018-04-26T22:03:54Z",
        "lastEditedBy" : "3d5987fe-7304-48f0-a541-f2863ae8b5aa",
        "tags" : [
        ]
      }
    ],
    "commit" : "ad303f97ec93838458df331e16f59ed41dc85146",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +204,208 @@\n        try:\n            url = '%s/roles/%s/%s/?page_size=50' % (self.baseurl, role_id, related)\n            data = self.__call_galaxy(url)\n            results = data['results']"
  },
  {
    "id" : "7371828a-7124-4f92-bd8d-8a35080238e1",
    "prId" : 60982,
    "prUrl" : "https://github.com/ansible/ansible/pull/60982#pullrequestreview-281042942",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f18a7186-4e85-4ef0-a4db-10ee8e63fb60",
        "parentId" : null,
        "authorId" : "3c2d2125-0d1f-41a8-b9f4-2c8913ca435d",
        "body" : "We said that we're going to deprecate current_version from the Galaxy API, so it seems we should remove this check altogether and just default to `v1`.",
        "createdAt" : "2019-08-27T14:52:24Z",
        "updatedAt" : "2019-08-28T20:34:58Z",
        "lastEditedBy" : "3c2d2125-0d1f-41a8-b9f4-2c8913ca435d",
        "tags" : [
        ]
      },
      {
        "id" : "8e45bfa9-e7fe-4c1b-89f5-e3c28b99bdfc",
        "parentId" : "f18a7186-4e85-4ef0-a4db-10ee8e63fb60",
        "authorId" : "a333664b-bd2f-4848-8827-f90665eeb5ff",
        "body" : "We can't actually get rid of it, since existing supported versions of `ansible-galaxy` depend on it. But we _should_ remove uses of it and rely on `available_versions` instead and make sure there's an overlap between that and `SUPPORTED_VERSIONS` here.",
        "createdAt" : "2019-08-27T15:05:42Z",
        "updatedAt" : "2019-08-28T20:34:58Z",
        "lastEditedBy" : "a333664b-bd2f-4848-8827-f90665eeb5ff",
        "tags" : [
        ]
      },
      {
        "id" : "f5bd7a00-f22e-415f-bfee-ee58d866e926",
        "parentId" : "f18a7186-4e85-4ef0-a4db-10ee8e63fb60",
        "authorId" : "fa0144fc-7424-474a-9ab5-059de28814b7",
        "body" : "Wasn't planning on changing _get_server_api_version() related code for this PR given the time frame, but can revisit if necessary. ",
        "createdAt" : "2019-08-28T13:01:05Z",
        "updatedAt" : "2019-08-28T20:34:58Z",
        "lastEditedBy" : "fa0144fc-7424-474a-9ab5-059de28814b7",
        "tags" : [
        ]
      },
      {
        "id" : "fb3d435b-ebf7-479c-9a2d-710bea019c56",
        "parentId" : "f18a7186-4e85-4ef0-a4db-10ee8e63fb60",
        "authorId" : "3c2d2125-0d1f-41a8-b9f4-2c8913ca435d",
        "body" : "Let it go for now.",
        "createdAt" : "2019-08-28T19:09:37Z",
        "updatedAt" : "2019-08-28T20:34:58Z",
        "lastEditedBy" : "3c2d2125-0d1f-41a8-b9f4-2c8913ca435d",
        "tags" : [
        ]
      }
    ],
    "commit" : "058a6df0a249ae95ea132ffd68e262a46b2fc165",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +46,50 @@\n            if server_version not in self.SUPPORTED_VERSIONS:\n                raise AnsibleError(\"Unsupported Galaxy server API version: %s\" % server_version)\n\n            self.baseurl = _urljoin(self.api_server, \"api\", server_version)"
  },
  {
    "id" : "fe83340d-bd74-4d43-b00a-edc0a814e54a",
    "prId" : 60982,
    "prUrl" : "https://github.com/ansible/ansible/pull/60982#pullrequestreview-280821124",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "19ab1958-7f54-4b06-af88-73091c1b7045",
        "parentId" : null,
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "It seems like this should potentially be based on the API version that is being used and not something explicitly set. Would there be a reason why this should be configurable outside of using `Bearer` for `v3` and `Token` for older versions?",
        "createdAt" : "2019-08-27T21:10:47Z",
        "updatedAt" : "2019-08-28T20:34:58Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      },
      {
        "id" : "58762174-993e-403c-84e7-cf0b608d374f",
        "parentId" : "19ab1958-7f54-4b06-af88-73091c1b7045",
        "authorId" : "fa0144fc-7424-474a-9ab5-059de28814b7",
        "body" : "Considered passing in api_version or some slightly more abstract authentication option and letting GalaxyAPI choose the right auth mechanism based on that. \r\n\r\nChose to pass in 'token_type' since it seemed more consistent with the existing params which are all very explicit and concrete. Though, at the moment, nothing passes 'token_type' to the the GalaxyAPI() init (ie, it's not configurable or setup from cli/galaxy.py for ex). So the token_type param could be removed and default to 'Token'[1]\r\n\r\nI'm taking a look at what changes to use api_version would look like. Assuming no problems I can change it.\r\n\r\n[1] or api_version or auth_type etc defaults could be setup.",
        "createdAt" : "2019-08-28T13:17:49Z",
        "updatedAt" : "2019-08-28T20:34:58Z",
        "lastEditedBy" : "fa0144fc-7424-474a-9ab5-059de28814b7",
        "tags" : [
        ]
      }
    ],
    "commit" : "058a6df0a249ae95ea132ffd68e262a46b2fc165",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +73,77 @@        self.password = password\n        self.token = token\n        self.token_type = token_type or 'Token'\n        self.api_server = url\n        self.validate_certs = not context.CLIARGS['ignore_certs']"
  },
  {
    "id" : "e8e7d67c-977e-42ae-bdd8-ebc7212ee893",
    "prId" : 60982,
    "prUrl" : "https://github.com/ansible/ansible/pull/60982#pullrequestreview-280842473",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8e65a38c-3207-4ba4-9eb2-a20aa637cb3e",
        "parentId" : null,
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "Leading into my other comments, I think this should be lazily evaluated on this class when called for the first time to save the time it takes for `ansible-galaxy` to complete an operation.",
        "createdAt" : "2019-08-27T21:11:42Z",
        "updatedAt" : "2019-08-28T20:34:58Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      },
      {
        "id" : "e83bc6b1-7585-45d6-b21f-e0a561ac8d95",
        "parentId" : "8e65a38c-3207-4ba4-9eb2-a20aa637cb3e",
        "authorId" : "fa0144fc-7424-474a-9ab5-059de28814b7",
        "body" : "@jborean93 The problem I ran into trying to set it up lazily was a bit of a catch-22 for things like 'publish_collection' where the API version needs to be known before the `PUSH /api/v2/collections/` or `PUSH /api/v3/artifacts/collections/` is made so the right url is chosen. So I changed it to explicitly check the avail versions before those calls.\r\n\r\nI could move those calls into the GalaxyAPI class and wrap them with @gconnect(). And abstract them slightly for v2/v3 diffs. \r\n\r\nAny reason not to move those url requests into GalaxyAPI? I left the galaxy API open_urls() calls in collection.py, Should they be moved into ansible.galaxy.api.GalaxyAPI() ?",
        "createdAt" : "2019-08-28T13:48:38Z",
        "updatedAt" : "2019-08-28T20:34:58Z",
        "lastEditedBy" : "fa0144fc-7424-474a-9ab5-059de28814b7",
        "tags" : [
        ]
      }
    ],
    "commit" : "058a6df0a249ae95ea132ffd68e262a46b2fc165",
    "line" : 32,
    "diffHunk" : "@@ -1,1 +79,83 @@        self.version = None\n        self.initialized = False\n        self.available_api_versions = {}\n\n        display.debug('Validate TLS certificates for %s: %s' % (self.api_server, self.validate_certs))"
  },
  {
    "id" : "9b5c3f05-7dbd-4884-8b05-9640cfe295ef",
    "prId" : 63580,
    "prUrl" : "https://github.com/ansible/ansible/pull/63580#pullrequestreview-302838572",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "078044a8-68ec-4b8e-9c29-7f50ab4b51a0",
        "parentId" : null,
        "authorId" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "body" : "```suggestion\r\nfrom ansible.module_utils.six.moves.urllib.parse import quote as urlquote, urlencode\r\n```",
        "createdAt" : "2019-10-16T19:58:30Z",
        "updatedAt" : "2019-10-16T21:20:38Z",
        "lastEditedBy" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "tags" : [
        ]
      }
    ],
    "commit" : "ea26ca0628cab512814dca57afd8c79529fb4ceb",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +16,20 @@from ansible.module_utils.six import string_types\nfrom ansible.module_utils.six.moves.urllib.error import HTTPError\nfrom ansible.module_utils.six.moves.urllib.parse import quote as urlquote, urlencode, urlparse\nfrom ansible.module_utils._text import to_bytes, to_native, to_text\nfrom ansible.module_utils.urls import open_url"
  },
  {
    "id" : "12d54f4b-0326-4a68-ad3b-8805443f509e",
    "prId" : 71904,
    "prUrl" : "https://github.com/ansible/ansible/pull/71904#pullrequestreview-526631646",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5e0cf616-88f6-4a00-82f1-e46cfa049687",
        "parentId" : null,
        "authorId" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "body" : "```suggestion\r\n        if not (cache and self._cache):\r\n            return data\r\n```",
        "createdAt" : "2020-11-03T15:18:14Z",
        "updatedAt" : "2020-11-09T20:07:48Z",
        "lastEditedBy" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "tags" : [
        ]
      },
      {
        "id" : "3ecd80bb-f003-4fc8-a486-629f504e535e",
        "parentId" : "5e0cf616-88f6-4a00-82f1-e46cfa049687",
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "Must of a muchness really, it's just 1 level of indentation and who knows what else will be added in the future.",
        "createdAt" : "2020-11-09T20:33:37Z",
        "updatedAt" : "2020-11-09T20:33:37Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      }
    ],
    "commit" : "87586aa22ebd615cb96cbdc956f2e0634b140908",
    "line" : 211,
    "diffHunk" : "@@ -1,1 +331,335 @@                               % (resp.url, to_native(resp_data)))\n\n        if cache and self._cache:\n            path_cache = self._cache[cache_id][url_info.path]\n"
  },
  {
    "id" : "36bc4eac-0495-4b71-81f8-7b73ea59ef2c",
    "prId" : 71904,
    "prUrl" : "https://github.com/ansible/ansible/pull/71904#pullrequestreview-526630924",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ff0a411b-827f-41f9-8bfa-dbf81e371644",
        "parentId" : null,
        "authorId" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "body" : "Using EOL escaping is prone to accidental line breaks during refactoring so I usually prefer using parens instead. Also, it's better to use `str.format()` with named params having in mind that we'll be moving towards 3.7/3.8+ codebase in the future and such syntax would be easier to upgrade.",
        "createdAt" : "2020-11-03T15:29:17Z",
        "updatedAt" : "2020-11-09T20:07:48Z",
        "lastEditedBy" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "tags" : [
        ]
      },
      {
        "id" : "33bd62f3-c4d3-4db1-a09e-d23a3e8aafa7",
        "parentId" : "ff0a411b-827f-41f9-8bfa-dbf81e371644",
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "Eh, there are 100s of ways to do string formatting in Python with everyone having their own preferences. When we do upgrade then people are free to convert it to f strings but honestly I think this is fine for now.",
        "createdAt" : "2020-11-09T20:32:30Z",
        "updatedAt" : "2020-11-09T20:32:30Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      }
    ],
    "commit" : "87586aa22ebd615cb96cbdc956f2e0634b140908",
    "line" : 274,
    "diffHunk" : "@@ -1,1 +693,697 @@\n        info_url = _urljoin(self.api_server, api_path, 'collections', namespace, name, '/')\n        error_context_msg = 'Error when getting the collection info for %s.%s from %s (%s)' \\\n                            % (namespace, name, self.name, self.api_server)\n        data = self._call_galaxy(info_url, error_context_msg=error_context_msg)"
  },
  {
    "id" : "41c4fa6a-b4a4-437c-8bb0-4cf4327fcd7e",
    "prId" : 72591,
    "prUrl" : "https://github.com/ansible/ansible/pull/72591#pullrequestreview-581846460",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "77af1d64-9de3-4574-873e-6986daa8ccd2",
        "parentId" : null,
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "total_ordering isn't present in 2.7 so you can't use this until ansible-2.12.",
        "createdAt" : "2021-02-02T22:20:35Z",
        "updatedAt" : "2021-02-02T22:20:35Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      },
      {
        "id" : "0017a465-8c2b-434b-addf-659c369dfb72",
        "parentId" : "77af1d64-9de3-4574-873e-6986daa8ccd2",
        "authorId" : "4b69a0b5-ac6f-45e9-9507-dd1385182f29",
        "body" : "Not technically.  We do not support 2.6 on the controller, and as long as it isn't causing testing issues, I see no reason why not.  2.7 is our minimum required for the controller.",
        "createdAt" : "2021-02-02T22:22:09Z",
        "updatedAt" : "2021-02-02T22:22:09Z",
        "lastEditedBy" : "4b69a0b5-ac6f-45e9-9507-dd1385182f29",
        "tags" : [
        ]
      },
      {
        "id" : "e36bf402-8c02-4a7c-ba49-d56b0fea5ddb",
        "parentId" : "77af1d64-9de3-4574-873e-6986daa8ccd2",
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "Ah, sorry.  I checked the python 3 docs and saw it wasn't present from the outset.  I forgot that python2.7's release came after python 3.1 so total_ordering might have been added to both releases. ",
        "createdAt" : "2021-02-02T22:57:11Z",
        "updatedAt" : "2021-02-03T10:01:53Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      }
    ],
    "commit" : "048a9684ef014d41808bd9123b6a5e0267f84b5b",
    "line" : 12,
    "diffHunk" : "@@ -1,1 +235,239 @@\n\n@functools.total_ordering\nclass GalaxyAPI:\n    \"\"\" This class is meant to be used as a API client for an Ansible Galaxy server \"\"\""
  }
]