[
  {
    "id" : "396ee6e8-63ca-4322-9c02-9d681aea7b26",
    "prId" : 72591,
    "prUrl" : "https://github.com/ansible/ansible/pull/72591#pullrequestreview-528605750",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cf9d0410-f00a-4f8b-af7d-a7cadcb96bf8",
        "parentId" : null,
        "authorId" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "body" : "FIXME: think about handling this hack better",
        "createdAt" : "2020-11-11T23:17:18Z",
        "updatedAt" : "2021-01-27T19:30:12Z",
        "lastEditedBy" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "tags" : [
        ]
      }
    ],
    "commit" : "048a9684ef014d41808bd9123b6a5e0267f84b5b",
    "line" : 188,
    "diffHunk" : "@@ -1,1 +186,190 @@        tmp_inst_req = cls(None, None, dir_path, 'dir')\n        req_name = art_mgr.get_direct_collection_fqcn(tmp_inst_req)\n        req_version = art_mgr.get_direct_collection_version(tmp_inst_req)\n\n        return cls(req_name, req_version, dir_path, 'dir')"
  },
  {
    "id" : "d1ab7c6d-c3dd-46c9-897c-a23d112e6e04",
    "prId" : 72591,
    "prUrl" : "https://github.com/ansible/ansible/pull/72591#pullrequestreview-533689519",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "126df0f4-90ac-46c8-9cf1-b1236a86e571",
        "parentId" : null,
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "Is this even needed, we will be dropping py2 and `to_text` does not call `__unicode__`. You may as well just put this in `__str__`.",
        "createdAt" : "2020-11-18T04:32:11Z",
        "updatedAt" : "2021-01-27T19:30:12Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      },
      {
        "id" : "261a1413-922b-4231-b5e1-a8d6886ded17",
        "parentId" : "126df0f4-90ac-46c8-9cf1-b1236a86e571",
        "authorId" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "body" : "I just want this interface to be complete. Also, if an unwrapped instance slips into the interpolation, it'll probably get called.",
        "createdAt" : "2020-11-18T17:24:14Z",
        "updatedAt" : "2021-01-27T19:30:12Z",
        "lastEditedBy" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "tags" : [
        ]
      }
    ],
    "commit" : "048a9684ef014d41808bd9123b6a5e0267f84b5b",
    "line" : 345,
    "diffHunk" : "@@ -1,1 +343,347 @@        return to_native(self.__unicode__())\n\n    def __unicode__(self):\n        if self.fqcn is None:\n            return ("
  },
  {
    "id" : "e9b99508-5d2f-4d7f-a458-d7842ca796fb",
    "prId" : 72591,
    "prUrl" : "https://github.com/ansible/ansible/pull/72591#pullrequestreview-567437542",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a13da369-6b57-4670-affd-7ace1ae5416a",
        "parentId" : null,
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "`from_dir_path` tries to get the FQCN from the metadata and can cause an IOError if the metadata file doesn't exist:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/root/ansible/bin/ansible-galaxy\", line 135, in <module>\r\n    exit_code = cli.run()\r\n  File \"/root/ansible/lib/ansible/cli/galaxy.py\", line 536, in run\r\n    context.CLIARGS['func']()\r\n  File \"/root/ansible/lib/ansible/cli/galaxy.py\", line 1299, in execute_list\r\n    self.execute_list_collection()\r\n  File \"/root/ansible/lib/ansible/cli/galaxy.py\", line 68, in method_wrapper\r\n    return wrapped_method(*args, **kwargs)\r\n  File \"/root/ansible/lib/ansible/cli/galaxy.py\", line 1423, in execute_list_collection\r\n    collection_path, artifacts_manager,\r\n  File \"/root/ansible/lib/ansible/galaxy/collection/__init__.py\", line 993, in find_existing_collections\r\n    artifacts_manager,\r\n  File \"/root/ansible/lib/ansible/galaxy/dependency_resolution/dataclasses.py\", line 162, in from_dir_path_as_unknown\r\n    return cls.from_dir_path(dir_path, art_mgr)\r\n  File \"/root/ansible/lib/ansible/galaxy/dependency_resolution/dataclasses.py\", line 187, in from_dir_path\r\n    req_name = art_mgr.get_direct_collection_fqcn(tmp_inst_req)\r\n  File \"/root/ansible/lib/ansible/galaxy/collection/concrete_artifact_manager.py\", line 206, in get_direct_collection_fqcn\r\n    self._get_direct_collection_namespace(collection),  # type: ignore\r\n  File \"/root/ansible/lib/ansible/galaxy/collection/concrete_artifact_manager.py\", line 190, in _get_direct_collection_namespace\r\n    return self.get_direct_collection_meta(collection)['namespace']  # type: ignore\r\n  File \"/root/ansible/lib/ansible/galaxy/collection/concrete_artifact_manager.py\", line 234, in get_direct_collection_meta\r\n    collection_meta = _get_meta_from_dir(b_artifact_path)\r\n  File \"/root/ansible/lib/ansible/galaxy/collection/concrete_artifact_manager.py\", line 477, in _get_meta_from_dir\r\n    return _get_meta_from_installed_dir(b_path)\r\n  File \"/root/ansible/lib/ansible/galaxy/collection/concrete_artifact_manager.py\", line 519, in _get_meta_from_installed_dir\r\n    with open(b_manifest_json_path, 'rb') as manifest_fd:\r\nIOError: [Errno 2] No such file or directory: '/tmp/tmp.pOHC9vpM6d/local/ansible_collections/ansible_test/development/MANIFEST.json'\r\n```",
        "createdAt" : "2021-01-13T17:05:29Z",
        "updatedAt" : "2021-01-27T19:30:12Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      }
    ],
    "commit" : "048a9684ef014d41808bd9123b6a5e0267f84b5b",
    "line" : 164,
    "diffHunk" : "@@ -1,1 +162,166 @@        try:\n            return cls.from_dir_path(dir_path, art_mgr)\n        except ValueError:\n            return cls.from_dir_path_implicit(dir_path)\n"
  },
  {
    "id" : "4d46a442-079a-4fe4-9308-d810b5856e57",
    "prId" : 72591,
    "prUrl" : "https://github.com/ansible/ansible/pull/72591#pullrequestreview-569788396",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1d3127a7-bb48-4049-a135-b336fc841300",
        "parentId" : null,
        "authorId" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "body" : "this'd be great",
        "createdAt" : "2021-01-16T00:40:48Z",
        "updatedAt" : "2021-01-27T19:30:12Z",
        "lastEditedBy" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "tags" : [
        ]
      }
    ],
    "commit" : "048a9684ef014d41808bd9123b6a5e0267f84b5b",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +3,7 @@# GNU General Public License v3.0+ (see COPYING or https://www.gnu.org/licenses/gpl-3.0.txt)\n\"\"\"Dependency structs.\"\"\"\n# FIXME: add caching all over the place\n\nfrom __future__ import (absolute_import, division, print_function)"
  },
  {
    "id" : "18025ac2-afc7-4c34-baf0-83946893e3a4",
    "prId" : 72591,
    "prUrl" : "https://github.com/ansible/ansible/pull/72591#pullrequestreview-572188597",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ac1ae82d-7045-4b49-b71f-e0c1c7be53f7",
        "parentId" : null,
        "authorId" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "body" : "TODO ^",
        "createdAt" : "2021-01-16T00:41:48Z",
        "updatedAt" : "2021-01-27T19:30:12Z",
        "lastEditedBy" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "tags" : [
        ]
      },
      {
        "id" : "523b9819-463c-4de4-9be7-929ed6d87ef0",
        "parentId" : "ac1ae82d-7045-4b49-b71f-e0c1c7be53f7",
        "authorId" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "body" : "https://github.com/ansible/ansible/pull/73279",
        "createdAt" : "2021-01-20T12:51:59Z",
        "updatedAt" : "2021-01-27T19:30:12Z",
        "lastEditedBy" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "tags" : [
        ]
      }
    ],
    "commit" : "048a9684ef014d41808bd9123b6a5e0267f84b5b",
    "line" : 127,
    "diffHunk" : "@@ -1,1 +125,129 @@\ndef _is_fqcn(tested_str):\n    # FIXME: port this to AnsibleCollectionRef.is_valid_collection_name\n    if tested_str.count('.') != 1:\n        return False"
  },
  {
    "id" : "05dcd616-b4b0-4e1a-863e-016d97aefe35",
    "prId" : 72591,
    "prUrl" : "https://github.com/ansible/ansible/pull/72591#pullrequestreview-569788946",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "57ad5b22-d1bd-45dd-9803-9c83b87dc1f5",
        "parentId" : null,
        "authorId" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "body" : "TODO ^",
        "createdAt" : "2021-01-16T00:43:31Z",
        "updatedAt" : "2021-01-27T19:30:12Z",
        "lastEditedBy" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "tags" : [
        ]
      }
    ],
    "commit" : "048a9684ef014d41808bd9123b6a5e0267f84b5b",
    "line" : 357,
    "diffHunk" : "@@ -1,1 +355,359 @@        )\n\n    def _get_separate_ns_n_name(self):  # FIXME: use LRU cache\n        return self.fqcn.split('.')\n"
  },
  {
    "id" : "049042dd-7a53-4f17-82d0-a67d55087fe5",
    "prId" : 72591,
    "prUrl" : "https://github.com/ansible/ansible/pull/72591#pullrequestreview-575787737",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "857c8c5d-21f8-421e-baf8-1bdd727c3fe9",
        "parentId" : null,
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "Including a tip for `name` would be helpful for large requirement files with misspelled tar.gz files.\r\n```suggestion\r\n                elif req_name:\r\n                    tip = '\\n\\nCould not find {0}.'.format(req_name)\r\n                else:\r\n```",
        "createdAt" : "2021-01-25T21:49:33Z",
        "updatedAt" : "2021-01-27T19:30:12Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      }
    ],
    "commit" : "048a9684ef014d41808bd9123b6a5e0267f84b5b",
    "line" : 258,
    "diffHunk" : "@@ -1,1 +256,260 @@                elif req_name:\n                    tip = '\\n\\nCould not find {0}.'.format(req_name)\n                else:\n                    tip = ''\n"
  },
  {
    "id" : "3c12efff-ea25-4f99-a1f6-1e4e6886a96b",
    "prId" : 72591,
    "prUrl" : "https://github.com/ansible/ansible/pull/72591#pullrequestreview-576730734",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "47655ef7-d33e-4d63-9fc8-877d5b7bd799",
        "parentId" : null,
        "authorId" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "body" : "That's a really interesting piece of information I did not know.",
        "createdAt" : "2021-01-26T20:23:51Z",
        "updatedAt" : "2021-01-27T19:30:12Z",
        "lastEditedBy" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "tags" : [
        ]
      }
    ],
    "commit" : "048a9684ef014d41808bd9123b6a5e0267f84b5b",
    "line" : 54,
    "diffHunk" : "@@ -1,1 +52,56 @@    def _is_py_id(tested_str):\n        # Ref: https://stackoverflow.com/a/55802320/595220\n        return bool(_match_pattern(_valid_identifier_string_regex, tested_str))\n\n"
  }
]