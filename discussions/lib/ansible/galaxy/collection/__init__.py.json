[
  {
    "id" : "f9752649-a40d-44ee-a207-b6b3cd597034",
    "prId" : 72591,
    "prUrl" : "https://github.com/ansible/ansible/pull/72591#pullrequestreview-533084557",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c2c8a392-edad-4330-ae2f-191d627c4081",
        "parentId" : null,
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "I'm fine with the change in message, just noting that this test needs to be fixed up to check the new assertion https://github.com/ansible/ansible/blob/cf39d9de258cb9c47de9043e1a85e327e177dba7/test/integration/targets/ansible-galaxy-collection/tasks/install.yml#L43.",
        "createdAt" : "2020-11-18T04:09:36Z",
        "updatedAt" : "2021-01-27T19:30:12Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      }
    ],
    "commit" : "048a9684ef014d41808bd9123b6a5e0267f84b5b",
    "line" : 973,
    "diffHunk" : "@@ -1,1 +453,457 @@\n    if not unsatisfied_requirements:\n        display.display(\n            'Nothing to do. All requested collections are already '\n            'installed. If you want to reinstall them, '"
  },
  {
    "id" : "450e7207-23f2-4cac-9494-ddec8c3b6c35",
    "prId" : 72591,
    "prUrl" : "https://github.com/ansible/ansible/pull/72591#pullrequestreview-576745628",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "63c79ffb-8e68-49f9-8b5d-f984442a89ad",
        "parentId" : null,
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "On devel installing from source control requires a galaxy.yml because it isn't intended for anything but development. We might want to keep this a hard failure.\r\n\r\nOn devel the error looks like\r\n```\r\nERROR! git+file:///path/to/test_src/.git#collection_dir appears to be an SCM collection source, but the required galaxy.yml was not found. Append #path/to/collection/ to your URI (before the comma separated version, if one is specified) to point to a directory containing the galaxy.yml or directories of collections\r\n```",
        "createdAt" : "2021-01-25T20:37:24Z",
        "updatedAt" : "2021-01-27T19:30:12Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "db062a8b-062c-44ec-9167-e55364a05b90",
        "parentId" : "63c79ffb-8e68-49f9-8b5d-f984442a89ad",
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "The subdirs checking already only handles `galaxy.yml` metadata, and dirs with a MANIFEST.json are ignored.",
        "createdAt" : "2021-01-25T23:27:24Z",
        "updatedAt" : "2021-01-27T19:30:12Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "bd760166-aba0-4af6-a3ac-a2c86b77e512",
        "parentId" : "63c79ffb-8e68-49f9-8b5d-f984442a89ad",
        "authorId" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "body" : "@s-hertel can this happen when the requirement is constructed via `from_dir_path_implicit()`?",
        "createdAt" : "2021-01-26T14:13:40Z",
        "updatedAt" : "2021-01-27T19:30:12Z",
        "lastEditedBy" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "tags" : [
        ]
      },
      {
        "id" : "fb6e0b33-e128-4fbd-aa9c-278af8ef075f",
        "parentId" : "63c79ffb-8e68-49f9-8b5d-f984442a89ad",
        "authorId" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "body" : "I seem to recall some corner case that caused me to add this. I think it was something like `galaxy.yml` is present by doesn't have `build_ignore`.",
        "createdAt" : "2021-01-26T14:40:26Z",
        "updatedAt" : "2021-01-27T19:30:12Z",
        "lastEditedBy" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "tags" : [
        ]
      },
      {
        "id" : "5ac205c6-343e-497a-a83b-61af19f4489d",
        "parentId" : "63c79ffb-8e68-49f9-8b5d-f984442a89ad",
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "I think that cornercase should be fixed. galaxy.yml files without build_ignore are handled by `_normalize_galaxy_yml_manifest()` so the key should be present. Took a stab at fixing this: https://github.com/webknjaz/ansible/pull/361",
        "createdAt" : "2021-01-26T20:44:53Z",
        "updatedAt" : "2021-01-27T19:30:12Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      }
    ],
    "commit" : "048a9684ef014d41808bd9123b6a5e0267f84b5b",
    "line" : 1763,
    "diffHunk" : "@@ -1,1 +1125,1129 @@    if 'build_ignore' not in collection_meta:  # installed collection, not src\n        # FIXME: optimize this? use a different process? copy instead of build?\n        collection_meta['build_ignore'] = []\n    collection_manifest = _build_manifest(**collection_meta)\n    file_manifest = _build_files_manifest("
  },
  {
    "id" : "6a9c6394-fc6d-44c6-a80d-ad6aa1e384b4",
    "prId" : 72591,
    "prUrl" : "https://github.com/ansible/ansible/pull/72591#pullrequestreview-577221767",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "843b80f2-5474-4a25-bc02-fadfa26654d9",
        "parentId" : null,
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "is there a reason why you have a native str, I would have assumed it was a byte str beforehand for a reason. I know the tarfile is very particular about the type of string being used.",
        "createdAt" : "2021-01-26T21:44:00Z",
        "updatedAt" : "2021-01-27T19:30:12Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      },
      {
        "id" : "05fdb043-2f48-413e-991c-0e77ea01d416",
        "parentId" : "843b80f2-5474-4a25-bc02-fadfa26654d9",
        "authorId" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "body" : "I don't remember why this was necessary. I seem to recall it's unicode under py3...",
        "createdAt" : "2021-01-27T10:58:24Z",
        "updatedAt" : "2021-01-27T19:30:12Z",
        "lastEditedBy" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "tags" : [
        ]
      },
      {
        "id" : "305b1ab9-4d0b-4cee-bd09-dab16b5f565d",
        "parentId" : "843b80f2-5474-4a25-bc02-fadfa26654d9",
        "authorId" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "body" : "Oh, wait! I think I remember. It was mypy that hinted that the type is not right and so I checked this in docs / stubs / source / https://github.com/python/typeshed/blob/869238e/stdlib/2and3/tarfile.pyi#L162-L189 / https://github.com/python/cpython/blob/master/Lib/tarfile.py and this is what was necessary. (str under py2 and StrPath that resolves to Text or PathLike: https://github.com/python/typeshed/blob/16ae4c61201cd8b96b8b22cdfb2ab9e89ba5bcf2/stdlib/_typeshed/__init__.pyi#L59-L63)",
        "createdAt" : "2021-01-27T11:05:27Z",
        "updatedAt" : "2021-01-27T19:30:12Z",
        "lastEditedBy" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "tags" : [
        ]
      }
    ],
    "commit" : "048a9684ef014d41808bd9123b6a5e0267f84b5b",
    "line" : 1394,
    "diffHunk" : "@@ -1,1 +934,938 @@                # Dealing with a normal file, just add it by name.\n                tar_file.add(\n                    to_native(os.path.realpath(b_src_path)),\n                    arcname=filename,\n                    recursive=False,"
  },
  {
    "id" : "b1f542b3-63f4-44e5-a245-ca3ace678cde",
    "prId" : 72591,
    "prUrl" : "https://github.com/ansible/ansible/pull/72591#pullrequestreview-577303691",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "544ac4bd-d440-4e5a-b27b-f8752d0a7830",
        "parentId" : null,
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "Same here, don't we usually use byte strings for file operations.",
        "createdAt" : "2021-01-26T21:44:19Z",
        "updatedAt" : "2021-01-27T19:30:12Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      },
      {
        "id" : "34a36cdb-63b2-473f-91e0-c64bfba12294",
        "parentId" : "544ac4bd-d440-4e5a-b27b-f8752d0a7830",
        "authorId" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "body" : "Same, it accepts `StrPath`: https://github.com/python/typeshed/blob/869238e587ce2bb2e1b990026d5a038f6eb0f1a3/stdlib/2and3/shutil.pyi#L55-L62",
        "createdAt" : "2021-01-27T12:53:54Z",
        "updatedAt" : "2021-01-27T19:30:12Z",
        "lastEditedBy" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "tags" : [
        ]
      }
    ],
    "commit" : "048a9684ef014d41808bd9123b6a5e0267f84b5b",
    "line" : 1401,
    "diffHunk" : "@@ -1,1 +940,944 @@                )\n\n        shutil.copy(to_native(b_tar_filepath), to_native(b_tar_path))\n        collection_name = \"%s.%s\" % (collection_manifest['collection_info']['namespace'],\n                                     collection_manifest['collection_info']['name'])"
  }
]