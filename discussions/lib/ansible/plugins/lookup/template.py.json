[
  {
    "id" : "27804722-4c68-40e8-9db3-97e753eddf70",
    "prId" : 55126,
    "prUrl" : "https://github.com/ansible/ansible/pull/55126#pullrequestreview-227203341",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d1814753-24ec-4f89-9110-3d8d552753b0",
        "parentId" : null,
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "i would push this to the top of the loop, probably first thing after 'if'",
        "createdAt" : "2019-04-11T19:10:53Z",
        "updatedAt" : "2019-04-16T08:18:30Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "ee0c91c9-9ac4-4359-a37b-c4dace70c5f1",
        "parentId" : "d1814753-24ec-4f89-9110-3d8d552753b0",
        "authorId" : "94ae5814-8889-4328-9b58-745772997928",
        "body" : "How would that work? We are setting lookup file/template specific vars on line 105, before templating happens. So the restore needs to happen right after templating.",
        "createdAt" : "2019-04-12T06:46:36Z",
        "updatedAt" : "2019-04-16T08:18:30Z",
        "lastEditedBy" : "94ae5814-8889-4328-9b58-745772997928",
        "tags" : [
        ]
      },
      {
        "id" : "6d9489fa-58ab-449f-9089-0e71b0f3253e",
        "parentId" : "d1814753-24ec-4f89-9110-3d8d552753b0",
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "Sorry, i was unclear, I didn't mean just this line, meant the vars copy/update block . \r\n\r\nRevisiting this line, I would actually put outside loop, after it ends.\r\n\r\nAlso the existing `variables.copy()` will bypass your efforts as 'container types' will copy by ref, making modifications persist across not only invocations but in returned vars. see deepcopy or deepish_copy.",
        "createdAt" : "2019-04-15T21:53:37Z",
        "updatedAt" : "2019-04-16T08:18:30Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "54502bac-4450-4c35-915d-07925859f752",
        "parentId" : "d1814753-24ec-4f89-9110-3d8d552753b0",
        "authorId" : "94ae5814-8889-4328-9b58-745772997928",
        "body" : "> Sorry, i was unclear, I didn't mean just this line, meant the vars copy/update block .\r\n\r\nI don't follow, what would be the gain if we moved the vars copy/update block to the top of the loop?\r\n\r\n> Revisiting this line, I would actually put outside loop, after it ends.\r\n\r\n> Also the existing variables.copy() will bypass your efforts as 'container types' will copy by ref, making modifications persist across not only invocations but in returned vars. see deepcopy or deepish_copy.\r\n\r\nGood points, fixed both.",
        "createdAt" : "2019-04-16T08:21:57Z",
        "updatedAt" : "2019-04-16T08:21:57Z",
        "lastEditedBy" : "94ae5814-8889-4328-9b58-745772997928",
        "tags" : [
        ]
      },
      {
        "id" : "dc34d784-e39a-4759-aec1-188e1769d28a",
        "parentId" : "d1814753-24ec-4f89-9110-3d8d552753b0",
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "the moving is more stylistic (prep on top), so you can ignore",
        "createdAt" : "2019-04-16T13:45:09Z",
        "updatedAt" : "2019-04-16T13:45:09Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      }
    ],
    "commit" : "bcf2e12e39d9dde9ff47633f2fee2cc7bce60225",
    "line" : 30,
    "diffHunk" : "@@ -1,1 +111,115 @@                res = self._templar.template(template_data, preserve_trailing_newlines=True,\n                                             convert_data=convert_data_p, escape_backslashes=False)\n\n                ret.append(res)\n            else:"
  },
  {
    "id" : "bdd583a0-dfcc-42cc-ae2b-e97a21b68a8e",
    "prId" : 55126,
    "prUrl" : "https://github.com/ansible/ansible/pull/55126#pullrequestreview-228431166",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "185bfa12-3d77-4305-b575-0996281c5555",
        "parentId" : null,
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "I could swear i created a `get_variables` method to avoid using the internal dict directly, but cannot find it now ...",
        "createdAt" : "2019-04-16T13:49:10Z",
        "updatedAt" : "2019-04-16T13:49:10Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "122c4448-042c-4882-9c84-9a60c5bb2164",
        "parentId" : "185bfa12-3d77-4305-b575-0996281c5555",
        "authorId" : "94ae5814-8889-4328-9b58-745772997928",
        "body" : "I can add it in a separate PR.",
        "createdAt" : "2019-04-16T16:25:10Z",
        "updatedAt" : "2019-04-16T16:25:11Z",
        "lastEditedBy" : "94ae5814-8889-4328-9b58-745772997928",
        "tags" : [
        ]
      },
      {
        "id" : "57472e4f-af2e-4e48-be26-94a9616b3396",
        "parentId" : "185bfa12-3d77-4305-b575-0996281c5555",
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "ah, was part of become plugins but others decided to drop that method ...",
        "createdAt" : "2019-04-18T17:53:59Z",
        "updatedAt" : "2019-04-18T17:53:59Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "ab9dc995-285d-4a43-8f23-c42cc52547dc",
        "parentId" : "185bfa12-3d77-4305-b575-0996281c5555",
        "authorId" : "94ae5814-8889-4328-9b58-745772997928",
        "body" : "FWIW I created https://github.com/ansible/ansible/pull/55435.",
        "createdAt" : "2019-04-18T18:09:11Z",
        "updatedAt" : "2019-04-18T18:09:12Z",
        "lastEditedBy" : "94ae5814-8889-4328-9b58-745772997928",
        "tags" : [
        ]
      }
    ],
    "commit" : "bcf2e12e39d9dde9ff47633f2fee2cc7bce60225",
    "line" : 12,
    "diffHunk" : "@@ -1,1 +69,73 @@        variable_end_string = kwargs.get('variable_end_string', None)\n\n        old_vars = self._templar._available_variables\n\n        for term in terms:"
  }
]