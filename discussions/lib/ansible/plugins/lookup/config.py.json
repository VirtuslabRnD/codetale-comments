[
  {
    "id" : "52d10edb-5692-4512-8c75-81af2e574345",
    "prId" : 74186,
    "prUrl" : "https://github.com/ansible/ansible/pull/74186#pullrequestreview-633832093",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6d3f338c-fe3d-41a9-a956-6588ab6d17af",
        "parentId" : null,
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "Should this handle formatting the traceback? The exception shows up as unhandled.\r\n\r\n```\r\nfatal: [localhost]: FAILED! => {\r\n    \"msg\": \"An unhandled exception occurred while running the lookup plugin 'config'. Error was a <class 'ansible.errors.AnsibleLookupError'>, original message: Unable to find setting aws_profile. Requested entry (plugin_type: inventory plugin: amazon.aws.aws_ec2 setting: aws_profile ) was not defined in configuration.. Requested entry (plugin_type: inventory plugin: amazon.aws.aws_ec2 setting: aws_profile ) was not defined in configuration.\"\r\n}\r\n```",
        "createdAt" : "2021-04-12T17:37:06Z",
        "updatedAt" : "2021-04-12T18:13:35Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "f7091391-8ac6-4199-ba71-163ec520b21d",
        "parentId" : "6d3f338c-fe3d-41a9-a956-6588ab6d17af",
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "ah, yes, should inherit from AnsibleOptionsError instead",
        "createdAt" : "2021-04-12T18:11:45Z",
        "updatedAt" : "2021-04-12T18:13:35Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      }
    ],
    "commit" : "27759b5a2abb0c61b34dbf9fad5776d0ab1fc652",
    "line" : 45,
    "diffHunk" : "@@ -1,1 +83,87 @@\nclass MissingSetting(AnsibleOptionsError):\n    pass\n\n"
  },
  {
    "id" : "f3794f62-5654-4d28-8030-e04563f09f97",
    "prId" : 74186,
    "prUrl" : "https://github.com/ansible/ansible/pull/74186#pullrequestreview-633836464",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "181d312e-478c-43fc-a5e2-6b2f96101f75",
        "parentId" : null,
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "Can you add tests for plugins in collections? I'm struggling to get it working, but might just be overlooking something. Does this work with doc fragments?",
        "createdAt" : "2021-04-12T17:39:33Z",
        "updatedAt" : "2021-04-12T18:13:35Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "b7f940fd-1ea4-467e-96dd-3094f50173aa",
        "parentId" : "181d312e-478c-43fc-a5e2-6b2f96101f75",
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "Oh, I guess this is an inventory-specific oddity. Unsure if this should handle `inventory` as a plugin type since when inventory decides to load options isn't until parse time, regardless of whether the option is set via environment var...",
        "createdAt" : "2021-04-12T17:52:02Z",
        "updatedAt" : "2021-04-12T18:13:35Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "befc1da6-b2c0-4bab-b99b-1c58cb9fb374",
        "parentId" : "181d312e-478c-43fc-a5e2-6b2f96101f75",
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "should not work for doc_fragments directly since they are not really plugins, but it should load them normally for other plugins as that happens in plugin_loader itself during normal execution.",
        "createdAt" : "2021-04-12T18:12:32Z",
        "updatedAt" : "2021-04-12T18:13:35Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "0ef8a2a1-1606-4605-be6b-c04b512b9719",
        "parentId" : "181d312e-478c-43fc-a5e2-6b2f96101f75",
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "^ this will work when overlayed with the all_plugins_config PR that makes Options error 'handled'",
        "createdAt" : "2021-04-12T18:17:22Z",
        "updatedAt" : "2021-04-12T18:17:22Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      }
    ],
    "commit" : "27759b5a2abb0c61b34dbf9fad5776d0ab1fc652",
    "line" : 52,
    "diffHunk" : "@@ -1,1 +90,94 @@        # plugin creates settings on load, this is cached so not too expensive to redo\n        loader = getattr(plugin_loader, '%s_loader' % ptype)\n        dump = loader.get(pname, class_only=True)\n        result = C.config.get_config_value(config, plugin_type=ptype, plugin_name=pname, variables=variables)\n    except AnsibleError as e:"
  }
]