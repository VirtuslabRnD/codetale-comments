[
  {
    "id" : "391698eb-78a9-4561-8819-f2f752e5a176",
    "prId" : 34280,
    "prUrl" : "https://github.com/ansible/ansible/pull/34280#pullrequestreview-89573500",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8315e67e-2157-41dd-af1b-9fa19dd2fb63",
        "parentId" : null,
        "authorId" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "body" : "`type: path` could be added for both `identity_file` and `config_file` ([example](https://github.com/ansible/ansible/blob/0e4e7de0001c3b53c586e6b9bafcd3f15bb862c0/lib/ansible/plugins/lookup/redis.py#L38)). Then : \r\n- `os.path.expandusers` would be called automatically (meaning calls to `expandusers` need to be removed below) \r\n- and `os.path.expandvars` would be called too (see [there](https://github.com/ansible/ansible/blob/0e4e7de0001c3b53c586e6b9bafcd3f15bb862c0/lib/ansible/config/manager.py#L106) and [there](https://github.com/ansible/ansible/blob/0e4e7de0001c3b53c586e6b9bafcd3f15bb862c0/lib/ansible/utils/path.py#L30))\r\n- path could be relative (not sure what is the current working directory)",
        "createdAt" : "2018-01-12T23:58:20Z",
        "updatedAt" : "2018-01-19T20:21:02Z",
        "lastEditedBy" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "tags" : [
        ]
      },
      {
        "id" : "bba1aa2d-1b75-4402-8dfa-64f7b5ed20fe",
        "parentId" : "8315e67e-2157-41dd-af1b-9fa19dd2fb63",
        "authorId" : "5291146c-0fe0-4f75-ae05-506c2016ac1d",
        "body" : "I made an attempt at implementing this suggestion in https://github.com/ansible/ansible/pull/34280/commits/0fda2b504ad831e49b66fe45421006a23420838c, let me know if that's moving in the right direction.",
        "createdAt" : "2018-01-16T18:49:17Z",
        "updatedAt" : "2018-01-19T20:21:02Z",
        "lastEditedBy" : "5291146c-0fe0-4f75-ae05-506c2016ac1d",
        "tags" : [
        ]
      },
      {
        "id" : "980bfcfa-b559-4a5c-b744-832ee1131cd7",
        "parentId" : "8315e67e-2157-41dd-af1b-9fa19dd2fb63",
        "authorId" : "d7d8721c-7ad0-4834-9a3d-b53ca8656789",
        "body" : "@pilou- is https://github.com/ansible/ansible/commit/0fda2b504ad831e49b66fe45421006a23420838c correct. I've don't done any `lookup` plugin work before. I was expecting to have to see something in Python to get this working, or is the `DOCUMENTATION.foo.TYPE` process by Ansible before the lookup plugin is invoked?",
        "createdAt" : "2018-01-17T11:23:47Z",
        "updatedAt" : "2018-01-19T20:21:02Z",
        "lastEditedBy" : "d7d8721c-7ad0-4834-9a3d-b53ca8656789",
        "tags" : [
        ]
      },
      {
        "id" : "2cb07099-f4a3-40a6-bfa1-5bb284942590",
        "parentId" : "8315e67e-2157-41dd-af1b-9fa19dd2fb63",
        "authorId" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "body" : "It looks good.\r\n\r\n- [read_docstring](https://github.com/ansible/ansible/blob/0e4e7de0001c3b53c586e6b9bafcd3f15bb862c0/lib/ansible/plugins/loader.py#L214) is called for `lookup` plugins\r\n- [AnsiblePlugin.get_option](https://github.com/ansible/ansible/blob/0e4e7de0001c3b53c586e6b9bafcd3f15bb862c0/lib/ansible/plugins/__init__.py#L56) calls `config.get_config_value`:\r\n    - [get_config_value](https://github.com/ansible/ansible/blob/0e4e7de0001c3b53c586e6b9bafcd3f15bb862c0/lib/ansible/config/manager.py#L282) calls:\r\n      - [get_config_value_and_origin](https://github.com/ansible/ansible/blob/0e4e7de0001c3b53c586e6b9bafcd3f15bb862c0/lib/ansible/config/manager.py#L287) calls:\r\n        - [ensure_type](https://github.com/ansible/ansible/blob/0e4e7de0001c3b53c586e6b9bafcd3f15bb862c0/lib/ansible/config/manager.py#L352) calls\r\n          - [resolve_path](https://github.com/ansible/ansible/blob/0e4e7de0001c3b53c586e6b9bafcd3f15bb862c0/lib/ansible/config/manager.py#L79)\r\n\r\n`redis` lookup does the [same](https://github.com/ansible/ansible/blob/0fda2b504ad831e49b66fe45421006a23420838c/lib/ansible/plugins/lookup/redis.py#L40).",
        "createdAt" : "2018-01-17T13:51:31Z",
        "updatedAt" : "2018-01-19T20:21:02Z",
        "lastEditedBy" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "tags" : [
        ]
      },
      {
        "id" : "e56bb437-c24e-405b-b041-ca539b37c53a",
        "parentId" : "8315e67e-2157-41dd-af1b-9fa19dd2fb63",
        "authorId" : "d7d8721c-7ad0-4834-9a3d-b53ca8656789",
        "body" : "Thanks for educating me :)",
        "createdAt" : "2018-01-17T20:02:37Z",
        "updatedAt" : "2018-01-19T20:21:02Z",
        "lastEditedBy" : "d7d8721c-7ad0-4834-9a3d-b53ca8656789",
        "tags" : [
        ]
      }
    ],
    "commit" : "a7982fee91f4a11b6ecee466a7d81855090e17da",
    "line" : 23,
    "diffHunk" : "@@ -1,1 +21,25 @@        description: Variable path\n        required: True\n      identity_file:\n        description: Path to the Conjur identity file. The identity file follows the netrc file format convention.\n        type: path"
  },
  {
    "id" : "8daa23a6-6040-44e5-ac6c-5b176109f411",
    "prId" : 34280,
    "prUrl" : "https://github.com/ansible/ansible/pull/34280#pullrequestreview-89938161",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "451d6246-b446-4efa-a17f-5c4e96fd0b5e",
        "parentId" : null,
        "authorId" : "9feec2b4-2229-4cca-994a-03c4523b989c",
        "body" : "Can we update the `description` text to be a little more explicit that it is the controlling host (the machine running Ansible) and not the target node that must have an established Conjur identity for the lookup plugin to work?\r\n\r\nRight now it's a bit confusing because the `requirements` is clear about that but the description just says `...the server's Conjur identity` without saying what 'the server' is in this context.",
        "createdAt" : "2018-01-18T19:08:18Z",
        "updatedAt" : "2018-01-19T20:21:02Z",
        "lastEditedBy" : "9feec2b4-2229-4cca-994a-03c4523b989c",
        "tags" : [
        ]
      },
      {
        "id" : "4f3ee805-fa93-437f-aef4-d4a073741274",
        "parentId" : "451d6246-b446-4efa-a17f-5c4e96fd0b5e",
        "authorId" : "5291146c-0fe0-4f75-ae05-506c2016ac1d",
        "body" : "done",
        "createdAt" : "2018-01-18T21:23:26Z",
        "updatedAt" : "2018-01-19T20:21:02Z",
        "lastEditedBy" : "5291146c-0fe0-4f75-ae05-506c2016ac1d",
        "tags" : [
        ]
      }
    ],
    "commit" : "a7982fee91f4a11b6ecee466a7d81855090e17da",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +13,17 @@    version_added: \"2.5\"\n    short_description: Fetch credentials from CyberArk Conjur.\n    description:\n      - Retrieves credentials from Conjur using the controlling host's Conjur identity. Conjur info: U(https://www.conjur.org/).\n    requirements:"
  },
  {
    "id" : "e0593e37-2c13-4fba-9f35-873913d9eae2",
    "prId" : 34280,
    "prUrl" : "https://github.com/ansible/ansible/pull/34280#pullrequestreview-90276061",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "21d3c02f-d347-4e0c-8bd4-9da9a7b9759e",
        "parentId" : null,
        "authorId" : "da98bd1d-4bb3-40c1-a834-b022bfcd5b1c",
        "body" : "@jvanderhoof or @ryanprior,\r\n\r\ncould you add below here?\r\n\r\n```\r\nANSIBLE_METADATA = {'metadata_version': '1.1',\r\n                    'status': ['preview'],\r\n                    'supported_by': 'community'}\r\n```",
        "createdAt" : "2018-01-19T19:04:51Z",
        "updatedAt" : "2018-01-19T20:21:02Z",
        "lastEditedBy" : "da98bd1d-4bb3-40c1-a834-b022bfcd5b1c",
        "tags" : [
        ]
      },
      {
        "id" : "4acc8798-3793-4703-8c75-adba6da5c639",
        "parentId" : "21d3c02f-d347-4e0c-8bd4-9da9a7b9759e",
        "authorId" : "5291146c-0fe0-4f75-ae05-506c2016ac1d",
        "body" : "Added",
        "createdAt" : "2018-01-19T20:21:05Z",
        "updatedAt" : "2018-01-19T20:21:05Z",
        "lastEditedBy" : "5291146c-0fe0-4f75-ae05-506c2016ac1d",
        "tags" : [
        ]
      },
      {
        "id" : "39e351e4-91ec-49fe-b644-fa9522ad27a8",
        "parentId" : "21d3c02f-d347-4e0c-8bd4-9da9a7b9759e",
        "authorId" : "259511a5-c98c-4ddf-a010-17c893a758e3",
        "body" : "@thaumos - Thanks for the feedback. Mind giving it one more look? I'd love for this to be able to make in today if possible with code freeze on the 22nd.",
        "createdAt" : "2018-01-19T21:28:48Z",
        "updatedAt" : "2018-01-19T21:28:48Z",
        "lastEditedBy" : "259511a5-c98c-4ddf-a010-17c893a758e3",
        "tags" : [
        ]
      },
      {
        "id" : "3a4eff06-1edb-4b0c-8928-bcf3862b72cb",
        "parentId" : "21d3c02f-d347-4e0c-8bd4-9da9a7b9759e",
        "authorId" : "da98bd1d-4bb3-40c1-a834-b022bfcd5b1c",
        "body" : "lgtm.  there shouldn't be a concern having this merged before code freeze. ",
        "createdAt" : "2018-01-19T23:32:09Z",
        "updatedAt" : "2018-01-19T23:32:09Z",
        "lastEditedBy" : "da98bd1d-4bb3-40c1-a834-b022bfcd5b1c",
        "tags" : [
        ]
      }
    ],
    "commit" : "a7982fee91f4a11b6ecee466a7d81855090e17da",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +4,8 @@from __future__ import (absolute_import, division, print_function)\n__metaclass__ = type\n\nANSIBLE_METADATA = {'metadata_version': '1.1',\n                    'status': ['preview'],"
  }
]