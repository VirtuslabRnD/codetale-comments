[
  {
    "id" : "22e07253-fb6e-4e4f-9d60-4159975622db",
    "prId" : 32606,
    "prUrl" : "https://github.com/ansible/ansible/pull/32606#pullrequestreview-74915942",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "14e39cb6-d6d8-40e3-888a-c705a7af669f",
        "parentId" : null,
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "we could just have _set_composite_vars return the new vars",
        "createdAt" : "2017-11-07T04:22:01Z",
        "updatedAt" : "2017-11-07T04:22:01Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "b92760ea-2ff5-45dc-a333-1cf43aee7622",
        "parentId" : "14e39cb6-d6d8-40e3-888a-c705a7af669f",
        "authorId" : "84f9059a-76ec-4f9b-b3a1-ac67f98d0430",
        "body" : "Would this be the preference? Alternatively I considered _set_composite_vars returning true/false to indicate whether host vars need updating.",
        "createdAt" : "2017-11-07T21:34:19Z",
        "updatedAt" : "2017-11-07T21:34:19Z",
        "lastEditedBy" : "84f9059a-76ec-4f9b-b3a1-ac67f98d0430",
        "tags" : [
        ]
      }
    ],
    "commit" : "6dac4f01c136b35888e2fd32755260914dfdac76",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +117,121 @@                self._set_composite_vars(data.get('compose'), hostvars, host, strict=strict)\n\n                # refetch host vars in case new ones have been created above\n                hostvars = inventory.hosts[host].get_vars()\n                if host in self._cache:  # adds facts if cache is active"
  },
  {
    "id" : "2e0b4624-4e69-4369-93a3-b56f428ab011",
    "prId" : 32606,
    "prUrl" : "https://github.com/ansible/ansible/pull/32606#pullrequestreview-74924479",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5199c77f-9e1d-4ffe-aacc-54abdd12afab",
        "parentId" : null,
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "this seems to do the reverse of what you want",
        "createdAt" : "2017-11-07T04:22:38Z",
        "updatedAt" : "2017-11-07T04:22:38Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "6d71a987-434d-42db-94f6-979431c4adbd",
        "parentId" : "5199c77f-9e1d-4ffe-aacc-54abdd12afab",
        "authorId" : "84f9059a-76ec-4f9b-b3a1-ac67f98d0430",
        "body" : "I tested this locally and it worked as I wanted/expected. _set_composite_vars sets the host vars in the inventory then this retrieves them from the inventory.",
        "createdAt" : "2017-11-07T21:32:27Z",
        "updatedAt" : "2017-11-07T21:32:27Z",
        "lastEditedBy" : "84f9059a-76ec-4f9b-b3a1-ac67f98d0430",
        "tags" : [
        ]
      },
      {
        "id" : "a6c47797-95d6-4e41-b135-1a3f8672d713",
        "parentId" : "5199c77f-9e1d-4ffe-aacc-54abdd12afab",
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "the order is incorrect, it probably 'works' if you don't have duplicate vars in  inventories as the set_variable is overriding any cached vars you would have yet you do the reverse override here.",
        "createdAt" : "2017-11-07T21:41:24Z",
        "updatedAt" : "2017-11-07T21:41:24Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "061b3a0b-2888-4971-85aa-c355a8a323e3",
        "parentId" : "5199c77f-9e1d-4ffe-aacc-54abdd12afab",
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "tempted to just say, use hostvars ... as they would be the same as the cache + new combined vars already",
        "createdAt" : "2017-11-07T21:42:23Z",
        "updatedAt" : "2017-11-07T21:42:23Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "05eac125-e23f-4fe8-a6c1-1f7e836c1dd0",
        "parentId" : "5199c77f-9e1d-4ffe-aacc-54abdd12afab",
        "authorId" : "84f9059a-76ec-4f9b-b3a1-ac67f98d0430",
        "body" : "I see. Using the same variable name just seems like asking for trouble to me :) So just to be clear you're suggesting just update the local hostvars at the same time we update the inventory? I'd be happy with that.",
        "createdAt" : "2017-11-07T22:01:26Z",
        "updatedAt" : "2017-11-07T22:01:26Z",
        "lastEditedBy" : "84f9059a-76ec-4f9b-b3a1-ac67f98d0430",
        "tags" : [
        ]
      },
      {
        "id" : "75b8bb9e-142f-4229-94ab-5af9e9ed716a",
        "parentId" : "5199c77f-9e1d-4ffe-aacc-54abdd12afab",
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "he, sadly most people do use duplicate names across hosts/groups\r\n\r\n~no, just do line #120 and remove 121-122 as they become redundant~ nvmd, its host facts .. its ok as is .. for some reason i was confusing it with 'vars cache'",
        "createdAt" : "2017-11-07T22:02:45Z",
        "updatedAt" : "2017-11-07T22:03:35Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      }
    ],
    "commit" : "6dac4f01c136b35888e2fd32755260914dfdac76",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +120,124 @@                hostvars = inventory.hosts[host].get_vars()\n                if host in self._cache:  # adds facts if cache is active\n                    hostvars = combine_vars(hostvars, self._cache[host])\n\n                # constructed groups based on conditionals"
  }
]