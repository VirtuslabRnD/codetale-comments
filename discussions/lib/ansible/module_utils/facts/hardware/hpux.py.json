[
  {
    "id" : "4e5b9006-80ac-463b-b2e6-6fc6769e58fc",
    "prId" : 33333,
    "prUrl" : "https://github.com/ansible/ansible/pull/33333#pullrequestreview-86056235",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "77ae94b8-7373-4a74-b4df-671739260221",
        "parentId" : null,
        "authorId" : "fa0144fc-7424-474a-9ab5-059de28814b7",
        "body" : "Do we know what the other possible values here are?\r\n\r\nCan we generalize and assume any '^9000.*' ansible_architecture should use ioscan?\r\n\r\nCould we invert the if/elif check for ia64 and else use ioscan?\r\n\r\nroughly...\r\n\r\n``` python\r\nif collected.facts.get('ansible_architecture')  == 'ia64':\r\n      # < ia64 stuff here >\r\nelse:\r\n     # < 9000 ioscan stuff here>\r\n\r\n```\r\n\r\nor check for '9000' in arch?\r\n```  python\r\nif collected_facts.get('ansible_architecture') == 'ia64':\r\n    #  < do ia64 stuff >\r\nelif collected_facts.get('ansible_architecture', '').startswith('9000/'):\r\n  # < do 9000 ioscan stuff >\r\n```\r\n",
        "createdAt" : "2017-12-13T17:17:50Z",
        "updatedAt" : "2017-12-13T17:18:21Z",
        "lastEditedBy" : "fa0144fc-7424-474a-9ab5-059de28814b7",
        "tags" : [
        ]
      },
      {
        "id" : "0896ef81-db20-4335-9f55-5a92e5bac371",
        "parentId" : "77ae94b8-7373-4a74-b4df-671739260221",
        "authorId" : "96aeecbb-c275-402c-b904-a795c82efb48",
        "body" : "I am not sure about this. Adding more people - @nrwahl2 @davx8342 - Could you please provide some advice over here ?",
        "createdAt" : "2018-01-01T05:10:44Z",
        "updatedAt" : "2018-01-01T05:10:44Z",
        "lastEditedBy" : "96aeecbb-c275-402c-b904-a795c82efb48",
        "tags" : [
        ]
      }
    ],
    "commit" : "21376ac2944eee146ef2dc8f7c44d5b70b133a04",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +56,60 @@        collected_facts = collected_facts or {}\n\n        if collected_facts.get('ansible_architecture') in ['9000/800', '9000/785']:\n            rc, out, err = self.module.run_command(\"ioscan -FkCprocessor | wc -l\", use_unsafe_shell=True)\n            cpu_facts['processor_count'] = int(out.strip())"
  }
]