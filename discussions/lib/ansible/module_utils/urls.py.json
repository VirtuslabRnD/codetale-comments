[
  {
    "id" : "adbc20ea-f8d4-4e81-a5f7-89562da7da75",
    "prId" : 16987,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ec39cf50-6c1d-432b-a102-72335f8ab8cd",
        "parentId" : null,
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "This module is really a replacement for `urllib.openurl()` which should never be used because it suffers from security limitation.  requests has similar security features as this module_util but is an external dependency and therefore would be an additional requirement on the remote machine.\n",
        "createdAt" : "2016-08-08T22:07:52Z",
        "updatedAt" : "2016-08-09T16:00:13Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      },
      {
        "id" : "954e6329-d84b-4d32-b0ed-bc93a5d2ad77",
        "parentId" : "ec39cf50-6c1d-432b-a102-72335f8ab8cd",
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "Hmm.... I see in the original bug that ansible-modules-validate is throwing an error for using requests and that was part of what prompted this doc update.  That does make it a good idea to mention requests here.... What about something like:\n\n```\nThe **urls** utils module offers a replacement for the urllib2 python library.\n\nurllib2 is the python stdlib way to retrieve files from the Internet but it lacks some security features (around verifying SSL certificates) that users should care about in most situations.  using the functions in this module corrects deficiencies in the urllib2 module wherever possible.\n\nThere are also third-party libraries (for instance, requests) which can be used to replace urllib2 with a more secure library.  However, all third party libraries require that the library be installed on the managed machine.  That is an extra step for users making use of a module.  If possible, avoid third party libraries by using this code instead.\n```\n",
        "createdAt" : "2016-08-08T22:28:38Z",
        "updatedAt" : "2016-08-09T16:00:13Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      }
    ],
    "commit" : "cbfa57177d92d59040b1e9512b378cc375f0c93e",
    "line" : null,
    "diffHunk" : "@@ -1,1 +95,99 @@for users making use of a module. If possible, avoid third party libraries by using\nthis code instead.\n'''\n\nimport netrc"
  },
  {
    "id" : "22b6a332-8450-40f9-94cd-e04d607ad2e4",
    "prId" : 16987,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a1c59c6d-3eab-46e7-81de-122468faa02c",
        "parentId" : null,
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "As long as you're clarifying the documentation, we could drop urllib2/urllib mention here.  It's not important to users of the function.\n",
        "createdAt" : "2016-08-08T22:08:56Z",
        "updatedAt" : "2016-08-09T16:00:13Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      }
    ],
    "commit" : "cbfa57177d92d59040b1e9512b378cc375f0c93e",
    "line" : 34,
    "diffHunk" : "@@ -1,1 +748,752 @@             force_basic_auth=False, follow_redirects='urllib2'):\n    '''\n    Sends a request via HTTP(S) or FTP using urllib2 (Python2) or urllib (Python3)\n\n    Does not require the module environment"
  },
  {
    "id" : "2f38deea-09ea-4527-8a52-2a8b478f4e29",
    "prId" : 18296,
    "prUrl" : "https://github.com/ansible/ansible/pull/18296#pullrequestreview-6823856",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f37692fb-6ba8-4b47-b4e9-4dc219fb474b",
        "parentId" : null,
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "Is there a reason that we have to keep this separate from tmp_fd, tmp_path?\n",
        "createdAt" : "2016-11-02T04:02:53Z",
        "updatedAt" : "2016-11-02T16:21:40Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      },
      {
        "id" : "362c8416-7dc5-4d51-9a5a-e23a1c50b2de",
        "parentId" : "f37692fb-6ba8-4b47-b4e9-4dc219fb474b",
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "If we do have to keep it separate are we able to remove it when we remove tmp_path around line 728\n",
        "createdAt" : "2016-11-02T04:51:55Z",
        "updatedAt" : "2016-11-02T16:21:40Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      },
      {
        "id" : "50c6d7a1-579e-423f-bb30-14b294895f95",
        "parentId" : "f37692fb-6ba8-4b47-b4e9-4dc219fb474b",
        "authorId" : "ef06f4b2-40f3-4d2d-bdb1-1ef34e811dff",
        "body" : "Yes. The reason for that is that the tmp_ca_cert_path is used in more places, and is expected to contain everything for further underlying libraries. This way, I can limit the specific list that we add to OpenSSL to non-previously-loaded without limiting the others.\n",
        "createdAt" : "2016-11-02T08:15:03Z",
        "updatedAt" : "2016-11-02T16:21:40Z",
        "lastEditedBy" : "ef06f4b2-40f3-4d2d-bdb1-1ef34e811dff",
        "tags" : [
        ]
      },
      {
        "id" : "39529027-2f7b-4b7e-a520-f167584a96e2",
        "parentId" : "f37692fb-6ba8-4b47-b4e9-4dc219fb474b",
        "authorId" : "ef06f4b2-40f3-4d2d-bdb1-1ef34e811dff",
        "body" : "And yes, we are able to remove it, and I'll add the code to do so.\n",
        "createdAt" : "2016-11-02T08:26:59Z",
        "updatedAt" : "2016-11-02T16:21:40Z",
        "lastEditedBy" : "ef06f4b2-40f3-4d2d-bdb1-1ef34e811dff",
        "tags" : [
        ]
      },
      {
        "id" : "642e7929-83ce-486e-aeae-c020fcda7e29",
        "parentId" : "f37692fb-6ba8-4b47-b4e9-4dc219fb474b",
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "Excellent.  :-)  I'll merge once that code is applied.\n",
        "createdAt" : "2016-11-02T14:25:32Z",
        "updatedAt" : "2016-11-02T16:21:40Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      }
    ],
    "commit" : "96541c0e3f55b233ac9eaf8710235fa40057f977",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +593,597 @@\n        tmp_fd, tmp_path = tempfile.mkstemp()\n        to_add_fd, to_add_path = tempfile.mkstemp()\n        to_add = False\n"
  },
  {
    "id" : "b4c1e532-693d-48b0-ae8e-5359e7469c38",
    "prId" : 19962,
    "prUrl" : "https://github.com/ansible/ansible/pull/19962#pullrequestreview-31583969",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d793f9b1-562a-45bf-9387-dc8e9d67d454",
        "parentId" : null,
        "authorId" : "12c80785-ed7e-41b1-877c-4bdb8a7b78af",
        "body" : "I believe this message should be updated to reflect the latest workaround guidance from `urllib` found [here](https://urllib3.readthedocs.io/en/latest/user-guide.html#ssl-py2), to something like 'or you can install the `urllib3` package with the `secure` extra (`urllib3[secure]`), or the `cryptography`, `pyopenssl`, `idna`, and `certifi` packages that the `secure` extra bundles.'",
        "createdAt" : "2017-04-07T15:00:17Z",
        "updatedAt" : "2017-04-07T15:00:17Z",
        "lastEditedBy" : "12c80785-ed7e-41b1-877c-4bdb8a7b78af",
        "tags" : [
        ]
      }
    ],
    "commit" : "8dc0d37061734c5f0be18ae7b81872c197a8eee5",
    "line" : 66,
    "diffHunk" : "@@ -1,1 +558,562 @@                   ' python >= 2.7.9 on your managed machine')\n        if not HAS_URLLIB3_PYOPENSSLCONTEXT or not HAS_URLLIB3_SSL_WRAP_SOCKET:\n            msg.append('or you can install the `urllib3`, `pyOpenSSL`,'\n                       ' `ndg-httpsclient`, and `pyasn1` python modules')\n"
  },
  {
    "id" : "d0e2ca5e-b3b6-450c-a72f-e24b6f658125",
    "prId" : 32053,
    "prUrl" : "https://github.com/ansible/ansible/pull/32053#pullrequestreview-71330535",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bc6f0ffc-e4b7-4c67-9b26-4a6e9284bf89",
        "parentId" : null,
        "authorId" : "4b69a0b5-ac6f-45e9-9507-dd1385182f29",
        "body" : "I like this. It should have been done this way to start with.",
        "createdAt" : "2017-10-23T21:08:28Z",
        "updatedAt" : "2017-10-23T21:08:28Z",
        "lastEditedBy" : "4b69a0b5-ac6f-45e9-9507-dd1385182f29",
        "tags" : [
        ]
      }
    ],
    "commit" : "34ac0590882764ada5dacfc05b965da1ad4d321f",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +703,707 @@        if HAS_SSLCONTEXT:\n            context = create_default_context()\n        elif HAS_URLLIB3_PYOPENSSLCONTEXT:\n            context = PyOpenSSLContext(PROTOCOL)\n        else:"
  },
  {
    "id" : "929ad0d4-f7f7-4342-adc7-2c1e5ae6655f",
    "prId" : 33792,
    "prUrl" : "https://github.com/ansible/ansible/pull/33792#pullrequestreview-110641698",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "375c90bc-2dd4-4206-9ea6-1a54be1e8617",
        "parentId" : null,
        "authorId" : "380aef6a-3fbb-41ad-819b-bada96e05807",
        "body" : "This looks like a bug fix. If that's the case it should go into a separate PR, preferably along with tests.\r\n\r\nAlso, doesn't this cause potential issues with backwards compatibility?",
        "createdAt" : "2018-04-09T21:33:21Z",
        "updatedAt" : "2018-04-09T22:20:32Z",
        "lastEditedBy" : "380aef6a-3fbb-41ad-819b-bada96e05807",
        "tags" : [
        ]
      },
      {
        "id" : "b158c054-87f5-45c4-a69f-0b8ce0ad7869",
        "parentId" : "375c90bc-2dd4-4206-9ea6-1a54be1e8617",
        "authorId" : "4b69a0b5-ac6f-45e9-9507-dd1385182f29",
        "body" : "I suppose it could be considered a bug fix.\r\n\r\nWhile writing tests I noticed that py2 gives lowercased names, while py3 gives capitalization of the name from the response.\r\n\r\nI can't see how it would cause a potential backwards compat issue. I went with the py2 default, because all of our modules should support py2. The only way it could cause a backwards compat issue, is if a module was calling `fetch_url` and only supported python3.  If they supported both py2 and py3, then the code would have to already handle lowercase and mixed case, so it should work as expected.\r\n\r\nThis normalizes/standardizes return values from this method.\r\n",
        "createdAt" : "2018-04-09T22:24:52Z",
        "updatedAt" : "2018-04-09T22:24:52Z",
        "lastEditedBy" : "4b69a0b5-ac6f-45e9-9507-dd1385182f29",
        "tags" : [
        ]
      },
      {
        "id" : "58e3eea1-2fc5-49fe-8e21-1a1eb8fb7c9b",
        "parentId" : "375c90bc-2dd4-4206-9ea6-1a54be1e8617",
        "authorId" : "4b69a0b5-ac6f-45e9-9507-dd1385182f29",
        "body" : "Also, in general, this whole PR is a bug fix.  Largely due to difference in behavior of python3 vs python2.  The goal is to normalize the functionality.\r\n\r\nThe only place not a bugfix is the addition of `cookies_string`.  That was added to ease issues related to the original bug report of missing duplicate headers.  However, due to predictability issues reconstructing the string from the headers, I would consider that part of the bugfix as well.",
        "createdAt" : "2018-04-09T22:41:19Z",
        "updatedAt" : "2018-04-09T22:42:29Z",
        "lastEditedBy" : "4b69a0b5-ac6f-45e9-9507-dd1385182f29",
        "tags" : [
        ]
      }
    ],
    "commit" : "8ff4ad42b392973ccc472a1681cc332f2d62e3f9",
    "line" : 16,
    "diffHunk" : "@@ -1,1 +1054,1058 @@                     client_key=client_key, cookies=cookies)\n        # Lowercase keys, to conform to py2 behavior, so that py3 and py2 are predictable\n        info.update(dict((k.lower(), v) for k, v in r.info().items()))\n\n        # Don't be lossy, append header values for duplicate headers"
  },
  {
    "id" : "8a6a0ad0-ba7d-4786-8c32-d1a58e23e50f",
    "prId" : 37622,
    "prUrl" : "https://github.com/ansible/ansible/pull/37622#pullrequestreview-137771946",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fa82daed-2654-46d3-8d6c-9291b2902358",
        "parentId" : null,
        "authorId" : "9932bbba-1aed-4682-8ef2-f023447dec72",
        "body" : "@sivel @bcoca Breaking change incoming here! From the documentation of urllib.request:\r\n\r\n> _method_ should be a string that indicates the HTTP request method that will be used (e.g. 'HEAD'). If provided, its value is stored in the method attribute and is used by get_method(). The default is 'GET' if data is None or 'POST' otherwise.\r\n\r\nThis PR changes the default to always be 'GET' which breaks at least the rocketchat notification module.",
        "createdAt" : "2018-07-13T14:32:46Z",
        "updatedAt" : "2018-07-13T14:35:04Z",
        "lastEditedBy" : "9932bbba-1aed-4682-8ef2-f023447dec72",
        "tags" : [
        ]
      },
      {
        "id" : "1545545b-ecaf-4e31-b31b-4671bf4dac52",
        "parentId" : "fa82daed-2654-46d3-8d6c-9291b2902358",
        "authorId" : "b5903ac7-d5ce-430e-9a0c-504792b2fc79",
        "body" : "This also breaks the `rollbar_deployment` module, see pull request #42876",
        "createdAt" : "2018-07-17T10:45:56Z",
        "updatedAt" : "2018-07-17T10:45:56Z",
        "lastEditedBy" : "b5903ac7-d5ce-430e-9a0c-504792b2fc79",
        "tags" : [
        ]
      }
    ],
    "commit" : "513ee91457843e78a9aba9fea7beaa3f61340929",
    "line" : 439,
    "diffHunk" : "@@ -1,1 +1132,1136 @@    Does not require the module environment\n    '''\n    method = method or 'GET'\n    return Request().open(method, url, data=data, headers=headers, use_proxy=use_proxy,\n                          force=force, last_mod_time=last_mod_time, timeout=timeout, validate_certs=validate_certs,"
  },
  {
    "id" : "cb3da896-ab93-49ea-9142-a2b1f56f70e2",
    "prId" : 41472,
    "prUrl" : "https://github.com/ansible/ansible/pull/41472#pullrequestreview-135344103",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "39143836-3650-4a3b-98fc-ead8d7544cd1",
        "parentId" : null,
        "authorId" : "7268595c-1eb4-4b5f-9277-90f183130a4b",
        "body" : "Would it not make sense to assume 'https' when port is 443 ?",
        "createdAt" : "2018-07-09T09:31:28Z",
        "updatedAt" : "2018-07-09T09:31:28Z",
        "lastEditedBy" : "7268595c-1eb4-4b5f-9277-90f183130a4b",
        "tags" : [
        ]
      },
      {
        "id" : "de25be4a-a86f-43b1-9874-5bcfd4377f53",
        "parentId" : "39143836-3650-4a3b-98fc-ead8d7544cd1",
        "authorId" : "96aeecbb-c275-402c-b904-a795c82efb48",
        "body" : "Yes. But still `generic_urlparse` returns proxy_hostname as None so it does not make sense to proceed further.",
        "createdAt" : "2018-07-09T09:36:35Z",
        "updatedAt" : "2018-07-09T09:36:44Z",
        "lastEditedBy" : "96aeecbb-c275-402c-b904-a795c82efb48",
        "tags" : [
        ]
      },
      {
        "id" : "65255a49-b56a-4592-9a27-793f76a20425",
        "parentId" : "39143836-3650-4a3b-98fc-ead8d7544cd1",
        "authorId" : "7268595c-1eb4-4b5f-9277-90f183130a4b",
        "body" : "Ah, ok :-)",
        "createdAt" : "2018-07-09T09:38:28Z",
        "updatedAt" : "2018-07-09T09:38:28Z",
        "lastEditedBy" : "7268595c-1eb4-4b5f-9277-90f183130a4b",
        "tags" : [
        ]
      }
    ],
    "commit" : "5aaa42298cd0e6bda585cea307bd10aec75fa94e",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +736,740 @@                port = proxy_parts.get('port') or 443\n                proxy_hostname = proxy_parts.get('hostname', None)\n                if proxy_hostname is None or proxy_parts.get('scheme') == '':\n                    raise ProxyError(\"Failed to parse https_proxy environment variable.\"\n                                     \" Please make sure you export https proxy as 'https_proxy=<SCHEME>://<IP_ADDRESS>:<PORT>'\")"
  }
]