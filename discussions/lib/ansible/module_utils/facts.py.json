[
  {
    "id" : "2ff524ef-064b-44d3-8a1d-b6a4826089c3",
    "prId" : 10203,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "194fc74a-6271-4ecb-8815-5aab4b9ec90f",
        "parentId" : null,
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "What's the reason for using the shell here?  There's no redirection, pipes, or other needs for the shell that I can see.\n",
        "createdAt" : "2015-02-15T16:15:25Z",
        "updatedAt" : "2015-02-15T16:15:25Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      },
      {
        "id" : "0912c446-51bc-4e33-bcd5-5839df068310",
        "parentId" : "194fc74a-6271-4ecb-8815-5aab4b9ec90f",
        "authorId" : "07458abf-8005-49cc-b421-cc1534efe389",
        "body" : "I based my code on class HP UX(Hardware). I'm not a python expert. Feel free to correct my bad idioms an i will do the test on HP UX box\n",
        "createdAt" : "2015-03-04T09:21:43Z",
        "updatedAt" : "2015-03-04T09:21:43Z",
        "lastEditedBy" : "07458abf-8005-49cc-b421-cc1534efe389",
        "tags" : [
        ]
      }
    ],
    "commit" : "4c661e2b93ad9a7b51de196287b9da7c6b7467d6",
    "line" : 28,
    "diffHunk" : "@@ -1,1 +2073,2077 @@\n    def get_default_interfaces(self):\n        rc, out, err = module.run_command(\"/usr/bin/netstat -nr\", use_unsafe_shell=True)\n        lines = out.split('\\n')\n        for line in lines:"
  },
  {
    "id" : "218d9ad9-b67b-444a-94eb-d084245c0e81",
    "prId" : 10203,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6f9ba577-93ae-43bf-88b9-207586c84840",
        "parentId" : null,
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "Same question here about unsafe_shell as in get_default_interfaces()\n",
        "createdAt" : "2015-02-15T16:16:26Z",
        "updatedAt" : "2015-02-15T16:16:26Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      },
      {
        "id" : "bd3c07bb-0891-47a0-b86a-206b0ad2bd29",
        "parentId" : "6f9ba577-93ae-43bf-88b9-207586c84840",
        "authorId" : "07458abf-8005-49cc-b421-cc1534efe389",
        "body" : "same as above\n",
        "createdAt" : "2015-03-04T09:21:57Z",
        "updatedAt" : "2015-03-04T09:21:57Z",
        "lastEditedBy" : "07458abf-8005-49cc-b421-cc1534efe389",
        "tags" : [
        ]
      }
    ],
    "commit" : "4c661e2b93ad9a7b51de196287b9da7c6b7467d6",
    "line" : 39,
    "diffHunk" : "@@ -1,1 +2084,2088 @@    def get_interfaces_info(self):\n        interfaces = {}\n        rc, out, err = module.run_command(\"/usr/bin/netstat -ni\", use_unsafe_shell=True)\n        lines = out.split('\\n')\n        for line in lines:"
  },
  {
    "id" : "fa3cbcee-26e5-4087-93b6-ecec2d4fa17d",
    "prId" : 10304,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0539424c-cfee-4f85-9394-93da78f05342",
        "parentId" : null,
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "it might be better to use the module method to find binaries, in case someone moves this to another path\n",
        "createdAt" : "2015-02-20T12:34:40Z",
        "updatedAt" : "2015-02-20T12:58:11Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "7801e91c-11d5-4af1-bae4-9e3f309d731b",
        "parentId" : "0539424c-cfee-4f85-9394-93da78f05342",
        "authorId" : "c971c261-6752-415e-93a0-901daeedae95",
        "body" : "I took that test from the above section 15 lines up testing for `/usr/bin/zonename`, so when I adjust the pull request we should consistently switch the other locations in the code also. I can assure you that you cannot safely move stuff around in Solaris without breaking the packaging system and workflows. \n",
        "createdAt" : "2015-02-20T12:49:20Z",
        "updatedAt" : "2015-02-20T12:58:11Z",
        "lastEditedBy" : "c971c261-6752-415e-93a0-901daeedae95",
        "tags" : [
        ]
      }
    ],
    "commit" : "c1dba60961b32e79ded4674837ad71fe30b59eb2",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +2500,2504 @@                    self.facts['virtualization_role'] = 'guest'\n        # Detect domaining on Sparc hardware\n        if os.path.exists(\"/usr/sbin/virtinfo\"):\n            # The output of virtinfo is different whether we are on a machine with logical\n            # domains ('LDoms') on a T-series or domains ('Domains') on a M-series. Try LDoms first."
  },
  {
    "id" : "dbd44e14-78fa-431c-950e-4039b1251d47",
    "prId" : 15705,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1e598c86-0cd7-4c00-a12d-ef262e40e145",
        "parentId" : null,
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "wouldn't Alpine merit the same?\n",
        "createdAt" : "2016-05-03T16:10:06Z",
        "updatedAt" : "2016-05-03T16:15:27Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "dc3110b3-2cce-45ff-a661-5799a667bf1a",
        "parentId" : "1e598c86-0cd7-4c00-a12d-ef262e40e145",
        "authorId" : "f239a73a-a28d-436b-80b0-e91c91281bb6",
        "body" : "As discussed in IRC: I guess Alpine has content in it's release-file that is relevant to have in distribution_version. Arch does not (as far as I know).\n",
        "createdAt" : "2016-05-04T06:57:59Z",
        "updatedAt" : "2016-05-04T06:57:59Z",
        "lastEditedBy" : "f239a73a-a28d-436b-80b0-e91c91281bb6",
        "tags" : [
        ]
      },
      {
        "id" : "6f44104c-f6f8-4457-aab5-4da58210fe2f",
        "parentId" : "1e598c86-0cd7-4c00-a12d-ef262e40e145",
        "authorId" : "8af09a0d-8050-4441-bb0b-6cd2dd205a01",
        "body" : "Confirmed here on lxc:\n\n```\n    \"ansible_distribution_major_version\": \"NA\", \n    \"ansible_distribution_release\": \"NA\", \n    \"ansible_distribution_version\": \"3.3.3\", \n```\n\nAlso, pretty impressive distribution to use !\n\nKeep up the great work B)\n",
        "createdAt" : "2016-05-05T14:50:36Z",
        "updatedAt" : "2016-05-05T15:00:31Z",
        "lastEditedBy" : "8af09a0d-8050-4441-bb0b-6cd2dd205a01",
        "tags" : [
        ]
      }
    ],
    "commit" : "e725f03cb5dedca296a98a2140dfa1f8526518f3",
    "line" : 66,
    "diffHunk" : "@@ -1,1 +793,797 @@    def get_distribution_Alpine(self, name, data, path):\n        self.facts['distribution'] = 'Alpine'\n        self.facts['distribution_version'] = data\n\n    def get_distribution_Solaris(self, name, data, path):"
  },
  {
    "id" : "595fa38b-2ae2-4b69-b4f1-8956e8bf60f4",
    "prId" : 15705,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bf04c5cd-6e25-4f14-8419-ca70371a1225",
        "parentId" : null,
        "authorId" : "8af09a0d-8050-4441-bb0b-6cd2dd205a01",
        "body" : "Would it be possible to clarify what would raise an AttributeError instead of \"this should never happen\" ?\n\nWouldn't this be perhaps a bit more precise ?\n\n```\ndistfunc = getattr(self, 'get_distribution_' + name, None)\nif distfunc is not None:\n    parsed = distfunc(name, data, path)\n    if parsed is None or parsed:\n        break\n```\n",
        "createdAt" : "2016-05-03T16:44:59Z",
        "updatedAt" : "2016-05-03T16:46:34Z",
        "lastEditedBy" : "8af09a0d-8050-4441-bb0b-6cd2dd205a01",
        "tags" : [
        ]
      },
      {
        "id" : "ff36e2b3-e826-4953-8ebe-0ba46a2b266d",
        "parentId" : "bf04c5cd-6e25-4f14-8419-ca70371a1225",
        "authorId" : "f239a73a-a28d-436b-80b0-e91c91281bb6",
        "body" : "I tried to cover this in line 607-610\n",
        "createdAt" : "2016-05-03T17:01:57Z",
        "updatedAt" : "2016-05-03T17:01:57Z",
        "lastEditedBy" : "f239a73a-a28d-436b-80b0-e91c91281bb6",
        "tags" : [
        ]
      },
      {
        "id" : "e2d961d5-4128-4969-9349-85b6eef7c9cf",
        "parentId" : "bf04c5cd-6e25-4f14-8419-ca70371a1225",
        "authorId" : "8af09a0d-8050-4441-bb0b-6cd2dd205a01",
        "body" : "So AttributeError here would be raised by the getattr() call, isn't the other suggested form better ?\n\nWhy do we need all this code in a try block ?\n",
        "createdAt" : "2016-05-04T06:28:43Z",
        "updatedAt" : "2016-05-04T06:28:43Z",
        "lastEditedBy" : "8af09a0d-8050-4441-bb0b-6cd2dd205a01",
        "tags" : [
        ]
      },
      {
        "id" : "745c97e6-0e5e-4d42-bd2c-6b42b2c4cf4e",
        "parentId" : "bf04c5cd-6e25-4f14-8419-ca70371a1225",
        "authorId" : "f239a73a-a28d-436b-80b0-e91c91281bb6",
        "body" : "The try catches if the function name that got constructed does not exist.\nThis will NEVER happen with the existing code, because all distribution names are caught before in SEARCH_STRING or have a function defined. The try is the conservative approach to catch bugs that will be introduced in the future is some change leads to a function call that does not exist.\nThe failure should then not be a traceback, but a wrong setting of the distribution name/version.\n",
        "createdAt" : "2016-05-04T06:57:18Z",
        "updatedAt" : "2016-05-04T06:57:18Z",
        "lastEditedBy" : "f239a73a-a28d-436b-80b0-e91c91281bb6",
        "tags" : [
        ]
      },
      {
        "id" : "0c39adb6-f193-458c-b037-c92b28612fb7",
        "parentId" : "bf04c5cd-6e25-4f14-8419-ca70371a1225",
        "authorId" : "8af09a0d-8050-4441-bb0b-6cd2dd205a01",
        "body" : "> The try catches if the function name that got constructed does not exist.\n\nYes, also it would catch any AttributeError raised in `distfunc(name, data, path)`, is there any reason for this ?\n\nWon't this harden debugging in such cases ?\n",
        "createdAt" : "2016-05-05T14:14:20Z",
        "updatedAt" : "2016-05-05T14:15:12Z",
        "lastEditedBy" : "8af09a0d-8050-4441-bb0b-6cd2dd205a01",
        "tags" : [
        ]
      },
      {
        "id" : "9ff0b487-79be-4c84-8e56-2ec688e24084",
        "parentId" : "bf04c5cd-6e25-4f14-8419-ca70371a1225",
        "authorId" : "f239a73a-a28d-436b-80b0-e91c91281bb6",
        "body" : "At least the existing function can't raise AttributeError. Feel free to open a PR for a better implementation.\n",
        "createdAt" : "2016-05-05T16:24:01Z",
        "updatedAt" : "2016-05-05T16:24:01Z",
        "lastEditedBy" : "f239a73a-a28d-436b-80b0-e91c91281bb6",
        "tags" : [
        ]
      }
    ],
    "commit" : "e725f03cb5dedca296a98a2140dfa1f8526518f3",
    "line" : 50,
    "diffHunk" : "@@ -1,1 +722,726 @@                    except AttributeError:\n                        # this should never happen, but if it does fail quitely and not with a traceback\n                        pass\n\n"
  },
  {
    "id" : "d94ee9ed-2f32-453a-b110-1fe3ef0e19bf",
    "prId" : 15705,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "721e4107-8d37-45c1-a2a8-deb3cf6a6f55",
        "parentId" : null,
        "authorId" : "8af09a0d-8050-4441-bb0b-6cd2dd205a01",
        "body" : "Is that still true ?\n",
        "createdAt" : "2016-05-04T06:28:38Z",
        "updatedAt" : "2016-05-04T06:28:38Z",
        "lastEditedBy" : "8af09a0d-8050-4441-bb0b-6cd2dd205a01",
        "tags" : [
        ]
      },
      {
        "id" : "c7dc860b-ba64-4c60-91c5-eeb84bfe400c",
        "parentId" : "721e4107-8d37-45c1-a2a8-deb3cf6a6f55",
        "authorId" : "8af09a0d-8050-4441-bb0b-6cd2dd205a01",
        "body" : "Anybody knows if we could make the existing test case to prevent this on other distros like arch linux or Alpine ?\n",
        "createdAt" : "2016-05-05T14:57:34Z",
        "updatedAt" : "2016-05-05T14:57:34Z",
        "lastEditedBy" : "8af09a0d-8050-4441-bb0b-6cd2dd205a01",
        "tags" : [
        ]
      },
      {
        "id" : "53cb4832-117a-463f-b5ab-010225030e1f",
        "parentId" : "721e4107-8d37-45c1-a2a8-deb3cf6a6f55",
        "authorId" : "f239a73a-a28d-436b-80b0-e91c91281bb6",
        "body" : "please have a look at the existing tests, It's straight-forward to extend them to other distributions. See also the discussion on the previous issues for how to do this. Let me know if you have specific questions.\n",
        "createdAt" : "2016-05-05T16:25:22Z",
        "updatedAt" : "2016-05-05T16:25:22Z",
        "lastEditedBy" : "f239a73a-a28d-436b-80b0-e91c91281bb6",
        "tags" : [
        ]
      }
    ],
    "commit" : "e725f03cb5dedca296a98a2140dfa1f8526518f3",
    "line" : 1,
    "diffHunk" : "@@ -1,1 +602,606 @@    To do so it checks the existance and content of typical files in /etc containing distribution information\n\n    This is unit tested. Please extend the tests to cover all distributions if you have them available.\n    \"\"\"\n"
  },
  {
    "id" : "3016d88f-7ffb-473b-b670-a28850575d8a",
    "prId" : 15705,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "20755191-2408-493b-9294-057eca075037",
        "parentId" : null,
        "authorId" : "8af09a0d-8050-4441-bb0b-6cd2dd205a01",
        "body" : "Shouldn't we have a test for that ?\n\nIt could have caught the error caused with Arch linux if we did couldn't it ?\n",
        "createdAt" : "2016-05-04T06:30:19Z",
        "updatedAt" : "2016-05-04T06:31:02Z",
        "lastEditedBy" : "8af09a0d-8050-4441-bb0b-6cd2dd205a01",
        "tags" : [
        ]
      },
      {
        "id" : "c10f77a3-df71-47ee-acc7-3406d7fb1593",
        "parentId" : "20755191-2408-493b-9294-057eca075037",
        "authorId" : "f239a73a-a28d-436b-80b0-e91c91281bb6",
        "body" : "there is no arch test, please add one\n",
        "createdAt" : "2016-05-04T06:55:04Z",
        "updatedAt" : "2016-05-04T06:55:04Z",
        "lastEditedBy" : "f239a73a-a28d-436b-80b0-e91c91281bb6",
        "tags" : [
        ]
      },
      {
        "id" : "87e5fec4-d7fd-48fc-b96b-f1409eda80cb",
        "parentId" : "20755191-2408-493b-9294-057eca075037",
        "authorId" : "8af09a0d-8050-4441-bb0b-6cd2dd205a01",
        "body" : "Thanks, do you mean a test case for arch linux or do you mean running the existing test suite on arch linux and perhaps more distros would cover this ?\n",
        "createdAt" : "2016-05-05T14:58:54Z",
        "updatedAt" : "2016-05-05T14:58:54Z",
        "lastEditedBy" : "8af09a0d-8050-4441-bb0b-6cd2dd205a01",
        "tags" : [
        ]
      }
    ],
    "commit" : "e725f03cb5dedca296a98a2140dfa1f8526518f3",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +608,612 @@    #  - allowempty == True\n    #  - be listed in SEARCH_STRING\n    #  - have a function get_distribution_DISTNAME implemented\n    OSDIST_LIST = (\n        {'path': '/etc/oracle-release', 'name': 'OracleLinux'},"
  }
]