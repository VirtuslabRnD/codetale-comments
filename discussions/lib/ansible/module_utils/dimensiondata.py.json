[
  {
    "id" : "81a667f7-bd0c-42be-bef5-abba004e48d9",
    "prId" : 17604,
    "prUrl" : "https://github.com/ansible/ansible/pull/17604#pullrequestreview-4938987",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2d44e676-0f0c-4f11-98b0-13a86f946135",
        "parentId" : null,
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "the message here looks like a failure case rather than an exit case... Perhaps it should use module.fail_json or the message should be changed?\n\nStylistically, exit_json() cases should retun back to the main function in the module and let the exit_json() occur there.  It's more flexible to changing needs inside of the module than calling exit_json() here.\n",
        "createdAt" : "2016-10-19T19:00:18Z",
        "updatedAt" : "2017-01-13T04:10:02Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      }
    ],
    "commit" : "b00b6df847c3d2afb70776951c86fc0cd5ece4a8",
    "line" : null,
    "diffHunk" : "@@ -1,1 +260,264 @@        else:\n            module.exit_json(changed=False, msg=\"IP block starting with \"\n                             \"'%s' does not exist.\" % base_ip)\n    return block\n"
  },
  {
    "id" : "e50fcee1-fa7f-4961-b9b0-b367a4c1a3f5",
    "prId" : 17604,
    "prUrl" : "https://github.com/ansible/ansible/pull/17604#pullrequestreview-15844938",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d5ef50d6-cf61-4248-9ec4-3616991731f2",
        "parentId" : null,
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "Note: Our modules usually take credentials as parameters and fall back to files and environment variables if the credentials aren't present in the parameters.  There's multiple ways to implement that, though, with processing the parameters first or the library function processing the parameters in addition to the config files and env vars.  Not sure which way you'd want to fix this.\n",
        "createdAt" : "2016-10-19T19:06:52Z",
        "updatedAt" : "2017-01-13T04:10:02Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      },
      {
        "id" : "069c9950-8395-4601-9898-ed45ede0c4aa",
        "parentId" : "d5ef50d6-cf61-4248-9ec4-3616991731f2",
        "authorId" : "2444701f-41e5-43c7-a575-d0da862566a1",
        "body" : "I'll come back to this after we've sorted out the other issues you've noted :)",
        "createdAt" : "2016-12-13T20:56:30Z",
        "updatedAt" : "2017-01-13T04:10:02Z",
        "lastEditedBy" : "2444701f-41e5-43c7-a575-d0da862566a1",
        "tags" : [
        ]
      },
      {
        "id" : "ab721afe-8fab-401c-ad07-0110673c8f02",
        "parentId" : "d5ef50d6-cf61-4248-9ec4-3616991731f2",
        "authorId" : "2444701f-41e5-43c7-a575-d0da862566a1",
        "body" : "@abadger - is this the kind of thing you're talking about?\r\n\r\n* [change to module_utils](https://github.com/ansible/ansible/pull/17604/commits/bb8817ac1f7818c895abd51f6aff66d670766250)\r\n* [change to module](https://github.com/ansible/ansible/pull/19325/commits/f82888a62a89a42180babb44173d6eb3aab2978e)",
        "createdAt" : "2016-12-15T19:07:36Z",
        "updatedAt" : "2017-01-13T04:10:02Z",
        "lastEditedBy" : "2444701f-41e5-43c7-a575-d0da862566a1",
        "tags" : [
        ]
      },
      {
        "id" : "7ec80cea-3938-4621-b057-f8380e5c9538",
        "parentId" : "d5ef50d6-cf61-4248-9ec4-3616991731f2",
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "@tintoy, yes that's about what I'm talking about.  I'd probably put all that logic into a single function, though.  So you'd call get_credentials(module) and it would first look in the module parameters, then the environment, and finally in the dot files (returning the first set that it found).",
        "createdAt" : "2017-01-10T02:35:55Z",
        "updatedAt" : "2017-01-13T04:10:02Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      },
      {
        "id" : "3ddf18af-351b-4612-a526-1a19da1ac736",
        "parentId" : "d5ef50d6-cf61-4248-9ec4-3616991731f2",
        "authorId" : "2444701f-41e5-43c7-a575-d0da862566a1",
        "body" : "Ok, how does this look?\r\n\r\n85164a272274514877a6369877e851461a5acf0b",
        "createdAt" : "2017-01-10T03:40:13Z",
        "updatedAt" : "2017-01-13T04:10:02Z",
        "lastEditedBy" : "2444701f-41e5-43c7-a575-d0da862566a1",
        "tags" : [
        ]
      }
    ],
    "commit" : "b00b6df847c3d2afb70776951c86fc0cd5ece4a8",
    "line" : 125,
    "diffHunk" : "@@ -1,1 +123,127 @@        raise MissingCredentialsError(\"Dimension Data user id not found\")\n    elif not key:\n        raise MissingCredentialsError(\"Dimension Data key not found\")\n\n    # Both found, return data"
  },
  {
    "id" : "28effdef-79be-4c4a-b45c-44a407bfce1f",
    "prId" : 17604,
    "prUrl" : "https://github.com/ansible/ansible/pull/17604#pullrequestreview-15841350",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8acaf070-7080-41c9-90cc-6688c1c7dc3e",
        "parentId" : null,
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "Note that this won't work in the current forumlation of the modules (because the exception that check_libcloud_or_fail() raises goes uncaught in the module).  I'll write more about that in the module, though, as that's probably where it will have to be fixed.\n",
        "createdAt" : "2016-10-19T19:08:17Z",
        "updatedAt" : "2017-01-13T04:10:02Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      },
      {
        "id" : "4eccf6ea-9b5a-40aa-9573-b07444a26ff7",
        "parentId" : "8acaf070-7080-41c9-90cc-6688c1c7dc3e",
        "authorId" : "2444701f-41e5-43c7-a575-d0da862566a1",
        "body" : "@abadger - could you elaborate on this a little? For example, [this](https://github.com/ansible/ansible/pull/19325) is the first PR we'll try to merge for the module itself. Do you mean that the module should be using `except LibcloudNotFound` where it calls `get_credentials`? And, if so, that it should call `module.fail_json` when it does? If you wouldn't mind making a note about what you'd like me to do there I'm happy to have a go. Thanks!",
        "createdAt" : "2016-12-15T18:23:04Z",
        "updatedAt" : "2017-01-13T04:10:02Z",
        "lastEditedBy" : "2444701f-41e5-43c7-a575-d0da862566a1",
        "tags" : [
        ]
      },
      {
        "id" : "1148d057-3576-4daf-8202-d71754387798",
        "parentId" : "8acaf070-7080-41c9-90cc-6688c1c7dc3e",
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "Yes, the revisions you'v emade to this look good to me.",
        "createdAt" : "2017-01-10T02:38:03Z",
        "updatedAt" : "2017-01-13T04:10:02Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      },
      {
        "id" : "f3366c47-1343-410b-9ecb-d0f710dc7f0a",
        "parentId" : "8acaf070-7080-41c9-90cc-6688c1c7dc3e",
        "authorId" : "2444701f-41e5-43c7-a575-d0da862566a1",
        "body" : "Thanks!",
        "createdAt" : "2017-01-10T02:39:06Z",
        "updatedAt" : "2017-01-13T04:10:02Z",
        "lastEditedBy" : "2444701f-41e5-43c7-a575-d0da862566a1",
        "tags" : [
        ]
      },
      {
        "id" : "ec710cce-0fe3-4a9b-bb86-87f711bc4e3b",
        "parentId" : "8acaf070-7080-41c9-90cc-6688c1c7dc3e",
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "I took a closer look at the module and the concern here is still valid but I have (for real!) left the information in the module PR now :-)  So we can decide what to do there.  It doesn't block this one from going in.",
        "createdAt" : "2017-01-10T02:49:02Z",
        "updatedAt" : "2017-01-13T04:10:02Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      }
    ],
    "commit" : "b00b6df847c3d2afb70776951c86fc0cd5ece4a8",
    "line" : 135,
    "diffHunk" : "@@ -1,1 +133,137 @@    Get the list of available regions whose vendor is Dimension Data.\n    \"\"\"\n    check_libcloud_or_fail()\n\n    # Get endpoints"
  }
]