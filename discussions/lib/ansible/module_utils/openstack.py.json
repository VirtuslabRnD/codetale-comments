[
  {
    "id" : "dc99ca18-db46-4c1f-bd8a-e7ebec237697",
    "prId" : 18408,
    "prUrl" : "https://github.com/ansible/ansible/pull/18408#pullrequestreview-9177500",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8da52c54-b856-414d-ba65-89e2eac14cd9",
        "parentId" : null,
        "authorId" : "99dfb093-81dd-44d0-97be-6dcf3059e796",
        "body" : "this should not be changed IMHO\n",
        "createdAt" : "2016-11-09T15:43:50Z",
        "updatedAt" : "2016-11-09T21:05:55Z",
        "lastEditedBy" : "99dfb093-81dd-44d0-97be-6dcf3059e796",
        "tags" : [
        ]
      },
      {
        "id" : "ade0d6f1-e2c2-4631-a7a9-4704caca0bbd",
        "parentId" : "8da52c54-b856-414d-ba65-89e2eac14cd9",
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "@resmo Is there a reason you don't like this?  To work on python3 we either need to do this or:\n\n``` python\nfor (k, v) in addresses.items():\n```\n\nEither way is probably okay.\n",
        "createdAt" : "2016-11-17T23:04:51Z",
        "updatedAt" : "2016-11-17T23:04:51Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      },
      {
        "id" : "14ef79d6-7bd5-491f-927c-20954cbf6a6a",
        "parentId" : "8da52c54-b856-414d-ba65-89e2eac14cd9",
        "authorId" : "99dfb093-81dd-44d0-97be-6dcf3059e796",
        "body" : "Oh, sorry, my fault. I mixed up items() and iteritems(). All fine!\n",
        "createdAt" : "2016-11-18T07:09:46Z",
        "updatedAt" : "2016-11-18T07:09:46Z",
        "lastEditedBy" : "99dfb093-81dd-44d0-97be-6dcf3059e796",
        "tags" : [
        ]
      }
    ],
    "commit" : "ae8f60cc88ba09964a4b104c43d6a1c74bc68d70",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +63,67 @@\n    ret = []\n    for (k, v) in iteritems(addresses):\n        if key_name and k == key_name:\n            ret.extend([addrs['addr'] for addrs in v])"
  },
  {
    "id" : "85b50faf-0860-4b6a-b18f-b7181a4245f5",
    "prId" : 50285,
    "prUrl" : "https://github.com/ansible/ansible/pull/50285#pullrequestreview-231780307",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2ff7a6b7-e0b9-4b60-ae32-c35f708153ed",
        "parentId" : null,
        "authorId" : "629bc9a3-3ae4-46d1-8f5b-fe0fcb0fc036",
        "body" : "Why this code change is required?\r\nIsn't this already checked in the lines above?",
        "createdAt" : "2019-04-18T16:37:03Z",
        "updatedAt" : "2019-05-09T15:36:23Z",
        "lastEditedBy" : "629bc9a3-3ae4-46d1-8f5b-fe0fcb0fc036",
        "tags" : [
        ]
      },
      {
        "id" : "30df03e5-8b88-4c2a-a997-cbca04df1432",
        "parentId" : "2ff7a6b7-e0b9-4b60-ae32-c35f708153ed",
        "authorId" : "1b5aee29-59a8-41bb-8b48-dc8bc949c294",
        "body" : "`min_version` also defaults to `0.12.0` ",
        "createdAt" : "2019-04-18T18:02:40Z",
        "updatedAt" : "2019-05-09T15:36:23Z",
        "lastEditedBy" : "1b5aee29-59a8-41bb-8b48-dc8bc949c294",
        "tags" : [
        ]
      },
      {
        "id" : "2f964326-d592-4be4-b66b-d40252eda7e2",
        "parentId" : "2ff7a6b7-e0b9-4b60-ae32-c35f708153ed",
        "authorId" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "body" : "Another version could be used.",
        "createdAt" : "2019-04-18T18:24:25Z",
        "updatedAt" : "2019-05-09T15:36:23Z",
        "lastEditedBy" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "tags" : [
        ]
      },
      {
        "id" : "0ec48561-574a-473a-aba1-d52b96dac286",
        "parentId" : "2ff7a6b7-e0b9-4b60-ae32-c35f708153ed",
        "authorId" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "body" : "When openstacksdk 0.9.19 is used (assuming caller is using a lower version than the default one), without the additional check, the following exception occurs:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"~/.ansible/tmp/ansible-tmp-1555747400.49-76880204403181/AnsiballZ_os_security_group.py\", line 113, in <module>\r\n    _ansiballz_main()\r\n  File \"~/.ansible/tmp/ansible-tmp-1555747400.49-76880204403181/AnsiballZ_os_security_group.py\", line 105, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"~/.ansible/tmp/ansible-tmp-1555747400.49-76880204403181/AnsiballZ_os_security_group.py\", line 48, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/tmp/ansible_os_security_group_payload_0EWiaz/__main__.py\", line 163, in <module>\r\n  File \"/tmp/ansible_os_security_group_payload_0EWiaz/__main__.py\", line 115, in main\r\n  File \"/tmp/ansible_os_security_group_payload_0EWiaz/ansible_os_security_group_payload.zip/ansible/module_utils/openstack.py\", line 162, in openstack_cloud_from_module\r\nAttributeError: 'module' object has no attribute 'exceptions'\r\n```\r\n\r\nThe current code isn't compatible with openstacksdk < 0.10.0.\r\nBecause this is a `module_utils`, other module not belonging to the ansible repository might use this method with another value than the default one.",
        "createdAt" : "2019-04-20T08:11:43Z",
        "updatedAt" : "2019-05-09T15:36:23Z",
        "lastEditedBy" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "tags" : [
        ]
      },
      {
        "id" : "7300222b-0108-4de5-b2e1-a6c0ad92fc84",
        "parentId" : "2ff7a6b7-e0b9-4b60-ae32-c35f708153ed",
        "authorId" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "body" : "@marsavela @dominikholler: please, could you take a look at this ?",
        "createdAt" : "2019-04-29T16:38:19Z",
        "updatedAt" : "2019-05-09T15:36:23Z",
        "lastEditedBy" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "tags" : [
        ]
      }
    ],
    "commit" : "6e9b003c15ac63ca0c5153fc86e1a634967c26d2",
    "line" : 23,
    "diffHunk" : "@@ -1,1 +129,133 @@                \"the openstacksdk library MUST be >={min_version}.\".format(\n                    min_version=min_version))\n\n    cloud_config = module.params.pop('cloud', None)\n    try:"
  },
  {
    "id" : "19d40b87-7ff3-485f-a2b7-35360136c7b2",
    "prId" : 50285,
    "prUrl" : "https://github.com/ansible/ansible/pull/50285#pullrequestreview-232090124",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "59f6cfc3-6eec-4543-8560-ab94999121ab",
        "parentId" : null,
        "authorId" : "629bc9a3-3ae4-46d1-8f5b-fe0fcb0fc036",
        "body" : "Why do you think this additional line is helpful?",
        "createdAt" : "2019-04-30T08:36:14Z",
        "updatedAt" : "2019-05-09T15:36:23Z",
        "lastEditedBy" : "629bc9a3-3ae4-46d1-8f5b-fe0fcb0fc036",
        "tags" : [
        ]
      },
      {
        "id" : "fb977714-8a6f-410b-9a41-e5ee0f428ad0",
        "parentId" : "59f6cfc3-6eec-4543-8560-ab94999121ab",
        "authorId" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "body" : "Did you read the stacktrace mentioned in the description of this PR and in the first commit ?\r\n\r\n`sdk.version.__version__` expression raises an `AttributeError` exception when openstacksdk < 0.10.0 is used.",
        "createdAt" : "2019-04-30T09:30:45Z",
        "updatedAt" : "2019-05-09T15:36:23Z",
        "lastEditedBy" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "tags" : [
        ]
      },
      {
        "id" : "d9516857-af08-488e-b711-8d7d12879b5e",
        "parentId" : "59f6cfc3-6eec-4543-8560-ab94999121ab",
        "authorId" : "629bc9a3-3ae4-46d1-8f5b-fe0fcb0fc036",
        "body" : "> Did you read the stacktrace mentioned in the description of this PR and in the first commit ?\r\n\r\nSure, but I did not understand how this is related, but with your additional exlaination, I understand now.\r\nThe commit message could be improved by writing something like\r\n\"`openstack.version.__version__` expression raises an AttributeError exception when openstacksdk < 0.10.0 is used. openstack.version is now imported as a module, which works for all openstacksdk versions.\r\n",
        "createdAt" : "2019-04-30T09:57:51Z",
        "updatedAt" : "2019-05-09T15:36:23Z",
        "lastEditedBy" : "629bc9a3-3ae4-46d1-8f5b-fe0fcb0fc036",
        "tags" : [
        ]
      },
      {
        "id" : "cdb88bcf-dcf4-41bd-a4a1-8ccbd7c0598b",
        "parentId" : "59f6cfc3-6eec-4543-8560-ab94999121ab",
        "authorId" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "body" : "PR updated:\r\n- commit message updated\r\n- rebased on devel",
        "createdAt" : "2019-04-30T10:12:08Z",
        "updatedAt" : "2019-05-09T15:36:23Z",
        "lastEditedBy" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "tags" : [
        ]
      }
    ],
    "commit" : "6e9b003c15ac63ca0c5153fc86e1a634967c26d2",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +115,119 @@        import importlib\n        sdk = importlib.import_module('openstack')\n        sdk_version = importlib.import_module('openstack.version')\n    except ImportError:\n        module.fail_json(msg='openstacksdk is required for this module')"
  },
  {
    "id" : "fa41cb06-b53d-4a75-9f5b-df8f458ac8ef",
    "prId" : 50285,
    "prUrl" : "https://github.com/ansible/ansible/pull/50285#pullrequestreview-232102988",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4f8d4274-63d2-490a-bd0c-09ec1f6e5376",
        "parentId" : null,
        "authorId" : "629bc9a3-3ae4-46d1-8f5b-fe0fcb0fc036",
        "body" : "> The current code isn't compatible with openstacksdk < 0.10.0.\r\n> Because this is a module_utils, other module not belonging to the ansible repository might use this method with  another value than the default one.\r\n\r\nSounds like min_version should be set to max(StrictVersion('0.10.0'), StrictVersion(min_version)) here.\r\nThis would avoid the redundancy below, too.",
        "createdAt" : "2019-04-30T08:41:16Z",
        "updatedAt" : "2019-05-09T15:36:23Z",
        "lastEditedBy" : "629bc9a3-3ae4-46d1-8f5b-fe0fcb0fc036",
        "tags" : [
        ]
      },
      {
        "id" : "7c3e359a-163b-4ec7-8c00-bc2e364333b4",
        "parentId" : "4f8d4274-63d2-490a-bd0c-09ec1f6e5376",
        "authorId" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "body" : "Some modules rely on this default value and don't work with `0.10.0`.\r\n\r\nFor example using `os_security_group`:\r\n1. with `devel` branch\r\n2. the following diff applied\r\n    ```\r\n    -def openstack_cloud_from_module(module, min_version='0.12.0'):\r\n    +def openstack_cloud_from_module(module, min_version='0.10.0'):\r\n    ```\r\n3. `openstacksdk==0.10.0` installed (same error occurs with `0.11.0`)\r\n4. this task:\r\n    ```\r\n    - os_security_group:\r\n        cloud: mycloud\r\n        state: present\r\n        name: foo\r\n    ```\r\n\r\nthis exception occurs:\r\n```\r\nTASK [os_security_group] ***\r\nAn exception occurred during task execution. To see the full traceback, use -vvv.\r\nThe error was: AttributeError: 'Connection' object has no attribute 'current_project_id'\r\nfatal: [localhost]: FAILED! => {\r\n    \"changed\": false, \r\n    \"rc\": 1\r\n}\r\n\r\nMSG:\r\n\r\nMODULE FAILURE\r\nSee stdout/stderr for the exact error\r\n\r\n\r\nMODULE_STDERR:\r\n\r\nTraceback (most recent call last):\r\n  File \"$HOME/.ansible/tmp/ansible-tmp-1556617879.09-260636442237090/AnsiballZ_os_security_group.py\", line 125, in <module>\r\n    _ansiballz_main()\r\n  File \"$HOME/.ansible/tmp/ansible-tmp-1556617879.09-260636442237090/AnsiballZ_os_security_group.py\", line 117, in _ansiballz_main\r\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\r\n  File \"$HOME/.ansible/tmp/ansible-tmp-1556617879.09-260636442237090/AnsiballZ_os_security_group.py\", line 54, in invoke_module\r\n    imp.load_module('__main__', mod, module, MOD_DESC)\r\n  File \"/tmp/ansible_os_security_group_payload_uLUg4r/__main__.py\", line 163, in <module>\r\n  File \"/tmp/ansible_os_security_group_payload_uLUg4r/__main__.py\", line 123, in main\r\nAttributeError: 'Connection' object has no attribute 'current_project_id'\r\n```\r\n\r\nThen if `0.10.0` is used by default, callers must be modified in order to pass `0.12.0` when required. Is that OK with you ?",
        "createdAt" : "2019-04-30T10:06:24Z",
        "updatedAt" : "2019-05-09T15:36:23Z",
        "lastEditedBy" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "tags" : [
        ]
      },
      {
        "id" : "b1ba1997-e732-4fc5-a40d-4f7edbfc55ae",
        "parentId" : "4f8d4274-63d2-490a-bd0c-09ec1f6e5376",
        "authorId" : "629bc9a3-3ae4-46d1-8f5b-fe0fcb0fc036",
        "body" : "> Some modules rely on this default value and don't work with 0.10.0.\r\n\r\nNo doubts about this.\r\n\r\n> Then if 0.10.0 is used by default, callers must be modified in order to pass 0.12.0 when required. Is that OK with you ?\r\n\r\nSorry, I did not mean to use 0.10.0 as the default, but process the bigger value, either 0.10.0 or the parmeter value, which is 0.12.0 by default.\r\nThis way we would use 0.10.0 if < 0.10.0 is requested or 0.12.0 if the default parmater value is used. If the parameter is set explicitly to > 0.10.0, we would use this.\r\nIs this explained understandable?\r\n",
        "createdAt" : "2019-04-30T10:14:10Z",
        "updatedAt" : "2019-05-09T15:36:23Z",
        "lastEditedBy" : "629bc9a3-3ae4-46d1-8f5b-fe0fcb0fc036",
        "tags" : [
        ]
      },
      {
        "id" : "73690939-6b0c-4638-b223-49f5ba19b07d",
        "parentId" : "4f8d4274-63d2-490a-bd0c-09ec1f6e5376",
        "authorId" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "body" : "Yes, thanks!\r\n\r\nPR updated.",
        "createdAt" : "2019-04-30T10:48:31Z",
        "updatedAt" : "2019-05-09T15:36:23Z",
        "lastEditedBy" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "tags" : [
        ]
      }
    ],
    "commit" : "6e9b003c15ac63ca0c5153fc86e1a634967c26d2",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +118,122 @@    except ImportError:\n        module.fail_json(msg='openstacksdk is required for this module')\n\n    if min_version:\n        min_version = max(StrictVersion('0.12.0'), StrictVersion(min_version))"
  },
  {
    "id" : "81e6149a-ad6f-44e9-81a9-b1dc7c415ab3",
    "prId" : 50285,
    "prUrl" : "https://github.com/ansible/ansible/pull/50285#pullrequestreview-232123213",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0598b803-0338-457e-93d7-4dbf586116eb",
        "parentId" : null,
        "authorId" : "629bc9a3-3ae4-46d1-8f5b-fe0fcb0fc036",
        "body" : "Maybe we can remove the `if min_version:`? min_version has a useful default, and if `min_version=None` is passed, it is OK to explode, from my point of view.",
        "createdAt" : "2019-04-30T10:56:49Z",
        "updatedAt" : "2019-05-09T15:36:23Z",
        "lastEditedBy" : "629bc9a3-3ae4-46d1-8f5b-fe0fcb0fc036",
        "tags" : [
        ]
      },
      {
        "id" : "c244ecd2-29de-486e-baf7-b62a6c96031c",
        "parentId" : "0598b803-0338-457e-93d7-4dbf586116eb",
        "authorId" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "body" : "It's not OK ([see](https://docs.ansible.com/ansible/latest/dev_guide/developing_modules_best_practices.html#handling-exceptions-bugs-gracefully)).\r\n",
        "createdAt" : "2019-04-30T11:47:02Z",
        "updatedAt" : "2019-05-09T15:36:23Z",
        "lastEditedBy" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "tags" : [
        ]
      }
    ],
    "commit" : "6e9b003c15ac63ca0c5153fc86e1a634967c26d2",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +119,123 @@        module.fail_json(msg='openstacksdk is required for this module')\n\n    if min_version:\n        min_version = max(StrictVersion('0.12.0'), StrictVersion(min_version))\n    else:"
  }
]