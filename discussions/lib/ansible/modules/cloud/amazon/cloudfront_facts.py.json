[
  {
    "id" : "89e795e2-d144-4698-806a-10437d9b58e9",
    "prId" : 19727,
    "prUrl" : "https://github.com/ansible/ansible/pull/19727#pullrequestreview-14826333",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "99e2bc29-5755-47ff-bde7-05ed8564e9a9",
        "parentId" : null,
        "authorId" : "06ab4cf8-4a18-478e-93ee-69929f4bffc6",
        "body" : "It looks like you're double-nesting `ansible_facts` dictionary, on line 406/409/412 you have the facts being saved in `result = { 'ansible_facts': { 'cloudfront':...` but then here you pass to exit_json under `ansible_facts` so your output looks like:\r\n\r\n```\r\nlocalhost | SUCCESS => {                                                                                                          [479/1550]\r\n    \"ansible_facts\": {\r\n        \"ansible_facts\": {\r\n            \"cloudfront\": {\r\n                \"E22CS9R7XQ0CWU\": {\r\n                    \"distribution\": {\r\n....\r\n```\r\nTo fix this you can instead do `module.exit_json(msg=\"Retrieved cloudfront facts.\", **result)` or stop nesting the `cloudfront` key under `ansible_facts` on 402/405/408/411. ",
        "createdAt" : "2016-12-30T15:14:56Z",
        "updatedAt" : "2017-01-05T09:14:18Z",
        "lastEditedBy" : "06ab4cf8-4a18-478e-93ee-69929f4bffc6",
        "tags" : [
        ]
      },
      {
        "id" : "562684cd-c6d3-4000-949e-08f07d7cee5e",
        "parentId" : "99e2bc29-5755-47ff-bde7-05ed8564e9a9",
        "authorId" : "4b241267-f137-4c1d-ad18-6495d90001e3",
        "body" : "Thanks for the feedback @ryansb! All good suggestions. I'll set the default to list_distributions, fix the double-nesting and version number and list both distribution_id and CNAME where possible.",
        "createdAt" : "2016-12-30T19:36:08Z",
        "updatedAt" : "2017-01-05T09:14:18Z",
        "lastEditedBy" : "4b241267-f137-4c1d-ad18-6495d90001e3",
        "tags" : [
        ]
      },
      {
        "id" : "14d7769b-fa46-4957-9147-1d51b278dd3a",
        "parentId" : "99e2bc29-5755-47ff-bde7-05ed8564e9a9",
        "authorId" : "4b241267-f137-4c1d-ad18-6495d90001e3",
        "body" : "Thanks again for the feedback - I've implemented all the suggestions. \r\n\r\nFor listing by both distribution_id and alias, if the distribution_id had been set (not necessarily as a parameter), it queries list_distributions for the aliases and lists by these as well. If only domain_name_alias is specified, this make it 3 calls on the boto3 api (1 to get distribution_id, 1 to get aliases and 1 for the actual request) making it a bit 'chatty' but still a reasonable response time imho. The alternative was to use only the domain_name_alias parameter but this may have missed other aliases of the distribution.\r\n\r\nAlso, the alias listing has only been done for distribution and distribution_config but distribution_id is used for other options as well (eg. invalidation, streaming_distribution and streaming_distribution_config) and so the aliases for these could also be used if required. ",
        "createdAt" : "2017-01-01T13:47:53Z",
        "updatedAt" : "2017-01-05T09:14:18Z",
        "lastEditedBy" : "4b241267-f137-4c1d-ad18-6495d90001e3",
        "tags" : [
        ]
      },
      {
        "id" : "24bd83bd-8a4c-4e40-bf21-4eb9e15707a8",
        "parentId" : "99e2bc29-5755-47ff-bde7-05ed8564e9a9",
        "authorId" : "4b241267-f137-4c1d-ad18-6495d90001e3",
        "body" : "Hi, I found a few bugs in my code which I have since fixed:\r\n- default to list_distributions logic was incorrect - check on if list_distributions is specified\r\n- list_distributions_by_web_acl wasn't passing web_acl_id and wasn't specifying WebAclId for boto3 kwargs\r\n- list_invalidations - wasn't specifying DistributionId for kwargs to boto3",
        "createdAt" : "2017-01-02T08:23:59Z",
        "updatedAt" : "2017-01-05T09:14:18Z",
        "lastEditedBy" : "4b241267-f137-4c1d-ad18-6495d90001e3",
        "tags" : [
        ]
      }
    ],
    "commit" : "7a34e55e0e08aaed1bf8e25e8d0fb8859a463dab",
    "line" : null,
    "diffHunk" : "@@ -1,1 +515,519 @@\n    result['changed'] = False\n    module.exit_json(msg=\"Retrieved cloudfront facts.\", ansible_facts=result)\n\nif __name__ == '__main__':"
  }
]