[
  {
    "id" : "29b1f0e6-02ef-4339-a406-a1256a2538ce",
    "prId" : 42345,
    "prUrl" : "https://github.com/ansible/ansible/pull/42345#pullrequestreview-141988378",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ad1f9982-9332-40b8-84a4-1ab6d2cd0614",
        "parentId" : null,
        "authorId" : "06ab4cf8-4a18-478e-93ee-69929f4bffc6",
        "body" : "I think if this fails, we can safely return `None` or `''` as the account alias, because it's possible people don't have the additional ListAccountAliases permission. That would be backwards compatible as well, since setups that already work without that permission would suddenly break in this version. ",
        "createdAt" : "2018-07-11T15:55:12Z",
        "updatedAt" : "2018-08-01T07:51:04Z",
        "lastEditedBy" : "06ab4cf8-4a18-478e-93ee-69929f4bffc6",
        "tags" : [
        ]
      },
      {
        "id" : "5925bd00-1fc3-4dc7-a69c-c04a65442c07",
        "parentId" : "ad1f9982-9332-40b8-84a4-1ab6d2cd0614",
        "authorId" : "adfabdeb-0c21-4540-82ed-329783255f82",
        "body" : "I like the idea of retaining backwards compatability on the permissons, but I'd like to maintain a distinction between being unable to get the account alias and there being no account alias.\r\n\r\nHow about the following:\r\n\r\n* If we cannot get the account alias because of permissions of other failure: Do not include the account_alias key in the response\r\n* If we are able to make the call and get the result of no account alias: Include account_alise = None in the response\r\n* If we succeed in getting the account alias: Include account_alias = _the alias_ in the response",
        "createdAt" : "2018-07-11T18:52:18Z",
        "updatedAt" : "2018-08-01T07:51:04Z",
        "lastEditedBy" : "adfabdeb-0c21-4540-82ed-329783255f82",
        "tags" : [
        ]
      },
      {
        "id" : "0d736148-8471-45c6-885e-f0a14def313a",
        "parentId" : "ad1f9982-9332-40b8-84a4-1ab6d2cd0614",
        "authorId" : "f4bf0e37-d96c-4512-b13f-8103f3086b04",
        "body" : "I'm fine with the latest suggestion.\r\nI would like to add a pointer in the documentation on this behavior too.\r\nAnd possibly raise a warning?\r\nWhat about the test case btw, how should that one behave?\r\n",
        "createdAt" : "2018-07-30T11:48:26Z",
        "updatedAt" : "2018-08-01T07:51:04Z",
        "lastEditedBy" : "f4bf0e37-d96c-4512-b13f-8103f3086b04",
        "tags" : [
        ]
      },
      {
        "id" : "60dde338-a3b6-440f-b286-d781e339f210",
        "parentId" : "ad1f9982-9332-40b8-84a4-1ab6d2cd0614",
        "authorId" : "adfabdeb-0c21-4540-82ed-329783255f82",
        "body" : "In terms of the test, I would leave it as is. I think we get more value from testing the return in the case where this works rather than trying to simulate / ensure the permission failure.\r\n\r\nAnd yes, please do include this in the documentation that the permission is required for that value to be returned.\r\n\r\nPersonally I'd say don't add a warning for this case. In my mind warnings should always be indicating something that you should change / fix. We're effectively taking the line that this is an optional addition and it's perfectly fine to use the module without this permission (as long as you don't need the alias). Assuming someone is expecting to use the alias then it's will fail pretty obviously so I don't know that adding a warning really helps in this case. this ",
        "createdAt" : "2018-07-31T07:19:26Z",
        "updatedAt" : "2018-08-01T07:51:04Z",
        "lastEditedBy" : "adfabdeb-0c21-4540-82ed-329783255f82",
        "tags" : [
        ]
      },
      {
        "id" : "3aed87fd-34a7-4e25-b860-f8b062204e7c",
        "parentId" : "ad1f9982-9332-40b8-84a4-1ab6d2cd0614",
        "authorId" : "06ab4cf8-4a18-478e-93ee-69929f4bffc6",
        "body" : "I'd be ok with skipping an integration test for this, and adding the CI perms so the happy path (when the module does have permissions) is tested. Agreed w/ @orthanc about not adding a warning. ",
        "createdAt" : "2018-07-31T14:40:25Z",
        "updatedAt" : "2018-08-01T07:51:04Z",
        "lastEditedBy" : "06ab4cf8-4a18-478e-93ee-69929f4bffc6",
        "tags" : [
        ]
      }
    ],
    "commit" : "0301762fad093dbc4b21f5864b18ce0ad6e24d2d",
    "line" : 44,
    "diffHunk" : "@@ -1,1 +90,94 @@        # If an alias is defined it will be returned otherwise a blank string is filled in as account_alias.\n        # see https://docs.aws.amazon.com/cli/latest/reference/iam/list-account-aliases.html#output\n        response = iam_client.list_account_aliases()\n        if response and response['AccountAliases']:\n            caller_facts['account_alias'] = response['AccountAliases'][0]"
  }
]