[
  {
    "id" : "3fd97eae-e59a-4e57-81c8-9e79a8a62604",
    "prId" : 20561,
    "prUrl" : "https://github.com/ansible/ansible/pull/20561#pullrequestreview-18026673",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7a6c6e62-70c0-4e79-88c7-cfab61bd357d",
        "parentId" : null,
        "authorId" : "827fe88a-e16d-4f84-ab3a-66404851ba6c",
        "body" : "wouldn't this still fail if `existing_definitions_in_family = []` ?\r\nI think it'd be safer to keep it as `(not existing_definitions_in_family or len(existing_definitions_in_family) == 0) and revision != 1`  for the `if` and \r\n\r\n`existing_definitions_in_family and len(existing_definitions_in_family)>0 and ...` for the `elif` condition",
        "createdAt" : "2017-01-23T19:07:44Z",
        "updatedAt" : "2017-01-23T19:09:01Z",
        "lastEditedBy" : "827fe88a-e16d-4f84-ab3a-66404851ba6c",
        "tags" : [
        ]
      },
      {
        "id" : "37733601-13aa-4769-a9bf-be00f17329c8",
        "parentId" : "7a6c6e62-70c0-4e79-88c7-cfab61bd357d",
        "authorId" : "2ab05ff6-d3ea-4ed2-9e90-40861dc60270",
        "body" : "Problem is access to last element of empty array ```existing_definitions_in_family[-1]```. Array truthiness check ensures array is not empty:\r\n```\r\nIn [1]: bool([])\r\nOut[1]: False\r\n\r\nIn [2]: bool([1])\r\nOut[2]: True\r\n```",
        "createdAt" : "2017-01-23T19:18:13Z",
        "updatedAt" : "2017-01-23T19:18:13Z",
        "lastEditedBy" : "2ab05ff6-d3ea-4ed2-9e90-40861dc60270",
        "tags" : [
        ]
      },
      {
        "id" : "4955d083-a269-4d25-889f-8aeb3cfa3e7d",
        "parentId" : "7a6c6e62-70c0-4e79-88c7-cfab61bd357d",
        "authorId" : "827fe88a-e16d-4f84-ab3a-66404851ba6c",
        "body" : "I just learned something :) looks good !",
        "createdAt" : "2017-01-23T21:13:51Z",
        "updatedAt" : "2017-01-23T21:13:51Z",
        "lastEditedBy" : "827fe88a-e16d-4f84-ab3a-66404851ba6c",
        "tags" : [
        ]
      },
      {
        "id" : "7a7674d8-35e4-4ccb-a0e6-93b1e08e7293",
        "parentId" : "7a6c6e62-70c0-4e79-88c7-cfab61bd357d",
        "authorId" : "2ab05ff6-d3ea-4ed2-9e90-40861dc60270",
        "body" : "heh, glad to be helpful :)",
        "createdAt" : "2017-01-23T21:16:01Z",
        "updatedAt" : "2017-01-23T21:16:01Z",
        "lastEditedBy" : "2ab05ff6-d3ea-4ed2-9e90-40861dc60270",
        "tags" : [
        ]
      }
    ],
    "commit" : "4e2bce23d59c958e4fa72e2c2006cb0a3b399aec",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +258,262 @@                if not existing_definitions_in_family and revision != 1:\n                    module.fail_json(msg=\"You have specified a revision of %d but a created revision would be 1\" % revision)\n                elif existing_definitions_in_family and existing_definitions_in_family[-1]['revision'] + 1 != revision:\n                    module.fail_json(msg=\"You have specified a revision of %d but a created revision would be %d\" % (revision, existing_definitions_in_family[-1]['revision'] + 1))\n        else:"
  },
  {
    "id" : "ca327819-e251-4c5d-820d-63ec0048dc35",
    "prId" : 34381,
    "prUrl" : "https://github.com/ansible/ansible/pull/34381#pullrequestreview-107998347",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "202defb8-452a-4666-a31d-dfabee71886d",
        "parentId" : null,
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "Might want to cast port_mapping['hostPort'] to an int just in case they passed a string. At some point we could probably update this module to use argspec suboptions so we could ensure the ports are integers before the module uses them.",
        "createdAt" : "2018-03-28T21:23:12Z",
        "updatedAt" : "2018-04-02T23:27:49Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "6381210b-e7fb-4e16-b5a6-1c5667762dd2",
        "parentId" : "202defb8-452a-4666-a31d-dfabee71886d",
        "authorId" : "183d9a20-6a5e-4432-9fe9-9fd6fe9514fb",
        "body" : "That's actually done in the three preceding lines :)",
        "createdAt" : "2018-03-29T01:57:43Z",
        "updatedAt" : "2018-04-02T23:27:49Z",
        "lastEditedBy" : "183d9a20-6a5e-4432-9fe9-9fd6fe9514fb",
        "tags" : [
        ]
      },
      {
        "id" : "62d8668e-5d77-4536-ad3a-24d71fd3d492",
        "parentId" : "202defb8-452a-4666-a31d-dfabee71886d",
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "Oops. :)",
        "createdAt" : "2018-03-29T10:31:02Z",
        "updatedAt" : "2018-04-02T23:27:49Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      }
    ],
    "commit" : "415b4b80eb563c53c32eb887d3001fc1628e324a",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +169,173 @@                            port_mapping[port] = int(port_mapping[port])\n                    if network_mode == 'awsvpc' and 'hostPort' in port_mapping:\n                        if port_mapping['hostPort'] != port_mapping.get('containerPort'):\n                            self.module.fail_json(msg=\"In awsvpc network mode, host port must be set to the same as \"\n                                                  \"container port or not be set\")"
  }
]