[
  {
    "id" : "76e473cc-173e-4641-b9b0-3026faa3090c",
    "prId" : 19491,
    "prUrl" : "https://github.com/ansible/ansible/pull/19491#pullrequestreview-20406406",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "397b778d-0334-4bb6-9eb1-9823a740c8ca",
        "parentId" : null,
        "authorId" : "06ab4cf8-4a18-478e-93ee-69929f4bffc6",
        "body" : "It may be more obvious to name this parameter something like `public` as a boolean, but I'd be worried about AWS adding some third scheme meaning we have to obsolete the boolean and use their new value. No change required here, but would like your thoughts. ",
        "createdAt" : "2016-12-30T17:00:00Z",
        "updatedAt" : "2017-05-31T10:48:38Z",
        "lastEditedBy" : "06ab4cf8-4a18-478e-93ee-69929f4bffc6",
        "tags" : [
        ]
      },
      {
        "id" : "97e184a0-c506-449e-8315-f93987715313",
        "parentId" : "397b778d-0334-4bb6-9eb1-9823a740c8ca",
        "authorId" : "8e448afa-36a6-4325-b7c1-0522cb01977c",
        "body" : "I agree.  Chances of AWS creating a third schema are not low.\r\n\r\nAlso, with this scheme, at least we're following AWS API convention.",
        "createdAt" : "2017-02-07T00:40:55Z",
        "updatedAt" : "2017-05-31T10:48:38Z",
        "lastEditedBy" : "8e448afa-36a6-4325-b7c1-0522cb01977c",
        "tags" : [
        ]
      }
    ],
    "commit" : "0ba17a435e239796b5f28c26633915d99fc05a63",
    "line" : 82,
    "diffHunk" : "@@ -1,1 +80,84 @@    required: false\n    default: []\n  scheme:\n    description:\n      - Internet-facing or internal load balancer. An ELB scheme can not be modified after creation."
  },
  {
    "id" : "c592db82-0d5b-4237-b214-85e218ea23cf",
    "prId" : 19491,
    "prUrl" : "https://github.com/ansible/ansible/pull/19491#pullrequestreview-38114225",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e9e1b0ed-f6ba-4237-b7b6-d64d0f32e3e7",
        "parentId" : null,
        "authorId" : "183d9a20-6a5e-4432-9fe9-9fd6fe9514fb",
        "body" : "you appear to have gone SnakeCase from below here.",
        "createdAt" : "2017-05-15T12:31:53Z",
        "updatedAt" : "2017-05-31T10:48:38Z",
        "lastEditedBy" : "183d9a20-6a5e-4432-9fe9-9fd6fe9514fb",
        "tags" : [
        ]
      },
      {
        "id" : "3f887101-36c8-42dc-8163-dc742523e1f8",
        "parentId" : "e9e1b0ed-f6ba-4237-b7b6-d64d0f32e3e7",
        "authorId" : "8e448afa-36a6-4325-b7c1-0522cb01977c",
        "body" : "This is because it's passing everything directly to boto3 for listeners. I've seen similar in other modules",
        "createdAt" : "2017-05-15T13:27:05Z",
        "updatedAt" : "2017-05-31T10:48:38Z",
        "lastEditedBy" : "8e448afa-36a6-4325-b7c1-0522cb01977c",
        "tags" : [
        ]
      }
    ],
    "commit" : "0ba17a435e239796b5f28c26633915d99fc05a63",
    "line" : 159,
    "diffHunk" : "@@ -1,1 +157,161 @@     - sg-12345678\n    scheme: internal\n    listeners:\n      - Protocol: HTTPS\n        Port: 443"
  },
  {
    "id" : "a3ff3db0-9e3a-4ec3-986a-f77fb7acdd54",
    "prId" : 19491,
    "prUrl" : "https://github.com/ansible/ansible/pull/19491#pullrequestreview-38114821",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "992d6a4f-e4cd-406f-b5aa-9b40809437ba",
        "parentId" : null,
        "authorId" : "183d9a20-6a5e-4432-9fe9-9fd6fe9514fb",
        "body" : "Can `state` default to `present`? I usually expect this, I'm not sure if the flaw is with me or not :)",
        "createdAt" : "2017-05-15T12:58:07Z",
        "updatedAt" : "2017-05-31T10:48:38Z",
        "lastEditedBy" : "183d9a20-6a5e-4432-9fe9-9fd6fe9514fb",
        "tags" : [
        ]
      },
      {
        "id" : "1b1ec77c-5d6d-45cb-8f28-948a49a0d256",
        "parentId" : "992d6a4f-e4cd-406f-b5aa-9b40809437ba",
        "authorId" : "8e448afa-36a6-4325-b7c1-0522cb01977c",
        "body" : "I've been told by the core team previously that state should always be explicit. ",
        "createdAt" : "2017-05-15T13:29:18Z",
        "updatedAt" : "2017-05-31T10:48:38Z",
        "lastEditedBy" : "8e448afa-36a6-4325-b7c1-0522cb01977c",
        "tags" : [
        ]
      }
    ],
    "commit" : "0ba17a435e239796b5f28c26633915d99fc05a63",
    "line" : 805,
    "diffHunk" : "@@ -1,1 +803,807 @@            security_groups=dict(required=False, type='list'),\n            scheme=dict(required=False, default='internet-facing', choices=['internet-facing', 'internal']),\n            state=dict(required=True, choices=['present', 'absent'], type='str'),\n            tags=dict(required=False, default={}, type='dict'),\n            wait_timeout=dict(required=False, type='int'),"
  },
  {
    "id" : "2269cd6f-59ef-4b7a-b2f2-2d1b63fa2bed",
    "prId" : 19491,
    "prUrl" : "https://github.com/ansible/ansible/pull/19491#pullrequestreview-38907807",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5e9bc0bb-417d-46c6-80d0-55b89d3445b3",
        "parentId" : null,
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "Not a blocker, but do we want a purge_listeners option? To do any modification to the ELB all the listeners must be specified each time.",
        "createdAt" : "2017-05-15T18:26:11Z",
        "updatedAt" : "2017-05-31T10:48:38Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "dde0e8a1-e456-42a1-8dfe-22b7b9fa3b2b",
        "parentId" : "5e9bc0bb-417d-46c6-80d0-55b89d3445b3",
        "authorId" : "8e448afa-36a6-4325-b7c1-0522cb01977c",
        "body" : "Would prefer to do this later",
        "createdAt" : "2017-05-18T11:17:41Z",
        "updatedAt" : "2017-05-31T10:48:38Z",
        "lastEditedBy" : "8e448afa-36a6-4325-b7c1-0522cb01977c",
        "tags" : [
        ]
      }
    ],
    "commit" : "0ba17a435e239796b5f28c26633915d99fc05a63",
    "line" : 744,
    "diffHunk" : "@@ -1,1 +742,746 @@    # Now, if required, set ELB listeners. Use try statement here so we can remove the ELB if this stage fails\n    try:\n        listener_changed = create_or_update_elb_listeners(connection, module, elb)\n        if listener_changed:\n            changed = True"
  },
  {
    "id" : "a5754a63-324b-427c-9558-44f78dfd92a8",
    "prId" : 25650,
    "prUrl" : "https://github.com/ansible/ansible/pull/25650#pullrequestreview-43910874",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7961fbba-4e8f-440a-acf0-f2714f8fa4e3",
        "parentId" : null,
        "authorId" : "183d9a20-6a5e-4432-9fe9-9fd6fe9514fb",
        "body" : "you could just use `get_elb_listeners` for this section of code, it seems to be identical.",
        "createdAt" : "2017-06-14T03:10:20Z",
        "updatedAt" : "2017-07-14T02:15:22Z",
        "lastEditedBy" : "183d9a20-6a5e-4432-9fe9-9fd6fe9514fb",
        "tags" : [
        ]
      },
      {
        "id" : "00018ea2-0319-427c-a2d5-d93f53bd0cd7",
        "parentId" : "7961fbba-4e8f-440a-acf0-f2714f8fa4e3",
        "authorId" : "8e448afa-36a6-4325-b7c1-0522cb01977c",
        "body" : "`get_elb_listeners` gets all listeners for a particular ELB (based on ARN).\r\n\r\n`get_listener` gets a particular listener from a list of listeners based on matching the listener port.",
        "createdAt" : "2017-06-14T04:07:34Z",
        "updatedAt" : "2017-07-14T02:15:22Z",
        "lastEditedBy" : "8e448afa-36a6-4325-b7c1-0522cb01977c",
        "tags" : [
        ]
      }
    ],
    "commit" : "b7f5fe1d27f0e3612877a23d8dfb1d7349f37011",
    "line" : 118,
    "diffHunk" : "@@ -1,1 +433,437 @@    \"\"\"\n\n    try:\n        listener_paginator = connection.get_paginator('describe_listeners')\n        listeners = (listener_paginator.paginate(LoadBalancerArn=elb_arn).build_full_result())['Listeners']"
  },
  {
    "id" : "75669035-b279-40fc-b539-85d0fa186893",
    "prId" : 25650,
    "prUrl" : "https://github.com/ansible/ansible/pull/25650#pullrequestreview-43911193",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "77e26e2d-0c1a-41e3-a220-4f18d2bbe23d",
        "parentId" : null,
        "authorId" : "183d9a20-6a5e-4432-9fe9-9fd6fe9514fb",
        "body" : "I think I'd handle purge_listeners at the consumer end of this method. Just seems easier than passing it in and handling it here. But not a blocker",
        "createdAt" : "2017-06-14T03:16:19Z",
        "updatedAt" : "2017-07-14T02:15:22Z",
        "lastEditedBy" : "183d9a20-6a5e-4432-9fe9-9fd6fe9514fb",
        "tags" : [
        ]
      },
      {
        "id" : "a01b90f5-1e5c-490c-98c1-6fe5f514cb07",
        "parentId" : "77e26e2d-0c1a-41e3-a220-4f18d2bbe23d",
        "authorId" : "8e448afa-36a6-4325-b7c1-0522cb01977c",
        "body" : "Just copying similar functionality from the compare_aws_tags helper function",
        "createdAt" : "2017-06-14T04:11:32Z",
        "updatedAt" : "2017-07-14T02:15:22Z",
        "lastEditedBy" : "8e448afa-36a6-4325-b7c1-0522cb01977c",
        "tags" : [
        ]
      }
    ],
    "commit" : "b7f5fe1d27f0e3612877a23d8dfb1d7349f37011",
    "line" : 291,
    "diffHunk" : "@@ -1,1 +614,618 @@\n\ndef compare_listeners(connection, module, current_listeners, new_listeners, purge_listeners):\n    \"\"\"\n    Compare listeners and return listeners to add, listeners to modify and listeners to remove"
  },
  {
    "id" : "32b74c04-1fcf-42b3-9714-15b6c9835bd0",
    "prId" : 25650,
    "prUrl" : "https://github.com/ansible/ansible/pull/25650#pullrequestreview-46162086",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0f063e85-3015-4e49-ac66-a9aec7513d13",
        "parentId" : null,
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "Since listeners defaults to None and ensure_listeners_default_action_has_arn() will be iterated over we might either want to change the default to an empty list or have a check in ensure_listeners_default_action_has_arn() or have the last argument here be `module.params.get(\"listeners\") or []`",
        "createdAt" : "2017-06-19T19:58:57Z",
        "updatedAt" : "2017-07-14T02:15:22Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "2524e381-93b8-4bbb-acfa-63d2ac38d147",
        "parentId" : "0f063e85-3015-4e49-ac66-a9aec7513d13",
        "authorId" : "8e448afa-36a6-4325-b7c1-0522cb01977c",
        "body" : "@s-hertel done",
        "createdAt" : "2017-06-26T01:43:43Z",
        "updatedAt" : "2017-07-14T02:15:22Z",
        "lastEditedBy" : "8e448afa-36a6-4325-b7c1-0522cb01977c",
        "tags" : [
        ]
      }
    ],
    "commit" : "b7f5fe1d27f0e3612877a23d8dfb1d7349f37011",
    "line" : 385,
    "diffHunk" : "@@ -1,1 +707,711 @@    listener_changed = False\n    # Ensure listeners are using Target Group ARN not name\n    listeners = ensure_listeners_default_action_has_arn(connection, module, module.params.get(\"listeners\"))\n    purge_listeners = module.params.get(\"purge_listeners\")\n"
  },
  {
    "id" : "b2d1bbbe-88f1-47df-8d0c-1ecea65f26b3",
    "prId" : 25650,
    "prUrl" : "https://github.com/ansible/ansible/pull/25650#pullrequestreview-49950977",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5454b234-1df0-46fa-9bb7-f2fd706a0497",
        "parentId" : null,
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "Still failing for me when listeners is not specified. Should this default to an empty list?",
        "createdAt" : "2017-06-26T14:52:18Z",
        "updatedAt" : "2017-07-14T02:15:22Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "69f5e5c6-6206-4966-915e-e5eb9a8540e1",
        "parentId" : "5454b234-1df0-46fa-9bb7-f2fd706a0497",
        "authorId" : "8e448afa-36a6-4325-b7c1-0522cb01977c",
        "body" : "Can't default to empty list otherwise it'll remove existing listeners if none are specified.  I'll have another go.  Can you paste your task used to test?",
        "createdAt" : "2017-07-05T12:46:34Z",
        "updatedAt" : "2017-07-14T02:15:22Z",
        "lastEditedBy" : "8e448afa-36a6-4325-b7c1-0522cb01977c",
        "tags" : [
        ]
      },
      {
        "id" : "9ce8a3da-18be-4bfb-a73f-8dc85ea43e45",
        "parentId" : "5454b234-1df0-46fa-9bb7-f2fd706a0497",
        "authorId" : "8e448afa-36a6-4325-b7c1-0522cb01977c",
        "body" : "@s-hertel see above.  Don't want to hassle you but i want to fix this up and get it merged because it's a pretty big change that i want in before 2.4 ships",
        "createdAt" : "2017-07-10T12:39:09Z",
        "updatedAt" : "2017-07-14T02:15:22Z",
        "lastEditedBy" : "8e448afa-36a6-4325-b7c1-0522cb01977c",
        "tags" : [
        ]
      },
      {
        "id" : "e9b886ae-a92b-4b20-95e2-88792462ad22",
        "parentId" : "5454b234-1df0-46fa-9bb7-f2fd706a0497",
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "Sorry, was out all of last week. I'm looking for my reproducer right now.",
        "createdAt" : "2017-07-10T17:45:51Z",
        "updatedAt" : "2017-07-14T02:15:22Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "a6f376cf-1e50-41a2-882e-2b87790c74d4",
        "parentId" : "5454b234-1df0-46fa-9bb7-f2fd706a0497",
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "Here is my reproducer, consistently fails:\r\n```\r\n---\r\n- hosts: localhost\r\n  connection: local\r\n  vars:\r\n    elb_app_lb_name: \"{{ elb_app_lb_name }}\"\r\n    tg_name: \"{{ tg_name }}\"\r\n  tasks:\r\n    - name: create an application lb\r\n      elb_application_lb:\r\n        state: present\r\n        name: \"{{ elb_app_lb_name }}\"\r\n        subnets:\r\n          - subnet-17bbda4c\r\n          - subnet-5c7ecc60\r\n        security_groups: sg-29d13055\r\n        listeners:\r\n          - Protocol: HTTP\r\n            Port: 80\r\n            DefaultActions:\r\n              - 'Type': 'forward'\r\n                'TargetGroupName': '{{ tg_name }}'\r\n    - name: update subnets\r\n      elb_application_lb:\r\n        state: present\r\n        name: \"{{ elb_app_lb_name }}\"\r\n        subnets:\r\n          - subnet-cbdf56ae\r\n          - subnet-17bbda4c\r\n          - subnet-5c7ecc60\r\n        security_groups: sg-29d13055\r\n```\r\nTraceback:\r\n```\r\nTASK [update subnets] **************************************************************************************************\r\ntask path: /Users/shertel/Workspace/ansible/my_playbooks/elb_application_lb/iterate_over_NoneType.yml:22\r\nUsing module file /Users/shertel/Workspace/ansible/lib/ansible/modules/cloud/amazon/elb_application_lb.py\r\n<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: shertel\r\n<127.0.0.1> EXEC /bin/sh -c 'echo ~ && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /Users/shertel/.ansible/tmp/ansible-tmp-1499709521.38-260285283136193 `\" && echo ansible-tmp-1499709521.38-260285283136193=\"` echo /Users/shertel/.ansible/tmp/ansible-tmp-1499709521.38-260285283136193 `\" ) && sleep 0'\r\n<127.0.0.1> PUT /var/folders/by/k8_fbl593dlctgqmwq5wzl2c0000gn/T/tmpiiu8JI TO /Users/shertel/.ansible/tmp/ansible-tmp-1499709521.38-260285283136193/elb_application_lb.py\r\n<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/shertel/.ansible/tmp/ansible-tmp-1499709521.38-260285283136193/ /Users/shertel/.ansible/tmp/ansible-tmp-1499709521.38-260285283136193/elb_application_lb.py && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c '/Users/shertel/Workspace/ansible/venv/python2.7/bin/python /Users/shertel/.ansible/tmp/ansible-tmp-1499709521.38-260285283136193/elb_application_lb.py; rm -rf \"/Users/shertel/.ansible/tmp/ansible-tmp-1499709521.38-260285283136193/\" > /dev/null 2>&1 && sleep 0'\r\nThe full traceback is:\r\nTraceback (most recent call last):\r\n\r\n\r\n  File \"/var/folders/by/k8_fbl593dlctgqmwq5wzl2c0000gn/T/ansible_CNtIaB/ansible_module_elb_application_lb.py\", line 1005, in <module>\r\n    main()\r\n  File \"/var/folders/by/k8_fbl593dlctgqmwq5wzl2c0000gn/T/ansible_CNtIaB/ansible_module_elb_application_lb.py\", line 1000, in main\r\n    create_or_update_elb(connection, connection_ec2, module)\r\n  File \"/var/folders/by/k8_fbl593dlctgqmwq5wzl2c0000gn/T/ansible_CNtIaB/ansible_module_elb_application_lb.py\", line 895, in create_or_update_elb\r\n    listener_changed = create_or_update_elb_listeners(connection, module, elb)\r\n  File \"/var/folders/by/k8_fbl593dlctgqmwq5wzl2c0000gn/T/ansible_CNtIaB/ansible_module_elb_application_lb.py\", line 704, in create_or_update_elb_listeners\r\n    listeners = ensure_listeners_default_action_has_arn(connection, module, module.params.get(\"listeners\"))\r\n  File \"/var/folders/by/k8_fbl593dlctgqmwq5wzl2c0000gn/T/ansible_CNtIaB/ansible_module_elb_application_lb.py\", line 487, in ensure_listeners_default_action_has_arn\r\n    for listener in listeners:\r\nTypeError: 'NoneType' object is not iterable\r\n\r\nfatal: [localhost]: FAILED! => {\r\n    \"changed\": false,\r\n    \"failed\": true,\r\n    \"module_stderr\": \"Traceback (most recent call last):\\n  File \\\"/var/folders/by/k8_fbl593dlctgqmwq5wzl2c0000gn/T/ansible_CNtIaB/ansible_module_elb_application_lb.py\\\", line 1005, in <module>\\n    main()\\n  File \\\"/var/folders/by/k8_fbl593dlctgqmwq5wzl2c0000gn/T/ansible_CNtIaB/ansible_module_elb_application_lb.py\\\", line 1000, in main\\n    create_or_update_elb(connection, connection_ec2, module)\\n  File \\\"/var/folders/by/k8_fbl593dlctgqmwq5wzl2c0000gn/T/ansible_CNtIaB/ansible_module_elb_application_lb.py\\\", line 895, in create_or_update_elb\\n    listener_changed = create_or_update_elb_listeners(connection, module, elb)\\n  File \\\"/var/folders/by/k8_fbl593dlctgqmwq5wzl2c0000gn/T/ansible_CNtIaB/ansible_module_elb_application_lb.py\\\", line 704, in create_or_update_elb_listeners\\n    listeners = ensure_listeners_default_action_has_arn(connection, module, module.params.get(\\\"listeners\\\"))\\n  File \\\"/var/folders/by/k8_fbl593dlctgqmwq5wzl2c0000gn/T/ansible_CNtIaB/ansible_module_elb_application_lb.py\\\", line 487, in ensure_listeners_default_action_has_arn\\n    for listener in listeners:\\nTypeError: 'NoneType' object is not iterable\\n\",\r\n    \"module_stdout\": \"\",\r\n    \"msg\": \"MODULE FAILURE\",\r\n    \"rc\": 0\r\n}\r\n\r\nPLAY RECAP *************************************************************************************************************\r\nlocalhost                  : ok=1    changed=1    unreachable=0    failed=1\r\n```",
        "createdAt" : "2017-07-10T17:59:00Z",
        "updatedAt" : "2017-07-14T02:15:22Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "75f69f57-c5df-4029-9d04-15175e590646",
        "parentId" : "5454b234-1df0-46fa-9bb7-f2fd706a0497",
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "This is what I think fixes it:\r\n```\r\ndiff --git a/lib/ansible/modules/cloud/amazon/elb_application_lb.py b/lib/ansible/modules/cloud/amazon/elb_application_lb.py\r\nindex 046dbc5468..92ccd6997c 100755\r\n--- a/lib/ansible/modules/cloud/amazon/elb_application_lb.py\r\n+++ b/lib/ansible/modules/cloud/amazon/elb_application_lb.py\r\n@@ -701,7 +701,7 @@ def create_or_update_elb_listeners(connection, module, elb):\r\n\r\n     listener_changed = False\r\n     # Ensure listeners are using Target Group ARN not name\r\n-    listeners = ensure_listeners_default_action_has_arn(connection, module, module.params.get(\"listeners\"))\r\n+    listeners = ensure_listeners_default_action_has_arn(connection, module, module.params.get(\"listeners\") or [])\r\n     purge_listeners = module.params.get(\"purge_listeners\")\r\n\r\n     # Does the ELB have any listeners exist?\r\n```",
        "createdAt" : "2017-07-10T18:02:08Z",
        "updatedAt" : "2017-07-14T02:15:22Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "7ae85f8f-7019-4890-9c24-f70d2d3dbac7",
        "parentId" : "5454b234-1df0-46fa-9bb7-f2fd706a0497",
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "Could also add a check in ensure_listeners_default action_has_arn() before trying to iterate.",
        "createdAt" : "2017-07-10T18:03:29Z",
        "updatedAt" : "2017-07-14T02:15:22Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "d2dfb1a9-9139-4f5e-9f9e-35013f36d802",
        "parentId" : "5454b234-1df0-46fa-9bb7-f2fd706a0497",
        "authorId" : "8e448afa-36a6-4325-b7c1-0522cb01977c",
        "body" : "@s-hertel i've added a check in the method itself just in case it gets calls from somewhere else in future and people forget the `or []`.",
        "createdAt" : "2017-07-14T02:16:28Z",
        "updatedAt" : "2017-07-14T02:16:28Z",
        "lastEditedBy" : "8e448afa-36a6-4325-b7c1-0522cb01977c",
        "tags" : [
        ]
      }
    ],
    "commit" : "b7f5fe1d27f0e3612877a23d8dfb1d7349f37011",
    "line" : 642,
    "diffHunk" : "@@ -1,1 +957,961 @@            deletion_protection=dict(default=False, type='bool'),\n            idle_timeout=dict(type='int'),\n            listeners=dict(type='list'),\n            name=dict(required=True, type='str'),\n            purge_listeners=dict(default=True, type='bool'),"
  },
  {
    "id" : "3af465e3-ecf8-44fa-aa44-2c4b0996252e",
    "prId" : 27333,
    "prUrl" : "https://github.com/ansible/ansible/pull/27333#pullrequestreview-52988035",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "754ac12a-e6d7-4998-bfa2-6a159b8f7f85",
        "parentId" : null,
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "Looks good! On line [744](https://github.com/ansible/ansible/pull/27333/files#diff-a1bcebad578f0e6bfd841049d327a587L744) can you please also fix that to be deepcopy(listeners) (so the invocation gets shown correctly)? \r\nAnd lines [691](https://github.com/ansible/ansible/pull/27333/files#diff-a1bcebad578f0e6bfd841049d327a587L691) and 692 need to be set equal for new_rule, not current_rule. After that is appears rules are being updated correctly for me. Thanks for working on this.",
        "createdAt" : "2017-07-28T13:32:23Z",
        "updatedAt" : "2017-07-31T09:15:37Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "a0b53537-ac11-4f05-9307-f0d73c0c1a0e",
        "parentId" : "754ac12a-e6d7-4998-bfa2-6a159b8f7f85",
        "authorId" : "a57e1053-deb1-4675-8e46-49c9ec5b37ce",
        "body" : "Good spot for lines 691 & 692 - I'll fix this.\r\n\r\nHope I'm not being dim, but what does \"so the invocation gets shown correctly\" refer to? The change you suggest for line 744 seems harmless but I don't understand the reason for it at the moment.\r\n\r\nThanks!",
        "createdAt" : "2017-07-28T13:45:09Z",
        "updatedAt" : "2017-07-31T09:15:37Z",
        "lastEditedBy" : "a57e1053-deb1-4675-8e46-49c9ec5b37ce",
        "tags" : [
        ]
      },
      {
        "id" : "3a7d27e8-6d9f-4c73-8710-6d4bdc4695f7",
        "parentId" : "754ac12a-e6d7-4998-bfa2-6a159b8f7f85",
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "When a task is run with extra verbosity it should display the arg spec the module used after the 'invocation' key (run playbook with -vvv). I could see that somewhere that actual dictionary was being modified, rather than a copy of it. \r\nI thought I kept running the wrong playbook or was doing something wrong syntactically because it was deleting my rules:\r\n```\r\n...\r\n            \"listeners\": [\r\n                {\r\n                    \"DefaultActions\": [\r\n                        {\r\n                            \"TargetGroupArn\": \"arn:aws:elasticloadbalancing:us-east-1:448830907657:targetgroup/sherteltg/bd83c5c780de26d7\",\r\n                            \"Type\": \"forward\"\r\n                        }\r\n                    ],\r\n                    \"ListenerArn\": \"arn:aws:elasticloadbalancing:us-east-1:448830907657:listener/app/shertel-application-lb/365334adfd1f3606/9118ad2fccc38cde\",\r\n                    \"Port\": 80,\r\n                    \"Protocol\": \"HTTP\",\r\n                    \"Rules\": []\r\n                }\r\n            ],\r\n```",
        "createdAt" : "2017-07-28T17:16:13Z",
        "updatedAt" : "2017-07-31T09:15:37Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      }
    ],
    "commit" : "d19109720124a562f36b365697885bebc33d6506",
    "line" : 16,
    "diffHunk" : "@@ -1,1 +720,724 @@        try:\n            listener_to_add['LoadBalancerArn'] = elb['LoadBalancerArn']\n            # Rules is not a valid parameter for create_listener\n            listener_to_add.pop('Rules')\n            response = connection.create_listener(**listener_to_add)"
  }
]