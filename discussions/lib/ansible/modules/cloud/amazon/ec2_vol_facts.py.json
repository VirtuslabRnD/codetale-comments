[
  {
    "id" : "3ef825eb-dc38-4062-87fe-f9d55f0f24d7",
    "prId" : 43348,
    "prUrl" : "https://github.com/ansible/ansible/pull/43348#pullrequestreview-141164816",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bb868bdb-259f-47b7-87d9-f45fa5005061",
        "parentId" : null,
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "This module should handle BotoCoreError and ClientError. ProfileNotFound should be handled by boto3_conn and doesn't need to be imported by the module.",
        "createdAt" : "2018-08-17T18:07:34Z",
        "updatedAt" : "2018-08-31T01:26:15Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      }
    ],
    "commit" : "a8df823a132e5bdf30964af6c0def852d5ae2b0f",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +61,65 @@\ntry:\n    from botocore.exceptions import ClientError\nexcept ImportError:\n    pass  # caught by imported HAS_BOTO3"
  },
  {
    "id" : "b3217e95-4568-4e8f-be91-d379cafb36d6",
    "prId" : 43348,
    "prUrl" : "https://github.com/ansible/ansible/pull/43348#pullrequestreview-148524085",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "38d29af2-89a9-4137-86c3-312664dc733b",
        "parentId" : null,
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "You could update this module to AnsibleAWSModule if you wanted. That would simplify correcting the exception handling and eliminate the need to use/import all of:\r\n`connect_to_aws`, `ec2_argument_spec`, `get_aws_connection_info`, `boto3_conn`, and `HAS_BOTO3`\r\n\r\nDoing this would end up looking something like:\r\n```\r\nfrom ansible.module_utils.aws.core import AnsibleAWSModule\r\n...\r\nmodule = AnsibleAWSModule(argument_spec=argument_spec)\r\nconnection = module.client('ec2')\r\n```\r\n\r\nAnd your exception handling would look like:\r\n```\r\ntry:\r\n    connection.describe_volumes(Filters=ansible_dict_to_boto3_filter_list(sanitized_filters))\r\nexcept (BotoCoreError, ClientError) as e:\r\n    module.fail_json_aws(e, msg=\"Unable to describe volumes with filters {0}\".format(sanitized_filters))\r\n```\r\n\r\nOtherwise you end up having a mess handling the different cases of what attributes exist for what exception because they don't inherit the same properties (such as, you should include e.message and e.response if they exist, but e.message does not exist on Python 3 and BotoCoreErrors never have a response attribute).",
        "createdAt" : "2018-08-17T18:09:58Z",
        "updatedAt" : "2018-08-31T01:26:15Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "c933c872-262b-4304-9a27-2f160474b39e",
        "parentId" : "38d29af2-89a9-4137-86c3-312664dc733b",
        "authorId" : "10bfaeb1-e795-4017-b4b6-541bfc34b4e7",
        "body" : "I didn't manage to get value for region in this case and it has to be presented in module output.",
        "createdAt" : "2018-08-21T10:48:58Z",
        "updatedAt" : "2018-08-31T01:26:15Z",
        "lastEditedBy" : "10bfaeb1-e795-4017-b4b6-541bfc34b4e7",
        "tags" : [
        ]
      },
      {
        "id" : "7c0a2141-e636-4d54-af84-b023d2018110",
        "parentId" : "38d29af2-89a9-4137-86c3-312664dc733b",
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "Okay, no problem either way. You could still get region via get_aws_connection_info, which is how AnsibleAWSModule gets it too.",
        "createdAt" : "2018-08-22T14:58:08Z",
        "updatedAt" : "2018-08-31T01:26:15Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      }
    ],
    "commit" : "a8df823a132e5bdf30964af6c0def852d5ae2b0f",
    "line" : 22,
    "diffHunk" : "@@ -1,1 +66,70 @@\nfrom ansible.module_utils.basic import AnsibleModule\nfrom ansible.module_utils.ec2 import connect_to_aws, ec2_argument_spec, get_aws_connection_info, boto3_conn, HAS_BOTO3, boto3_tag_list_to_ansible_dict\nfrom ansible.module_utils.ec2 import ansible_dict_to_boto3_filter_list, camel_dict_to_snake_dict\nfrom ansible.module_utils._text import to_native"
  }
]