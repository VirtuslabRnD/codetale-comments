[
  {
    "id" : "fe1854ad-4d3a-48fb-8c1b-ac4bb34427d5",
    "prId" : 33984,
    "prUrl" : "https://github.com/ansible/ansible/pull/33984#pullrequestreview-179257085",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a238fdf7-db90-4816-9188-193280fba2c3",
        "parentId" : null,
        "authorId" : "e4d896b9-fcb5-4c91-92b7-54482221e051",
        "body" : "Please include the `monitoring` option as well. This will allow users to create droplets with [enhanced monitoring](https://developers.digitalocean.com/documentation/v2/#create-a-new-droplet) from the beginning instead of forcing them to add the solution later on.",
        "createdAt" : "2017-12-19T11:37:00Z",
        "updatedAt" : "2019-01-19T19:21:58Z",
        "lastEditedBy" : "e4d896b9-fcb5-4c91-92b7-54482221e051",
        "tags" : [
        ]
      },
      {
        "id" : "efc8e353-f20b-47fa-9b66-f77e8db87390",
        "parentId" : "a238fdf7-db90-4816-9188-193280fba2c3",
        "authorId" : "d7d8721c-7ad0-4834-9a3d-b53ca8656789",
        "body" : "Looks like `monitoring:` has been added.",
        "createdAt" : "2018-11-28T11:56:47Z",
        "updatedAt" : "2019-01-19T19:21:58Z",
        "lastEditedBy" : "d7d8721c-7ad0-4834-9a3d-b53ca8656789",
        "tags" : [
        ]
      }
    ],
    "commit" : "3fa290898c8ca8628a5919b6f933319417d2e943",
    "line" : 108,
    "diffHunk" : "@@ -1,1 +106,110 @@    aliases: ['API_TOKEN']\n    required: True\nrequirements:\n  - \"python >= 2.6\"\n'''"
  },
  {
    "id" : "989d6121-e90a-4622-b2b7-d7482523c952",
    "prId" : 33984,
    "prUrl" : "https://github.com/ansible/ansible/pull/33984#pullrequestreview-84421347",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "68e27670-dca1-4dfb-b68e-fc8925667ec9",
        "parentId" : null,
        "authorId" : "d7d8721c-7ad0-4834-9a3d-b53ca8656789",
        "body" : "Please add droplet_id to `aliases:` in `DOCUMENTATION`\r\n\r\nhttp://docs.ansible.com/ansible/latest/dev_guide/developing_modules_documenting.html#documentation-block",
        "createdAt" : "2017-12-19T11:46:52Z",
        "updatedAt" : "2019-01-19T19:21:58Z",
        "lastEditedBy" : "d7d8721c-7ad0-4834-9a3d-b53ca8656789",
        "tags" : [
        ]
      }
    ],
    "commit" : "3fa290898c8ca8628a5919b6f933319417d2e943",
    "line" : 314,
    "diffHunk" : "@@ -1,1 +312,316 @@            backups=dict(type='bool', default=False),\n            monitoring=dict(type='bool', default=False),\n            id=dict(aliases=['droplet_id'], type='int'),\n            user_data=dict(default=None),\n            ipv6=dict(type='bool', default=False),"
  },
  {
    "id" : "9a629075-bb47-4371-a098-5c28e0bbc889",
    "prId" : 33984,
    "prUrl" : "https://github.com/ansible/ansible/pull/33984#pullrequestreview-194370602",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8f700892-012a-4d8a-8026-871507e8bcae",
        "parentId" : null,
        "authorId" : "e4d896b9-fcb5-4c91-92b7-54482221e051",
        "body" : "@gurch101 when a region is not available the following response is sent back with a status code of `422`. I think you will need to catch those errors and fail.\r\n```\r\n{\r\n  'message': 'Region is not available', \r\n  'id': 'unprocessable_entity'\r\n}\r\n```\r\n\r\nDigital Ocean currently doesn't supply a failover region, so this should result in a `self.module.fail_json(changed=False, msg='Region currently not available')`",
        "createdAt" : "2018-09-02T20:51:44Z",
        "updatedAt" : "2019-01-19T19:21:58Z",
        "lastEditedBy" : "e4d896b9-fcb5-4c91-92b7-54482221e051",
        "tags" : [
        ]
      },
      {
        "id" : "a470e8ab-0f69-4674-9106-612c09bda471",
        "parentId" : "8f700892-012a-4d8a-8026-871507e8bcae",
        "authorId" : "d7d8721c-7ad0-4834-9a3d-b53ca8656789",
        "body" : "@BondAnthony Is this resolved?",
        "createdAt" : "2019-01-19T21:23:04Z",
        "updatedAt" : "2019-01-19T21:23:04Z",
        "lastEditedBy" : "d7d8721c-7ad0-4834-9a3d-b53ca8656789",
        "tags" : [
        ]
      }
    ],
    "commit" : "3fa290898c8ca8628a5919b6f933319417d2e943",
    "line" : 256,
    "diffHunk" : "@@ -1,1 +254,258 @@            self.module.exit_json(changed=True)\n        response = self.rest.post('droplets', data=self.module.params)\n        json_data = response.json\n        if response.status_code >= 400:\n            self.module.fail_json(changed=False, msg=json_data['message'])"
  },
  {
    "id" : "944a5315-8026-4584-a809-a2604fd158df",
    "prId" : 33984,
    "prUrl" : "https://github.com/ansible/ansible/pull/33984#pullrequestreview-151632446",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d6ef183a-e9f9-4e8d-9b4f-1ae7bcaf051b",
        "parentId" : null,
        "authorId" : "e4d896b9-fcb5-4c91-92b7-54482221e051",
        "body" : "@gurch101 here is suggested change to the create method based on the feedback from other individuals. We do need to include the ip addresses at the top level of the response so they can be easily passed into additional tasks or facts. Let me know what you think of this method change..\r\n\r\n```python\r\n    def create(self):\r\n        json_data = self.get_droplet()\r\n        droplet_data = None\r\n        if json_data:\r\n            droplet_data = self.get_addresses(json_data)\r\n            self.module.exit_json(changed=False, data=droplet_data)\r\n        response = self.rest.post('droplets', data=self.module.params)\r\n        json_data = response.json\r\n        if response.status_code == 422 and json_data['message'] == 'Region is not available':\r\n            self.module.fail_json(chnaged=False, msg=json_data['message'])\r\n        if self.wait:\r\n            json_data = self.ensure_power_on(json_data['droplet']['id'])\r\n            droplet_data = self.get_addresses(json_data)\r\n        self.module.exit_json(changed=True, data=droplet_data)\r\n```\r\n\r\nThe address method is used to pull out the different ip addresses DO sends back in the response.\r\n\r\n```python\r\n    def get_addresses(self, data):\r\n        \"\"\"\r\n         Expose IP addresses as their own property allowing users extend to additional tasks\r\n        \"\"\"\r\n        _data = data\r\n        for k, v in data.items():\r\n            setattr(self, k, v)\r\n        networks = _data['droplet']['networks']\r\n        for network in networks.get('v4', []):\r\n            if network['type'] == 'public':\r\n                _data['ip_address'] = network['ip_address']\r\n            else:\r\n                _data['private_ipv4_address'] = network['ip_address']\r\n        for network in networks.get('v6', []):\r\n            if network['type'] == 'public':\r\n                _data['ipv6_address'] = network['ip_address']\r\n            else:\r\n                _data['private_ipv6_address'] = network['ip_address']\r\n        return _data\r\n```",
        "createdAt" : "2018-09-17T10:50:29Z",
        "updatedAt" : "2019-01-19T19:21:58Z",
        "lastEditedBy" : "e4d896b9-fcb5-4c91-92b7-54482221e051",
        "tags" : [
        ]
      }
    ],
    "commit" : "3fa290898c8ca8628a5919b6f933319417d2e943",
    "line" : 247,
    "diffHunk" : "@@ -1,1 +245,249 @@        return json_data\n\n    def create(self):\n        json_data = self.get_droplet()\n        droplet_data = None"
  },
  {
    "id" : "93ab7b95-65c4-4126-a1de-696dc021ed6b",
    "prId" : 33984,
    "prUrl" : "https://github.com/ansible/ansible/pull/33984#pullrequestreview-179257302",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "30865705-ee28-43dc-8733-a759382b437e",
        "parentId" : null,
        "authorId" : "e4d896b9-fcb5-4c91-92b7-54482221e051",
        "body" : "Please also update the response document to represent the ip addresses:\r\n\r\n```\r\n        \"ip_address\": \"104.248.118.172\",\r\n        \"ipv6_address\": \"2604:a880:400:d1::90a:6001\",\r\n        \"private_ipv4_address\": \"10.136.122.141\",\r\n        \"droplet\": {....}\r\n```",
        "createdAt" : "2018-09-17T10:51:45Z",
        "updatedAt" : "2019-01-19T19:21:58Z",
        "lastEditedBy" : "e4d896b9-fcb5-4c91-92b7-54482221e051",
        "tags" : [
        ]
      },
      {
        "id" : "199dee19-807e-4c32-8177-3c44e5099ed1",
        "parentId" : "30865705-ee28-43dc-8733-a759382b437e",
        "authorId" : "d7d8721c-7ad0-4834-9a3d-b53ca8656789",
        "body" : "Looks like IP address information has been added",
        "createdAt" : "2018-11-28T11:57:19Z",
        "updatedAt" : "2019-01-19T19:21:58Z",
        "lastEditedBy" : "d7d8721c-7ad0-4834-9a3d-b53ca8656789",
        "tags" : [
        ]
      }
    ],
    "commit" : "3fa290898c8ca8628a5919b6f933319417d2e943",
    "line" : 147,
    "diffHunk" : "@@ -1,1 +145,149 @@    returned: changed\n    type: dict\n    sample: {\n        \"ip_address\": \"104.248.118.172\",\n        \"ipv6_address\": \"2604:a880:400:d1::90a:6001\","
  }
]