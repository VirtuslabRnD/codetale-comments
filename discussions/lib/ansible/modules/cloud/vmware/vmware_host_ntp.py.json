[
  {
    "id" : "0957d60f-0228-4bd7-9994-d1f1124b9464",
    "prId" : 46268,
    "prUrl" : "https://github.com/ansible/ansible/pull/46268#pullrequestreview-160091340",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ea6ca779-0448-4514-adf7-b9133aa2992b",
        "parentId" : null,
        "authorId" : "96aeecbb-c275-402c-b904-a795c82efb48",
        "body" : "I think we should set value for `after_change_ntp_servers` in results dictionary, otherwise in check mode we will receive blank and will raise KeyError for playbook.",
        "createdAt" : "2018-09-28T16:21:41Z",
        "updatedAt" : "2018-10-03T11:31:41Z",
        "lastEditedBy" : "96aeecbb-c275-402c-b904-a795c82efb48",
        "tags" : [
        ]
      },
      {
        "id" : "bdde15c3-f8ff-4594-a393-59617d275f56",
        "parentId" : "ea6ca779-0448-4514-adf7-b9133aa2992b",
        "authorId" : "f937ecfe-3ff6-49a2-8b12-3923c563f54b",
        "body" : "It just doesn't display ```after_change_ntp_servers``` in check mode. There are no errors raised. However, I just found out that the NTP servers will be added and an existing dummy entry isn't deleted. I will add ```after_change_ntp_servers``` and change the code to overwrite existing NTP servers.",
        "createdAt" : "2018-09-29T19:15:19Z",
        "updatedAt" : "2018-10-03T11:31:41Z",
        "lastEditedBy" : "f937ecfe-3ff6-49a2-8b12-3923c563f54b",
        "tags" : [
        ]
      },
      {
        "id" : "31a740b8-dcd0-4bb1-8d2b-0ec9b4900cbb",
        "parentId" : "ea6ca779-0448-4514-adf7-b9133aa2992b",
        "authorId" : "f937ecfe-3ff6-49a2-8b12-3923c563f54b",
        "body" : "Ok, I added:\r\n```\r\nif self.module.check_mode:\r\n    self.results[host.name]['after_change_ntp_servers'] = available_ntp_servers\r\n```\r\nNow the NTP server configuration after the change will be displayed.",
        "createdAt" : "2018-09-29T19:30:15Z",
        "updatedAt" : "2018-10-03T11:31:41Z",
        "lastEditedBy" : "f937ecfe-3ff6-49a2-8b12-3923c563f54b",
        "tags" : [
        ]
      }
    ],
    "commit" : "3671c78fbeb6c021b3ea206b7011ba71bce39d7f",
    "line" : 10,
    "diffHunk" : "@@ -1,1 +136,140 @@                else:\n                    host_date_time_manager.UpdateDateTimeConfig(date_config_spec)\n                    self.results[host.name]['after_change_ntp_servers'] = host_date_time_manager.dateTimeInfo.ntpConfig.server\n                changed = True\n            except vim.fault.HostConfigFault as e:"
  }
]