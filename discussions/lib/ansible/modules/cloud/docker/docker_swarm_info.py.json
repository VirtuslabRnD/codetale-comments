[
  {
    "id" : "a5f8068d-e993-4e28-abd2-43e7325ee26a",
    "prId" : 54490,
    "prUrl" : "https://github.com/ansible/ansible/pull/54490#pullrequestreview-220764102",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2bcc2252-3f72-42ce-8340-95bb5abb72b3",
        "parentId" : null,
        "authorId" : "d10c46ef-3d4c-4766-bd09-d27ec4674a84",
        "body" : "I think you should move this `debug` up before the example, and add a new `debug` here which outputs `result.swarm_unlock_key`.",
        "createdAt" : "2019-03-29T21:30:42Z",
        "updatedAt" : "2019-03-31T21:23:21Z",
        "lastEditedBy" : "d10c46ef-3d4c-4766-bd09-d27ec4674a84",
        "tags" : [
        ]
      }
    ],
    "commit" : "2a49424e0b6a1477bc39c69d744502ddf9d62df5",
    "line" : 31,
    "diffHunk" : "@@ -1,1 +133,137 @@  register: result\n\n- debug:\n    var: result.swarm_unlock_key\n"
  },
  {
    "id" : "dde102c9-4d6f-47d0-8587-189018d07d45",
    "prId" : 54490,
    "prUrl" : "https://github.com/ansible/ansible/pull/54490#pullrequestreview-220838857",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5d24864a-8fb2-493c-bdaf-9215ff609c39",
        "parentId" : null,
        "authorId" : "1428242b-3bf6-4d26-9606-a4186f69e21b",
        "body" : "This should be in `AnsibleDockerSwarmClient` class as well in my opinion and either unified for both `docker_swarm` and `docker_swarm_info` maybe?",
        "createdAt" : "2019-03-29T23:37:36Z",
        "updatedAt" : "2019-03-31T21:23:21Z",
        "lastEditedBy" : "1428242b-3bf6-4d26-9606-a4186f69e21b",
        "tags" : [
        ]
      },
      {
        "id" : "0ce532b7-4530-40f4-bdfc-0e3663a0d28c",
        "parentId" : "5d24864a-8fb2-493c-bdaf-9215ff609c39",
        "authorId" : "d10c46ef-3d4c-4766-bd09-d27ec4674a84",
        "body" : "Please check https://github.com/ansible/ansible/pull/54490#discussion_r270585152\r\nI think it makes more sense the way it is now: `docker_swarm` needs the structure with `UnlockKey` in it, while `docker_swarm_info` needs the raw value.f",
        "createdAt" : "2019-03-30T06:43:25Z",
        "updatedAt" : "2019-03-31T21:23:21Z",
        "lastEditedBy" : "d10c46ef-3d4c-4766-bd09-d27ec4674a84",
        "tags" : [
        ]
      },
      {
        "id" : "bed03aff-9609-4f8f-9433-1f2813cc2246",
        "parentId" : "5d24864a-8fb2-493c-bdaf-9215ff609c39",
        "authorId" : "1428242b-3bf6-4d26-9606-a4186f69e21b",
        "body" : "But it may be a universal method in the `AnsibleDockerSwarmClient` class where you add a parameter to define if you want raw value or structure. The process of reading key is shared between two modules that why it fits more into a shared library in my opinion. And in case a new module for locking/unlocking needs it as well it will add the third module to use it.",
        "createdAt" : "2019-03-30T10:28:42Z",
        "updatedAt" : "2019-03-31T21:23:21Z",
        "lastEditedBy" : "1428242b-3bf6-4d26-9606-a4186f69e21b",
        "tags" : [
        ]
      },
      {
        "id" : "5fd3c9c8-f9bc-4e6e-b5b0-cea342ea17a9",
        "parentId" : "5d24864a-8fb2-493c-bdaf-9215ff609c39",
        "authorId" : "d10c46ef-3d4c-4766-bd09-d27ec4674a84",
        "body" : "I personally don't like functions with variable return type (depending on an argument). It's just impossible to verify code using such functions with static code analysis.\r\n\r\nI would not start adding methods to module_utils/docker/swarm.py just because we might need them in the future, but do that refactoring when we actually add a new module that needs them. Then we'll find out what exactly we need.",
        "createdAt" : "2019-03-30T12:01:55Z",
        "updatedAt" : "2019-03-31T21:23:21Z",
        "lastEditedBy" : "d10c46ef-3d4c-4766-bd09-d27ec4674a84",
        "tags" : [
        ]
      },
      {
        "id" : "af2a9f50-6b1f-42d3-adc3-b88274a3a2fa",
        "parentId" : "5d24864a-8fb2-493c-bdaf-9215ff609c39",
        "authorId" : "1428242b-3bf6-4d26-9606-a4186f69e21b",
        "body" : "In my proposal, it is a method shared already between two modules. But of course, we can move and consolidate later",
        "createdAt" : "2019-03-30T13:53:07Z",
        "updatedAt" : "2019-03-31T21:23:21Z",
        "lastEditedBy" : "1428242b-3bf6-4d26-9606-a4186f69e21b",
        "tags" : [
        ]
      },
      {
        "id" : "bb839555-5f66-4edf-9975-7097c996678b",
        "parentId" : "5d24864a-8fb2-493c-bdaf-9215ff609c39",
        "authorId" : "581ff564-8257-49c6-857f-c202afca501a",
        "body" : "My proposal is to wait until we implement the locking-module and see what kind of implementation is to be used there (dict with `UnlockKey` or just a string). The common implementation can then be lifted to `AnsibleDockerSwarmClient` and the other one can be used as an override.",
        "createdAt" : "2019-03-30T20:06:01Z",
        "updatedAt" : "2019-03-31T21:23:22Z",
        "lastEditedBy" : "581ff564-8257-49c6-857f-c202afca501a",
        "tags" : [
        ]
      },
      {
        "id" : "28ab5dff-7b19-4dc1-9cc5-c43bc4eb0315",
        "parentId" : "5d24864a-8fb2-493c-bdaf-9215ff609c39",
        "authorId" : "1428242b-3bf6-4d26-9606-a4186f69e21b",
        "body" : "Ok, sounds good",
        "createdAt" : "2019-03-30T21:48:55Z",
        "updatedAt" : "2019-03-31T21:23:22Z",
        "lastEditedBy" : "1428242b-3bf6-4d26-9606-a4186f69e21b",
        "tags" : [
        ]
      }
    ],
    "commit" : "2a49424e0b6a1477bc39c69d744502ddf9d62df5",
    "line" : 69,
    "diffHunk" : "@@ -1,1 +326,330 @@        return object_essentials\n\n    def get_docker_swarm_unlock_key(self):\n        unlock_key = self.client.get_unlock_key() or {}\n        return unlock_key.get('UnlockKey') or None"
  }
]