[
  {
    "id" : "75772b0a-7059-4b68-9bd4-b2df820e9c9d",
    "prId" : 49887,
    "prUrl" : "https://github.com/ansible/ansible/pull/49887#pullrequestreview-185514783",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2e9590b2-2560-48bf-ae9f-2684c00c30d6",
        "parentId" : null,
        "authorId" : "99dfb093-81dd-44d0-97be-6dcf3059e796",
        "body" : "it seems to me, the default would be ssd, defaulted by the API, I would document this here, or alternatively, set the default by ansible. \r\n\r\n(Note, usually it is dangerous to default in ansible because a resource once created would unexpectedly change on a later run, if the param would be removed afterwards. But because you wrote that `type` can only be used \"on creation\" it would be safe here.)",
        "createdAt" : "2018-12-14T05:49:33Z",
        "updatedAt" : "2018-12-20T16:59:01Z",
        "lastEditedBy" : "99dfb093-81dd-44d0-97be-6dcf3059e796",
        "tags" : [
        ]
      },
      {
        "id" : "13d28c85-9b80-4899-882f-526377185942",
        "parentId" : "2e9590b2-2560-48bf-ae9f-2684c00c30d6",
        "authorId" : "5fbe9bf0-0beb-4ca2-b699-04b796e02f99",
        "body" : "I opted for documenting the default value here. The problem with setting the default in the argument_spec is that it's then no longer possible to distinguish if the option was set to \"ssd\" explicitly or by the default value. But this distinction is needed for the failure case where someone tries to change the type of an existing volume. Alternatives would be either silently ignore this case or to require the \"type: bulk\" option even when changing an existing volume. IMO both alternatives are worse.",
        "createdAt" : "2018-12-17T10:07:27Z",
        "updatedAt" : "2018-12-20T16:59:01Z",
        "lastEditedBy" : "5fbe9bf0-0beb-4ca2-b699-04b796e02f99",
        "tags" : [
        ]
      }
    ],
    "commit" : "367f6150c46d96fcaa1bbdab22a1a1943f4c88ad",
    "line" : 55,
    "diffHunk" : "@@ -1,1 +53,57 @@  type:\n    description:\n      - Type of the volume. Cannot be changed after creating the volume.\n        Defaults to ssd on volume creation.\n    choices: [ ssd, bulk ]"
  },
  {
    "id" : "0bf4fd2e-582e-4ed2-a95c-fbcafe4622c3",
    "prId" : 49887,
    "prUrl" : "https://github.com/ansible/ansible/pull/49887#pullrequestreview-185515870",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "02e451ad-757a-4f62-9360-6753c731d4fc",
        "parentId" : null,
        "authorId" : "99dfb093-81dd-44d0-97be-6dcf3059e796",
        "body" : "not a blocker, I would probably not error out here, instead you could print out a warning message, up to your decision:\r\n\r\n~~~python\r\nmodule.warn(warning='Cannot change type of an existing volume.')\r\n~~~\r\n",
        "createdAt" : "2018-12-14T06:54:55Z",
        "updatedAt" : "2018-12-20T16:59:01Z",
        "lastEditedBy" : "99dfb093-81dd-44d0-97be-6dcf3059e796",
        "tags" : [
        ]
      },
      {
        "id" : "2457d65b-7872-4c6d-979a-7fba5f4855e0",
        "parentId" : "02e451ad-757a-4f62-9360-6753c731d4fc",
        "authorId" : "5fbe9bf0-0beb-4ca2-b699-04b796e02f99",
        "body" : "I kept the error. In my opinion it's cleaner to fail gracefully instead of not doing what the user actually requested.",
        "createdAt" : "2018-12-17T10:10:06Z",
        "updatedAt" : "2018-12-20T16:59:01Z",
        "lastEditedBy" : "5fbe9bf0-0beb-4ca2-b699-04b796e02f99",
        "tags" : [
        ]
      }
    ],
    "commit" : "367f6150c46d96fcaa1bbdab22a1a1943f4c88ad",
    "line" : 289,
    "diffHunk" : "@@ -1,1 +287,291 @@           and volume.info['type'] != module.params['type']):\n            module.fail_json(\n                msg='Cannot change type of an existing volume.',\n            )\n"
  }
]