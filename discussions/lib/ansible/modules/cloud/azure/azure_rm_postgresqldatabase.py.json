[
  {
    "id" : "3b61f5fb-9b5b-42a9-acd1-4e60671b4274",
    "prId" : 33568,
    "prUrl" : "https://github.com/ansible/ansible/pull/33568#pullrequestreview-88364645",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "75cc07ee-4a75-4047-8094-374df21c79a5",
        "parentId" : null,
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "This behaviour is really not Ansible like, it seems to indicate if a create or \"update\" will report a change which is ok but the trouble is that we aren't checking if an update is actually required. So a check mode run will always report a change if the database exists. We should be putting a check above this to verify that if the database exists, then we check the details like `charset`, `collation` to see if they match our parameters. If they do then no update is required, if they don't then we would report a change.\r\n\r\nThis module makes things a bit difficult as I'm not sure you can change the collation and charset after it has been created so we would need to error out or display a warning saying we couldn't update it.",
        "createdAt" : "2018-01-12T01:27:48Z",
        "updatedAt" : "2018-01-17T02:34:20Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      },
      {
        "id" : "db6f7525-6799-4d36-959e-603d0ae5076d",
        "parentId" : "75cc07ee-4a75-4047-8094-374df21c79a5",
        "authorId" : "90a38456-daf7-43bd-83e0-18a41ce5f0d8",
        "body" : "ok, i just added check for charset and collation.\r\n\r\nRegarding update, at the moment I am working with the team responsible for these services to figure out whether / when this issue can be resolved, so i more treat it as a temporary issue right now. Perhaps we should add appropriate note.",
        "createdAt" : "2018-01-12T02:08:15Z",
        "updatedAt" : "2018-01-17T02:34:20Z",
        "lastEditedBy" : "90a38456-daf7-43bd-83e0-18a41ce5f0d8",
        "tags" : [
        ]
      },
      {
        "id" : "919beb6b-325f-414b-a367-50c9df4c4eea",
        "parentId" : "75cc07ee-4a75-4047-8094-374df21c79a5",
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "This comment was more around the scenario when\r\n\r\n* When the database exists\r\n* State is `present`\r\n* Running in check mode\r\n\r\nAccording to the logic a change will always be reported in this scenario which may not necessarily be true.",
        "createdAt" : "2018-01-12T02:10:24Z",
        "updatedAt" : "2018-01-17T02:34:20Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      }
    ],
    "commit" : "bc97f648256029f93a15c10b3259217cd8bd3737",
    "line" : 200,
    "diffHunk" : "@@ -1,1 +198,202 @@            self.log(\"Need to Create / Update the PostgreSQL Database instance\")\n\n            if self.check_mode:\n                self.results['changed'] = True\n                return self.results"
  },
  {
    "id" : "63218b13-a714-4d91-b60f-ebba0c3e9076",
    "prId" : 52484,
    "prUrl" : "https://github.com/ansible/ansible/pull/52484#pullrequestreview-204901275",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "94453f89-5029-4850-90b0-195240edcc90",
        "parentId" : null,
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "Note: this is dead code because ```self.fail()``` will call ```sys.exit()```.  You should probably either remove it or move it to happen before the ```self.fail()``` call.",
        "createdAt" : "2019-02-18T17:46:52Z",
        "updatedAt" : "2019-02-18T17:46:53Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      }
    ],
    "commit" : "9c8c4e603b450d412403238d45b7b80f9fe5609e",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +202,206 @@            else:\n                self.fail(\"Database properties cannot be updated without setting 'force_update' option\")\n                self.to_do = Actions.NoAction\n\n        if (self.to_do == Actions.Create) or (self.to_do == Actions.Update):"
  }
]