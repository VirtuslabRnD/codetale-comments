[
  {
    "id" : "4078f0d1-46d4-4511-905e-f34c5a5af449",
    "prId" : 36271,
    "prUrl" : "https://github.com/ansible/ansible/pull/36271#pullrequestreview-97085404",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d2be676e-81fd-4dd7-aa96-b491adb3c158",
        "parentId" : null,
        "authorId" : "96aeecbb-c275-402c-b904-a795c82efb48",
        "body" : "typecasting using int() will still raise ValueError",
        "createdAt" : "2018-02-16T04:38:55Z",
        "updatedAt" : "2018-02-16T04:38:56Z",
        "lastEditedBy" : "96aeecbb-c275-402c-b904-a795c82efb48",
        "tags" : [
        ]
      },
      {
        "id" : "97332270-0f9a-4bd0-86a7-0f28db005314",
        "parentId" : "d2be676e-81fd-4dd7-aa96-b491adb3c158",
        "authorId" : "96aeecbb-c275-402c-b904-a795c82efb48",
        "body" : "I think, first validating ip with following function will help.\r\n\r\nhttps://github.com/ansible/ansible/blob/75a34f666826be988b25df41cb72bcd5d1428736/lib/ansible/module_utils/network/common/utils.py#L354",
        "createdAt" : "2018-02-16T04:59:06Z",
        "updatedAt" : "2018-02-16T04:59:23Z",
        "lastEditedBy" : "96aeecbb-c275-402c-b904-a795c82efb48",
        "tags" : [
        ]
      },
      {
        "id" : "efc8c4b5-8413-47b7-aad7-bdbcb4f005e7",
        "parentId" : "d2be676e-81fd-4dd7-aa96-b491adb3c158",
        "authorId" : "5935d4ab-2761-48eb-a134-7d58cf14061c",
        "body" : "Please look again..  It's a for loop, that splits the netmask into octets between the \".\", converts to it a int, then gets the binary count.\r\n\r\nie, \"255.255.255.0\" -> [ \"255\", \"255\", \"255\", \"0\"]  which is then converted from a string to an integer, and then bin counts the 1's in the int, which returned to the sum function as 4 numbers (ie, [ 8,8,8,0] )\r\n\r\nI have been using this code, and it does work correctly.\r\n",
        "createdAt" : "2018-02-16T05:16:30Z",
        "updatedAt" : "2018-02-16T05:16:30Z",
        "lastEditedBy" : "5935d4ab-2761-48eb-a134-7d58cf14061c",
        "tags" : [
        ]
      },
      {
        "id" : "3684c3ee-aa16-41d7-a0e8-39fd4d28dbc1",
        "parentId" : "d2be676e-81fd-4dd7-aa96-b491adb3c158",
        "authorId" : "96aeecbb-c275-402c-b904-a795c82efb48",
        "body" : "Got it. Add attribution link for Stackoverflow answer's link.",
        "createdAt" : "2018-02-16T05:23:15Z",
        "updatedAt" : "2018-02-16T05:23:15Z",
        "lastEditedBy" : "96aeecbb-c275-402c-b904-a795c82efb48",
        "tags" : [
        ]
      }
    ],
    "commit" : "c6e8b5a17b37060436511f175e2ecabdfee41801",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +181,185 @@                    ip.ip.gateway = network.get('gateway')\n                    changed = True\n                if not equal(network.get('prefix'), sum([bin(int(x)).count('1') for x in ip.ip.netmask.split('.')]) if ip.ip.netmask else None):\n                    ip.ip.netmask = str(network.get('prefix'))\n                    changed = True"
  }
]