[
  {
    "id" : "30d85e5a-645d-4cb1-aadb-c2ebb18e1da7",
    "prId" : 54404,
    "prUrl" : "https://github.com/ansible/ansible/pull/54404#pullrequestreview-219468801",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "af41f2bb-c21a-4f5a-9a5f-6f50b4ce913e",
        "parentId" : null,
        "authorId" : "dc5d177e-39f6-4639-af9d-4b2cdbbe1450",
        "body" : "What about inline stuff?",
        "createdAt" : "2019-03-26T16:38:54Z",
        "updatedAt" : "2019-04-04T07:55:37Z",
        "lastEditedBy" : "dc5d177e-39f6-4639-af9d-4b2cdbbe1450",
        "tags" : [
        ]
      },
      {
        "id" : "39cd5c22-1f52-4bb4-833a-36acf3944004",
        "parentId" : "af41f2bb-c21a-4f5a-9a5f-6f50b4ce913e",
        "authorId" : "394179c0-dbea-4aea-b0ae-70b635ae70cb",
        "body" : "You mean `resource_definition`? That's contained within VM_SPEC_PARAMS.",
        "createdAt" : "2019-03-27T09:36:49Z",
        "updatedAt" : "2019-04-04T07:55:37Z",
        "lastEditedBy" : "394179c0-dbea-4aea-b0ae-70b635ae70cb",
        "tags" : [
        ]
      },
      {
        "id" : "b2f58e42-a58e-4d35-b5aa-c3da21626212",
        "parentId" : "af41f2bb-c21a-4f5a-9a5f-6f50b4ce913e",
        "authorId" : "dc5d177e-39f6-4639-af9d-4b2cdbbe1450",
        "body" : "Yeah, but does this code works well, when updating some attribute via that? As far as I read it correctly it doesn't.",
        "createdAt" : "2019-03-27T10:07:20Z",
        "updatedAt" : "2019-04-04T07:55:37Z",
        "lastEditedBy" : "dc5d177e-39f6-4639-af9d-4b2cdbbe1450",
        "tags" : [
        ]
      },
      {
        "id" : "42e59fb4-5947-4a3d-981b-253604f3a0f2",
        "parentId" : "af41f2bb-c21a-4f5a-9a5f-6f50b4ce913e",
        "authorId" : "394179c0-dbea-4aea-b0ae-70b635ae70cb",
        "body" : "It does. If you call the module with any parameter that *might* modify spec: (and that includes `resource_definition`, which doesn't have to modify spec:, but it *might*), that's enough to trigger a full crud call. Only if the module is certain that none of the arguments used touch spec: in any way, does it skip the crud call.\r\n\r\nI just pushed a new version rebased on top of master, which includes the module params cleanup PR and that has a much simpler `VM_SPEC_PARAMS` definition, so maybe that'll be clearer.",
        "createdAt" : "2019-03-27T10:27:53Z",
        "updatedAt" : "2019-04-04T07:55:37Z",
        "lastEditedBy" : "394179c0-dbea-4aea-b0ae-70b635ae70cb",
        "tags" : [
        ]
      },
      {
        "id" : "890cb329-3ee9-431b-98bc-111f43f38c03",
        "parentId" : "af41f2bb-c21a-4f5a-9a5f-6f50b4ce913e",
        "authorId" : "dc5d177e-39f6-4639-af9d-4b2cdbbe1450",
        "body" : "I see now. Quite complex.. If we want to say user he can't stop/start non-existing VM, wouldn't it be simpler to just say that(one simple condition) and instead of saying that he sent empty parameters tell him, which parameters are required(returned from backend) this would very simplify all of this and I don't think we really need this. But if you insist this is better I am ok.",
        "createdAt" : "2019-03-27T11:12:42Z",
        "updatedAt" : "2019-04-04T07:55:37Z",
        "lastEditedBy" : "dc5d177e-39f6-4639-af9d-4b2cdbbe1450",
        "tags" : [
        ]
      },
      {
        "id" : "6736da1c-d0ad-4444-a9e3-021b135b1272",
        "parentId" : "af41f2bb-c21a-4f5a-9a5f-6f50b4ce913e",
        "authorId" : "394179c0-dbea-4aea-b0ae-70b635ae70cb",
        "body" : "It's not that complex, the whole logic is ~10 lines of additional code. And the benefit is that in the 99% of cases where you just intend to start/stop a vm (like [1] where there are multiple other  examples)  you get a humanâ€“friendly error that clearly hints you're probably have your name wrong. Were it 100 lines of code, I wouldn't be so sure, but in this case the UX benefit is clear and the additional code isn't much.\r\n\r\n[1] https://github.com/kubevirt/ansible-kubevirt-modules/blob/master/tests/playbooks/e2e.yaml#L41",
        "createdAt" : "2019-03-27T12:26:14Z",
        "updatedAt" : "2019-04-04T07:55:37Z",
        "lastEditedBy" : "394179c0-dbea-4aea-b0ae-70b635ae70cb",
        "tags" : [
        ]
      },
      {
        "id" : "bb406343-00b6-4e99-aa91-9549e5fd5ebc",
        "parentId" : "af41f2bb-c21a-4f5a-9a5f-6f50b4ce913e",
        "authorId" : "dc5d177e-39f6-4639-af9d-4b2cdbbe1450",
        "body" : "I am fine. It's just that it's `if` with too many and\\or's are just too much for me :) I just preffer straighforward code with no complex if's, if they are not really needed.",
        "createdAt" : "2019-03-27T13:45:26Z",
        "updatedAt" : "2019-04-04T07:55:37Z",
        "lastEditedBy" : "dc5d177e-39f6-4639-af9d-4b2cdbbe1450",
        "tags" : [
        ]
      }
    ],
    "commit" : "6949ac28ad9104a610b21ce8893a7045be29bb6b",
    "line" : 235,
    "diffHunk" : "@@ -1,1 +355,359 @@        _used_params = [name for name in self.params if self.params[name] is not None]\n        # Is 'spec:' getting changed?\n        vm_spec_change = True if set(VM_SPEC_PARAMS).intersection(_used_params) else False\n        changed = False\n        crud_executed = False"
  },
  {
    "id" : "b9f296d5-93fa-4e57-9edb-0a85ef200f5a",
    "prId" : 54404,
    "prUrl" : "https://github.com/ansible/ansible/pull/54404#pullrequestreview-221134957",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "27a2c37b-c07d-439f-82c4-1ed6649378fd",
        "parentId" : null,
        "authorId" : "dc5d177e-39f6-4639-af9d-4b2cdbbe1450",
        "body" : "please reuse the code, it's very same",
        "createdAt" : "2019-03-28T15:09:25Z",
        "updatedAt" : "2019-04-04T07:55:37Z",
        "lastEditedBy" : "dc5d177e-39f6-4639-af9d-4b2cdbbe1450",
        "tags" : [
        ]
      },
      {
        "id" : "ba774a21-3101-45c4-9c3a-8b9b3857ef2d",
        "parentId" : "27a2c37b-c07d-439f-82c4-1ed6649378fd",
        "authorId" : "394179c0-dbea-4aea-b0ae-70b635ae70cb",
        "body" : "It looks like it on first glance, but I'd actually end up with more lines of (less legible) code if I tried that.",
        "createdAt" : "2019-04-01T14:10:44Z",
        "updatedAt" : "2019-04-04T07:55:37Z",
        "lastEditedBy" : "394179c0-dbea-4aea-b0ae-70b635ae70cb",
        "tags" : [
        ]
      }
    ],
    "commit" : "6949ac28ad9104a610b21ce8893a7045be29bb6b",
    "line" : 126,
    "diffHunk" : "@@ -1,1 +265,269 @@        for event in self._kind_resource.watch(namespace=self.namespace, timeout=self.params.get('wait_timeout')):\n            entity = event['object']\n            if entity.metadata.name != self.name:\n                continue\n            status = entity.get('status', {})"
  },
  {
    "id" : "b2358109-eb0a-4a1b-9b96-dbbe52928273",
    "prId" : 54404,
    "prUrl" : "https://github.com/ansible/ansible/pull/54404#pullrequestreview-221018161",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3b23e135-0905-4ff9-b3a4-f9ba523d9e3d",
        "parentId" : null,
        "authorId" : "dc5d177e-39f6-4639-af9d-4b2cdbbe1450",
        "body" : "So if I update some parameter+ change state to running, it won't start, IIUC",
        "createdAt" : "2019-03-28T16:07:04Z",
        "updatedAt" : "2019-04-04T07:55:37Z",
        "lastEditedBy" : "dc5d177e-39f6-4639-af9d-4b2cdbbe1450",
        "tags" : [
        ]
      },
      {
        "id" : "c593dda8-5ca3-4e15-88f5-8410be59ca89",
        "parentId" : "3b23e135-0905-4ff9-b3a4-f9ba523d9e3d",
        "authorId" : "394179c0-dbea-4aea-b0ae-70b635ae70cb",
        "body" : "If you change state to running, then `execute_crud()` will patch the object and change state to running, which will make it start the VMI. At the same time `already_changed` will be set to `True`, which will skip patching the object for a second time, because why patch the object for a second time if we don't have to.",
        "createdAt" : "2019-04-01T09:54:37Z",
        "updatedAt" : "2019-04-04T07:55:37Z",
        "lastEditedBy" : "394179c0-dbea-4aea-b0ae-70b635ae70cb",
        "tags" : [
        ]
      }
    ],
    "commit" : "6949ac28ad9104a610b21ce8893a7045be29bb6b",
    "line" : 159,
    "diffHunk" : "@@ -1,1 +298,302 @@        k8s_obj = {}\n\n        if not already_changed:\n            k8s_obj = self.get_resource(self._kind_resource)\n            if not k8s_obj:"
  }
]