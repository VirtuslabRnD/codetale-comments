[
  {
    "id" : "a74865f8-ac3b-4b58-a0b7-7992214aa61d",
    "prId" : 43673,
    "prUrl" : "https://github.com/ansible/ansible/pull/43673#pullrequestreview-181969546",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "89f339d1-d729-4801-b0fb-28118da12127",
        "parentId" : null,
        "authorId" : "38f1a2ff-4f1a-4c3d-b78a-3bae3b91d930",
        "body" : "My only suggestion is that I think it could be easier in the long run to do the following instead of duplicating the transaction logic, but at the same time the current code is saving cycle by not evaluating the `if module.check_mode` conditional multiple times so it's purely preference and I don't care to block the PR on it. üëç \r\n```python\r\n            if state == \"present\":\r\n                if not shard_find(client, shard):\r\n                    if not module.check_mode:\r\n                        shard_add(client, shard)\r\n                    changed = True\r\n                else:\r\n                    changed = False\r\n            elif state == \"absent\":\r\n                if shard_find(client, shard):\r\n                    if not module.check_mode:\r\n                        shard_remove(client, shard)\r\n                    changed = True\r\n                else:\r\n                    changed = False\r\n```",
        "createdAt" : "2018-12-05T20:57:59Z",
        "updatedAt" : "2018-12-05T20:57:59Z",
        "lastEditedBy" : "38f1a2ff-4f1a-4c3d-b78a-3bae3b91d930",
        "tags" : [
        ]
      }
    ],
    "commit" : "be1e8079b46215ff9898d128b73be65ebb66fd59",
    "line" : 318,
    "diffHunk" : "@@ -1,1 +316,320 @@                else:\n                    changed = True\n        else:\n            if state == \"present\":\n                if not shard_find(client, shard):"
  }
]