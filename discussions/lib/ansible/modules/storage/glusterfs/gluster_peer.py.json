[
  {
    "id" : "0c637e3e-8f47-437b-8b8d-86b1f171c7f1",
    "prId" : 37771,
    "prUrl" : "https://github.com/ansible/ansible/pull/37771#pullrequestreview-106640938",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "130a44d9-4849-4a1d-a6ff-f18fba1eebf7",
        "parentId" : null,
        "authorId" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "body" : "Is `2015` right ?",
        "createdAt" : "2018-03-23T10:20:39Z",
        "updatedAt" : "2018-05-24T17:02:06Z",
        "lastEditedBy" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "tags" : [
        ]
      },
      {
        "id" : "c4391394-65ee-49a5-bdca-1fa43edafff4",
        "parentId" : "130a44d9-4849-4a1d-a6ff-f18fba1eebf7",
        "authorId" : "aa05b07a-403f-4129-a994-dd5a01bd2bb8",
        "body" : "Yes module was initially done by her in 2015. Later she left the project. Hope it is ok to keep it.",
        "createdAt" : "2018-03-23T12:35:28Z",
        "updatedAt" : "2018-05-24T17:02:06Z",
        "lastEditedBy" : "aa05b07a-403f-4129-a994-dd5a01bd2bb8",
        "tags" : [
        ]
      },
      {
        "id" : "e996d148-edfa-49a9-bfd8-90be88d7fed5",
        "parentId" : "130a44d9-4849-4a1d-a6ff-f18fba1eebf7",
        "authorId" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "body" : "Not a problem :)",
        "createdAt" : "2018-03-23T20:37:26Z",
        "updatedAt" : "2018-05-24T17:02:06Z",
        "lastEditedBy" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "tags" : [
        ]
      }
    ],
    "commit" : "277a8463e3c0cf04a40b960c6b2ba82223c60a67",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +2,6 @@# -*- coding: utf-8 -*-\n#\n# Copyright 2015 Nandaja Varma <nvarma@redhat.com>\n# Copyright 2018 Red Hat, Inc.\n#"
  },
  {
    "id" : "d5756153-645e-4541-a288-998e4e7c798a",
    "prId" : 37771,
    "prUrl" : "https://github.com/ansible/ansible/pull/37771#pullrequestreview-120588365",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b2eb2660-adf2-4182-aa77-a5b20a158514",
        "parentId" : null,
        "authorId" : "dc5d177e-39f6-4639-af9d-4b2cdbbe1450",
        "body" : "You should document here what it returns. I guess it's only `rc`.",
        "createdAt" : "2018-05-16T09:32:16Z",
        "updatedAt" : "2018-05-24T17:02:06Z",
        "lastEditedBy" : "dc5d177e-39f6-4639-af9d-4b2cdbbe1450",
        "tags" : [
        ]
      },
      {
        "id" : "021229aa-b851-40ff-971d-30f9036605af",
        "parentId" : "b2eb2660-adf2-4182-aa77-a5b20a158514",
        "authorId" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "body" : "No, see [dev_guide](http://docs.ansible.com/ansible/devel/dev_guide/developing_modules_documenting.html#return-block):\r\n> If your module doesnâ€™t return anything (apart from the standard returns), you can use RETURN = ''' # '''.",
        "createdAt" : "2018-05-16T10:15:35Z",
        "updatedAt" : "2018-05-24T17:02:06Z",
        "lastEditedBy" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "tags" : [
        ]
      },
      {
        "id" : "0c05a902-3111-4519-a8a5-f96c772b23ac",
        "parentId" : "b2eb2660-adf2-4182-aa77-a5b20a158514",
        "authorId" : "dc5d177e-39f6-4639-af9d-4b2cdbbe1450",
        "body" : "Ah OK, I didn't know `rc` is standard return.",
        "createdAt" : "2018-05-16T10:56:14Z",
        "updatedAt" : "2018-05-24T17:02:06Z",
        "lastEditedBy" : "dc5d177e-39f6-4639-af9d-4b2cdbbe1450",
        "tags" : [
        ]
      }
    ],
    "commit" : "277a8463e3c0cf04a40b960c6b2ba82223c60a67",
    "line" : 76,
    "diffHunk" : "@@ -1,1 +74,78 @@'''\n\nRETURN = '''\n'''\n"
  },
  {
    "id" : "dc843cc5-12d5-472e-b241-394925959abb",
    "prId" : 37771,
    "prUrl" : "https://github.com/ansible/ansible/pull/37771#pullrequestreview-120655962",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4059713a-1711-4cff-b30b-422c9591223d",
        "parentId" : null,
        "authorId" : "dc5d177e-39f6-4639-af9d-4b2cdbbe1450",
        "body" : "Will this parsing also work when gluster isn't installed at all? In that case any meaningfull message would be nice.",
        "createdAt" : "2018-05-16T09:42:03Z",
        "updatedAt" : "2018-05-24T17:02:06Z",
        "lastEditedBy" : "dc5d177e-39f6-4639-af9d-4b2cdbbe1450",
        "tags" : [
        ]
      },
      {
        "id" : "dcd01f44-0701-495c-b8a9-590e8bf7a94b",
        "parentId" : "4059713a-1711-4cff-b30b-422c9591223d",
        "authorId" : "dc5d177e-39f6-4639-af9d-4b2cdbbe1450",
        "body" : "Also you may get here(or on many other places) an exception, and you don't catch any. AFAIK Ansible modules should return always with `module.exit_json` or `module.fail_json` rather then raising `Exception`.",
        "createdAt" : "2018-05-16T09:47:13Z",
        "updatedAt" : "2018-05-24T17:02:06Z",
        "lastEditedBy" : "dc5d177e-39f6-4639-af9d-4b2cdbbe1450",
        "tags" : [
        ]
      },
      {
        "id" : "5606c89d-5c17-4e0c-9390-824e187fe064",
        "parentId" : "4059713a-1711-4cff-b30b-422c9591223d",
        "authorId" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "body" : "> Will this parsing also work when gluster isn't installed at all? In that case any meaningfull message would be nice.\r\n\r\nYes, because second parameter is `True`, `fail_json` is [called](https://github.com/ansible/ansible/blob/979f1e5ed14fd13c95b3651906c4916b5bb01535/lib/ansible/module_utils/basic.py#L2273) when executable isn't available\r\n\r\n> Also you may get here(or on many other places) an exception\r\n\r\nCould you elaborate ?",
        "createdAt" : "2018-05-16T10:20:24Z",
        "updatedAt" : "2018-05-24T17:02:06Z",
        "lastEditedBy" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "tags" : [
        ]
      },
      {
        "id" : "585e7e93-eaae-443a-aec4-b5f4582ddbce",
        "parentId" : "4059713a-1711-4cff-b30b-422c9591223d",
        "authorId" : "dc5d177e-39f6-4639-af9d-4b2cdbbe1450",
        "body" : "http://docs.ansible.com/ansible/latest/dev_guide/developing_modules_general.html#new-module-development\r\n\r\nThere is written:\r\n```\r\n# during the execution of the module, if there is an exception or a\r\n    # conditional state that effectively causes a failure, run\r\n    # AnsibleModule.fail_json() to pass in the message and the result\r\n    if module.params['name'] == 'fail me':\r\n        module.fail_json(msg='You requested this to fail', **result)\r\n```\r\n\r\nAFAIK module should return with `module.exit_json` or `module.fail_json`, not `raise ValueError` for example.",
        "createdAt" : "2018-05-16T10:55:18Z",
        "updatedAt" : "2018-05-24T17:02:06Z",
        "lastEditedBy" : "dc5d177e-39f6-4639-af9d-4b2cdbbe1450",
        "tags" : [
        ]
      },
      {
        "id" : "2ff643c5-76b5-42c2-b6b9-67a63a0e781c",
        "parentId" : "4059713a-1711-4cff-b30b-422c9591223d",
        "authorId" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "body" : "I meant: where `ValueError` could be raised ?",
        "createdAt" : "2018-05-16T13:51:37Z",
        "updatedAt" : "2018-05-24T17:02:06Z",
        "lastEditedBy" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "tags" : [
        ]
      },
      {
        "id" : "509c2363-4923-44c5-8bcb-bd6d0a5ff975",
        "parentId" : "4059713a-1711-4cff-b30b-422c9591223d",
        "authorId" : "dc5d177e-39f6-4639-af9d-4b2cdbbe1450",
        "body" : "I meant `IndexError` not `ValueError`, but it don't really matter. What I meant is, that isn't it better to have this safe contruct there:\r\n\r\n```python\r\ntry:\r\n  main()\r\nexcept Exception as e:\r\n  module.fail_json(msg=str(e), exception=traceback.format_exc())\r\n```\r\n\r\nIt's then better to debug issues.",
        "createdAt" : "2018-05-16T14:06:45Z",
        "updatedAt" : "2018-05-24T17:02:06Z",
        "lastEditedBy" : "dc5d177e-39f6-4639-af9d-4b2cdbbe1450",
        "tags" : [
        ]
      }
    ],
    "commit" : "277a8463e3c0cf04a40b960c6b2ba82223c60a67",
    "line" : 168,
    "diffHunk" : "@@ -1,1 +166,170 @@    cmd = module.get_bin_path('gluster', True) + ' --version'\n    result = module.run_command(cmd)\n    ver_line = result[1].split('\\n')[0]\n    version = ver_line.split(' ')[1]\n    # If the installed version is less than 3.2, it is an invalid version"
  },
  {
    "id" : "e2d29259-e65a-4523-8fd0-e20b592cc2bb",
    "prId" : 37771,
    "prUrl" : "https://github.com/ansible/ansible/pull/37771#pullrequestreview-123085655",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5c1c1dd3-2b53-4529-b01c-ce18ffab83f2",
        "parentId" : null,
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "Since you're screenscraping, do you need to set the locale to C before scraping?",
        "createdAt" : "2018-05-24T15:38:47Z",
        "updatedAt" : "2018-05-24T17:02:06Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      },
      {
        "id" : "ce7495dc-55bf-4507-819e-399b6fcb9a9d",
        "parentId" : "5c1c1dd3-2b53-4529-b01c-ce18ffab83f2",
        "authorId" : "aa05b07a-403f-4129-a994-dd5a01bd2bb8",
        "body" : "Ack. Done.",
        "createdAt" : "2018-05-24T17:01:47Z",
        "updatedAt" : "2018-05-24T17:02:06Z",
        "lastEditedBy" : "aa05b07a-403f-4129-a994-dd5a01bd2bb8",
        "tags" : [
        ]
      }
    ],
    "commit" : "277a8463e3c0cf04a40b960c6b2ba82223c60a67",
    "line" : 138,
    "diffHunk" : "@@ -1,1 +136,140 @@                self.module.fail_json(**result)\n            else:\n                if 'already in peer' in out or \\\n                   'localhost not needed' in out:\n                    result['changed'] |= False"
  }
]