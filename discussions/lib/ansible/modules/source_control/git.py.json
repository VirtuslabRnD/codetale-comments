[
  {
    "id" : "5b0f614e-bbff-4b60-9c27-9ec1f7ce8314",
    "prId" : 23332,
    "prUrl" : "https://github.com/ansible/ansible/pull/23332#pullrequestreview-33500834",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d18cd299-86dc-479c-af7a-3a8f2c5523ad",
        "parentId" : null,
        "authorId" : "f239a73a-a28d-436b-80b0-e91c91281bb6",
        "body" : "The remove is in the wrong place and tempdir is not removed. Better:\r\n```\r\ntempdir = tempfile.mkdtemp()\r\nnew_archive = os.path.join(tempdir,  'archive.' + archive_fmt)\r\ngit_archive(git_path, module, dest, new_archive, archive_fmt, version)\r\n\r\narchive_unchanged = filecmp.cmp(new_archive, archive)\r\nshutil.rmtree(tempdir)\r\n\r\nif archive_unchanged:\r\n    result.update(changed=False)\r\nelse:\r\n...\r\n```",
        "createdAt" : "2017-04-19T13:44:29Z",
        "updatedAt" : "2017-05-04T05:22:01Z",
        "lastEditedBy" : "f239a73a-a28d-436b-80b0-e91c91281bb6",
        "tags" : [
        ]
      }
    ],
    "commit" : "354eb7ad57eaac8137fd16e9c0773e35dabf0b54",
    "line" : 85,
    "diffHunk" : "@@ -1,1 +953,957 @@        # if match, do nothing\n        # if does not match, then replace existing with temp archive file.\n        tempdir = tempfile.mkdtemp()\n        new_archive_dest = os.path.join(tempdir, repo_name)\n        new_archive = new_archive_dest + '.' + archive_fmt"
  },
  {
    "id" : "db1aa4dd-daaf-4a91-81e5-2deb95759475",
    "prId" : 29069,
    "prUrl" : "https://github.com/ansible/ansible/pull/29069#pullrequestreview-61680853",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "86771c9e-4254-4614-a599-a80f5fb6e37d",
        "parentId" : null,
        "authorId" : "f239a73a-a28d-436b-80b0-e91c91281bb6",
        "body" : "As far as I see `GIT_SSH_COMMAND` was only introduced in git 2.3, so this change will not fix the issue on many systems, including rhel7.",
        "createdAt" : "2017-09-10T10:06:45Z",
        "updatedAt" : "2017-09-10T10:06:50Z",
        "lastEditedBy" : "f239a73a-a28d-436b-80b0-e91c91281bb6",
        "tags" : [
        ]
      }
    ],
    "commit" : "0adda5f9491f9d5f9c20bebe683abf88d73bdfd9",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +372,376 @@def set_git_ssh(ssh_wrapper, key_file, ssh_opts):\n\n    # git_ssh_command will override git_ssh, so only older git needs it\n    os.environ[\"GIT_SSH\"] = ssh_wrapper\n    # using shell to avoid 'noexec' issues if module temp dir is located in such a mount"
  }
]