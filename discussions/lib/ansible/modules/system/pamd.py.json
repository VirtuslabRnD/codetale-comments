[
  {
    "id" : "6f266900-5393-4427-b555-ed1bc20c952a",
    "prId" : 20048,
    "prUrl" : "https://github.com/ansible/ansible/pull/20048#pullrequestreview-15735167",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e01693e7-9f08-4b2e-8caa-caa010e5fa44",
        "parentId" : null,
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "This is pre-existing in the code but there should be a check whether module_args is None otherwise this loop will traceback.  I think it should be fixed in the argument_spec, I'll make a note there.",
        "createdAt" : "2017-01-09T16:22:17Z",
        "updatedAt" : "2017-01-09T17:24:11Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      }
    ],
    "commit" : "93798523dea9abfba358c49febee9b4d23c6fe72",
    "line" : null,
    "diffHunk" : "@@ -1,1 +408,412 @@                old_rule.rule_control == rule.rule_control and\n                old_rule.rule_module_path == rule.rule_module_path):\n            for arg_to_add in module_args:\n                if \"=\" in arg_to_add:\n                    pre_string = arg_to_add[:arg_to_add.index('=')+1]"
  },
  {
    "id" : "0d60b8d4-e87e-4062-b04e-651f79ae4131",
    "prId" : 25817,
    "prUrl" : "https://github.com/ansible/ansible/pull/25817#pullrequestreview-48648681",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "adf0bd39-36f7-483f-8b21-119c9bdbfd52",
        "parentId" : null,
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "add note that 'absent' state was added in 2.4",
        "createdAt" : "2017-07-06T02:24:32Z",
        "updatedAt" : "2017-07-07T16:39:45Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "7f011bd8-5f9b-42a1-9ff1-df1e6a9a2dd0",
        "parentId" : "adf0bd39-36f7-483f-8b21-119c9bdbfd52",
        "authorId" : "b9febf1d-91d9-483b-8300-b6e673987e04",
        "body" : "Fixed",
        "createdAt" : "2017-07-07T16:06:32Z",
        "updatedAt" : "2017-07-07T16:39:45Z",
        "lastEditedBy" : "b9febf1d-91d9-483b-8300-b6e673987e04",
        "tags" : [
        ]
      }
    ],
    "commit" : "e2eab293777b4033542c3d3e25705f603460b951",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +82,86 @@    - args_present\n    - args_absent\n    - absent\n    description:\n    - The default of 'updated' will modify an existing rule if type,"
  },
  {
    "id" : "be14deb0-b7ed-4bea-a92f-7fbf7960a9dd",
    "prId" : 25817,
    "prUrl" : "https://github.com/ansible/ansible/pull/25817#pullrequestreview-48648773",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f5bba77f-ed73-44d2-b4d6-5617ab4dd24f",
        "parentId" : null,
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "you should note that the return changed and those fields are new in 2.4 .. also keep dest and note that it is only valid in previous versions",
        "createdAt" : "2017-07-06T02:26:15Z",
        "updatedAt" : "2017-07-07T16:39:45Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "674c20d7-3522-4d83-a08b-1cf7d51b65e8",
        "parentId" : "f5bba77f-ed73-44d2-b4d6-5617ab4dd24f",
        "authorId" : "b9febf1d-91d9-483b-8300-b6e673987e04",
        "body" : "Fixed",
        "createdAt" : "2017-07-07T16:06:53Z",
        "updatedAt" : "2017-07-07T16:39:45Z",
        "lastEditedBy" : "b9febf1d-91d9-483b-8300-b6e673987e04",
        "tags" : [
        ]
      }
    ],
    "commit" : "e2eab293777b4033542c3d3e25705f603460b951",
    "line" : 60,
    "diffHunk" : "@@ -1,1 +218,222 @@    returned: always\n    type: string\n    sample: \"update_rule\"\n    version_added: 2.4\ndest:"
  },
  {
    "id" : "133cc129-e836-47b9-9b57-fa04ae359b2e",
    "prId" : 25817,
    "prUrl" : "https://github.com/ansible/ansible/pull/25817#pullrequestreview-48648844",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c264f340-9810-4a2d-9ad9-8b87d5f17085",
        "parentId" : null,
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "this is an unsafe way to write the file, other processes might get incorrect/incomplete data and if it fails it leaves a corrupt file. write to a temp file and use `atomic_move` instead",
        "createdAt" : "2017-07-06T02:29:00Z",
        "updatedAt" : "2017-07-07T16:39:45Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "335eb688-1037-4278-a1ec-938776d4e97d",
        "parentId" : "c264f340-9810-4a2d-9ad9-8b87d5f17085",
        "authorId" : "b9febf1d-91d9-483b-8300-b6e673987e04",
        "body" : "Understood.  Learned something new.",
        "createdAt" : "2017-07-07T16:07:10Z",
        "updatedAt" : "2017-07-07T16:39:45Z",
        "lastEditedBy" : "b9febf1d-91d9-483b-8300-b6e673987e04",
        "tags" : [
        ]
      }
    ],
    "commit" : "e2eab293777b4033542c3d3e25705f603460b951",
    "line" : 190,
    "diffHunk" : "@@ -1,1 +353,357 @@                self.rules.append(PamdRule.rulefromstring(stringline))\n\n    def write(self):\n        if self.fname is None:\n            self.fname = self.path + \"/\" + self.name"
  },
  {
    "id" : "9dcf00ac-4a2d-4f9d-a5c1-cd717e07950e",
    "prId" : 25817,
    "prUrl" : "https://github.com/ansible/ansible/pull/25817#pullrequestreview-48222135",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1fd4945f-ca77-4194-a431-e2047c92a7f4",
        "parentId" : null,
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "this is an unsafe way to update the file, it can lead to data corruption and other processes reading incorrect/incomplete data. write to a tmp file and use atomic_move from basic.py",
        "createdAt" : "2017-07-06T02:32:10Z",
        "updatedAt" : "2017-07-07T16:39:45Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      }
    ],
    "commit" : "e2eab293777b4033542c3d3e25705f603460b951",
    "line" : 190,
    "diffHunk" : "@@ -1,1 +353,357 @@                self.rules.append(PamdRule.rulefromstring(stringline))\n\n    def write(self):\n        if self.fname is None:\n            self.fname = self.path + \"/\" + self.name"
  },
  {
    "id" : "9f9d0dae-a6e9-49a7-95d1-71352dc8d071",
    "prId" : 25817,
    "prUrl" : "https://github.com/ansible/ansible/pull/25817#pullrequestreview-48648715",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2cf313ed-50f6-4e03-abfb-0f6048fb9197",
        "parentId" : null,
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "docs should reflect that 'absent' is only available in versions >=2.4",
        "createdAt" : "2017-07-06T02:32:44Z",
        "updatedAt" : "2017-07-07T16:39:45Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "a3deb760-4b5f-4176-b229-af76b5f2aa13",
        "parentId" : "2cf313ed-50f6-4e03-abfb-0f6048fb9197",
        "authorId" : "b9febf1d-91d9-483b-8300-b6e673987e04",
        "body" : "Fixed",
        "createdAt" : "2017-07-07T16:06:38Z",
        "updatedAt" : "2017-07-07T16:39:45Z",
        "lastEditedBy" : "b9febf1d-91d9-483b-8300-b6e673987e04",
        "tags" : [
        ]
      }
    ],
    "commit" : "e2eab293777b4033542c3d3e25705f603460b951",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +83,87 @@    - args_absent\n    - absent\n    description:\n    - The default of 'updated' will modify an existing rule if type,\n      control and module_path all match an existing rule.  With 'before',"
  },
  {
    "id" : "c3e78dfa-43e4-4819-94ad-ad8f4a2547e6",
    "prId" : 47133,
    "prUrl" : "https://github.com/ansible/ansible/pull/47133#pullrequestreview-165935776",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "adaf4105-5edf-43ec-a3a2-9811b1a4ac2f",
        "parentId" : null,
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "This isn't part of your changes but if you get time are you able to open a new PR and remove this line. Modules should not be calling `print()` as that can screw up Ansible reading the module output.",
        "createdAt" : "2018-10-18T06:08:07Z",
        "updatedAt" : "2018-10-18T06:08:11Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      }
    ],
    "commit" : "949d9c60d434bf5fcf6a34661d1979aa091c00ae",
    "line" : 2,
    "diffHunk" : "@@ -1,1 +777,781 @@        if module.params['backup']:\n            backupdest = module.backup_local(fname)\n            print(\"BACKUP DEST\", backupdest)\n        try:\n            temp_file = NamedTemporaryFile(mode='w', dir=module.tmpdir)"
  },
  {
    "id" : "516563c1-ecc6-4f1b-a235-214c0452531b",
    "prId" : 47695,
    "prUrl" : "https://github.com/ansible/ansible/pull/47695#pullrequestreview-169688641",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "35238938-92be-4420-8b31-cebf41019c52",
        "parentId" : null,
        "authorId" : "5c95ce24-8a36-4f10-b46c-b30203fba415",
        "body" : "Not a comment on this line, but on this commit:\r\n\r\na better commit message would be:\r\n```\r\nmake pamd idempotent with state=updated\r\n\r\nfixes #47083 \r\n```\r\n\r\nThat avoids having to lookup what #47083 was about.",
        "createdAt" : "2018-10-30T09:55:41Z",
        "updatedAt" : "2018-10-30T13:54:48Z",
        "lastEditedBy" : "5c95ce24-8a36-4f10-b46c-b30203fba415",
        "tags" : [
        ]
      }
    ],
    "commit" : "3eef78342c0d5676f4c6d7e2974049e6a12d32fa",
    "line" : 75,
    "diffHunk" : "@@ -1,1 +510,514 @@        new_args = parse_module_arguments(new_args)\n\n        changes = 0\n        for current_rule in rules_to_find:\n            rule_changed = False"
  },
  {
    "id" : "ec76d1b5-f322-442e-8fe6-ee16ca32ea40",
    "prId" : 47695,
    "prUrl" : "https://github.com/ansible/ansible/pull/47695#pullrequestreview-169688641",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "852f9996-2da3-4292-a1b4-ae34f34e3cfe",
        "parentId" : null,
        "authorId" : "5c95ce24-8a36-4f10-b46c-b30203fba415",
        "body" : "better commit message would be\r\n```\r\npamd args_present: properly update args, avoid dupes\r\n\r\nfixes #47197\r\n```",
        "createdAt" : "2018-10-30T10:05:03Z",
        "updatedAt" : "2018-10-30T13:54:48Z",
        "lastEditedBy" : "5c95ce24-8a36-4f10-b46c-b30203fba415",
        "tags" : [
        ]
      }
    ],
    "commit" : "3eef78342c0d5676f4c6d7e2974049e6a12d32fa",
    "line" : 165,
    "diffHunk" : "@@ -1,1 +628,632 @@\n    def add_module_arguments(self, rule_type, rule_control, rule_path, args_to_add):\n        # Get a list of rules we want to change\n        rules_to_find = self.get(rule_type, rule_control, rule_path)\n"
  },
  {
    "id" : "f7d551f7-ff5d-4b37-962f-e5164c9092bc",
    "prId" : 47695,
    "prUrl" : "https://github.com/ansible/ansible/pull/47695#pullrequestreview-169766383",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d3b90a36-59ce-4e7a-adfb-db39602d19c0",
        "parentId" : null,
        "authorId" : "5c95ce24-8a36-4f10-b46c-b30203fba415",
        "body" : "Couldn't we just use the old behavior of adding it if it didn't exactly match an existing argument, and perhaps emit a warning?",
        "createdAt" : "2018-10-30T10:38:52Z",
        "updatedAt" : "2018-10-30T13:54:48Z",
        "lastEditedBy" : "5c95ce24-8a36-4f10-b46c-b30203fba415",
        "tags" : [
        ]
      },
      {
        "id" : "04552687-8de4-4034-83bb-165c4f071bc0",
        "parentId" : "d3b90a36-59ce-4e7a-adfb-db39602d19c0",
        "authorId" : "03d56b70-8ba6-4b4f-8cae-cbeb0731c13e",
        "body" : "That would mean that you would potentially have duplicate arguments on a Pamd line which to me is unexpected and broken behavior. i.e. If I used this module I would not expect it to add duplicate arguments to a rule, in fact if it did that I would consider the module broken...which is why this was changed.\r\n\r\nimo `args_present` should really just be used for adding in simple arguments. i.e. `use_authtok` or `sha512` and not for a super complex argument like so:\r\n\r\n```\r\n[query=select user_name from internet_service where user_name='%u'  and password=PASSWORD('%p') and service='web_proxy']\r\n```\r\n\r\nFor those types of arguments one should use updated which is properly able to test equality and update it if necessary.",
        "createdAt" : "2018-10-30T12:57:15Z",
        "updatedAt" : "2018-10-30T13:54:48Z",
        "lastEditedBy" : "03d56b70-8ba6-4b4f-8cae-cbeb0731c13e",
        "tags" : [
        ]
      },
      {
        "id" : "5ce8dd04-d026-4eea-b642-3b0e85413777",
        "parentId" : "d3b90a36-59ce-4e7a-adfb-db39602d19c0",
        "authorId" : "5c95ce24-8a36-4f10-b46c-b30203fba415",
        "body" : "Ok. That's reasonable.",
        "createdAt" : "2018-10-30T13:20:13Z",
        "updatedAt" : "2018-10-30T13:54:48Z",
        "lastEditedBy" : "5c95ce24-8a36-4f10-b46c-b30203fba415",
        "tags" : [
        ]
      }
    ],
    "commit" : "3eef78342c0d5676f4c6d7e2974049e6a12d32fa",
    "line" : 344,
    "diffHunk" : "@@ -1,1 +838,842 @@    elif action == 'args_present':\n        if [arg for arg in parse_module_arguments(module.params['module_arguments']) if arg.startswith(\"[\")]:\n            module.fail_json(msg=\"Unable to process bracketed '[' complex arguments with 'args_present'. Please use 'updated'.\")\n\n        changes = service.add_module_arguments(module.params['type'], module.params['control'], module.params['module_path'],"
  },
  {
    "id" : "cb79e42a-3fb1-4799-bd98-d8e108e20345",
    "prId" : 50111,
    "prUrl" : "https://github.com/ansible/ansible/pull/50111#pullrequestreview-190743284",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9111c4c7-aced-47e5-bf64-d9b1ab8dfafa",
        "parentId" : null,
        "authorId" : "0d301bd1-6b47-409f-ac92-439b799b2375",
        "body" : "I'm surprised you didn't alphabetize the choices . . . I'm fine with merging this as-is, or changing it, just thought it might bother you in future.",
        "createdAt" : "2019-01-09T12:34:13Z",
        "updatedAt" : "2019-01-18T00:39:44Z",
        "lastEditedBy" : "0d301bd1-6b47-409f-ac92-439b799b2375",
        "tags" : [
        ]
      },
      {
        "id" : "4a031d2b-15b4-4995-9883-c14f73317373",
        "parentId" : "9111c4c7-aced-47e5-bf64-d9b1ab8dfafa",
        "authorId" : "7268595c-1eb4-4b5f-9277-90f183130a4b",
        "body" : "```suggestion\r\n    choices: [ absent, after, args_absent, args_present, before, updated ]\r\n```\r\nHaha, I would have done that, but sometimes I can restrain myself from doing more than intended. This was such a time I guess :-P",
        "createdAt" : "2019-01-09T14:12:27Z",
        "updatedAt" : "2019-01-18T00:39:44Z",
        "lastEditedBy" : "7268595c-1eb4-4b5f-9277-90f183130a4b",
        "tags" : [
        ]
      }
    ],
    "commit" : "4a01a72de3c70610a011680ad4472e2113e8ac51",
    "line" : 124,
    "diffHunk" : "@@ -1,1 +84,88 @@    - State C(absent) will remove the rule.  The 'absent' state was added in Ansible 2.4.\n    type: str\n    choices: [ absent, before, after, args_absent, args_present, updated ]\n    default: updated\n  path:"
  }
]