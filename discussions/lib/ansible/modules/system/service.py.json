[
  {
    "id" : "0b0aeb4c-d4a2-44b0-ab84-2b52e55d8665",
    "prId" : 58528,
    "prUrl" : "https://github.com/ansible/ansible/pull/58528#pullrequestreview-259808049",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0b61a5c4-9790-446a-b56d-753a3f319310",
        "parentId" : null,
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "we had this before and had to remove as this would always 'succeed' while services would fail to start up, so if we have to do it for 'bg' services, it should be conditional and only applied to those.",
        "createdAt" : "2019-06-28T21:34:00Z",
        "updatedAt" : "2019-06-28T21:34:06Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "b3b1c8ec-76f7-4213-99a3-75e64bfc6103",
        "parentId" : "0b61a5c4-9790-446a-b56d-753a3f319310",
        "authorId" : "53298314-e63d-4a68-9b8f-b28088fecb72",
        "body" : "Thanks for the feedback.\r\n\r\nCould you point me to a specific commit or issue? I cannot reproduce this behaviour. With the changes above in place, failing services seem to be recognised as such for me:\r\n\r\nFailing `rc_bg=YES` service:\r\n```\r\n~ % ansible temp -i hosts -u root -m service -a 'name=ypbind state=started'\r\ntemp01 | FAILED! => {\r\n    \"changed\": false,\r\n    \"msg\": \"ypbind(failed)\\n\"\r\n}\r\n```\r\n\r\nFailing `rc_bg=NO` service:\r\n```\r\n~ % ansible temp -i hosts -u root -m service -a 'name=bgpd state=started'\r\ntemp01 | FAILED! => {\r\n    \"changed\": false,\r\n    \"msg\": \"bgpd(failed)\\n\"\r\n}\r\n```\r\n\r\nBoth of these can be reproduced with a pristine OpenBSD target system after installing Python (`ansible temp -i hosts -u root -m raw -a 'pkg_add python%3'`).\r\n\r\nAm I missing something here?",
        "createdAt" : "2019-06-28T23:04:18Z",
        "updatedAt" : "2019-06-28T23:04:48Z",
        "lastEditedBy" : "53298314-e63d-4a68-9b8f-b28088fecb72",
        "tags" : [
        ]
      },
      {
        "id" : "5b62ec3b-56f4-440b-aa72-5d97abbb8884",
        "parentId" : "0b61a5c4-9790-446a-b56d-753a3f319310",
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "IIRC the original issue was with tomcat, it was triggered because the startup failure happened after the backgrounding and not immediately.",
        "createdAt" : "2019-07-02T14:16:49Z",
        "updatedAt" : "2019-07-02T14:17:53Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "890c07df-0b53-4a36-836f-182347bd1626",
        "parentId" : "0b61a5c4-9790-446a-b56d-753a3f319310",
        "authorId" : "53298314-e63d-4a68-9b8f-b28088fecb72",
        "body" : "Do you remember any additional details?\r\n\r\nI cannot reproduce any problems using tomcat and `daemonize=True` that do not occur using `daemonize=False` or running `rcctl start tomcat` locally.",
        "createdAt" : "2019-07-08T15:05:35Z",
        "updatedAt" : "2019-07-08T15:08:38Z",
        "lastEditedBy" : "53298314-e63d-4a68-9b8f-b28088fecb72",
        "tags" : [
        ]
      },
      {
        "id" : "055baa58-90fa-4f33-9dd8-efac33d19f4c",
        "parentId" : "0b61a5c4-9790-446a-b56d-753a3f319310",
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "sadly no, it was 'irc report' and we (mostly I) were not good at updating ticktes with all the info, since you cannot reproduce, I'll assume its a non issue now and will wait for someone to complain to then have to revisit this",
        "createdAt" : "2019-07-09T15:02:31Z",
        "updatedAt" : "2019-07-09T15:02:31Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "ff8e227f-e034-4eec-a06e-a7d4cae27a37",
        "parentId" : "0b61a5c4-9790-446a-b56d-753a3f319310",
        "authorId" : "53298314-e63d-4a68-9b8f-b28088fecb72",
        "body" : "Sounds good, thanks for your help!",
        "createdAt" : "2019-07-09T23:30:00Z",
        "updatedAt" : "2019-07-09T23:30:00Z",
        "lastEditedBy" : "53298314-e63d-4a68-9b8f-b28088fecb72",
        "tags" : [
        ]
      }
    ],
    "commit" : "4bd2b402ec82732936fbd2385d97ee961b53c440",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +1158,1162 @@    def service_control(self):\n        if self.enable_cmd:\n            return self.execute_command(\"%s -f %s %s\" % (self.svc_cmd, self.action, self.name), daemonize=True)\n        else:\n            return self.execute_command(\"%s -f %s\" % (self.svc_cmd, self.action))"
  },
  {
    "id" : "d32ecec8-2f7d-4600-a66a-d12377e88999",
    "prId" : 63990,
    "prUrl" : "https://github.com/ansible/ansible/pull/63990#pullrequestreview-307959364",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9259723e-c162-4eef-9f78-9b9e34bd2f0c",
        "parentId" : null,
        "authorId" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "body" : "```suggestion\r\n        return super(cls, new_cls).__new__(new_cls, *args, **kwargs)\r\n```",
        "createdAt" : "2019-10-28T16:36:06Z",
        "updatedAt" : "2019-10-30T10:54:32Z",
        "lastEditedBy" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "tags" : [
        ]
      }
    ],
    "commit" : "a59fe78c4389e0b3efe19ae7c20e5332a4ccfe1e",
    "line" : 20,
    "diffHunk" : "@@ -1,1 +171,175 @@    def __new__(cls, *args, **kwargs):\n        new_cls = get_platform_subclass(Service)\n        return super(cls, new_cls).__new__(new_cls)\n\n    def __init__(self, module):"
  }
]