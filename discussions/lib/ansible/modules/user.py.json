[
  {
    "id" : "2c7446a7-3a1b-4b4f-9d70-b10d71f9b98a",
    "prId" : 69531,
    "prUrl" : "https://github.com/ansible/ansible/pull/69531#pullrequestreview-432930084",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "104d293c-e077-430a-b98a-0978665463f6",
        "parentId" : null,
        "authorId" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "body" : "It looks like this only works on Linux. We should make this work on platforms that support it, or put a note here that it only works on Linux.",
        "createdAt" : "2020-06-16T19:11:26Z",
        "updatedAt" : "2021-02-09T21:30:55Z",
        "lastEditedBy" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "tags" : [
        ]
      },
      {
        "id" : "2d149eb7-bddd-431e-b5a0-8076bcd29081",
        "parentId" : "104d293c-e077-430a-b98a-0978665463f6",
        "authorId" : "530c5a8b-ee2a-4fd7-875c-0e801aeb856b",
        "body" : "okay working on that .",
        "createdAt" : "2020-06-18T04:20:12Z",
        "updatedAt" : "2021-02-09T21:30:55Z",
        "lastEditedBy" : "530c5a8b-ee2a-4fd7-875c-0e801aeb856b",
        "tags" : [
        ]
      }
    ],
    "commit" : "d8e277c260c78fded00254ab65c66b79bb71240d",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +241,245 @@    password_expire_max:\n        description:\n            - Maximum number of days between password change.\n            - Supported on Linux only.\n        type: int"
  },
  {
    "id" : "d6d0dc2c-1f73-4796-b4d0-849f609e774d",
    "prId" : 71952,
    "prUrl" : "https://github.com/ansible/ansible/pull/71952#pullrequestreview-654847317",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "81c20c41-ff90-4561-80d2-907cc5d870d5",
        "parentId" : null,
        "authorId" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "body" : "It should be ok to stop iterating through the file once we get a match.\r\n```suggestion\r\n                                umask_string = m.group(1)\r\n                                break\r\n```",
        "createdAt" : "2021-05-07T14:46:51Z",
        "updatedAt" : "2021-05-07T14:53:24Z",
        "lastEditedBy" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "tags" : [
        ]
      },
      {
        "id" : "46e33ccc-b7e6-4642-a85c-ceb06ab14087",
        "parentId" : "81c20c41-ff90-4561-80d2-907cc5d870d5",
        "authorId" : "1b4c7f3f-ad0b-453c-bddf-c74d468615ca",
        "body" : "Sorry for being picky here, but this is not just an optimization, but also a change in behaviour. The old code takes the last value of `UMASK` in `/etc/login.defs` and the new one the first. I made a quick check on a Centos 8 system and at least `useradd` takes the **last** value of UMASK if there are multiple entries in `/etc/login.defs`. Hence I would propose to leave the code as is but add a comment that on purpose we don't do a break after a match as we want to get the last value just like `useradd`.",
        "createdAt" : "2021-05-07T19:06:54Z",
        "updatedAt" : "2021-05-07T19:07:40Z",
        "lastEditedBy" : "1b4c7f3f-ad0b-453c-bddf-c74d468615ca",
        "tags" : [
        ]
      },
      {
        "id" : "fe7c97ea-8879-4ab8-bbf7-ebee76b82f7c",
        "parentId" : "81c20c41-ff90-4561-80d2-907cc5d870d5",
        "authorId" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "body" : "That's a very good point. I haven't ever encountered an `/etc/login.defs` file with more than one `UMASK` definition so it's not something I thought of. We can just leave it as is.",
        "createdAt" : "2021-05-07T20:36:09Z",
        "updatedAt" : "2021-05-07T20:36:09Z",
        "lastEditedBy" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "tags" : [
        ]
      }
    ],
    "commit" : "6e265a62f82c329feea1b5ab502007af5e257a54",
    "line" : 63,
    "diffHunk" : "@@ -1,1 +1245,1249 @@                            m = re.match(r'^UMASK\\s+(\\d+)$', line)\n                            if m:\n                                umask_string = m.group(1)\n            # set correct home mode if we have a umask\n            if umask_string is not None:"
  },
  {
    "id" : "c6a52000-2b84-4d30-b8c8-39e95597b6a6",
    "prId" : 73821,
    "prUrl" : "https://github.com/ansible/ansible/pull/73821#pullrequestreview-637877821",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4ec5d497-a8b2-4612-a1f4-f45d949858b1",
        "parentId" : null,
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "It looks like this won't work with `luseradd`, just `useradd`. We should check this option isn't provided with the `local` option. Looks good to merge after that :+1:",
        "createdAt" : "2021-04-16T15:06:24Z",
        "updatedAt" : "2021-04-20T15:46:39Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "eb800fbf-4656-44f7-8ba9-0fc5d35b7daf",
        "parentId" : "4ec5d497-a8b2-4612-a1f4-f45d949858b1",
        "authorId" : "8154ea17-f539-4603-80a4-ed570a00f1f7",
        "body" : "@s-hertel I've set this to fail when both options have values.\r\nIf this needs to change to warn that `umask` will not be set and check whenever `umask` has been set when both options have values, please tell me to change this.",
        "createdAt" : "2021-04-16T16:21:09Z",
        "updatedAt" : "2021-04-20T15:46:39Z",
        "lastEditedBy" : "8154ea17-f539-4603-80a4-ed570a00f1f7",
        "tags" : [
        ]
      }
    ],
    "commit" : "234b03f1bd9753f775c3bcd1d795e684d2a8f43e",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +538,542 @@        self.password_expire_max = module.params['password_expire_max']\n        self.password_expire_min = module.params['password_expire_min']\n        self.umask = module.params['umask']\n\n        if self.umask is not None and self.local:"
  }
]