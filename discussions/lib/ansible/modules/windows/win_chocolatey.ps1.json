[
  {
    "id" : "e15a020c-d10a-403f-91a2-d986f360b193",
    "prId" : 22515,
    "prUrl" : "https://github.com/ansible/ansible/pull/22515#pullrequestreview-59604876",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "01db660b-2837-4292-868a-80cc423633dc",
        "parentId" : null,
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "While I don't think you should use this as it changes the global config, it currently doesn't work as it needs you to set `-proxy_url`, `-proxy_username`, `-proxy_password` as it is expecting those params. I don't think the `choco config set` and `choco config unset` should be used as it is a global setting and users may be unaware that setting this can affect it when they run it locally\r\n\r\nInstead I think you should use the explicit proxy settings at runtime as shown here https://chocolatey.org/docs/proxy-settings-for-chocolatey#installing-chocolatey-behind-a-proxy-server. It does have a dependency on a relatively new version of chocolatey but I think the benefits outweigh the negatives here and we can just simply say in the documentation these parameters require version `0.10.4` or newer.\r\n\r\nIf you feel really adventurous you can try and parse the version and fail if it is older and the proxy params are set.",
        "createdAt" : "2017-08-28T00:16:58Z",
        "updatedAt" : "2017-08-29T15:33:01Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      },
      {
        "id" : "edc4e3a9-6732-48a5-959a-bf8213d95798",
        "parentId" : "01db660b-2837-4292-868a-80cc423633dc",
        "authorId" : "7268595c-1eb4-4b5f-9277-90f183130a4b",
        "body" : "My concerns are with not using standard parameter names and values for the proxy. I would much rather see **proxy** and **no_proxy** options and the same behavior as other modules (using the system-wide proxy settings, if set). See the **get_url** or **win_get_url** (https://github.com/ansible/ansible/pull/26612) module options.",
        "createdAt" : "2017-08-29T15:40:10Z",
        "updatedAt" : "2017-08-29T15:42:02Z",
        "lastEditedBy" : "7268595c-1eb4-4b5f-9277-90f183130a4b",
        "tags" : [
        ]
      },
      {
        "id" : "4b319434-f20b-4145-98d1-815ad596594e",
        "parentId" : "01db660b-2837-4292-868a-80cc423633dc",
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "Agree with that @dagwieers but I think it is too late to work in the `use_proxy` option, currently these changes work with the currently set system proxy so at least we have the default action there. It shouldn't be too hard to work in the `use_proxy: no` option to disable the system proxy but prefer to leave that for another PR.",
        "createdAt" : "2017-08-29T19:48:03Z",
        "updatedAt" : "2017-08-29T19:48:03Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      },
      {
        "id" : "49abc4e2-3a4a-4b9c-8ebe-f98db7ac6162",
        "parentId" : "01db660b-2837-4292-868a-80cc423633dc",
        "authorId" : "babf2682-ca6a-4cb7-9930-a49cdef591e7",
        "body" : "Great thing if proxy support can make its way into 2.4 , Thanks @jborean93\r\n\r\nNot modifying global chocolatey configuration looks neat too. Support for `--proxy-bypass-list` and `--proxy-bypass-on-local` parameters should be added too.\r\n\r\nReading the docs at https://chocolatey.org/docs/proxy-settings-for-chocolatey#installing-chocolatey-behind-a-proxy-server I realize that with chololatey  0.10.4+ versions, proxy should also work through the use of the following env variables : `http_proxy`, `https_proxy`, `no_proxy` making it easier to work with proxies through ansible than it was before.\r\n\r\nAlso one question comes to mind, what happens if a proxy is globally set on chocolatey install but we don't want to use one through ansible. (weird improbable case I admit)",
        "createdAt" : "2017-08-30T15:47:50Z",
        "updatedAt" : "2017-08-30T15:47:50Z",
        "lastEditedBy" : "babf2682-ca6a-4cb7-9930-a49cdef591e7",
        "tags" : [
        ]
      },
      {
        "id" : "99709a46-d9e5-4635-a85b-56c9a0450675",
        "parentId" : "01db660b-2837-4292-868a-80cc423633dc",
        "authorId" : "7268595c-1eb4-4b5f-9277-90f183130a4b",
        "body" : "I already mentioned this, that's what **no_proxy** is for. Look at the **win_get_url** module. The **proxy_url** parameter should be renamed to **proxy** as that's the standard name used by other modules.",
        "createdAt" : "2017-08-30T15:54:00Z",
        "updatedAt" : "2017-08-30T15:54:00Z",
        "lastEditedBy" : "7268595c-1eb4-4b5f-9277-90f183130a4b",
        "tags" : [
        ]
      }
    ],
    "commit" : "2c9e93d46d48f92c4ab2dc97b88d1a3bc45afea0",
    "line" : 84,
    "diffHunk" : "@@ -1,1 +495,499 @@    Chocolatey-Install-Upgrade\n\n    Choco-ConfigureProxy\n\n    if ($state -eq \"present\" -or $state -eq \"latest\")"
  }
]