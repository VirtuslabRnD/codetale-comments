[
  {
    "id" : "486efe1c-559f-4f2d-a129-6f3c4876bcff",
    "prId" : 23604,
    "prUrl" : "https://github.com/ansible/ansible/pull/23604#pullrequestreview-39658835",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "012f7c08-7ba5-48c4-9db1-5ad12e0ec766",
        "parentId" : null,
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "you should set `$result.changed = $true` when running this.",
        "createdAt" : "2017-05-13T01:44:38Z",
        "updatedAt" : "2017-05-23T07:04:08Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      },
      {
        "id" : "1fd1ca3e-2cc4-4e30-9122-1d3b3f4c9cbd",
        "parentId" : "012f7c08-7ba5-48c4-9db1-5ad12e0ec766",
        "authorId" : "c9c78c2d-9bd5-48bc-b1df-4305f3cddc6a",
        "body" : "this step installs the nuget package provider if not present (needed to installs module from Powershell Gallery), but doesn't  add any modules, so I'm not sure that  $result.changed has to be set $true ",
        "createdAt" : "2017-05-15T07:37:01Z",
        "updatedAt" : "2017-05-23T07:04:08Z",
        "lastEditedBy" : "c9c78c2d-9bd5-48bc-b1df-4305f3cddc6a",
        "tags" : [
        ]
      },
      {
        "id" : "5ff5c057-5444-43d5-9fef-9ac1fd3735d1",
        "parentId" : "012f7c08-7ba5-48c4-9db1-5ad12e0ec766",
        "authorId" : "7268595c-1eb4-4b5f-9277-90f183130a4b",
        "body" : "Yes, if it changes something on the system, it should result in a change. win_chocolatey does something similar. One could argue if a module should do anything more than managing the object(s) it has control over, but for convenience sometimes more is managed.",
        "createdAt" : "2017-05-15T09:34:01Z",
        "updatedAt" : "2017-05-23T07:04:08Z",
        "lastEditedBy" : "7268595c-1eb4-4b5f-9277-90f183130a4b",
        "tags" : [
        ]
      },
      {
        "id" : "4ce767af-713f-404f-90cd-3dbe5f5bf357",
        "parentId" : "012f7c08-7ba5-48c4-9db1-5ad12e0ec766",
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "I agree I think if a module makes a change to the system regardless of what that change was it should report it.",
        "createdAt" : "2017-05-15T09:35:17Z",
        "updatedAt" : "2017-05-23T07:04:08Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      },
      {
        "id" : "10662640-c6ac-4de7-878a-ac241e1a50c0",
        "parentId" : "012f7c08-7ba5-48c4-9db1-5ad12e0ec766",
        "authorId" : "c9c78c2d-9bd5-48bc-b1df-4305f3cddc6a",
        "body" : "ok, but if the package provider is installed and then the module installation fail, the Fail-Json will return changed: true without specifying what is changed. It's correct?",
        "createdAt" : "2017-05-15T15:47:50Z",
        "updatedAt" : "2017-05-23T07:04:08Z",
        "lastEditedBy" : "c9c78c2d-9bd5-48bc-b1df-4305f3cddc6a",
        "tags" : [
        ]
      },
      {
        "id" : "2accfee0-09ba-471f-85ad-5f9cbe64269c",
        "parentId" : "012f7c08-7ba5-48c4-9db1-5ad12e0ec766",
        "authorId" : "7268595c-1eb4-4b5f-9277-90f183130a4b",
        "body" : "That's correct. A failed task can have changes. And true, often modules do not clearly state what was changed, just that something changed. That's the problem when a module does more than manage one type of object (and one object).",
        "createdAt" : "2017-05-15T23:01:19Z",
        "updatedAt" : "2017-05-23T07:04:08Z",
        "lastEditedBy" : "7268595c-1eb4-4b5f-9277-90f183130a4b",
        "tags" : [
        ]
      },
      {
        "id" : "035fe0bb-d101-4ee9-8483-e6405af696c0",
        "parentId" : "012f7c08-7ba5-48c4-9db1-5ad12e0ec766",
        "authorId" : "e84e8bad-0cc3-4284-9eb8-2a921978042a",
        "body" : "You could probably add a `\"nuget_changed\": true/false` to the result object in any case, so that it's possible to pickup exactly what was changed.",
        "createdAt" : "2017-05-21T12:23:53Z",
        "updatedAt" : "2017-05-23T07:04:08Z",
        "lastEditedBy" : "e84e8bad-0cc3-4284-9eb8-2a921978042a",
        "tags" : [
        ]
      },
      {
        "id" : "52e8b370-53e4-42a3-ad4f-4921dd30e085",
        "parentId" : "012f7c08-7ba5-48c4-9db1-5ad12e0ec766",
        "authorId" : "c9c78c2d-9bd5-48bc-b1df-4305f3cddc6a",
        "body" : "I added ```nuget_changed``` and ```repository_changed``` to notify if something was changed also if module installation fails.",
        "createdAt" : "2017-05-23T07:17:07Z",
        "updatedAt" : "2017-05-23T07:17:07Z",
        "lastEditedBy" : "c9c78c2d-9bd5-48bc-b1df-4305f3cddc6a",
        "tags" : [
        ]
      }
    ],
    "commit" : "e7a8f5d75d94378149c3add41c9d316d2ad329e2",
    "line" : 45,
    "diffHunk" : "@@ -1,1 +43,47 @@  if (!($PackageProvider)){\n      try{\n        Install-PackageProvider -Name NuGet -MinimumVersion 2.8.5.201 -Force -ErrorAction Stop -WhatIf:$CheckMode | out-null\n        $result.changed = $true\n        $result.nuget_changed = $true"
  },
  {
    "id" : "aa70923c-5270-4f5f-b4a0-11b50e883080",
    "prId" : 39909,
    "prUrl" : "https://github.com/ansible/ansible/pull/39909#pullrequestreview-121017259",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "172f1115-113b-4976-9672-9b8bd2a574da",
        "parentId" : null,
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "Can just do `$ht[\"Repository\"] = $Repository`, no need to enclose it in a string. Another part which is just a minor nitpick and you don't have to do anything is that lines don't need to end with `;` in PowerShell. Personally I think it detracts from the code but that's just me.",
        "createdAt" : "2018-05-17T03:10:53Z",
        "updatedAt" : "2018-05-22T21:02:36Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      },
      {
        "id" : "6cbce36b-7090-4207-9a74-ae3ef01d0042",
        "parentId" : "172f1115-113b-4976-9672-9b8bd2a574da",
        "authorId" : null,
        "body" : "You're right, it's just a preference on my part.\r\nAlso, double-quoting forces string conversion, which has become a habit of mine after being burned with some weird scripts, but here it's not necessary. I guess it just helps the eye pick up the type of the data from the context.",
        "createdAt" : "2018-05-17T04:09:30Z",
        "updatedAt" : "2018-05-22T21:02:36Z",
        "lastEditedBy" : null,
        "tags" : [
        ]
      },
      {
        "id" : "664df047-0bd7-431d-820d-d428fe634337",
        "parentId" : "172f1115-113b-4976-9672-9b8bd2a574da",
        "authorId" : null,
        "body" : "Thank you for your continued help and advices, without your aid I would have had a hard time figuring out how things clicked!\r\n\r\nIt was my pleasure, and feel good to put my work to the use of so many others.",
        "createdAt" : "2018-05-17T12:30:26Z",
        "updatedAt" : "2018-05-22T21:02:36Z",
        "lastEditedBy" : null,
        "tags" : [
        ]
      }
    ],
    "commit" : "84c6e32964445b73617766205778443b24f84769",
    "line" : 28,
    "diffHunk" : "@@ -1,1 +130,134 @@        # If specified, use repository name to select module source\n        if ($Repository) {\n            $ht[\"Repository\"] = \"$Repository\";\n        }\n"
  }
]