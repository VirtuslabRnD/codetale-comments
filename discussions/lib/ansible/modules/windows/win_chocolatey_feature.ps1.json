[
  {
    "id" : "9b802268-b6aa-452f-b07b-fa4d7fed000f",
    "prId" : 42848,
    "prUrl" : "https://github.com/ansible/ansible/pull/42848#pullrequestreview-138025220",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c5cd39e4-109e-4da4-88b8-05bbc0aec727",
        "parentId" : null,
        "authorId" : "6c257428-9744-4552-bc88-844139f5cb7e",
        "body" : "The recommended command here would be:\r\n\r\n`choco feature enable --name=\"'<name>'\"`",
        "createdAt" : "2018-07-17T09:38:03Z",
        "updatedAt" : "2018-07-17T21:28:06Z",
        "lastEditedBy" : "6c257428-9744-4552-bc88-844139f5cb7e",
        "tags" : [
        ]
      },
      {
        "id" : "7e87a3e2-a580-43d3-ae1b-79486efc6460",
        "parentId" : "c5cd39e4-109e-4da4-88b8-05bbc0aec727",
        "authorId" : "6c257428-9744-4552-bc88-844139f5cb7e",
        "body" : "While the command you have will work, it is not best practice.",
        "createdAt" : "2018-07-17T09:38:23Z",
        "updatedAt" : "2018-07-17T21:28:06Z",
        "lastEditedBy" : "6c257428-9744-4552-bc88-844139f5cb7e",
        "tags" : [
        ]
      },
      {
        "id" : "51f048b2-8362-4b80-8136-ea3b1d2329f6",
        "parentId" : "c5cd39e4-109e-4da4-88b8-05bbc0aec727",
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "I have a few questions\r\n\r\n* Why the double quoting `\" and '` of the value, surely having separate arguments (that are correctly escaped) is a better option\r\n* Is it a preference from Chocolatey from a docs and ensuring user's escape correctly or is the parser expecting this format\r\n\r\nThis is calling `CreateProcessW` directly so cmd shell quotes don't take effect here, only `\"` is used in this layer when being parsed by Windows.\r\n\r\nWhile in this module it isn't as important, other modules we have a special function that takes in an array of args and correctly escapes them so the program receive those args as written (without the user escaping them themselves). The Chocolatey preferred format `--key=\"'value'\"` won't work well with the function we have while the `--key value` format is a lot easier.",
        "createdAt" : "2018-07-17T09:51:45Z",
        "updatedAt" : "2018-07-17T21:28:06Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      },
      {
        "id" : "0a400ba6-280a-4295-a156-fa4dd5cb32a9",
        "parentId" : "c5cd39e4-109e-4da4-88b8-05bbc0aec727",
        "authorId" : "6c257428-9744-4552-bc88-844139f5cb7e",
        "body" : "Due to the myriad of escaping, and quote removal, and potential for spaces in paths/names, etc. that happens when interacting between cmd and powershell, etc. our guidance/best practice is always to use the equivalent of this:\r\n\r\n`choco feature enable --name=\"'<featureName>'\"`\r\n\r\nfor each Chocolatey command.  We have found that this is the most resilient way to correctly pass the intended parameters into Chocolatey, and have them be recognised.\r\n\r\nArguably, this isn't needed here, since feature names will never have spaces, etc.  However, if someone were to look at this command, and how it is doing something, and then apply the same to another Chocolatey command, it might not work as intended.",
        "createdAt" : "2018-07-17T10:53:30Z",
        "updatedAt" : "2018-07-17T21:28:06Z",
        "lastEditedBy" : "6c257428-9744-4552-bc88-844139f5cb7e",
        "tags" : [
        ]
      },
      {
        "id" : "8b8312c2-1d7a-480f-9b10-89cc7f36144d",
        "parentId" : "c5cd39e4-109e-4da4-88b8-05bbc0aec727",
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "Cool, so sounds like it's more getting users to escape their args correctly. From a maintainability perspective I feel like keeping the existing format is better for us. If a user copies and paste what we are doing then the onus is on them to figure out what is going wrong then just blindly copying it. There are plenty of docs in Chocolatey to cover these scenarios as well.",
        "createdAt" : "2018-07-17T21:25:40Z",
        "updatedAt" : "2018-07-17T21:28:06Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      }
    ],
    "commit" : "64167ec699a676991c502ee5c31a37bb3a74d090",
    "line" : 49,
    "diffHunk" : "@@ -1,1 +47,51 @@        $state_string = \"disable\"\n    }\n    $res = Run-Command -command \"`\"$($choco_app.Path)`\" feature $state_string --name `\"$name`\"\"\n    if ($res.rc -ne 0) {\n        Fail-Json -obj $result -message \"Failed to set Chocolatey feature $name to $($state_string): $($res.stderr)\""
  }
]