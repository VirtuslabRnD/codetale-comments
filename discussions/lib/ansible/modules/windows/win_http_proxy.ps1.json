[
  {
    "id" : "530e37c3-306e-4fb4-b2e1-46b0ae04d0a7",
    "prId" : 54631,
    "prUrl" : "https://github.com/ansible/ansible/pull/54631#pullrequestreview-221892494",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b49dbe1c-ec24-4b8f-b36b-3fb0951fa84e",
        "parentId" : null,
        "authorId" : "2dcfc3b0-1249-4685-a70a-e872d1c4e215",
        "body" : "IIRC, the underlying \"import from IE\" logic provided by Microsoft silently ignores the autoconfig URL -- which seems to be a mistake to me. Do we want to propagate that behavior? I suspect a warning would be better.",
        "createdAt" : "2019-04-01T16:35:11Z",
        "updatedAt" : "2019-04-04T23:33:55Z",
        "lastEditedBy" : "2dcfc3b0-1249-4685-a70a-e872d1c4e215",
        "tags" : [
        ]
      },
      {
        "id" : "db02b15b-a707-4440-88fb-2f3219849a04",
        "parentId" : "b49dbe1c-ec24-4b8f-b36b-3fb0951fa84e",
        "authorId" : "2dcfc3b0-1249-4685-a70a-e872d1c4e215",
        "body" : "(Admittedly, I haven't actually looked at that in a very long time, so I could be mis-remembering.)",
        "createdAt" : "2019-04-01T17:07:44Z",
        "updatedAt" : "2019-04-04T23:33:55Z",
        "lastEditedBy" : "2dcfc3b0-1249-4685-a70a-e872d1c4e215",
        "tags" : [
        ]
      },
      {
        "id" : "f05a79b4-813a-40f0-a265-a603d009db70",
        "parentId" : "b49dbe1c-ec24-4b8f-b36b-3fb0951fa84e",
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "I couldn't find any way to actually set an auto config url in netsh/winhttp so I think it is a limitation of the latter? Could be wrong but the [WINHTTP_PROXY_INFO](https://docs.microsoft.com/en-us/windows/desktop/api/Winhttp/ns-winhttp-__unnamed_struct_3) structure does not have a field for this.\r\n\r\nThis sounds like more of a documentation thing with the potential of adding this in as a separate param if it is possible.",
        "createdAt" : "2019-04-01T19:26:35Z",
        "updatedAt" : "2019-04-04T23:33:55Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      },
      {
        "id" : "fb51966d-3138-4e5d-9f08-3cc2bf6e7a88",
        "parentId" : "b49dbe1c-ec24-4b8f-b36b-3fb0951fa84e",
        "authorId" : "2dcfc3b0-1249-4685-a70a-e872d1c4e215",
        "body" : "Sorry, I guess I wasn't clear. The \"mistake\" I was referring to was the fact that netsh doing this type of import **_silently_** ignores the auto-config URL (IIRC).\r\n\r\nI'm not surprised that there's no winhttp option for this, since that would imply winhttp.dll having a JS interpreter (which doesn't match well with its use-case). From that perspective, _ignoring_ the auto-config URL when doing an import is entirely reasonable on MS' part -- **_except_** if it is done silently. IMHO that should really be a warning.",
        "createdAt" : "2019-04-01T19:40:15Z",
        "updatedAt" : "2019-04-04T23:33:55Z",
        "lastEditedBy" : "2dcfc3b0-1249-4685-a70a-e872d1c4e215",
        "tags" : [
        ]
      },
      {
        "id" : "40be8a6a-6fa5-4ee8-ab68-57599fc66fb8",
        "parentId" : "b49dbe1c-ec24-4b8f-b36b-3fb0951fa84e",
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "Hmm I might be missing something, it's early morning here. Just to double check you are saying that the netsh import doesn't use the auto config value at all? That's the assumption that I was under. The trouble with adding warnings to modules is that it will automatically display when being used. This case is more suited towards documentation where people reading the options should be aware that `source: ie` will just import the proxy URL and bypass list.",
        "createdAt" : "2019-04-01T19:53:14Z",
        "updatedAt" : "2019-04-04T23:33:55Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      },
      {
        "id" : "40e400b4-6c5f-408f-a8e1-be5487cb9934",
        "parentId" : "b49dbe1c-ec24-4b8f-b36b-3fb0951fa84e",
        "authorId" : "2dcfc3b0-1249-4685-a70a-e872d1c4e215",
        "body" : "RE not used at all -- correct. (I'm still going from memory on that one, but that is how I remember it.) More specifically, if you import from IE, which _only_ is set to use a [valid] auto-config script, you'll get nothing whatsoever in the winhttp settings.\r\n\r\nAs far warning or doc, my _preference_ would be to do both, but I won't get up on a high horse about it either way. :-)",
        "createdAt" : "2019-04-01T20:05:55Z",
        "updatedAt" : "2019-04-04T23:33:55Z",
        "lastEditedBy" : "2dcfc3b0-1249-4685-a70a-e872d1c4e215",
        "tags" : [
        ]
      },
      {
        "id" : "c50ffcc8-02ff-4ca9-a555-c6fcddb4767f",
        "parentId" : "b49dbe1c-ec24-4b8f-b36b-3fb0951fa84e",
        "authorId" : "2dcfc3b0-1249-4685-a70a-e872d1c4e215",
        "body" : "(Should probably actually double-check my recollection on this first though. We'd all feel really silly if I'm remembering wrong.)",
        "createdAt" : "2019-04-01T20:07:49Z",
        "updatedAt" : "2019-04-04T23:33:55Z",
        "lastEditedBy" : "2dcfc3b0-1249-4685-a70a-e872d1c4e215",
        "tags" : [
        ]
      },
      {
        "id" : "b92d6305-9ff0-48b8-94a6-c640fa73dd4e",
        "parentId" : "b49dbe1c-ec24-4b8f-b36b-3fb0951fa84e",
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "Cool so yes the import is only for explicit proxy URLs and bypass list. I'll update the docs to further clarify this but I don't think a warning is necessary. This is up to the user making sure they understand the behaviour and read the docs.",
        "createdAt" : "2019-04-01T20:12:51Z",
        "updatedAt" : "2019-04-04T23:33:55Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      },
      {
        "id" : "b10ca53d-ee65-4b2b-8588-fe83d69ac09e",
        "parentId" : "b49dbe1c-ec24-4b8f-b36b-3fb0951fa84e",
        "authorId" : "2dcfc3b0-1249-4685-a70a-e872d1c4e215",
        "body" : "Good enough for me.",
        "createdAt" : "2019-04-01T20:18:03Z",
        "updatedAt" : "2019-04-04T23:33:55Z",
        "lastEditedBy" : "2dcfc3b0-1249-4685-a70a-e872d1c4e215",
        "tags" : [
        ]
      },
      {
        "id" : "573e5ad6-c95a-47f7-8112-810e658bdf07",
        "parentId" : "b49dbe1c-ec24-4b8f-b36b-3fb0951fa84e",
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "I also found [WinHttpGetProxyForUrl](https://docs.microsoft.com/en-us/windows/desktop/api/winhttp/nf-winhttp-winhttpgetproxyforurl) which seems to be the mechanism for WinHTTP applications to support auto config urls. This indicates it's up to the application to look this up and set on their requests and not a system wide setting.\r\n\r\nhttps://docs.microsoft.com/en-us/windows/desktop/WinHttp/winhttp-autoproxy-api for some more info.",
        "createdAt" : "2019-04-02T19:32:59Z",
        "updatedAt" : "2019-04-04T23:33:55Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      },
      {
        "id" : "93fb9ded-ad58-4c89-a90a-79acc042c433",
        "parentId" : "b49dbe1c-ec24-4b8f-b36b-3fb0951fa84e",
        "authorId" : "2dcfc3b0-1249-4685-a70a-e872d1c4e215",
        "body" : "Yeah, your second link is pretty succinct on the matter:\r\n> AutoProxy support is not fully integrated into the HTTP stack in WinHTTP. Before sending a request, the application must call ...\r\n\r\nIn that respect, your doc content changes look good.",
        "createdAt" : "2019-04-02T20:44:29Z",
        "updatedAt" : "2019-04-04T23:33:55Z",
        "lastEditedBy" : "2dcfc3b0-1249-4685-a70a-e872d1c4e215",
        "tags" : [
        ]
      }
    ],
    "commit" : "5b6430dba276059b7aeeab4c3b761666abed8195",
    "line" : 221,
    "diffHunk" : "@@ -1,1 +219,223 @@}\n\nif ($source -eq \"ie\") {\n    # If source=ie we need to get the server and bypass values from the IE configuration\n    $ie_proxy = [Ansible.WinHttpProxy.WinHttpProxy]::GetIEProxyConfig()"
  },
  {
    "id" : "6262352c-ad05-4ba0-a86c-67590a77c908",
    "prId" : 54631,
    "prUrl" : "https://github.com/ansible/ansible/pull/54631#pullrequestreview-221321010",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0a734d20-7ea0-415f-b1bc-554dabcce60e",
        "parentId" : null,
        "authorId" : "2dcfc3b0-1249-4685-a70a-e872d1c4e215",
        "body" : "Should probably fail if `$bypass` is set to something but `$proxy` is not. (The `required_by` check isn't that strict.)",
        "createdAt" : "2019-04-01T17:23:20Z",
        "updatedAt" : "2019-04-04T23:33:55Z",
        "lastEditedBy" : "2dcfc3b0-1249-4685-a70a-e872d1c4e215",
        "tags" : [
        ]
      },
      {
        "id" : "144f6656-6be5-4314-ba15-566cdbdc23b6",
        "parentId" : "0a734d20-7ea0-415f-b1bc-554dabcce60e",
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "Not sure what you mean, `required_by` does exactly that and it's part of the integration tests.",
        "createdAt" : "2019-04-01T19:33:08Z",
        "updatedAt" : "2019-04-04T23:33:55Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      },
      {
        "id" : "ecf32e16-764c-4cee-99a3-f5de83305969",
        "parentId" : "0a734d20-7ea0-415f-b1bc-554dabcce60e",
        "authorId" : "2dcfc3b0-1249-4685-a70a-e872d1c4e215",
        "body" : "I can double-check, but I thought setting proxy to an empty string would break the check.",
        "createdAt" : "2019-04-01T20:00:58Z",
        "updatedAt" : "2019-04-04T23:33:55Z",
        "lastEditedBy" : "2dcfc3b0-1249-4685-a70a-e872d1c4e215",
        "tags" : [
        ]
      },
      {
        "id" : "72fe911a-655c-43c7-b270-a2c9dc838f45",
        "parentId" : "0a734d20-7ea0-415f-b1bc-554dabcce60e",
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "Ah yes that's a good point, forgot that `proxy: ''` means no proxy at all. Will fix up.",
        "createdAt" : "2019-04-01T20:11:26Z",
        "updatedAt" : "2019-04-04T23:33:55Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      }
    ],
    "commit" : "5b6430dba276059b7aeeab4c3b761666abed8195",
    "line" : 64,
    "diffHunk" : "@@ -1,1 +62,66 @@    }\n    $bypass = $bypass -join ';'\n}\n\n$win_http_invoke = @'"
  }
]