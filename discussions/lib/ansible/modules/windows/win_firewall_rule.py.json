[
  {
    "id" : "9e03220c-18f6-4fde-b95d-d5585dda25ae",
    "prId" : 55013,
    "prUrl" : "https://github.com/ansible/ansible/pull/55013#pullrequestreview-224703633",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b0250549-ccc6-4b88-a14e-c67f9ae9f028",
        "parentId" : null,
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "Is there not already a builtin rule that we can just enable?",
        "createdAt" : "2019-04-09T23:43:07Z",
        "updatedAt" : "2019-11-14T00:06:49Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      }
    ],
    "commit" : "f71ec1042aedf395b755886f08dafe3706bb9f76",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +158,162 @@- name: Firewall rule to allow ICMP v4 echo (ping)\n  win_firewall_rule:\n    name: ICMP Allow incoming V4 echo request\n    enabled: yes\n    state: present"
  },
  {
    "id" : "6780d84b-c64a-45a2-964d-41c21ec5cf56",
    "prId" : 55013,
    "prUrl" : "https://github.com/ansible/ansible/pull/55013#pullrequestreview-225876955",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2819de49-f115-4d1e-b828-d4596be2f2fd",
        "parentId" : null,
        "authorId" : "7c547162-2334-4e33-a627-e146840da9ec",
        "body" : "Is there any documentation around this protocol?",
        "createdAt" : "2019-04-09T23:46:49Z",
        "updatedAt" : "2019-11-14T00:06:49Z",
        "lastEditedBy" : "7c547162-2334-4e33-a627-e146840da9ec",
        "tags" : [
        ]
      },
      {
        "id" : "6298ffb2-2ace-4f63-ac51-f428803be804",
        "parentId" : "2819de49-f115-4d1e-b828-d4596be2f2fd",
        "authorId" : "4f7de170-d750-4bb2-8f4b-431dc2f07475",
        "body" : "_Is there not already a builtin rule that we can just enable?_\r\nI didn't find one, and none of the examples on the internet worked for me, e.g. \r\n- name: Allow ICMP\r\n  win_firewall_rule:\r\n    name: File and Printer Sharing (Echo Request - ICMPv4-In)\r\n    action: allow\r\n    direction: in\r\n    enabled: yes\r\nfrom https://github.com/ansible/ansible/issues/32478\r\n\r\nEnvironment:\r\nansible 2.7.9 on OSX  via homebrew\r\nWindows 7 SP1, Windows 8.1, Windows 10 update 1809\r\n\r\n_Is there any documentation around this protocol?_\r\nI didn't find any ansible documentation around this, but there are many examples on the internet of using the \"netsh advfirewall\" command to accomplish this:\r\n`\r\nnetsh advfirewall firewall add rule name=\"ICMP Allow incoming V4 echo request\" protocol=icmpv4:8,any dir=in action=allow\r\n`\r\nhttps://www.howtogeek.com/howto/windows-vista/allow-pings-icmp-echo-request-through-your-windows-vista-firewall/\r\n\r\nI found this switch statement in ansible/lib/ansible/modules/windows/win_firewall_rule.ps1 that suggests this is possible, but I don't know how ansible is invoking that script...\r\n    switch -wildcard ($protocol) {\r\n        \"tcp\" { return [System.Net.Sockets.ProtocolType]::Tcp -as [int] }\r\n        \"udp\" { return [System.Net.Sockets.ProtocolType]::Udp -as [int] }\r\n        \"icmpv4*\" { return [System.Net.Sockets.ProtocolType]::Icmp -as [int] }\r\n        \"icmpv6*\" { return [System.Net.Sockets.ProtocolType]::IcmpV6 -as [int] }\r\n        default { throw \"Unknown protocol '$protocol'.\" }\r\n    }\r\n\r\n\r\nApologies for the delay in responding.",
        "createdAt" : "2019-04-12T02:47:37Z",
        "updatedAt" : "2019-11-14T00:06:49Z",
        "lastEditedBy" : "4f7de170-d750-4bb2-8f4b-431dc2f07475",
        "tags" : [
        ]
      }
    ],
    "commit" : "f71ec1042aedf395b755886f08dafe3706bb9f76",
    "line" : 21,
    "diffHunk" : "@@ -1,1 +164,168 @@    action: allow\n    direction: in\n    protocol: \"icmpv4:8,any\"\n'''"
  }
]