[
  {
    "id" : "4d5b0458-a5d7-45cd-ab09-af446e673560",
    "prId" : 28263,
    "prUrl" : "https://github.com/ansible/ansible/pull/28263#pullrequestreview-56849818",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d7c93897-7a6a-421e-af0b-3a84ca8f6728",
        "parentId" : null,
        "authorId" : "57db1e2a-9c1c-4c08-b54f-9731aff18e36",
        "body" : "This check and the ones below are harder/less correct than expected in the general case since you are just comparing strings at this point. Might work most of the time though and will work for me...\r\n\r\nMaybe add a \"TODO\" comment in case a few months/years down the road someone rewrites this module to use cryptography or whatever high level crypto library is popular by then. pyOpenSSL unfortunately is quite at the end of its life by now, but alternatives are not yet available for stable distributions.",
        "createdAt" : "2017-08-16T09:20:49Z",
        "updatedAt" : "2017-08-22T15:10:48Z",
        "lastEditedBy" : "57db1e2a-9c1c-4c08-b54f-9731aff18e36",
        "tags" : [
        ]
      },
      {
        "id" : "f93c02cc-61a0-49e6-8ce8-05d0ba58ebdc",
        "parentId" : "d7c93897-7a6a-421e-af0b-3a84ca8f6728",
        "authorId" : "f65394e6-7239-422a-9af5-c3575a283846",
        "body" : "Since I expect in both size ASN1.TIME format date, I expect the string comparison to be working all the time. Do you have specific case when it might not be the case?\r\n\r\nI admit it is volunteer here to use pyOpenSSL as much as possible in order to avoid to deal with cryptography so we keep things simple where possible. I'll put the TODO, because futur us and developper will love us for that.",
        "createdAt" : "2017-08-16T10:24:40Z",
        "updatedAt" : "2017-08-22T15:10:48Z",
        "lastEditedBy" : "f65394e6-7239-422a-9af5-c3575a283846",
        "tags" : [
        ]
      },
      {
        "id" : "67fe9f83-ba5f-489d-8f49-f969c24c0110",
        "parentId" : "d7c93897-7a6a-421e-af0b-3a84ca8f6728",
        "authorId" : "57db1e2a-9c1c-4c08-b54f-9731aff18e36",
        "body" : "```\r\n>>> asntime1 = \"2017010100000+1000\"\r\n>>> asntime2 = \"2017010100000Z\"\r\n>>> asntime1 >= asntime2\r\nFalse\r\n```\r\nAlso minutes and seconds are optional in ASN.1, as well as an additional 3 digit millisecond precision... The real proper way would be to parse the ASN.1 format to a datetime, but that would require another library (cryptography can do it, or pyasn1) which is a quite high requirement for just making sure that some edge cases or weird certificates work. I think it could be ok to just keep it like this for now and if it really causes issues, either include a few edge cases that are found in the wild or maybe by then some of the slow moving stable distros have dropped out and the module can be rewritten anyways. :-)\r\n\r\nPS: pyOpenSSL depends on cryptography and if pyOpenSSL is installed, cryptography will also be installed already.",
        "createdAt" : "2017-08-16T10:58:14Z",
        "updatedAt" : "2017-08-22T15:10:48Z",
        "lastEditedBy" : "57db1e2a-9c1c-4c08-b54f-9731aff18e36",
        "tags" : [
        ]
      },
      {
        "id" : "ac1d67e4-9836-4a29-b961-778e969b6c80",
        "parentId" : "d7c93897-7a6a-421e-af0b-3a84ca8f6728",
        "authorId" : "f65394e6-7239-422a-9af5-c3575a283846",
        "body" : "Done. Look at the `notes:` section. Let me know if that's ok with you for a first iteration.",
        "createdAt" : "2017-08-17T07:58:30Z",
        "updatedAt" : "2017-08-22T15:10:48Z",
        "lastEditedBy" : "f65394e6-7239-422a-9af5-c3575a283846",
        "tags" : [
        ]
      }
    ],
    "commit" : "88cce03c4a99edc2d1cf08aafdb33a6f3b677b49",
    "line" : 557,
    "diffHunk" : "@@ -1,1 +555,559 @@        def _validate_valid_at():\n            if self.valid_at:\n                if not (self.valid_at >= self.cert.get_notBefore() and self.valid_at <= self.cert.get_notAfter()):\n                    self.message.append(\n                        'Certificate is not valid for the specified date (%s) - notBefore: %s - notAfter: %s' % (self.valid_at,"
  },
  {
    "id" : "3fc6c5b9-51d1-48ca-9966-5803b75344c7",
    "prId" : 28263,
    "prUrl" : "https://github.com/ansible/ansible/pull/28263#pullrequestreview-56849794",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e534df2c-e1ab-4a61-a47c-bfdf06873c09",
        "parentId" : null,
        "authorId" : "57db1e2a-9c1c-4c08-b54f-9731aff18e36",
        "body" : "I didn't see this function being called in the assertonly provider, but I might be mistaken.",
        "createdAt" : "2017-08-16T09:23:45Z",
        "updatedAt" : "2017-08-22T15:10:48Z",
        "lastEditedBy" : "57db1e2a-9c1c-4c08-b54f-9731aff18e36",
        "tags" : [
        ]
      },
      {
        "id" : "dbac4451-1754-4a70-a2d6-731d849df675",
        "parentId" : "e534df2c-e1ab-4a61-a47c-bfdf06873c09",
        "authorId" : "f65394e6-7239-422a-9af5-c3575a283846",
        "body" : "True, will update.",
        "createdAt" : "2017-08-16T10:22:02Z",
        "updatedAt" : "2017-08-22T15:10:48Z",
        "lastEditedBy" : "f65394e6-7239-422a-9af5-c3575a283846",
        "tags" : [
        ]
      },
      {
        "id" : "bb84bf59-4c88-4f95-a0f1-da309395f871",
        "parentId" : "e534df2c-e1ab-4a61-a47c-bfdf06873c09",
        "authorId" : "f65394e6-7239-422a-9af5-c3575a283846",
        "body" : "Done",
        "createdAt" : "2017-08-17T07:58:21Z",
        "updatedAt" : "2017-08-22T15:10:48Z",
        "lastEditedBy" : "f65394e6-7239-422a-9af5-c3575a283846",
        "tags" : [
        ]
      }
    ],
    "commit" : "88cce03c4a99edc2d1cf08aafdb33a6f3b677b49",
    "line" : 326,
    "diffHunk" : "@@ -1,1 +324,328 @@        self.module = module\n\n    def check(self, module, perms_required=True):\n        \"\"\"Ensure the resource is in its desired state.\"\"\"\n"
  },
  {
    "id" : "38776fe0-da34-4306-9c7d-9de04d35c2cc",
    "prId" : 28263,
    "prUrl" : "https://github.com/ansible/ansible/pull/28263#pullrequestreview-56849778",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e7ede1f7-6cfd-42da-a6ad-a3b3a23e0401",
        "parentId" : null,
        "authorId" : "57db1e2a-9c1c-4c08-b54f-9731aff18e36",
        "body" : "This one will fail, since selfsigned_notBefore and selfsigned_notAfter have changed their meaning from the initial draft and don't have default values any more.",
        "createdAt" : "2017-08-16T09:32:10Z",
        "updatedAt" : "2017-08-22T15:10:48Z",
        "lastEditedBy" : "57db1e2a-9c1c-4c08-b54f-9731aff18e36",
        "tags" : [
        ]
      },
      {
        "id" : "e9bafaff-4e82-48c1-b8c8-4a24e8ecb83e",
        "parentId" : "e7ede1f7-6cfd-42da-a6ad-a3b3a23e0401",
        "authorId" : "f65394e6-7239-422a-9af5-c3575a283846",
        "body" : "It still works, because if `selfsigned_notBefore` and/or `selfsigned_notAfter` are not specified, `gmtime_adj_notBefore`/`gmtime_adj_notAfter` are used with default values 10 years validity  from now",
        "createdAt" : "2017-08-16T10:21:17Z",
        "updatedAt" : "2017-08-22T15:10:48Z",
        "lastEditedBy" : "f65394e6-7239-422a-9af5-c3575a283846",
        "tags" : [
        ]
      },
      {
        "id" : "3e6c54ba-06c2-4b71-bdc8-dd52a32db524",
        "parentId" : "e7ede1f7-6cfd-42da-a6ad-a3b3a23e0401",
        "authorId" : "57db1e2a-9c1c-4c08-b54f-9731aff18e36",
        "body" : "Then the documentation is missing. :-P",
        "createdAt" : "2017-08-16T10:44:52Z",
        "updatedAt" : "2017-08-22T15:10:48Z",
        "lastEditedBy" : "57db1e2a-9c1c-4c08-b54f-9731aff18e36",
        "tags" : [
        ]
      },
      {
        "id" : "462da01c-bbe4-46a3-b85b-9e7ff6d7e50b",
        "parentId" : "e7ede1f7-6cfd-42da-a6ad-a3b3a23e0401",
        "authorId" : "f65394e6-7239-422a-9af5-c3575a283846",
        "body" : "Done, in the parameter section for both `selfsigned_notBefore` and `selfsigned_notAfter`.",
        "createdAt" : "2017-08-17T07:58:16Z",
        "updatedAt" : "2017-08-22T15:10:48Z",
        "lastEditedBy" : "f65394e6-7239-422a-9af5-c3575a283846",
        "tags" : [
        ]
      }
    ],
    "commit" : "88cce03c4a99edc2d1cf08aafdb33a6f3b677b49",
    "line" : 177,
    "diffHunk" : "@@ -1,1 +175,179 @@\nEXAMPLES = '''\n- name: Generate a Self Signed OpenSSL certificate\n  openssl_certificate:\n    path: /etc/ssl/crt/ansible.com.crt"
  },
  {
    "id" : "6ea65230-3a90-4343-a76e-4031a83dc8e5",
    "prId" : 28263,
    "prUrl" : "https://github.com/ansible/ansible/pull/28263#pullrequestreview-56586560",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3b48ae80-9343-4fb5-8eaa-ddbe504be37e",
        "parentId" : null,
        "authorId" : "57db1e2a-9c1c-4c08-b54f-9731aff18e36",
        "body" : "https://www.python.org/dev/peps/pep-0394/ would be `#!/usr/bin/env python`, but I haven't looked up conventions in the Ansible code base.",
        "createdAt" : "2017-08-16T09:42:04Z",
        "updatedAt" : "2017-08-22T15:10:48Z",
        "lastEditedBy" : "57db1e2a-9c1c-4c08-b54f-9731aff18e36",
        "tags" : [
        ]
      },
      {
        "id" : "d2c2c758-97c9-4140-80a4-da69f29b3c80",
        "parentId" : "3b48ae80-9343-4fb5-8eaa-ddbe504be37e",
        "authorId" : "f65394e6-7239-422a-9af5-c3575a283846",
        "body" : "This seems to be the convention in the Ansible code base [1][2][3]\r\n\r\n[1] http://docs.ansible.com/ansible/latest/dev_guide/developing_modules_general.html\r\n[2] https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/files/archive.py\r\n[3] https://github.com/ansible/ansible/blob/devel/lib/ansible/modules/files/assemble.py\r\n\r\n",
        "createdAt" : "2017-08-16T10:19:17Z",
        "updatedAt" : "2017-08-22T15:10:48Z",
        "lastEditedBy" : "f65394e6-7239-422a-9af5-c3575a283846",
        "tags" : [
        ]
      }
    ],
    "commit" : "88cce03c4a99edc2d1cf08aafdb33a6f3b677b49",
    "line" : 1,
    "diffHunk" : "@@ -1,1 +-1,3 @@#!/usr/bin/python\n# -*- coding: utf-8 -*-\n"
  },
  {
    "id" : "2528be31-d209-4a4e-b883-8dd335873733",
    "prId" : 28263,
    "prUrl" : "https://github.com/ansible/ansible/pull/28263#pullrequestreview-56899765",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6456b486-f187-4a31-a713-704954c349b7",
        "parentId" : null,
        "authorId" : "57db1e2a-9c1c-4c08-b54f-9731aff18e36",
        "body" : "This will not run the assertonly checks in check_mode, even though they are not destructive or changing any state other than atime.",
        "createdAt" : "2017-08-17T09:47:25Z",
        "updatedAt" : "2017-08-22T15:10:48Z",
        "lastEditedBy" : "57db1e2a-9c1c-4c08-b54f-9731aff18e36",
        "tags" : [
        ]
      },
      {
        "id" : "e308e0d5-4d5c-406c-9a47-fa029792738b",
        "parentId" : "6456b486-f187-4a31-a713-704954c349b7",
        "authorId" : "f65394e6-7239-422a-9af5-c3575a283846",
        "body" : "This is correct, because the only purpose of the check_mode test is to know if a resource will end up changed or not, and assert always return `changed = False`. So idiomatically, it wouldn't make sense to run the test in `assertonly()` for the check mode IMO",
        "createdAt" : "2017-08-17T10:35:18Z",
        "updatedAt" : "2017-08-22T15:10:48Z",
        "lastEditedBy" : "f65394e6-7239-422a-9af5-c3575a283846",
        "tags" : [
        ]
      },
      {
        "id" : "b969122e-16c6-4705-b745-9f138f2f9768",
        "parentId" : "6456b486-f187-4a31-a713-704954c349b7",
        "authorId" : "57db1e2a-9c1c-4c08-b54f-9731aff18e36",
        "body" : "It might be also interesting to see if it would fail though.",
        "createdAt" : "2017-08-17T10:39:54Z",
        "updatedAt" : "2017-08-22T15:10:48Z",
        "lastEditedBy" : "57db1e2a-9c1c-4c08-b54f-9731aff18e36",
        "tags" : [
        ]
      },
      {
        "id" : "185af2ec-ca06-404f-ba7a-89283103c004",
        "parentId" : "6456b486-f187-4a31-a713-704954c349b7",
        "authorId" : "f65394e6-7239-422a-9af5-c3575a283846",
        "body" : "Done",
        "createdAt" : "2017-08-17T11:47:39Z",
        "updatedAt" : "2017-08-22T15:10:48Z",
        "lastEditedBy" : "f65394e6-7239-422a-9af5-c3575a283846",
        "tags" : [
        ]
      }
    ],
    "commit" : "88cce03c4a99edc2d1cf08aafdb33a6f3b677b49",
    "line" : 751,
    "diffHunk" : "@@ -1,1 +749,753 @@    if module.params['state'] == 'present':\n\n        if module.check_mode:\n            result = certificate.dump()\n            result['changed'] = module.params['force'] or not certificate.check(module)"
  },
  {
    "id" : "fe4eb04a-1d25-4ff1-999e-cd89ea188c51",
    "prId" : 28263,
    "prUrl" : "https://github.com/ansible/ansible/pull/28263#pullrequestreview-56923132",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d3fba02c-6816-42fa-aaac-025617c444e3",
        "parentId" : null,
        "authorId" : "99dfb093-81dd-44d0-97be-6dcf3059e796",
        "body" : "if you change it to snake, it would be possible to add an alias like `notAfter=dict(type='str', aliases=['not_after']),` and in the docs you can change it the other way around (to not to touch everything):\r\n\r\n~~~yaml\r\n    not_after:\r\n        required: false\r\n        aliases: [ notAfter ]\r\n        description:\r\n            - The certificate must expire at this point in time. The timestamp is formatted as an ASN.1 TIME.\r\n~~~",
        "createdAt" : "2017-08-17T13:32:11Z",
        "updatedAt" : "2017-08-22T15:10:48Z",
        "lastEditedBy" : "99dfb093-81dd-44d0-97be-6dcf3059e796",
        "tags" : [
        ]
      }
    ],
    "commit" : "88cce03c4a99edc2d1cf08aafdb33a6f3b677b49",
    "line" : 712,
    "diffHunk" : "@@ -1,1 +710,714 @@            subjectAltName_strict=dict(default=False, type='bool'),\n            notBefore=dict(type='str'),\n            notAfter=dict(type='str'),\n            valid_at=dict(type='str'),\n            invalid_at=dict(type='str'),"
  },
  {
    "id" : "d6ae11ed-da2b-4de3-8e97-4f3cbce5c10a",
    "prId" : 28263,
    "prUrl" : "https://github.com/ansible/ansible/pull/28263#pullrequestreview-57692786",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9b0ae388-ac03-48ec-90e2-f09a38e79010",
        "parentId" : null,
        "authorId" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "body" : "Use `U()` for `acme`.",
        "createdAt" : "2017-08-22T07:50:14Z",
        "updatedAt" : "2017-08-22T15:10:48Z",
        "lastEditedBy" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "tags" : [
        ]
      }
    ],
    "commit" : "88cce03c4a99edc2d1cf08aafdb33a6f3b677b49",
    "line" : 89,
    "diffHunk" : "@@ -1,1 +87,91 @@              If this value is not specified, certificate will stop being valid 10 years from now.\n\n    acme_accountkey:\n        description:\n            - Path to the accountkey for the C(acme) provider"
  },
  {
    "id" : "60360cf2-7e37-4386-9a11-ddd98d809e7b",
    "prId" : 28263,
    "prUrl" : "https://github.com/ansible/ansible/pull/28263#pullrequestreview-57692786",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "54fbf53c-5322-4eab-8bec-30bda6d59828",
        "parentId" : null,
        "authorId" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "body" : "Here and below in other descriptions: use Use `C(valid_in)`, `C(keyUsage)`, `C(extendedKeyUsage)`, `C(subjectAltName)`.",
        "createdAt" : "2017-08-22T07:54:37Z",
        "updatedAt" : "2017-08-22T15:10:48Z",
        "lastEditedBy" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "tags" : [
        ]
      }
    ],
    "commit" : "88cce03c4a99edc2d1cf08aafdb33a6f3b677b49",
    "line" : 136,
    "diffHunk" : "@@ -1,1 +134,138 @@            - The certificate must expire at this point in time. The timestamp is formatted as an ASN.1 TIME.\n\n    valid_in:\n        description:\n            - The certificate must still be valid in I(valid_in) seconds from now."
  },
  {
    "id" : "32edee72-897f-4f9f-8670-482fda61fcea",
    "prId" : 28521,
    "prUrl" : "https://github.com/ansible/ansible/pull/28521#pullrequestreview-58826797",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "06e53dcd-6766-474b-a1e9-163d6096501c",
        "parentId" : null,
        "authorId" : "99dfb093-81dd-44d0-97be-6dcf3059e796",
        "body" : "IMHO this was wrong before, wasn't it?",
        "createdAt" : "2017-08-22T18:39:09Z",
        "updatedAt" : "2017-08-23T07:17:22Z",
        "lastEditedBy" : "99dfb093-81dd-44d0-97be-6dcf3059e796",
        "tags" : [
        ]
      },
      {
        "id" : "ebddfdcb-f568-49c0-8603-bacdcaa1347f",
        "parentId" : "06e53dcd-6766-474b-a1e9-163d6096501c",
        "authorId" : "57db1e2a-9c1c-4c08-b54f-9731aff18e36",
        "body" : "Seems like a leftover from my version, so yes, it likely was wrong.",
        "createdAt" : "2017-08-27T16:43:51Z",
        "updatedAt" : "2017-08-27T16:43:51Z",
        "lastEditedBy" : "57db1e2a-9c1c-4c08-b54f-9731aff18e36",
        "tags" : [
        ]
      }
    ],
    "commit" : "8dde1dc8dd00a7685b4f33a1e062805d4b322def",
    "line" : 113,
    "diffHunk" : "@@ -1,1 +273,277 @@      - clientAuth\n      - 1.3.6.1.5.5.7.3.8\n    extended_key_usage_strict: true\n\n- name: Ensure that the existing certificate has a certain domain in its subjectAltName"
  },
  {
    "id" : "5ae55fda-90f5-41b3-9217-628169d16b73",
    "prId" : 30338,
    "prUrl" : "https://github.com/ansible/ansible/pull/30338#pullrequestreview-84792601",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "46c2d580-a853-4494-9a75-907ad9dab2c0",
        "parentId" : null,
        "authorId" : "f65394e6-7239-422a-9af5-c3575a283846",
        "body" : "I understand the need for the _strict param, but why not using the same pattern as for `self.keyUsage_strict = module.params['keyUsage_strict']` here? Is it expected to be done in a subsequent review ?",
        "createdAt" : "2017-12-07T11:13:59Z",
        "updatedAt" : "2017-12-07T13:31:04Z",
        "lastEditedBy" : "f65394e6-7239-422a-9af5-c3575a283846",
        "tags" : [
        ]
      },
      {
        "id" : "768bd141-fa8e-4d33-8c4d-5a77ae6045dc",
        "parentId" : "46c2d580-a853-4494-9a75-907ad9dab2c0",
        "authorId" : "57db1e2a-9c1c-4c08-b54f-9731aff18e36",
        "body" : "I want to do that in the next upcoming PR, I didn't want to write everything at once and then have 3 different things in one PR.",
        "createdAt" : "2017-12-07T11:42:04Z",
        "updatedAt" : "2017-12-07T13:31:04Z",
        "lastEditedBy" : "57db1e2a-9c1c-4c08-b54f-9731aff18e36",
        "tags" : [
        ]
      },
      {
        "id" : "a9583a1a-d371-4566-89f8-4f4cdd7d9d1c",
        "parentId" : "46c2d580-a853-4494-9a75-907ad9dab2c0",
        "authorId" : "f65394e6-7239-422a-9af5-c3575a283846",
        "body" : "Ack.",
        "createdAt" : "2017-12-07T12:45:41Z",
        "updatedAt" : "2017-12-07T13:31:04Z",
        "lastEditedBy" : "f65394e6-7239-422a-9af5-c3575a283846",
        "tags" : [
        ]
      },
      {
        "id" : "784b630c-9480-4fe3-a397-7bcc6d11c877",
        "parentId" : "46c2d580-a853-4494-9a75-907ad9dab2c0",
        "authorId" : "57db1e2a-9c1c-4c08-b54f-9731aff18e36",
        "body" : "see #34090",
        "createdAt" : "2017-12-20T15:10:29Z",
        "updatedAt" : "2017-12-20T15:10:29Z",
        "lastEditedBy" : "57db1e2a-9c1c-4c08-b54f-9731aff18e36",
        "tags" : [
        ]
      }
    ],
    "commit" : "ccf63f5d8ca649e1e28fa7e4043187ddc0fe2987",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +460,464 @@        else:\n            self.subject = []\n        self.subject_strict = False\n        if module.params['issuer']:\n            self.issuer = crypto_utils.parse_name_field(module.params['issuer'])"
  },
  {
    "id" : "cc60ee56-3d0f-43a9-98e7-8d7caf79e03c",
    "prId" : 30338,
    "prUrl" : "https://github.com/ansible/ansible/pull/30338#pullrequestreview-81818527",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d86c6ed9-d82e-40c1-82aa-bcc106298c65",
        "parentId" : null,
        "authorId" : "f65394e6-7239-422a-9af5-c3575a283846",
        "body" : "ditto",
        "createdAt" : "2017-12-07T11:14:17Z",
        "updatedAt" : "2017-12-07T13:31:04Z",
        "lastEditedBy" : "f65394e6-7239-422a-9af5-c3575a283846",
        "tags" : [
        ]
      }
    ],
    "commit" : "ccf63f5d8ca649e1e28fa7e4043187ddc0fe2987",
    "line" : 31,
    "diffHunk" : "@@ -1,1 +465,469 @@        else:\n            self.issuer = []\n        self.issuer_strict = False\n        self.has_expired = module.params['has_expired']\n        self.version = module.params['version']"
  }
]