[
  {
    "id" : "f0f272f9-6428-47f6-ad06-1ece289bbc45",
    "prId" : 22069,
    "prUrl" : "https://github.com/ansible/ansible/pull/22069#pullrequestreview-36244812",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6a858b4b-8310-41cc-93e4-971101e3d57f",
        "parentId" : null,
        "authorId" : "d7d8721c-7ad0-4834-9a3d-b53ca8656789",
        "body" : "There are some options to `AnsibleModule` which you may be able to use to validate options passed in.\r\nLook at existing modules for examples:\r\n```\r\nrequired_together\r\nrequire_if\r\n```",
        "createdAt" : "2017-05-02T12:51:33Z",
        "updatedAt" : "2017-05-04T12:05:46Z",
        "lastEditedBy" : "d7d8721c-7ad0-4834-9a3d-b53ca8656789",
        "tags" : [
        ]
      },
      {
        "id" : "8cb03d6e-9e59-4f06-95d4-8f543d743ec5",
        "parentId" : "6a858b4b-8310-41cc-93e4-971101e3d57f",
        "authorId" : "9a7b100b-73af-422c-b3b6-3de0abcaa1e0",
        "body" : "I'm trying, but it not work well for this logic",
        "createdAt" : "2017-05-04T10:52:20Z",
        "updatedAt" : "2017-05-04T12:05:46Z",
        "lastEditedBy" : "9a7b100b-73af-422c-b3b6-3de0abcaa1e0",
        "tags" : [
        ]
      },
      {
        "id" : "14416125-c7a6-4b9a-881a-28a4f0c080de",
        "parentId" : "6a858b4b-8310-41cc-93e4-971101e3d57f",
        "authorId" : "d7d8721c-7ad0-4834-9a3d-b53ca8656789",
        "body" : "I'm currently working on some documentation for `AnsibleModule`, the following shows the different validation options:\r\n```\r\ndef main():\r\n    module = AnsibleModule(\r\n        argument_spec=dict(\r\n            state=dict(default='present', choices=['present', 'absent']),\r\n            username=dict(type='str'),\r\n            password=dict(no_log=True),\r\n            token=dict(no_log=True),\r\n            src=dict(type='path'),\r\n            priority=dict(type='int'),\r\n        ),\r\n        mutually_exclusive=(['password', 'token'],),\r\n        required_together=(['username', 'password'],),\r\n        required_one_of=[['password', 'token']],\r\n        required_if=[('state', 'present', ['src', 'priority'])],\r\n        supports_check_mode=True\r\n   )\r\n```",
        "createdAt" : "2017-05-04T11:06:46Z",
        "updatedAt" : "2017-05-04T12:05:46Z",
        "lastEditedBy" : "d7d8721c-7ad0-4834-9a3d-b53ca8656789",
        "tags" : [
        ]
      },
      {
        "id" : "1e68d104-8e35-4ea0-aa9e-14cc0127b99b",
        "parentId" : "6a858b4b-8310-41cc-93e4-971101e3d57f",
        "authorId" : "9a7b100b-73af-422c-b3b6-3de0abcaa1e0",
        "body" : "@gundalow I need your help. when I deal this logic:\r\n```\r\nif A:\r\n    if not B:\r\n        print something errror\r\n```\r\nB is not dependent on A, but A dependent on B， They don't need to be config at the same time， it's not use ```required_together```, so I'll try:\r\n```\r\nrequired_if=[('B', not None, ['A'])]\r\n```\r\nbut it is not work well.\r\nI think ```required_if``` needs to be improved, This condition is not enough to judge when the condition is ```not None```,  How do you think about? ",
        "createdAt" : "2017-05-04T11:41:47Z",
        "updatedAt" : "2017-05-04T12:05:46Z",
        "lastEditedBy" : "9a7b100b-73af-422c-b3b6-3de0abcaa1e0",
        "tags" : [
        ]
      }
    ],
    "commit" : "4053df6d9c33c67c4f48c20b0ec7152b67f383f0",
    "line" : 390,
    "diffHunk" : "@@ -1,1 +388,392 @@\n            if priv_protocol:\n                if not auth_protocol:\n                    module.fail_json(\n                        msg='Error: Please input auth_protocol at the same time.')"
  }
]