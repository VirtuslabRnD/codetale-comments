[
  {
    "id" : "3d806ae1-8c52-4751-abcd-f8222f090c6c",
    "prId" : 36494,
    "prUrl" : "https://github.com/ansible/ansible/pull/36494#pullrequestreview-98161506",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "81b1ae19-6c91-49a4-9acd-a848a2a9de0b",
        "parentId" : null,
        "authorId" : "57c7b7b8-4598-4ae1-bf5b-37072cd4824c",
        "body" : "This is not required also like description and rd. Anyway you are setting it below from want",
        "createdAt" : "2018-02-21T11:17:24Z",
        "updatedAt" : "2018-02-21T13:09:56Z",
        "lastEditedBy" : "57c7b7b8-4598-4ae1-bf5b-37072cd4824c",
        "tags" : [
        ]
      },
      {
        "id" : "a461880d-077f-4f12-883f-6e5bb54fe1d7",
        "parentId" : "81b1ae19-6c91-49a4-9acd-a848a2a9de0b",
        "authorId" : "284bb4ad-6403-4762-bb03-b2a921d26492",
        "body" : "This is required for L263 `if vni:`",
        "createdAt" : "2018-02-21T11:37:32Z",
        "updatedAt" : "2018-02-21T13:50:46Z",
        "lastEditedBy" : "284bb4ad-6403-4762-bb03-b2a921d26492",
        "tags" : [
        ]
      }
    ],
    "commit" : "00b40af43b27b076cf1d74c51b4f8e0b34f4aa8b",
    "line" : 12,
    "diffHunk" : "@@ -1,1 +230,234 @@        name = w['name']\n        admin_state = w['admin_state']\n        vni = w['vni']\n        interfaces = w.get('interfaces') or []\n        state = w['state']"
  },
  {
    "id" : "294181f1-9744-4a49-8c37-c39cb7813c9a",
    "prId" : 37092,
    "prUrl" : "https://github.com/ansible/ansible/pull/37092#pullrequestreview-102699098",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "03829d65-dedf-48f9-b20e-c5a6c72beb7e",
        "parentId" : null,
        "authorId" : "284bb4ad-6403-4762-bb03-b2a921d26492",
        "body" : "Why check only the first item of the list not to be `default`? ",
        "createdAt" : "2018-03-09T06:23:09Z",
        "updatedAt" : "2018-03-09T06:23:52Z",
        "lastEditedBy" : "284bb4ad-6403-4762-bb03-b2a921d26492",
        "tags" : [
        ]
      },
      {
        "id" : "6fdc696c-99e0-4adb-900f-13ec2caed9de",
        "parentId" : "03829d65-dedf-48f9-b20e-c5a6c72beb7e",
        "authorId" : "fa79aa34-d606-4908-acc5-6efdccee3b48",
        "body" : "interfaces is a list parameter. It allows either an array of interfaces or 'default' keyword (to remove all the existing interfaces on the device). Since it is list, I am checking the first element to see if it is 'default' or not. \r\nI followed this example:\r\nhttps://github.com/ansible/ansible/blob/3a144b290d6161ced77df5c8912dad3af646197b/lib/ansible/modules/network/nxos/nxos_vxlan_vtep_vni.py#L326\r\n\r\nIf there is some other better way, let me know.",
        "createdAt" : "2018-03-09T16:10:38Z",
        "updatedAt" : "2018-03-09T16:14:57Z",
        "lastEditedBy" : "fa79aa34-d606-4908-acc5-6efdccee3b48",
        "tags" : [
        ]
      }
    ],
    "commit" : "d581f2a664e058c76b9af1281f3e1cad77287d44",
    "line" : 32,
    "diffHunk" : "@@ -1,1 +267,271 @@                commands.append('exit')\n\n                if interfaces and interfaces[0] != 'default':\n                    for i in interfaces:\n                        commands.append('interface {0}'.format(i))"
  },
  {
    "id" : "1d08ce7f-b565-4f60-84ed-31ddeaf8f066",
    "prId" : 37092,
    "prUrl" : "https://github.com/ansible/ansible/pull/37092#pullrequestreview-102699326",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "855410cd-482e-4b92-b3a1-b781dd34dffa",
        "parentId" : null,
        "authorId" : "284bb4ad-6403-4762-bb03-b2a921d26492",
        "body" : "same question for this like the above.",
        "createdAt" : "2018-03-09T06:23:38Z",
        "updatedAt" : "2018-03-09T06:23:38Z",
        "lastEditedBy" : "284bb4ad-6403-4762-bb03-b2a921d26492",
        "tags" : [
        ]
      },
      {
        "id" : "863cbc12-885e-4f03-9fef-52ca4530a478",
        "parentId" : "855410cd-482e-4b92-b3a1-b781dd34dffa",
        "authorId" : "fa79aa34-d606-4908-acc5-6efdccee3b48",
        "body" : "See my reply above",
        "createdAt" : "2018-03-09T16:11:16Z",
        "updatedAt" : "2018-03-09T16:11:16Z",
        "lastEditedBy" : "fa79aa34-d606-4908-acc5-6efdccee3b48",
        "tags" : [
        ]
      }
    ],
    "commit" : "d581f2a664e058c76b9af1281f3e1cad77287d44",
    "line" : 54,
    "diffHunk" : "@@ -1,1 +298,302 @@                    commands.append('exit')\n\n                if interfaces and interfaces[0] != 'default':\n                    if not obj_in_have['interfaces']:\n                        for i in interfaces:"
  },
  {
    "id" : "4342519a-c35a-40f3-bbda-616d86a8d7a3",
    "prId" : 37092,
    "prUrl" : "https://github.com/ansible/ansible/pull/37092#pullrequestreview-102699363",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d40a97d5-210e-41ac-8b29-1b8994f5c476",
        "parentId" : null,
        "authorId" : "284bb4ad-6403-4762-bb03-b2a921d26492",
        "body" : "why check only the first item of the list to be default?",
        "createdAt" : "2018-03-09T06:26:40Z",
        "updatedAt" : "2018-03-09T06:26:40Z",
        "lastEditedBy" : "284bb4ad-6403-4762-bb03-b2a921d26492",
        "tags" : [
        ]
      },
      {
        "id" : "11b50165-4ce7-4b98-840f-002de0632108",
        "parentId" : "d40a97d5-210e-41ac-8b29-1b8994f5c476",
        "authorId" : "fa79aa34-d606-4908-acc5-6efdccee3b48",
        "body" : "See my reply above",
        "createdAt" : "2018-03-09T16:11:23Z",
        "updatedAt" : "2018-03-09T16:11:23Z",
        "lastEditedBy" : "fa79aa34-d606-4908-acc5-6efdccee3b48",
        "tags" : [
        ]
      }
    ],
    "commit" : "d581f2a664e058c76b9af1281f3e1cad77287d44",
    "line" : 62,
    "diffHunk" : "@@ -1,1 +323,327 @@                            commands.append('no switchport')\n                            commands.append('no vrf member {0}'.format(name))\n                elif interfaces and interfaces[0] == 'default':\n                    if obj_in_have['interfaces']:\n                        for i in obj_in_have['interfaces']:"
  },
  {
    "id" : "05173736-b073-4550-8584-ff60b178c5e7",
    "prId" : 37092,
    "prUrl" : "https://github.com/ansible/ansible/pull/37092#pullrequestreview-102700072",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7379fe92-abe5-4d41-b802-d5029787e781",
        "parentId" : null,
        "authorId" : "284bb4ad-6403-4762-bb03-b2a921d26492",
        "body" : "what if there is no `obj_in_have['interfaces']`? there should be an `else` part in this case?",
        "createdAt" : "2018-03-09T06:27:05Z",
        "updatedAt" : "2018-03-09T06:27:54Z",
        "lastEditedBy" : "284bb4ad-6403-4762-bb03-b2a921d26492",
        "tags" : [
        ]
      },
      {
        "id" : "7acedbaf-561a-492e-a6f4-4f4f462750ee",
        "parentId" : "7379fe92-abe5-4d41-b802-d5029787e781",
        "authorId" : "fa79aa34-d606-4908-acc5-6efdccee3b48",
        "body" : "Basically, if interfaces is 'default' and the current object has some interfaces, this code removes them by doing 'no' cmd on each of them. There is no need for 'else' here because if the current object has no interfaces and user wants 'default', we are already in that state so no new commands need to be generated and impotence is maintained.",
        "createdAt" : "2018-03-09T16:13:28Z",
        "updatedAt" : "2018-03-09T16:13:28Z",
        "lastEditedBy" : "fa79aa34-d606-4908-acc5-6efdccee3b48",
        "tags" : [
        ]
      }
    ],
    "commit" : "d581f2a664e058c76b9af1281f3e1cad77287d44",
    "line" : 63,
    "diffHunk" : "@@ -1,1 +324,328 @@                            commands.append('no vrf member {0}'.format(name))\n                elif interfaces and interfaces[0] == 'default':\n                    if obj_in_have['interfaces']:\n                        for i in obj_in_have['interfaces']:\n                            commands.append('vrf context {0}'.format(name))"
  },
  {
    "id" : "0442fa4e-239b-4ca7-adb8-6fab96fd67bf",
    "prId" : 63277,
    "prUrl" : "https://github.com/ansible/ansible/pull/63277#pullrequestreview-308519595",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8d273457-e228-4846-9d07-b2572246aabf",
        "parentId" : null,
        "authorId" : "590c0c9f-420c-41b0-8f5d-dc6889d70e93",
        "body" : "Do you get this same error message for both `network_cli` and `httpapi`?",
        "createdAt" : "2019-10-29T14:02:39Z",
        "updatedAt" : "2019-10-30T12:43:52Z",
        "lastEditedBy" : "590c0c9f-420c-41b0-8f5d-dc6889d70e93",
        "tags" : [
        ]
      },
      {
        "id" : "3081e08d-d4ea-4778-8ca2-0896343d9893",
        "parentId" : "8d273457-e228-4846-9d07-b2572246aabf",
        "authorId" : "1c9ec37a-2f71-44e7-8b02-5bff03b1111d",
        "body" : "No, `httpapi` just puts `'input'` in the error message and then calls `fail_json`. \r\n\r\n",
        "createdAt" : "2019-10-29T16:57:36Z",
        "updatedAt" : "2019-10-30T12:43:52Z",
        "lastEditedBy" : "1c9ec37a-2f71-44e7-8b02-5bff03b1111d",
        "tags" : [
        ]
      },
      {
        "id" : "6b03bf85-31e7-40ca-9706-29835985e8ff",
        "parentId" : "8d273457-e228-4846-9d07-b2572246aabf",
        "authorId" : "1c9ec37a-2f71-44e7-8b02-5bff03b1111d",
        "body" : "Okay, fixed `httpapi`. The problem I hit is with N6K, which doesn't get an `input` key from nxapi result data, and `httpapi` plugin code obfuscates the actual error by raising based on the dict key error instead of the actual clierror; e.g.\r\n\r\n6K:\r\n```\r\n{\r\n   \"msg\": \"CLI execution error\",\r\n   \"code\": \"400\",\r\n   \"clierror\": \"ERROR: Deletion of VRF fred in progresswait for it to complete\\n\"\r\n}\r\n```\r\n7K:\r\n```\r\n{\r\n  \"code\": \"400\",\r\n  \"msg\": \"CLI execution error\",\r\n  \"clierror\": \"ERROR: Deletion of VRF fred in progress, wait for it to complete\\n\",\r\n  \"input\": \"vrf con fred\"\r\n}\r\n\r\n",
        "createdAt" : "2019-10-29T19:23:47Z",
        "updatedAt" : "2019-10-30T12:43:52Z",
        "lastEditedBy" : "1c9ec37a-2f71-44e7-8b02-5bff03b1111d",
        "tags" : [
        ]
      }
    ],
    "commit" : "20079e627bd80fae312818fcfc07601e8a47f0a7",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +461,465 @@    \"\"\"Checks for VRF config errors and executes a retry in some circumstances.\n    \"\"\"\n    pattern = 'ERROR: Deletion of VRF .* in progress'\n    if re.search(pattern, str(responses)):\n        # Allow delay/retry for VRF changes"
  },
  {
    "id" : "2746d9b1-0128-4ce2-902e-fc069bfca9d7",
    "prId" : 66004,
    "prUrl" : "https://github.com/ansible/ansible/pull/66004#pullrequestreview-339989525",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "633283fa-487d-41e2-9aba-5b0cfe673ccb",
        "parentId" : null,
        "authorId" : "5e8d0fa3-6f3c-407d-a0c4-860d8c6c8c20",
        "body" : "can name attribute has value 'default   '  (with space)?  if so this will get pass through. ",
        "createdAt" : "2019-12-23T06:54:57Z",
        "updatedAt" : "2020-01-08T16:58:09Z",
        "lastEditedBy" : "5e8d0fa3-6f3c-407d-a0c4-860d8c6c8c20",
        "tags" : [
        ]
      },
      {
        "id" : "da373cc9-be57-4d9d-842d-dd830a395701",
        "parentId" : "633283fa-487d-41e2-9aba-5b0cfe673ccb",
        "authorId" : "974cc5d8-4ebb-4712-adfc-de7fed18dd4a",
        "body" : "Good catch.",
        "createdAt" : "2019-12-26T07:18:12Z",
        "updatedAt" : "2020-01-08T16:58:09Z",
        "lastEditedBy" : "974cc5d8-4ebb-4712-adfc-de7fed18dd4a",
        "tags" : [
        ]
      },
      {
        "id" : "b111404a-04be-487a-b909-f1d1ed0cfa8f",
        "parentId" : "633283fa-487d-41e2-9aba-5b0cfe673ccb",
        "authorId" : "5de09262-58b9-4c49-922e-6a6b668cf343",
        "body" : "@rohitthakur2590 , even if we give name = \"default \" (with space) , the device accepts it and removes space. The PR actually fixes the issue faced, while aggregate field is empty.",
        "createdAt" : "2020-01-08T15:52:00Z",
        "updatedAt" : "2020-01-08T16:58:09Z",
        "lastEditedBy" : "5de09262-58b9-4c49-922e-6a6b668cf343",
        "tags" : [
        ]
      },
      {
        "id" : "fc749df6-7e72-4d86-a7ab-644fee8389df",
        "parentId" : "633283fa-487d-41e2-9aba-5b0cfe673ccb",
        "authorId" : "5e8d0fa3-6f3c-407d-a0c4-860d8c6c8c20",
        "body" : "@GomathiselviS yeah it looks correct for  \"aggregate field is empty\" scenario, but then IMO checking for 'default' becomes less relevant if it would let it pass with couple of spaces.",
        "createdAt" : "2020-01-08T16:33:21Z",
        "updatedAt" : "2020-01-08T16:58:09Z",
        "lastEditedBy" : "5e8d0fa3-6f3c-407d-a0c4-860d8c6c8c20",
        "tags" : [
        ]
      }
    ],
    "commit" : "f35b1e95ae0f205e30d59f6fd3b165938e8c2aa8",
    "line" : 28,
    "diffHunk" : "@@ -1,1 +349,353 @@    if name:\n        name = name.strip()\n        if name == 'default':\n            module.fail_json(msg='cannot use default as name of a VRF')\n        elif len(name) > 32:"
  }
]