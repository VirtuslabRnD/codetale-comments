[
  {
    "id" : "d5ea91da-2d8e-4e2a-a8f9-c86d0dbfb892",
    "prId" : 40849,
    "prUrl" : "https://github.com/ansible/ansible/pull/40849#pullrequestreview-126093620",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3cd616d0-cde9-4203-bccd-fdcd01c2589f",
        "parentId" : null,
        "authorId" : "284bb4ad-6403-4762-bb03-b2a921d26492",
        "body" : "Shouldn't this be caught in `activate_operation`? Am I missing any corner case?",
        "createdAt" : "2018-06-05T07:53:59Z",
        "updatedAt" : "2018-06-06T03:25:39Z",
        "lastEditedBy" : "284bb4ad-6403-4762-bb03-b2a921d26492",
        "tags" : [
        ]
      },
      {
        "id" : "fd40a432-f529-46af-b781-9c5aec407d9c",
        "parentId" : "3cd616d0-cde9-4203-bccd-fdcd01c2589f",
        "authorId" : "fa79aa34-d606-4908-acc5-6efdccee3b48",
        "body" : "* For patch/SMU, there are 3 operations. \r\nadd- which adds the patch and puts it in inactive state\r\nactivate - which activates the patch and puts it in active state\r\ncommit - which commits the patch and puts it in commit state\r\n* For feature RPMs, there are only 2 operations.\r\nadd - which adds the RPM and puts it in inactive state\r\nactivate - which activates & commits the RPM and puts it in active and commit state. \r\n\r\nBecause the code is common, we are checking after the activate operation, if the package is in active state or not. For SMU, we commit and then check if it is in commit state or not. Since there is no such thing for feature RPM, the expectation is that the platform has already put it commit state also, which is generally the case almost always. However, if there is an issue on the platform, and it put it only in active state but not in commit state, there are no more operations or commands to push it into that commit state. So all we can do is FAIL the operation. If we do not do this, it will be seen as success, which would be incorrect. This is defensive code from our side to take care of an extreme case on the platform.\r\n\r\nHope it is clear now.",
        "createdAt" : "2018-06-05T18:20:54Z",
        "updatedAt" : "2018-06-06T03:25:39Z",
        "lastEditedBy" : "fa79aa34-d606-4908-acc5-6efdccee3b48",
        "tags" : [
        ]
      }
    ],
    "commit" : "49900c0b24423bfed081ba32c87de8e8cc74c153",
    "line" : 206,
    "diffHunk" : "@@ -1,1 +204,208 @@            else:\n                err = 'Operation \"install activate {0} forced\" Failed'.format(pkg)\n                module.fail_json(msg=err)\n\n    else:"
  }
]