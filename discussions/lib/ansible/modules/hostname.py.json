[
  {
    "id" : "0dafc252-4eee-4a89-8932-c91f808ab7ec",
    "prId" : 70532,
    "prUrl" : "https://github.com/ansible/ansible/pull/70532#pullrequestreview-445602558",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6192b94f-ed2e-4164-a963-de324fb71bb6",
        "parentId" : null,
        "authorId" : "96aeecbb-c275-402c-b904-a795c82efb48",
        "body" : "This was kept here for backward compatbility - https://github.com/ansible/ansible/pull/59974/files#r313368633",
        "createdAt" : "2020-07-09T13:33:11Z",
        "updatedAt" : "2020-07-10T00:38:17Z",
        "lastEditedBy" : "96aeecbb-c275-402c-b904-a795c82efb48",
        "tags" : [
        ]
      },
      {
        "id" : "5e2c1bbc-887f-4351-a031-35407f57353f",
        "parentId" : "6192b94f-ed2e-4164-a963-de324fb71bb6",
        "authorId" : "442212cb-3c29-4a71-98b5-cbd0b20c8c17",
        "body" : "I'm missing something, then. I'm not doing anything to change the check that decides if we should use the systemd strategy (where hostnamectl makes sense).\r\n\r\nRight now in `GenericStrategy`, we check if `hostnamectl` exists, then compare its output (with no flags) against the `name` parameter, which is clearly wrong since calling `hostnamectl` with no flags produces multi-line, formatted output that we don't manipulate at all. But it won't matter anyway, since we check if the box is systemd-based anyway and switch to that strategy if it is.\r\n\r\nAll I'm proposing here is only looking for hostnamectl where it actually makes sense to use it.",
        "createdAt" : "2020-07-09T14:58:00Z",
        "updatedAt" : "2020-07-10T00:38:17Z",
        "lastEditedBy" : "442212cb-3c29-4a71-98b5-cbd0b20c8c17",
        "tags" : [
        ]
      },
      {
        "id" : "2b19c42c-6a49-48dc-8284-be56c9502aa0",
        "parentId" : "6192b94f-ed2e-4164-a963-de324fb71bb6",
        "authorId" : "442212cb-3c29-4a71-98b5-cbd0b20c8c17",
        "body" : "Do you have a case in mind where this does the wrong thing or breaks someone?",
        "createdAt" : "2020-07-09T15:21:57Z",
        "updatedAt" : "2020-07-10T00:38:17Z",
        "lastEditedBy" : "442212cb-3c29-4a71-98b5-cbd0b20c8c17",
        "tags" : [
        ]
      },
      {
        "id" : "9f0a8350-5fec-495c-89a6-d58fefb13543",
        "parentId" : "6192b94f-ed2e-4164-a963-de324fb71bb6",
        "authorId" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "body" : "Looking through the code more carefully, I think this change is correct. We should only being using `hostnamectl` where we pass it flags to return _only_ the hostname. That is currently the `SystemdStrategy` class. Otherwise the value returned from `self.hostname_cmd` would be not at all what we expect.\r\n\r\nI don't think having this conditional buys us anything, nor does it help with backward compatibility.",
        "createdAt" : "2020-07-09T15:43:06Z",
        "updatedAt" : "2020-07-10T00:38:17Z",
        "lastEditedBy" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "tags" : [
        ]
      }
    ],
    "commit" : "0ec51969a573a9044cd3f80c65cd0c8fb18ffaa7",
    "line" : 27,
    "diffHunk" : "@@ -1,1 +156,160 @@        self.module = module\n        self.changed = False\n        self.hostname_cmd = self.module.get_bin_path('hostname', True)\n\n    def update_current_and_permanent_hostname(self):"
  },
  {
    "id" : "511e2fec-d522-4c61-869d-a58462cedadc",
    "prId" : 74829,
    "prUrl" : "https://github.com/ansible/ansible/pull/74829#pullrequestreview-669211579",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5caafe24-af6f-4f8d-8f01-73338881a0b3",
        "parentId" : null,
        "authorId" : "96aeecbb-c275-402c-b904-a795c82efb48",
        "body" : "@geliwei Thanks for the PR. I will wait for https://github.com/ansible/ansible/pull/74797 to get merged first. Then we can merge this.\r\n\r\nApart from that, please create a [changelog fragment](https://docs.ansible.com/ansible/latest/community/development_process.html#creating-a-changelog-fragment). See [this fragment](https://github.com/ansible/ansible/blob/c2f528b7686c9573aa8493357219e0bbe4416dd3/changelogs/fragments/reboot-change-default-boot-command.yaml) as an example.",
        "createdAt" : "2021-05-26T12:15:15Z",
        "updatedAt" : "2021-05-26T12:15:20Z",
        "lastEditedBy" : "96aeecbb-c275-402c-b904-a795c82efb48",
        "tags" : [
        ]
      },
      {
        "id" : "3c33b0ec-4cd9-4c99-b76a-74b4a57909c5",
        "parentId" : "5caafe24-af6f-4f8d-8f01-73338881a0b3",
        "authorId" : "eff7ccf9-4b33-4001-b67b-624255be610d",
        "body" : "I didn't file a bug for this since it's a minor change, hope that will be OK.",
        "createdAt" : "2021-05-26T14:40:19Z",
        "updatedAt" : "2021-05-26T14:40:19Z",
        "lastEditedBy" : "eff7ccf9-4b33-4001-b67b-624255be610d",
        "tags" : [
        ]
      },
      {
        "id" : "1ac4ffd8-dfd1-4912-a038-4fb2cd8b6f8c",
        "parentId" : "5caafe24-af6f-4f8d-8f01-73338881a0b3",
        "authorId" : "96aeecbb-c275-402c-b904-a795c82efb48",
        "body" : "Yes that is OK. Just include the PR link in the changelog.",
        "createdAt" : "2021-05-26T15:53:53Z",
        "updatedAt" : "2021-05-26T15:53:53Z",
        "lastEditedBy" : "96aeecbb-c275-402c-b904-a795c82efb48",
        "tags" : [
        ]
      }
    ],
    "commit" : "65a6eaa7694a0766943e3baa53badf62d0e87f0d",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +804,808 @@\n\nclass AnolisOSHostname(Hostname):\n    platform = 'Linux'\n    distribution = 'Anolis'"
  }
]