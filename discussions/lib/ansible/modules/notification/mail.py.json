[
  {
    "id" : "50a5eb41-56a0-4229-8e1a-f06cb4174a39",
    "prId" : 47019,
    "prUrl" : "https://github.com/ansible/ansible/pull/47019#pullrequestreview-164803539",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9e5e19be-45fc-43c3-9451-8f76d5b2583f",
        "parentId" : null,
        "authorId" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "body" : "I'd do some debug logging in here. Swallowing wholesale exceptions like this is harmful. Let's at least do `except Exception as exc:` and add log that + I'd like to see an explicit section for that socket error as well.",
        "createdAt" : "2018-10-13T23:55:47Z",
        "updatedAt" : "2018-10-22T22:59:28Z",
        "lastEditedBy" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "tags" : [
        ]
      },
      {
        "id" : "2ffbb5a9-8e3d-4686-82e0-408712ebc065",
        "parentId" : "9e5e19be-45fc-43c3-9451-8f76d5b2583f",
        "authorId" : "7268595c-1eb4-4b5f-9277-90f183130a4b",
        "body" : "The whole purpose here is that it falls back to the second attempt, except if `secure == always`.",
        "createdAt" : "2018-10-13T23:57:30Z",
        "updatedAt" : "2018-10-22T22:59:28Z",
        "lastEditedBy" : "7268595c-1eb4-4b5f-9277-90f183130a4b",
        "tags" : [
        ]
      },
      {
        "id" : "1f746fc1-714a-475c-9ff3-170e2da09aac",
        "parentId" : "9e5e19be-45fc-43c3-9451-8f76d5b2583f",
        "authorId" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "body" : "Yeah, but it's untrackable this way. Also, there's too much nesting in here. It's hard to reason about it. It's better for maintainability to set explicit expectations for what we want to ignore.",
        "createdAt" : "2018-10-14T00:09:35Z",
        "updatedAt" : "2018-10-22T22:59:28Z",
        "lastEditedBy" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "tags" : [
        ]
      },
      {
        "id" : "b1b1bc22-6d92-419d-8023-d8b2a199b902",
        "parentId" : "9e5e19be-45fc-43c3-9451-8f76d5b2583f",
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "We should never use a bare except in code.  except Exception is acceptable when it is a catchall case (like this).  bare except catches things like KeyboardInterrupt and SystemExit which we do not want to catch in 99% of circumstances.  In the other 1%, we should be explicit about catching those exceptions so that people can tell we know what we're doing.  (Changing to except Exception isn't sufficient to block this as a backport, though.  I'm going to merge this and the change can be made in devel).",
        "createdAt" : "2018-10-15T17:02:37Z",
        "updatedAt" : "2018-10-22T22:59:28Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      }
    ],
    "commit" : "9f31304c2812d93df6c84509c97d6b9dc7558a27",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +257,261 @@                                               (host, port, to_native(e)), exception=traceback.format_exc())\n            except:\n                pass\n\n        if not secure_state:"
  },
  {
    "id" : "cee36916-d89e-4db0-8a5c-a1254b050faa",
    "prId" : 47412,
    "prUrl" : "https://github.com/ansible/ansible/pull/47412#pullrequestreview-172300170",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "23a0cc3a-a3ae-45c4-8ef5-c77a95f4e1bf",
        "parentId" : null,
        "authorId" : "f01f60d2-e084-44c7-baad-7798a8518fb2",
        "body" : "This is strange to me: the documentation of `smtplib` says that if you pass host/port to the constructor, it'll call `connect` for you:\r\n\r\n> If the optional host and port parameters are given, the SMTP connect() method is called with those parameters during initialization.\r\n\r\nSo you're connecting to the SMTP server twice -- why?",
        "createdAt" : "2018-11-06T15:22:56Z",
        "updatedAt" : "2018-11-06T15:22:56Z",
        "lastEditedBy" : "f01f60d2-e084-44c7-baad-7798a8518fb2",
        "tags" : [
        ]
      },
      {
        "id" : "fbaea4a1-3feb-4a43-ac50-b36cecdc7157",
        "parentId" : "23a0cc3a-a3ae-45c4-8ef5-c77a95f4e1bf",
        "authorId" : "880e3429-ca19-45bd-adf1-f96ff41b3745",
        "body" : "First connect is a secure layer.",
        "createdAt" : "2018-11-07T00:42:26Z",
        "updatedAt" : "2018-11-07T00:42:27Z",
        "lastEditedBy" : "880e3429-ca19-45bd-adf1-f96ff41b3745",
        "tags" : [
        ]
      }
    ],
    "commit" : "3fb1bf305577eff992dc6703055950b1253c7ae7",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +266,270 @@            try:\n                smtp = smtplib.SMTP_SSL(host=host, port=port, timeout=timeout)\n                code, smtpmessage = smtp.connect(host, port)\n                secure_state = True\n            except ssl.SSLError as e:"
  },
  {
    "id" : "1d6b1520-4ece-4b59-8305-a3c18693e90e",
    "prId" : 47412,
    "prUrl" : "https://github.com/ansible/ansible/pull/47412#pullrequestreview-177504571",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e6480cd3-483e-4778-a212-c0cefa45b7d3",
        "parentId" : null,
        "authorId" : "4d0b0aed-ec58-4586-973c-43fb7f135bfe",
        "body" : "I tested the mail module on Ansible v2.7.1 on Python 3.7.1 and if you specify `secure: never` the mail module works fine. Changes are only necessary to be applied to the attempt to use ssl (which you did on lines 267 & 268). By changing the regular smtp section, it breaks functionality for ansible users that run on python 2.7.x. Is there a reason you changed this section as well?",
        "createdAt" : "2018-11-21T21:01:35Z",
        "updatedAt" : "2018-11-21T21:03:21Z",
        "lastEditedBy" : "4d0b0aed-ec58-4586-973c-43fb7f135bfe",
        "tags" : [
        ]
      },
      {
        "id" : "9daecbb4-65cd-4191-ae0a-d2f0f5b1321c",
        "parentId" : "e6480cd3-483e-4778-a212-c0cefa45b7d3",
        "authorId" : "880e3429-ca19-45bd-adf1-f96ff41b3745",
        "body" : "@tpeyton, because `smtp_ssl` and `smtp_over_tls` is different things.",
        "createdAt" : "2018-11-22T04:57:18Z",
        "updatedAt" : "2018-11-22T05:03:10Z",
        "lastEditedBy" : "880e3429-ca19-45bd-adf1-f96ff41b3745",
        "tags" : [
        ]
      }
    ],
    "commit" : "3fb1bf305577eff992dc6703055950b1253c7ae7",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +266,270 @@            try:\n                smtp = smtplib.SMTP_SSL(host=host, port=port, timeout=timeout)\n                code, smtpmessage = smtp.connect(host, port)\n                secure_state = True\n            except ssl.SSLError as e:"
  }
]