[
  {
    "id" : "d47f9f4f-c8ee-4b5d-bf63-94a44a5519a0",
    "prId" : 72648,
    "prUrl" : "https://github.com/ansible/ansible/pull/72648#pullrequestreview-534720293",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f7d750ce-eddd-4294-8f3c-fe0d5c585885",
        "parentId" : null,
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "There was a [unit test ](https://github.com/ansible/ansible/blob/devel/test/units/utils/collection_loader/test_collection_loader.py#L31) that was relying on the side effect that only system paths needed to be a dir, not the explicitly provided collection paths.",
        "createdAt" : "2020-11-19T16:42:23Z",
        "updatedAt" : "2020-12-14T15:30:35Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "8ac5d944-854f-43fb-b185-1d39039189fb",
        "parentId" : "f7d750ce-eddd-4294-8f3c-fe0d5c585885",
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "@nitzmahone any specific reason why 'some paths' were verified and others not?",
        "createdAt" : "2020-11-19T16:45:46Z",
        "updatedAt" : "2020-12-14T15:30:35Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "884afa14-1120-4f17-b33d-36ee4df1e328",
        "parentId" : "f7d750ce-eddd-4294-8f3c-fe0d5c585885",
        "authorId" : "311820dd-fcb9-46df-a201-9c0e7d6fac58",
        "body" : "IIRC this behavioral disconnect was because the two features were added at different times. My original assumption was that the collections path would remain a relatively short list of dirs, so allowing the normal Python behavior of \"stuff can appear later and it's fine\" to continue was OK, but when we started putting `sys.path` into the mix, I wanted to scan it only once, because it's not uncommon for `sys.path` to have hundreds of generated entries in it, and I didn't want the collection loader having to scan all that all the time. Off the top of my head, I don't really see a problem moving the whole thing to \"if there's no ansible_collections package in it when we fire it up, just ignore it\".",
        "createdAt" : "2020-11-19T18:11:57Z",
        "updatedAt" : "2020-12-14T15:30:35Z",
        "lastEditedBy" : "311820dd-fcb9-46df-a201-9c0e7d6fac58",
        "tags" : [
        ]
      }
    ],
    "commit" : "9bc9f9b46fcfc6a968d0a9bc98d91d71a31cd4a7",
    "line" : 28,
    "diffHunk" : "@@ -1,1 +74,78 @@                p = os.path.dirname(p)\n\n            if p not in good_paths and os.path.isdir(to_bytes(os.path.join(p, 'ansible_collections'), errors='surrogate_or_strict')):\n                good_paths.append(p)\n"
  },
  {
    "id" : "1a8bbfaf-c7cd-46dc-ba35-5543e4714d41",
    "prId" : 73279,
    "prUrl" : "https://github.com/ansible/ansible/pull/73279#pullrequestreview-583641994",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "533ecd7b-8409-47c4-a996-24897f119d3f",
        "parentId" : null,
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "This could use a changelog. We might also want to document this in the developing_collections page or improve error messages to give a better clue about what might be wrong.\r\n\r\nansible-galaxy:\r\n```\r\nERROR! Invalid collection name 'def.coll', name must be in the format <namespace>.<collection>. \r\nPlease make sure namespace and collection name contains characters from [a-zA-Z0-9_] only.\r\n```\r\nUsing a now-invalid collection:\r\n```\r\n[WARNING]: errors were encountered during the plugin load for def.coll.my_module: ['invalid collection name (must be of the form namespace.collection): def.coll']\r\n```",
        "createdAt" : "2021-02-04T17:09:28Z",
        "updatedAt" : "2021-02-04T17:09:32Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "4bbb3702-d6c0-4d1c-9ee9-7276a14a5064",
        "parentId" : "533ecd7b-8409-47c4-a996-24897f119d3f",
        "authorId" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "body" : "Fair enough. But I think that changing the error message should go to a separate PR. The resolver already uses this code in one place anyway...",
        "createdAt" : "2021-02-04T17:12:08Z",
        "updatedAt" : "2021-02-04T17:12:08Z",
        "lastEditedBy" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "tags" : [
        ]
      },
      {
        "id" : "1ee8d1eb-d5d9-46c7-8e29-8810a773535b",
        "parentId" : "533ecd7b-8409-47c4-a996-24897f119d3f",
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "Yeah, but in a very limited way. You could initialize + build + install the tarfile + use it, and it would work. I'm fine with changing the error later though.",
        "createdAt" : "2021-02-04T17:30:29Z",
        "updatedAt" : "2021-02-04T17:30:30Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      }
    ],
    "commit" : "bcf1e0451bdda2874757238bfe6be03ecfe67e38",
    "line" : 49,
    "diffHunk" : "@@ -1,1 +874,878 @@        return all(\n            # NOTE: keywords and identifiers are different in differnt Pythons\n            not iskeyword(ns_or_name) and is_python_identifier(ns_or_name)\n            for ns_or_name in collection_name.split(u'.')\n        )"
  }
]