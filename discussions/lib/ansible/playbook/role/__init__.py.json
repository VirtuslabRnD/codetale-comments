[
  {
    "id" : "8b17d056-4c25-4b1f-b642-344997ef4b2d",
    "prId" : 55263,
    "prUrl" : "https://github.com/ansible/ansible/pull/55263#pullrequestreview-258896228",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4918ae83-74b8-47fb-a7f1-7fc750f1fdc9",
        "parentId" : null,
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "~won't this give different behaviour compared to `frozenset` above if `.items()` is non unique?~ nvmd, frozenset below ... which makes me think this change is either a noop or it is changing which k value survives?\r\n\r\nupdate will add each element of the tuple to the set, while add adds the tuple itself to the set, so this does seem like a correct change.",
        "createdAt" : "2019-07-08T13:21:34Z",
        "updatedAt" : "2019-07-08T13:25:46Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      }
    ],
    "commit" : "2a54e34d010ec382574b4feb9cef7361f4e0689a",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +69,73 @@                for k, v in params.items():\n                    # Hash each entry individually\n                    new_params.add((k, hash_params(v)))\n                new_params = frozenset(new_params)\n"
  },
  {
    "id" : "6f41f87d-030c-4a6a-a92b-99253679e3eb",
    "prId" : 73152,
    "prUrl" : "https://github.com/ansible/ansible/pull/73152#pullrequestreview-589616828",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e831a1b5-5871-4086-9c2f-b1a125657ae8",
        "parentId" : null,
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "I don't love passing around pointers in python because this kind of thing happens easily. If there is no task data, it is reassigned here, so the caller will not have the updated value and no tasks will run for the role.",
        "createdAt" : "2021-02-12T15:29:09Z",
        "updatedAt" : "2021-02-12T20:29:40Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "c568a9b7-fa24-46f8-b571-e1c5e7cd51ae",
        "parentId" : "e831a1b5-5871-4086-9c2f-b1a125657ae8",
        "authorId" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "body" : "Oh, this is a good catch. I'll have to return `task_data` here for the caller to use.",
        "createdAt" : "2021-02-12T16:20:30Z",
        "updatedAt" : "2021-02-12T20:29:40Z",
        "lastEditedBy" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "tags" : [
        ]
      }
    ],
    "commit" : "b7cdc44f1430253cf9f04bc0d9899d02895a2218",
    "line" : 41,
    "diffHunk" : "@@ -1,1 +302,306 @@                # validate_argument_spec task\n                if not task_data:\n                    task_data = []\n                task_data.insert(0, validation_task)\n        return task_data"
  },
  {
    "id" : "6d7462f4-d75f-465f-87a8-83dd30498c27",
    "prId" : 73152,
    "prUrl" : "https://github.com/ansible/ansible/pull/73152#pullrequestreview-589797166",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "dc17e13f-c6a5-4a65-86a6-e07f09fc96e0",
        "parentId" : null,
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "ansible.legacy. ? as most of our action plugins allow.",
        "createdAt" : "2021-02-12T17:33:38Z",
        "updatedAt" : "2021-02-12T20:29:40Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "eca7cbd5-0b90-40b3-a512-8b40fe2b852a",
        "parentId" : "dc17e13f-c6a5-4a65-86a6-e07f09fc96e0",
        "authorId" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "body" : "I think we should stick with `ansible.builtin.` since it doesn't allow overriding by filename.",
        "createdAt" : "2021-02-12T19:40:33Z",
        "updatedAt" : "2021-02-12T20:29:40Z",
        "lastEditedBy" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "tags" : [
        ]
      },
      {
        "id" : "f9d63c39-27db-4d6b-ba14-9c5f2fd61465",
        "parentId" : "dc17e13f-c6a5-4a65-86a6-e07f09fc96e0",
        "authorId" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "body" : "üëç ",
        "createdAt" : "2021-02-12T20:01:05Z",
        "updatedAt" : "2021-02-12T20:29:40Z",
        "lastEditedBy" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "tags" : [
        ]
      }
    ],
    "commit" : "b7cdc44f1430253cf9f04bc0d9899d02895a2218",
    "line" : 61,
    "diffHunk" : "@@ -1,1 +322,326 @@        return {\n            'action': {\n                'module': 'ansible.builtin.validate_argument_spec',\n                # Pass only the 'options' portion of the arg spec to the module.\n                'argument_spec': argument_spec.get('options', {}),"
  },
  {
    "id" : "85c35262-586a-4785-a74a-e11d09c941be",
    "prId" : 73152,
    "prUrl" : "https://github.com/ansible/ansible/pull/73152#pullrequestreview-589753837",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5637b0f3-b832-4367-a190-4bb2e7ade494",
        "parentId" : null,
        "authorId" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "body" : "Expectations around role dependency and spec validation will probably vary widely. What we are going with currently is each role gets a validation task immediately before the role is executed. We are not special handling roles if they are or have dependencies and changing the validation order.\r\n\r\nWe should probably warn that role dependencies will run even if validation of the role with the deps fails. The warning message below needs some wordsmithing.\r\n\r\n```suggestion\r\n        if self._metadata.argument_specs:\r\n            if self._dependencies:\r\n                display.warning(\"Dependent roles will run before roles with argument specs even if validation fails.\")\r\n```",
        "createdAt" : "2021-02-12T18:11:11Z",
        "updatedAt" : "2021-02-12T20:29:40Z",
        "lastEditedBy" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "tags" : [
        ]
      },
      {
        "id" : "8d5abb7f-9cf9-4838-9e3b-f213eb049642",
        "parentId" : "5637b0f3-b832-4367-a190-4bb2e7ade494",
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "In rewording, do not use role name(s) or any identifiers, so it only issues one warning (imagine 4 dependent roles with argspec and warning for each).",
        "createdAt" : "2021-02-12T18:14:27Z",
        "updatedAt" : "2021-02-12T20:29:40Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "34fe1241-958a-42bd-a768-90fe0905c881",
        "parentId" : "5637b0f3-b832-4367-a190-4bb2e7ade494",
        "authorId" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "body" : "If we wanted to add an option to disable this warning, add a new option in `lib/ansible/config/base.yml` similar to other `*_WARNING` options.\r\n\r\n`import ansible.constants as C` then just check `C.ROLE_VALIDATION_DEP_WARNING` (or whatever you end up calling it).",
        "createdAt" : "2021-02-12T18:22:10Z",
        "updatedAt" : "2021-02-12T20:29:40Z",
        "lastEditedBy" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "tags" : [
        ]
      },
      {
        "id" : "a506e494-2480-4ed7-a82d-04d1c710f35e",
        "parentId" : "5637b0f3-b832-4367-a190-4bb2e7ade494",
        "authorId" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "body" : "Thanks! I put this in the latest push.",
        "createdAt" : "2021-02-12T18:55:04Z",
        "updatedAt" : "2021-02-12T20:29:40Z",
        "lastEditedBy" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "tags" : [
        ]
      }
    ],
    "commit" : "b7cdc44f1430253cf9f04bc0d9899d02895a2218",
    "line" : 25,
    "diffHunk" : "@@ -1,1 +286,290 @@        :returns: The (possibly modified) task list.\n        '''\n        if self._metadata.argument_specs:\n            if self._dependencies:\n                display.warning(\"Dependent roles will run before roles with argument specs even if validation fails.\")"
  }
]