[
  {
    "id" : "970350bb-c7c3-4c3b-9831-e14a108c890d",
    "prId" : 24297,
    "prUrl" : "https://github.com/ansible/ansible/pull/24297#pullrequestreview-36296310",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7518147d-ad2c-4538-9d6d-4556dd3a07dc",
        "parentId" : null,
        "authorId" : "4b69a0b5-ac6f-45e9-9507-dd1385182f29",
        "body" : "LGTM.  This agrees with the schema for validate-modules.",
        "createdAt" : "2017-05-04T15:06:29Z",
        "updatedAt" : "2017-05-04T15:06:29Z",
        "lastEditedBy" : "4b69a0b5-ac6f-45e9-9507-dd1385182f29",
        "tags" : [
        ]
      }
    ],
    "commit" : "276109cd3275b4ce031c75b2f4c2099edfeecdf0",
    "line" : 16,
    "diffHunk" : "@@ -1,1 +273,277 @@                desc = CLI.tty_ify(opt['description'])\n            else:\n                desc = CLI.tty_ify(\" \".join(opt['description']))\n\n            required = opt.get('required', False)"
  },
  {
    "id" : "01ef6c28-41a3-425b-ba35-2356f5b66e7c",
    "prId" : 47682,
    "prUrl" : "https://github.com/ansible/ansible/pull/47682#pullrequestreview-177343732",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0e7dc65f-8626-46c5-a238-0d2645e4c461",
        "parentId" : null,
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "Perhaps ansible-doc should emit an error if self.options.all_plugins and self.options.module_path are both set?",
        "createdAt" : "2018-10-26T16:25:01Z",
        "updatedAt" : "2018-11-21T17:01:03Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      },
      {
        "id" : "e7931f8b-09dc-4cbc-a905-1f375d20d872",
        "parentId" : "0e7dc65f-8626-46c5-a238-0d2645e4c461",
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "~~will be noop then depending on which gets merged first, but need to actually be able to tests the cliconf/httpapi plugins~~",
        "createdAt" : "2018-10-26T16:38:43Z",
        "updatedAt" : "2018-11-21T17:01:03Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "61743f86-508f-4bc7-9fcb-b8f20617094b",
        "parentId" : "0e7dc65f-8626-46c5-a238-0d2645e4c461",
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "I don't think so.... we only have one instance of a loader per run.  So module_path will apply to a loader.  But only one of them.  So we either need to apply it to all of them (I'm not sure if that works... can you have all plugin types in a single loader path?) or we need to error out so the user knows not to use the module_path option with the all_plugins option.",
        "createdAt" : "2018-10-26T16:58:12Z",
        "updatedAt" : "2018-11-21T17:01:03Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      },
      {
        "id" : "4d50ea71-8623-4a7b-b51b-de4abf78d953",
        "parentId" : "0e7dc65f-8626-46c5-a238-0d2645e4c461",
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "sorry, that comment was meant for the `constants.py` change, i agree on module_path being an issue with --all, but we only use this option internally for CI so i dont see custom paths applicable for this case.",
        "createdAt" : "2018-10-26T17:00:33Z",
        "updatedAt" : "2018-11-21T17:01:03Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "a2653b0c-79f7-4022-8b84-9f2089d626d0",
        "parentId" : "0e7dc65f-8626-46c5-a238-0d2645e4c461",
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "also, code already emits warning that module path is ignored with -a/--all",
        "createdAt" : "2018-11-21T17:01:17Z",
        "updatedAt" : "2018-11-21T17:01:17Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      }
    ],
    "commit" : "94b19551388869f9afb5ba1e85bad2ba54af89e7",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +128,132 @@        # process all plugins of type\n        if self.options.all_plugins:\n            self.args = self.get_all_plugins_of_type(plugin_type)\n            if self.options.module_path:\n                display.warning('Ignoring \"--module-path/-M\" option as \"--all/-a\" only displays builtins')"
  },
  {
    "id" : "bd12a509-007b-43a3-9a5c-4be3e56acc5e",
    "prId" : 52036,
    "prUrl" : "https://github.com/ansible/ansible/pull/52036#pullrequestreview-202543799",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "033870df-3460-4ba1-b3b0-3fd430d4cc51",
        "parentId" : null,
        "authorId" : "94ae5814-8889-4328-9b58-745772997928",
        "body" : "I did this because the below `os.listdir` failed on https://github.com/ansible/ansible/blob/devel/test/runner/lib/ansible_util.py#L48 in a testing environment. Figured it's a good check to have anyway?",
        "createdAt" : "2019-02-12T08:54:01Z",
        "updatedAt" : "2019-02-12T08:54:01Z",
        "lastEditedBy" : "94ae5814-8889-4328-9b58-745772997928",
        "tags" : [
        ]
      }
    ],
    "commit" : "b51e53e7bb2b6c9c0f70e9a335e7d52dd7a7b2f4",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +284,288 @@            return plugin_list\n\n        if not os.path.isdir(path):\n            display.vvvv(\"%s is not a directory\" % path)\n            return plugin_list"
  },
  {
    "id" : "69e33c2c-2d86-443c-8259-09b4d26b67be",
    "prId" : 60933,
    "prUrl" : "https://github.com/ansible/ansible/pull/60933#pullrequestreview-277169141",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "09c90469-e2f4-408c-a4bc-b598fe90e74a",
        "parentId" : null,
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "should have elif/else with same error on 'non list'",
        "createdAt" : "2019-08-20T13:34:41Z",
        "updatedAt" : "2019-09-04T01:38:14Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      }
    ],
    "commit" : "3656e32e193e28062edc5a920bf320f4afbb7312",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +477,481 @@                        raise AnsibleError(\"Expected string in description of %s at index %s, got %s\" % (o, entry_idx, type(entry)))\n                    text.append(textwrap.fill(DocCLI.tty_ify(entry), limit, initial_indent=opt_indent, subsequent_indent=opt_indent))\n            else:\n                if not isinstance(opt['description'], string_types):\n                    raise AnsibleError(\"Expected string in description of %s, got %s\" % (o, type(opt['description'])))"
  },
  {
    "id" : "8456d611-1965-4a8c-9844-f4ecdd76c8c5",
    "prId" : 71070,
    "prUrl" : "https://github.com/ansible/ansible/pull/71070#pullrequestreview-461910216",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ef9de38f-957a-4268-bee6-8ff4c4540aff",
        "parentId" : null,
        "authorId" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "body" : "This may not matter because something else may handle the RST --> HTML conversion, but for in RST, `**word**` is the syntax for bold while `*word*` is the syntax for italic. If this is only for the display of `ansible-doc`, this should be fine. But it'd be surprising if `B(word)` ended up being italic in the final HTML.",
        "createdAt" : "2020-08-05T16:56:53Z",
        "updatedAt" : "2020-08-05T16:56:53Z",
        "lastEditedBy" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "tags" : [
        ]
      },
      {
        "id" : "28c5d7df-eeec-454a-94ec-528d8f439f58",
        "parentId" : "ef9de38f-957a-4268-bee6-8ff4c4540aff",
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "This isn't rst.",
        "createdAt" : "2020-08-05T17:03:43Z",
        "updatedAt" : "2020-08-05T17:03:43Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      },
      {
        "id" : "14329d7c-7d57-4e4f-9a36-45344eb2ac26",
        "parentId" : "ef9de38f-957a-4268-bee6-8ff4c4540aff",
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "rst and html (for building the web docs) are handled by rst_ify and html_ify from this code: https://github.com/ansible-community/antsibull/blob/main/antsibull/jinja2/filters.py\r\n\r\nThe code in this PR is only for ansible-doc to output to the screen.\r\n\r\nThis split is why I added the note that the code in both places needs to be changed if new macros are added.",
        "createdAt" : "2020-08-05T17:08:32Z",
        "updatedAt" : "2020-08-05T17:08:32Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      },
      {
        "id" : "9c21e1fe-33ce-4e98-b714-991c5beb9f57",
        "parentId" : "ef9de38f-957a-4268-bee6-8ff4c4540aff",
        "authorId" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "body" : "Ah, ok. I figured they were separate and this was only for `ansible-doc` output. I just wanted to make sure.",
        "createdAt" : "2020-08-05T18:15:20Z",
        "updatedAt" : "2020-08-05T18:15:20Z",
        "lastEditedBy" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "tags" : [
        ]
      },
      {
        "id" : "ebf80c38-ef70-4aee-bab8-e87b518212e2",
        "parentId" : "ef9de38f-957a-4268-bee6-8ff4c4540aff",
        "authorId" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "body" : "Fun times with cross project relationships. 😁 ",
        "createdAt" : "2020-08-05T18:16:06Z",
        "updatedAt" : "2020-08-05T18:16:06Z",
        "lastEditedBy" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "tags" : [
        ]
      }
    ],
    "commit" : "10a290cb24935d28cb7d915c4b2579995e6b1087",
    "line" : 32,
    "diffHunk" : "@@ -1,1 +93,97 @@\n        t = cls._ITALIC.sub(r\"`\\1'\", text)    # I(word) => `word'\n        t = cls._BOLD.sub(r\"*\\1*\", t)         # B(word) => *word*\n        t = cls._MODULE.sub(\"[\" + r\"\\1\" + \"]\", t)       # M(word) => [word]\n        t = cls._URL.sub(r\"\\1\", t)                      # U(word) => word"
  },
  {
    "id" : "5d28a93e-a0ce-46e0-8f49-687301371ef9",
    "prId" : 72120,
    "prUrl" : "https://github.com/ansible/ansible/pull/72120#pullrequestreview-520707781",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3c804bd3-eed0-48a0-b7b9-316443aaaad2",
        "parentId" : null,
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "If multiple role paths contain the same standalone role name build_summary overwrites one of them. First found should win to mirror the code (or maybe both should be displayed?)",
        "createdAt" : "2020-10-27T13:12:35Z",
        "updatedAt" : "2020-11-16T14:59:50Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "f8ac4eec-1bb2-4cd2-82bb-8c4e9a504ac7",
        "parentId" : "3c804bd3-eed0-48a0-b7b9-316443aaaad2",
        "authorId" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "body" : "Hrm, good spot. First found sounds correct to me.",
        "createdAt" : "2020-10-27T19:57:52Z",
        "updatedAt" : "2020-11-16T14:59:50Z",
        "lastEditedBy" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "tags" : [
        ]
      },
      {
        "id" : "509fb964-9ba2-434f-8f5c-4490eb4270d5",
        "parentId" : "3c804bd3-eed0-48a0-b7b9-316443aaaad2",
        "authorId" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "body" : "Implemented first-found in latest commits.",
        "createdAt" : "2020-10-30T14:13:39Z",
        "updatedAt" : "2020-11-16T14:59:50Z",
        "lastEditedBy" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "tags" : [
        ]
      }
    ],
    "commit" : "7444a8ea3f3a6a845a0a11a787b1f81df80515ca",
    "line" : 180,
    "diffHunk" : "@@ -1,1 +216,220 @@        result = {}\n\n        for role, role_path in roles:\n            argspec = self._load_argspec(role, role_path=role_path)\n            fqcn, summary = self._build_summary(role, '', argspec)"
  },
  {
    "id" : "97b54508-48fa-49d7-996f-b4e24a606d97",
    "prId" : 72120,
    "prUrl" : "https://github.com/ansible/ansible/pull/72120#pullrequestreview-519784399",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fbccb3b0-afbf-47ec-b5be-c62baee4f60a",
        "parentId" : null,
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "This seems like it would be noisy since the default role paths don't necessarily exist.",
        "createdAt" : "2020-10-27T13:13:50Z",
        "updatedAt" : "2020-11-16T14:59:50Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "6953c350-669a-4b9c-9eba-057bb7582578",
        "parentId" : "fbccb3b0-afbf-47ec-b5be-c62baee4f60a",
        "authorId" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "body" : "Good point. I could have swore I copied this bit from code somewhere else, but now I can't find it.",
        "createdAt" : "2020-10-27T20:20:26Z",
        "updatedAt" : "2020-11-16T14:59:50Z",
        "lastEditedBy" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "tags" : [
        ]
      },
      {
        "id" : "8b945f52-edb6-4067-a52c-d5ce49ee87f9",
        "parentId" : "fbccb3b0-afbf-47ec-b5be-c62baee4f60a",
        "authorId" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "body" : "Removed in latest commits.",
        "createdAt" : "2020-10-29T15:23:30Z",
        "updatedAt" : "2020-11-16T14:59:50Z",
        "lastEditedBy" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "tags" : [
        ]
      }
    ],
    "commit" : "7444a8ea3f3a6a845a0a11a787b1f81df80515ca",
    "line" : 69,
    "diffHunk" : "@@ -1,1 +105,109 @@        found_names = set()\n        for path in role_paths:\n            if not os.path.isdir(path):\n                continue\n            # Check each subdir for a meta/argument_specs.yml file"
  },
  {
    "id" : "3182a28b-a107-4918-a967-d13922f7f483",
    "prId" : 72120,
    "prUrl" : "https://github.com/ansible/ansible/pull/72120#pullrequestreview-531837351",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1f6a003b-0c53-4b02-9f0c-11390af4d8d7",
        "parentId" : null,
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "There are some quirks with the roles search path. If not found in the `roles` subdir, the basedir is also searched. In a collection if you have a `.` in the role name it's another directory layer - `geerlingguy.docker` in a collection should refer to `geerlingguy/docker/` not `geerlingguy.docker/`. `ansible-doc` doesn't need all of it, but it might be worth refactoring [_load_role_path](https://github.com/ansible/ansible/blob/devel/lib/ansible/playbook/role/definition.py#L137) to move the search path resolution (and maybe the role path loading?) to common code so everything stays in sync.\r\n\r\n",
        "createdAt" : "2020-10-27T13:19:42Z",
        "updatedAt" : "2020-11-16T14:59:50Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "e2b874ed-69ee-44b3-90d0-1d456cea2984",
        "parentId" : "1f6a003b-0c53-4b02-9f0c-11390af4d8d7",
        "authorId" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "body" : "Hrm, I'm probably being dense here, so you may have to help me out. Not sure I follow the statement...\r\n\r\n  `If not found in the roles subdir, the basedir is also searched.`\r\n\r\nIs my code doing that, or code elsewhere? I don't see where that is done, and doesn't seem like correct behavior for finding roles.\r\n\r\nThe logic I've added here searches for roles in:\r\n\r\n- DEFAULT_ROLES_PATH\r\n- the `roles` subdir of whatever value is passed to `--playbook-dir` (which is `basedir` in this portion of the code)\r\n- the value of `--roles-path`\r\n- the `roles` subdir of any collections that are found.\r\n\r\nFailing to see where the collection bit you discussed fits in, too.   :(\r\n",
        "createdAt" : "2020-10-27T20:13:32Z",
        "updatedAt" : "2020-11-16T14:59:50Z",
        "lastEditedBy" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "tags" : [
        ]
      },
      {
        "id" : "85e7fa57-1ed3-4068-b018-22bf6299a0f1",
        "parentId" : "1f6a003b-0c53-4b02-9f0c-11390af4d8d7",
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "FYI, the collection bit fits in here https://github.com/ansible/ansible/blob/devel/lib/ansible/playbook/role/definition.py#L159",
        "createdAt" : "2020-10-27T20:38:52Z",
        "updatedAt" : "2020-11-16T14:59:50Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "be85b309-73a8-4769-960b-036e72d48dfe",
        "parentId" : "1f6a003b-0c53-4b02-9f0c-11390af4d8d7",
        "authorId" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "body" : "I've added searching the playbook basedir as a last-resort in the latest commits. Thanks for seeing that undocumented behavior! I totally missed it.\r\n\r\nAfter looking through the code in _load_role_path() and related bits, there is a lot of commonality, but there is also a lot of stuff happening there that ansible-doc doesn't necessarily need to do. We definitely should work to consolidate this code, but I think attempting to do so here would make this already large change much more complex. I think that should be a separate project (to be done soon, hopefully).",
        "createdAt" : "2020-10-30T14:36:21Z",
        "updatedAt" : "2020-11-16T14:59:50Z",
        "lastEditedBy" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "tags" : [
        ]
      },
      {
        "id" : "e3ba0194-5320-48f8-91e9-213a52ca523f",
        "parentId" : "1f6a003b-0c53-4b02-9f0c-11390af4d8d7",
        "authorId" : "311820dd-fcb9-46df-a201-9c0e7d6fac58",
        "body" : "Agreed- trying to refactor/share the common bits is probably out of scope for this PR. If we end up doing the `importlib.resources` stuff though, that's probably the place to step back and take a look at where we can share a bunch of this stuff between the runtime and docs generation, and try to come up with a more coherent generalized API.",
        "createdAt" : "2020-11-16T22:24:47Z",
        "updatedAt" : "2020-11-16T22:24:48Z",
        "lastEditedBy" : "311820dd-fcb9-46df-a201-9c0e7d6fac58",
        "tags" : [
        ]
      }
    ],
    "commit" : "7444a8ea3f3a6a845a0a11a787b1f81df80515ca",
    "line" : 334,
    "diffHunk" : "@@ -1,1 +585,589 @@            subdir = os.path.join(basedir, \"roles\")\n            if os.path.isdir(subdir):\n                roles_path = (subdir,) + roles_path\n            roles_path = roles_path + (basedir,)\n"
  },
  {
    "id" : "a6ec29b6-eee8-43d1-aaaf-b14a0edb023e",
    "prId" : 72120,
    "prUrl" : "https://github.com/ansible/ansible/pull/72120#pullrequestreview-519785737",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4d0b3ced-6c23-419d-b56a-85bf0ca83ea5",
        "parentId" : null,
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "More than 1 should be handled too (it's silently ignored)",
        "createdAt" : "2020-10-27T13:20:06Z",
        "updatedAt" : "2020-11-16T14:59:50Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "62d115ec-d601-412b-8777-4a2e248903ac",
        "parentId" : "4d0b3ced-6c23-419d-b56a-85bf0ca83ea5",
        "authorId" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "body" : "This currently matches what happens with a collection filter applied to `--list` and the other module types. I'd rather they be consistent at this point. I agree it would be nice if more than one filter was handled, but that would require modifying existing behavior not directly related to this change, so I was avoiding that (for now).",
        "createdAt" : "2020-10-27T19:56:47Z",
        "updatedAt" : "2020-11-16T14:59:50Z",
        "lastEditedBy" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "tags" : [
        ]
      },
      {
        "id" : "94703a21-3f1e-4e54-ba0b-4bd696282171",
        "parentId" : "4d0b3ced-6c23-419d-b56a-85bf0ca83ea5",
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "I just meant it should either error or iterate. Right now you can pass multiple arguments and they're ignored. I didn't check what ansible-doc does for the rest of it, but I think erroring would be more clear.",
        "createdAt" : "2020-10-27T20:26:44Z",
        "updatedAt" : "2020-11-16T14:59:50Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "154b128c-d8f6-4271-80fc-23537e9023bb",
        "parentId" : "4d0b3ced-6c23-419d-b56a-85bf0ca83ea5",
        "authorId" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "body" : "We now error in latest commit.",
        "createdAt" : "2020-10-29T15:24:43Z",
        "updatedAt" : "2020-11-16T14:59:50Z",
        "lastEditedBy" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "tags" : [
        ]
      }
    ],
    "commit" : "7444a8ea3f3a6a845a0a11a787b1f81df80515ca",
    "line" : 348,
    "diffHunk" : "@@ -1,1 +600,604 @@                # If an argument was given with --list, it is a collection filter\n                coll_filter = None\n                if len(context.CLIARGS['args']) == 1:\n                    coll_filter = context.CLIARGS['args'][0]\n                    if not AnsibleCollectionRef.is_valid_collection_name(coll_filter):"
  },
  {
    "id" : "09db4576-4130-4f8f-be4f-99ae1cac8bc2",
    "prId" : 72120,
    "prUrl" : "https://github.com/ansible/ansible/pull/72120#pullrequestreview-528260935",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "438c6077-a557-4f86-bd17-4b8766f20f98",
        "parentId" : null,
        "authorId" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "body" : "I want to say we should support `.yaml` extension as well as `.yml`. I thought we were more flexible about this in the `galaxy` code, but it seems we only support `.yml` in many places.\r\n\r\nI would consider that extra credit to support `.yaml` but it would be nice.",
        "createdAt" : "2020-11-10T21:31:05Z",
        "updatedAt" : "2020-11-16T14:59:50Z",
        "lastEditedBy" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "tags" : [
        ]
      },
      {
        "id" : "57afd2a8-4d69-42b9-a891-8999b6e09602",
        "parentId" : "438c6077-a557-4f86-bd17-4b8766f20f98",
        "authorId" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "body" : "I seem to recall someone suggesting supporting only `.yml` but not sure if I'm imagining that. Will look back through my notes... but yeah, we could easily support that.",
        "createdAt" : "2020-11-11T13:41:06Z",
        "updatedAt" : "2020-11-16T14:59:50Z",
        "lastEditedBy" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "tags" : [
        ]
      },
      {
        "id" : "d3c65b0b-2c1b-441f-bf5c-7e13d8acd4bc",
        "parentId" : "438c6077-a557-4f86-bd17-4b8766f20f98",
        "authorId" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "body" : "Yes, choosing only one was suggested by @nitzmahone in the spec:\r\n\r\n```\r\nMight want to just pick one for new features, eg, collection runtime.yml only supports .yml extension\r\n```",
        "createdAt" : "2020-11-11T15:12:57Z",
        "updatedAt" : "2020-11-16T14:59:50Z",
        "lastEditedBy" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "tags" : [
        ]
      }
    ],
    "commit" : "7444a8ea3f3a6a845a0a11a787b1f81df80515ca",
    "line" : 44,
    "diffHunk" : "@@ -1,1 +80,84 @@    \"\"\"\n\n    ROLE_ARGSPEC_FILE = 'argument_specs.yml'\n\n    def _load_argspec(self, role_name, collection_path=None, role_path=None):"
  },
  {
    "id" : "667feae0-305c-4c4b-b859-e71623da0687",
    "prId" : 72120,
    "prUrl" : "https://github.com/ansible/ansible/pull/72120#pullrequestreview-528244000",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0e08c514-2689-4235-847f-ee0607cef9ba",
        "parentId" : null,
        "authorId" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "body" : "This prevents listing standalone roles, such as `caddy` or `docker`. Is that intentional?",
        "createdAt" : "2020-11-10T22:08:50Z",
        "updatedAt" : "2020-11-16T14:59:50Z",
        "lastEditedBy" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "tags" : [
        ]
      },
      {
        "id" : "dd6dc16d-4cf7-45fc-9e5a-e4193d37040d",
        "parentId" : "0e08c514-2689-4235-847f-ee0607cef9ba",
        "authorId" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "body" : "```\r\n> ansible-doc -t role --list caddy\r\nERROR! Invalid collection name (must be of the form namespace.collection): caddy\r\n```",
        "createdAt" : "2020-11-10T22:09:28Z",
        "updatedAt" : "2020-11-16T14:59:50Z",
        "lastEditedBy" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "tags" : [
        ]
      },
      {
        "id" : "923168a5-0e95-4b24-a785-f78906b8d8ce",
        "parentId" : "0e08c514-2689-4235-847f-ee0607cef9ba",
        "authorId" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "body" : "Yes, that was intentional. Firstly, it mirrors existing `--list` behavior for other plugin types supported by `ansible-doc` where only a collection filter is supported. Secondly, it seems rather pointless to list a single role whose name we already know. Is there a use here I'm not considering?",
        "createdAt" : "2020-11-11T13:40:05Z",
        "updatedAt" : "2020-11-16T14:59:50Z",
        "lastEditedBy" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "tags" : [
        ]
      },
      {
        "id" : "5152a87a-0ceb-498b-bdc0-af870d9aa54d",
        "parentId" : "0e08c514-2689-4235-847f-ee0607cef9ba",
        "authorId" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "body" : "Ok, I understand now. I hadn't ever used this with other plugin types before. It's effectively a way to list all plugin types within a collection. And now this can list all roles within a collection. Makes sense.",
        "createdAt" : "2020-11-11T14:54:17Z",
        "updatedAt" : "2020-11-16T14:59:50Z",
        "lastEditedBy" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "tags" : [
        ]
      }
    ],
    "commit" : "7444a8ea3f3a6a845a0a11a787b1f81df80515ca",
    "line" : 350,
    "diffHunk" : "@@ -1,1 +602,606 @@                if len(context.CLIARGS['args']) == 1:\n                    coll_filter = context.CLIARGS['args'][0]\n                    if not AnsibleCollectionRef.is_valid_collection_name(coll_filter):\n                        raise AnsibleError('Invalid collection name (must be of the form namespace.collection): {0}'.format(coll_filter))\n                elif len(context.CLIARGS['args']) > 1:"
  },
  {
    "id" : "d2b113d3-ae7d-4180-8294-9ec5efb1eee7",
    "prId" : 72359,
    "prUrl" : "https://github.com/ansible/ansible/pull/72359#pullrequestreview-517957580",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "27c5d1f5-828e-4a5f-84fb-ccc923345cac",
        "parentId" : null,
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "It's been quite a few months since I looked at this but I think this belongs in format_plugin_docs.\r\n\r\nThe code should be organized roughly along the lines of the six stages of data processing: https://medium.com/@peerxp/the-6-stages-of-data-processing-cycle-3c2927c466ff  Since this is taking raw data (a plugin_name and the list of action names) and creating a derived value from it, it should be done in the processing stage rather than the input stage.",
        "createdAt" : "2020-10-27T16:43:35Z",
        "updatedAt" : "2020-10-27T22:08:00Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      },
      {
        "id" : "79d33a25-9b48-4957-afed-7e8fc4f9c585",
        "parentId" : "27c5d1f5-828e-4a5f-84fb-ccc923345cac",
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "Yeah, looking at the code, I remember this.... the output phase was really, really screwed up before (intertwined with the data processing phase) and we were on a deadline so I didn't fully decouple the output phase when I restructured the run() method.  There should be another explict phase (processing) here: https://github.com/ansible/ansible/pull/72359/files#diff-9732216f79978750789dbeb4c2ed1280d841c4211306ecb1b5c70e3db3fcb2f7R263\r\n\r\nAll of the generation of the stuff in the generate extra data section of `format_plugin_doc` should go into that phase.",
        "createdAt" : "2020-10-27T17:05:02Z",
        "updatedAt" : "2020-10-27T22:08:00Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      },
      {
        "id" : "59785a9a-03df-48b7-89dc-333a4a69c34b",
        "parentId" : "27c5d1f5-828e-4a5f-84fb-ccc923345cac",
        "authorId" : "d10c46ef-3d4c-4766-bd09-d27ec4674a84",
        "body" : "I think the other stuff in `format_plugin_doc` (`nowdate`, `docuri`) is actually not used at all and can be deleted.",
        "createdAt" : "2020-10-27T17:18:25Z",
        "updatedAt" : "2020-10-27T22:08:00Z",
        "lastEditedBy" : "d10c46ef-3d4c-4766-bd09-d27ec4674a84",
        "tags" : [
        ]
      }
    ],
    "commit" : "8d6638c1d84414f9b744fe2563cb3e33ebbf54ae",
    "line" : 22,
    "diffHunk" : "@@ -1,1 +364,368 @@            else:\n                doc['has_action'] = False\n\n        # return everything as one dictionary\n        return {'doc': doc, 'examples': plainexamples, 'return': returndocs, 'metadata': metadata}"
  },
  {
    "id" : "78c9394a-8f2a-4112-bdfb-04d71fcf6997",
    "prId" : 74403,
    "prUrl" : "https://github.com/ansible/ansible/pull/74403#pullrequestreview-643655304",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "63234ce7-17f4-47f3-8ec2-36217e79d23b",
        "parentId" : null,
        "authorId" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "body" : "`'None'` or `None` here?\r\n\r\nI'd argue if it isn't required, and there is no default, then not displaying it at all is the better option.",
        "createdAt" : "2021-04-23T20:43:47Z",
        "updatedAt" : "2021-04-23T21:02:45Z",
        "lastEditedBy" : "af2d6e2a-7e69-40a5-acbd-ee141feb19f6",
        "tags" : [
        ]
      },
      {
        "id" : "ad9cf917-bba9-4bff-883d-c84971558ccc",
        "parentId" : "63234ce7-17f4-47f3-8ec2-36217e79d23b",
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "using string to show None, which is the default when no default is specified",
        "createdAt" : "2021-04-23T20:50:35Z",
        "updatedAt" : "2021-04-23T21:02:45Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      }
    ],
    "commit" : "f9ca59315e20c39437d3882648f8bf4dadf72616",
    "line" : 186,
    "diffHunk" : "@@ -1,1 +1314,1318 @@            default = '<REQUIRED>'\n        else:\n            default = opt.get('default', 'None')\n\n        if opt.get('type') in ('string', 'str'):"
  },
  {
    "id" : "6f0d30e8-592a-4254-8abb-7f1cf604b973",
    "prId" : 74403,
    "prUrl" : "https://github.com/ansible/ansible/pull/74403#pullrequestreview-675613339",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "db40a044-a109-46ee-a743-3462066bcb99",
        "parentId" : null,
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "Now that this no longer depends on plugin_type to activate the snippet path, this condition should be moved to the caller.  It's a decision about the overall format the data should be displayed as rather than a nitty-gritty decision about how to display a specific piece of data in this particular format. It's the roughly the same level of decision as whether the output should be formatted as a json string or as human readable output which is being done in the caller.",
        "createdAt" : "2021-06-03T17:54:40Z",
        "updatedAt" : "2021-06-03T17:54:40Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      },
      {
        "id" : "f405fc8e-8359-49c7-9b01-58969ae6ca90",
        "parentId" : "db40a044-a109-46ee-a743-3462066bcb99",
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "It is something I have been thinking about for a while, making a greater separation between data sourcing and formatting, it will probably simplify things a lot, but that might be worth it's own PR.",
        "createdAt" : "2021-06-03T18:38:00Z",
        "updatedAt" : "2021-06-03T18:38:00Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      }
    ],
    "commit" : "f9ca59315e20c39437d3882648f8bf4dadf72616",
    "line" : 75,
    "diffHunk" : "@@ -1,1 +846,850 @@                # not usable as other inventory plugins\n                del doc['options']\n            text = DocCLI.get_snippet_text(doc, plugin_type)\n        else:\n            try:"
  },
  {
    "id" : "167d2600-ec60-4a34-9e08-3e6af5182f36",
    "prId" : 74596,
    "prUrl" : "https://github.com/ansible/ansible/pull/74596#pullrequestreview-654733073",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5e5d47b2-8cde-4dc5-b499-649211c21125",
        "parentId" : null,
        "authorId" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "body" : "Looking at how this is handled, I wonder if this could be turned into a sequence of transformations.\r\n```python\r\n    _RST_TRANSFORMATIONS = (\r\n        (re.compile(r\".. seealso::\"), \"See website for:\"),  # seealso directive\r\n        (re.compile(r\".. note::\"), \"Note:\"),  # note admonition\r\n        (re.compile(r\":\\w+?:`\"), \"website for `\"),  # any role\r\n        (re.compile(r\".. \\w+?::\"), \"\"),  # any directive\r\n    )\r\n```\r\n\r\nAnd then just\r\n```python\r\nfor regex, replacement in cls._RST_TRANSFORMATIONS:\r\n    t = regex.sub(replacement, t)\r\n```\r\n(below)",
        "createdAt" : "2021-05-07T18:01:00Z",
        "updatedAt" : "2021-05-11T14:58:51Z",
        "lastEditedBy" : "4ffac6b8-d7eb-449a-8c43-463d9fd5587a",
        "tags" : [
        ]
      }
    ],
    "commit" : "e1c3c7033c3b92a804d0e59c875e572d78bcf64c",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +313,317 @@\n    # rst specific\n    _RST_NOTE = re.compile(r\".. note::\")\n    _RST_SEEALSO = re.compile(r\".. seealso::\")\n    _RST_ROLES = re.compile(r\":\\w+?:`\")"
  },
  {
    "id" : "530af43a-4b2d-457a-badd-1355b50f4292",
    "prId" : 74933,
    "prUrl" : "https://github.com/ansible/ansible/pull/74933#pullrequestreview-679805542",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9bb6a6a0-0174-4479-a4ee-55e5b0c92127",
        "parentId" : null,
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "`ini` is mentioned but doesn't get here since it doesn't have `options`. Maybe\r\n\r\n```python\r\nif plugin_type == 'inventory' and (not doc.get('options') or not doc['options'].get('plugin')):\r\n```",
        "createdAt" : "2021-06-09T13:20:23Z",
        "updatedAt" : "2021-06-09T13:20:24Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "262e9e58-ed39-4e6c-bae5-5dfa493c28d0",
        "parentId" : "9bb6a6a0-0174-4479-a4ee-55e5b0c92127",
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "Oh, I guess we don't need to delete options in that case. Nevermind me :laughing:\r\n\r\nLGTM",
        "createdAt" : "2021-06-09T13:21:30Z",
        "updatedAt" : "2021-06-09T13:21:30Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "308d6a20-af24-4f6e-9ff6-059631e3031b",
        "parentId" : "9bb6a6a0-0174-4479-a4ee-55e5b0c92127",
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "eggzactly",
        "createdAt" : "2021-06-09T15:20:07Z",
        "updatedAt" : "2021-06-09T15:20:07Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      }
    ],
    "commit" : "343c2b1e814a18a123960ab2860709efed4c748c",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +844,848 @@                raise AnsibleError(\"Snippets are only available for the following plugin types: %s\" % ', '.join(SNIPPETS))\n            if plugin_type == 'inventory' and doc.get('options') and not doc['options'].get('plugin'):\n                # these are 'configurable' but not intended for yaml type inventory sources, like ini or script\n                # so we cannot use as source for snippets\n                del doc['options']"
  }
]