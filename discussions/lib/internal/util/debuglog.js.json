[
  {
    "id" : "a9c6f93a-b28c-42f7-84f6-d23fb79b5382",
    "prId" : 32260,
    "prUrl" : "https://github.com/nodejs/node/pull/32260#pullrequestreview-375359225",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4a36541c-aa50-4755-9888-642f3ddcbb2d",
        "parentId" : null,
        "authorId" : "e2cc9892-2888-4d59-adc7-9f0a01a77ffd",
        "body" : "What about this?\r\n\r\n```suggestion\r\nfunction debuglog(set) {\r\n  let debug = (...args) => {\r\n    // Only invokes debuglogImpl() when the debug function is\r\n    // called for the first time.\r\n    debug = debuglogImpl(set);\r\n    debug(...args);\r\n  };\r\n  const state = { called: false };\r\n  return ((...args) => {\r\n    if(!this.called) {\r\n      debug(...args);\r\n      this.called = true;\r\n    } else {\r\n      debug(...args);\r\n    }\r\n  }).bind(state);\r\n```\r\n\r\njust like\r\n\r\nhttps://github.com/nodejs/node/blob/ec204d86b06e4cc9259c1308e365a3e104212a16/lib/events.js#L426-L432",
        "createdAt" : "2020-03-14T15:36:37Z",
        "updatedAt" : "2020-05-30T21:24:52Z",
        "lastEditedBy" : "e2cc9892-2888-4d59-adc7-9f0a01a77ffd",
        "tags" : [
        ]
      },
      {
        "id" : "21eb0dc0-37ce-474a-9791-456700b2900d",
        "parentId" : "4a36541c-aa50-4755-9888-642f3ddcbb2d",
        "authorId" : "e2cc9892-2888-4d59-adc7-9f0a01a77ffd",
        "body" : "because I don't think `let debug = fn('xxx', v => debug = v)` is a good code style ",
        "createdAt" : "2020-03-14T15:38:47Z",
        "updatedAt" : "2020-05-30T21:24:52Z",
        "lastEditedBy" : "e2cc9892-2888-4d59-adc7-9f0a01a77ffd",
        "tags" : [
        ]
      },
      {
        "id" : "759017c3-56c0-45da-a5c6-6bdd9e614c7a",
        "parentId" : "4a36541c-aa50-4755-9888-642f3ddcbb2d",
        "authorId" : "c5f34109-f61d-4540-9a67-e4a5494934e5",
        "body" : "The suggested change is basically what the code was doing before. Having a callback is the only way to be able to avoid the wrapper function and utilizing it provides a further, noticeable performance improvement.",
        "createdAt" : "2020-03-14T15:42:50Z",
        "updatedAt" : "2020-05-30T21:24:52Z",
        "lastEditedBy" : "c5f34109-f61d-4540-9a67-e4a5494934e5",
        "tags" : [
        ]
      },
      {
        "id" : "bca7afa9-cb46-41d2-9634-7247024dc835",
        "parentId" : "4a36541c-aa50-4755-9888-642f3ddcbb2d",
        "authorId" : "e2cc9892-2888-4d59-adc7-9f0a01a77ffd",
        "body" : "Thanks, I understand ",
        "createdAt" : "2020-03-14T15:44:45Z",
        "updatedAt" : "2020-05-30T21:24:52Z",
        "lastEditedBy" : "e2cc9892-2888-4d59-adc7-9f0a01a77ffd",
        "tags" : [
        ]
      },
      {
        "id" : "46b6e120-2a79-4807-8c71-331579f3aebd",
        "parentId" : "4a36541c-aa50-4755-9888-642f3ddcbb2d",
        "authorId" : "d10ccdef-08de-4320-917e-16a9175dedcf",
        "body" : "Fairly certain this is because of the way V8 optimizes but that's only a guess. It's interesting that it's such a big perf difference.",
        "createdAt" : "2020-03-16T16:03:45Z",
        "updatedAt" : "2020-05-30T21:24:52Z",
        "lastEditedBy" : "d10ccdef-08de-4320-917e-16a9175dedcf",
        "tags" : [
        ]
      }
    ],
    "commit" : "c24b74a7abec0848484671771d250cfd961f128e",
    "line" : 43,
    "diffHunk" : "@@ -1,1 +72,76 @@  return (...args) => {\n    debug(...args);\n  };\n}\n"
  },
  {
    "id" : "f81b2b51-6124-4e48-8d4b-eb14a43e9a77",
    "prId" : 38838,
    "prUrl" : "https://github.com/nodejs/node/pull/38838#pullrequestreview-671728682",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "80a5af09-4239-420d-afde-9ee0ec940c5f",
        "parentId" : null,
        "authorId" : "ed7a7ce1-ac87-4cd9-b705-3a59d8675e24",
        "body" : "```suggestion\r\n      .replaceAll(',', '$|^')\r\n      .toUpperCase();\r\n```\r\nShouldn't we keep the `toUpperCase`?",
        "createdAt" : "2021-05-29T08:58:04Z",
        "updatedAt" : "2021-05-29T08:58:04Z",
        "lastEditedBy" : "ed7a7ce1-ac87-4cd9-b705-3a59d8675e24",
        "tags" : [
        ]
      },
      {
        "id" : "aabdad9a-c3ef-4bc1-853d-c5886a1abf61",
        "parentId" : "80a5af09-4239-420d-afde-9ee0ec940c5f",
        "authorId" : "df7fe02e-189e-45c5-a682-9b780fdce53e",
        "body" : "I don't think it's useful, the regex uses the `i` flag (case insensitivity).",
        "createdAt" : "2021-05-29T08:59:06Z",
        "updatedAt" : "2021-05-29T08:59:07Z",
        "lastEditedBy" : "df7fe02e-189e-45c5-a682-9b780fdce53e",
        "tags" : [
        ]
      }
    ],
    "commit" : "423ae41625f47be4080de13e3760f50caca661c0",
    "line" : 38,
    "diffHunk" : "@@ -1,1 +26,30 @@    debugEnv = debugEnv.replace(/[|\\\\{}()[\\]^$+?.]/g, '\\\\$&')\n      .replaceAll('*', '.*')\n      .replaceAll(',', '$|^');\n    const debugEnvRegex = new RegExp(`^${debugEnv}$`, 'i');\n    testEnabled = (str) => RegExpPrototypeExec(debugEnvRegex, str) !== null;"
  },
  {
    "id" : "a9f2a437-c059-40d4-9d0e-59134e5115bc",
    "prId" : 38838,
    "prUrl" : "https://github.com/nodejs/node/pull/38838#pullrequestreview-679673125",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c76cfc2e-ecce-46b3-b804-ee2d759a9128",
        "parentId" : null,
        "authorId" : "4e8c77e8-10f9-4830-ac93-3bf7c9d321e2",
        "body" : "So, `regexp.exec(str) !== null` is faster than `regexp.test(str)` ?",
        "createdAt" : "2021-06-09T13:31:01Z",
        "updatedAt" : "2021-06-09T13:31:01Z",
        "lastEditedBy" : "4e8c77e8-10f9-4830-ac93-3bf7c9d321e2",
        "tags" : [
        ]
      },
      {
        "id" : "3bea0639-5795-418a-b9e1-2e78428477ee",
        "parentId" : "c76cfc2e-ecce-46b3-b804-ee2d759a9128",
        "authorId" : "df7fe02e-189e-45c5-a682-9b780fdce53e",
        "body" : "I'm not sure if it's faster, but `RegExpPrototypeTest` looks up `.exec` property of the regex, which is user-mutable (see https://github.com/nodejs/node/pull/38635/files#diff-1fd7756e2222fdc2c8dbd60f718237a78233a8697d418ec9044e167b673bcf96R544-R551).",
        "createdAt" : "2021-06-09T13:44:30Z",
        "updatedAt" : "2021-06-09T13:44:30Z",
        "lastEditedBy" : "df7fe02e-189e-45c5-a682-9b780fdce53e",
        "tags" : [
        ]
      }
    ],
    "commit" : "423ae41625f47be4080de13e3760f50caca661c0",
    "line" : 40,
    "diffHunk" : "@@ -1,1 +28,32 @@      .replaceAll(',', '$|^');\n    const debugEnvRegex = new RegExp(`^${debugEnv}$`, 'i');\n    testEnabled = (str) => RegExpPrototypeExec(debugEnvRegex, str) !== null;\n  } else {\n    testEnabled = () => false;"
  }
]