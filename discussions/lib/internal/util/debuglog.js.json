[
  {
    "id" : "a9c6f93a-b28c-42f7-84f6-d23fb79b5382",
    "prId" : 32260,
    "prUrl" : "https://github.com/nodejs/node/pull/32260#pullrequestreview-375359225",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4a36541c-aa50-4755-9888-642f3ddcbb2d",
        "parentId" : null,
        "authorId" : "e2cc9892-2888-4d59-adc7-9f0a01a77ffd",
        "body" : "What about this?\r\n\r\n```suggestion\r\nfunction debuglog(set) {\r\n  let debug = (...args) => {\r\n    // Only invokes debuglogImpl() when the debug function is\r\n    // called for the first time.\r\n    debug = debuglogImpl(set);\r\n    debug(...args);\r\n  };\r\n  const state = { called: false };\r\n  return ((...args) => {\r\n    if(!this.called) {\r\n      debug(...args);\r\n      this.called = true;\r\n    } else {\r\n      debug(...args);\r\n    }\r\n  }).bind(state);\r\n```\r\n\r\njust like\r\n\r\nhttps://github.com/nodejs/node/blob/ec204d86b06e4cc9259c1308e365a3e104212a16/lib/events.js#L426-L432",
        "createdAt" : "2020-03-14T15:36:37Z",
        "updatedAt" : "2020-05-30T21:24:52Z",
        "lastEditedBy" : "e2cc9892-2888-4d59-adc7-9f0a01a77ffd",
        "tags" : [
        ]
      },
      {
        "id" : "21eb0dc0-37ce-474a-9791-456700b2900d",
        "parentId" : "4a36541c-aa50-4755-9888-642f3ddcbb2d",
        "authorId" : "e2cc9892-2888-4d59-adc7-9f0a01a77ffd",
        "body" : "because I don't think `let debug = fn('xxx', v => debug = v)` is a good code style ",
        "createdAt" : "2020-03-14T15:38:47Z",
        "updatedAt" : "2020-05-30T21:24:52Z",
        "lastEditedBy" : "e2cc9892-2888-4d59-adc7-9f0a01a77ffd",
        "tags" : [
        ]
      },
      {
        "id" : "759017c3-56c0-45da-a5c6-6bdd9e614c7a",
        "parentId" : "4a36541c-aa50-4755-9888-642f3ddcbb2d",
        "authorId" : "c5f34109-f61d-4540-9a67-e4a5494934e5",
        "body" : "The suggested change is basically what the code was doing before. Having a callback is the only way to be able to avoid the wrapper function and utilizing it provides a further, noticeable performance improvement.",
        "createdAt" : "2020-03-14T15:42:50Z",
        "updatedAt" : "2020-05-30T21:24:52Z",
        "lastEditedBy" : "c5f34109-f61d-4540-9a67-e4a5494934e5",
        "tags" : [
        ]
      },
      {
        "id" : "bca7afa9-cb46-41d2-9634-7247024dc835",
        "parentId" : "4a36541c-aa50-4755-9888-642f3ddcbb2d",
        "authorId" : "e2cc9892-2888-4d59-adc7-9f0a01a77ffd",
        "body" : "Thanks, I understand ",
        "createdAt" : "2020-03-14T15:44:45Z",
        "updatedAt" : "2020-05-30T21:24:52Z",
        "lastEditedBy" : "e2cc9892-2888-4d59-adc7-9f0a01a77ffd",
        "tags" : [
        ]
      },
      {
        "id" : "46b6e120-2a79-4807-8c71-331579f3aebd",
        "parentId" : "4a36541c-aa50-4755-9888-642f3ddcbb2d",
        "authorId" : "d10ccdef-08de-4320-917e-16a9175dedcf",
        "body" : "Fairly certain this is because of the way V8 optimizes but that's only a guess. It's interesting that it's such a big perf difference.",
        "createdAt" : "2020-03-16T16:03:45Z",
        "updatedAt" : "2020-05-30T21:24:52Z",
        "lastEditedBy" : "d10ccdef-08de-4320-917e-16a9175dedcf",
        "tags" : [
        ]
      }
    ],
    "commit" : "c24b74a7abec0848484671771d250cfd961f128e",
    "line" : 43,
    "diffHunk" : "@@ -1,1 +72,76 @@  return (...args) => {\n    debug(...args);\n  };\n}\n"
  }
]