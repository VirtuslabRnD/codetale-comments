[
  {
    "id" : "20d78311-f0a1-4bd3-96fa-99dad474f445",
    "prId" : 80353,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/80353#pullrequestreview-276174126",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ad7fcf25-83a8-4922-826e-d9b636f59f47",
        "parentId" : null,
        "authorId" : "98986d5f-c846-4478-8363-8a016e3d6b89",
        "body" : "`appendLegacyProviderVolumes` for cmd/kubelet and cmd/kube-controller-manager are quite similar. In https://github.com/kubernetes/kubernetes/pull/80587/files, I tried to merge them in a new pkg/volume/util/csimigration/plugins.go file that both kubelet and kcm calls.\r\n\r\nOnce that PR lands, I think we can remove cmd/kubelet/app/plugins_legacyproviders.go and cmd/kube-controller-manager/app/plugins_legacyproviders.go (along with their _nolegacyproviders.go files) here in favor of a pkg/volume/util/csimigration/legacy_plugins.go / no_legacy_plugins.go.",
        "createdAt" : "2019-08-16T18:39:33Z",
        "updatedAt" : "2019-08-22T22:31:09Z",
        "lastEditedBy" : "98986d5f-c846-4478-8363-8a016e3d6b89",
        "tags" : [
        ]
      },
      {
        "id" : "0a64e0c5-6b47-4d63-b4f7-07d5b9fa52c4",
        "parentId" : "ad7fcf25-83a8-4922-826e-d9b636f59f47",
        "authorId" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "body" : "SGTM, I tried to keep refactors minimal and local to each package for the purposes of this PR, but I spoke to @davidz627 about something similar to this as a follow up (though apparently it might land first! :upside_down_face:)",
        "createdAt" : "2019-08-16T18:51:59Z",
        "updatedAt" : "2019-08-22T22:31:09Z",
        "lastEditedBy" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "tags" : [
        ]
      },
      {
        "id" : "46e4c0f5-990c-4921-9123-e4184ea91700",
        "parentId" : "ad7fcf25-83a8-4922-826e-d9b636f59f47",
        "authorId" : "542e5d2f-2ff9-4674-ab44-78f31768e7a1",
        "body" : "@BenTheElder https://github.com/kubernetes/kubernetes/pull/80587 is the one we discussed that @ddebroy is actually working on :)",
        "createdAt" : "2019-08-16T21:18:05Z",
        "updatedAt" : "2019-08-22T22:31:09Z",
        "lastEditedBy" : "542e5d2f-2ff9-4674-ab44-78f31768e7a1",
        "tags" : [
        ]
      }
    ],
    "commit" : "5a3301a59d0c4d5e76002cff99a2f5450d2eea80",
    "line" : 36,
    "diffHunk" : "@@ -1,1 +63,67 @@\t// Kubelet does not currently need to configure volume plugins.\n\t// If/when it does, see kube-controller-manager/app/plugins.go for example of using volume.VolumeConfig\n\tallPlugins = appendLegacyProviderVolumes(allPlugins)\n\tallPlugins = append(allPlugins, emptydir.ProbeVolumePlugins()...)\n\tallPlugins = append(allPlugins, git_repo.ProbeVolumePlugins()...)"
  },
  {
    "id" : "355c196b-8523-4622-a481-a54311d12d45",
    "prId" : 80353,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/80353#pullrequestreview-278724621",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6d5f8086-6e10-4344-a0b8-4bd0ecc88ae6",
        "parentId" : null,
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "There's a lot of items still in this list that I'm not convinced should stay?",
        "createdAt" : "2019-08-22T22:47:24Z",
        "updatedAt" : "2019-08-22T22:47:24Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      }
    ],
    "commit" : "5a3301a59d0c4d5e76002cff99a2f5450d2eea80",
    "line" : 57,
    "diffHunk" : "@@ -1,1 +79,83 @@\tallPlugins = append(allPlugins, configmap.ProbeVolumePlugins()...)\n\tallPlugins = append(allPlugins, projected.ProbeVolumePlugins()...)\n\tallPlugins = append(allPlugins, portworx.ProbeVolumePlugins()...)\n\tallPlugins = append(allPlugins, scaleio.ProbeVolumePlugins()...)\n\tallPlugins = append(allPlugins, local.ProbeVolumePlugins()...)"
  },
  {
    "id" : "3086fbc0-d0f3-46fa-9748-98311fb101aa",
    "prId" : 44692,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/44692#pullrequestreview-33881942",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f1f43109-4935-4e1c-aed4-82a01d149155",
        "parentId" : null,
        "authorId" : "0d2d9977-2328-4ade-b6a6-ba60c2dd5bd5",
        "body" : "Can you add a simple regression test for it?",
        "createdAt" : "2017-04-20T17:41:25Z",
        "updatedAt" : "2017-04-20T17:41:42Z",
        "lastEditedBy" : "0d2d9977-2328-4ade-b6a6-ba60c2dd5bd5",
        "tags" : [
        ]
      },
      {
        "id" : "08f6a9f8-5633-465b-9f11-7fad957dc393",
        "parentId" : "f1f43109-4935-4e1c-aed4-82a01d149155",
        "authorId" : "e83108b8-1fb2-416b-9298-d5b70c14f708",
        "body" : "The plan is to deprecate `network-plugin-dir` flag. And this PR is mainly fixing the regression.",
        "createdAt" : "2017-04-20T20:45:13Z",
        "updatedAt" : "2017-04-20T20:45:13Z",
        "lastEditedBy" : "e83108b8-1fb2-416b-9298-d5b70c14f708",
        "tags" : [
        ]
      }
    ],
    "commit" : "2320fde49c8254bb9a36b12443bcb80dda2861c9",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +109,113 @@\n\tbinDir := cniBinDir\n\tif binDir == \"\" {\n\t\tbinDir = pluginDir\n\t}"
  },
  {
    "id" : "ec3ce151-3758-43e0-934b-b8ffe278f3a4",
    "prId" : 13840,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4abf7747-74ac-4eff-8a2d-2d7ae30d50bf",
        "parentId" : null,
        "authorId" : "8e448017-7838-493d-a424-33cada0da657",
        "body" : "Update GoDoc (comment) to explain what the new parameter is\n",
        "createdAt" : "2015-11-26T01:19:39Z",
        "updatedAt" : "2015-12-23T22:11:57Z",
        "lastEditedBy" : "8e448017-7838-493d-a424-33cada0da657",
        "tags" : [
        ]
      },
      {
        "id" : "1ee07ed9-f444-4836-8057-241b50035e84",
        "parentId" : "4abf7747-74ac-4eff-8a2d-2d7ae30d50bf",
        "authorId" : "cb578771-ab57-49a0-afd6-27da11c87c6d",
        "body" : "Sure will do..\n",
        "createdAt" : "2015-11-26T03:12:45Z",
        "updatedAt" : "2015-12-23T22:11:58Z",
        "lastEditedBy" : "cb578771-ab57-49a0-afd6-27da11c87c6d",
        "tags" : [
        ]
      }
    ],
    "commit" : "fa76de79e5d1670b8e6add30f0159c833534a298",
    "line" : null,
    "diffHunk" : "@@ -1,1 +51,55 @@// PluginDir specifies the directory to search for additional third party\n// volume plugins.\nfunc ProbeVolumePlugins(pluginDir string) []volume.VolumePlugin {\n\tallPlugins := []volume.VolumePlugin{}\n"
  },
  {
    "id" : "91865ef0-0f02-44ca-9a08-cde119149d4c",
    "prId" : 13766,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e6e27a0a-13f6-4822-a2bd-6e65b0d27ffa",
        "parentId" : null,
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "no need to pass the dir here, I think\n",
        "createdAt" : "2015-09-17T22:55:08Z",
        "updatedAt" : "2015-09-23T16:19:31Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      },
      {
        "id" : "a92e3f1c-718d-43c4-b842-6a4643ff74f0",
        "parentId" : "e6e27a0a-13f6-4822-a2bd-6e65b0d27ffa",
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "oh I see what you did - repurposing the existing plugin dir flag... need to think about that\n",
        "createdAt" : "2015-09-17T22:56:27Z",
        "updatedAt" : "2015-09-23T16:19:31Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      }
    ],
    "commit" : "fef621a2541080cb9ab8f381394204c60d22daa6",
    "line" : 12,
    "diffHunk" : "@@ -1,1 +80,84 @@\t// for each existing plugin, add to the list\n\tallPlugins = append(allPlugins, exec.ProbeNetworkPlugins(pluginDir)...)\n\tallPlugins = append(allPlugins, cni.ProbeNetworkPlugins(pluginDir)...)\n\n\treturn allPlugins"
  },
  {
    "id" : "705f9aea-a0f9-4457-93b4-bb0acefadb7a",
    "prId" : 13310,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2df410cc-1f96-456c-9f4a-afac40b5d5e6",
        "parentId" : null,
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "How will be VolumeConfig in kubelet and kube-controller-manager kept in sync?  Or is VolumeConfig only for recyclers in kube-controller-manager?\n",
        "createdAt" : "2015-09-01T13:38:15Z",
        "updatedAt" : "2015-09-01T16:05:03Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      },
      {
        "id" : "23a56058-3b54-4085-ba35-1078e7b13b62",
        "parentId" : "2df410cc-1f96-456c-9f4a-afac40b5d5e6",
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "I do not like the idea of VolumeConfig having options both for the recyclers (=kube-controller-manager) and for the volume plugins (=kubelet). IMO there should be two separate structures. They can be created from the same config file / VolumeConfigFlags though.\n",
        "createdAt" : "2015-09-01T13:45:52Z",
        "updatedAt" : "2015-09-01T16:05:03Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      },
      {
        "id" : "a8298aec-c506-45d0-bbc0-71080318a52a",
        "parentId" : "2df410cc-1f96-456c-9f4a-afac40b5d5e6",
        "authorId" : "727fc82d-d969-41a4-a614-7fefce94f9a6",
        "body" : "We have no use cases, currently, for Kubelet to configure plugins, but when we do, where do you propose they go if not in VolumeConfig?  I don't think this is better with more than one config struct:  KubeletVolumeConfig, ControllerMgrVolumeConfig?\n\nI think I prefer VolumeConfig being generically reused between the two binaries while VolumeConfigFlags differs per binary.\n",
        "createdAt" : "2015-09-01T13:52:57Z",
        "updatedAt" : "2015-09-01T16:05:03Z",
        "lastEditedBy" : "727fc82d-d969-41a4-a614-7fefce94f9a6",
        "tags" : [
        ]
      },
      {
        "id" : "a1ba141a-e4de-4621-9c30-e19633b38c58",
        "parentId" : "2df410cc-1f96-456c-9f4a-afac40b5d5e6",
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "I'm reading the code again and both kubelet and controller mgr call nfs.ProbeVolumePlugins(VolumeConfig), the same structure must be used. Please disregard my comment.\n",
        "createdAt" : "2015-09-01T15:53:13Z",
        "updatedAt" : "2015-09-01T16:05:03Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      },
      {
        "id" : "b8dc16a6-d9c7-49ae-ad55-57f9b28bbe64",
        "parentId" : "2df410cc-1f96-456c-9f4a-afac40b5d5e6",
        "authorId" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "body" : "@jsafrane @markturansky @thockin \n\nHere's a use-case for the kubelet to configure plugins: does a particular plugin type support FS relabel locally, and has it been enabled by the cluster operator?\n\nSee #12944 \n",
        "createdAt" : "2015-09-01T16:48:01Z",
        "updatedAt" : "2015-09-01T16:50:37Z",
        "lastEditedBy" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "tags" : [
        ]
      },
      {
        "id" : "974721c8-dd69-45cb-a7dd-3dd009187056",
        "parentId" : "2df410cc-1f96-456c-9f4a-afac40b5d5e6",
        "authorId" : "727fc82d-d969-41a4-a614-7fefce94f9a6",
        "body" : "@pmorie The implementation would run thusly, in accordance with this PR:\n1.  add VolumeConfigFlags to the Kubelet binary and enumerate all CLI flags.\n   1. example: FSRelabelSupportedNFS, FSRelabelEnabledNFS\n2.  add the common property to volume.VolumeConfig\n   1. example: FSRelabelSupported and FSRelabelEnabled\n3.  Map CLI flag to VolumeConfig in Kubelet's app/plugins.go\n   1.  See example: https://github.com/markturansky/kubernetes/blob/13065f0b0402175729492fadec31b3f82a76388e/cmd/kube-controller-manager/app/plugins.go#L34\n4.  And the rest of the plumbing in the plugins themselves\n",
        "createdAt" : "2015-09-01T17:06:18Z",
        "updatedAt" : "2015-09-01T17:06:18Z",
        "lastEditedBy" : "727fc82d-d969-41a4-a614-7fefce94f9a6",
        "tags" : [
        ]
      }
    ],
    "commit" : "68358fd30879a04eb53d8db6e940fcc785710682",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +56,60 @@\tallPlugins = append(allPlugins, git_repo.ProbeVolumePlugins()...)\n\tallPlugins = append(allPlugins, host_path.ProbeVolumePlugins(volume.VolumeConfig{})...)\n\tallPlugins = append(allPlugins, nfs.ProbeVolumePlugins(volume.VolumeConfig{})...)\n\tallPlugins = append(allPlugins, secret.ProbeVolumePlugins()...)\n\tallPlugins = append(allPlugins, iscsi.ProbeVolumePlugins()...)"
  },
  {
    "id" : "509f078a-afa2-4956-8a7b-8f0b40ceb353",
    "prId" : 12599,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "edd992e7-c00d-44f0-b657-d56e694d7a28",
        "parentId" : null,
        "authorId" : "727fc82d-d969-41a4-a614-7fefce94f9a6",
        "body" : "Probably doesn't matter much, but these used to be in alphabetical order.\n",
        "createdAt" : "2015-08-13T12:57:27Z",
        "updatedAt" : "2015-09-18T23:15:49Z",
        "lastEditedBy" : "727fc82d-d969-41a4-a614-7fefce94f9a6",
        "tags" : [
        ]
      },
      {
        "id" : "62bd6953-03d3-4182-992e-2d20c7696b6f",
        "parentId" : "edd992e7-c00d-44f0-b657-d56e694d7a28",
        "authorId" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "body" : "I see, that's  neat.\n",
        "createdAt" : "2015-08-13T13:30:26Z",
        "updatedAt" : "2015-09-18T23:15:49Z",
        "lastEditedBy" : "a7f673a6-4b23-4df6-aa10-f123fa9dcd5f",
        "tags" : [
        ]
      }
    ],
    "commit" : "ed9a1bbd3a9b689f4953deb6308d631314edf3f4",
    "line" : null,
    "diffHunk" : "@@ -1,1 +69,73 @@\tallPlugins = append(allPlugins, cephfs.ProbeVolumePlugins()...)\n\tallPlugins = append(allPlugins, downwardapi.ProbeVolumePlugins()...)\n\tallPlugins = append(allPlugins, fc.ProbeVolumePlugins()...)\n\treturn allPlugins\n}"
  },
  {
    "id" : "b5ffd730-264b-47a3-8c81-fcddc9cdfacd",
    "prId" : 8643,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2cf2ca5f-2eb5-4fe8-a430-370991675fc3",
        "parentId" : null,
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "why is the RBD PR merged into this one?\n",
        "createdAt" : "2015-05-22T22:18:36Z",
        "updatedAt" : "2015-05-26T02:44:13Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      },
      {
        "id" : "16e92376-53ca-49f0-8427-6b5cedc8afd3",
        "parentId" : "2cf2ca5f-2eb5-4fe8-a430-370991675fc3",
        "authorId" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "body" : "Rebase issue. Fixed it.\n",
        "createdAt" : "2015-05-22T23:04:41Z",
        "updatedAt" : "2015-05-26T02:44:13Z",
        "lastEditedBy" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "tags" : [
        ]
      }
    ],
    "commit" : "d3c7edb78f38bde43038f1128239f0f4ce34571c",
    "line" : null,
    "diffHunk" : "@@ -1,1 +35,39 @@\t\"github.com/GoogleCloudPlatform/kubernetes/pkg/volume/nfs\"\n\t\"github.com/GoogleCloudPlatform/kubernetes/pkg/volume/persistent_claim\"\n\t\"github.com/GoogleCloudPlatform/kubernetes/pkg/volume/rbd\"\n\t\"github.com/GoogleCloudPlatform/kubernetes/pkg/volume/secret\"\n\t//Cloud providers"
  }
]