[
  {
    "id" : "2698ae04-d904-4800-b69a-d8b1a396b6b8",
    "prId" : 102502,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/102502#pullrequestreview-673550062",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "586fd787-861e-40f3-9746-afe3f92635b8",
        "parentId" : null,
        "authorId" : "b96ad0c0-2a60-4c16-8bc3-b946a54b9481",
        "body" : "Could we add a small comment for future us to refer on why this is needed?",
        "createdAt" : "2021-06-01T19:57:53Z",
        "updatedAt" : "2021-06-01T19:58:21Z",
        "lastEditedBy" : "b96ad0c0-2a60-4c16-8bc3-b946a54b9481",
        "tags" : [
        ]
      },
      {
        "id" : "f45281c0-6cb8-4e9c-b53f-d688ed5296da",
        "parentId" : "586fd787-861e-40f3-9746-afe3f92635b8",
        "authorId" : "b96ad0c0-2a60-4c16-8bc3-b946a54b9481",
        "body" : "Do we need to check that the version here is greater than 1.8.0? @fabriziopandini @neolit123 ",
        "createdAt" : "2021-06-01T19:58:18Z",
        "updatedAt" : "2021-06-01T19:58:21Z",
        "lastEditedBy" : "b96ad0c0-2a60-4c16-8bc3-b946a54b9481",
        "tags" : [
        ]
      },
      {
        "id" : "9cd857fe-c0cc-4949-8c88-7356fd3943cf",
        "parentId" : "586fd787-861e-40f3-9746-afe3f92635b8",
        "authorId" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "body" : "@ykakarap mentioned that old images now also exist under k8s.gcr.io/coredns/coredns:oldtag.",
        "createdAt" : "2021-06-01T20:00:50Z",
        "updatedAt" : "2021-06-01T20:00:50Z",
        "lastEditedBy" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "tags" : [
        ]
      },
      {
        "id" : "e03b762e-4bfe-43ff-b081-f131d6390e64",
        "parentId" : "586fd787-861e-40f3-9746-afe3f92635b8",
        "authorId" : "b96ad0c0-2a60-4c16-8bc3-b946a54b9481",
        "body" : "Ah ok, that works!",
        "createdAt" : "2021-06-01T20:02:15Z",
        "updatedAt" : "2021-06-01T20:02:15Z",
        "lastEditedBy" : "b96ad0c0-2a60-4c16-8bc3-b946a54b9481",
        "tags" : [
        ]
      },
      {
        "id" : "a4165ebf-c8ed-4592-b42d-a10beba28f8a",
        "parentId" : "586fd787-861e-40f3-9746-afe3f92635b8",
        "authorId" : "8a27151d-3530-4221-90e8-48b3a85cba37",
        "body" : "I was digging into this and it seems that kubeadm v1.22 always ships coreDNS v1.8.0\r\nThe same is for kubeadm v1.21 when we backport this\r\n@neolit123 to confirm that",
        "createdAt" : "2021-06-01T20:07:12Z",
        "updatedAt" : "2021-06-01T20:07:12Z",
        "lastEditedBy" : "8a27151d-3530-4221-90e8-48b3a85cba37",
        "tags" : [
        ]
      },
      {
        "id" : "0f0a4892-cffa-4425-adc8-0e2eb0e1d2a1",
        "parentId" : "586fd787-861e-40f3-9746-afe3f92635b8",
        "authorId" : "635eb35f-2e69-4e03-9cc1-568474b1f036",
        "body" : "> @ykakarap mentioned that old images now also exist under k8s.gcr.io/coredns/coredns:oldtag\r\n\r\nJust observed a thing to note here: the new path of the 1.7.0 image is `k8s.gcr.io/coredns/coredns:v1.7.0` and the path without the subpath is `k8s.gcr.io/coredns:1.7.0`. Notice the difference in the tag (one of them has `v`). We should probably handle that case.\r\n",
        "createdAt" : "2021-06-01T20:13:01Z",
        "updatedAt" : "2021-06-01T20:13:01Z",
        "lastEditedBy" : "635eb35f-2e69-4e03-9cc1-568474b1f036",
        "tags" : [
        ]
      },
      {
        "id" : "811874e4-1359-420f-b78e-18b3b726c3c7",
        "parentId" : "586fd787-861e-40f3-9746-afe3f92635b8",
        "authorId" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "body" : "we don't have to check for version, IMO.\r\nwe can have a comment on top of the check as @vincepri suggested:\r\n\r\n> Could we add a small comment for future us to refer on why this is needed?",
        "createdAt" : "2021-06-01T20:18:09Z",
        "updatedAt" : "2021-06-01T20:18:10Z",
        "lastEditedBy" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "tags" : [
        ]
      },
      {
        "id" : "f545fd4f-cb70-4eac-8192-2d7231fef325",
        "parentId" : "586fd787-861e-40f3-9746-afe3f92635b8",
        "authorId" : "8a27151d-3530-4221-90e8-48b3a85cba37",
        "body" : "@ykakarap the \"v\" is embedded in https://github.com/kubernetes/kubernetes/blob/e5b54d07695a6066b00d6c837ebd584c76da8a00/cmd/kubeadm/app/constants/constants.go#L328\r\nSo we should be ok\r\n\r\n+1 for the comment; starting from what we have in CAPI it should be something on the lines of \"// Handle the renaming of the official image from \"k8s.gcr.io/coredns\" to \"k8s.gcr.io/coredns/coredns\"",
        "createdAt" : "2021-06-01T20:23:24Z",
        "updatedAt" : "2021-06-01T20:23:24Z",
        "lastEditedBy" : "8a27151d-3530-4221-90e8-48b3a85cba37",
        "tags" : [
        ]
      },
      {
        "id" : "ac18c31b-823f-4c49-b4bf-15ec73a9e368",
        "parentId" : "586fd787-861e-40f3-9746-afe3f92635b8",
        "authorId" : "8a27151d-3530-4221-90e8-48b3a85cba37",
        "body" : "@ykakarap expanding a little bit, kubeadm v1.22 and kubeadm v1.21 will never ship CoreDNS v1.7.0, so we should not care about the image tag without the v",
        "createdAt" : "2021-06-01T20:27:30Z",
        "updatedAt" : "2021-06-01T20:27:30Z",
        "lastEditedBy" : "8a27151d-3530-4221-90e8-48b3a85cba37",
        "tags" : [
        ]
      }
    ],
    "commit" : "97ba90cbfb4841e24a7cf5524d2147d7371f34b5",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +49,53 @@\t}\n\t// Handle the renaming of the official image from \"k8s.gcr.io/coredns\" to \"k8s.gcr.io/coredns/coredns\n\tif dnsImageRepository == kubeadmapiv1beta2.DefaultImageRepository {\n\t\tdnsImageRepository = fmt.Sprintf(\"%s/coredns\", dnsImageRepository)\n\t}"
  },
  {
    "id" : "55340015-52b4-4836-bb6b-114d2770ccfa",
    "prId" : 98205,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/98205#pullrequestreview-573362063",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "30068a08-aacc-42da-887d-b26f00af0f8c",
        "parentId" : null,
        "authorId" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "body" : "the one from _unix.go\r\n\r\n```\r\n// GetPauseImage returns the image for the \"pause\" container\r\nfunc GetPauseImage(cfg *kubeadmapi.ClusterConfiguration) string {\r\n\treturn GetGenericImage(cfg.ImageRepository, \"pause\", constants.PauseVersion)\r\n}\r\n```",
        "createdAt" : "2021-01-21T13:59:27Z",
        "updatedAt" : "2021-02-05T13:40:40Z",
        "lastEditedBy" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "tags" : [
        ]
      },
      {
        "id" : "fdfcf821-670e-424e-93d8-44b18b81fd3f",
        "parentId" : "30068a08-aacc-42da-887d-b26f00af0f8c",
        "authorId" : "5e225159-999d-430a-8b58-d5220dc1429d",
        "body" : "Looks good to me.\r\nIt seems to be correct as well.",
        "createdAt" : "2021-01-21T14:08:23Z",
        "updatedAt" : "2021-02-05T13:40:40Z",
        "lastEditedBy" : "5e225159-999d-430a-8b58-d5220dc1429d",
        "tags" : [
        ]
      }
    ],
    "commit" : "d9b63439d2d243db7511cfe2c4ffb6075836d4c0",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +126,130 @@func GetPauseImage(cfg *kubeadmapi.ClusterConfiguration) string {\n\treturn GetGenericImage(cfg.ImageRepository, \"pause\", constants.PauseVersion)\n}"
  },
  {
    "id" : "708e7c74-4101-466d-b2f0-be0bd294c613",
    "prId" : 85094,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/85094#pullrequestreview-314985854",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9ebea565-1a62-4de8-a0bc-29efd23b4032",
        "parentId" : null,
        "authorId" : "67bc6085-2cd9-4674-9dbc-d2a266f478be",
        "body" : "When this warning will be printed? I see a bit of convoluted logic here at `images.go` because we'll never satisfy both conditions, as `GetControlPlaneImages` has a explicit branch for `cfg.UseHyperKubeImage` as well. Is this fine?",
        "createdAt" : "2019-11-11T15:44:15Z",
        "updatedAt" : "2019-11-11T15:44:41Z",
        "lastEditedBy" : "67bc6085-2cd9-4674-9dbc-d2a266f478be",
        "tags" : [
        ]
      },
      {
        "id" : "55396ccd-3da8-4b01-b7f4-c43ea1baef95",
        "parentId" : "9ebea565-1a62-4de8-a0bc-29efd23b4032",
        "authorId" : "67bc6085-2cd9-4674-9dbc-d2a266f478be",
        "body" : "Ah, this looks for other usages like in `controlplane/manifests.go` and `addons/proxy/proxy.go`, right?",
        "createdAt" : "2019-11-11T15:46:09Z",
        "updatedAt" : "2019-11-11T15:46:09Z",
        "lastEditedBy" : "67bc6085-2cd9-4674-9dbc-d2a266f478be",
        "tags" : [
        ]
      },
      {
        "id" : "7e6fedc0-a108-4c92-bea3-3ac5236e7c8d",
        "parentId" : "9ebea565-1a62-4de8-a0bc-29efd23b4032",
        "authorId" : "cccc7bed-95f4-42a9-83ef-6ba1a4dca7ec",
        "body" : "Yep, actually the messages will be dumped several times for the different images and probably as a whole.",
        "createdAt" : "2019-11-11T15:50:48Z",
        "updatedAt" : "2019-11-11T15:50:49Z",
        "lastEditedBy" : "cccc7bed-95f4-42a9-83ef-6ba1a4dca7ec",
        "tags" : [
        ]
      },
      {
        "id" : "30e625f4-b663-4ed6-b62f-1a3d0fe2ca03",
        "parentId" : "9ebea565-1a62-4de8-a0bc-29efd23b4032",
        "authorId" : "67bc6085-2cd9-4674-9dbc-d2a266f478be",
        "body" : "That is fine IMO.",
        "createdAt" : "2019-11-11T15:52:11Z",
        "updatedAt" : "2019-11-11T15:52:12Z",
        "lastEditedBy" : "67bc6085-2cd9-4674-9dbc-d2a266f478be",
        "tags" : [
        ]
      }
    ],
    "commit" : "5bb80694eca0e214eb59aebba31a9eb5678ca6a3",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +35,39 @@func GetKubernetesImage(image string, cfg *kubeadmapi.ClusterConfiguration) string {\n\tif cfg.UseHyperKubeImage && image != constants.HyperKube {\n\t\tklog.Warningf(`WARNING: DEPRECATED use of the \"hyperkube\" image in place of %q`, image)\n\t\timage = constants.HyperKube\n\t}"
  },
  {
    "id" : "89f326b2-3634-4d4a-87b6-58a43206c949",
    "prId" : 85094,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/85094#pullrequestreview-315013324",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0d215422-9cc6-43fc-aa33-831c94643017",
        "parentId" : null,
        "authorId" : "e2ca6907-6765-444e-8bf6-1452233150d6",
        "body" : "can we give more context here ? maybe add the planned removal ? users might expect that we'll maintain this behavior for 3 releases",
        "createdAt" : "2019-11-11T15:57:24Z",
        "updatedAt" : "2019-11-11T15:57:30Z",
        "lastEditedBy" : "e2ca6907-6765-444e-8bf6-1452233150d6",
        "tags" : [
        ]
      },
      {
        "id" : "d84b9339-48cb-4d12-8668-553de70c138d",
        "parentId" : "0d215422-9cc6-43fc-aa33-831c94643017",
        "authorId" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "body" : "i though that we are going to remove it in v1beta3 right away and if users want to use hyperkube they should stay on v1beta2?\r\n\r\nthe message can indicate that?",
        "createdAt" : "2019-11-11T16:33:57Z",
        "updatedAt" : "2019-11-11T16:33:58Z",
        "lastEditedBy" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "tags" : [
        ]
      }
    ],
    "commit" : "5bb80694eca0e214eb59aebba31a9eb5678ca6a3",
    "line" : 22,
    "diffHunk" : "@@ -1,1 +94,98 @@\t// start with core kubernetes images\n\tif cfg.UseHyperKubeImage {\n\t\tklog.Warningln(`WARNING: DEPRECATED use of the \"hyperkube\" image for the Kubernetes control plane`)\n\t\timgs = append(imgs, GetKubernetesImage(constants.HyperKube, cfg))\n\t} else {"
  },
  {
    "id" : "f982aba4-9585-42a7-a0bd-cb00d5a231c5",
    "prId" : 70793,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/70793#pullrequestreview-173446899",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "524e2097-5839-41cc-98ef-d28eb541a0d0",
        "parentId" : null,
        "authorId" : "f81960f6-a033-4403-bebf-c8ebb484e444",
        "body" : "If you change the line below I don't think this is necessary",
        "createdAt" : "2018-11-09T15:02:08Z",
        "updatedAt" : "2018-11-09T15:35:45Z",
        "lastEditedBy" : "f81960f6-a033-4403-bebf-c8ebb484e444",
        "tags" : [
        ]
      }
    ],
    "commit" : "b551ad596a6e5972ecf7cc3ad7ed29150d9d8b25",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +33,37 @@// GetKubeControlPlaneImage generates and returns the image for the core Kubernetes components or returns the unified control plane image if specified\nfunc GetKubeControlPlaneImage(image string, cfg *kubeadmapi.ClusterConfiguration) string {\n\tif cfg.UseHyperKubeImage {\n\t\timage = constants.HyperKube\n\t}"
  },
  {
    "id" : "39883854-2653-404b-9655-6713fde2ac04",
    "prId" : 63450,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/63450#pullrequestreview-119525503",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f3104bde-93bc-44da-9ffa-05b48436dc4d",
        "parentId" : null,
        "authorId" : "bfe6ebf1-cfa7-4758-abb1-9960fa09b194",
        "body" : "Could we source this constant from somewhere? Also this _might_ get updated with new Kubernetes versions, so we maybe should track it in constants like we do with etcd versions...",
        "createdAt" : "2018-05-11T17:25:04Z",
        "updatedAt" : "2018-05-11T17:26:11Z",
        "lastEditedBy" : "bfe6ebf1-cfa7-4758-abb1-9960fa09b194",
        "tags" : [
        ]
      },
      {
        "id" : "bf65106a-904e-46b5-94d3-bc41107c274c",
        "parentId" : "f3104bde-93bc-44da-9ffa-05b48436dc4d",
        "authorId" : "bfaab188-fe7f-45cd-8e91-eeb4626a5f04",
        "body" : "I looked but the best place I found was in the test framework. I could have overlooked something though. It's a surprisingly hard thing to find.\r\n\r\nYou're right though. Looking back it looks like it did get bumped in 1.10 to 3.1. I think that will be outside the kubeadm scope but we should have the mechanism in place for getting the correct version given the k8s version.\r\n\r\nMight be worth consolidating as we have some logic in constants (etcd) and some logic in the dns package. I'll open a ticket to investigate this work.",
        "createdAt" : "2018-05-11T17:49:46Z",
        "updatedAt" : "2018-05-11T17:49:46Z",
        "lastEditedBy" : "bfaab188-fe7f-45cd-8e91-eeb4626a5f04",
        "tags" : [
        ]
      },
      {
        "id" : "5cac67e4-2186-47c7-a379-d4d8dfacdaaa",
        "parentId" : "f3104bde-93bc-44da-9ffa-05b48436dc4d",
        "authorId" : "bfe6ebf1-cfa7-4758-abb1-9960fa09b194",
        "body" : "Thanks!",
        "createdAt" : "2018-05-11T17:57:55Z",
        "updatedAt" : "2018-05-11T17:57:56Z",
        "lastEditedBy" : "bfe6ebf1-cfa7-4758-abb1-9960fa09b194",
        "tags" : [
        ]
      }
    ],
    "commit" : "f5e68814bf7892911934f4e0cbed644e916dbae3",
    "line" : 23,
    "diffHunk" : "@@ -1,1 +54,58 @@\timgs = append(imgs, GetCoreImage(constants.KubeScheduler, cfg.ImageRepository, cfg.KubernetesVersion, cfg.UnifiedControlPlaneImage))\n\timgs = append(imgs, fmt.Sprintf(\"%v/%v-%v:%v\", cfg.ImageRepository, constants.KubeProxy, runtime.GOARCH, kubeadmutil.KubernetesVersionToImageTag(cfg.KubernetesVersion)))\n\timgs = append(imgs, fmt.Sprintf(\"%v/pause-%v:%v\", cfg.ImageRepository, runtime.GOARCH, \"3.1\"))\n\n\t// if etcd is not external then add the image as it will be required"
  },
  {
    "id" : "a47120e2-cc2c-4fea-b47b-089466b54c9b",
    "prId" : 55010,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/55010#pullrequestreview-77604364",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "24d46122-be94-4e1b-9290-8552acf3e97f",
        "parentId" : null,
        "authorId" : "bfe6ebf1-cfa7-4758-abb1-9960fa09b194",
        "body" : "what happens on error here?\r\nThis probably requires a parameter change from `k8sVersion string` to `k8sVersion *version.Version` where `version` is `k8s.io/kubernetes/pkg/util/version`",
        "createdAt" : "2017-11-17T23:44:43Z",
        "updatedAt" : "2017-11-18T23:48:27Z",
        "lastEditedBy" : "bfe6ebf1-cfa7-4758-abb1-9960fa09b194",
        "tags" : [
        ]
      },
      {
        "id" : "5eab66f9-3f99-4d97-81cc-b1237e422764",
        "parentId" : "24d46122-be94-4e1b-9290-8552acf3e97f",
        "authorId" : "6c37c694-3f72-4ff3-ac3a-5fbddf4d5796",
        "body" : "on line 33 etcdImageTag gets assigned default constants.DefaultEtcdVersion, if error occurs the default version is used, if not then etcdImageTag would get version from EtcdSupportedVersion.",
        "createdAt" : "2017-11-18T02:35:27Z",
        "updatedAt" : "2017-11-18T23:48:27Z",
        "lastEditedBy" : "6c37c694-3f72-4ff3-ac3a-5fbddf4d5796",
        "tags" : [
        ]
      }
    ],
    "commit" : "1f20a8d022df7f07e3633c9fbe5c36f11b7043cd",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +32,36 @@\tkubernetesImageTag := kubeadmutil.KubernetesVersionToImageTag(k8sVersion)\n\tetcdImageTag := constants.DefaultEtcdVersion\n\tetcdImageVersion, err := constants.EtcdSupportedVersion(k8sVersion)\n\tif err == nil {\n\t\tetcdImageTag = etcdImageVersion.String()"
  }
]