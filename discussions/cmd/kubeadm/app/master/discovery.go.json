[
  {
    "id" : "370b8ea3-26c8-4af3-a394-d4c8d96706bc",
    "prId" : 33262,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/33262#pullrequestreview-1434226",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "29e906f5-8268-435e-b469-2a0b67308acd",
        "parentId" : null,
        "authorId" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "body" : "Why isn't this a static pod? It seems like it would make the transition into core apiserver functionality   more straightforward.\n",
        "createdAt" : "2016-09-23T18:10:52Z",
        "updatedAt" : "2016-09-26T08:13:51Z",
        "lastEditedBy" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "tags" : [
        ]
      },
      {
        "id" : "5b5ea5e5-1707-4b54-9178-117b43357618",
        "parentId" : "29e906f5-8268-435e-b469-2a0b67308acd",
        "authorId" : "bfe6ebf1-cfa7-4758-abb1-9960fa09b194",
        "body" : "I'm also in favor for a static pod here, we should just run it alongside the apiserver, cm and scheduler\n",
        "createdAt" : "2016-09-23T19:07:50Z",
        "updatedAt" : "2016-09-26T08:13:51Z",
        "lastEditedBy" : "bfe6ebf1-cfa7-4758-abb1-9960fa09b194",
        "tags" : [
        ]
      },
      {
        "id" : "01bd32cf-d559-4eec-9c11-b3f2675b6ff5",
        "parentId" : "29e906f5-8268-435e-b469-2a0b67308acd",
        "authorId" : "d37d9758-bdf5-4c23-a40e-a85099689a0c",
        "body" : "> Why isn't this a static pod?\n\nIt uses a secret, which depends on control plane, it doesn't make any\nsense to split these two things. However, the main principle driving this\ndecision was to mod away from static pods where possible. Not using secret is also bad, as we have to write more files to disk, and I believe it's something we prefer to avoid (especially for new pieces). We can change how `kube-discovery` is configured, e.g. be use flags, but that'd make token rotation problem look different too.\n\n> It seems like it would make the transition into core apiserver functionality more straightforward.\n\nThe status of whether it may become part the apiserver is still uncertain.\n",
        "createdAt" : "2016-09-23T19:16:12Z",
        "updatedAt" : "2016-09-26T08:13:51Z",
        "lastEditedBy" : "d37d9758-bdf5-4c23-a40e-a85099689a0c",
        "tags" : [
        ]
      },
      {
        "id" : "d731b340-247e-46b5-acf2-8dbb74754cb0",
        "parentId" : "29e906f5-8268-435e-b469-2a0b67308acd",
        "authorId" : "ad0a3561-db60-47a9-b82f-ac613199f968",
        "body" : "Correct me if I'm wrong, but can't you create pods that reference secrets that aren't defined? And when they become defined later, they can resolve them? So this could be a static pod that just wouldn't work correctly when the control plane first came up, but would eventually get its secret.\n",
        "createdAt" : "2016-09-23T23:01:02Z",
        "updatedAt" : "2016-09-26T08:13:51Z",
        "lastEditedBy" : "ad0a3561-db60-47a9-b82f-ac613199f968",
        "tags" : [
        ]
      },
      {
        "id" : "e5a0cd4f-c7aa-4c83-a0bc-44b734b40ec0",
        "parentId" : "29e906f5-8268-435e-b469-2a0b67308acd",
        "authorId" : "d37d9758-bdf5-4c23-a40e-a85099689a0c",
        "body" : "Ok, surely you can do that. It just doesn't make sense to me to separate these two things. I really don't see a point of having this discussion right now. I'd much rather discuss the future of the JWS service, i.e. whether it could be an API  object behind a feature gate or what not. In my understanding, if does become part of the API, we will just remove this code, not need to keep reshaping it. Also, I really don't understand why to use a static pod after we have established the control plane, removing the node affinity and tolerance annotation would be the only thing, but why would we not dogfood those features?\n\nAdditionally, making this a static pod reduces upgradability, as it progresses to stable we might have to make it easy to upgrade or simply delete (if user doesn't want to run unstable components after initial cluster was built).\n",
        "createdAt" : "2016-09-24T12:26:34Z",
        "updatedAt" : "2016-09-26T08:13:51Z",
        "lastEditedBy" : "d37d9758-bdf5-4c23-a40e-a85099689a0c",
        "tags" : [
        ]
      }
    ],
    "commit" : "3a4613d3b25dd1944a7f26b6d2037c9e82fcde7e",
    "line" : 110,
    "diffHunk" : "@@ -1,1 +108,112 @@}\n\nfunc CreateDiscoveryDeploymentAndSecret(s *kubeadmapi.KubeadmConfig, client *clientset.Clientset, caCert *x509.Certificate) error {\n\tkd := newKubeDiscovery(s, caCert)\n"
  }
]