[
  {
    "id" : "7bdc3ad1-f936-45f9-ab93-21acad14af29",
    "prId" : 93483,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/93483#pullrequestreview-461017500",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a92a2c1b-8ece-4157-b974-4ba078560369",
        "parentId" : null,
        "authorId" : "cccc7bed-95f4-42a9-83ef-6ba1a4dca7ec",
        "body" : "@ZhiFeng1993 , can you remove everything else from this func but this line?\r\nAlso, the \"Currently it prints a warining ...\" comment above the function needs removal too.",
        "createdAt" : "2020-07-28T14:45:48Z",
        "updatedAt" : "2020-08-06T19:47:01Z",
        "lastEditedBy" : "cccc7bed-95f4-42a9-83ef-6ba1a4dca7ec",
        "tags" : [
        ]
      },
      {
        "id" : "ea0446a5-a798-4d02-8804-f0c553a0845c",
        "parentId" : "a92a2c1b-8ece-4157-b974-4ba078560369",
        "authorId" : "d46d99b4-e85a-4476-9d0f-211b7e7ac227",
        "body" : "Done. I'm a bit confused about this function though. What's the point of returning an empty list?",
        "createdAt" : "2020-07-29T18:05:39Z",
        "updatedAt" : "2020-08-06T19:47:01Z",
        "lastEditedBy" : "d46d99b4-e85a-4476-9d0f-211b7e7ac227",
        "tags" : [
        ]
      },
      {
        "id" : "ab93a8ee-e025-4c2b-942b-0a0470ed854c",
        "parentId" : "a92a2c1b-8ece-4157-b974-4ba078560369",
        "authorId" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "body" : "we spoke briefly about this function during yesterday's kubeadm office hours meeting.\r\n\r\nthere are two options:\r\n- remove the function until we need it.\r\n- add a TODO on top of the function to identify this is reserved for component config validation in the future.\r\n\r\n@rosti should be able to provide more information.",
        "createdAt" : "2020-07-30T05:29:19Z",
        "updatedAt" : "2020-08-06T19:47:01Z",
        "lastEditedBy" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "tags" : [
        ]
      },
      {
        "id" : "1c74094f-89f1-4fbc-b790-dfaedf2f602d",
        "parentId" : "a92a2c1b-8ece-4157-b974-4ba078560369",
        "authorId" : "cccc7bed-95f4-42a9-83ef-6ba1a4dca7ec",
        "body" : "@ZhiFeng1993 \r\n> Done. I'm a bit confused about this function though. What's the point of returning an empty list?\r\n\r\nAn older version of this function was performing actual validation of component configs in the previous implementation of the package. In the new implementation this becomes impossible due to the fact that we can no longer import the validation logic of each component.\r\nAs a drop-in replacement, I have started an effort to introduce a standard command line interface for each Kubernetes component to validate its config when invoked from the CLI.\r\nHence, when I re-implemented the `componentconfigs` package, this function's old body was deleted and replaced with a \"warning\" placeholder. However, validating the configs is not so critical, plus the effort for the standard CLI for validation has ground to a stop ATM.\r\nSo this function can either be deleted or left empty with a TODO. I don't have a personal preference actually.",
        "createdAt" : "2020-08-03T09:08:57Z",
        "updatedAt" : "2020-08-06T19:47:01Z",
        "lastEditedBy" : "cccc7bed-95f4-42a9-83ef-6ba1a4dca7ec",
        "tags" : [
        ]
      },
      {
        "id" : "d2738974-eaba-4b51-bf67-7aabb5c08d08",
        "parentId" : "a92a2c1b-8ece-4157-b974-4ba078560369",
        "authorId" : "d46d99b4-e85a-4476-9d0f-211b7e7ac227",
        "body" : "Thank you both for the explanation.  Since you guys have future plans for this function, I'll do as suggested. ",
        "createdAt" : "2020-08-04T17:22:03Z",
        "updatedAt" : "2020-08-06T19:47:01Z",
        "lastEditedBy" : "d46d99b4-e85a-4476-9d0f-211b7e7ac227",
        "tags" : [
        ]
      }
    ],
    "commit" : "b90228f52f695d8bf7483877fff0f3bd7f3af527",
    "line" : 22,
    "diffHunk" : "@@ -1,1 +339,343 @@// TODO: investigate if the function can be repurposed for validating component config via CLI\nfunc Validate(clusterCfg *kubeadmapi.ClusterConfiguration) field.ErrorList {\n\treturn field.ErrorList{}\n}"
  },
  {
    "id" : "2879b948-a81d-4aaa-b373-5ac2aefca1c6",
    "prId" : 91980,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/91980#pullrequestreview-428077412",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ad7e5824-35cb-4b5b-8a2b-fa1205f0a5a0",
        "parentId" : null,
        "authorId" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "body" : "a comment about longer lines (feel free to not change). github screen buffer for review is ~120 characters horizontally, so for longer lines, the reviewer has to scroll (e.g. using left, right arrow keys) to see a whole line longer than that.\r\n\r\nmaybe we should try to limit new code to ~120ch.\r\n",
        "createdAt" : "2020-06-10T14:11:10Z",
        "updatedAt" : "2020-06-22T13:30:12Z",
        "lastEditedBy" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "tags" : [
        ]
      }
    ],
    "commit" : "1d2d15ee033a55767dfb84261940f719a963b446",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +243,247 @@// the ones present in the supplied document map. If any UnsupportedConfigVersionError are not handled by the configs\n// in the document map, the function returns them all as a single UnsupportedConfigVersionsErrorMap.\n// This function is normally called only in some specific cases during upgrade.\nfunc FetchFromClusterWithLocalOverwrites(clusterCfg *kubeadmapi.ClusterConfiguration, client clientset.Interface, docmap kubeadmapi.DocumentMap) error {\n\tensureInitializedComponentConfigs(clusterCfg)"
  },
  {
    "id" : "dae6380d-4cef-4286-ac07-4c1f5d4d7cfd",
    "prId" : 86070,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/86070#pullrequestreview-357297649",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e7133067-0ac5-4537-8132-5fc517d02cd0",
        "parentId" : null,
        "authorId" : "8a27151d-3530-4221-90e8-48b3a85cba37",
        "body" : "If possible, the version check should be moved out of Unmarshal a made more explicit e.g. \r\nCreate a `isVersionChanged` method",
        "createdAt" : "2019-12-09T14:57:52Z",
        "updatedAt" : "2020-06-01T14:58:16Z",
        "lastEditedBy" : "8a27151d-3530-4221-90e8-48b3a85cba37",
        "tags" : [
        ]
      },
      {
        "id" : "f568cef7-f1af-4885-b924-b4774f4c8cb7",
        "parentId" : "e7133067-0ac5-4537-8132-5fc517d02cd0",
        "authorId" : "cccc7bed-95f4-42a9-83ef-6ba1a4dca7ec",
        "body" : "This is actually a bit hard to achieve currently. We are missing an abstraction layer here... but let's start from the beginning.\r\nCurrently we have:\r\n```golang\r\ntype ClusterConfiguration struct {\r\n        // ...\r\n        ComponentConfigs map[string]ComponentConfig\r\n        // ...\r\n}\r\n```\r\nThe `kubeadmapi.ComponentConfig` should start an abstraction chain spanning like `Group->Version{Kinds}`. But in reality `kubeadmapi.ComponentConfig` results in a single backing object like so: `GroupVersion{Kinds}`.\r\nIf we had a couple of objects here, we would have called the group object's `Unmarshal` method, which would then analyze the version at hand and return an error or an appropriate version specific object (to be pointed by the group object).\r\n\r\nFor now I intend to keep things simple by not introducing the additional version layer. This layer is needed only when we start supporting multiple versions per component config group.\r\nHence, the code looks a bit weird at some places due to the lack of that abstraction.",
        "createdAt" : "2020-02-06T16:58:03Z",
        "updatedAt" : "2020-06-01T14:58:16Z",
        "lastEditedBy" : "cccc7bed-95f4-42a9-83ef-6ba1a4dca7ec",
        "tags" : [
        ]
      },
      {
        "id" : "406343a2-15fd-4302-9454-9d7c750932f1",
        "parentId" : "e7133067-0ac5-4537-8132-5fc517d02cd0",
        "authorId" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "body" : "> This layer is needed only when we start supporting multiple versions per component config group.\r\n\r\nseems good.",
        "createdAt" : "2020-02-11T15:33:11Z",
        "updatedAt" : "2020-06-01T14:58:16Z",
        "lastEditedBy" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "tags" : [
        ]
      },
      {
        "id" : "0fd0abec-a0e6-4753-b93b-c8cb1086684a",
        "parentId" : "e7133067-0ac5-4537-8132-5fc517d02cd0",
        "authorId" : "8a27151d-3530-4221-90e8-48b3a85cba37",
        "body" : "ok",
        "createdAt" : "2020-02-12T09:26:23Z",
        "updatedAt" : "2020-06-01T14:58:16Z",
        "lastEditedBy" : "8a27151d-3530-4221-90e8-48b3a85cba37",
        "tags" : [
        ]
      }
    ],
    "commit" : "5d6cf8ecd486464ba5c18d7ff389ebd8597c36c2",
    "line" : 95,
    "diffHunk" : "@@ -1,1 +165,169 @@\t\t}\n\n\t\tif gvk.Version != cb.GroupVersion.Version {\n\t\t\treturn &UnsupportedConfigVersionError{\n\t\t\t\tOldVersion:     gvk.GroupVersion(),"
  },
  {
    "id" : "3bbbd2d1-6a68-460a-9c04-f95e8e80cd15",
    "prId" : 85639,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/85639#pullrequestreview-323540846",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "32f37401-e2fe-465c-87fe-0901144368b9",
        "parentId" : null,
        "authorId" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "body" : "i think we saw this warning being printed in a lot of commands such as `kubeadm config images`.\r\nshould we change it to klog.V(...).Infof()?",
        "createdAt" : "2019-11-26T23:47:18Z",
        "updatedAt" : "2019-11-26T23:47:19Z",
        "lastEditedBy" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "tags" : [
        ]
      },
      {
        "id" : "4472e4c8-30a8-4112-8acb-8e9cb38e9f45",
        "parentId" : "32f37401-e2fe-465c-87fe-0901144368b9",
        "authorId" : "cccc7bed-95f4-42a9-83ef-6ba1a4dca7ec",
        "body" : "I guess so. The code is executed whenever the config is loaded (which happens in almost all kubeadm commands). However it's good to see it as a warning only on `kubeadm init/upgrade *`.",
        "createdAt" : "2019-11-27T09:44:14Z",
        "updatedAt" : "2019-11-27T09:44:15Z",
        "lastEditedBy" : "cccc7bed-95f4-42a9-83ef-6ba1a4dca7ec",
        "tags" : [
        ]
      }
    ],
    "commit" : "b881f19c8bea5fc79bcd6b59891042dc859e6fdf",
    "line" : 202,
    "diffHunk" : "@@ -1,1 +200,204 @@\t}\n\tsort.Strings(groups) // The sort is needed to make the output predictable\n\tklog.Warningf(\"WARNING: kubeadm cannot validate component configs for API groups %v\", groups)\n\treturn field.ErrorList{}\n}"
  },
  {
    "id" : "fff13bac-b60d-4382-b3da-81a4c447045f",
    "prId" : 85639,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/85639#pullrequestreview-325464765",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fa5cf2f2-ce20-4e4c-9b8f-572ca9e67315",
        "parentId" : null,
        "authorId" : "67bc6085-2cd9-4674-9dbc-d2a266f478be",
        "body" : "Can't we make `fromCluster` a `handler` method as well, so there's no need to pass `h` as argument?",
        "createdAt" : "2019-12-02T18:52:43Z",
        "updatedAt" : "2019-12-02T18:53:51Z",
        "lastEditedBy" : "67bc6085-2cd9-4674-9dbc-d2a266f478be",
        "tags" : [
        ]
      },
      {
        "id" : "d6330c0f-9adb-4d88-8e2b-174ffebe30a8",
        "parentId" : "fa5cf2f2-ce20-4e4c-9b8f-572ca9e67315",
        "authorId" : "67bc6085-2cd9-4674-9dbc-d2a266f478be",
        "body" : "I see why you did this on the non-public one... nevermind.",
        "createdAt" : "2019-12-02T19:09:37Z",
        "updatedAt" : "2019-12-02T19:09:38Z",
        "lastEditedBy" : "67bc6085-2cd9-4674-9dbc-d2a266f478be",
        "tags" : [
        ]
      }
    ],
    "commit" : "b881f19c8bea5fc79bcd6b59891042dc859e6fdf",
    "line" : 97,
    "diffHunk" : "@@ -1,1 +95,99 @@// FromCluster loads a component from a config map in the cluster\nfunc (h *handler) FromCluster(clientset clientset.Interface, clusterCfg *kubeadmapi.ClusterConfiguration) (kubeadmapi.ComponentConfig, error) {\n\treturn h.fromCluster(h, clientset, clusterCfg)\n}\n"
  }
]