[
  {
    "id" : "de5f1b31-064d-40e2-acc0-aba6543a5328",
    "prId" : 94398,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/94398#pullrequestreview-491520078",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "36dffe22-4aff-46fa-a830-d531c3deae6d",
        "parentId" : null,
        "authorId" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "body" : "these docs are now out of date w/ respect to how this method works",
        "createdAt" : "2020-09-10T11:07:06Z",
        "updatedAt" : "2020-09-10T11:09:00Z",
        "lastEditedBy" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "tags" : [
        ]
      },
      {
        "id" : "5b2145f6-f80a-4712-bc43-bf4ff3cc0d44",
        "parentId" : "36dffe22-4aff-46fa-a830-d531c3deae6d",
        "authorId" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "body" : "this can be fixed in the master branch.",
        "createdAt" : "2020-09-10T13:04:17Z",
        "updatedAt" : "2020-09-10T13:04:18Z",
        "lastEditedBy" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "tags" : [
        ]
      },
      {
        "id" : "0ca209f6-c356-4210-8934-63f424ebce86",
        "parentId" : "36dffe22-4aff-46fa-a830-d531c3deae6d",
        "authorId" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "body" : "@jdef actually...why do you think the docs of the function are no longer valid?\r\n\r\nall comments seem guaranteed to me by the unit tests that we have:\r\n```\r\n// GetControlPlaneEndpoint returns a properly formatted endpoint for the control plane built according following rules:\r\n// - If the controlPlaneEndpoint is defined, use it.\r\n// - if the controlPlaneEndpoint is defined but without a port number, use the controlPlaneEndpoint + localEndpoint.BindPort is used.\r\n// - Otherwise, in case the controlPlaneEndpoint is not defined, use the localEndpoint.AdvertiseAddress + the localEndpoint.BindPort.\r\n```\r\n\r\nhttps://github.com/neolit123/kubernetes/blob/d9441906c4155173ce1a75421d8fcd1d2f79c471/cmd/kubeadm/app/util/endpoint_test.go#L31-L196\r\n\r\nand this PR did not touch these unit tests.",
        "createdAt" : "2020-09-15T22:01:21Z",
        "updatedAt" : "2020-09-15T22:02:08Z",
        "lastEditedBy" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "tags" : [
        ]
      },
      {
        "id" : "af851ea9-2e02-4b1d-9378-0a188f0543c1",
        "parentId" : "36dffe22-4aff-46fa-a830-d531c3deae6d",
        "authorId" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "body" : "the very first thing this method does is check for a local API endpoint. the docs seem to indicate otherwise.",
        "createdAt" : "2020-09-18T14:28:58Z",
        "updatedAt" : "2020-09-18T14:28:58Z",
        "lastEditedBy" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "tags" : [
        ]
      },
      {
        "id" : "6e97aff5-26af-44bb-b219-a57c519be6ed",
        "parentId" : "36dffe22-4aff-46fa-a830-d531c3deae6d",
        "authorId" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "body" : "> the very first thing this method does is check for a local API endpoint. the docs seem to indicate otherwise.\r\n\r\nnevermind. read through the code too quickly. twice.",
        "createdAt" : "2020-09-18T14:30:42Z",
        "updatedAt" : "2020-09-18T14:30:42Z",
        "lastEditedBy" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "tags" : [
        ]
      }
    ],
    "commit" : "d9441906c4155173ce1a75421d8fcd1d2f79c471",
    "line" : 1,
    "diffHunk" : "@@ -1,1 +32,36 @@// GetControlPlaneEndpoint returns a properly formatted endpoint for the control plane built according following rules:\n// - If the controlPlaneEndpoint is defined, use it.\n// - if the controlPlaneEndpoint is defined but without a port number, use the controlPlaneEndpoint + localEndpoint.BindPort is used.\n// - Otherwise, in case the controlPlaneEndpoint is not defined, use the localEndpoint.AdvertiseAddress + the localEndpoint.BindPort.\nfunc GetControlPlaneEndpoint(controlPlaneEndpoint string, localEndpoint *kubeadmapi.APIEndpoint) (string, error) {"
  },
  {
    "id" : "d18c0257-f38e-445b-bb57-3be855a36304",
    "prId" : 67830,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/67830#pullrequestreview-149358450",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "75b8675a-0688-4470-a5d3-5feae2b0c851",
        "parentId" : null,
        "authorId" : "cccc7bed-95f4-42a9-83ef-6ba1a4dca7ec",
        "body" : "~~Perhaps s/InitConfiguration/ClusterConfiguration ?~~\r\n\r\nNever mind, I just saw the other PR.",
        "createdAt" : "2018-08-24T15:48:02Z",
        "updatedAt" : "2018-08-24T16:03:30Z",
        "lastEditedBy" : "cccc7bed-95f4-42a9-83ef-6ba1a4dca7ec",
        "tags" : [
        ]
      }
    ],
    "commit" : "960ef7bf67a4cbe976c232d661edd0515469e45e",
    "line" : 11,
    "diffHunk" : "@@ -1,1 +31,35 @@// - if the ControlPlaneEndpoint is defined but without a port number, use the ControlPlaneEndpoint + api.BindPort is used.\n// - Otherwise, in case the ControlPlaneEndpoint is not defined, use the api.AdvertiseAddress + the api.BindPort.\nfunc GetMasterEndpoint(cfg *kubeadmapi.InitConfiguration) (string, error) {\n\t// parse the bind port\n\tbindPortString := strconv.Itoa(int(cfg.API.BindPort))"
  },
  {
    "id" : "12adcb5d-dfad-4436-98c7-ad26495a1c4c",
    "prId" : 62314,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/62314#pullrequestreview-112125064",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2fbfcd67-8bff-43ec-af88-201b199f7952",
        "parentId" : null,
        "authorId" : "f81960f6-a033-4403-bebf-c8ebb484e444",
        "body" : "This doesn't need to be explicit.",
        "createdAt" : "2018-04-12T20:26:47Z",
        "updatedAt" : "2018-04-13T20:47:57Z",
        "lastEditedBy" : "f81960f6-a033-4403-bebf-c8ebb484e444",
        "tags" : [
        ]
      },
      {
        "id" : "ccaf6654-2896-4bd3-a572-96f911675570",
        "parentId" : "2fbfcd67-8bff-43ec-af88-201b199f7952",
        "authorId" : "f81960f6-a033-4403-bebf-c8ebb484e444",
        "body" : "You could use implicit declaration below. ",
        "createdAt" : "2018-04-13T13:47:30Z",
        "updatedAt" : "2018-04-13T20:47:57Z",
        "lastEditedBy" : "f81960f6-a033-4403-bebf-c8ebb484e444",
        "tags" : [
        ]
      },
      {
        "id" : "b07c2ccf-748a-4a61-a023-13f96c83787d",
        "parentId" : "2fbfcd67-8bff-43ec-af88-201b199f7952",
        "authorId" : "c4f89919-c15e-466b-93ac-3ac5b5ff1807",
        "body" : "Then masterIP and portStr would be shadowed, that's why I explicitly declared the error.",
        "createdAt" : "2018-04-13T19:00:34Z",
        "updatedAt" : "2018-04-13T20:47:57Z",
        "lastEditedBy" : "c4f89919-c15e-466b-93ac-3ac5b5ff1807",
        "tags" : [
        ]
      }
    ],
    "commit" : "f558359315b72e45664cd84de88d93bdb2d99bba",
    "line" : 22,
    "diffHunk" : "@@ -1,1 +45,49 @@\tif len(cfg.API.ControlPlaneEndpoint) > 0 {\n\t\tif strings.Contains(cfg.API.ControlPlaneEndpoint, \":\") {\n\t\t\tvar err error\n\t\t\tmasterIP, portStr, err = net.SplitHostPort(cfg.API.ControlPlaneEndpoint)\n\t\t\tif err != nil {"
  },
  {
    "id" : "9321af78-da7a-4ff8-af6b-c969e97e4037",
    "prId" : 62314,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/62314#pullrequestreview-112130152",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6d07db2e-755b-4dc1-92a8-77c372f67487",
        "parentId" : null,
        "authorId" : "f81960f6-a033-4403-bebf-c8ebb484e444",
        "body" : "This overrides the config.API.BindPort, are there any other areas that might conflict?  \r\n\r\nAlso, we should surface a warning on that condition so it's clear from a UX perspective. ",
        "createdAt" : "2018-04-12T20:29:46Z",
        "updatedAt" : "2018-04-13T20:47:57Z",
        "lastEditedBy" : "f81960f6-a033-4403-bebf-c8ebb484e444",
        "tags" : [
        ]
      },
      {
        "id" : "813854a2-3b1d-4c41-9d8c-e265461f465a",
        "parentId" : "6d07db2e-755b-4dc1-92a8-77c372f67487",
        "authorId" : "c4f89919-c15e-466b-93ac-3ac5b5ff1807",
        "body" : "The `GetMasterHostPort` function is only used for generating kubeconfigs. Since `cfg.API.ControlPlaneEndpoint` already overrides `cfg.API.AdvertiseAddress` for that purpose, it seems right to me that it should also be possible to override the port.",
        "createdAt" : "2018-04-13T19:02:16Z",
        "updatedAt" : "2018-04-13T20:47:57Z",
        "lastEditedBy" : "c4f89919-c15e-466b-93ac-3ac5b5ff1807",
        "tags" : [
        ]
      },
      {
        "id" : "ff24cd81-eef5-4b26-b665-4422dfe478bd",
        "parentId" : "6d07db2e-755b-4dc1-92a8-77c372f67487",
        "authorId" : "f81960f6-a033-4403-bebf-c8ebb484e444",
        "body" : "I'm fine that it overrides...\r\nMy comment is to surface a message to the user that it is being overridden for completeness.  ",
        "createdAt" : "2018-04-13T19:18:21Z",
        "updatedAt" : "2018-04-13T20:47:57Z",
        "lastEditedBy" : "f81960f6-a033-4403-bebf-c8ebb484e444",
        "tags" : [
        ]
      }
    ],
    "commit" : "f558359315b72e45664cd84de88d93bdb2d99bba",
    "line" : 50,
    "diffHunk" : "@@ -1,1 +71,75 @@\t\t\treturn \"\", fmt.Errorf(\"error parsing `ControlPlaneEndpoint` port value `%s`: %s\", portStr, err.Error())\n\t\t}\n\t\tport = int32(portInt)\n\t\tfmt.Println(\"[endpoint] WARNING: specifying a port for `ControlPlaneEndpoint` overrides `BindPort`\")\n\t} else {"
  }
]