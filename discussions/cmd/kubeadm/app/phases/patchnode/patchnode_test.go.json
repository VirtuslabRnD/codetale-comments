[
  {
    "id" : "7493b4b0-134e-4b11-8bd8-d957873d5fec",
    "prId" : 91158,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/91158#pullrequestreview-413676916",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "445507ac-3895-428d-b2f1-8a4dcece6dc1",
        "parentId" : null,
        "authorId" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "body" : "ideally the test should have cases where the error is expected, for example if the node does not exist, PatchNode would fail:\r\nhttps://github.com/kubernetes/kubernetes/blob/323f34858de18b862d43c40b2cced65ad8e24052/cmd/kubeadm/app/util/apiclient/idempotency.go#L314\r\n\r\nthe problem with such a test is that we don't want the test to run for 2 minutes:\r\nhttps://github.com/kubernetes/kubernetes/blob/89ba90573f163ee3452b526f30348a035d54e870/cmd/kubeadm/app/constants/constants.go#L183\r\n",
        "createdAt" : "2020-05-17T19:59:03Z",
        "updatedAt" : "2020-05-18T17:07:42Z",
        "lastEditedBy" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "tags" : [
        ]
      },
      {
        "id" : "18bd84a5-31a7-4d29-8ef8-39baf100742e",
        "parentId" : "445507ac-3895-428d-b2f1-8a4dcece6dc1",
        "authorId" : "10b980d8-480f-46e9-a3a3-bfe3d3c8e791",
        "body" : "Right. If the node doesn't exist the test would time out. So are you mostly just thinking out loud or do we want to come up with a solution for this as part of this PR?\r\nOther than this comment, I have addressed everything else and pushed up a commit.",
        "createdAt" : "2020-05-18T00:12:34Z",
        "updatedAt" : "2020-05-18T17:07:42Z",
        "lastEditedBy" : "10b980d8-480f-46e9-a3a3-bfe3d3c8e791",
        "tags" : [
        ]
      },
      {
        "id" : "3bcfed36-9295-4a8c-9029-4cd0f0cf1a93",
        "parentId" : "445507ac-3895-428d-b2f1-8a4dcece6dc1",
        "authorId" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "body" : "yes, thinking out loud. it's out of scope for this PR to make the functions better for unit testing, so let's not touch AnnotateCRISocket and PatchNode(Once) for now.",
        "createdAt" : "2020-05-18T14:58:44Z",
        "updatedAt" : "2020-05-18T17:07:42Z",
        "lastEditedBy" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "tags" : [
        ]
      }
    ],
    "commit" : "21a1d1d179ae117158b89f3045d4a002e6b9f24d",
    "line" : 57,
    "diffHunk" : "@@ -1,1 +55,59 @@\t\t\tnewCRISocketAnnotation:     \"/run/containerd/containerd.sock\",\n\t\t\texpectedPatch:              `{\"metadata\":{\"annotations\":{\"kubeadm.alpha.kubernetes.io/cri-socket\":\"/run/containerd/containerd.sock\"}}}`,\n\t\t},\n\t}\n"
  }
]