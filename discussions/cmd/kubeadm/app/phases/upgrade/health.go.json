[
  {
    "id" : "9c7cd24b-ce60-4df7-bb1e-27341933328b",
    "prId" : 81319,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/81319#pullrequestreview-321514738",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d9242466-838d-4a35-a081-9721298955f7",
        "parentId" : null,
        "authorId" : "cccc7bed-95f4-42a9-83ef-6ba1a4dca7ec",
        "body" : "+1, we can nuke deletions and instead have the TTL controller do this. A generated name and a TTL that is twice the timeout we wait here should be OK.\r\nBut, as you said, it's still in alpha...",
        "createdAt" : "2019-11-22T12:53:22Z",
        "updatedAt" : "2019-11-22T16:04:59Z",
        "lastEditedBy" : "cccc7bed-95f4-42a9-83ef-6ba1a4dca7ec",
        "tags" : [
        ]
      }
    ],
    "commit" : "906d3159b120ed56c0ebc89e50ecb0cfa9533079",
    "line" : 169,
    "diffHunk" : "@@ -1,1 +169,173 @@\n\t// Waiting and manually deleteing the Job is a workaround to not enabling the TTL controller.\n\t// TODO: refactor this if the TTL controller is enabled in kubeadm once it goes Beta.\n\n\t// Wait for the Job to complete"
  },
  {
    "id" : "4407e43f-f513-42ec-81fd-7b94b9a9df4c",
    "prId" : 81319,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/81319#pullrequestreview-321514738",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1152fe1d-56b1-4576-a2e7-c5e67d4c3a97",
        "parentId" : null,
        "authorId" : "cccc7bed-95f4-42a9-83ef-6ba1a4dca7ec",
        "body" : "As long as this is done by `kubeadm upgrade apply` I am fine with it, but if this is to be called by other actions as well, it would be necessary to convert it to a watch.",
        "createdAt" : "2019-11-22T12:54:36Z",
        "updatedAt" : "2019-11-22T16:04:59Z",
        "lastEditedBy" : "cccc7bed-95f4-42a9-83ef-6ba1a4dca7ec",
        "tags" : [
        ]
      }
    ],
    "commit" : "906d3159b120ed56c0ebc89e50ecb0cfa9533079",
    "line" : 172,
    "diffHunk" : "@@ -1,1 +172,176 @@\n\t// Wait for the Job to complete\n\terr = wait.PollImmediate(time.Second*1, timeout, func() (bool, error) {\n\t\tjob, err := client.BatchV1().Jobs(ns).Get(jobName, metav1.GetOptions{})\n\t\tif err != nil {"
  },
  {
    "id" : "5763676c-5e0a-4206-bcbe-00cba5866268",
    "prId" : 81319,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/81319#pullrequestreview-323161644",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "16bd8345-8fa0-41b4-a085-cadb0472232f",
        "parentId" : null,
        "authorId" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "body" : "had to add this.\r\n\r\nthe dynamic client fails when trying to get batch/v1 Job here:\r\nhttps://github.com/kubernetes/kubernetes/blob/fa1ca34550b70b017234099a5d469fd99e7eed0d/cmd/kubeadm/app/util/apiclient/clientbacked_dryrun.go#L77\r\n\r\ni think we should stop using the dynamic client for dryrun, but this is a much larger refactor.\r\nuntil then we have to skip the logic in this preflight check on dryrun.\r\n",
        "createdAt" : "2019-11-22T16:08:28Z",
        "updatedAt" : "2019-11-22T16:08:28Z",
        "lastEditedBy" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "tags" : [
        ]
      },
      {
        "id" : "eeb06e77-408c-4baa-b266-bb32e51cc481",
        "parentId" : "16bd8345-8fa0-41b4-a085-cadb0472232f",
        "authorId" : "cccc7bed-95f4-42a9-83ef-6ba1a4dca7ec",
        "body" : "+1 we can have a backlog issue for this so an eager contributor can try it.",
        "createdAt" : "2019-11-26T17:30:51Z",
        "updatedAt" : "2019-11-26T17:31:17Z",
        "lastEditedBy" : "cccc7bed-95f4-42a9-83ef-6ba1a4dca7ec",
        "tags" : [
        ]
      }
    ],
    "commit" : "906d3159b120ed56c0ebc89e50ecb0cfa9533079",
    "line" : 99,
    "diffHunk" : "@@ -1,1 +102,106 @@\n\t// If client.Discovery().RESTClient() is nil, the fake client is used.\n\t// Return early because the kubeadm dryrun dynamic client only handles the core/v1 GroupVersion.\n\tif client.Discovery().RESTClient() == nil {\n\t\tfmt.Printf(\"[dryrun] Would create the Job %q in namespace %q and wait until it completes\\n\", jobName, ns)"
  }
]