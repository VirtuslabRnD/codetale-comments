[
  {
    "id" : "fd96f670-b355-40fd-897d-0fff4035518c",
    "prId" : 73907,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/73907#pullrequestreview-203210770",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "63fbbb72-7db2-4361-8ab1-5c93eef8c55e",
        "parentId" : null,
        "authorId" : "8a27151d-3530-4221-90e8-48b3a85cba37",
        "body" : "Please consider adding a Description, e.g. `Proxy for managing TTL for the kubeadm-certs secret`",
        "createdAt" : "2019-02-13T13:52:32Z",
        "updatedAt" : "2019-02-19T05:52:47Z",
        "lastEditedBy" : "8a27151d-3530-4221-90e8-48b3a85cba37",
        "tags" : [
        ]
      }
    ],
    "commit" : "79fd5f25a775d917189113a1da5c7c74a46db06f",
    "line" : 66,
    "diffHunk" : "@@ -1,1 +64,68 @@\t\t\tDuration: kubeadmconstants.DefaultCertTokenDuration,\n\t\t},\n\t}}\n\n\tif err := nodebootstraptokenphase.CreateNewTokens(client, tokens); err != nil {"
  },
  {
    "id" : "517ff6e1-5f87-4770-9f3e-477a28cf58ec",
    "prId" : 73907,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/73907#pullrequestreview-203269769",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d3d56789-a405-4c52-9b10-0f85a2fd51b7",
        "parentId" : null,
        "authorId" : "8a27151d-3530-4221-90e8-48b3a85cba37",
        "body" : "Please consider if to check existence before calling `loadAndEncryptCert` and to silently move on only if certificate authority key is missing, while error out in all the other cases.",
        "createdAt" : "2019-02-13T13:56:04Z",
        "updatedAt" : "2019-02-19T05:52:47Z",
        "lastEditedBy" : "8a27151d-3530-4221-90e8-48b3a85cba37",
        "tags" : [
        ]
      },
      {
        "id" : "90df892b-b0d6-4ed6-bc6d-6971b6a51093",
        "parentId" : "d3d56789-a405-4c52-9b10-0f85a2fd51b7",
        "authorId" : "6746e0cc-0c52-4344-889b-945a672c83e3",
        "body" : "The only case where the CA keys should be missing is if the user has supplied (and pre-deployed) the CA certs, in which case I would expect them to be able to do the same on subsequent contol plane nodes and would not leverage the built in ability to upload certs for kubeadm. \r\n\r\nI think it is safe to fail here if either the cert or key are missing, otherwise it might cause user confusion why control plane join doesn't work if they download only the CA certs and kubeadm fails to generate any missing server/client certificates. Another option is to detect that condition and skip the Upload phase with a warning for the user.",
        "createdAt" : "2019-02-13T14:46:37Z",
        "updatedAt" : "2019-02-19T05:52:47Z",
        "lastEditedBy" : "6746e0cc-0c52-4344-889b-945a672c83e3",
        "tags" : [
        ]
      },
      {
        "id" : "2297ec3b-179a-468b-8f38-4408acabb229",
        "parentId" : "d3d56789-a405-4c52-9b10-0f85a2fd51b7",
        "authorId" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "body" : "i think i agree with @detiber .\r\ni'm pretty sure we decided to overwrite existing certs if the user requests them on join, but also for the upload we might want to only upload if all of them exist and error if one of them is missing?\r\n\r\n@fabriziopandini are you seeing another special case?\r\n\r\n> and to silently move on only if certificate authority key is missing\r\n\r\neither way, it doesn't hurt us to add some sort of a message.\r\n",
        "createdAt" : "2019-02-13T15:03:30Z",
        "updatedAt" : "2019-02-19T05:52:47Z",
        "lastEditedBy" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "tags" : [
        ]
      },
      {
        "id" : "c41066ea-399e-44c9-b9b7-395c26313d02",
        "parentId" : "d3d56789-a405-4c52-9b10-0f85a2fd51b7",
        "authorId" : "8a27151d-3530-4221-90e8-48b3a85cba37",
        "body" : "Ok, let's fail fast/with a clear message to the user if we are in the external CA mode (I don't like the idea of silently move on)\r\n@yagonobre I guess we can check this condition in init data",
        "createdAt" : "2019-02-13T15:21:54Z",
        "updatedAt" : "2019-02-19T05:52:47Z",
        "lastEditedBy" : "8a27151d-3530-4221-90e8-48b3a85cba37",
        "tags" : [
        ]
      }
    ],
    "commit" : "79fd5f25a775d917189113a1da5c7c74a46db06f",
    "line" : 197,
    "diffHunk" : "@@ -1,1 +195,199 @@\tsecretData := map[string][]byte{}\n\tfor certName, certPath := range certsToUpload(cfg) {\n\t\tcert, err := loadAndEncryptCert(certPath, key)\n\t\tif err == nil || (err != nil && os.IsNotExist(err)) {\n\t\t\tsecretData[strings.Replace(certName, \"/\", \"-\", -1)] = cert"
  },
  {
    "id" : "953b2fb7-b5f9-4710-abb4-c19cb6f92e7e",
    "prId" : 73907,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/73907#pullrequestreview-203254352",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "79bdc63d-69e8-4ec9-b412-0f765e1b68d3",
        "parentId" : null,
        "authorId" : "f81960f6-a033-4403-bebf-c8ebb484e444",
        "body" : "unit tests",
        "createdAt" : "2019-02-13T15:27:18Z",
        "updatedAt" : "2019-02-19T05:52:47Z",
        "lastEditedBy" : "f81960f6-a033-4403-bebf-c8ebb484e444",
        "tags" : [
        ]
      }
    ],
    "commit" : "79fd5f25a775d917189113a1da5c7c74a46db06f",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +15,19 @@*/\n\npackage uploadcerts\n\nimport ("
  }
]