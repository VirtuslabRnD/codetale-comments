[
  {
    "id" : "e6543185-a542-46c4-9a78-8145eb6b3f64",
    "prId" : 92651,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/92651#pullrequestreview-440886016",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5440591d-134b-403b-8f70-e62999e46666",
        "parentId" : null,
        "authorId" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "body" : "should we also mention this change in the release note? i don't have good statistical context on how breaking it is, but i'm going to assume it affects larger clusters with a lot of queries?",
        "createdAt" : "2020-06-30T19:24:27Z",
        "updatedAt" : "2020-07-09T15:09:57Z",
        "lastEditedBy" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "tags" : [
        ]
      },
      {
        "id" : "7c9a8547-925f-46b2-889d-cd8aec56c169",
        "parentId" : "5440591d-134b-403b-8f70-e62999e46666",
        "authorId" : "7c932efe-83b7-4b24-aab2-9db6d920473f",
        "body" : "The limit is per instance. The larger a cluster the more CoreDNS instances... So it should not change drastically at scale in theory.  For comparison, kube-dns (via it's default dnsmasq behavior), had a limit of 150 concurrent queries.  More details [here](https://github.com/coredns/deployment/pull/233#issue-438151578). CoreDNS never had a limit before this, it would just OOM if too many queries came in. ",
        "createdAt" : "2020-06-30T20:24:01Z",
        "updatedAt" : "2020-07-09T15:09:57Z",
        "lastEditedBy" : "7c932efe-83b7-4b24-aab2-9db6d920473f",
        "tags" : [
        ]
      },
      {
        "id" : "3b3886fc-d7fe-4f83-ad55-58f08d5411e1",
        "parentId" : "5440591d-134b-403b-8f70-e62999e46666",
        "authorId" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "body" : "ok, thanks for the details.",
        "createdAt" : "2020-06-30T20:32:44Z",
        "updatedAt" : "2020-07-09T15:09:57Z",
        "lastEditedBy" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "tags" : [
        ]
      },
      {
        "id" : "bb3aaa4f-1f7d-4ea5-a346-b5ee3647a069",
        "parentId" : "5440591d-134b-403b-8f70-e62999e46666",
        "authorId" : "7c932efe-83b7-4b24-aab2-9db6d920473f",
        "body" : "Regarding release notes: CoreDNS 1.7.0 does introduce some backward incompatible changes. Notably, it makes many Prometheus metrics name changes (to bring them in line with standard Prometheus metrics naming convention).  They will be backward incompatible with existing reporting formulas that use the old metrics names.  Less critically, 1.7.0 drops support for a couple of kubernetes plugin options which had already been deprecated and ignored by CoreDNS for several releases (i.e. now instead of ignoring them, CoreDNS will exit with an unknown directive error).",
        "createdAt" : "2020-07-01T13:37:45Z",
        "updatedAt" : "2020-07-09T15:09:57Z",
        "lastEditedBy" : "7c932efe-83b7-4b24-aab2-9db6d920473f",
        "tags" : [
        ]
      },
      {
        "id" : "3a5b59b9-4cc8-4913-b6a9-00fdd52e0489",
        "parentId" : "5440591d-134b-403b-8f70-e62999e46666",
        "authorId" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "body" : "i think we should briefly mention that in the k8s release note and even link to the coredns release notes.",
        "createdAt" : "2020-07-01T13:44:12Z",
        "updatedAt" : "2020-07-09T15:09:57Z",
        "lastEditedBy" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "tags" : [
        ]
      },
      {
        "id" : "57f12edc-d4fd-4c2d-ad95-1a7c93df6f19",
        "parentId" : "5440591d-134b-403b-8f70-e62999e46666",
        "authorId" : "6f944810-c490-4e34-9792-19715a133bef",
        "body" : "Yes, Iâ€™ll update the release notes. ",
        "createdAt" : "2020-07-01T13:48:28Z",
        "updatedAt" : "2020-07-09T15:09:57Z",
        "lastEditedBy" : "6f944810-c490-4e34-9792-19715a133bef",
        "tags" : [
        ]
      }
    ],
    "commit" : "2d574a647e6c0775e0496bfbee80abcc9d92231e",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +587,591 @@    prometheus :9153\n    forward . /etc/resolv.conf {\n        max_concurrent 1000\n    }\n    cache 30"
  },
  {
    "id" : "c45a8189-5e5f-40c3-aeb8-dc871d6f415b",
    "prId" : 85108,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/85108#pullrequestreview-316453068",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ca79f2ec-567f-4be4-94b2-46dc6f4470de",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "is this a required change? will users with a custom dns config be broken if they don't make this change as well?",
        "createdAt" : "2019-11-13T17:58:10Z",
        "updatedAt" : "2019-11-13T17:58:11Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "b552f0d4-b17b-478d-878a-0795df35b57b",
        "parentId" : "ca79f2ec-567f-4be4-94b2-46dc6f4470de",
        "authorId" : "7c932efe-83b7-4b24-aab2-9db6d920473f",
        "body" : "It's not required.  It's just an improvement that reduces query failures during rolling upgrades.  The setting allows CoreDNS to complete in flight dns queries before exiting.\r\n\r\nWithout the setting, CoreDNS will not be broken.",
        "createdAt" : "2019-11-13T18:17:17Z",
        "updatedAt" : "2019-11-13T18:17:17Z",
        "lastEditedBy" : "7c932efe-83b7-4b24-aab2-9db6d920473f",
        "tags" : [
        ]
      }
    ],
    "commit" : "2544a764db6d3f1a74eb9cb53d1562c68bc54682",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +634,638 @@    errors\n    health {\n        lameduck 5s\n    }\n    kubernetes cluster.local in-addr.arpa ip6.arpa {"
  }
]