[
  {
    "id" : "dfc1b567-845e-43e7-9327-99c9498b6cc4",
    "prId" : 19426,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "594c3722-7ecf-48ad-ac25-7f1b4852330b",
        "parentId" : null,
        "authorId" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "body" : "any possibility of subpackages that need filtering?\n",
        "createdAt" : "2016-01-22T19:35:03Z",
        "updatedAt" : "2016-01-26T16:41:31Z",
        "lastEditedBy" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "tags" : [
        ]
      },
      {
        "id" : "e5d6131a-2bb6-45a0-8b6c-12df836a65f3",
        "parentId" : "594c3722-7ecf-48ad-ac25-7f1b4852330b",
        "authorId" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "body" : "This is kind of a hack until we make a decision on supporting protobuf v3 -\nthe TODO probably covers it for now.\n\nOn Fri, Jan 22, 2016 at 2:35 PM, Paul Morie notifications@github.com\nwrote:\n\n> In cmd/libs/go2idl/go-to-protobuf/protobuf/generator.go\n> https://github.com/kubernetes/kubernetes/pull/19426#discussion_r50580320\n> :\n> \n> > @@ -117,7 +123,15 @@ func isProtoable(seen map[*types.Type]bool, t *types.Type) bool {\n> >  }\n> > \n> >  func (g *genProtoIDL) Imports(c *generator.Context) (imports []string) {\n> > -   return g.imports.ImportLines()\n> > -   lines := []string{}\n> > -   // TODO: this could be expressed more cleanly\n> > -   for _, line := range g.imports.ImportLines() {\n> > -       if g.omitGogo && line == \"github.com/gogo/protobuf/gogoproto/gogo.proto\" {\n> \n> any possibility of subpackages that need filtering?\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/kubernetes/kubernetes/pull/19426/files#r50580320.\n",
        "createdAt" : "2016-01-22T20:31:53Z",
        "updatedAt" : "2016-01-26T16:41:31Z",
        "lastEditedBy" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "tags" : [
        ]
      }
    ],
    "commit" : "14a3aaf479bc0a0b54ef60523df3b6d064f15c86",
    "line" : 25,
    "diffHunk" : "@@ -1,1 +127,131 @@\t// TODO: this could be expressed more cleanly\n\tfor _, line := range g.imports.ImportLines() {\n\t\tif g.omitGogo && line == \"github.com/gogo/protobuf/gogoproto/gogo.proto\" {\n\t\t\tcontinue\n\t\t}"
  },
  {
    "id" : "312eec3b-2b7a-4c97-8754-b07fce3b6c3e",
    "prId" : 19426,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bcc320a5-e8ab-4a43-b529-8e56359b87e9",
        "parentId" : null,
        "authorId" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "body" : "Why is the additional check needed on tag?\n",
        "createdAt" : "2016-01-22T20:11:28Z",
        "updatedAt" : "2016-01-26T16:41:31Z",
        "lastEditedBy" : "498aade9-b8f0-4e29-8055-89afa6f5fcc8",
        "tags" : [
        ]
      },
      {
        "id" : "2f72c005-597e-4654-9fe0-22ec421aa97c",
        "parentId" : "bcc320a5-e8ab-4a43-b529-8e56359b87e9",
        "authorId" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "body" : "A field that has name `-` and a tag assigned is supposed to be in the\nprotobuf IDL, but not in JSON.  We have a few objects where we don't use\nthe JSON serialization because it's impossible, so we mark the field as\nignored in protobuf unless someone explicitly set a tag (previously).\n\nOn Fri, Jan 22, 2016 at 3:11 PM, Paul Morie notifications@github.com\nwrote:\n\n> In cmd/libs/go2idl/go-to-protobuf/protobuf/generator.go\n> https://github.com/kubernetes/kubernetes/pull/19426#discussion_r50584783\n> :\n> \n> > @@ -526,7 +560,7 @@ func membersToFields(locator ProtobufLocator, t *types.Type, localPackage types.\n> >             if len(field.Name) == 0 && len(parts[0]) != 0 {\n> >                 field.Name = parts[0]\n> >             }\n> > -           if field.Name == \"-\" {\n> > -           if field.Tag == -1 && field.Name == \"-\" {\n> \n> Why is the additional check needed on tag?\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/kubernetes/kubernetes/pull/19426/files#r50584783.\n",
        "createdAt" : "2016-01-22T20:33:03Z",
        "updatedAt" : "2016-01-26T16:41:31Z",
        "lastEditedBy" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "tags" : [
        ]
      }
    ],
    "commit" : "14a3aaf479bc0a0b54ef60523df3b6d064f15c86",
    "line" : 155,
    "diffHunk" : "@@ -1,1 +552,556 @@\t\t\t\tfield.Name = parts[0]\n\t\t\t}\n\t\t\tif field.Tag == -1 && field.Name == \"-\" {\n\t\t\t\tcontinue\n\t\t\t}"
  }
]