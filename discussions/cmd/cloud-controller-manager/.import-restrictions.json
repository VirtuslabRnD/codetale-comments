[
  {
    "id" : "2a180b87-94bb-463b-af16-4a11794d80f4",
    "prId" : 98210,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/98210#pullrequestreview-575798829",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cf7fd4f3-2f68-44a4-826b-467e5df90fcf",
        "parentId" : null,
        "authorId" : "7aca96c2-45d7-4567-99be-0323d7556c55",
        "body" : "When we talked to @liggitt about these changes, one of the things which was brought up was clearly delineating the sample (what we expect cloud providers to copy) from the example (showing how to extend the sample to do things like add new controllers). This seems to emphasize the importance of separating the sample from the example. This *only* belongs in the example and should not be in the sample.",
        "createdAt" : "2021-01-25T20:22:19Z",
        "updatedAt" : "2021-03-02T21:24:01Z",
        "lastEditedBy" : "7aca96c2-45d7-4567-99be-0323d7556c55",
        "tags" : [
        ]
      },
      {
        "id" : "7a779ba8-df5b-415e-9eb5-e03219e70dd6",
        "parentId" : "cf7fd4f3-2f68-44a4-826b-467e5df90fcf",
        "authorId" : "7aca96c2-45d7-4567-99be-0323d7556c55",
        "body" : "Seems like we should have a README.md file in cmd/cloud-controller-manager which clearly states that this directory is an example (POC) of using the CCM extension mechanisms. Further that new cloud providers should copy the CCM from k8s.io/cloud-provider/sample/basic_main.go. Possibly even basic instructions for doing this.",
        "createdAt" : "2021-01-25T20:27:48Z",
        "updatedAt" : "2021-03-02T21:24:01Z",
        "lastEditedBy" : "7aca96c2-45d7-4567-99be-0323d7556c55",
        "tags" : [
        ]
      },
      {
        "id" : "afabb02e-e721-491b-8e8d-81d6a2251bb9",
        "parentId" : "cf7fd4f3-2f68-44a4-826b-467e5df90fcf",
        "authorId" : "70bad77d-dd09-4ce9-a4ae-89ec23225e81",
        "body" : "Added README",
        "createdAt" : "2021-01-25T20:53:49Z",
        "updatedAt" : "2021-03-02T21:24:01Z",
        "lastEditedBy" : "70bad77d-dd09-4ce9-a4ae-89ec23225e81",
        "tags" : [
        ]
      }
    ],
    "commit" : "408258c6d5ae07610eca39f991ee81853350c1b8",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +2,6 @@  - selectorRegexp: k8s[.]io/kubernetes\n    allowedPrefixes:\n      - k8s.io/kubernetes/cmd/kube-controller-manager/app/options\n      - k8s.io/kubernetes/cmd/kube-controller-manager/app/config\n      - k8s.io/kubernetes/pkg/api/legacyscheme"
  },
  {
    "id" : "145d16b0-4ce5-4cd0-8aab-06744e078e5c",
    "prId" : 93764,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/93764#pullrequestreview-525366630",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "db64f18b-308e-42af-be53-ccc00da4c5c4",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "was adding these back intentional or a bad rebase?",
        "createdAt" : "2020-11-05T19:00:40Z",
        "updatedAt" : "2020-11-06T10:42:59Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "6223c037-070b-4202-a3cb-3a13092a912f",
        "parentId" : "db64f18b-308e-42af-be53-ccc00da4c5c4",
        "authorId" : "70bad77d-dd09-4ce9-a4ae-89ec23225e81",
        "body" : "intentional. This is indirectly imported by `k8s.io/kubernetes/pkg/controller/testutil` -> `node_ipam_controller_test` in `k8s.io/kubernetes/pkg/controller/nodeipam'.",
        "createdAt" : "2020-11-05T19:46:18Z",
        "updatedAt" : "2020-11-06T10:42:59Z",
        "lastEditedBy" : "70bad77d-dd09-4ce9-a4ae-89ec23225e81",
        "tags" : [
        ]
      },
      {
        "id" : "abebaf26-3b42-4ae2-b9c1-07cff1074458",
        "parentId" : "db64f18b-308e-42af-be53-ccc00da4c5c4",
        "authorId" : "70bad77d-dd09-4ce9-a4ae-89ec23225e81",
        "body" : "I could have a follow up PR to put the samples(like nodeIpamController) in its own directory and also split out the base/vanilla version from the sample showing usage of the extensions as mentioned above. In this way the .import-restrictions file might look better and make less confusion for cloud providers to follow. ",
        "createdAt" : "2020-11-05T19:59:13Z",
        "updatedAt" : "2020-11-06T10:42:59Z",
        "lastEditedBy" : "70bad77d-dd09-4ce9-a4ae-89ec23225e81",
        "tags" : [
        ]
      },
      {
        "id" : "1b9000ea-2e61-41fc-82ae-f612facd629f",
        "parentId" : "db64f18b-308e-42af-be53-ccc00da4c5c4",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "The changes under staging look fine to me.\r\n\r\nI'm having trouble understanding the current status/consumers and goals for each of the following:\r\n\r\n1. current `cloud-controller-manager` command / binary (cmd/cloud-controller-manager)\r\n    * is this included in current releases or image manifests built/pushed? are there consumers of this today?\r\n2. ideal minimal example `main()`\r\n    * I expected this to live in staging `k8s.io/cloud-provider` with no k8s.io/kubernetes dependencies\r\n3. an example that stitches in node_ipam to the minimal example (either by moving out node_ipam or by living in k8s.io/kubernetes)\r\n\r\nModifying the existing `main()` to add node_ipam without first extracting the minimal k8s.io/kubernetes-free one is making the path to the minimal on harder to see. Is that still the plan?",
        "createdAt" : "2020-11-05T22:18:43Z",
        "updatedAt" : "2020-11-06T22:03:59Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "f18d25d6-8fb2-4335-8f40-4748ee18035a",
        "parentId" : "db64f18b-308e-42af-be53-ccc00da4c5c4",
        "authorId" : "7aca96c2-45d7-4567-99be-0323d7556c55",
        "body" : "1.a) As a fast follow it might be nice to split the binary. Have a vanilla binary with none of the extensions in use which a cloud provider could copy and modify to get started. A sample which shows how to use each of the extension mechanisms. I think the vanilla should be here and the sample under a sample sub directory?\r\n\r\n1.b) The CCM in K/K is not included in any releases but it is built to ensure it remains buildable. It is forked and modified into various other repos where the modified version is released. These changes should allow the cloud providers to just depend on libraries, no more forking needed. \r\n\r\n2.a) +1, see the fast follow suggestion above. \r\n\r\n2.b) +Alot, if we break the sample into its own directory, that should allow the base version to have no K8s.io/kubernetes dependencies. More importantly we can then enforce that the base version have no K8s.io/kubernetes dependencies.\r\n\r\n3) +1",
        "createdAt" : "2020-11-06T17:45:48Z",
        "updatedAt" : "2020-11-06T17:45:48Z",
        "lastEditedBy" : "7aca96c2-45d7-4567-99be-0323d7556c55",
        "tags" : [
        ]
      }
    ],
    "commit" : "895a0a8d5efa2e0533ef048e9f9ba0d505d3250c",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +2,6 @@  - selectorRegexp: k8s[.]io/kubernetes\n    allowedPrefixes:\n      - k8s.io/kubernetes/pkg/api/legacyscheme\n      - k8s.io/kubernetes/pkg/api/service\n      - k8s.io/kubernetes/pkg/api/v1/pod"
  }
]