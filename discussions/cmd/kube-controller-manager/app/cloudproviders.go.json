[
  {
    "id" : "c5ea4507-972f-48c5-b7c0-8d4014c75e82",
    "prId" : 100136,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/100136#pullrequestreview-658130613",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "13e6296e-bbf7-41ec-af15-c35d1ff5e772",
        "parentId" : null,
        "authorId" : "7aca96c2-45d7-4567-99be-0323d7556c55",
        "body" : "Might be nice to reference https://github.com/kubernetes/kubernetes/tree/master/staging/src/k8s.io/cloud-provider/sample as the mechanism to move forward here.",
        "createdAt" : "2021-05-12T16:38:53Z",
        "updatedAt" : "2021-05-12T16:38:54Z",
        "lastEditedBy" : "7aca96c2-45d7-4567-99be-0323d7556c55",
        "tags" : [
        ]
      }
    ],
    "commit" : "5d57b3794c1a08b707d8ac6857bcb93cdd4975f0",
    "line" : 18,
    "diffHunk" : "@@ -1,1 +39,43 @@\t\tcloudprovider.DisableWarningForProvider(cloudProvider)\n\t\treturn nil, ExternalLoops, fmt.Errorf(\n\t\t\t\"cloud provider %q was specified, but built-in cloud providers are disabled. Please set --cloud-provider=external and migrate to an external cloud provider\",\n\t\t\tcloudProvider)\n\t}"
  },
  {
    "id" : "7ff504ea-4d2c-4eef-b918-9237c00749ae",
    "prId" : 100136,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/100136#pullrequestreview-662346104",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "88a46346-8417-447a-bd1b-65e2b4ce1502",
        "parentId" : null,
        "authorId" : "fa477146-9a47-4754-b38c-de8062e65e13",
        "body" : "Why doesn't the cloud-controller-manager also have a block like this?",
        "createdAt" : "2021-05-17T15:43:42Z",
        "updatedAt" : "2021-05-17T15:43:43Z",
        "lastEditedBy" : "fa477146-9a47-4754-b38c-de8062e65e13",
        "tags" : [
        ]
      },
      {
        "id" : "5b146638-eeaf-407a-9c85-a23f5b866a9e",
        "parentId" : "88a46346-8417-447a-bd1b-65e2b4ce1502",
        "authorId" : "f0d74c44-88a9-4517-b04d-d11da56c6036",
        "body" : "That's a good question. @cheftako @andrewsykim, should this FeatureGate also disable cloud providers in depricated in-tree CCM? Enhancement only covered KAPI, KCM and Kubelet - https://github.com/kubernetes/enhancements/pull/2443/files#diff-9df64bb76071963721a9e1df8a7c7a4e838d96772d8f1c0951d2d8bb9246608cR117",
        "createdAt" : "2021-05-17T15:52:59Z",
        "updatedAt" : "2021-05-17T15:52:59Z",
        "lastEditedBy" : "f0d74c44-88a9-4517-b04d-d11da56c6036",
        "tags" : [
        ]
      },
      {
        "id" : "a25228b0-4e79-4883-8786-3a5e5031ac13",
        "parentId" : "88a46346-8417-447a-bd1b-65e2b4ce1502",
        "authorId" : "6dd71efb-88b1-4bb0-b30a-0df658362f14",
        "body" : "cloud-controller-manager in the k/k repo is just a reference example used by external cloud providers, so it shouldn't have to check this feature gate",
        "createdAt" : "2021-05-17T15:55:19Z",
        "updatedAt" : "2021-05-17T15:55:19Z",
        "lastEditedBy" : "6dd71efb-88b1-4bb0-b30a-0df658362f14",
        "tags" : [
        ]
      },
      {
        "id" : "742437f6-9490-4427-8923-da5b15e8a127",
        "parentId" : "88a46346-8417-447a-bd1b-65e2b4ce1502",
        "authorId" : "7aca96c2-45d7-4567-99be-0323d7556c55",
        "body" : "The CCM's job is to host cloud providers. The flag is a way to disable the cloud provider from the places we intend to remove the cloud provider code. So I believe the flag should be checked in the KAS, the KCM and the Kubelet. It should not be checked in the CCM and in part that is ok, because as Andrew points out this is a reference implementation and not shipped with K8s. The actual implementations should not use it either and I do not want to accidentally have a Cloud Provider pick up that flag.",
        "createdAt" : "2021-05-18T16:53:14Z",
        "updatedAt" : "2021-05-18T16:53:39Z",
        "lastEditedBy" : "7aca96c2-45d7-4567-99be-0323d7556c55",
        "tags" : [
        ]
      }
    ],
    "commit" : "5d57b3794c1a08b707d8ac6857bcb93cdd4975f0",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +36,40 @@\tvar err error\n\n\tif utilfeature.DefaultFeatureGate.Enabled(features.DisableCloudProviders) && cloudprovider.IsDeprecatedInternal(cloudProvider) {\n\t\tcloudprovider.DisableWarningForProvider(cloudProvider)\n\t\treturn nil, ExternalLoops, fmt.Errorf("
  },
  {
    "id" : "63e891ec-de44-4a0a-ba9e-531d0f98da9c",
    "prId" : 77312,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/77312#pullrequestreview-234017855",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fda0d5c4-c775-48fb-814f-c554e8432789",
        "parentId" : null,
        "authorId" : "05637862-b60e-403e-8519-09d1b3f0c9c2",
        "body" : "why discard  condition` cloud != nil` ?",
        "createdAt" : "2019-05-05T02:25:58Z",
        "updatedAt" : "2019-05-06T14:41:37Z",
        "lastEditedBy" : "05637862-b60e-403e-8519-09d1b3f0c9c2",
        "tags" : [
        ]
      },
      {
        "id" : "7e4f33b0-7ef6-4a3e-a9c1-e7930d820788",
        "parentId" : "fda0d5c4-c775-48fb-814f-c554e8432789",
        "authorId" : "01793168-ae0e-4060-bac2-300bf31a5c8c",
        "body" : "thanks for catching this, fixed",
        "createdAt" : "2019-05-06T14:41:57Z",
        "updatedAt" : "2019-05-06T14:41:57Z",
        "lastEditedBy" : "01793168-ae0e-4060-bac2-300bf31a5c8c",
        "tags" : [
        ]
      }
    ],
    "commit" : "9327c4bbbcd3e0958f376c366e8d9aa30102fa98",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +51,55 @@\tif cloud != nil && !cloud.HasClusterID() {\n\t\tif allowUntaggedCloud {\n\t\t\tklog.Warning(\"detected a cluster without a ClusterID.  A ClusterID will be required in the future.  Please tag your cluster to avoid any future issues\")\n\t\t} else {\n\t\t\treturn nil, loopMode, fmt.Errorf(\"no ClusterID Found.  A ClusterID is required for the cloud provider to function properly.  This check can be bypassed by setting the allow-untagged-cloud option\")"
  },
  {
    "id" : "25ab4347-339a-4a98-8cc8-4f9cadeef1c5",
    "prId" : 59568,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/59568#pullrequestreview-95061988",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "17149a9c-4979-4bea-a520-dee172bb8cd4",
        "parentId" : null,
        "authorId" : "fa477146-9a47-4754-b38c-de8062e65e13",
        "body" : "huh, didn't see this coming.  I'm really glad this got extracted.",
        "createdAt" : "2018-02-08T12:56:42Z",
        "updatedAt" : "2018-02-08T13:13:16Z",
        "lastEditedBy" : "fa477146-9a47-4754-b38c-de8062e65e13",
        "tags" : [
        ]
      }
    ],
    "commit" : "3d43b446c4014fbc2b0dc9a817e40c5f1ad63f51",
    "line" : 33,
    "diffHunk" : "@@ -1,1 +31,35 @@\tallowUntaggedCloud bool, sharedInformers informers.SharedInformerFactory) (cloudprovider.Interface, ControllerLoopMode, error) {\n\tvar cloud cloudprovider.Interface\n\tvar loopMode ControllerLoopMode\n\tvar err error\n\tif cloudprovider.IsExternal(cloudProvider) {"
  }
]