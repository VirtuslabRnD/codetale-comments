[
  {
    "id" : "e110503b-02d3-477b-86a3-7b1b251d2fef",
    "prId" : 1364,
    "prUrl" : "https://github.com/scala-native/scala-native/pull/1364#pullrequestreview-165709891",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "560286e3-a5e3-4ffa-ae50-9b55f17a9e0d",
        "parentId" : null,
        "authorId" : "0f96d83b-618e-4d06-9aeb-e1d46fa92077",
        "body" : "I don't think we need timestamp_ns at all, mark and sweep times and collection # are more than sufficient on their own.",
        "createdAt" : "2018-10-17T14:19:32Z",
        "updatedAt" : "2018-10-27T11:19:35Z",
        "lastEditedBy" : "0f96d83b-618e-4d06-9aeb-e1d46fa92077",
        "tags" : [
        ]
      },
      {
        "id" : "b7a8fea0-dfe4-42d5-a23e-de3106ce941d",
        "parentId" : "560286e3-a5e3-4ffa-ae50-9b55f17a9e0d",
        "authorId" : "0f96d83b-618e-4d06-9aeb-e1d46fa92077",
        "body" : "In fact collection # is redundant as well, it can be trivially recomputed as line number in the output file.",
        "createdAt" : "2018-10-17T14:30:33Z",
        "updatedAt" : "2018-10-27T11:19:35Z",
        "lastEditedBy" : "0f96d83b-618e-4d06-9aeb-e1d46fa92077",
        "tags" : [
        ]
      },
      {
        "id" : "0fc2ad78-6cb9-4cce-9a5c-e1fb25432949",
        "parentId" : "560286e3-a5e3-4ffa-ae50-9b55f17a9e0d",
        "authorId" : "c7f8a536-27a6-425a-976a-297266655d25",
        "body" : "I would rather keep these two.\r\n\r\nYes, when calculating aggregates for benchmarks, `collection #` and `timestamp` are redundant. However, I wanted to see/show the difference between a few large collections and many smaller ones by using the timestamps.\r\n\r\nI also considered how useful it may be for diagnostics. Timestamps are important as they allow correlating other events. `collection #` allows getting a piece of the file and still making sense what's happening. The output file is append mode, so getting the `collection #` from the line number can be not so straight forward.",
        "createdAt" : "2018-10-17T15:35:33Z",
        "updatedAt" : "2018-10-27T11:19:35Z",
        "lastEditedBy" : "c7f8a536-27a6-425a-976a-297266655d25",
        "tags" : [
        ]
      },
      {
        "id" : "f14e46b5-4dd2-4914-960f-f4c9856e6130",
        "parentId" : "560286e3-a5e3-4ffa-ae50-9b55f17a9e0d",
        "authorId" : "0f96d83b-618e-4d06-9aeb-e1d46fa92077",
        "body" : "Timestamp is a poor substitute for this as you'd want to correlate measurements with the iterations of the benchmark for it to be meaningful. Mutator time can be different as well, making the relative comparisons based on timestamps to be completely off. ",
        "createdAt" : "2018-10-17T15:56:20Z",
        "updatedAt" : "2018-10-27T11:19:35Z",
        "lastEditedBy" : "0f96d83b-618e-4d06-9aeb-e1d46fa92077",
        "tags" : [
        ]
      },
      {
        "id" : "feed0542-29c9-4b31-98ad-74e3c542a0aa",
        "parentId" : "560286e3-a5e3-4ffa-ae50-9b55f17a9e0d",
        "authorId" : "0f96d83b-618e-4d06-9aeb-e1d46fa92077",
        "body" : "It's also safe to assume that append case effectively never happens. If someone cares about more separation of data they can pass a different file on every invocation.",
        "createdAt" : "2018-10-17T15:57:33Z",
        "updatedAt" : "2018-10-27T11:19:35Z",
        "lastEditedBy" : "0f96d83b-618e-4d06-9aeb-e1d46fa92077",
        "tags" : [
        ]
      }
    ],
    "commit" : "f7633cbd8aa831f3412a552fb169f78e57f264a0",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +13,17 @@    uint64_t index = stats->collections % STATS_MEASUREMENTS;\n    stats->mark_time_ns[index] = sweep_start_ns - start_ns;\n    stats->sweep_time_ns[index] = end_ns - sweep_start_ns;\n    stats->collections += 1;\n    if (stats->collections % STATS_MEASUREMENTS == 0) {"
  }
]