[
  {
    "id" : "f12a2c20-f2b1-466f-8254-1318eb5ec0a1",
    "prId" : 737,
    "prUrl" : "https://github.com/scala-native/scala-native/pull/737#pullrequestreview-40247634",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e02aad81-ace8-4630-b157-ae656c0928c5",
        "parentId" : null,
        "authorId" : "74865863-2a26-4e12-9b40-7c8011c54eb1",
        "body" : "Why do we need `memset` here ? Does `GC_malloc_atomic` not guarantee zeroed memory ?",
        "createdAt" : "2017-05-25T09:40:40Z",
        "updatedAt" : "2017-05-25T13:42:41Z",
        "lastEditedBy" : "74865863-2a26-4e12-9b40-7c8011c54eb1",
        "tags" : [
        ]
      },
      {
        "id" : "2d14e501-e807-4bfe-a471-0f3c3c5d24fa",
        "parentId" : "e02aad81-ace8-4630-b157-ae656c0928c5",
        "authorId" : "0f96d83b-618e-4d06-9aeb-e1d46fa92077",
        "body" : "It doesn't! From [the docs](http://www.hboehm.info/gc/gcinterface.html):\r\n```\r\nvoid * GC_MALLOC_ATOMIC(size_t nbytes)\r\n\r\nAllocates nbytes of storage. Requires (amortized) time proportional to nbytes. \r\nThe resulting object will be automatically deallocated when unreferenced. \r\nThe client promises that the resulting object will never contain any pointers. \r\nThe memory is not cleared. ...\r\n```",
        "createdAt" : "2017-05-25T09:48:49Z",
        "updatedAt" : "2017-05-25T13:42:41Z",
        "lastEditedBy" : "0f96d83b-618e-4d06-9aeb-e1d46fa92077",
        "tags" : [
        ]
      },
      {
        "id" : "ae3a134b-47e6-42ae-b357-7258508a8367",
        "parentId" : "e02aad81-ace8-4630-b157-ae656c0928c5",
        "authorId" : "74865863-2a26-4e12-9b40-7c8011c54eb1",
        "body" : "Interesting ! This means that we were using it wrong until now...",
        "createdAt" : "2017-05-25T09:52:23Z",
        "updatedAt" : "2017-05-25T13:42:41Z",
        "lastEditedBy" : "74865863-2a26-4e12-9b40-7c8011c54eb1",
        "tags" : [
        ]
      },
      {
        "id" : "7e5eca83-2d3c-45af-a0da-a1abd85698b2",
        "parentId" : "e02aad81-ace8-4630-b157-ae656c0928c5",
        "authorId" : "0f96d83b-618e-4d06-9aeb-e1d46fa92077",
        "body" : "Previously it was zeroed in https://github.com/scala-native/scala-native/pull/737/files#diff-738f06a13eea511f93ea2f7c590e0320L81. The only difference is that logic has moved to C code now.",
        "createdAt" : "2017-05-25T09:53:51Z",
        "updatedAt" : "2017-05-25T13:42:41Z",
        "lastEditedBy" : "0f96d83b-618e-4d06-9aeb-e1d46fa92077",
        "tags" : [
        ]
      },
      {
        "id" : "bee4a66e-ce9c-4e55-92ec-1b82ff38e7ad",
        "parentId" : "e02aad81-ace8-4630-b157-ae656c0928c5",
        "authorId" : "74865863-2a26-4e12-9b40-7c8011c54eb1",
        "body" : "I see. Makes more sense the way it's done now.",
        "createdAt" : "2017-05-25T09:58:28Z",
        "updatedAt" : "2017-05-25T13:42:41Z",
        "lastEditedBy" : "74865863-2a26-4e12-9b40-7c8011c54eb1",
        "tags" : [
        ]
      }
    ],
    "commit" : "130119fd6534e6e85143517880b921518343626a",
    "line" : 18,
    "diffHunk" : "@@ -1,1 +17,21 @@void *scalanative_alloc_atomic(void *info, size_t size) {\n    void **alloc = (void **)GC_malloc_atomic(size);\n    memset(alloc, 0, size);\n    *alloc = info;\n    return (void *)alloc;"
  },
  {
    "id" : "d3f1472e-4727-4520-aed8-26aed9fc7598",
    "prId" : 737,
    "prUrl" : "https://github.com/scala-native/scala-native/pull/737#pullrequestreview-40244904",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1e0d57fc-f90c-45fb-8d25-c1ce1175e851",
        "parentId" : null,
        "authorId" : "0f96d83b-618e-4d06-9aeb-e1d46fa92077",
        "body" : "`alloc_atomic` is still here, left purely not to regress performance with Boehm GC. ",
        "createdAt" : "2017-05-25T09:42:22Z",
        "updatedAt" : "2017-05-25T13:42:41Z",
        "lastEditedBy" : "0f96d83b-618e-4d06-9aeb-e1d46fa92077",
        "tags" : [
        ]
      }
    ],
    "commit" : "130119fd6534e6e85143517880b921518343626a",
    "line" : 21,
    "diffHunk" : "@@ -1,1 +20,24 @@    *alloc = info;\n    return (void *)alloc;\n}\n\nvoid scalanative_collect() { GC_gcollect(); }"
  }
]