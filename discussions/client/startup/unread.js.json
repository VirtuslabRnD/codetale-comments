[
  {
    "id" : "daeaad96-d647-4d52-8214-779569ab14fa",
    "prId" : 15786,
    "prUrl" : "https://github.com/RocketChat/Rocket.Chat/pull/15786#pullrequestreview-320186142",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "baf9031b-ac28-45d8-8456-7a38fe373f49",
        "parentId" : null,
        "authorId" : "61ddb048-36d3-4039-ab51-6db005c8c855",
        "body" : "@ggazzo can you please validate if doing this find for _each_ room every time _any_ subscription changes is something heavy on the client?",
        "createdAt" : "2019-11-13T22:49:57Z",
        "updatedAt" : "2019-11-13T22:49:57Z",
        "lastEditedBy" : "61ddb048-36d3-4039-ab51-6db005c8c855",
        "tags" : [
        ]
      },
      {
        "id" : "be547f23-c9ee-4a11-88ee-b90d326765f1",
        "parentId" : "baf9031b-ac28-45d8-8456-7a38fe373f49",
        "authorId" : "9e666942-cd54-4d1b-8cc7-4188822a684b",
        "body" : "I dont think so,  but only because the collection has a index by id (and only by id)... I dont know, but this `Tracker.autorun` and fire a trigger \" for each room every time any subscription changes \" sounds weird/wrong..",
        "createdAt" : "2019-11-20T18:36:44Z",
        "updatedAt" : "2019-11-20T18:36:44Z",
        "lastEditedBy" : "9e666942-cd54-4d1b-8cc7-4188822a684b",
        "tags" : [
        ]
      }
    ],
    "commit" : "58c83d75731eaf09b452ed2dd0d80bcd03cd9957",
    "line" : 23,
    "diffHunk" : "@@ -1,1 +33,37 @@\n\t\tconst unreadCount = fetchSubscriptions().reduce((ret, subscription) => {\n\t\t\tconst room = ChatRoom.findOne({ _id: subscription.rid }, { fields: { usersCount: 1 } });\n\t\t\tfireGlobalEvent('unread-changed-by-subscription', { ...subscription, usersCount: room && room.usersCount });\n"
  }
]