[
  {
    "id" : "a93d7fd2-173b-49cb-9119-d09c1e49bdc4",
    "prId" : 1305,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f7ad1d71-2a17-4f4e-9745-9c4760938db4",
        "parentId" : null,
        "authorId" : "9fa90d9e-35b6-4e30-a9ad-59d71859a80c",
        "body" : "Could have left this is a one liner but was getting a bit long.\n",
        "createdAt" : "2015-10-30T22:19:35Z",
        "updatedAt" : "2015-10-31T18:56:00Z",
        "lastEditedBy" : "9fa90d9e-35b6-4e30-a9ad-59d71859a80c",
        "tags" : [
        ]
      },
      {
        "id" : "5a11ae35-471f-4271-90f0-573a78d905c8",
        "parentId" : "f7ad1d71-2a17-4f4e-9745-9c4760938db4",
        "authorId" : "c7074570-1c1b-4707-94e7-b3f632274c2c",
        "body" : "I would also check if [file uploads are enabled](https://github.com/RocketChat/Rocket.Chat/blob/master/packages/rocketchat-lib/settings/server/startup.coffee#L44). IMHO this rule should have higher precedence over others, and we should not allow audio records if uploads are disabled.\n",
        "createdAt" : "2015-10-31T13:03:40Z",
        "updatedAt" : "2015-10-31T18:56:00Z",
        "lastEditedBy" : "c7074570-1c1b-4707-94e7-b3f632274c2c",
        "tags" : [
        ]
      }
    ],
    "commit" : "29af18a7a66f1f4850df2b58cf7429de9c8018d1",
    "line" : null,
    "diffHunk" : "@@ -1,1 +192,196 @@\t\twavEnabled = RocketChat.settings.get(\"FileUpload_MediaTypeWhiteList\").match(wavRegex)\n\t\treturn RocketChat.settings.get('Message_AudioRecorderEnabled') and (navigator.getUserMedia? or navigator.webkitGetUserMedia?) and wavEnabled and RocketChat.settings.get('FileUpload_Enabled')\n\n\tunreadSince: ->\n\t\troom = ChatRoom.findOne(this._id, { reactive: false })"
  }
]