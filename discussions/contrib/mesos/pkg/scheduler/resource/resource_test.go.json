[
  {
    "id" : "7db0469d-33ae-45d4-b60d-50b2d45685eb",
    "prId" : 17054,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e0cbca95-7163-452e-8cd2-abaa577bfbbe",
        "parentId" : null,
        "authorId" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "body" : "is it worth adding an assertion that limit >= requested?\n",
        "createdAt" : "2015-11-10T17:15:18Z",
        "updatedAt" : "2015-11-12T15:56:18Z",
        "lastEditedBy" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "tags" : [
        ]
      },
      {
        "id" : "81938865-9198-42a8-b47a-a28ad2cf2c25",
        "parentId" : "e0cbca95-7163-452e-8cd2-abaa577bfbbe",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "We could add such a test to the podResources function. In the test it does not make much sense, because it would only test the values given by the test data.\n",
        "createdAt" : "2015-11-11T12:40:25Z",
        "updatedAt" : "2015-11-12T15:56:18Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "f76703dc-d78a-48da-a922-7dc63a493eaf",
        "parentId" : "e0cbca95-7163-452e-8cd2-abaa577bfbbe",
        "authorId" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "body" : "I guess I was thinking that it might be nice to test the invariant that is\nsupposed to be guaranteed by `podResources`: limit >= requested. Perhaps\nthat's implicit given the current set of test data.\n\nOn Wed, Nov 11, 2015 at 7:41 AM, Dr. Stefan Schimanski <\nnotifications@github.com> wrote:\n\n> In contrib/mesos/pkg/scheduler/resource/resource_test.go\n> https://github.com/kubernetes/kubernetes/pull/17054#discussion_r44528080\n> :\n> \n> > +\n> > -       tst.Logf(\"New resources container 0: request=%v limit=%v\", pod.Spec.Containers[0].Resources.Requests, pod.Spec.Containers[0].Resources.Limits)\n> > -       tst.Logf(\"New resources container 1: request=%v limit=%v\", pod.Spec.Containers[1].Resources.Requests, pod.Spec.Containers[1].Resources.Limits)\n> >   +\n> > -       assert.Equal(t.want.cpuR, float64(beforeCpuR), \"cpu request before modifiation is wrong\")\n> > -       assert.Equal(t.want.cpuL, float64(beforeCpuL), \"cpu limit before modifiation is wrong\")\n> >   +\n> > -       assert.Equal(t.want.memR, float64(beforeMemR), \"mem request before modifiation is wrong\")\n> > -       assert.Equal(t.want.memL, float64(beforeMemL), \"mem limit before modifiation is wrong\")\n> >   +\n> > -       assert.Equal(t.want.cpuR, float64(cpuR), \"cpu request is wrong\")\n> > -       assert.Equal(t.want.cpuL, float64(cpuL), \"cpu limit is wrong\")\n> >   +\n> > -       assert.Equal(t.want.memR, float64(memR), \"mem request is wrong\")\n> > -       assert.Equal(t.want.memL, float64(memL), \"mem limit is wrong\")\n> > -   }\n> \n> We could add such a test to the podResources function. In the test it does\n> not make much sense, because it would only test the values given by the\n> test data.\n> \n> â€”\n> Reply to this email directly or view it on GitHub\n> https://github.com/kubernetes/kubernetes/pull/17054/files#r44528080.\n",
        "createdAt" : "2015-11-11T14:42:36Z",
        "updatedAt" : "2015-11-12T15:56:18Z",
        "lastEditedBy" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "tags" : [
        ]
      },
      {
        "id" : "8e922190-7692-40f6-8277-7375a42640de",
        "parentId" : "e0cbca95-7163-452e-8cd2-abaa577bfbbe",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "I understand. But it isn't an invariant yet, but maybe should be.\n",
        "createdAt" : "2015-11-11T14:49:05Z",
        "updatedAt" : "2015-11-12T15:56:18Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "6ce41dd6-f81d-4707-aa03-1a35ec2c663f",
        "parentId" : "e0cbca95-7163-452e-8cd2-abaa577bfbbe",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "Or we should error out. Don't like to modify the upstream semantics of the request and limit field though.\n",
        "createdAt" : "2015-11-11T14:49:41Z",
        "updatedAt" : "2015-11-12T15:56:18Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      }
    ],
    "commit" : "a3f02cda174db1f584ebd24173b7095c9b0dd1e5",
    "line" : 112,
    "diffHunk" : "@@ -1,1 +110,114 @@\t\tassert.Equal(t.want.memR, float64(memR), \"mem request is wrong\")\n\t\tassert.Equal(t.want.memL, float64(memL), \"mem limit is wrong\")\n\t}\n}"
  }
]