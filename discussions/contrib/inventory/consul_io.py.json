[
  {
    "id" : "866065b2-0741-4f45-bdf7-44bf6564ad68",
    "prId" : 26510,
    "prUrl" : "https://github.com/ansible/ansible/pull/26510#pullrequestreview-51236733",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d926426f-7ac9-427e-9a48-da5320654f23",
        "parentId" : null,
        "authorId" : "fa0144fc-7424-474a-9ab5-059de28814b7",
        "body" : "I would suggest using\r\n\r\n``` python\r\nfrom six.moves import configparser\r\n```\r\n\r\nCurrently inventory scripts aren't real consistent about how they handle compat issues like configparser, but thats\r\nclosest to how the app code and modules do it (they use the six provided in module_utils, but that is not recommended for external inv scripts)\r\n\r\n``` python\r\nfrom ansible.module_utils.six.moves import configparser\r\n```",
        "createdAt" : "2017-07-10T17:58:39Z",
        "updatedAt" : "2017-07-20T17:03:50Z",
        "lastEditedBy" : "fa0144fc-7424-474a-9ab5-059de28814b7",
        "tags" : [
        ]
      },
      {
        "id" : "cec16dbc-4ef9-46cc-b4f2-9cc764b53512",
        "parentId" : "d926426f-7ac9-427e-9a48-da5320654f23",
        "authorId" : "54757d59-3e17-4f11-aa29-3a5549c96a58",
        "body" : "Are you asking that I refactor the entire inventory script? To be clear I was following the conventions of the existing maintainer to fix a bug that breaks the file.\r\n\r\nAs six is not not in the core projects `requirements.txt` for the ansible project I am concerned about breaking installs, while it is included in `ansible.module_utils` it is not included anywhere in `contrib/*` and will result in an unmet dependency.\r\n\r\nCan you clarify the policy on contrib Python imports?\r\n\r\nI am willing to rewrite but also am attempting to avoid unmet dependencies while also following `CODING_GUIDELINES.md` which references the try/except method for conditional runtime imports.\r\n\r\nThanks",
        "createdAt" : "2017-07-11T06:18:16Z",
        "updatedAt" : "2017-07-20T17:03:50Z",
        "lastEditedBy" : "54757d59-3e17-4f11-aa29-3a5549c96a58",
        "tags" : [
        ]
      },
      {
        "id" : "a6b87562-352a-4319-b2e9-adab584a4f68",
        "parentId" : "d926426f-7ac9-427e-9a48-da5320654f23",
        "authorId" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "body" : "`six` is [bundled with Ansible](http://docs.ansible.com/ansible/latest/dev_guide/developing_modules_python3.html#bundled-six).",
        "createdAt" : "2017-07-19T23:38:29Z",
        "updatedAt" : "2017-07-20T17:03:50Z",
        "lastEditedBy" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "tags" : [
        ]
      },
      {
        "id" : "a79d8a5e-ed0d-4733-b8d3-723044c4341c",
        "parentId" : "d926426f-7ac9-427e-9a48-da5320654f23",
        "authorId" : "54757d59-3e17-4f11-aa29-3a5549c96a58",
        "body" : "@pilou- \r\n\r\nFirst: As this will only make 2.4 it appears that the case test isn't needed and `import configparser` should be fine for the ansible 2.4 supported versions.\r\n\r\nI do want to point out that the design decision to have inventory scripts external to the controller makes it problematic to assume that `from ansible.module_utils import six` is a possibility.\r\n\r\nThere are several use cases where the generated file may be provided and generated outside of the controller context like Vagrant, or if resiliency is required against the external service registry. \r\n\r\nI admit I am being over sensitive, just because I have to have a playbook to make sure that my controllers modules work, but as only 6 out of 51 contrib/inventory scripts have `from ansible.module_utils` includes I am unwilling to add that un-tracked dependency.\r\nExample related to resilience and loose coupling.\r\n\r\nhttps://medium.com/@Pinterest_Engineering/zookeeper-resilience-at-pinterest-adfd8acf2a6b\r\n\r\nI will update and test as time allows.",
        "createdAt" : "2017-07-20T15:18:28Z",
        "updatedAt" : "2017-07-20T17:03:50Z",
        "lastEditedBy" : "54757d59-3e17-4f11-aa29-3a5549c96a58",
        "tags" : [
        ]
      }
    ],
    "commit" : "6ec34153c406afe41a3fb304b3118284fcc50893",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +138,142 @@    import configparser\nexcept ImportError:\n    import ConfigParser as configparser\n\n"
  }
]