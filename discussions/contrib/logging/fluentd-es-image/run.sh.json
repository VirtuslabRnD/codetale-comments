[
  {
    "id" : "6f7db3dd-d588-49ce-b2d5-5f0b97dc786c",
    "prId" : 1804,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "47afefbd-039c-4352-a223-f965a79b41fc",
        "parentId" : null,
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "you want \"$@\" with the quotes\n",
        "createdAt" : "2014-10-16T16:30:08Z",
        "updatedAt" : "2014-10-16T16:30:08Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      }
    ],
    "commit" : "bf2d4ebb33b3dd34bad7a17fd0f6daf5b3ce2552",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +27,31 @@# Adjust the name of the host machine for %ES_HOST%. HACK!\nsed -i -e \"s/\\%ES_HOST\\%/${OUTER_HOST}/\" /etc/td-agent/td-agent.conf\n/usr/sbin/td-agent $@"
  },
  {
    "id" : "7dbb0820-f81b-4903-9fde-9ecdbf00697b",
    "prId" : 1756,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2ba8483d-da3f-4e3b-95d1-b98a32fac514",
        "parentId" : null,
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "Comment that this is a hack until service IPs are done.\n",
        "createdAt" : "2014-10-13T18:48:22Z",
        "updatedAt" : "2014-10-13T18:56:08Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      },
      {
        "id" : "effdcb2a-a051-4065-b425-dc6f2958b9ea",
        "parentId" : "2ba8483d-da3f-4e3b-95d1-b98a32fac514",
        "authorId" : "9d07de69-76c2-43bd-9590-55d9aded200d",
        "body" : "Done.\n\nOn Mon, Oct 13, 2014 at 11:48 AM, Tim Hockin notifications@github.com\nwrote:\n\n> In contrib/logging/fluentd-es-image/run.sh:\n> \n> > +\n> > +# Copyright 2014 Google Inc. All rights reserved.\n> > +#\n> > +# Licensed under the Apache License, Version 2.0 (the \"License\");\n> > +# you may not use this file except in compliance with the License.\n> > +# You may obtain a copy of the License at\n> > +#\n> > +#     http://www.apache.org/licenses/LICENSE-2.0\n> > +#\n> > +# Unless required by applicable law or agreed to in writing, software\n> > +# distributed under the License is distributed on an \"AS IS\" BASIS,\n> > +# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n> > +# See the License for the specific language governing permissions and\n> > +# limitations under the License.\n> > +\n> > +OUTER_HOST=`tail -n 1 /outerhost | awk '{print $3}'`\n> \n> Comment that this is a hack until service IPs are done.\n> \n> â€”\n> Reply to this email directly or view it on GitHub\n> https://github.com/GoogleCloudPlatform/kubernetes/pull/1756/files#r18787182\n> .\n",
        "createdAt" : "2014-10-13T18:57:17Z",
        "updatedAt" : "2014-10-13T18:57:17Z",
        "lastEditedBy" : "9d07de69-76c2-43bd-9590-55d9aded200d",
        "tags" : [
        ]
      }
    ],
    "commit" : "d140c71a0d967382ee880b4f4f7f982082b976cf",
    "line" : null,
    "diffHunk" : "@@ -1,1 +19,23 @@# the host machine (super fragile). This is a temporary hack until\n# service IPs are done.\nOUTER_HOST=`tail -n 1 /outerhost | awk '{print $3}'`\n\n# Copy the Fluentd config file and patch it to refer to the"
  },
  {
    "id" : "be0893f7-20d3-4be7-b44a-86a6517303fe",
    "prId" : 1756,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "273d1f32-2001-44e9-ba73-b2f4e64731db",
        "parentId" : null,
        "authorId" : "6001b825-f0f9-4fc3-b624-34a076b031e1",
        "body" : "couldn't you address the host with the default gateway?\n",
        "createdAt" : "2014-10-15T00:57:24Z",
        "updatedAt" : "2014-10-15T00:57:24Z",
        "lastEditedBy" : "6001b825-f0f9-4fc3-b624-34a076b031e1",
        "tags" : [
        ]
      },
      {
        "id" : "518c5e53-224a-4243-b6d1-b12a5516f0db",
        "parentId" : "273d1f32-2001-44e9-ba73-b2f4e64731db",
        "authorId" : "6001b825-f0f9-4fc3-b624-34a076b031e1",
        "body" : "alternatively that's maybe something the kubelet could pass to all pods.\n",
        "createdAt" : "2014-10-15T00:57:47Z",
        "updatedAt" : "2014-10-15T00:57:47Z",
        "lastEditedBy" : "6001b825-f0f9-4fc3-b624-34a076b031e1",
        "tags" : [
        ]
      },
      {
        "id" : "030e8197-cce7-4912-8141-b1ff1ee50455",
        "parentId" : "273d1f32-2001-44e9-ba73-b2f4e64731db",
        "authorId" : "9d07de69-76c2-43bd-9590-55d9aded200d",
        "body" : "I don't think the default gateway works -- but I defer to @thockin \n",
        "createdAt" : "2014-10-15T01:00:55Z",
        "updatedAt" : "2014-10-15T01:00:55Z",
        "lastEditedBy" : "9d07de69-76c2-43bd-9590-55d9aded200d",
        "tags" : [
        ]
      },
      {
        "id" : "0dfb1244-69d8-49a0-99ba-c00e19d2ba4b",
        "parentId" : "273d1f32-2001-44e9-ba73-b2f4e64731db",
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "I don't think default gateway works, and no, we do NOT want pods coupling to their outer hosts.  This is a hack with a lifespan of O(weeks).\n",
        "createdAt" : "2014-10-15T03:41:51Z",
        "updatedAt" : "2014-10-15T03:41:51Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      },
      {
        "id" : "a3b17b53-d58f-4f96-a95d-9752da5ed715",
        "parentId" : "273d1f32-2001-44e9-ba73-b2f4e64731db",
        "authorId" : "6001b825-f0f9-4fc3-b624-34a076b031e1",
        "body" : "The gateway worked worked for my bootstrap hack:\nhttps://github.com/GoogleCloudPlatform/kubernetes/pull/1716/files#diff-14da3738142f38850fb7acf7aafb6f80R18\n\n@thockin when you say you don't want coupling with the outer host, can you expand a little bit more? Do you expect the ip of the kubelet managing a given pod to change during the lifetime of the container?\n",
        "createdAt" : "2014-10-15T06:52:15Z",
        "updatedAt" : "2014-10-15T06:52:15Z",
        "lastEditedBy" : "6001b825-f0f9-4fc3-b624-34a076b031e1",
        "tags" : [
        ]
      },
      {
        "id" : "705c32b1-431e-4125-9627-18d2328e87c9",
        "parentId" : "273d1f32-2001-44e9-ba73-b2f4e64731db",
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "On Tue, Oct 14, 2014 at 11:52 PM, Johan Euphrosine\nnotifications@github.com wrote:\n\n> In contrib/logging/fluentd-es-image/run.sh:\n> \n> > +# you may not use this file except in compliance with the License.\n> > +# You may obtain a copy of the License at\n> > +#\n> > +#     http://www.apache.org/licenses/LICENSE-2.0\n> > +#\n> > +# Unless required by applicable law or agreed to in writing, software\n> > +# distributed under the License is distributed on an \"AS IS\" BASIS,\n> > +# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n> > +# See the License for the specific language governing permissions and\n> > +# limitations under the License.\n> > +\n> > +# WARNING! HORRIBLE HACK! We expect /outerhost to be mapped to\n> > +# the enclosing /etc/host file so we can determine the name of\n> > +# the host machine (super fragile). This is a temporary hack until\n> > +# service IPs are done.\n> > +OUTER_HOST=`tail -n 1 /outerhost | awk '{print $3}'`\n> \n> The gateway worked worked for my bootstrap hack:\n> https://github.com/GoogleCloudPlatform/kubernetes/pull/1716/files#diff-14da3738142f38850fb7acf7aafb6f80R18\n\nInteresting - I could not make it work.  Either way it's almost moot.\nip-per-service should go in today, DNS soon after.\n\n> @thockin when you say you don't want coupling with the outer host, can you expand a little bit more? Do you expect the ip of the kubelet managing a given pod to change during the lifetime of the container?\n\nMaybe.  Consider live migration, which I know some people have started\nto make work.\n",
        "createdAt" : "2014-10-16T16:15:32Z",
        "updatedAt" : "2014-10-16T16:15:32Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      }
    ],
    "commit" : "d140c71a0d967382ee880b4f4f7f982082b976cf",
    "line" : 21,
    "diffHunk" : "@@ -1,1 +19,23 @@# the host machine (super fragile). This is a temporary hack until\n# service IPs are done.\nOUTER_HOST=`tail -n 1 /outerhost | awk '{print $3}'`\n\n# Copy the Fluentd config file and patch it to refer to the"
  },
  {
    "id" : "62c0b486-73c2-4b7b-97fa-d1e621a72eb4",
    "prId" : 1756,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "62c39312-c3bc-4717-9ff1-7b8388d5ffd4",
        "parentId" : null,
        "authorId" : "6001b825-f0f9-4fc3-b624-34a076b031e1",
        "body" : "does td-agent takes param? if yes, you might want to add $\\* or $@?\n",
        "createdAt" : "2014-10-15T00:58:30Z",
        "updatedAt" : "2014-10-15T00:58:30Z",
        "lastEditedBy" : "6001b825-f0f9-4fc3-b624-34a076b031e1",
        "tags" : [
        ]
      },
      {
        "id" : "590134f2-477a-46ea-b7d3-174f6671ea3e",
        "parentId" : "62c39312-c3bc-4717-9ff1-7b8388d5ffd4",
        "authorId" : "9d07de69-76c2-43bd-9590-55d9aded200d",
        "body" : "It does indeed take parameters. Good idea. I shall make the change.\n",
        "createdAt" : "2014-10-15T01:29:48Z",
        "updatedAt" : "2014-10-15T01:29:48Z",
        "lastEditedBy" : "9d07de69-76c2-43bd-9590-55d9aded200d",
        "tags" : [
        ]
      }
    ],
    "commit" : "d140c71a0d967382ee880b4f4f7f982082b976cf",
    "line" : 27,
    "diffHunk" : "@@ -1,1 +25,29 @@cp td-agent.conf /etc/td-agent\nsed -i -e \"s/ES_HOST/${OUTER_HOST}/\" /etc/td-agent/td-agent.conf\n/usr/sbin/td-agent"
  }
]