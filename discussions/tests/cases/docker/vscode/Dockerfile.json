[
  {
    "id" : "c73088f0-ea9d-4efc-bbb1-69c502952a3d",
    "prId" : 42431,
    "prUrl" : "https://github.com/microsoft/TypeScript/pull/42431#pullrequestreview-573926075",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "37a9ffe2-817a-495a-881d-61e1ce7b141a",
        "parentId" : null,
        "authorId" : "f7813195-22a2-4200-9f53-7aadb83a2cc9",
        "body" : "Is this working around a bug in vscode's own build? Since we clearly don't use rimraf here in the dockerfile.",
        "createdAt" : "2021-01-21T23:08:10Z",
        "updatedAt" : "2021-01-22T04:46:44Z",
        "lastEditedBy" : "f7813195-22a2-4200-9f53-7aadb83a2cc9",
        "tags" : [
        ]
      },
      {
        "id" : "85a2003b-c81d-46f1-9ac8-f7ecb11b4361",
        "parentId" : "37a9ffe2-817a-495a-881d-61e1ce7b141a",
        "authorId" : "1eec7f68-de25-4f88-827c-00769c75a2d7",
        "body" : "Yes. The `vscode` build is failing because they have a postinstall.js script that runs rimraf to clean up TypeScript files they don't need, but we're running `yarn add` for our copy of TypeScript *before* all the dependencies are installed which triggers the postinstall script. ",
        "createdAt" : "2021-01-21T23:14:51Z",
        "updatedAt" : "2021-01-21T23:14:51Z",
        "lastEditedBy" : "1eec7f68-de25-4f88-827c-00769c75a2d7",
        "tags" : [
        ]
      },
      {
        "id" : "de057d1a-22de-4c3d-97b9-d7d3c2abd3ba",
        "parentId" : "37a9ffe2-817a-495a-881d-61e1ce7b141a",
        "authorId" : "f7813195-22a2-4200-9f53-7aadb83a2cc9",
        "body" : "Does yarn have a `--ignore-scripts` equivalent we should use instead?",
        "createdAt" : "2021-01-22T00:22:32Z",
        "updatedAt" : "2021-01-22T00:22:32Z",
        "lastEditedBy" : "f7813195-22a2-4200-9f53-7aadb83a2cc9",
        "tags" : [
        ]
      },
      {
        "id" : "b82f2a8a-23db-4710-9809-9860f4bff017",
        "parentId" : "37a9ffe2-817a-495a-881d-61e1ce7b141a",
        "authorId" : "1eec7f68-de25-4f88-827c-00769c75a2d7",
        "body" : "Nope, not according to the docs for `yarn add`.",
        "createdAt" : "2021-01-22T03:27:43Z",
        "updatedAt" : "2021-01-22T03:27:44Z",
        "lastEditedBy" : "1eec7f68-de25-4f88-827c-00769c75a2d7",
        "tags" : [
        ]
      }
    ],
    "commit" : "88249505a4b8e4495487639625d6089de12f72b4",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +11,15 @@RUN yarn add typescript@/typescript.tgz\nWORKDIR /vscode/extensions\nRUN yarn add rimraf\nRUN yarn add typescript@/typescript.tgz\nWORKDIR /vscode"
  }
]