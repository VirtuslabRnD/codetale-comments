[
  {
    "id" : "258a84a1-1a25-4d0b-93c7-92745057fdb3",
    "prId" : 8264,
    "prUrl" : "https://github.com/redis/redis/pull/8264#pullrequestreview-559273842",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bc62f46b-4d97-44df-913f-036680e3ff31",
        "parentId" : null,
        "authorId" : "02e243fa-aeed-4b15-9e9e-405ca1702d7e",
        "body" : "let's put another comment with some raw description of the test, something in the lines of:\r\n- create 10k keys of 4k each\r\n- using a 200us sleep the bgsave is empirically taking about 10 seconds.\r\n- we need it to take more than some 5 seconds since redis only report COW once a second.\r\n- the test runs a few cycles in which it overrides a key, and waits to see that change reported in INFO",
        "createdAt" : "2020-12-28T20:35:30Z",
        "updatedAt" : "2021-01-07T14:03:52Z",
        "lastEditedBy" : "02e243fa-aeed-4b15-9e9e-405ca1702d7e",
        "tags" : [
        ]
      }
    ],
    "commit" : "3c2eff0282e4c760da64f520d95fcd41bc44eefa",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +209,213 @@        # using a 200us delay, the bgsave is empirically taking about 10 seconds.\n        # we need it to take more than some 5 seconds, since redis only report COW once a second.\n        r config set rdb-key-save-delay 200\n\n        # populate the db with 10k keys of 4k each"
  },
  {
    "id" : "126a7fe0-83a1-4122-a860-682278785b61",
    "prId" : 8264,
    "prUrl" : "https://github.com/redis/redis/pull/8264#pullrequestreview-560186584",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a501e093-780d-4266-b625-aad4e5300522",
        "parentId" : null,
        "authorId" : "02e243fa-aeed-4b15-9e9e-405ca1702d7e",
        "body" : "let's test the other field too",
        "createdAt" : "2020-12-30T20:38:58Z",
        "updatedAt" : "2021-01-07T14:03:52Z",
        "lastEditedBy" : "02e243fa-aeed-4b15-9e9e-405ca1702d7e",
        "tags" : [
        ]
      }
    ],
    "commit" : "3c2eff0282e4c760da64f520d95fcd41bc44eefa",
    "line" : 10,
    "diffHunk" : "@@ -1,1 +205,209 @@        # so that the comparisons during the test will be valid\n        assert {[s current_cow_size] == 0}\n        assert {[s rdb_last_cow_size] == 0}\n\n        # using a 200us delay, the bgsave is empirically taking about 10 seconds."
  },
  {
    "id" : "ac00018e-a930-4779-82ae-0be4125acd57",
    "prId" : 8264,
    "prUrl" : "https://github.com/redis/redis/pull/8264#pullrequestreview-560186584",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5c4a88ee-6161-4a41-8f24-7b86c5420fae",
        "parentId" : null,
        "authorId" : "02e243fa-aeed-4b15-9e9e-405ca1702d7e",
        "body" : "when the loop exists, we need to assert that iterations >=2, otherwise we won't be able to detect a case where the rdb saving ended and we didn't detect a single cow increase",
        "createdAt" : "2020-12-30T20:46:49Z",
        "updatedAt" : "2021-01-07T14:03:52Z",
        "lastEditedBy" : "02e243fa-aeed-4b15-9e9e-405ca1702d7e",
        "tags" : [
        ]
      }
    ],
    "commit" : "3c2eff0282e4c760da64f520d95fcd41bc44eefa",
    "line" : 68,
    "diffHunk" : "@@ -1,1 +263,267 @@\n            incr iteration 1\n        }\n\n        # make sure we saw report of current_cow_size"
  }
]