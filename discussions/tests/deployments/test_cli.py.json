[
  {
    "id" : "00f864bb-f675-4af9-bbb8-ac1c44438f80",
    "prId" : 4350,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/4350#pullrequestreview-657865575",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5581ab0c-2156-40ec-8f3d-1bf96c36a893",
        "parentId" : null,
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "This test failed with the following in the latest version of `click`:\r\n\r\n```python\r\n    @pytest.mark.skipif(\r\n        \"MLFLOW_SKINNY\" in os.environ,\r\n        reason=\"Skinny Client does not support predict due to the pandas dependency\",\r\n    )\r\n    def test_predict(tmpdir):\r\n        temp_input_file_path = tmpdir.join(\"input.json\").strpath\r\n        with open(temp_input_file_path, \"w+t\") as temp_input_file:\r\n            temp_input_file.write('{\"data\": [5000]}')\r\n            temp_input_file.seek(0)\r\n            runner = CliRunner()\r\n            res = runner.invoke(\r\n                cli.predict, [\"--target\", f_target, \"--name\", f_name, \"--input-path\", temp_input_file]\r\n            )\r\n            assert \"1\" in res.stdout\r\nE            +  where '' = <Result ValueError('Expected object or value')>.stdout\r\n```\r\n\r\n`ValueError('Expected object or value')` comes from `pandas.read_json`",
        "createdAt" : "2021-05-12T12:37:40Z",
        "updatedAt" : "2021-05-12T13:16:00Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      },
      {
        "id" : "1495af60-9f16-4fbe-bd3b-3d392ed15f67",
        "parentId" : "5581ab0c-2156-40ec-8f3d-1bf96c36a893",
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "I haven't figured out why this test started failing with the latest version of `click` (which Flask 2.0.0 requires).",
        "createdAt" : "2021-05-12T12:40:34Z",
        "updatedAt" : "2021-05-12T13:40:55Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      },
      {
        "id" : "8df5ed2a-eb6a-43f4-ab6e-5fe46dd5e26f",
        "parentId" : "5581ab0c-2156-40ec-8f3d-1bf96c36a893",
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "I think passing `temp_input_file_path` (which is a string) is more realistic than passing `temp_input_file` (which is a file handler object).",
        "createdAt" : "2021-05-12T13:11:25Z",
        "updatedAt" : "2021-05-12T23:46:16Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      }
    ],
    "commit" : "e4c367667ed17afc5507d329ca610af47bf448ee",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +91,95 @@        cli.predict, [\"--target\", f_target, \"--name\", f_name, \"--input-path\", temp_input_file_path],\n    )\n    assert \"1\" in res.stdout\n\n"
  }
]