[
  {
    "id" : "43ccd330-d158-447d-8b24-aa971d018ac7",
    "prId" : 9033,
    "prUrl" : "https://github.com/redis/redis/pull/9033#pullrequestreview-674498963",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "10eb498b-dbee-47be-9172-9fa72d725f3f",
        "parentId" : null,
        "authorId" : "02e243fa-aeed-4b15-9e9e-405ca1702d7e",
        "body" : "i suppose you did that so that the test can be skipped by a skiplist? in which case it doesn't need to restore the state after it?\r\nthere's a problem with either approach.\r\nin some cases, we want the cleanup code to only run if the test was executed.\r\nbut in some cases, we still want the test to clean after it, even if it failed in the middle.\r\nputting the cleanup code inside the test prevents it from running if the test aborted in the middle by an assertion check.",
        "createdAt" : "2021-06-02T12:16:52Z",
        "updatedAt" : "2021-06-02T13:24:28Z",
        "lastEditedBy" : "02e243fa-aeed-4b15-9e9e-405ca1702d7e",
        "tags" : [
        ]
      },
      {
        "id" : "068bf009-6f63-4c30-aba3-c005c45d019d",
        "parentId" : "10eb498b-dbee-47be-9172-9fa72d725f3f",
        "authorId" : "b35f6f04-eae9-4f88-8265-08b19050f11b",
        "body" : "Yes, the idea is to skip this together with the test -- for example if we run on a setup that doesn't handle `HELLO` at all and thus skips all RESP3 stuff.\r\n\r\nIdeally tests should be self contained and have distinctive setup and teardown sections, but we're very very far from this ideal state so we'll need to accept that a failed test may not cleanup.",
        "createdAt" : "2021-06-02T17:38:26Z",
        "updatedAt" : "2021-06-02T17:38:26Z",
        "lastEditedBy" : "b35f6f04-eae9-4f88-8265-08b19050f11b",
        "tags" : [
        ]
      }
    ],
    "commit" : "861a947faa8c5b4042b74a5185bbcc3d3f7b50c6",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +64,68 @@        r hello 2\n    }\n\n    test \"HRANDFIELD count of 0 is handled correctly\" {\n        r hrandfield myhash 0"
  }
]