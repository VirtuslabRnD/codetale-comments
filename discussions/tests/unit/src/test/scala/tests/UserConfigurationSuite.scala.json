[
  {
    "id" : "db12eb4e-c7bf-4836-9d75-8ee0f58cf0bb",
    "prId" : 387,
    "prUrl" : "https://github.com/scalameta/metals/pull/387#pullrequestreview-182978365",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e7b62b5e-80b8-44b8-8d90-159d927d4e31",
        "parentId" : null,
        "authorId" : "d66a6438-cedf-4b6c-bfdf-ceff0a38786d",
        "body" : "See my comment above, the client actually sends these nested inside a `\"metals\"` key.",
        "createdAt" : "2018-12-08T17:49:46Z",
        "updatedAt" : "2018-12-09T18:05:10Z",
        "lastEditedBy" : "d66a6438-cedf-4b6c-bfdf-ceff0a38786d",
        "tags" : [
        ]
      },
      {
        "id" : "ec776976-6d65-4035-b2a6-993ed9c1c627",
        "parentId" : "e7b62b5e-80b8-44b8-8d90-159d927d4e31",
        "authorId" : "d66a6438-cedf-4b6c-bfdf-ceff0a38786d",
        "body" : "Adding more details to this.\r\n\r\nI strongly suspect there's no agreement on how clients will send this.\r\nI'm sure VSCode will wrap the settings in `metals`, but by reading the code I don't think Atom does the same. It looks like it will send them wrapped in `settings`.\r\n\r\n@laughedelic I don't have Atom on my machine. If you have a minute, can you confirm which format Atom uses for configuration?",
        "createdAt" : "2018-12-09T10:32:52Z",
        "updatedAt" : "2018-12-09T18:05:10Z",
        "lastEditedBy" : "d66a6438-cedf-4b6c-bfdf-ceff0a38786d",
        "tags" : [
        ]
      },
      {
        "id" : "7bab2c21-7070-418c-974e-5ce154348a11",
        "parentId" : "e7b62b5e-80b8-44b8-8d90-159d927d4e31",
        "authorId" : "cea3c370-4fa4-4787-a40c-c406eb22d8b2",
        "body" : "Atom seems to send the same structure as vscode\r\n```json\r\n{\r\n  \"jsonrpc\": \"2.0\",\r\n  \"method\": \"workspace/didChangeConfiguration\",\r\n  \"params\": {\r\n    \"settings\": {\r\n      \"metals\": {\r\n        \"version\": \"0.4.0-SNAPSHOT\",\r\n        \"javaArgs\": [\r\n          \"-XX:+UseG1GC\",\r\n          \"-XX:+UseStringDeduplication\",\r\n          \"-Xss4m\",\r\n          \"-Xms1G\",\r\n          \"-Xmx4G\"\r\n        ]\r\n      }\r\n    }\r\n  }\r\n}\r\n```",
        "createdAt" : "2018-12-09T11:58:24Z",
        "updatedAt" : "2018-12-09T18:05:10Z",
        "lastEditedBy" : "cea3c370-4fa4-4787-a40c-c406eb22d8b2",
        "tags" : [
        ]
      },
      {
        "id" : "2845cb5b-8af0-46cc-9549-8f40aafd7956",
        "parentId" : "e7b62b5e-80b8-44b8-8d90-159d927d4e31",
        "authorId" : "3e802404-0641-48bd-8f56-4d5ab70d4eb9",
        "body" : "Right, Atom wraps it in `settings`:\r\n\r\nhttps://github.com/atom/atom-languageclient/blob/cc8975d70c7e93b3d017ad7454635bb14f9439ac/lib/auto-languageclient.ts#L340-L342\r\n\r\nAnd there is a hook to transform the configuration object before sending it to the server:\r\n\r\nhttps://github.com/atom/atom-languageclient/blob/cc8975d70c7e93b3d017ad7454635bb14f9439ac/lib/auto-languageclient.ts#L220-L228",
        "createdAt" : "2018-12-09T13:23:57Z",
        "updatedAt" : "2018-12-09T18:05:10Z",
        "lastEditedBy" : "3e802404-0641-48bd-8f56-4d5ab70d4eb9",
        "tags" : [
        ]
      }
    ],
    "commit" : "1b1118ae5909e6fd535bcd79958b0dfde37041e3",
    "line" : 59,
    "diffHunk" : "@@ -1,1 +57,61 @@      | \"sbt-script\": \"script\"\n      |}\n    \"\"\".stripMargin\n  ) { obtained =>\n    assert(obtained.javaHome == Some(\"home\"))"
  }
]