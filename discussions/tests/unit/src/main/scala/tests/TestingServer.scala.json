[
  {
    "id" : "4a4b1333-2900-4be6-adb4-4c3cfc9d6898",
    "prId" : 2862,
    "prUrl" : "https://github.com/scalameta/metals/pull/2862#pullrequestreview-680830591",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d8328387-a97b-45dd-b072-d330163c56f0",
        "parentId" : null,
        "authorId" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "body" : "What about a recursive function:\r\n```scala\r\n  def assertSelectionRanges(     \r\n      filename: String,\r\n      ranges: List[l.SelectionRange],\r\n      expected: *String,\r\n  ): Unit = { expected.headOption.foreach { expectedFile =>\r\n        val edits = RangesTextEdits.fromSelectionRanges(ranges)\r\n        val edited = TextEdits.applyEdits(textContents(filename), edits)\r\n       Assertions.assertNoDiff(edited, expectedFile)\r\n      assertSelectionRanges(filename, ranges.map(_.getParent), expected.tail)\r\n    }\r\n  }\r\n\r\n```\r\nI think would look nicer in the test.",
        "createdAt" : "2021-06-09T12:13:09Z",
        "updatedAt" : "2021-06-09T12:38:41Z",
        "lastEditedBy" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "tags" : [
        ]
      },
      {
        "id" : "49f52636-bf39-4efc-ab5b-a277db1ae08a",
        "parentId" : "d8328387-a97b-45dd-b072-d330163c56f0",
        "authorId" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "body" : "Or even we could put all ranges in a single file the same as the FoldingRangeSuite does it",
        "createdAt" : "2021-06-09T13:05:49Z",
        "updatedAt" : "2021-06-09T13:05:49Z",
        "lastEditedBy" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "tags" : [
        ]
      },
      {
        "id" : "3a5fc49f-5aaa-407f-b994-12cd854baa75",
        "parentId" : "d8328387-a97b-45dd-b072-d330163c56f0",
        "authorId" : "84490516-a7af-4f7f-9947-360c279c4400",
        "body" : "Ahh I like the recursive function idea. That will make it much cleaner. Let me play around with this a bit.",
        "createdAt" : "2021-06-10T14:05:49Z",
        "updatedAt" : "2021-06-10T14:05:49Z",
        "lastEditedBy" : "84490516-a7af-4f7f-9947-360c279c4400",
        "tags" : [
        ]
      }
    ],
    "commit" : "e9d262fe65a027ea41cba44836498852272b19a6",
    "line" : 41,
    "diffHunk" : "@@ -1,1 +674,678 @@  }\n\n  def assertSelectionRanges(\n      filename: String,\n      ranges: List[l.SelectionRange],"
  },
  {
    "id" : "0b12ae40-1231-4d88-86ba-0110317b41ae",
    "prId" : 2532,
    "prUrl" : "https://github.com/scalameta/metals/pull/2532#pullrequestreview-605397038",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fddc8936-bb16-49dd-9e60-d3a3affe80fa",
        "parentId" : null,
        "authorId" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "body" : "Could we maybe wait on the indexingPromise in MetalsLanguageServer? We can make it public and it should work the same.",
        "createdAt" : "2021-03-04T11:02:15Z",
        "updatedAt" : "2021-03-08T13:25:41Z",
        "lastEditedBy" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "tags" : [
        ]
      },
      {
        "id" : "a01f4318-cce5-46d4-bd88-a7667a62c27f",
        "parentId" : "fddc8936-bb16-49dd-9e60-d3a3affe80fa",
        "authorId" : "84490516-a7af-4f7f-9947-360c279c4400",
        "body" : "ðŸ¤” so I tried adding in this in place of it:\r\n```scala\r\n _ <- server.server.indexingPromise.future\r\n```\r\nWhich I assumed would wait for it, but it seems to not work. This is what you had in mind right?",
        "createdAt" : "2021-03-04T19:43:48Z",
        "updatedAt" : "2021-03-08T13:25:41Z",
        "lastEditedBy" : "84490516-a7af-4f7f-9947-360c279c4400",
        "tags" : [
        ]
      },
      {
        "id" : "3f2bed8e-6d9b-4340-a9ce-004f9d56b98a",
        "parentId" : "fddc8936-bb16-49dd-9e60-d3a3affe80fa",
        "authorId" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "body" : "It should wait until the workspace is indexed, so maybe we should also wait on `didSave` (it will wait on the compilation)?  The test classes are still not available by then?",
        "createdAt" : "2021-03-04T20:25:57Z",
        "updatedAt" : "2021-03-08T13:25:41Z",
        "lastEditedBy" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "tags" : [
        ]
      },
      {
        "id" : "1f42bd09-f2b2-4791-bd27-b36fdf56bca3",
        "parentId" : "fddc8936-bb16-49dd-9e60-d3a3affe80fa",
        "authorId" : "84490516-a7af-4f7f-9947-360c279c4400",
        "body" : "Yea but there already is a did save in the others that I tried this on. For example in `testTarget` we have the `didOpen`, `didSave`, and then the `indexingPromise.future`, and that still doesn't have the test classes. I have no idea why that takes more time.",
        "createdAt" : "2021-03-04T21:31:34Z",
        "updatedAt" : "2021-03-08T13:25:41Z",
        "lastEditedBy" : "84490516-a7af-4f7f-9947-360c279c4400",
        "tags" : [
        ]
      },
      {
        "id" : "f0e4d2c2-7025-43f8-9a75-bdb0119cb8b4",
        "parentId" : "fddc8936-bb16-49dd-9e60-d3a3affe80fa",
        "authorId" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "body" : "Damn, it might have something to do with Bloop. Alternative would be to use SBT bsp here, but it's fine to leave it as is.",
        "createdAt" : "2021-03-04T21:37:57Z",
        "updatedAt" : "2021-03-08T13:25:41Z",
        "lastEditedBy" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "tags" : [
        ]
      },
      {
        "id" : "577d9a1c-c83c-4e4e-ad68-97042f148e72",
        "parentId" : "fddc8936-bb16-49dd-9e60-d3a3affe80fa",
        "authorId" : "84490516-a7af-4f7f-9947-360c279c4400",
        "body" : "ðŸ¤” I'm thinking for now to leave it as I played around with this a bit more and still can't get it to work as expected.",
        "createdAt" : "2021-03-05T16:30:43Z",
        "updatedAt" : "2021-03-08T13:25:41Z",
        "lastEditedBy" : "84490516-a7af-4f7f-9947-360c279c4400",
        "tags" : [
        ]
      }
    ],
    "commit" : "23bedef101619ed619520c4b121ecae6c358d874",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +474,478 @@  }\n\n  def waitFor(sec: Long): Future[Unit] = Future { Thread.sleep(sec) }\n\n  def startDebugging("
  },
  {
    "id" : "a900069a-bd52-4974-9434-de40b9028d27",
    "prId" : 1898,
    "prUrl" : "https://github.com/scalameta/metals/pull/1898#pullrequestreview-445758076",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "09a1362e-9417-4654-a204-5dc7254097f2",
        "parentId" : null,
        "authorId" : "84490516-a7af-4f7f-9947-360c279c4400",
        "body" : "We must have missed this when we migrated to `InitilizationOptions` because we were actually still passing the values for that into the `ClientCapabilities` experimental param. Now we just pass in an empty object there and do the values here.",
        "createdAt" : "2020-07-09T16:00:27Z",
        "updatedAt" : "2020-07-10T20:39:59Z",
        "lastEditedBy" : "84490516-a7af-4f7f-9947-360c279c4400",
        "tags" : [
        ]
      },
      {
        "id" : "54d340b1-f0f5-43c4-a46d-61a8b841d933",
        "parentId" : "09a1362e-9417-4654-a204-5dc7254097f2",
        "authorId" : "84490516-a7af-4f7f-9947-360c279c4400",
        "body" : "I keep finding small fixes, but no the one that fixes my issue ðŸ˜† ",
        "createdAt" : "2020-07-09T16:01:17Z",
        "updatedAt" : "2020-07-10T20:39:59Z",
        "lastEditedBy" : "84490516-a7af-4f7f-9947-360c279c4400",
        "tags" : [
        ]
      }
    ],
    "commit" : "a09c54df4983c2390e8b249633004d3433d16915",
    "line" : 30,
    "diffHunk" : "@@ -1,1 +417,421 @@        .asJava\n\n    params.setInitializationOptions(existingInitOptions.toJson)\n    params.setCapabilities(\n      new ClientCapabilities("
  },
  {
    "id" : "76cdca3c-e687-4cae-aa75-0b4eac6ebaf6",
    "prId" : 1898,
    "prUrl" : "https://github.com/scalameta/metals/pull/1898#pullrequestreview-446687233",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8ef417c8-be20-423d-8123-7c46e381b2d9",
        "parentId" : null,
        "authorId" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "body" : "I would just add a simple json library for tests that takes into account options for tests, would be much nicer. ",
        "createdAt" : "2020-07-10T15:22:26Z",
        "updatedAt" : "2020-07-10T20:39:59Z",
        "lastEditedBy" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "tags" : [
        ]
      },
      {
        "id" : "8a024deb-ea89-4324-bd44-22e2338da33c",
        "parentId" : "8ef417c8-be20-423d-8123-7c46e381b2d9",
        "authorId" : "84490516-a7af-4f7f-9947-360c279c4400",
        "body" : "Could you expand on what you mean by this?",
        "createdAt" : "2020-07-10T16:59:41Z",
        "updatedAt" : "2020-07-10T20:39:59Z",
        "lastEditedBy" : "84490516-a7af-4f7f-9947-360c279c4400",
        "tags" : [
        ]
      },
      {
        "id" : "409021fa-1f11-487f-9068-824ad3e9e3cc",
        "parentId" : "8ef417c8-be20-423d-8123-7c46e381b2d9",
        "authorId" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "body" : "Ach, that was totally not clear. I just meant adding something like upickle. Automatically transforming case class into a string and then using gson to parse that.  This should have the same effect as the reflective access.",
        "createdAt" : "2020-07-10T17:06:58Z",
        "updatedAt" : "2020-07-10T20:39:59Z",
        "lastEditedBy" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "tags" : [
        ]
      },
      {
        "id" : "8b4e2f2f-7fce-4ce3-8e59-95a40ac4a6a7",
        "parentId" : "8ef417c8-be20-423d-8123-7c46e381b2d9",
        "authorId" : "84490516-a7af-4f7f-9947-360c279c4400",
        "body" : "So it looks like in order for uPickle to handle this correctly I would need to define a serializer in the companion object of `InitializationOptions`, but we don't include uPickle. I'm hesitant to add a library just to do this. What do you think?",
        "createdAt" : "2020-07-10T20:24:58Z",
        "updatedAt" : "2020-07-10T20:39:59Z",
        "lastEditedBy" : "84490516-a7af-4f7f-9947-360c279c4400",
        "tags" : [
        ]
      },
      {
        "id" : "87710d14-ed63-44fc-8ff1-21018143bd85",
        "parentId" : "8ef417c8-be20-423d-8123-7c46e381b2d9",
        "authorId" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "body" : "I haven't noticed that, I was thinking of only adding a library to the test project. This way we wouldn't be adding additional dependencies to the project itself.\r\n\r\nWe can leave it as is, it was just an idea.",
        "createdAt" : "2020-07-10T20:38:07Z",
        "updatedAt" : "2020-07-10T20:39:59Z",
        "lastEditedBy" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "tags" : [
        ]
      }
    ],
    "commit" : "a09c54df4983c2390e8b249633004d3433d16915",
    "line" : 18,
    "diffHunk" : "@@ -1,1 +405,409 @@    // collect the fields that are set, get the values, and then make them into\n    // a map that will become a JsonObject to pass in as the InitializationOptions\n    val existingInitOptions =\n      initOptions.getClass.getDeclaredFields\n        .map { field =>"
  },
  {
    "id" : "6447330a-75d7-4e4b-8dd0-c89598ec7e8c",
    "prId" : 1753,
    "prUrl" : "https://github.com/scalameta/metals/pull/1753#pullrequestreview-415467373",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "728f0ef4-1ed6-4c81-af36-324cebe1b2d5",
        "parentId" : null,
        "authorId" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "body" : "`triggerCharacter` ?",
        "createdAt" : "2020-05-15T15:29:47Z",
        "updatedAt" : "2020-05-29T09:53:41Z",
        "lastEditedBy" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "tags" : [
        ]
      },
      {
        "id" : "9642328a-3849-48c5-80b1-ecfee0f0b773",
        "parentId" : "728f0ef4-1ed6-4c81-af36-324cebe1b2d5",
        "authorId" : "506802e6-3dfb-4c6d-84be-1b8a5d08fbe4",
        "body" : "ok",
        "createdAt" : "2020-05-15T16:10:53Z",
        "updatedAt" : "2020-05-29T09:53:41Z",
        "lastEditedBy" : "506802e6-3dfb-4c6d-84be-1b8a5d08fbe4",
        "tags" : [
        ]
      },
      {
        "id" : "91428bd5-b6d5-4ffb-b2a9-0798cd48cb71",
        "parentId" : "728f0ef4-1ed6-4c81-af36-324cebe1b2d5",
        "authorId" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "body" : "I think this might have been fixed in the other commit we had issues with. Could you change it again?",
        "createdAt" : "2020-05-20T16:08:50Z",
        "updatedAt" : "2020-05-29T09:53:41Z",
        "lastEditedBy" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "tags" : [
        ]
      }
    ],
    "commit" : "60e701e5d87db159576e92e8239681d2abd92c6e",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +608,612 @@      expected: String,\n      autoIndent: String,\n      replaceWith: String,\n      root: AbsolutePath = workspace\n  )(implicit loc: munit.Location): Future[Unit] = {"
  },
  {
    "id" : "4fb74d26-ede5-472f-9730-c79fea32187a",
    "prId" : 1286,
    "prUrl" : "https://github.com/scalameta/metals/pull/1286#pullrequestreview-342384949",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2a4eda9e-aba8-4220-9ad9-9c21515a52c5",
        "parentId" : null,
        "authorId" : "d66a6438-cedf-4b6c-bfdf-ceff0a38786d",
        "body" : "the `endOffset` is adjusted to account for the removal of the range markers",
        "createdAt" : "2020-01-11T16:13:53Z",
        "updatedAt" : "2020-01-11T17:12:09Z",
        "lastEditedBy" : "d66a6438-cedf-4b6c-bfdf-ceff0a38786d",
        "tags" : [
        ]
      },
      {
        "id" : "506b0aa5-13b9-46c3-9ac3-c29bb2cd7223",
        "parentId" : "2a4eda9e-aba8-4220-9ad9-9c21515a52c5",
        "authorId" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "body" : "A lot of this code seem duplicate to what we already have. Would it be possible to reuse the methods that we use for changing to the position in params? ",
        "createdAt" : "2020-01-12T16:48:48Z",
        "updatedAt" : "2020-01-12T16:49:11Z",
        "lastEditedBy" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "tags" : [
        ]
      },
      {
        "id" : "358266d5-2b66-43f0-b6c5-e34d1a559eab",
        "parentId" : "2a4eda9e-aba8-4220-9ad9-9c21515a52c5",
        "authorId" : "d66a6438-cedf-4b6c-bfdf-ceff0a38786d",
        "body" : "@tgodzik which method? Anyway, sure, I'll open a tech debt issue.",
        "createdAt" : "2020-01-14T09:20:07Z",
        "updatedAt" : "2020-01-14T09:20:07Z",
        "lastEditedBy" : "d66a6438-cedf-4b6c-bfdf-ceff0a38786d",
        "tags" : [
        ]
      }
    ],
    "commit" : "7e6135a896a913f6ec9a1ae82ca098806ffdfea3",
    "line" : 25,
    "diffHunk" : "@@ -1,1 +606,610 @@    val path = root.resolve(filename)\n    path.touch()\n    val pos = m.Position.Range(input, startOffset, endOffset - \"<<>>\".length())\n    for {\n      _ <- didChange(filename)(_ => text)"
  },
  {
    "id" : "c5d523be-20c8-411d-870e-8022b417dd6f",
    "prId" : 934,
    "prUrl" : "https://github.com/scalameta/metals/pull/934#pullrequestreview-290632042",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f89e499a-55d4-4464-a842-0bd9406c3e5c",
        "parentId" : null,
        "authorId" : "a1d420d1-83d4-48b5-b245-772065f6633b",
        "body" : "I know we have a convention of calling those names `assertFoo` but I would like to propose that at one point we rename those `assertFoo` to `verifyFoo` because after reading `assert implementation` I want to ask `assert that implementation *what*?` Let's make the act of verification explicit in the name.",
        "createdAt" : "2019-09-19T15:21:04Z",
        "updatedAt" : "2019-10-03T13:51:34Z",
        "lastEditedBy" : "a1d420d1-83d4-48b5-b245-772065f6633b",
        "tags" : [
        ]
      }
    ],
    "commit" : "d837625e03b77aa42a76d4f700137294452174fa",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +617,621 @@  }\n\n  def assertImplementation(\n      filename: String,\n      query: String,"
  },
  {
    "id" : "6667b067-eb36-469c-95b6-defafcfdc934",
    "prId" : 621,
    "prUrl" : "https://github.com/scalameta/metals/pull/621#pullrequestreview-222783495",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "33c527c8-89d9-4f8e-b467-f29f17b647d3",
        "parentId" : null,
        "authorId" : "cea3c370-4fa4-4787-a40c-c406eb22d8b2",
        "body" : "I think we might be able to avoid `expected` by encoding the `<<` ranges in the `query` string.\r\n```scala\r\nassertHover(\r\n\"\"\"\r\nobject Main {\r\n  val <<abc>> = 1\r\n  println(<<a@@bc>> + <<abc>>)\r\n}\r\n```\r\n\r\nI don't feel strongly about it, you can use the approach you prefer",
        "createdAt" : "2019-04-02T15:08:19Z",
        "updatedAt" : "2019-04-05T09:13:03Z",
        "lastEditedBy" : "cea3c370-4fa4-4787-a40c-c406eb22d8b2",
        "tags" : [
        ]
      },
      {
        "id" : "2db46a82-6cc7-4899-a70d-84748d7ba3ca",
        "parentId" : "33c527c8-89d9-4f8e-b467-f29f17b647d3",
        "authorId" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "body" : "It's one string now, should be simpler to write new tests.",
        "createdAt" : "2019-04-04T14:05:34Z",
        "updatedAt" : "2019-04-05T09:13:03Z",
        "lastEditedBy" : "f252b48f-54a9-478d-8bbb-85f01e5c28e7",
        "tags" : [
        ]
      }
    ],
    "commit" : "6f03d2264f9c4e8e28d2e258ca99d24915c82e17",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +433,437 @@      filename: String,\n      query: String,\n      expected: String,\n      root: AbsolutePath = workspace\n  ): Future[Unit] = {"
  }
]