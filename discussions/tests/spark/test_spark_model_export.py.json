[
  {
    "id" : "8ed21582-b56f-400a-8de5-495fa43cbafd",
    "prId" : 2373,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/2373#pullrequestreview-351696119",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "746f8acc-2ddb-436a-bfd4-601d741be9d8",
        "parentId" : null,
        "authorId" : "bd3067fd-855b-4bd1-898d-ca29199fd092",
        "body" : "Seems like SparkContext initialization can flake while attempting to fetch mleap libraries (specified as part of the Spark conf [here](https://github.com/mlflow/mlflow/pull/2373/files#diff-9b8029c7d29cba0c31d59382d11e876dR60)), so added retries",
        "createdAt" : "2020-01-31T18:35:32Z",
        "updatedAt" : "2020-02-05T23:34:36Z",
        "lastEditedBy" : "bd3067fd-855b-4bd1-898d-ca29199fd092",
        "tags" : [
        ]
      }
    ],
    "commit" : "6b9dee39ae30daa31052363823b4ffa6f8e1170f",
    "line" : 24,
    "diffHunk" : "@@ -1,1 +63,67 @@                   'ml.combust.mleap:mleap-spark_2.11:0.12.0')\n    conf.set(key=\"spark_session.python.worker.reuse\", value=True)\n    max_tries = 3\n    for num_tries in range(max_tries):\n        try:"
  },
  {
    "id" : "fe9178cd-7cee-4284-8835-b2134c8ae5a6",
    "prId" : 1519,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/1519#pullrequestreview-255528223",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3eea92ef-9853-4cd8-8583-289678187897",
        "parentId" : null,
        "authorId" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "body" : "Nit: Can we check that the error message contains some of the expected text, as we do in `test_sparkml_model_log_invalid_args`?",
        "createdAt" : "2019-06-27T23:35:13Z",
        "updatedAt" : "2019-07-02T20:19:13Z",
        "lastEditedBy" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "tags" : [
        ]
      }
    ],
    "commit" : "7fd85a5f2d34d21562f688873f5b6b0bc3328f4b",
    "line" : 95,
    "diffHunk" : "@@ -1,1 +214,218 @@                conda_env=spark_custom_env)\n    assert \"Cannot serialize this model\" in e.value.message\n\n\n# TODO(czumar): Remark this test as \"large\" instead of \"release\" after SageMaker docker"
  },
  {
    "id" : "673d0429-3b56-4408-b2a0-ca0da46debdd",
    "prId" : 808,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/808#pullrequestreview-193388324",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c3687dd9-516d-4610-b19a-905b2b2d68d8",
        "parentId" : null,
        "authorId" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "body" : "Why do we expect `ValueError` instead of `MLeapSerializationException`? ",
        "createdAt" : "2019-01-16T20:58:54Z",
        "updatedAt" : "2019-01-16T23:55:29Z",
        "lastEditedBy" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "tags" : [
        ]
      },
      {
        "id" : "f91c18a4-8004-4525-87a6-370464c869d4",
        "parentId" : "c3687dd9-516d-4610-b19a-905b2b2d68d8",
        "authorId" : "bd3067fd-855b-4bd1-898d-ca29199fd092",
        "body" : "Good question, it's because we now attempt to write the Spark model ([here](https://github.com/mlflow/mlflow/pull/808/files#diff-47cfaaee925e76d2dc8ec604c2ef5f73R122)) before persisting the MLeap model ([here](https://github.com/mlflow/mlflow/pull/808/files#diff-47cfaaee925e76d2dc8ec604c2ef5f73R137)) - MLlib raises a ValueError when `spark_model.save()` on a Pipeline containing an unsupported Transformer, as is visible in this travis build: https://travis-ci.org/mlflow/mlflow/jobs/480164372",
        "createdAt" : "2019-01-16T21:45:18Z",
        "updatedAt" : "2019-01-16T23:55:29Z",
        "lastEditedBy" : "bd3067fd-855b-4bd1-898d-ca29199fd092",
        "tags" : [
        ]
      },
      {
        "id" : "8eac42ea-28da-4521-87d1-cb4fdd8a3f7f",
        "parentId" : "c3687dd9-516d-4610-b19a-905b2b2d68d8",
        "authorId" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "body" : "Got it. I think it's because we changed the order of operations for `save_model`, which seems fine.",
        "createdAt" : "2019-01-16T22:42:16Z",
        "updatedAt" : "2019-01-16T23:55:29Z",
        "lastEditedBy" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "tags" : [
        ]
      }
    ],
    "commit" : "ff2bdbf09c7ebb81d700c7eddb0ee0d13994898e",
    "line" : 34,
    "diffHunk" : "@@ -1,1 +366,370 @@    unsupported_model = unsupported_pipeline.fit(spark_model_iris.spark_df)\n\n    with pytest.raises(ValueError):\n        sparkm.save_model(spark_model=unsupported_model,\n                          path=model_path,"
  },
  {
    "id" : "f51923e0-c4e1-4452-a9b1-a2d895c42565",
    "prId" : 540,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/540#pullrequestreview-158676036",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3ca26e5f-a00e-4282-b333-7fe5675f8369",
        "parentId" : null,
        "authorId" : "6e958077-8d60-494d-8079-e77af3a2951f",
        "body" : "Can we double-check some aspect of the raised exception in order to make sure it failed for the right reason? It could just be any arbitrary problem in the current code.",
        "createdAt" : "2018-09-25T17:06:30Z",
        "updatedAt" : "2018-09-25T23:16:40Z",
        "lastEditedBy" : "6e958077-8d60-494d-8079-e77af3a2951f",
        "tags" : [
        ]
      },
      {
        "id" : "1b13b57e-0e71-49bb-87d6-cdcf832d62fe",
        "parentId" : "3ca26e5f-a00e-4282-b333-7fe5675f8369",
        "authorId" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "body" : "Defined an `mleap.MLeapSerializationException` that inherits from `exceptions.MlflowException`. We now check to see if this specific exception is thrown.",
        "createdAt" : "2018-09-25T18:29:51Z",
        "updatedAt" : "2018-09-25T23:16:40Z",
        "lastEditedBy" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "tags" : [
        ]
      }
    ],
    "commit" : "0727a170a3a379e9bd27bca28138e5d57e92a012",
    "line" : 47,
    "diffHunk" : "@@ -1,1 +283,287 @@    pipeline = Pipeline(stages=[])\n    model = pipeline.fit(unsupported_df)\n    # The Spark `DateType` is not supported by MLeap, so we expect serialization to fail.\n    with pytest.raises(mleap.MLeapSerializationException):\n        sparkm.save_model(spark_model=model, path=model_path, sample_input=unsupported_df)"
  }
]