[
  {
    "id" : "7c9c538a-0a85-4f0c-8f48-94b86252285b",
    "prId" : 8739,
    "prUrl" : "https://github.com/apache/airflow/pull/8739#pullrequestreview-421300817",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "72223547-3312-43f1-b55f-a59ad382e4d1",
        "parentId" : null,
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "How does this test work now, this doesn't store serialized DAG anymore, does it ?",
        "createdAt" : "2020-05-29T21:25:08Z",
        "updatedAt" : "2020-05-29T21:25:08Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "02a97462-dcf5-4643-a02b-eb84889efade",
        "parentId" : "72223547-3312-43f1-b55f-a59ad382e4d1",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "I mean with the patch, it would only sync and write DAGs to DAGModel table and assert that queries count is 7, is that the intention ",
        "createdAt" : "2020-05-29T21:26:23Z",
        "updatedAt" : "2020-05-29T21:26:23Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "a5ee35b1-02aa-42e0-94c2-a3232a3c91ba",
        "parentId" : "72223547-3312-43f1-b55f-a59ad382e4d1",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "`SDM.bulk_sync_to_db` will now _always_ write to the DB when called.\r\n\r\nBefore it would return if the config was false. Now  the check is moved in to DagBag.bulk_sync:\r\n\r\n```python\r\n        if self.store_serialized_dags:\r\n            SerializedDagModel.bulk_sync_to_db(self.dags.values())\r\n```",
        "createdAt" : "2020-05-29T21:33:29Z",
        "updatedAt" : "2020-05-29T21:33:29Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "18696901-d3bd-478d-a9e6-ec43ad785c79",
        "parentId" : "72223547-3312-43f1-b55f-a59ad382e4d1",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "(This test isn't great, but that wasn't changed by this)",
        "createdAt" : "2020-05-29T21:33:59Z",
        "updatedAt" : "2020-05-29T21:33:59Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      }
    ],
    "commit" : "da07181097b98a18d248607452e94bea7eea00a6",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +117,121 @@        self.assertTrue(SDM.has_dag(fresh_dag.dag_id))\n\n    def test_bulk_sync_to_db(self):\n        dags = [\n            DAG(\"dag_1\"), DAG(\"dag_2\"), DAG(\"dag_3\"),"
  },
  {
    "id" : "91d5210f-a9de-43f4-9310-0c8d664f2821",
    "prId" : 9850,
    "prUrl" : "https://github.com/apache/airflow/pull/9850#pullrequestreview-449757268",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a92c74ff-27d1-4f89-aaf1-4211f9a860a0",
        "parentId" : null,
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "Will optimize the above queries to lower this count in followup PRs",
        "createdAt" : "2020-07-16T01:32:43Z",
        "updatedAt" : "2020-07-16T14:51:47Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "3e2f4396-22bb-43b5-a515-d9d8a0332036",
        "parentId" : "a92c74ff-27d1-4f89-aaf1-4211f9a860a0",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Oh this is added an extra query for each (bulk) write?",
        "createdAt" : "2020-07-16T11:21:23Z",
        "updatedAt" : "2020-07-16T14:51:47Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "0e9d9f7d-196d-4356-9311-538c616cf649",
        "parentId" : "a92c74ff-27d1-4f89-aaf1-4211f9a860a0",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "Yeah, one to check if DAG is updated or not.\r\n\r\n",
        "createdAt" : "2020-07-16T11:26:13Z",
        "updatedAt" : "2020-07-16T14:51:47Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      }
    ],
    "commit" : "453dee82276abae75488a4434968da187ccce0a3",
    "line" : 42,
    "diffHunk" : "@@ -1,1 +151,155 @@            DAG(\"dag_1\"), DAG(\"dag_2\"), DAG(\"dag_3\"),\n        ]\n        with assert_queries_count(10):\n            SDM.bulk_sync_to_db(dags)"
  }
]