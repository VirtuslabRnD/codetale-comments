[
  {
    "id" : "7285a5e0-16ec-4d98-8bc0-fff20138ba5e",
    "prId" : 8138,
    "prUrl" : "https://github.com/apache/kafka/pull/8138#pullrequestreview-381341623",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a7cc0e66-e1b8-45b5-ae6b-68197256f018",
        "parentId" : null,
        "authorId" : "d8c7cf80-a55a-474c-a4f4-f60a9efda52c",
        "body" : "Could we have `kafka_opts` return the adjusted ops for the new jvm?",
        "createdAt" : "2020-03-18T15:16:53Z",
        "updatedAt" : "2020-03-18T15:16:53Z",
        "lastEditedBy" : "d8c7cf80-a55a-474c-a4f4-f60a9efda52c",
        "tags" : [
        ]
      },
      {
        "id" : "9f6e9eba-8e10-42d5-91e0-dcce806741c3",
        "parentId" : "a7cc0e66-e1b8-45b5-ae6b-68197256f018",
        "authorId" : "fe0be475-2786-4ac9-8152-c07fa363b977",
        "body" : "Hello, @ijuma \r\n\r\nCan you, please, clarify your proposal?\r\n\r\nI looked at `kafka_opts` values in the tests and it's usage in `kafka-run-class.sh` and doesn't get it. How should I adjust it and why?\r\nCan you, please, give me an example of some wrong value of `kafka_opts`?",
        "createdAt" : "2020-03-19T06:46:03Z",
        "updatedAt" : "2020-03-19T06:46:04Z",
        "lastEditedBy" : "fe0be475-2786-4ac9-8152-c07fa363b977",
        "tags" : [
        ]
      },
      {
        "id" : "1ac3b65f-a4b5-446b-b70d-61f52295c8ee",
        "parentId" : "a7cc0e66-e1b8-45b5-ae6b-68197256f018",
        "authorId" : "fe0be475-2786-4ac9-8152-c07fa363b977",
        "body" : "Hello @ijuma \r\n\r\nCan you, please, explain your idea to me?\r\nSo I can fix this PR according to your requirements.",
        "createdAt" : "2020-03-20T09:09:07Z",
        "updatedAt" : "2020-03-20T09:09:07Z",
        "lastEditedBy" : "fe0be475-2786-4ac9-8152-c07fa363b977",
        "tags" : [
        ]
      },
      {
        "id" : "affd0213-539d-4e2d-ad33-33775f99dcb3",
        "parentId" : "a7cc0e66-e1b8-45b5-ae6b-68197256f018",
        "authorId" : "d8c7cf80-a55a-474c-a4f4-f60a9efda52c",
        "body" : "The function `kafka_opts` returns jvm options that don't work with certain JVM versions. I was suggesting that we could pass a node to it so that it returns the right jvm options. That way, we don't need to fix them after the fact. Does that makes sense?",
        "createdAt" : "2020-03-23T13:17:04Z",
        "updatedAt" : "2020-03-23T13:17:05Z",
        "lastEditedBy" : "d8c7cf80-a55a-474c-a4f4-f60a9efda52c",
        "tags" : [
        ]
      },
      {
        "id" : "4227dc1c-4b9d-46cb-bead-e2396534a253",
        "parentId" : "a7cc0e66-e1b8-45b5-ae6b-68197256f018",
        "authorId" : "fe0be475-2786-4ac9-8152-c07fa363b977",
        "body" : "Hello @ijuma \r\n\r\nI assume you are writing about `security_config.py` kafka_opts function:\r\nIs it correct?\r\n\r\nIf yes, then it seems all options are supported in java since JDK7 or even earlier:\r\nCan you, please, clarify, what specific jvm options should be fixed?\r\n\r\nhttps://docs.oracle.com/javase/7/docs/technotes/guides/security/jgss/tutorials/LoginConfigFile.html\r\n\r\n```\r\n    @property\r\n    def kafka_opts(self, node):\r\n        if self.has_sasl:\r\n            if self.static_jaas_conf:\r\n                return \"\\\"-Djava.security.auth.login.config=%s -Djava.security.krb5.conf=%s\\\"\" % (SecurityConfig.JAAS_CONF_PATH, SecurityConfig.KRB5CONF_PATH)\r\n            else:\r\n                return \"\\\"-Djava.security.krb5.conf=%s\\\"\" % SecurityConfig.KRB5CONF_PATH\r\n        else:\r\n            return \"\"\r\n```",
        "createdAt" : "2020-03-24T11:17:29Z",
        "updatedAt" : "2020-03-24T11:17:29Z",
        "lastEditedBy" : "fe0be475-2786-4ac9-8152-c07fa363b977",
        "tags" : [
        ]
      },
      {
        "id" : "130e6b98-fd63-4ef2-8429-5ed83c87c06f",
        "parentId" : "a7cc0e66-e1b8-45b5-ae6b-68197256f018",
        "authorId" : "fe0be475-2786-4ac9-8152-c07fa363b977",
        "body" : "Hello @ijuma \r\n\r\nCan you, please, explain your proposal for `kafka_opts` one more time :)\r\nI really want to fix it.",
        "createdAt" : "2020-03-25T16:42:27Z",
        "updatedAt" : "2020-03-25T16:42:27Z",
        "lastEditedBy" : "fe0be475-2786-4ac9-8152-c07fa363b977",
        "tags" : [
        ]
      },
      {
        "id" : "7130c090-684b-4086-8e07-64ae68ec11be",
        "parentId" : "a7cc0e66-e1b8-45b5-ae6b-68197256f018",
        "authorId" : "d8c7cf80-a55a-474c-a4f4-f60a9efda52c",
        "body" : "My bad. The unsupported options come directly from the shell scripts. You are overriding depending on the JVM version. Makes sense.",
        "createdAt" : "2020-03-25T16:46:31Z",
        "updatedAt" : "2020-03-25T16:46:32Z",
        "lastEditedBy" : "d8c7cf80-a55a-474c-a4f4-f60a9efda52c",
        "tags" : [
        ]
      },
      {
        "id" : "b9b9f3c6-6cd2-4e3f-8a3e-2cd43912ed25",
        "parentId" : "a7cc0e66-e1b8-45b5-ae6b-68197256f018",
        "authorId" : "fe0be475-2786-4ac9-8152-c07fa363b977",
        "body" : "Thanks for the reply!\r\n\r\nIs everything OK with the PR?\r\nShould I additionally check some other tests?",
        "createdAt" : "2020-03-25T16:50:13Z",
        "updatedAt" : "2020-03-25T16:50:14Z",
        "lastEditedBy" : "fe0be475-2786-4ac9-8152-c07fa363b977",
        "tags" : [
        ]
      }
    ],
    "commit" : "8efc9a193923ffd02a81492e1dacf5f284387967",
    "line" : 10,
    "diffHunk" : "@@ -1,1 +167,171 @@            args['kafka_opts'] = \"\\\"%s\\\"\" % self.kafka_opts_override\n        else:\n            args['kafka_opts'] = self.security_config.kafka_opts\n\n        cmd = fix_opts_for_new_jvm(node)"
  },
  {
    "id" : "23bc14cf-1e88-4073-8eaf-7d9c707ecd73",
    "prId" : 8192,
    "prUrl" : "https://github.com/apache/kafka/pull/8192#pullrequestreview-366701863",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4192390a-c3da-4125-bbef-092b814c03c5",
        "parentId" : null,
        "authorId" : "ee0b6cae-6823-4c4c-9c16-426b9b05a516",
        "body" : "this is not ideal but requires more refactoring to be able support multiple JmxTools running at once",
        "createdAt" : "2020-02-28T21:40:08Z",
        "updatedAt" : "2020-02-29T00:41:22Z",
        "lastEditedBy" : "ee0b6cae-6823-4c4c-9c16-426b9b05a516",
        "tags" : [
        ]
      }
    ],
    "commit" : "78b03eb5b9fb4fc4f19a58dd163cf31585d6ee97",
    "line" : 36,
    "diffHunk" : "@@ -1,1 +279,283 @@    def _wait_until_partitions_assigned(self, node, timeout_sec=60):\n        if self.jmx_object_names is not None:\n            raise Exception(\"'wait_until_partitions_assigned' is not supported while using 'jmx_object_names'/'jmx_attributes'\")\n        jmx_tool = JmxTool(self.context, jmx_poll_ms=100)\n        jmx_tool.jmx_object_names = [\"kafka.consumer:type=consumer-coordinator-metrics,client-id=%s\" % self.client_id]"
  }
]