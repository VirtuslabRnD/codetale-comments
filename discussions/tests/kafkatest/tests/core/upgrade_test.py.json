[
  {
    "id" : "44d5b9ae-73a2-44ab-836a-00e15e8cf674",
    "prId" : 8384,
    "prUrl" : "https://github.com/apache/kafka/pull/8384#pullrequestreview-386536344",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e3da6e55-fec4-47f6-8f40-4d8125c238b9",
        "parentId" : null,
        "authorId" : "915b2f67-05e6-4824-939a-398e7be58870",
        "body" : "looks like the test is failing at below `self.kafka.stop_node(node)` call, without `snapshot.trust.empty` config.  Can we check for topic/znode existence in ZK after upgrade. We can use ZK cli/kafka-topic describe? This way we can test ZK server availability and znode  data existence after upgrade.",
        "createdAt" : "2020-03-31T14:05:11Z",
        "updatedAt" : "2020-04-02T15:21:11Z",
        "lastEditedBy" : "915b2f67-05e6-4824-939a-398e7be58870",
        "tags" : [
        ]
      },
      {
        "id" : "1dc9a29b-74b3-486e-8f6c-c9db846990e5",
        "parentId" : "e3da6e55-fec4-47f6-8f40-4d8125c238b9",
        "authorId" : "e0554c25-f6f3-4e49-a325-bcc5d4dc5fb2",
        "body" : "All set -- good point about making the failure look more intuitive by trying to describe the topic before doing the Kafka roll.  I confirmed the failure now happens on the describe topic command when leaving off the `snapshot.trust.empty=true` config, and I confirmed the tests still succeed when that config is left in.",
        "createdAt" : "2020-04-02T15:23:23Z",
        "updatedAt" : "2020-04-02T15:23:23Z",
        "lastEditedBy" : "e0554c25-f6f3-4e49-a325-bcc5d4dc5fb2",
        "tags" : [
        ]
      }
    ],
    "commit" : "2366315089695797a1b67fd8d4664ef1584e738e",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +50,54 @@        self.logger.info(\"Upgrade ZooKeeper from %s to %s\" % (str(self.zk.nodes[0].version), str(DEV_BRANCH)))\n        self.zk.set_version(DEV_BRANCH)\n        self.zk.restart_cluster()\n        # Confirm we have a successful ZoKeeper upgrade by describing the topic.\n        # Not trying to detect a problem here leads to failure in the ensuing Kafka roll, which would be a less"
  }
]