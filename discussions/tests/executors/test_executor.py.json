[
  {
    "id" : "9a41fa1a-67ab-4739-9a6c-db4c5dba63d6",
    "prId" : 5162,
    "prUrl" : "https://github.com/apache/airflow/pull/5162#pullrequestreview-231915065",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f2c977f5-52cb-4eb6-a1b2-bee35c1c97db",
        "parentId" : null,
        "authorId" : "e29ffafb-ac51-434b-b9e0-af262caae1ee",
        "body" : "Don't you want to _mock_ the `heartbeat` here? \r\nIf so you could remove that extra statement and just patch the `TestExecutor.heartbeat`",
        "createdAt" : "2019-04-28T09:20:37Z",
        "updatedAt" : "2019-04-29T21:08:41Z",
        "lastEditedBy" : "e29ffafb-ac51-434b-b9e0-af262caae1ee",
        "tags" : [
        ]
      },
      {
        "id" : "746c6202-b666-4ca8-a3d0-2e6e3273ff35",
        "parentId" : "f2c977f5-52cb-4eb6-a1b2-bee35c1c97db",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "I don't understand what you mean? (The do_update or not is probably not needed anymore, but I left it around)",
        "createdAt" : "2019-04-29T08:22:17Z",
        "updatedAt" : "2019-04-29T21:08:41Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "6ebd7d0d-21ac-4580-b34f-a5c3ca95b4f5",
        "parentId" : "f2c977f5-52cb-4eb6-a1b2-bee35c1c97db",
        "authorId" : "e29ffafb-ac51-434b-b9e0-af262caae1ee",
        "body" : "You have `do_update=False` and `do_update=True` (default). The `do_update` flag only decides whether to run the `heartbeat` function or not (to speed up tests). So why not remove that flag and use mocking to not to run the `heartbeat` function.",
        "createdAt" : "2019-04-29T17:43:50Z",
        "updatedAt" : "2019-04-29T21:08:41Z",
        "lastEditedBy" : "e29ffafb-ac51-434b-b9e0-af262caae1ee",
        "tags" : [
        ]
      },
      {
        "id" : "de30966c-2ce5-4c45-a8e0-692c8ee09096",
        "parentId" : "f2c977f5-52cb-4eb6-a1b2-bee35c1c97db",
        "authorId" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "body" : "I think it's easier to do it via the constructor. There is no direct added benefit of using mock in this case especially that this is purely Test-specific class so we can implement it's behaviour as we want rather than mock it.",
        "createdAt" : "2019-04-29T18:40:29Z",
        "updatedAt" : "2019-04-29T21:08:41Z",
        "lastEditedBy" : "e8563344-32ea-4c07-9731-a2fed8d2edf2",
        "tags" : [
        ]
      },
      {
        "id" : "8275211b-5edd-4e29-8754-f40c178ec24c",
        "parentId" : "f2c977f5-52cb-4eb6-a1b2-bee35c1c97db",
        "authorId" : "e29ffafb-ac51-434b-b9e0-af262caae1ee",
        "body" : ">[...] that this is purely Test-specific class so we can implement it's behaviour as we want rather than mock it.\r\n\r\nThat's actually true. Agreed. :) LGTM then.",
        "createdAt" : "2019-04-29T21:36:26Z",
        "updatedAt" : "2019-04-29T21:37:31Z",
        "lastEditedBy" : "e29ffafb-ac51-434b-b9e0-af262caae1ee",
        "tags" : [
        ]
      }
    ],
    "commit" : "902fc3403f5fe45a46a3139b1994f00033e04694",
    "line" : 39,
    "diffHunk" : "@@ -1,1 +43,47 @@\n    def heartbeat(self):\n        if not self.do_update:\n            return\n"
  }
]