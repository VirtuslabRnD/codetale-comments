[
  {
    "id" : "f6805992-df91-4b30-bd5b-cba19340fbf1",
    "prId" : 8546,
    "prUrl" : "https://github.com/apache/kafka/pull/8546#pullrequestreview-401156505",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "935fbfc4-f0a1-4b59-8eb6-3ee273d554db",
        "parentId" : null,
        "authorId" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "body" : "Great example. Wondering if it is correct? \r\n```\r\n--parameters '\\''\r\n```\r\n\r\nShould this be\r\n```\r\n--parameters '\\'\r\n```\r\n\r\nbecause that the end there is `'\\'`",
        "createdAt" : "2020-04-24T21:39:07Z",
        "updatedAt" : "2020-04-24T21:39:08Z",
        "lastEditedBy" : "9baadc38-cd41-4762-be0c-791258ced78c",
        "tags" : [
        ]
      },
      {
        "id" : "128a027b-b437-49ec-9aac-7d2377882ba4",
        "parentId" : "935fbfc4-f0a1-4b59-8eb6-3ee273d554db",
        "authorId" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "body" : "Haha, having just spent several hours settling on this exact sequence of characters, I can certify that it's correct ;) \r\n\r\nActually, I would like to get at least one other person to try it out. Do you mind?\r\n\r\nTo answer your question, here's how it works:\r\nfirst string (wrapped in single quotes for consistency with the second string): `--parameters `\r\nfirst escaped single quote: `\\'`\r\nsecond string (wrapped in single quotes to avoid evaluating the special characters): `{\"from_version\":\"0.10.1.1\",\"to_version\":\"2.6.0-SNAPSHOT\"}`\r\nsecond escaped single quote: `\\'`\r\n\r\nFollowing Bash rules, a sequence of strings and characters just get concatenated, so all of the above gets smashed together to form the desired final string:\r\n`--parameters '{\"from_version\":\"0.10.1.1\",\"to_version\":\"2.6.0-SNAPSHOT\"}'`\r\n\r\nwhich will then be evaluated _again_ by Bash inside the docker container, so that the final argument to ducktape is the desired argument list: `--parameters`, followed by `{\"from_version\":\"0.10.1.1\",\"to_version\":\"2.6.0-SNAPSHOT\"}`.",
        "createdAt" : "2020-04-24T22:26:23Z",
        "updatedAt" : "2020-04-24T22:26:24Z",
        "lastEditedBy" : "f84c555e-0e5d-4773-b994-4121b6b8dada",
        "tags" : [
        ]
      },
      {
        "id" : "748eff98-22aa-4bd5-aadb-210199ef4632",
        "parentId" : "935fbfc4-f0a1-4b59-8eb6-3ee273d554db",
        "authorId" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "body" : "I tried it out on Friday but left it running and forgot to report back. It passed for me üëç ",
        "createdAt" : "2020-04-27T17:10:46Z",
        "updatedAt" : "2020-04-27T17:10:47Z",
        "lastEditedBy" : "d97f50bf-60f9-45b3-81a0-a24a5f42f740",
        "tags" : [
        ]
      }
    ],
    "commit" : "9aa835dfdc8266fc8b682293675493f8fd4865d8",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +39,43 @@* Run a specific test method with specific parameters\n```\nTC_PATHS=\"tests/kafkatest/tests/streams/streams_upgrade_test.py::StreamsUpgradeTest.test_metadata_upgrade\" _DUCKTAPE_OPTIONS='--parameters '\\''{\"from_version\":\"0.10.1.1\",\"to_version\":\"2.6.0-SNAPSHOT\"}'\\' bash tests/docker/run_tests.sh\n```\n* Run tests with a different JVM"
  },
  {
    "id" : "f9598901-8a4a-48e0-80f8-48a65f780cf7",
    "prId" : 10915,
    "prUrl" : "https://github.com/apache/kafka/pull/10915#pullrequestreview-694350443",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "84e50208-5dc4-4c5c-b3ac-7ef546343c8d",
        "parentId" : null,
        "authorId" : "915b2f67-05e6-4824-939a-398e7be58870",
        "body" : "looks like this conflicts with existing usage running tests with debug logs (check above)\r\n`_DUCKTAPE_OPTIONS=\"--debug\" bash tests/docker/run_tests.sh | tee debug_logs.txt`\r\n\r\nCan we use different option to enable debugger ex: --debugpy (or) --enable-debugger ",
        "createdAt" : "2021-06-23T21:14:38Z",
        "updatedAt" : "2021-06-23T21:14:39Z",
        "lastEditedBy" : "915b2f67-05e6-4824-939a-398e7be58870",
        "tags" : [
        ]
      },
      {
        "id" : "99c47b44-f637-4171-a8ff-75c694b4849e",
        "parentId" : "84e50208-5dc4-4c5c-b3ac-7ef546343c8d",
        "authorId" : "d4a29de4-254d-4d4d-b37e-651082f95fa9",
        "body" : "We can still keep this - I do need to update run_tests.sh to pass _DUCKTAPE_OPTIONS after the `--`.\r\nMy idea was that I didn't want to make sure the flags don't overlap between ducktape and ducker-ak, hence I changed ducker-ak to expect ducktape args after the `--` - like this `ducker-ak test my_test.py -- --ducktape-flag`. \r\nI am, however, open to simply using a different flag name - it is unlikely we'll add too many flags to the ducker-ak run command anyway, so we can simply make sure they don't match the ducktape ones. \r\n@omkreddy and @ewencp (with whom we had similar conversation in a different repo) - which one do you prefer?",
        "createdAt" : "2021-06-24T05:28:03Z",
        "updatedAt" : "2021-06-24T05:28:03Z",
        "lastEditedBy" : "d4a29de4-254d-4d4d-b37e-651082f95fa9",
        "tags" : [
        ]
      },
      {
        "id" : "26f7d737-f382-413a-badf-17e2f54f912b",
        "parentId" : "84e50208-5dc4-4c5c-b3ac-7ef546343c8d",
        "authorId" : "f4cc0a00-0225-4972-8b58-0b97edf58337",
        "body" : "As in other thread, I'm fine either way. I prefer just getting things to a clean, consistent state, especially since these are tests so we don't really have the same compatibility requirements. But if that creates too much overhead/confusion (especially since we need to continue running tests on older branches), this alternative approach seems acceptable even if a bit unusual.",
        "createdAt" : "2021-06-24T05:33:31Z",
        "updatedAt" : "2021-06-24T05:33:31Z",
        "lastEditedBy" : "f4cc0a00-0225-4972-8b58-0b97edf58337",
        "tags" : [
        ]
      },
      {
        "id" : "4cd90287-8c5f-4b52-b91d-75b04e3ea163",
        "parentId" : "84e50208-5dc4-4c5c-b3ac-7ef546343c8d",
        "authorId" : "915b2f67-05e6-4824-939a-398e7be58870",
        "body" : "@stan-confluent I am fine with current approach. Can you update `run_tests.sh` file?",
        "createdAt" : "2021-06-28T13:53:11Z",
        "updatedAt" : "2021-06-28T13:53:11Z",
        "lastEditedBy" : "915b2f67-05e6-4824-939a-398e7be58870",
        "tags" : [
        ]
      },
      {
        "id" : "62986444-e5fc-46d0-8685-667364fcd3d1",
        "parentId" : "84e50208-5dc4-4c5c-b3ac-7ef546343c8d",
        "authorId" : "d4a29de4-254d-4d4d-b37e-651082f95fa9",
        "body" : "@omkreddy I've updated the run_tests.sh file to pass ducktape args after -- if those are present, can you please take another look?\r\nI've also ran shellcheck and fixed the violations found in the changed bits of code.\r\nThanks!",
        "createdAt" : "2021-06-28T20:08:38Z",
        "updatedAt" : "2021-06-28T20:08:39Z",
        "lastEditedBy" : "d4a29de4-254d-4d4d-b37e-651082f95fa9",
        "tags" : [
        ]
      }
    ],
    "commit" : "ea95e183271d0042ee1908d7390d9217ad13c157",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +53,57 @@```\n* Debug tests in VS Code:\n  - Run test with `--debug` flag (can be before or after file name):\n    ```\n    tests/docker/ducker-ak up; tests/docker/ducker-ak test tests/kafkatest/tests/core/security_test.py --debug"
  }
]