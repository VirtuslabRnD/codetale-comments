[
  {
    "id" : "74805925-331a-4de9-9881-c0bc4e7270ca",
    "prId" : 4601,
    "prUrl" : "https://github.com/apache/airflow/pull/4601#pullrequestreview-210717329",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e0db5464-e7fb-4639-b1b7-26846e4efb30",
        "parentId" : null,
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "I know we were just testing that it loaded without error, but it always feels a bit odd to not see any assertions in a test.\r\n\r\nHow about we add something like\r\n\r\n```python\r\nimport airflow.utils.log.wasb_task_handler.WasbTaskHandler\r\nlogger = logging.getLogger('airflow.task.x')\r\nself.assertIsInstance(logger.handlers[0], airflow.utils.log.wasb_task_handler.WasbTaskHandler)\r\n```",
        "createdAt" : "2019-02-25T11:00:56Z",
        "updatedAt" : "2019-03-05T16:36:35Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "c2b38969-f393-4578-8c6d-9ef3a5bf3929",
        "parentId" : "e0db5464-e7fb-4639-b1b7-26846e4efb30",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "(I've done that from memory- that may not be the property name on logger)",
        "createdAt" : "2019-02-25T11:01:18Z",
        "updatedAt" : "2019-03-05T16:36:35Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "8518f4ad-abd8-4d03-ab0c-bce91b1e82c3",
        "parentId" : "e0db5464-e7fb-4639-b1b7-26846e4efb30",
        "authorId" : "1e820cbf-98a9-4d3c-9317-ef70bfbec30c",
        "body" : "Sure. I'll add that.",
        "createdAt" : "2019-02-26T13:25:46Z",
        "updatedAt" : "2019-03-05T16:36:35Z",
        "lastEditedBy" : "1e820cbf-98a9-4d3c-9317-ef70bfbec30c",
        "tags" : [
        ]
      },
      {
        "id" : "9f208908-45ec-476f-9dcf-2e06c95cdea4",
        "parentId" : "e0db5464-e7fb-4639-b1b7-26846e4efb30",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "@ttanay Any chance you'd have a chance to look at this last change?",
        "createdAt" : "2019-03-01T15:44:23Z",
        "updatedAt" : "2019-03-05T16:36:35Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "82ba3e8a-32c9-4819-ad7d-2727c1fb1bf9",
        "parentId" : "e0db5464-e7fb-4639-b1b7-26846e4efb30",
        "authorId" : "1e820cbf-98a9-4d3c-9317-ef70bfbec30c",
        "body" : "Hey @ashb \r\nDidn't get a chance to look at it. Exams :/\r\nWill get it done by Tuesday.",
        "createdAt" : "2019-03-01T21:00:15Z",
        "updatedAt" : "2019-03-05T16:36:35Z",
        "lastEditedBy" : "1e820cbf-98a9-4d3c-9317-ef70bfbec30c",
        "tags" : [
        ]
      },
      {
        "id" : "a10ab422-79ab-453a-8040-607efd96783e",
        "parentId" : "e0db5464-e7fb-4639-b1b7-26846e4efb30",
        "authorId" : "1e820cbf-98a9-4d3c-9317-ef70bfbec30c",
        "body" : "Hey @ashb \r\nI tried this after `configure_logging` is called in the change above, and also in a DAG:\r\n```\r\nimport logging\r\nlogger = logging.getLogger('airflow.task.x')\r\n```\r\nBut, the `logger.handlers` was an empty list `[]`.\r\n\r\nAm I missing something?",
        "createdAt" : "2019-03-05T12:00:37Z",
        "updatedAt" : "2019-03-05T16:36:35Z",
        "lastEditedBy" : "1e820cbf-98a9-4d3c-9317-ef70bfbec30c",
        "tags" : [
        ]
      },
      {
        "id" : "1d0d62d8-68b1-4a0a-8bd7-3c4c3b792848",
        "parentId" : "e0db5464-e7fb-4639-b1b7-26846e4efb30",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Hmmm, I'll double check. Did you also try with just `logging.getLogger('airflow.task')`\r\n",
        "createdAt" : "2019-03-05T12:21:16Z",
        "updatedAt" : "2019-03-05T16:36:35Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "4bb32b3c-1339-4ddc-bc7f-883b391500f5",
        "parentId" : "e0db5464-e7fb-4639-b1b7-26846e4efb30",
        "authorId" : "1e820cbf-98a9-4d3c-9317-ef70bfbec30c",
        "body" : "No, but, it works now. Thanks!",
        "createdAt" : "2019-03-05T12:32:52Z",
        "updatedAt" : "2019-03-05T16:36:35Z",
        "lastEditedBy" : "1e820cbf-98a9-4d3c-9317-ef70bfbec30c",
        "tags" : [
        ]
      },
      {
        "id" : "2fb9a65e-2784-444a-8d07-cb28609820f9",
        "parentId" : "e0db5464-e7fb-4639-b1b7-26846e4efb30",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Ah that makes sense. `airflow.task.x` isn't directly configured with handlers (hence the empty list) but when emitting messages the logging framework will go up the hierarchy until it finds some (that's a little bit simplified, but close)",
        "createdAt" : "2019-03-05T14:37:38Z",
        "updatedAt" : "2019-03-05T16:36:35Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "1a89b72e-792d-4bd7-9731-2082dd411ab3",
        "parentId" : "e0db5464-e7fb-4639-b1b7-26846e4efb30",
        "authorId" : "1e820cbf-98a9-4d3c-9317-ef70bfbec30c",
        "body" : "Oh. Now I get it. Thanks!",
        "createdAt" : "2019-03-05T14:44:41Z",
        "updatedAt" : "2019-03-05T16:36:35Z",
        "lastEditedBy" : "1e820cbf-98a9-4d3c-9317-ef70bfbec30c",
        "tags" : [
        ]
      }
    ],
    "commit" : "ee59e6d5ee58cd4e2725ea1aa493af26ab4a8984",
    "line" : 16,
    "diffHunk" : "@@ -1,1 +264,268 @@\n        six.moves.reload_module(airflow_local_settings)\n        configure_logging()\n\n        logger = logging.getLogger('airflow.task')"
  },
  {
    "id" : "131f8173-0b71-450e-a3f8-bc718c3ea23e",
    "prId" : 4601,
    "prUrl" : "https://github.com/apache/airflow/pull/4601#pullrequestreview-210719062",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "aa672ca3-5f16-4448-827d-ce6bcd4a82dd",
        "parentId" : null,
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Failing with:\r\n\r\n`   AssertionError: <airflow.utils.log.file_task_handler.FileTaskHandler object at 0x7f5bf7d1a950> is not an instance of <class 'airflow.utils.log.wasb_task_handler.WasbTaskHandler'>`\r\n\r\nBecause of how configure logging works we will need to reload  before calling configure_ logging() airflow.config_templates.airflow_local_settings:\r\n\r\n```\r\nfrom six.moves import reload_module\r\nimport airflow.config_templates.airflow_local_settings\r\nreload_module(airflow.config_templates.airflow_local_settings)\r\nconfigure_logging()\r\n```",
        "createdAt" : "2019-03-05T14:47:40Z",
        "updatedAt" : "2019-03-05T16:36:35Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      }
    ],
    "commit" : "ee59e6d5ee58cd4e2725ea1aa493af26ab4a8984",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +267,271 @@\n        logger = logging.getLogger('airflow.task')\n        self.assertIsInstance(logger.handlers[0], WasbTaskHandler)\n\n"
  }
]