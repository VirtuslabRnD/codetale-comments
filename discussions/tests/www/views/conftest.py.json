[
  {
    "id" : "c22a92dd-c0f0-4026-adf4-f9c20519b0d1",
    "prId" : 15666,
    "prUrl" : "https://github.com/apache/airflow/pull/15666#pullrequestreview-653291945",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7dc5dd5e-4c57-441f-b89c-1098726d20c5",
        "parentId" : null,
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Shouldn't this be called?\r\n\r\n```suggestion\r\n    yield settings.Session()\r\n```",
        "createdAt" : "2021-05-06T08:53:24Z",
        "updatedAt" : "2021-05-06T08:53:24Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "ee8b466c-bca4-4ee3-8040-9d1ef330cf4e",
        "parentId" : "7dc5dd5e-4c57-441f-b89c-1098726d20c5",
        "authorId" : "a5092e56-4956-45ec-9914-ecec6b63df73",
        "body" : "No, this is intentionally returning a shared session object (`settings.Session` is a `sqlalchemy.orm.session.Session` *instance* -- named pretty poorly IMO but well). If we want a new session object we can just use `create_session()` instead (which is done extensively).\r\n\r\nThis shared session is only used in very selected places. I think some of them can actually be replaced by `create_session()` (and did replace somein this PR), but didnâ€™t bother to check all of them TBH.",
        "createdAt" : "2021-05-06T10:19:20Z",
        "updatedAt" : "2021-05-06T10:19:20Z",
        "lastEditedBy" : "a5092e56-4956-45ec-9914-ecec6b63df73",
        "tags" : [
        ]
      },
      {
        "id" : "0061bf89-a924-4d8a-a3c3-5caacd6948c2",
        "parentId" : "7dc5dd5e-4c57-441f-b89c-1098726d20c5",
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "Create session does `airflow.settings.Session()` -- accessing properties of the scoped_session object is actually proxying to the session object\r\n\r\nhttps://github.com/sqlalchemy/sqlalchemy/blob/adb3a302ef1f25ae41b2a83ce857e3ed2613c84d/lib/sqlalchemy/orm/scoping.py#L67\r\n\r\nEither way the behaviour is the same, it just feels more \"correct\" to me to get the actual session object back, not the magic proxy.",
        "createdAt" : "2021-05-06T11:15:24Z",
        "updatedAt" : "2021-05-06T11:15:24Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      }
    ],
    "commit" : "50221bca326aa262dcb890070064e106d193dc02",
    "line" : 36,
    "diffHunk" : "@@ -1,1 +34,38 @@def session():\n    settings.configure_orm()\n    yield settings.Session\n\n"
  }
]