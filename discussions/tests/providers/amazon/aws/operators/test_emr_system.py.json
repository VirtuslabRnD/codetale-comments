[
  {
    "id" : "aa3172f1-44f4-4b75-b6ab-cdbf9ee40b2d",
    "prId" : 8618,
    "prUrl" : "https://github.com/apache/airflow/pull/8618#pullrequestreview-411221978",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "58575e25-bfcd-4e6c-8e51-d0f73b67ade9",
        "parentId" : null,
        "authorId" : "e29ffafb-ac51-434b-b9e0-af262caae1ee",
        "body" : "Shouldn't we remove these default roles at the end? So that you can call this tests over and over.\r\nI also used [pytest fixtures](https://docs.pytest.org/en/latest/fixture.html).\r\n\r\n",
        "createdAt" : "2020-05-13T18:33:17Z",
        "updatedAt" : "2020-05-13T18:33:17Z",
        "lastEditedBy" : "e29ffafb-ac51-434b-b9e0-af262caae1ee",
        "tags" : [
        ]
      },
      {
        "id" : "1f8c350f-6531-4e32-a7a3-0b0d8ddf5b72",
        "parentId" : "58575e25-bfcd-4e6c-8e51-d0f73b67ade9",
        "authorId" : "aeab690b-2491-4cd7-95ca-94640c32271c",
        "body" : "I don't think it's necessary to remove these default roles for running the tests. The command `aws emr create-default-roles` will only take effect if the associated roles for running EMR are not set in the AWS CLI config file. Otherwise, it will do nothing.",
        "createdAt" : "2020-05-13T18:46:48Z",
        "updatedAt" : "2020-05-13T19:04:49Z",
        "lastEditedBy" : "aeab690b-2491-4cd7-95ca-94640c32271c",
        "tags" : [
        ]
      },
      {
        "id" : "4f8c0792-cddf-42f6-a3a3-187bc482a775",
        "parentId" : "58575e25-bfcd-4e6c-8e51-d0f73b67ade9",
        "authorId" : "aeab690b-2491-4cd7-95ca-94640c32271c",
        "body" : "To fully clean up the default roles created, it involves [six API calls](https://aws.amazon.com/premiumsupport/knowledge-center/emr-default-role-invalid/). I think in the future, there will be a dedicated managed AWS account for running system tests. So we can simply reuse the default roles.",
        "createdAt" : "2020-05-13T18:49:47Z",
        "updatedAt" : "2020-05-13T19:05:31Z",
        "lastEditedBy" : "aeab690b-2491-4cd7-95ca-94640c32271c",
        "tags" : [
        ]
      },
      {
        "id" : "90d4e2a5-e002-4ba3-b780-ae1297bfebe6",
        "parentId" : "58575e25-bfcd-4e6c-8e51-d0f73b67ade9",
        "authorId" : "aeab690b-2491-4cd7-95ca-94640c32271c",
        "body" : "For pytest fixtures, it seems that all shared fixtures should go into the `contest.py` ( I cannot find this to be configurable at first glance. Please let me know if I am wrong). So it does not quite fit with how we store our fixtures at the moment (in the `*_system_helper.py` file and it is a mix of `unittest xunit-style setup` and `pytest fixtures` - maybe we can unify it in the future?). And I think the current code in this PR provides the least boilerplate code",
        "createdAt" : "2020-05-13T18:55:49Z",
        "updatedAt" : "2020-05-13T18:59:55Z",
        "lastEditedBy" : "aeab690b-2491-4cd7-95ca-94640c32271c",
        "tags" : [
        ]
      },
      {
        "id" : "f42cf3bf-9322-4124-af01-835d06a51ed4",
        "parentId" : "58575e25-bfcd-4e6c-8e51-d0f73b67ade9",
        "authorId" : "e29ffafb-ac51-434b-b9e0-af262caae1ee",
        "body" : "Thanks for the explanation. Sounds good to me.",
        "createdAt" : "2020-05-13T19:11:39Z",
        "updatedAt" : "2020-05-13T19:11:39Z",
        "lastEditedBy" : "e29ffafb-ac51-434b-b9e0-af262caae1ee",
        "tags" : [
        ]
      }
    ],
    "commit" : "2245224ebfad00176f2d8a0b7454b1a7f3d7520c",
    "line" : 27,
    "diffHunk" : "@@ -1,1 +25,29 @@    @classmethod\n    def setup_class(cls):\n        cls.create_emr_default_roles()\n\n    def test_run_example_dag_emr_automatic_steps(self):"
  }
]