[
  {
    "id" : "c6ddd9a8-8d77-408e-8ec1-ead4722dfac8",
    "prId" : 13784,
    "prUrl" : "https://github.com/apache/airflow/pull/13784#pullrequestreview-572628068",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6e7813ac-1c5f-4f24-8563-cb0b45cc6b1c",
        "parentId" : null,
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "This is another small fix. An error is generated when exiting the process, but it did not cause any errors, but only noise in the log.\r\n```\r\n========================================== 9 failed, 8 passed, 3 skipped, 7 errors in 12.91s ==========================================\r\n[2021-01-20 19:52:29,766] {_metadata.py:104} WARNING - Compute Engine Metadata server unavailable onattempt 1 of 3. Reason: timed out\r\n[2021-01-20 19:52:29,769] {_metadata.py:104} WARNING - Compute Engine Metadata server unavailable onattempt 2 of 3. Reason: [Errno 111] Connection refused\r\n[2021-01-20 19:52:29,774] {_metadata.py:104} WARNING - Compute Engine Metadata server unavailable onattempt 3 of 3. Reason: [Errno 111] Connection refused\r\n[2021-01-20 19:52:29,774] {_default.py:246} WARNING - Authentication failed using Compute Engine authentication due to unavailable metadata server.\r\nError in atexit._run_exitfuncs:\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/logging/__init__.py\", line 1946, in shutdown\r\n    h.close()\r\n  File \"/opt/airflow/airflow/providers/google/cloud/log/stackdriver_task_handler.py\", line 345, in close\r\n    self._transport.flush()\r\n  File \"/usr/local/lib/python3.6/site-packages/cached_property.py\", line 36, in __get__\r\n    value = obj.__dict__[self.func.__name__] = self.func(obj)\r\n  File \"/opt/airflow/airflow/providers/google/cloud/log/stackdriver_task_handler.py\", line 120, in _transport\r\n    return self.transport_type(self._client, self.name)\r\n  File \"/usr/local/lib/python3.6/site-packages/cached_property.py\", line 36, in __get__\r\n    value = obj.__dict__[self.func.__name__] = self.func(obj)\r\n  File \"/opt/airflow/airflow/providers/google/cloud/log/stackdriver_task_handler.py\", line 108, in _client\r\n    key_path=self.gcp_key_path, scopes=self.scopes, disable_logging=True\r\n  File \"/opt/airflow/airflow/providers/google/cloud/utils/credentials_provider.py\", line 309, in get_credentials_and_project_id\r\n    return _CredentialProvider(*args, **kwargs).get_credentials_and_project()\r\n  File \"/opt/airflow/airflow/providers/google/cloud/utils/credentials_provider.py\", line 242, in get_credentials_and_project\r\n    credentials, project_id = self._get_credentials_using_adc()\r\n  File \"/opt/airflow/airflow/providers/google/cloud/utils/credentials_provider.py\", line 295, in _get_credentials_using_adc\r\n    credentials, project_id = google.auth.default(scopes=self.scopes)\r\n  File \"/usr/local/lib/python3.6/site-packages/google/auth/_default.py\", line 356, in default\r\n    raise exceptions.DefaultCredentialsError(_HELP_MESSAGE)\r\ngoogle.auth.exceptions.DefaultCredentialsError: Could not automatically determine credentials. Please set GOOGLE_APPLICATION_CREDENTIALS or explicitly create credentials and re-run the application. For more information, please see https://cloud.google.com/docs/authentication/getting-started\r\n```",
        "createdAt" : "2021-01-20T20:40:41Z",
        "updatedAt" : "2021-02-02T11:00:47Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      }
    ],
    "commit" : "008668d63981e08e18f38e704487ff2bfc5eb606",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +36,40 @@\n\ndef _remove_stackdriver_handlers():\n    for handler_ref in reversed(logging._handlerList[:]):\n        handler = handler_ref()"
  }
]