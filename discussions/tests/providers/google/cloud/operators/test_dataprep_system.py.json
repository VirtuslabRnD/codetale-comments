[
  {
    "id" : "81ed646c-e452-4881-a799-3f4eb100cf46",
    "prId" : 10304,
    "prUrl" : "https://github.com/apache/airflow/pull/10304#pullrequestreview-473554507",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "45db0ead-8aaf-4106-b472-a5511b461b61",
        "parentId" : null,
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "We should skip this test when this environment variable is not set, and not set a dummy value.",
        "createdAt" : "2020-08-24T11:27:59Z",
        "updatedAt" : "2020-09-01T08:51:04Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      },
      {
        "id" : "c71e9c2d-2053-4243-90aa-f4e6683355d6",
        "parentId" : "45db0ead-8aaf-4106-b472-a5511b461b61",
        "authorId" : "f3fae8d9-b299-4135-b41a-46a4617874c4",
        "body" : "What do you mean by that? This is system test, it will be skipped in CI.",
        "createdAt" : "2020-08-24T14:25:19Z",
        "updatedAt" : "2020-09-01T08:51:04Z",
        "lastEditedBy" : "f3fae8d9-b299-4135-b41a-46a4617874c4",
        "tags" : [
        ]
      },
      {
        "id" : "6c47062b-bd83-4838-b53d-c30847015a19",
        "parentId" : "45db0ead-8aaf-4106-b472-a5511b461b61",
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "The missing variable should be detected when you try to run the test. When it is missing, a user-friendly message for the user should be displayed. We don't have tests for authorization data in environment variables yet, so you will probably need to create one.\r\nSee: \r\nhttps://github.com/apache/airflow/blob/ 7ee7d7c/TESTING.rst#adding-a-new-system-test\r\nhttps://github.com/apache/airflow/blob/ 7ee7d7c/tests/conftest.py#L337-L343\r\nhttps://github.com/apache/airflow/blob/ 7ee7d7c/tests/conftest.py#L248-L250\r\n",
        "createdAt" : "2020-08-24T14:39:51Z",
        "updatedAt" : "2020-09-01T08:51:04Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      }
    ],
    "commit" : "4419a17dff87098005beea6300a73989e035e654",
    "line" : 28,
    "diffHunk" : "@@ -1,1 +26,30 @@from tests.test_utils.gcp_system_helpers import CLOUD_DAG_FOLDER, GoogleSystemTest\n\nTOKEN = environ.get(\"DATAPREP_TOKEN\", \"dataprep-system-test-token\")\nEXTRA = {\"extra__dataprep__token\": TOKEN}\n"
  },
  {
    "id" : "31a960f3-f9db-40ee-a453-311a78f59a7f",
    "prId" : 10304,
    "prUrl" : "https://github.com/apache/airflow/pull/10304#pullrequestreview-475356454",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6e5ce08e-6e90-4832-92df-9ad1c66c3d90",
        "parentId" : null,
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "We don't use Google authorization, so we shouldn't use GoogleSystemTest. ",
        "createdAt" : "2020-08-24T14:35:05Z",
        "updatedAt" : "2020-09-01T08:51:04Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      },
      {
        "id" : "5a671ce3-347c-42b4-86dc-ead905b3a24f",
        "parentId" : "6e5ce08e-6e90-4832-92df-9ad1c66c3d90",
        "authorId" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "body" : "But it's in google providers package so we should be able to run it using `--system=google`. Also (I am not 100% sure) this system test may require some GCP resources to be easy to repeat.",
        "createdAt" : "2020-08-24T22:10:32Z",
        "updatedAt" : "2020-09-01T08:51:04Z",
        "lastEditedBy" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "tags" : [
        ]
      },
      {
        "id" : "df67215a-be9e-4161-993f-9ed349802ab8",
        "parentId" : "6e5ce08e-6e90-4832-92df-9ad1c66c3d90",
        "authorId" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "body" : "Good point, but we should still detect missing credentials.",
        "createdAt" : "2020-08-24T22:20:52Z",
        "updatedAt" : "2020-09-01T08:51:04Z",
        "lastEditedBy" : "07638d17-cc8b-40a4-abdc-7b39759362ab",
        "tags" : [
        ]
      },
      {
        "id" : "a4234d48-8126-4d79-bbb9-9ec3aa453ac0",
        "parentId" : "6e5ce08e-6e90-4832-92df-9ad1c66c3d90",
        "authorId" : "f3fae8d9-b299-4135-b41a-46a4617874c4",
        "body" : "I do not understand what is the problem here. ",
        "createdAt" : "2020-08-25T10:31:52Z",
        "updatedAt" : "2020-09-01T08:51:04Z",
        "lastEditedBy" : "f3fae8d9-b299-4135-b41a-46a4617874c4",
        "tags" : [
        ]
      },
      {
        "id" : "f3812c71-7de8-47c6-8882-f873b1e14f6c",
        "parentId" : "6e5ce08e-6e90-4832-92df-9ad1c66c3d90",
        "authorId" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "body" : "The test will fail if there's no real token. Developers should be aware of that. You should check if the system variable is set. If not then skip the test with useful message ",
        "createdAt" : "2020-08-25T16:25:30Z",
        "updatedAt" : "2020-09-01T08:51:04Z",
        "lastEditedBy" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "tags" : [
        ]
      },
      {
        "id" : "aad1d901-34c1-41f8-81e7-1e9ee7021e1c",
        "parentId" : "6e5ce08e-6e90-4832-92df-9ad1c66c3d90",
        "authorId" : "f3fae8d9-b299-4135-b41a-46a4617874c4",
        "body" : "I talked about it with Kamil yesterday and he explained me everything. ",
        "createdAt" : "2020-08-26T10:26:34Z",
        "updatedAt" : "2020-09-01T08:51:04Z",
        "lastEditedBy" : "f3fae8d9-b299-4135-b41a-46a4617874c4",
        "tags" : [
        ]
      }
    ],
    "commit" : "4419a17dff87098005beea6300a73989e035e654",
    "line" : 33,
    "diffHunk" : "@@ -1,1 +31,35 @@\n@pytest.mark.skipif(environ.get(\"DATAPREP_TOKEN\") is None, reason='Dataprep token not present')\nclass DataprepExampleDagsTest(GoogleSystemTest):\n    \"\"\"\n    System tests for Dataprep operators."
  }
]