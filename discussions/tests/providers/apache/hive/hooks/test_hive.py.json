[
  {
    "id" : "16907b48-a9d5-4688-b474-22ca9544fb68",
    "prId" : 7753,
    "prUrl" : "https://github.com/apache/airflow/pull/7753#pullrequestreview-377687796",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "00e65b25-adec-4fca-b53d-54511ffdf989",
        "parentId" : null,
        "authorId" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "body" : "?",
        "createdAt" : "2020-03-19T12:50:12Z",
        "updatedAt" : "2020-03-19T22:31:22Z",
        "lastEditedBy" : "f73f66ab-2657-4a50-be7a-2ca3ca98c202",
        "tags" : [
        ]
      },
      {
        "id" : "91da5c55-f14c-481d-b33c-20a6749d6b96",
        "parentId" : "00e65b25-adec-4fca-b53d-54511ffdf989",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "Based on https://github.com/apache/airflow/pull/7753#discussion_r394057083",
        "createdAt" : "2020-03-19T12:51:18Z",
        "updatedAt" : "2020-03-19T22:31:22Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      }
    ],
    "commit" : "5ba949711241f4ea828d220efb96cf6b9f89660b",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +34,38 @@from airflow.providers.apache.hive.hooks.hive import HiveCliHook, HiveMetastoreHook, HiveServer2Hook\nfrom airflow.providers.apache.hive.operators.hive import HiveOperator\nfrom airflow.secrets.environment_variables import CONN_ENV_PREFIX\nfrom airflow.utils import timezone\nfrom airflow.utils.operator_helpers import AIRFLOW_VAR_NAME_FORMAT_MAPPING"
  },
  {
    "id" : "d2ad5730-8471-47ba-9776-0141b2ca619b",
    "prId" : 9029,
    "prUrl" : "https://github.com/apache/airflow/pull/9029#pullrequestreview-423169653",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9887ff8d-d60b-4d31-9551-41bbb14b79b2",
        "parentId" : null,
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "Why do we assert this call over here?",
        "createdAt" : "2020-06-02T23:08:11Z",
        "updatedAt" : "2020-06-02T23:08:11Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      },
      {
        "id" : "72a2d770-69d0-4e50-847a-61547c1b3c64",
        "parentId" : "9887ff8d-d60b-4d31-9551-41bbb14b79b2",
        "authorId" : "f30d90ba-101c-4671-a1df-fa45531fa887",
        "body" : "Generally speaking, I tried to mock assert all calls to external systems. These test that following line is run. https://github.com/apache/airflow/blob/master/airflow/providers/apache/hive/hooks/hive.py#L843",
        "createdAt" : "2020-06-03T02:01:32Z",
        "updatedAt" : "2020-06-03T02:01:36Z",
        "lastEditedBy" : "f30d90ba-101c-4671-a1df-fa45531fa887",
        "tags" : [
        ]
      }
    ],
    "commit" : "b10ae8a2161cf25dfcfc0803499a316dd0abc1d5",
    "line" : 582,
    "diffHunk" : "@@ -1,1 +667,671 @@            'set airflow.ctx.dag_owner=airflow')\n        hook.mock_cursor.execute.assert_any_call(\n            'set airflow.ctx.dag_email=test@airflow.com')\n\n    def test_get_results_header(self):"
  },
  {
    "id" : "d66491f7-fea1-4266-a0e3-799fdf09a9e0",
    "prId" : 9472,
    "prUrl" : "https://github.com/apache/airflow/pull/9472#pullrequestreview-445170539",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bfa448ef-ed2b-4068-aa03-b3d6adef738f",
        "parentId" : null,
        "authorId" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "body" : "Does this tests requires some external service? Does it create side effects?",
        "createdAt" : "2020-07-02T10:49:39Z",
        "updatedAt" : "2020-07-17T19:59:47Z",
        "lastEditedBy" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "tags" : [
        ]
      },
      {
        "id" : "f4c57b38-8d50-436c-b37b-14914278ded4",
        "parentId" : "bfa448ef-ed2b-4068-aa03-b3d6adef738f",
        "authorId" : "df24ac26-f47a-4f26-8647-e612bec62587",
        "body" : "@turbaszek Yes. it uses Hivemetastore Thrift client. it does the partition from the test table set up for unit testing.",
        "createdAt" : "2020-07-02T18:06:27Z",
        "updatedAt" : "2020-07-17T19:59:47Z",
        "lastEditedBy" : "df24ac26-f47a-4f26-8647-e612bec62587",
        "tags" : [
        ]
      },
      {
        "id" : "0d3219eb-b172-4000-8de3-d8d4b2f1f680",
        "parentId" : "bfa448ef-ed2b-4068-aa03-b3d6adef738f",
        "authorId" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "body" : "Do you think we can mock the client? In this way we will reduce the side effects and the test will not require any external service ",
        "createdAt" : "2020-07-03T06:05:51Z",
        "updatedAt" : "2020-07-17T19:59:47Z",
        "lastEditedBy" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "tags" : [
        ]
      },
      {
        "id" : "4fc529c0-7fdf-434f-97b1-ae31d8d9a639",
        "parentId" : "bfa448ef-ed2b-4068-aa03-b3d6adef738f",
        "authorId" : "df24ac26-f47a-4f26-8647-e612bec62587",
        "body" : "@turbaszek  Methods like def test_max_partition(self) also does the same. Moreover, it should not be an expensive operation. Do you think we really have to mock the call?",
        "createdAt" : "2020-07-03T22:51:06Z",
        "updatedAt" : "2020-07-17T19:59:47Z",
        "lastEditedBy" : "df24ac26-f47a-4f26-8647-e612bec62587",
        "tags" : [
        ]
      },
      {
        "id" : "c3fd5953-f553-4b03-9487-87df73999b4a",
        "parentId" : "bfa448ef-ed2b-4068-aa03-b3d6adef738f",
        "authorId" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "body" : "Side effects in tests are not a good practise and Airflow already has number of flaky tests. So I would be in favor of using mocking.",
        "createdAt" : "2020-07-04T09:28:15Z",
        "updatedAt" : "2020-07-17T19:59:47Z",
        "lastEditedBy" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "tags" : [
        ]
      },
      {
        "id" : "338603b8-2b8a-4e0f-877b-2d47ae5abd7b",
        "parentId" : "bfa448ef-ed2b-4068-aa03-b3d6adef738f",
        "authorId" : "df24ac26-f47a-4f26-8647-e612bec62587",
        "body" : "Sounds fair. Let me get this changed :)",
        "createdAt" : "2020-07-08T22:26:19Z",
        "updatedAt" : "2020-07-17T19:59:47Z",
        "lastEditedBy" : "df24ac26-f47a-4f26-8647-e612bec62587",
        "tags" : [
        ]
      }
    ],
    "commit" : "a2a464daedf896e720b65ef0289605196db02295",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +567,571 @@        assert metastore_mock.drop_partition(\n            self.table, db=self.database, part_vals=[DEFAULT_DATE_DS]), ret\n\n\nclass TestHiveServer2Hook(unittest.TestCase):"
  }
]