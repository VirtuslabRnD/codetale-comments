[
  {
    "id" : "490b056b-6dc6-43e8-ad1f-3be60366c96e",
    "prId" : 5928,
    "prUrl" : "https://github.com/apache/airflow/pull/5928#pullrequestreview-280744108",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "467e553b-12fb-477c-a5a7-9b85e8a8337b",
        "parentId" : null,
        "authorId" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "body" : "I think it would be better to test if elements of `template_fields` are attributes of instance. Then changing attribute name without changing template field would result in test failure. WDYT?",
        "createdAt" : "2019-08-28T10:40:40Z",
        "updatedAt" : "2019-08-28T11:00:09Z",
        "lastEditedBy" : "0d4fd7c4-f8ab-4371-acfe-b9cca6decaf5",
        "tags" : [
        ]
      },
      {
        "id" : "6cc1ffb7-1919-4a7b-885f-136196712b2f",
        "parentId" : "467e553b-12fb-477c-a5a7-9b85e8a8337b",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "`ti.render_template()` should take care of that case. It would fail if it doesn't fiend an attribute listed in template_fields",
        "createdAt" : "2019-08-28T10:49:55Z",
        "updatedAt" : "2019-08-28T11:00:09Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      }
    ],
    "commit" : "9e0f97073e0c346ca07e4569b332b52992708778",
    "line" : 152,
    "diffHunk" : "@@ -1,1 +603,607 @@\n        self.assertEqual(task.template_fields,\n                         ['cluster_name', 'project_id', 'region'])\n\n        ti = TaskInstance(task, DEFAULT_DATE)"
  },
  {
    "id" : "d9240897-da71-405e-98c2-19eeaf05c337",
    "prId" : 5928,
    "prUrl" : "https://github.com/apache/airflow/pull/5928#pullrequestreview-280775334",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ce116339-54dc-4ca1-9d41-cc41c91bbb59",
        "parentId" : null,
        "authorId" : "03e41e23-f438-4a06-9652-8f20638d2c3a",
        "body" : "You can replace this one with `GCP_PROJECT_ID`",
        "createdAt" : "2019-08-28T11:57:37Z",
        "updatedAt" : "2019-08-28T12:02:45Z",
        "lastEditedBy" : "03e41e23-f438-4a06-9652-8f20638d2c3a",
        "tags" : [
        ]
      }
    ],
    "commit" : "9e0f97073e0c346ca07e4569b332b52992708778",
    "line" : 57,
    "diffHunk" : "@@ -1,1 +393,397 @@                requestId=mock.ANY,\n                body={\n                    'projectId': 'test-project-id',\n                    'clusterName': CLUSTER_NAME,\n                    'config': {"
  },
  {
    "id" : "017ed9eb-cbce-43cb-b958-658df8635c0e",
    "prId" : 5928,
    "prUrl" : "https://github.com/apache/airflow/pull/5928#pullrequestreview-280779872",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "609d867a-a2e8-471b-b30e-fa60c420ec9c",
        "parentId" : null,
        "authorId" : "03e41e23-f438-4a06-9652-8f20638d2c3a",
        "body" : "This test is a bit silly, maybe we can check if we can actually template a field.",
        "createdAt" : "2019-08-28T11:58:35Z",
        "updatedAt" : "2019-08-28T12:02:45Z",
        "lastEditedBy" : "03e41e23-f438-4a06-9652-8f20638d2c3a",
        "tags" : [
        ]
      },
      {
        "id" : "6edd7eec-32f9-4f69-9459-d28898521e15",
        "parentId" : "609d867a-a2e8-471b-b30e-fa60c420ec9c",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "They are actually checking to template :D\r\n\r\n`DataprocClusterScaleOperator` is passed  `GCP_PROJECT_TEMPLATED`, `CLUSTER_NAME_TEMPLATED` etc which are defined at the top of the file containing Jinja templated strings.\r\n\r\nAnd while asserting we check `GCP_PROJECT` & `CLUSTER_NAME` containing rendered fields",
        "createdAt" : "2019-08-28T12:06:37Z",
        "updatedAt" : "2019-08-28T12:13:24Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      }
    ],
    "commit" : "9e0f97073e0c346ca07e4569b332b52992708778",
    "line" : 105,
    "diffHunk" : "@@ -1,1 +523,527 @@            hook.wait.assert_called_once_with(self.operation)\n\n    def test_render_template(self):\n        task = DataprocClusterScaleOperator(\n            task_id=TASK_ID,"
  },
  {
    "id" : "a646a86a-f24f-4167-b68c-ead3c08a8e30",
    "prId" : 5928,
    "prUrl" : "https://github.com/apache/airflow/pull/5928#pullrequestreview-280775334",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b28b09d4-0e0a-4042-9bf6-a49edff944ea",
        "parentId" : null,
        "authorId" : "03e41e23-f438-4a06-9652-8f20638d2c3a",
        "body" : "This test makes more sense :)",
        "createdAt" : "2019-08-28T11:59:51Z",
        "updatedAt" : "2019-08-28T12:02:45Z",
        "lastEditedBy" : "03e41e23-f438-4a06-9652-8f20638d2c3a",
        "tags" : [
        ]
      }
    ],
    "commit" : "9e0f97073e0c346ca07e4569b332b52992708778",
    "line" : 272,
    "diffHunk" : "@@ -1,1 +764,768 @@            _assert_dataproc_job_id(mock_hook, dataproc_task)\n\n    def test_render_template(self):\n        task = DataProcHiveOperator(\n            task_id=TASK_ID,"
  },
  {
    "id" : "8576a858-cf75-4af6-ad70-120a091f3bf4",
    "prId" : 5928,
    "prUrl" : "https://github.com/apache/airflow/pull/5928#pullrequestreview-280781251",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4e668187-9daf-4de0-8444-473d9c2b049c",
        "parentId" : null,
        "authorId" : "03e41e23-f438-4a06-9652-8f20638d2c3a",
        "body" : "Maybe we can remove these `setUp`'s with a fixture. In the end they are not really setting up something, but just setting a global variable. Creating a fixture is nicer, which we can reuse in multiple tests:\r\n```\r\n\r\n@pytest.fixture\r\ndef dag():\r\n    return DAG(\r\n        DAG_ID,\r\n            default_args={\r\n            'owner': 'airflow',\r\n            'start_date': DEFAULT_DATE,\r\n        },\r\n        schedule_interval='@daily'\r\n    )\r\n```\r\nAnd then in the actual test:\r\n```\r\ndef test_render_template(self, dag):\r\n    task = DataProcSparkOperator(\r\n        dag=dag\r\n    )\r\n```\r\nWDYT?",
        "createdAt" : "2019-08-28T12:02:19Z",
        "updatedAt" : "2019-08-28T12:02:45Z",
        "lastEditedBy" : "03e41e23-f438-4a06-9652-8f20638d2c3a",
        "tags" : [
        ]
      },
      {
        "id" : "935b40f9-6e71-4ab4-abf4-e3f998f50257",
        "parentId" : "4e668187-9daf-4de0-8444-473d9c2b049c",
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "Interesting, didn't knew about `@pytest.fixture`. I will create a separate PR for that as we already have some tests in master and then cherry-pick to `v1-10-test`. This PR is for `v1-10-test`.",
        "createdAt" : "2019-08-28T12:09:22Z",
        "updatedAt" : "2019-08-28T12:09:22Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      }
    ],
    "commit" : "9e0f97073e0c346ca07e4569b332b52992708778",
    "line" : 395,
    "diffHunk" : "@@ -1,1 +925,929 @@class DataProcSparkOperatorTest(unittest.TestCase):\n    # Unit test for the DataProcSparkOperator\n    def setUp(self):\n        self.dag = DAG(\n            DAG_ID,"
  },
  {
    "id" : "ee65316b-1a6d-4293-9739-f2590203151c",
    "prId" : 5928,
    "prUrl" : "https://github.com/apache/airflow/pull/5928#pullrequestreview-280780269",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1445d94f-9e69-4ea0-809a-a3d50dcb7a37",
        "parentId" : null,
        "authorId" : "c25957e2-1132-4c48-a536-3824307fd862",
        "body" : "@Fokko here",
        "createdAt" : "2019-08-28T12:07:25Z",
        "updatedAt" : "2019-08-28T12:07:25Z",
        "lastEditedBy" : "c25957e2-1132-4c48-a536-3824307fd862",
        "tags" : [
        ]
      }
    ],
    "commit" : "9e0f97073e0c346ca07e4569b332b52992708778",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +54,58 @@TASK_ID = 'test-dataproc-operator'\nCLUSTER_NAME = 'airflow_{}_cluster'.format(DAG_ID)\nCLUSTER_NAME_TEMPLATED = 'airflow_{{ dag.dag_id }}_cluster'\nGCP_PROJECT_ID = 'test-project-id'\nGCP_PROJECT_TEMPLATED = \"{{  ['test', 'project', 'id'] | join('-') }}\""
  }
]