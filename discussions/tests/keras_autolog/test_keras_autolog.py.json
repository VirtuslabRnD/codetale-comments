[
  {
    "id" : "28de038d-27ac-49ff-97b3-32d926b66676",
    "prId" : 3981,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/3981#pullrequestreview-569037357",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f364fd8c-5345-4a0c-ab17-b935a8c72f91",
        "parentId" : null,
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "I'll revert this change after makeing sure the error is fixed.",
        "createdAt" : "2021-01-14T13:38:36Z",
        "updatedAt" : "2021-01-16T04:31:17Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      },
      {
        "id" : "bf13314c-3fac-414c-ae85-a8ed5afcbd47",
        "parentId" : "f364fd8c-5345-4a0c-ab17-b935a8c72f91",
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "Can we keep this change to make it easier to debug issues?",
        "createdAt" : "2021-01-14T13:39:00Z",
        "updatedAt" : "2021-01-15T08:11:32Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      },
      {
        "id" : "bf18de8d-aed9-443e-b792-c93d48dcceaf",
        "parentId" : "f364fd8c-5345-4a0c-ab17-b935a8c72f91",
        "authorId" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "body" : "Sure - makes sense to keep this!",
        "createdAt" : "2021-01-15T08:06:15Z",
        "updatedAt" : "2021-01-15T08:11:32Z",
        "lastEditedBy" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "tags" : [
        ]
      }
    ],
    "commit" : "24782b1f6ff0836ac2e4cd709688ef0a45a12563",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +206,210 @@            min_delta=99999999,\n            restore_best_weights=restore_weights,\n            verbose=1,\n        )\n    else:"
  },
  {
    "id" : "70d60703-6895-45a0-aa49-ea20a2b01389",
    "prId" : 3845,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/3845#pullrequestreview-552137258",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "41536e7d-dd56-472f-96ef-4218c03b4ceb",
        "parentId" : null,
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "reduced the size of features",
        "createdAt" : "2020-12-15T06:22:12Z",
        "updatedAt" : "2020-12-15T16:20:33Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      }
    ],
    "commit" : "a2ae8f2f89c7f29ae2b845cfe72fa7315e0f28a2",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +23,27 @@@pytest.fixture\ndef random_train_data():\n    return np.random.random((150, 4))\n\n"
  },
  {
    "id" : "bdacfeee-c011-435b-9dad-bb16dd9e71b9",
    "prId" : 3845,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/3845#pullrequestreview-552137325",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9969292c-7bb5-4027-9091-15059b409e86",
        "parentId" : null,
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "reduced the number of classes",
        "createdAt" : "2020-12-15T06:22:22Z",
        "updatedAt" : "2020-12-15T16:20:33Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      }
    ],
    "commit" : "a2ae8f2f89c7f29ae2b845cfe72fa7315e0f28a2",
    "line" : 21,
    "diffHunk" : "@@ -1,1 +28,32 @@@pytest.fixture\ndef random_one_hot_labels():\n    n, n_class = (150, 3)\n    classes = np.random.randint(0, n_class, n)\n    labels = np.zeros((n, n_class))"
  },
  {
    "id" : "87b34700-a27e-4d65-bd3a-30b73cf4f803",
    "prId" : 3845,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/3845#pullrequestreview-553424473",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "08840483-ed7a-4129-acaa-07f309fbb582",
        "parentId" : null,
        "authorId" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "body" : "Newer versions of keras don't suffer this issue:\r\n\r\n- test (keras / 2.3.1 / autologging): took **3m 27s**\r\n- test (keras / 2.2.5 / autologging): took **16m 9s**\r\n- test (keras / 2.2.4 / autologging): took **14m 10s**\r\n\r\nhttps://github.com/mlflow/mlflow/runs/1562184382?check_suite_focus=true",
        "createdAt" : "2020-12-16T07:42:23Z",
        "updatedAt" : "2020-12-18T07:52:52Z",
        "lastEditedBy" : "0e487e6e-a7e7-4430-a4d6-ca9e76a34cba",
        "tags" : [
        ]
      }
    ],
    "commit" : "a2ae8f2f89c7f29ae2b845cfe72fa7315e0f28a2",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +18,22 @@    # Release the global state managed by Keras to avoid this issue:\n    # https://github.com/keras-team/keras/issues/2102\n    keras.backend.clear_session()\n\n"
  },
  {
    "id" : "9a61a735-ac7f-4ef5-b864-2c933e590e64",
    "prId" : 3735,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/3735#pullrequestreview-538205409",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "b5003dec-918f-452e-96a2-08349b604edc",
        "parentId" : null,
        "authorId" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "body" : "As per https://github.com/tensorflow/tensorflow/issues/38618, manually constructing `ProgbarLogger` produces an infinity-related arithmetic error on recent versions of Keras. Accordingly, we swap in a simpler, valid callback here instead.",
        "createdAt" : "2020-11-25T07:07:04Z",
        "updatedAt" : "2020-11-26T00:31:10Z",
        "lastEditedBy" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "tags" : [
        ]
      }
    ],
    "commit" : "8cc2957ff2b6882e6c2b73b437c7c6f434ee09bd",
    "line" : 36,
    "diffHunk" : "@@ -1,1 +195,199 @@    else:\n\n        class CustomCallback(keras.callbacks.Callback):\n            def on_train_end(self, logs=None):\n                print(\"Training completed\")"
  },
  {
    "id" : "c7057b20-1405-4b18-a4ab-395c2996c148",
    "prId" : 3735,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/3735#pullrequestreview-538205873",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "46e68175-85bd-4af7-8e86-9d01134a7952",
        "parentId" : null,
        "authorId" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "body" : "`keras.callbacks.EarlyStopping` is valid for the versions of Keras we support, whereas `keras.callbacks.callbacks.EarlyStopping` was removed / renamed in 2.4.0.",
        "createdAt" : "2020-11-25T07:08:00Z",
        "updatedAt" : "2020-11-26T00:31:10Z",
        "lastEditedBy" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "tags" : [
        ]
      }
    ],
    "commit" : "8cc2957ff2b6882e6c2b73b437c7c6f434ee09bd",
    "line" : 23,
    "diffHunk" : "@@ -1,1 +187,191 @@    if callback == \"early\":\n        # min_delta is set as such to guarantee early stopping\n        callback = keras.callbacks.EarlyStopping(\n            monitor=\"loss\",\n            patience=patience,"
  },
  {
    "id" : "cd4870ea-6247-4119-ab8d-49ba4851df11",
    "prId" : 2088,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/2088#pullrequestreview-315971200",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9d3929fe-bc8b-4f41-97dc-c1c5dcc1703b",
        "parentId" : null,
        "authorId" : "bd3067fd-855b-4bd1-898d-ca29199fd092",
        "body" : "Maybe wrap this in a `try-finally` block so that we always end the run? e.g.\r\n\r\n```suggestion\r\ntry:\r\n    mlflow.keras.autolog()\r\n    data = random_train_data\r\n    labels = random_one_hot_labels\r\n    model = create_model()\r\n    if fit_variant == 'fit_generator':\r\n        def generator():\r\n            while True:\r\n                yield data, labels\r\n        model.fit_generator(generator(), epochs=10, steps_per_epoch=1)\r\n    else:\r\n         model.fit(data, labels, epochs=10)\r\nfinally:\r\n    mlflow.end_run()\r\n```",
        "createdAt" : "2019-11-13T02:43:54Z",
        "updatedAt" : "2019-11-13T23:21:27Z",
        "lastEditedBy" : "bd3067fd-855b-4bd1-898d-ca29199fd092",
        "tags" : [
        ]
      }
    ],
    "commit" : "18ac30750ec85fa29d91f29a31814a810cf8c314",
    "line" : 110,
    "diffHunk" : "@@ -1,1 +93,97 @@def keras_random_data_run(random_train_data, fit_variant, random_one_hot_labels, manual_run):\n\n    mlflow.keras.autolog()\n\n    data = random_train_data"
  },
  {
    "id" : "b32aeaac-251b-4396-bcbb-090532f4b517",
    "prId" : 1757,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/1757#pullrequestreview-279258970",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6034d6a9-add3-4d8b-98a1-cb1d8062915d",
        "parentId" : null,
        "authorId" : "bd3067fd-855b-4bd1-898d-ca29199fd092",
        "body" : "Nice, could we also add this parametrization to `test_keras_autolog_model_can_load_from_artifact` so that we have test coverage verifying that autologging logs a model when `fit_generator` is used?",
        "createdAt" : "2019-08-23T23:35:37Z",
        "updatedAt" : "2019-09-01T20:24:36Z",
        "lastEditedBy" : "bd3067fd-855b-4bd1-898d-ca29199fd092",
        "tags" : [
        ]
      }
    ],
    "commit" : "5c28747c230dc36942c2d3be7e794ed44863bd08",
    "line" : 32,
    "diffHunk" : "@@ -1,1 +57,61 @@\n@pytest.mark.large\n@pytest.mark.parametrize('fit_variant', ['fit', 'fit_generator'])\ndef test_keras_autolog_logs_expected_data(keras_random_data_run):\n    data = keras_random_data_run.data"
  }
]