[
  {
    "id" : "0f653758-fae4-470c-a279-483d8ffa46c0",
    "prId" : 82424,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/82424#pullrequestreview-285094543",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "796d5428-868a-432a-b9e3-46ce2694d616",
        "parentId" : null,
        "authorId" : "d7870cae-47b0-4c8e-8527-be8fc4be86de",
        "body" : "For my own understanding, can you share why we no longer need to use sudo?",
        "createdAt" : "2019-09-06T18:48:58Z",
        "updatedAt" : "2019-10-01T08:31:05Z",
        "lastEditedBy" : "d7870cae-47b0-4c8e-8527-be8fc4be86de",
        "tags" : [
        ]
      },
      {
        "id" : "ac8ead75-7576-485c-8a44-c834c97d647c",
        "parentId" : "796d5428-868a-432a-b9e3-46ce2694d616",
        "authorId" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "body" : "we're definitely root now (the pod is root)",
        "createdAt" : "2019-09-06T20:53:51Z",
        "updatedAt" : "2019-10-01T08:31:05Z",
        "lastEditedBy" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "tags" : [
        ]
      }
    ],
    "commit" : "0c3293a3aa0a0fa0b6c3c0e9d6067149182a3c54",
    "line" : 25,
    "diffHunk" : "@@ -1,1 +105,109 @@\t\thostDir := \"/var/lib/kubelet/\" + f.Namespace.Name\n\t\tdefer func() {\n\t\t\tcleanCmd := fmt.Sprintf(\"rm -rf %q\", hostDir)\n\t\t\thostExec.IssueCommand(cleanCmd, node)\n\t\t}()"
  },
  {
    "id" : "1f76340c-41d5-45c1-b623-7ac9043f78db",
    "prId" : 82424,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/82424#pullrequestreview-288923017",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "94a6bf84-2cfc-4c83-8748-20dfe09752a7",
        "parentId" : null,
        "authorId" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "body" : "Just an observation for generalizing this - I think the hostexec pod should set `hostNetwork`, `hostIPC`, and `hostPID` to true",
        "createdAt" : "2019-09-11T22:33:39Z",
        "updatedAt" : "2019-10-01T08:31:05Z",
        "lastEditedBy" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "tags" : [
        ]
      },
      {
        "id" : "6f20f42a-1e67-4a43-9add-52a49d34bacb",
        "parentId" : "94a6bf84-2cfc-4c83-8748-20dfe09752a7",
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "It depends how far do we want to go.\r\n\r\nFor storage, we're fine if the host exec pod does nsenter to host mount namespace, so we can check mounts and what's in /var/lib/kubelet without potential mount propagation hiccups.\r\n\r\nDo we have tests that actually need host pid or network namespace? Would it be better to add them to nsenter command line instead?\r\n\r\nhttps://github.com/kubernetes/kubernetes/blob/52626339b118901cc2f674b76b6920969241e389/test/e2e/storage/utils/host_exec.go#L96-L106\r\n",
        "createdAt" : "2019-09-12T08:06:59Z",
        "updatedAt" : "2019-10-01T08:31:05Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      },
      {
        "id" : "484fe4b8-737f-4b2e-beb9-5edcc0e61f68",
        "parentId" : "94a6bf84-2cfc-4c83-8748-20dfe09752a7",
        "authorId" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "body" : "[I think we can leave generalizing for a follow up] ?",
        "createdAt" : "2019-09-16T21:56:03Z",
        "updatedAt" : "2019-10-01T08:31:05Z",
        "lastEditedBy" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "tags" : [
        ]
      }
    ],
    "commit" : "0c3293a3aa0a0fa0b6c3c0e9d6067149182a3c54",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +86,90 @@\t\t// propagated to the right places.\n\n\t\thostExec := utils.NewHostExec(f)\n\t\tdefer hostExec.Cleanup()\n"
  },
  {
    "id" : "bd9df2b2-3383-40ec-8347-ba35bc807cda",
    "prId" : 51905,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/51905#pullrequestreview-76371088",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4207a02d-ac32-4df7-9fe1-660edbe6ac45",
        "parentId" : null,
        "authorId" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "body" : "I hope `f.Namespace.Name` is always non-nil!",
        "createdAt" : "2017-11-10T22:51:37Z",
        "updatedAt" : "2017-11-14T10:05:59Z",
        "lastEditedBy" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "tags" : [
        ]
      },
      {
        "id" : "e1eafac1-a3a6-4969-b721-a7fd119cbb32",
        "parentId" : "4207a02d-ac32-4df7-9fe1-660edbe6ac45",
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "Umm, I could use `/var/lib/kubelet/tmp/<namespace>` and remove whole `/var/lib/kubelet/tmp/` in the end. How likely is that the same test runs twice in parallel in the same cluster?",
        "createdAt" : "2017-11-14T09:06:48Z",
        "updatedAt" : "2017-11-14T10:05:59Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      },
      {
        "id" : "4b8b0c07-0348-4af1-ab38-b1964900e479",
        "parentId" : "4207a02d-ac32-4df7-9fe1-660edbe6ac45",
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "I added `if len(f.Namespace.Name) == 0 { error & return }` with some comment around for now. ",
        "createdAt" : "2017-11-14T09:11:55Z",
        "updatedAt" : "2017-11-14T10:05:59Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      }
    ],
    "commit" : "4e9068b135b00a552e75e442e580fa3dbb69852b",
    "line" : 103,
    "diffHunk" : "@@ -1,1 +101,105 @@\t\thostDir := \"/var/lib/kubelet/\" + f.Namespace.Name\n\t\tdefer func() {\n\t\t\tcleanCmd := fmt.Sprintf(\"sudo rm -rf %q\", hostDir)\n\t\t\tframework.IssueSSHCommand(cleanCmd, framework.TestContext.Provider, node)\n\t\t}()"
  },
  {
    "id" : "5aeb4c5e-a7d9-40b1-bea1-cc55245f3bdb",
    "prId" : 51905,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/51905#pullrequestreview-76369708",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ed1234fc-ba41-4e14-924c-e6fe69943e0c",
        "parentId" : null,
        "authorId" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "body" : "Can you put this in `/tmp` instead?",
        "createdAt" : "2017-11-10T22:52:38Z",
        "updatedAt" : "2017-11-14T10:05:59Z",
        "lastEditedBy" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "tags" : [
        ]
      },
      {
        "id" : "66159600-1f3e-47de-a1e5-e27cbfd5de66",
        "parentId" : "ed1234fc-ba41-4e14-924c-e6fe69943e0c",
        "authorId" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "body" : "I'd rather not.  https://github.com/kubernetes/kubernetes/pull/45724 makes sure that at least /var/lib/kubelet can be mounted as shared into containers. This is useful on Debian Wheezy and other non-systemd distros, where / is not shareable.\r\n\r\nBy putting it into /var/lib/kubelet/ we test also #45724.",
        "createdAt" : "2017-11-14T09:06:49Z",
        "updatedAt" : "2017-11-14T10:05:59Z",
        "lastEditedBy" : "8b64e744-955d-4523-a3b7-60fae9df0857",
        "tags" : [
        ]
      }
    ],
    "commit" : "4e9068b135b00a552e75e442e580fa3dbb69852b",
    "line" : 101,
    "diffHunk" : "@@ -1,1 +99,103 @@\t\t// Make sure it's random enough so we don't clash with another test\n\t\t// running in parallel.\n\t\thostDir := \"/var/lib/kubelet/\" + f.Namespace.Name\n\t\tdefer func() {\n\t\t\tcleanCmd := fmt.Sprintf(\"sudo rm -rf %q\", hostDir)"
  }
]