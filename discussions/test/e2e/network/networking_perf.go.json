[
  {
    "id" : "2e63aa09-b370-49d0-9e54-39601888b286",
    "prId" : 94015,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/94015#pullrequestreview-551236660",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1a44a73b-1749-4320-81aa-02175114c83c",
        "parentId" : null,
        "authorId" : "a5be0b3b-3db2-4c99-a598-55f8708db5df",
        "body" : "ok, makes sense, since this is synchronous, the 1GB per pod should be retained",
        "createdAt" : "2020-09-13T13:19:11Z",
        "updatedAt" : "2021-01-24T21:06:51Z",
        "lastEditedBy" : "a5be0b3b-3db2-4c99-a598-55f8708db5df",
        "tags" : [
        ]
      },
      {
        "id" : "3f7e2a86-e98d-4585-a21b-776368051e5e",
        "parentId" : "1a44a73b-1749-4320-81aa-02175114c83c",
        "authorId" : "926b3d62-1827-40fe-b6db-0be5877e79d0",
        "body" : "üëç ",
        "createdAt" : "2020-12-14T10:31:02Z",
        "updatedAt" : "2021-01-24T21:06:51Z",
        "lastEditedBy" : "926b3d62-1827-40fe-b6db-0be5877e79d0",
        "tags" : [
        ]
      }
    ],
    "commit" : "069ec0503769efc672315c27031e94d3310c2439",
    "line" : 364,
    "diffHunk" : "@@ -1,1 +273,277 @@\t\t// Step 3: iterate through the client pods one by one, running iperf2 in client mode to transfer\n\t\t//   data to the server and back and measure bandwidth\n\t\tfor _, pod := range clientPodList.Items {\n\t\t\tpodName := pod.Name\n\t\t\tnodeName := pod.Spec.NodeName"
  },
  {
    "id" : "5c086f2a-b7c4-4990-a8de-4bb56e1d0e8e",
    "prId" : 94015,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/94015#pullrequestreview-551255919",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3e715634-953d-45c6-b0a7-b9073f5ba3e4",
        "parentId" : null,
        "authorId" : "a5be0b3b-3db2-4c99-a598-55f8708db5df",
        "body" : "explain this one^",
        "createdAt" : "2020-12-13T14:14:28Z",
        "updatedAt" : "2021-01-24T21:06:51Z",
        "lastEditedBy" : "a5be0b3b-3db2-4c99-a598-55f8708db5df",
        "tags" : [
        ]
      },
      {
        "id" : "6388f484-aec1-4194-9446-a1e14ea2a7de",
        "parentId" : "3e715634-953d-45c6-b0a7-b9073f5ba3e4",
        "authorId" : "926b3d62-1827-40fe-b6db-0be5877e79d0",
        "body" : "üëç ",
        "createdAt" : "2020-12-14T10:55:54Z",
        "updatedAt" : "2021-01-24T21:06:51Z",
        "lastEditedBy" : "926b3d62-1827-40fe-b6db-0be5877e79d0",
        "tags" : [
        ]
      }
    ],
    "commit" : "069ec0503769efc672315c27031e94d3310c2439",
    "line" : 346,
    "diffHunk" : "@@ -1,1 +255,259 @@\t\t\tframework.Failf(\"expected 1 server pod, found %d\", len(serverPodList.Items))\n\t\t}\n\t\tserverPod := serverPodList.Items[0]\n\t\tframework.Logf(\"server pod phase %s\", serverPod.Status.Phase)\n\t\tfor i, condition := range serverPod.Status.Conditions {"
  },
  {
    "id" : "a5d18612-d77f-43ac-a407-83466863eff5",
    "prId" : 94015,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/94015#pullrequestreview-551262442",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "07a4cf09-7322-498d-8868-6d254a93c1c3",
        "parentId" : null,
        "authorId" : "a5be0b3b-3db2-4c99-a598-55f8708db5df",
        "body" : "comments on these scripts and maybe move the `IPerfResult` to colocate w / them ? ",
        "createdAt" : "2020-12-13T14:22:39Z",
        "updatedAt" : "2021-01-24T21:06:51Z",
        "lastEditedBy" : "a5be0b3b-3db2-4c99-a598-55f8708db5df",
        "tags" : [
        ]
      },
      {
        "id" : "34468ca6-fb13-490d-88e1-3cce52e5cc02",
        "parentId" : "07a4cf09-7322-498d-8868-6d254a93c1c3",
        "authorId" : "926b3d62-1827-40fe-b6db-0be5877e79d0",
        "body" : "üëç ",
        "createdAt" : "2020-12-14T11:04:27Z",
        "updatedAt" : "2021-01-24T21:06:51Z",
        "lastEditedBy" : "926b3d62-1827-40fe-b6db-0be5877e79d0",
        "tags" : [
        ]
      }
    ],
    "commit" : "069ec0503769efc672315c27031e94d3310c2439",
    "line" : 225,
    "diffHunk" : "@@ -1,1 +167,171 @@\treturn ds, nil\n}\n\n// Test summary:\n//   This test uses iperf2 to obtain bandwidth data between nodes in the cluster, providing a coarse measure"
  },
  {
    "id" : "e443d4ad-420f-4786-9575-0e6c7c2b1915",
    "prId" : 94015,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/94015#pullrequestreview-557364078",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6d63d2c4-1fed-4065-b177-51b2f4383334",
        "parentId" : null,
        "authorId" : "203dfb85-d185-4057-88b3-a1b4f09fd1fd",
        "body" : "there are a lot of people these days running kubernetes in raspberry and targeting IOT scenarios that I assume will have very little bandwidth, just food for thoughts",
        "createdAt" : "2020-12-16T10:54:06Z",
        "updatedAt" : "2021-01-24T21:06:51Z",
        "lastEditedBy" : "203dfb85-d185-4057-88b3-a1b4f09fd1fd",
        "tags" : [
        ]
      },
      {
        "id" : "d5df6216-347a-46ab-8a76-77075f7739a4",
        "parentId" : "6d63d2c4-1fed-4065-b177-51b2f4383334",
        "authorId" : "926b3d62-1827-40fe-b6db-0be5877e79d0",
        "body" : "+1 this is a tricky one, the goal is to set the bandwidth cutoff high enough that you know that the cluster's network isn't broken, but low enough that it won't report a working cluster as broken.  \r\n\r\nSeems like a tricky balance, any suggestions how we can find that balance?",
        "createdAt" : "2020-12-16T12:53:27Z",
        "updatedAt" : "2021-01-24T21:06:51Z",
        "lastEditedBy" : "926b3d62-1827-40fe-b6db-0be5877e79d0",
        "tags" : [
        ]
      },
      {
        "id" : "2deee510-63eb-4fca-8a47-7172f1daf801",
        "parentId" : "6d63d2c4-1fed-4065-b177-51b2f4383334",
        "authorId" : "203dfb85-d185-4057-88b3-a1b4f09fd1fd",
        "body" : "I think that we should not target throughput (throughput is part of performance not performance) but correctness , based on that my criteria to pass the test will be :\r\n- keep at least 90Mbps (consider a 100 mbps nic plus a 10% margin)\r\n- less than 3 % of errors\r\n",
        "createdAt" : "2020-12-18T11:21:05Z",
        "updatedAt" : "2021-01-24T21:06:51Z",
        "lastEditedBy" : "203dfb85-d185-4057-88b3-a1b4f09fd1fd",
        "tags" : [
        ]
      },
      {
        "id" : "5eb0a1aa-beef-464f-8e57-cb2bd80bbcf7",
        "parentId" : "6d63d2c4-1fed-4065-b177-51b2f4383334",
        "authorId" : "926b3d62-1827-40fe-b6db-0be5877e79d0",
        "body" : "This is odd, I don't see error counts with the iperf `--reportstyle C` option, gonna hack around some more on this and see why that's not showing up.",
        "createdAt" : "2020-12-18T21:44:20Z",
        "updatedAt" : "2021-01-24T21:06:51Z",
        "lastEditedBy" : "926b3d62-1827-40fe-b6db-0be5877e79d0",
        "tags" : [
        ]
      },
      {
        "id" : "f0883ecd-1b23-415f-adde-66cb3736aaa6",
        "parentId" : "6d63d2c4-1fed-4065-b177-51b2f4383334",
        "authorId" : "203dfb85-d185-4057-88b3-a1b4f09fd1fd",
        "body" : "ü§î the snippet in the description show errors",
        "createdAt" : "2020-12-19T11:03:56Z",
        "updatedAt" : "2021-01-24T21:06:51Z",
        "lastEditedBy" : "203dfb85-d185-4057-88b3-a1b4f09fd1fd",
        "tags" : [
        ]
      },
      {
        "id" : "8622bc4f-dc62-411d-a9ee-049eb79ea2ad",
        "parentId" : "6d63d2c4-1fed-4065-b177-51b2f4383334",
        "authorId" : "926b3d62-1827-40fe-b6db-0be5877e79d0",
        "body" : "Unfortunately the CSV output doesn't include the errors, let me whip together something to parse the non-CSV output!",
        "createdAt" : "2020-12-21T22:45:44Z",
        "updatedAt" : "2021-01-24T21:06:51Z",
        "lastEditedBy" : "926b3d62-1827-40fe-b6db-0be5877e79d0",
        "tags" : [
        ]
      },
      {
        "id" : "9fe46cdf-9a11-4780-b016-63d307fb001a",
        "parentId" : "6d63d2c4-1fed-4065-b177-51b2f4383334",
        "authorId" : "203dfb85-d185-4057-88b3-a1b4f09fd1fd",
        "body" : "indeed, surprisingly it doesn' have the same output\r\n```\r\n$ iperf -c localhost -e -y C\r\n20201221235135.693,127.0.0.1,55932,127.0.0.1,5001,3,0.0-10.0,53096480768,42477116651\r\n```\r\n\r\n```\r\n$ iperf -c localhost -e \r\n------------------------------------------------------------\r\nClient connecting to localhost, TCP port 5001 with pid 3551429\r\nWrite buffer size:  128 KByte\r\nTCP window size: 4.00 MByte (default)\r\n------------------------------------------------------------\r\n[  3] local 127.0.0.1 port 56228 connected with 127.0.0.1 port 5001 (ct=0.05 ms)\r\n[ ID] Interval        Transfer    Bandwidth       Write/Err  Rtry     Cwnd/RTT        NetPwr\r\n[  3] 0.00-10.00 sec  48.3 GBytes  41.5 Gbits/sec  395726/0          0       -1K/23 us  225515464.25\r\n\r\n```",
        "createdAt" : "2020-12-21T22:53:08Z",
        "updatedAt" : "2021-01-24T21:06:51Z",
        "lastEditedBy" : "203dfb85-d185-4057-88b3-a1b4f09fd1fd",
        "tags" : [
        ]
      },
      {
        "id" : "87c51cb5-b41a-43b5-939e-f8af88db0c5f",
        "parentId" : "6d63d2c4-1fed-4065-b177-51b2f4383334",
        "authorId" : "926b3d62-1827-40fe-b6db-0be5877e79d0",
        "body" : "okay put together https://github.com/kubernetes/kubernetes/pull/94015/commits/bf4874a921c258bbb701a6a76680a37d00c2435c (edit: updated to https://github.com/kubernetes/kubernetes/commit/76964669113f13173cc005b6698452543221bcce ) to scrape out the error rate -- what do you think @aojea which approach is better?  The parsing code is kinda wonky and fragile but it gets the job done",
        "createdAt" : "2020-12-22T12:59:41Z",
        "updatedAt" : "2021-01-24T21:06:51Z",
        "lastEditedBy" : "926b3d62-1827-40fe-b6db-0be5877e79d0",
        "tags" : [
        ]
      },
      {
        "id" : "c6cbd6c3-d268-4d97-b5b0-396020b24183",
        "parentId" : "6d63d2c4-1fed-4065-b177-51b2f4383334",
        "authorId" : "203dfb85-d185-4057-88b3-a1b4f09fd1fd",
        "body" : ">  The parsing code is kinda wonky and fragile but it gets the job done\r\n\r\nindeed, I think that since you implemented both, first we use the CSV one and we let it soak, and we revisit after some time ... my apologies, thought it was simpler , but we can keep the code in the repo",
        "createdAt" : "2020-12-22T17:12:27Z",
        "updatedAt" : "2021-01-24T21:06:51Z",
        "lastEditedBy" : "203dfb85-d185-4057-88b3-a1b4f09fd1fd",
        "tags" : [
        ]
      },
      {
        "id" : "f0f6c41d-fe73-4647-b726-e16bdba6041a",
        "parentId" : "6d63d2c4-1fed-4065-b177-51b2f4383334",
        "authorId" : "926b3d62-1827-40fe-b6db-0be5877e79d0",
        "body" : "np, glad we tried it out both ways!  üëç ",
        "createdAt" : "2020-12-22T21:00:03Z",
        "updatedAt" : "2021-01-24T21:06:51Z",
        "lastEditedBy" : "926b3d62-1827-40fe-b6db-0be5877e79d0",
        "tags" : [
        ]
      }
    ],
    "commit" : "069ec0503769efc672315c27031e94d3310c2439",
    "line" : 414,
    "diffHunk" : "@@ -1,1 +321,325 @@\t\tfor clientNode, results := range nodeResults.Results {\n\t\t\tmegabytesPerSecond := results.Total.bandwidthMB()\n\t\t\tif megabytesPerSecond < iperf2BaselineBandwidthMegabytesPerSecond {\n\t\t\t\tframework.Failf(\"iperf2 MB/s received below baseline of %d for client %s to server %s: %d\", iperf2BaselineBandwidthMegabytesPerSecond, clientNode, nodeResults.ServerNode, megabytesPerSecond)\n\t\t\t}"
  }
]