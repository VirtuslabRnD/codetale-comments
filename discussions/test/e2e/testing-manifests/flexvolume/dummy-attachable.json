[
  {
    "id" : "df688a36-2dc5-46ec-a3ec-8b64b00e88e8",
    "prId" : 48366,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/48366#pullrequestreview-51873164",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9f8d395e-7180-43d9-ba14-9a456eada7c5",
        "parentId" : null,
        "authorId" : "34f61776-88da-4b26-aa20-3c4f92530d05",
        "body" : "If for whatever reason attach never occurs, can we catch it in this test?",
        "createdAt" : "2017-07-06T18:25:31Z",
        "updatedAt" : "2017-08-04T14:39:31Z",
        "lastEditedBy" : "34f61776-88da-4b26-aa20-3c4f92530d05",
        "tags" : [
        ]
      },
      {
        "id" : "0303ee95-caa0-4744-8f8c-0fb30c282475",
        "parentId" : "9f8d395e-7180-43d9-ba14-9a456eada7c5",
        "authorId" : "241ab19e-f85a-4d22-92e2-88f2b6287d14",
        "body" : "the reader would have to look through controller-manager logs to figure that out.\r\n\r\nI will make the test parse the log produced by the flex driver, or at least print it out, so it's more obvious why the test failed",
        "createdAt" : "2017-07-10T15:17:29Z",
        "updatedAt" : "2017-08-04T14:39:31Z",
        "lastEditedBy" : "241ab19e-f85a-4d22-92e2-88f2b6287d14",
        "tags" : [
        ]
      },
      {
        "id" : "962a2b07-336a-4343-a7e1-7f40875d7560",
        "parentId" : "9f8d395e-7180-43d9-ba14-9a456eada7c5",
        "authorId" : "34f61776-88da-4b26-aa20-3c4f92530d05",
        "body" : "I'm more worried that the test doesn't fail. If k8s only performs mount and skips attach entirely, this driver would still succeed, right?\r\n\r\nOne thing we could do is keep track of the \"attached\" state in the driver. Before mounting, if volume is not attached, then don't proceed. Hopefully that'll increase visibility of the error.",
        "createdAt" : "2017-07-10T16:45:05Z",
        "updatedAt" : "2017-08-04T14:39:31Z",
        "lastEditedBy" : "34f61776-88da-4b26-aa20-3c4f92530d05",
        "tags" : [
        ]
      },
      {
        "id" : "b4cb24bb-e41d-4203-86d8-cd0e86b41114",
        "parentId" : "9f8d395e-7180-43d9-ba14-9a456eada7c5",
        "authorId" : "241ab19e-f85a-4d22-92e2-88f2b6287d14",
        "body" : "Ah, I see. Keeping track of attach state sounds okay. Make the driver closer to reality and easier to reason about.\r\n\r\nAlternatively, could simply check in mountdevice that the device name argument is \"foo\" as returned by attach. Anything else must be a bug.\r\n\r\nFwiw, at the moment the test will fail if attach never occurs. Volume manager would have to be buggy for test to pass like that.",
        "createdAt" : "2017-07-10T17:09:33Z",
        "updatedAt" : "2017-08-04T14:39:31Z",
        "lastEditedBy" : "241ab19e-f85a-4d22-92e2-88f2b6287d14",
        "tags" : [
        ]
      },
      {
        "id" : "2f9b4373-0de0-4b6a-b4a5-4858ed95104a",
        "parentId" : "9f8d395e-7180-43d9-ba14-9a456eada7c5",
        "authorId" : "241ab19e-f85a-4d22-92e2-88f2b6287d14",
        "body" : "I've added sanity checks to ensure driver fails in these situations (unexpected mount device)",
        "createdAt" : "2017-07-24T19:29:18Z",
        "updatedAt" : "2017-08-04T14:39:31Z",
        "lastEditedBy" : "241ab19e-f85a-4d22-92e2-88f2b6287d14",
        "tags" : [
        ]
      }
    ],
    "commit" : "55a417e84f98c4a4ab1aab6c6534886e91c2b9db",
    "line" : 67,
    "diffHunk" : "@@ -1,1 +65,69 @@}\n\ndomountdevice() {\n\tdebug \"domountdevice $@\"\n\tMNTDEVICE=$2"
  }
]