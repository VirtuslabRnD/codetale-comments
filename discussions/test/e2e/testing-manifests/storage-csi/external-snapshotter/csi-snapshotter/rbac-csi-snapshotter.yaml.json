[
  {
    "id" : "784b22fd-7384-4adf-a861-121dde6ef550",
    "prId" : 100637,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/100637#pullrequestreview-641400001",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "bb58f497-41e6-41d0-8681-dace41219a45",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "happy to see this become optional. would be even happier if the example scoped to a particular namespace/name instead of giving global list permission\r\n\r\n(same comment on test/e2e/testing-manifests/storage-csi/external-attacher/rbac.yaml)",
        "createdAt" : "2021-03-30T20:53:44Z",
        "updatedAt" : "2021-04-21T07:58:14Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "6fa84ee3-a9d0-4a45-8ab5-3fae29cd014f",
        "parentId" : "bb58f497-41e6-41d0-8681-dace41219a45",
        "authorId" : "ba0b9c6e-ec4c-4d1b-832e-751e6109bf38",
        "body" : "Same here: this is just an example. I suppose we can make the example better by explaining more about the rationale behind the current content, though.\r\n\r\n@cc @xing-yang ",
        "createdAt" : "2021-03-30T21:23:41Z",
        "updatedAt" : "2021-04-21T07:58:14Z",
        "lastEditedBy" : "ba0b9c6e-ec4c-4d1b-832e-751e6109bf38",
        "tags" : [
        ]
      },
      {
        "id" : "16a01062-7580-4487-8b21-8e1105c395db",
        "parentId" : "bb58f497-41e6-41d0-8681-dace41219a45",
        "authorId" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "body" : "I think we need the secret RBACs for the mock driver secret test: https://prow.k8s.io/view/gs/kubernetes-jenkins/pr-logs/pull/100637/pull-kubernetes-e2e-gce-storage-snapshot/1384443613999534080/",
        "createdAt" : "2021-04-20T17:52:31Z",
        "updatedAt" : "2021-04-21T07:58:14Z",
        "lastEditedBy" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "tags" : [
        ]
      },
      {
        "id" : "38a3acd0-1076-4a84-a303-4130a5840d8e",
        "parentId" : "bb58f497-41e6-41d0-8681-dace41219a45",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "can we narrowly grant to the specific secrets required by the test (ideally in the test itself)",
        "createdAt" : "2021-04-20T17:54:43Z",
        "updatedAt" : "2021-04-21T07:58:14Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "3384d617-4980-4aa2-a5ba-a4c905d7bc26",
        "parentId" : "bb58f497-41e6-41d0-8681-dace41219a45",
        "authorId" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "body" : "Yes we should be able to grant it to the e2e namespace. ",
        "createdAt" : "2021-04-20T17:59:52Z",
        "updatedAt" : "2021-04-21T07:58:14Z",
        "lastEditedBy" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "tags" : [
        ]
      },
      {
        "id" : "10fd6aa1-c5ed-47e1-8983-2f8878e49a13",
        "parentId" : "bb58f497-41e6-41d0-8681-dace41219a45",
        "authorId" : "ba0b9c6e-ec4c-4d1b-832e-751e6109bf38",
        "body" : "Which E2E namespace? The one of the driver or where test objects are created?\r\n\r\n",
        "createdAt" : "2021-04-20T18:26:22Z",
        "updatedAt" : "2021-04-21T07:58:14Z",
        "lastEditedBy" : "ba0b9c6e-ec4c-4d1b-832e-751e6109bf38",
        "tags" : [
        ]
      },
      {
        "id" : "b5fe726e-78e7-4e0a-97f5-fc5a6b2d5cd2",
        "parentId" : "bb58f497-41e6-41d0-8681-dace41219a45",
        "authorId" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "body" : "It looks like the test namespace: https://github.com/kubernetes/kubernetes/blob/6ede5ca95f78478fa627ecfea8136e0dff34436b/test/e2e/storage/csi_mock_volume.go#L1606",
        "createdAt" : "2021-04-20T18:37:07Z",
        "updatedAt" : "2021-04-21T07:58:14Z",
        "lastEditedBy" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "tags" : [
        ]
      },
      {
        "id" : "f46b2986-01b9-4e82-9731-9d1978f0038d",
        "parentId" : "bb58f497-41e6-41d0-8681-dace41219a45",
        "authorId" : "ba0b9c6e-ec4c-4d1b-832e-751e6109bf38",
        "body" : "A Pod running in one namespace cannot be granted access to secrets in one specific other namespace, right? If I remember correctly, the `Role` implicitly is for the namespace in which it gets created, which is the driver namespace.\r\n",
        "createdAt" : "2021-04-20T18:48:02Z",
        "updatedAt" : "2021-04-21T07:58:14Z",
        "lastEditedBy" : "ba0b9c6e-ec4c-4d1b-832e-751e6109bf38",
        "tags" : [
        ]
      },
      {
        "id" : "b0eddac0-883e-4912-8cff-ba0865a79207",
        "parentId" : "bb58f497-41e6-41d0-8681-dace41219a45",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "You can grant permissions to a service account in another namespace, see https://kubernetes.io/docs/reference/access-authn-authz/rbac/#role-binding-examples\r\n\r\nThe role/rolebinding have to be located in the namespace you want to grant access to, and the serviceaccount subject must be fully qualified:\r\n\r\n```\r\nsubjects:\r\n- kind: ServiceAccount\r\n  name: some-service-account\r\n  namespace: some-namespace\r\n```",
        "createdAt" : "2021-04-20T18:57:28Z",
        "updatedAt" : "2021-04-21T07:58:14Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "8c147fb0-0e28-4b31-b412-101303730e44",
        "parentId" : "bb58f497-41e6-41d0-8681-dace41219a45",
        "authorId" : "ba0b9c6e-ec4c-4d1b-832e-751e6109bf38",
        "body" : "Re-enabling secret access via ClusterRole was straight-forward (famous last words - the additional commit that I just pushed only passed local build testing). Adding a new service account and associated bindings is going to be more complicated. How important is that?\r\n\r\n",
        "createdAt" : "2021-04-20T19:02:25Z",
        "updatedAt" : "2021-04-21T07:58:14Z",
        "lastEditedBy" : "ba0b9c6e-ec4c-4d1b-832e-751e6109bf38",
        "tags" : [
        ]
      },
      {
        "id" : "fae4f6c2-28d7-4486-b204-7279c18d7517",
        "parentId" : "bb58f497-41e6-41d0-8681-dace41219a45",
        "authorId" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "body" : "In the interest of time, I would like to keep this PR focused on the immediate issue of updating the sidecars to use v1.CSINode (or have a new PR that only updates the sidecars). Any additional improvements to the tests, let's consider separately.",
        "createdAt" : "2021-04-20T19:58:07Z",
        "updatedAt" : "2021-04-21T07:58:14Z",
        "lastEditedBy" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "tags" : [
        ]
      },
      {
        "id" : "1eb20101-bcbb-445b-adb9-5dc80d99cdd6",
        "parentId" : "bb58f497-41e6-41d0-8681-dace41219a45",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "> In the interest of time, I would like to keep this PR focused on the immediate issue of updating the sidecars to use v1.CSINode (or have a new PR that only updates the sidecars). Any additional improvements to the tests, let's consider separately.\r\n\r\nsounds good",
        "createdAt" : "2021-04-20T20:00:31Z",
        "updatedAt" : "2021-04-21T07:58:14Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "752b0470-45e5-472f-9553-f0f3c7e2d437",
        "parentId" : "bb58f497-41e6-41d0-8681-dace41219a45",
        "authorId" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "body" : "https://github.com/kubernetes/kubernetes/issues/101334",
        "createdAt" : "2021-04-21T18:27:36Z",
        "updatedAt" : "2021-04-21T18:32:32Z",
        "lastEditedBy" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "tags" : [
        ]
      }
    ],
    "commit" : "c794b5c442b18b078b287bcbb25bb18b9eb439cd",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +28,32 @@    resources: [\"events\"]\n    verbs: [\"list\", \"watch\", \"create\", \"update\", \"patch\"]\n  # Secret permission is optional.\n  # Enable it if your driver needs secret.\n  # For example, `csi.storage.k8s.io/snapshotter-secret-name` is set in VolumeSnapshotClass."
  }
]