[
  {
    "id" : "e8a73edc-3807-4222-a688-cdb6133f15f6",
    "prId" : 20464,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d772cd23-ee57-4768-8093-ebe824e88dda",
        "parentId" : null,
        "authorId" : "395f4f9a-98be-4485-b436-51f0897d7c9f",
        "body" : "this doesn't retry and I don't think our kube-proxy has a readiness probe. So there's a chance the server isn't up if we run after a reboot test?\n",
        "createdAt" : "2016-02-02T19:43:58Z",
        "updatedAt" : "2016-02-02T20:45:35Z",
        "lastEditedBy" : "395f4f9a-98be-4485-b436-51f0897d7c9f",
        "tags" : [
        ]
      },
      {
        "id" : "bd8004d8-30a9-49df-bfc1-73fabc460804",
        "parentId" : "d772cd23-ee57-4768-8093-ebe824e88dda",
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "None of this test retries.  Different issue.\n",
        "createdAt" : "2016-02-02T20:38:16Z",
        "updatedAt" : "2016-02-02T20:45:35Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      }
    ],
    "commit" : "7ed83ad4f94b94a80d89eded18eaffd5cdd5d63b",
    "line" : 18,
    "diffHunk" : "@@ -1,1 +260,264 @@\tcmd := fmt.Sprintf(\"curl -s --connect-timeout 1 http://localhost:10249%s\", path)\n\tBy(fmt.Sprintf(\"Getting kube-proxy self URL %s\", path))\n\tstdout := RunHostCmdOrDie(config.f.Namespace.Name, config.hostTestContainerPod.Name, cmd)\n\tExpect(strings.Contains(stdout, expected)).To(BeTrue())\n}"
  },
  {
    "id" : "44e6d644-ffbc-45eb-a649-b450b9abd449",
    "prId" : 20464,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "320e958c-2620-44c8-bba1-4d67371a6639",
        "parentId" : null,
        "authorId" : "395f4f9a-98be-4485-b436-51f0897d7c9f",
        "body" : "make this readiness?\n",
        "createdAt" : "2016-02-02T19:44:42Z",
        "updatedAt" : "2016-02-02T20:45:35Z",
        "lastEditedBy" : "395f4f9a-98be-4485-b436-51f0897d7c9f",
        "tags" : [
        ]
      },
      {
        "id" : "c6c38c56-9da1-45b0-905e-c1a8228fdd19",
        "parentId" : "320e958c-2620-44c8-bba1-4d67371a6639",
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "To what end?  The kube-proxy isn't behind a Service, so not being ready won't actually prevent anything from happening or enable anything, will it?\n",
        "createdAt" : "2016-02-02T20:40:05Z",
        "updatedAt" : "2016-02-02T20:45:35Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      },
      {
        "id" : "9792d94e-b0c0-495b-a20a-fc7d8989a261",
        "parentId" : "320e958c-2620-44c8-bba1-4d67371a6639",
        "authorId" : "395f4f9a-98be-4485-b436-51f0897d7c9f",
        "body" : "you can poll for ready though, from the test. I _think_ the reboot tests do this and if you don't have a probe the kubelet just starts you off as ready. \n",
        "createdAt" : "2016-02-02T21:35:29Z",
        "updatedAt" : "2016-02-02T21:35:29Z",
        "lastEditedBy" : "395f4f9a-98be-4485-b436-51f0897d7c9f",
        "tags" : [
        ]
      },
      {
        "id" : "b6cc4b45-9841-410f-b612-c4778a45470f",
        "parentId" : "320e958c-2620-44c8-bba1-4d67371a6639",
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "Given that this test does NO retries or readiness, I'd like to defer that\nextra work and get this and other PRs in before freeze.\n\nOn Tue, Feb 2, 2016 at 1:36 PM, Prashanth B notifications@github.com\nwrote:\n\n> In test/e2e/kubeproxy.go\n> https://github.com/kubernetes/kubernetes/pull/20464#discussion_r51639186\n> :\n> \n> > @@ -197,6 +197,10 @@ func (config *KubeProxyTestConfig) hitNodePort(epCount int) {\n> >     config.dialFromNode(\"udp\", node2_IP, nodeUdpPort, tries, epCount)\n> >     By(\"dialing(http) node1 --> node2:nodeHttpPort\")\n> >     config.dialFromNode(\"http\", node2_IP, nodeHttpPort, tries, epCount)\n> > +\n> > -   By(\"checking kube-proxy URLs\")\n> > -   config.getSelfURL(\"/healthz\", \"ok\")\n> \n> you can poll for ready though, from the test. I _think_ the reboot tests\n> do this and if you don't have a probe the kubelet just starts you off as\n> ready.\n> \n> â€”\n> Reply to this email directly or view it on GitHub\n> https://github.com/kubernetes/kubernetes/pull/20464/files#r51639186.\n",
        "createdAt" : "2016-02-02T21:42:42Z",
        "updatedAt" : "2016-02-02T21:42:42Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      },
      {
        "id" : "3618b39f-35fb-4a21-a820-fb21b674198c",
        "parentId" : "320e958c-2620-44c8-bba1-4d67371a6639",
        "authorId" : "395f4f9a-98be-4485-b436-51f0897d7c9f",
        "body" : "I'm fine with the defer. The reboot test will poll till all pods are ready before declaring success.\n",
        "createdAt" : "2016-02-02T21:45:18Z",
        "updatedAt" : "2016-02-02T21:45:18Z",
        "lastEditedBy" : "395f4f9a-98be-4485-b436-51f0897d7c9f",
        "tags" : [
        ]
      }
    ],
    "commit" : "7ed83ad4f94b94a80d89eded18eaffd5cdd5d63b",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +200,204 @@\n\tBy(\"checking kube-proxy URLs\")\n\tconfig.getSelfURL(\"/healthz\", \"ok\")\n\tconfig.getSelfURL(\"/proxyMode\", \"iptables\") // the default\n}"
  },
  {
    "id" : "8ef745e8-d8dd-49d1-9f66-cd286e4fae74",
    "prId" : 17995,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "481505fa-7479-46fe-ad68-237fd07d5ca5",
        "parentId" : null,
        "authorId" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "body" : "what about line 172\n",
        "createdAt" : "2015-12-01T00:17:26Z",
        "updatedAt" : "2015-12-03T07:19:43Z",
        "lastEditedBy" : "392f7c7a-6820-4848-94e2-2b8e009fec9d",
        "tags" : [
        ]
      },
      {
        "id" : "caebd34c-2f5d-4376-9479-6fb7fce24d6a",
        "parentId" : "481505fa-7479-46fe-ad68-237fd07d5ca5",
        "authorId" : "0970b119-085d-41b4-8f33-e10409965eba",
        "body" : "done\n",
        "createdAt" : "2015-12-01T01:26:23Z",
        "updatedAt" : "2015-12-03T07:19:43Z",
        "lastEditedBy" : "0970b119-085d-41b4-8f33-e10409965eba",
        "tags" : [
        ]
      }
    ],
    "commit" : "522f5def8bb031043d78e649b8f8d116fe2af5b3",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +151,155 @@func (config *KubeProxyTestConfig) hitClusterIP(epCount int) {\n\tclusterIP := config.nodePortService.Spec.ClusterIP\n\ttries := epCount*epCount + 15 // if epCount == 0\n\tBy(\"dialing(udp) node1 --> clusterIP:clusterUdpPort\")\n\tconfig.dialFromNode(\"udp\", clusterIP, clusterUdpPort, tries, epCount)"
  },
  {
    "id" : "fa326d59-3cb7-4afb-a35e-f670afed59f8",
    "prId" : 15777,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "03a06647-02ae-4536-855c-d8a4c5094c03",
        "parentId" : null,
        "authorId" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "body" : "is that really a long enough timeout? worried about introducing flakes\n",
        "createdAt" : "2015-10-19T15:08:53Z",
        "updatedAt" : "2015-11-17T19:49:28Z",
        "lastEditedBy" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "tags" : [
        ]
      },
      {
        "id" : "262f50a9-c8bf-4b23-ac22-3b115b8623c6",
        "parentId" : "03a06647-02ae-4536-855c-d8a4c5094c03",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "It should be bigger (or equal) than that of nc. I guess we can decrease it to 1 sec (like the `-w 1`).\n",
        "createdAt" : "2015-10-19T15:31:36Z",
        "updatedAt" : "2015-11-17T19:49:28Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "ee78aae3-5392-4aee-8d96-1766e21cfdff",
        "parentId" : "03a06647-02ae-4536-855c-d8a4c5094c03",
        "authorId" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "body" : "i was actually worried about it being long enough, not that it might be too long. if `nc` is timing out after 1s then `timeout -t 3` is probably fine as-is\n",
        "createdAt" : "2015-10-19T15:55:07Z",
        "updatedAt" : "2015-11-17T19:49:28Z",
        "lastEditedBy" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "tags" : [
        ]
      }
    ],
    "commit" : "2d6c2eb8976db71f5fe8a2afc1dc365efd8fdd39",
    "line" : 95,
    "diffHunk" : "@@ -1,1 +243,247 @@\tvar cmd string\n\tif protocol == \"udp\" {\n\t\tcmd = fmt.Sprintf(\"echo 'hostName' | timeout -t 3 nc -w 1 -u %s %d\", targetIP, targetPort)\n\t} else {\n\t\tcmd = fmt.Sprintf(\"curl -s --connect-timeout 1 http://%s:%d/hostName\", targetIP, targetPort)"
  },
  {
    "id" : "d732d6c1-b54c-4511-82ac-4b1c04f08298",
    "prId" : 15777,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0e0b55ca-4c5c-42a8-ba31-6fabb617a7b4",
        "parentId" : null,
        "authorId" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "body" : "why is the force-delete needed here?\n",
        "createdAt" : "2015-10-19T15:21:59Z",
        "updatedAt" : "2015-11-17T19:49:28Z",
        "lastEditedBy" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "tags" : [
        ]
      },
      {
        "id" : "5d9a16e7-acb8-43a1-9d6a-5dfb2ee82ec4",
        "parentId" : "0e0b55ca-4c5c-42a8-ba31-6fabb617a7b4",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "Why not? It slows down tests without it.\n",
        "createdAt" : "2015-10-19T15:34:25Z",
        "updatedAt" : "2015-11-17T19:49:28Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "64eacb1a-4851-40b4-9049-cce062c9a2db",
        "parentId" : "0e0b55ca-4c5c-42a8-ba31-6fabb617a7b4",
        "authorId" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "body" : "no specific reason as to \"why not\" -- just wondering why the change was made at all\n",
        "createdAt" : "2015-10-19T15:56:01Z",
        "updatedAt" : "2015-11-17T19:49:28Z",
        "lastEditedBy" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "tags" : [
        ]
      }
    ],
    "commit" : "2d6c2eb8976db71f5fe8a2afc1dc365efd8fdd39",
    "line" : 255,
    "diffHunk" : "@@ -1,1 +497,501 @@func (config *KubeProxyTestConfig) deleteNetProxyPod() {\n\tpod := config.endpointPods[0]\n\tconfig.getPodClient().Delete(pod.Name, api.NewDeleteOptions(0))\n\tconfig.endpointPods = config.endpointPods[1:]\n\t// wait for pod being deleted."
  },
  {
    "id" : "5b8767ae-84d7-4bac-b27b-ebf93bf51086",
    "prId" : 15777,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "dd67db1c-ddd8-4c20-bc9a-d26eb5650e0b",
        "parentId" : null,
        "authorId" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "body" : "why is this an if statement, vs `Expect(err).NotTo(HaveOccurred())`? just wondering..\n",
        "createdAt" : "2015-10-19T15:51:06Z",
        "updatedAt" : "2015-11-17T19:49:28Z",
        "lastEditedBy" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "tags" : [
        ]
      },
      {
        "id" : "b4f1dac6-c32d-4671-8d51-3c46a071ef0a",
        "parentId" : "dd67db1c-ddd8-4c20-bc9a-d26eb5650e0b",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "Seems like this style is used in the whole file.\n",
        "createdAt" : "2015-10-19T16:58:15Z",
        "updatedAt" : "2015-11-17T19:49:28Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      }
    ],
    "commit" : "2d6c2eb8976db71f5fe8a2afc1dc365efd8fdd39",
    "line" : 260,
    "diffHunk" : "@@ -1,1 +515,519 @@func (config *KubeProxyTestConfig) createPod(pod *api.Pod) *api.Pod {\n\tcreatedPod, err := config.getPodClient().Create(pod)\n\tif err != nil {\n\t\tFailf(\"Failed to create %s pod: %v\", pod.Name, err)\n\t}"
  },
  {
    "id" : "ad6d0396-78dc-4f82-9712-a196ad06c773",
    "prId" : 15777,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4371dae2-ed53-4209-a7e4-08f07000ee32",
        "parentId" : null,
        "authorId" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "body" : "assuming that this is what allows the test to run on k8s-mesos?\n",
        "createdAt" : "2015-10-19T15:51:44Z",
        "updatedAt" : "2015-11-17T19:49:28Z",
        "lastEditedBy" : "aefa6d0d-0ad0-4062-966c-ddc56e70652b",
        "tags" : [
        ]
      },
      {
        "id" : "f52e9f88-7fe3-4186-9c66-61c4adb90442",
        "parentId" : "4371dae2-ed53-4209-a7e4-08f07000ee32",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "Yeah, ssh only worked on gce, gke, aws.\n",
        "createdAt" : "2015-10-19T16:58:44Z",
        "updatedAt" : "2015-11-17T19:49:28Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      }
    ],
    "commit" : "2d6c2eb8976db71f5fe8a2afc1dc365efd8fdd39",
    "line" : 190,
    "diffHunk" : "@@ -1,1 +434,438 @@\tExpect(err).NotTo(HaveOccurred(), fmt.Sprintf(\"Failed to get node list: %v\", err))\n\tconfig.externalAddrs = NodeAddresses(nodeList, api.NodeExternalIP)\n\tif len(config.externalAddrs) < 2 {\n\t\t// fall back to legacy IPs\n\t\tconfig.externalAddrs = NodeAddresses(nodeList, api.NodeLegacyHostIP)"
  },
  {
    "id" : "c7eb6b27-bdb3-4d5f-8c79-e2eb06c54d92",
    "prId" : 14646,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "efc5103b-5a7b-444c-82f5-61722f74dd97",
        "parentId" : null,
        "authorId" : "0970b119-085d-41b4-8f33-e10409965eba",
        "body" : "can we append :22 when we actually make the ssh call\n",
        "createdAt" : "2015-10-01T06:46:42Z",
        "updatedAt" : "2015-10-04T08:58:48Z",
        "lastEditedBy" : "0970b119-085d-41b4-8f33-e10409965eba",
        "tags" : [
        ]
      },
      {
        "id" : "b47c162a-f1b7-403b-b6ca-0f9e6eae70c0",
        "parentId" : "efc5103b-5a7b-444c-82f5-61722f74dd97",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "we do, see config.ssh\n",
        "createdAt" : "2015-10-01T07:02:53Z",
        "updatedAt" : "2015-10-04T08:58:48Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "0dcd8e8a-8d1f-4720-923f-dc6f869306e0",
        "parentId" : "efc5103b-5a7b-444c-82f5-61722f74dd97",
        "authorId" : "0970b119-085d-41b4-8f33-e10409965eba",
        "body" : "yes, thanks\n",
        "createdAt" : "2015-10-01T17:19:25Z",
        "updatedAt" : "2015-10-04T08:58:48Z",
        "lastEditedBy" : "0970b119-085d-41b4-8f33-e10409965eba",
        "tags" : [
        ]
      }
    ],
    "commit" : "b041d4ec1163c511c05e27a1c50c56cfa439c6e9",
    "line" : null,
    "diffHunk" : "@@ -1,1 +427,431 @@\tconfig.nodes = make([]string, 0, len(hosts))\n\tfor _, h := range hosts {\n\t\tconfig.nodes = append(config.nodes, strings.TrimSuffix(h, \":22\"))\n\t}\n"
  },
  {
    "id" : "a09d593e-ce42-4948-baf1-fc7cd40308eb",
    "prId" : 14348,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "49d0dc4d-f84e-4c2d-9635-2907e093719b",
        "parentId" : null,
        "authorId" : "d0e97b49-eba2-4b22-8695-df4f8a6776ad",
        "body" : "This is a recipe for flakiness.  Please poll on the endpoints resource until the endpoints reflect the pod disappearing.  (and then perhaps sleep an additional 5 seconds)\n",
        "createdAt" : "2015-09-28T23:41:19Z",
        "updatedAt" : "2015-09-30T13:01:30Z",
        "lastEditedBy" : "d0e97b49-eba2-4b22-8695-df4f8a6776ad",
        "tags" : [
        ]
      }
    ],
    "commit" : "020f3b164c324d81532a8f74f64245a979c83ee3",
    "line" : null,
    "diffHunk" : "@@ -1,1 +484,488 @@\t}\n\t// wait for kube-proxy to catch up with the pod being deleted.\n\ttime.Sleep(5 * time.Second)\n}\n"
  },
  {
    "id" : "bb246311-b68f-40b7-9bc0-430f578397ba",
    "prId" : 13697,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8171bf60-dc48-42f0-b867-0e3692fd8a85",
        "parentId" : null,
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "@ixdy  Is this appropriate use of By() ?  I thought By() was test cases, not just progress marks...\n",
        "createdAt" : "2015-09-10T01:33:35Z",
        "updatedAt" : "2015-09-17T05:34:13Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      },
      {
        "id" : "1d04663d-9c41-485e-90d2-f9538abef978",
        "parentId" : "8171bf60-dc48-42f0-b867-0e3692fd8a85",
        "authorId" : null,
        "body" : "@thockin No, By() is just progress marks. http://onsi.github.io/ginkgo/#documenting-complex-its-by\n",
        "createdAt" : "2015-09-10T18:50:59Z",
        "updatedAt" : "2015-09-17T05:34:13Z",
        "lastEditedBy" : null,
        "tags" : [
        ]
      }
    ],
    "commit" : "1752d6350b5f862353fe2f5d533f904ba6c42323",
    "line" : null,
    "diffHunk" : "@@ -1,1 +69,73 @@\t\tconfig.cleanup()\n\n\t\tBy(\"creating a selector\")\n\t\tselectorName := \"selector-\" + string(util.NewUUID())\n\t\tserviceSelector := map[string]string{"
  },
  {
    "id" : "1677da50-c472-4972-98be-4af51ea6379f",
    "prId" : 13697,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a0fa2ab9-057f-488b-b3e3-09dbaa443eda",
        "parentId" : null,
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "Why not a replication controller?  If there's a good reason it should be commented here\n",
        "createdAt" : "2015-09-10T16:19:56Z",
        "updatedAt" : "2015-09-17T05:34:13Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      },
      {
        "id" : "b0dd5367-a553-4cc1-99e1-0d99f5be1a3a",
        "parentId" : "a0fa2ab9-057f-488b-b3e3-09dbaa443eda",
        "authorId" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "body" : "Should we be assigning one backend pod per node?\n",
        "createdAt" : "2015-09-10T17:57:06Z",
        "updatedAt" : "2015-09-17T05:34:13Z",
        "lastEditedBy" : "f87fe7d3-581c-4cb6-b17e-b807c6f2c789",
        "tags" : [
        ]
      }
    ],
    "commit" : "1752d6350b5f862353fe2f5d533f904ba6c42323",
    "line" : null,
    "diffHunk" : "@@ -1,1 +444,448 @@\tpods := make([]*api.Pod, 0)\n\n\tfor i := 0; i < nodeCount; i++ {\n\t\tpodName := fmt.Sprintf(\"%s-%d\", podName, i)\n\t\tpod := config.createNetShellPodSpec(podName)"
  }
]