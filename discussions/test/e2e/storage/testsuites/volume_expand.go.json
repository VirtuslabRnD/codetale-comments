[
  {
    "id" : "31dbb89f-05ab-42c8-a165-e869c7bd5f0c",
    "prId" : 95780,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/95780#pullrequestreview-517269900",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9b317f5e-c07d-4f61-b2c2-66ee4bdd551c",
        "parentId" : null,
        "authorId" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "body" : "I think not all drivers are going to support this yet. Can you add a new test driver capability to gate the test?",
        "createdAt" : "2020-10-26T16:55:18Z",
        "updatedAt" : "2020-10-27T01:29:00Z",
        "lastEditedBy" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "tags" : [
        ]
      },
      {
        "id" : "1d5f4cb0-86fe-4cab-938b-348370461bc6",
        "parentId" : "9b317f5e-c07d-4f61-b2c2-66ee4bdd551c",
        "authorId" : "44594ff0-8fbc-44a7-84f9-654ffd54270f",
        "body" : "I updated to use NtfsDynamicPV. I think this way similar to DefaultFsDynamicPV, if driver has the expansion capability, it will trigger the tests. PTAL",
        "createdAt" : "2020-10-26T20:12:16Z",
        "updatedAt" : "2020-10-27T01:29:00Z",
        "lastEditedBy" : "44594ff0-8fbc-44a7-84f9-654ffd54270f",
        "tags" : [
        ]
      },
      {
        "id" : "1bc20c23-e945-4d76-b8f5-f9fc0166b924",
        "parentId" : "9b317f5e-c07d-4f61-b2c2-66ee4bdd551c",
        "authorId" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "body" : "What if the driver has not been updated to support expansion on ntfs yet?",
        "createdAt" : "2020-10-26T21:59:33Z",
        "updatedAt" : "2020-10-27T01:29:00Z",
        "lastEditedBy" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "tags" : [
        ]
      },
      {
        "id" : "046a3ea2-53ab-432f-901b-f4d5e626d7ea",
        "parentId" : "9b317f5e-c07d-4f61-b2c2-66ee4bdd551c",
        "authorId" : "44594ff0-8fbc-44a7-84f9-654ffd54270f",
        "body" : "actually this one can only trigger negative test \r\nvolume-expand should not allow expansion of pvcs without AllowVolumeExpansion property\r\n\r\nI was thinkning what is the difference between ntfs and defaultfs, here we have DefaultfsDynamicPVAllowExpansion, does it mean all driver which use defaultFs can support allowexpansion?",
        "createdAt" : "2020-10-26T23:59:52Z",
        "updatedAt" : "2020-10-27T01:29:00Z",
        "lastEditedBy" : "44594ff0-8fbc-44a7-84f9-654ffd54270f",
        "tags" : [
        ]
      },
      {
        "id" : "491f1bbd-bc2d-4602-8cab-2fb30d3c0d39",
        "parentId" : "9b317f5e-c07d-4f61-b2c2-66ee4bdd551c",
        "authorId" : "44594ff0-8fbc-44a7-84f9-654ffd54270f",
        "body" : "So I think my previous setup seems ok. And actually I should have both NtfsDynamicPVAllowExpansion and NtfsDynamicPV. \r\nTHis way, for driver which has capability of controllerExpansion, it will test positive tests, for drivers which do not has this capablility, it will test negative test.",
        "createdAt" : "2020-10-27T00:02:14Z",
        "updatedAt" : "2020-10-27T01:29:00Z",
        "lastEditedBy" : "44594ff0-8fbc-44a7-84f9-654ffd54270f",
        "tags" : [
        ]
      },
      {
        "id" : "5dd63354-ce37-4dc8-a1c7-68f160e591be",
        "parentId" : "9b317f5e-c07d-4f61-b2c2-66ee4bdd551c",
        "authorId" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "body" : "Yes but what if you have a driver that supports volumeexpansion on linux, but not yet on windows?",
        "createdAt" : "2020-10-27T00:03:37Z",
        "updatedAt" : "2020-10-27T01:29:00Z",
        "lastEditedBy" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "tags" : [
        ]
      },
      {
        "id" : "7c45b733-27a3-4485-b47c-4ceb9df890ee",
        "parentId" : "9b317f5e-c07d-4f61-b2c2-66ee4bdd551c",
        "authorId" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "body" : "I guess you would need two different test configs? one for linux and one for windows",
        "createdAt" : "2020-10-27T00:04:21Z",
        "updatedAt" : "2020-10-27T01:29:00Z",
        "lastEditedBy" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "tags" : [
        ]
      },
      {
        "id" : "ba032a82-54a7-4a55-a495-6bfd44294b42",
        "parentId" : "9b317f5e-c07d-4f61-b2c2-66ee4bdd551c",
        "authorId" : "44594ff0-8fbc-44a7-84f9-654ffd54270f",
        "body" : "yes, we have different setting for linux and windows. now since both support volume resize, both have the capability set.\r\nhttps://github.com/kubernetes-sigs/gcp-compute-persistent-disk-csi-driver/blob/12ea362bb378bb52fbbbb064407889719092ffea/test/k8s-integration/driver-config.go#L60",
        "createdAt" : "2020-10-27T00:35:52Z",
        "updatedAt" : "2020-10-27T01:29:00Z",
        "lastEditedBy" : "44594ff0-8fbc-44a7-84f9-654ffd54270f",
        "tags" : [
        ]
      }
    ],
    "commit" : "eeb649d31e6963be531c6d849e85496b595acf9c",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +71,75 @@\t\t\t\ttestpatterns.BlockVolModeDynamicPVAllowExpansion,\n\t\t\t\ttestpatterns.NtfsDynamicPV,\n\t\t\t\ttestpatterns.NtfsDynamicPVAllowExpansion,\n\t\t\t},\n\t\t\tSupportedSizeRange: e2evolume.SizeRange{"
  },
  {
    "id" : "d87f259c-6a2b-4e60-abd7-2d1215411474",
    "prId" : 95780,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/95780#pullrequestreview-517270429",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "91c46956-1eab-43c5-a029-7e1d90eb3151",
        "parentId" : null,
        "authorId" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "body" : "Is it possible to do this inside e2epod instead of potentially every testsuite?",
        "createdAt" : "2020-10-27T00:06:29Z",
        "updatedAt" : "2020-10-27T01:29:00Z",
        "lastEditedBy" : "209ee091-cf29-4efa-8a1b-a98334ea3f9a",
        "tags" : [
        ]
      },
      {
        "id" : "424b72ff-d0de-4537-b6c3-fd1080188849",
        "parentId" : "91c46956-1eab-43c5-a029-7e1d90eb3151",
        "authorId" : "44594ff0-8fbc-44a7-84f9-654ffd54270f",
        "body" : "right now no, there is an import cycle issue for e2epod and volume. \r\nhttps://github.com/kubernetes/kubernetes/issues/81245",
        "createdAt" : "2020-10-27T00:37:40Z",
        "updatedAt" : "2020-10-27T01:29:00Z",
        "lastEditedBy" : "44594ff0-8fbc-44a7-84f9-654ffd54270f",
        "tags" : [
        ]
      }
    ],
    "commit" : "eeb649d31e6963be531c6d849e85496b595acf9c",
    "line" : 48,
    "diffHunk" : "@@ -1,1 +430,434 @@// TODO: after issue https://github.com/kubernetes/kubernetes/issues/81245 is resolved\n// this utility can be moved to e2epod\nfunc getTestImage() int {\n\tif framework.NodeOSDistroIs(\"windows\") {\n\t\treturn imageutils.Agnhost"
  },
  {
    "id" : "1b1e1725-0542-48d2-af72-a8d8f9a2028c",
    "prId" : 81107,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/81107#pullrequestreview-278743969",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "88ec1251-10a1-4082-851d-4f92e054a5c8",
        "parentId" : null,
        "authorId" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "body" : "I know this is kinda long winded but I think we should rather do this:\r\n\r\n```\r\nnewPVC, err := ExpandPVCSize(l.resource.pvc, newSize, f.ClientSet)\r\nframework.ExpectNoError(err, \"While updating pvc for more size\")\r\nl.resource.pvc = newPVC\r\n```\r\n\r\nAnd do this wherever `ExpandPVCSize` is called. My reasoning is - this can \"potentially\" happen in other places where we are assigning result of `ExpandPVCSize` to `l.resource.pvc` too and we should update those call sites as well, just to be safe.\r\n",
        "createdAt" : "2019-08-13T01:38:43Z",
        "updatedAt" : "2019-08-23T00:03:14Z",
        "lastEditedBy" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "tags" : [
        ]
      },
      {
        "id" : "56f6b598-ebd7-4d9e-90a2-a7da2032befa",
        "parentId" : "88ec1251-10a1-4082-851d-4f92e054a5c8",
        "authorId" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "body" : "it is probably fine to just do `_, err = ExpandPVCSize()` in this place but I think other call sites of `ExpandPVCSize` is problematic too and worth fixing. \r\n",
        "createdAt" : "2019-08-13T01:47:08Z",
        "updatedAt" : "2019-08-23T00:03:14Z",
        "lastEditedBy" : "d3e684d7-edd2-4290-a8bf-e8b698c97338",
        "tags" : [
        ]
      },
      {
        "id" : "fc8f6186-d37d-4b75-8556-d755243575c5",
        "parentId" : "88ec1251-10a1-4082-851d-4f92e054a5c8",
        "authorId" : "241ab19e-f85a-4d22-92e2-88f2b6287d14",
        "body" : "I agree, will fix all places",
        "createdAt" : "2019-08-13T03:09:07Z",
        "updatedAt" : "2019-08-23T00:03:14Z",
        "lastEditedBy" : "241ab19e-f85a-4d22-92e2-88f2b6287d14",
        "tags" : [
        ]
      },
      {
        "id" : "468ea093-7c0f-4665-810c-58ef9ab392eb",
        "parentId" : "88ec1251-10a1-4082-851d-4f92e054a5c8",
        "authorId" : "241ab19e-f85a-4d22-92e2-88f2b6287d14",
        "body" : "done, PTAL @gnufied ",
        "createdAt" : "2019-08-23T00:03:45Z",
        "updatedAt" : "2019-08-23T00:03:45Z",
        "lastEditedBy" : "241ab19e-f85a-4d22-92e2-88f2b6287d14",
        "tags" : [
        ]
      }
    ],
    "commit" : "b125bdda20d84418bc282576bbeadbed44a03827",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +145,149 @@\t\t\te2elog.Logf(\"currentPvcSize %v, newSize %v\", currentPvcSize, newSize)\n\t\t\t_, err = ExpandPVCSize(l.resource.pvc, newSize, f.ClientSet)\n\t\t\tframework.ExpectError(err, \"While updating non-expandable PVC\")\n\t\t})\n\t} else {"
  }
]