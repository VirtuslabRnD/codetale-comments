[
  {
    "id" : "39fc372e-f07c-4928-8f79-e32666ea52a9",
    "prId" : 82664,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/82664#pullrequestreview-288213334",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "146221c7-3bb3-4104-82e7-f9b39679fcc8",
        "parentId" : null,
        "authorId" : "06cbf859-1cac-4be7-80e6-3b34dcff1812",
        "body" : "Per our talk on [Slack](https://kubernetes.slack.com/archives/C09TP78DV/p1568310289067700), these 2 conformance tests are relatively \"non-disruptive\" (comparing to other taint tests in this file) as they internally cancel the taint within default toleraionSeconds (300 secs), which means:\r\n\r\n1. when the taint is applied, under the hood the e2e irrelative pods will be put into an eviction queue holding them up for 300 seconds.\r\n2. the e2e taint gets canceled, then the pods in the eviction queue will be released - i.e. they will be exactly the same as before.\r\n\r\nSo my impression is that some cases in this file are more qualified to be applied as \"[Disruptive]\" label.",
        "createdAt" : "2019-09-12T22:32:13Z",
        "updatedAt" : "2019-09-24T19:19:12Z",
        "lastEditedBy" : "06cbf859-1cac-4be7-80e6-3b34dcff1812",
        "tags" : [
        ]
      },
      {
        "id" : "391ce312-b4a9-4a57-81bb-8e2b409c1630",
        "parentId" : "146221c7-3bb3-4104-82e7-f9b39679fcc8",
        "authorId" : "73cba353-2317-4305-8981-830b29b34769",
        "body" : "I am definitely not versed in how the scheduling/eviction works, but I'm just confused because your description doesn't seem to square with what is happening.\r\n\r\nI didn't trust my understanding so I wanted to repro it myself. I built the kind images for the v1.16.0-rc.2 tag and ran just the `removing taint cancels eviction` test and reprod that the sonobuoy pod (a workload outside the test framework) gets evicted.\r\n\r\nHere are some of the logs from the controller:\r\n```\r\n0913 18:54:07.405937       1 taint_manager.go:105] NoExecuteTaintManager is deleting Pod: heptio-sonobuoy/sonobuoy-e2e-job-3223075635be415d\r\nI0913 18:54:07.406113       1 taint_manager.go:105] NoExecuteTaintManager is deleting Pod: heptio-sonobuoy/sonobuoy\r\nI0913 18:54:07.406147       1 taint_manager.go:105] NoExecuteTaintManager is deleting Pod: kube-system/kindnet-lpx4w\r\nI0913 18:54:07.406675       1 event.go:255] Event(v1.ObjectReference{Kind:\"Pod\", Namespace:\"heptio-sonobuoy\", Name:\"sonobuoy\", UID:\"\", APIVersion:\"\", ResourceVersion:\"\", FieldPath:\"\"}): type: 'Normal' reason: 'TaintManagerEviction' Marking for deletion Pod heptio-sonobuoy/sonobuoy\r\nI0913 18:54:07.406727       1 event.go:255] Event(v1.ObjectReference{Kind:\"Pod\", Namespace:\"heptio-sonobuoy\", Name:\"sonobuoy-e2e-job-3223075635be415d\", UID:\"\", APIVersion:\"\", ResourceVersion:\"\", FieldPath:\"\"}): type: 'Normal' reason: 'TaintManagerEviction' Marking for deletion Pod heptio-sonobuoy/sonobuoy-e2e-job-3223075635be415d\r\n```\r\n\r\nIs this a bug? I see the eviction/deletion of the pod happen even before it logs that it is marking it for eviction.",
        "createdAt" : "2019-09-13T19:02:02Z",
        "updatedAt" : "2019-09-24T19:19:12Z",
        "lastEditedBy" : "73cba353-2317-4305-8981-830b29b34769",
        "tags" : [
        ]
      },
      {
        "id" : "6cf43761-5d9e-455e-827e-df1c0c7fa9c5",
        "parentId" : "146221c7-3bb3-4104-82e7-f9b39679fcc8",
        "authorId" : "73cba353-2317-4305-8981-830b29b34769",
        "body" : "I think everyone here would welcome a PR if it made the tags more appropriate on the rest of the tests.  These two, being conformance related, have just a higher priority so I want to be sure to handle them for the release.",
        "createdAt" : "2019-09-13T19:36:10Z",
        "updatedAt" : "2019-09-24T19:19:12Z",
        "lastEditedBy" : "73cba353-2317-4305-8981-830b29b34769",
        "tags" : [
        ]
      }
    ],
    "commit" : "d0ab1f06fb8fdbddbac28b55eb1a7f4a1abfb844",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +284,288 @@\t\tevicted if the taint is removed before toleration time ends.\n\t*/\n\tframework.ConformanceIt(\"removing taint cancels eviction [Disruptive]\", func() {\n\t\tpodName := \"taint-eviction-4\"\n\t\tpod := createPodForTaintsTest(true, 2*additionalWaitPerDeleteSeconds, podName, podName, ns)"
  },
  {
    "id" : "9797b386-d2d4-4c98-a970-35f610176086",
    "prId" : 82664,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/82664#pullrequestreview-292651203",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2f7c5b89-7c48-4ee8-bbf9-cb181c9927e9",
        "parentId" : null,
        "authorId" : "580b4924-2623-4aee-8bbf-3e1735a9dc88",
        "body" : "Please split changes to this file into a separate PR.",
        "createdAt" : "2019-09-17T22:35:50Z",
        "updatedAt" : "2019-09-24T19:19:12Z",
        "lastEditedBy" : "580b4924-2623-4aee-8bbf-3e1735a9dc88",
        "tags" : [
        ]
      },
      {
        "id" : "f551c8dc-5615-49e7-a7b4-248a5274656d",
        "parentId" : "2f7c5b89-7c48-4ee8-bbf9-cb181c9927e9",
        "authorId" : "f81960f6-a033-4403-bebf-c8ebb484e444",
        "body" : "I kind of think this is fine right now and shouldn't affect the suite.  ",
        "createdAt" : "2019-09-20T21:24:28Z",
        "updatedAt" : "2019-09-24T19:19:12Z",
        "lastEditedBy" : "f81960f6-a033-4403-bebf-c8ebb484e444",
        "tags" : [
        ]
      },
      {
        "id" : "10135aa5-3a84-4639-8791-f2789d950dc3",
        "parentId" : "2f7c5b89-7c48-4ee8-bbf9-cb181c9927e9",
        "authorId" : "580b4924-2623-4aee-8bbf-3e1735a9dc88",
        "body" : "/shrug",
        "createdAt" : "2019-09-20T21:34:23Z",
        "updatedAt" : "2019-09-24T19:19:12Z",
        "lastEditedBy" : "580b4924-2623-4aee-8bbf-3e1735a9dc88",
        "tags" : [
        ]
      },
      {
        "id" : "8898e638-534e-40bd-8da5-b527bba44fd5",
        "parentId" : "2f7c5b89-7c48-4ee8-bbf9-cb181c9927e9",
        "authorId" : "73cba353-2317-4305-8981-830b29b34769",
        "body" : "OK, I rebased onto master. Left this in the PR for now unless the request is reinforced.",
        "createdAt" : "2019-09-24T19:19:48Z",
        "updatedAt" : "2019-09-24T19:19:48Z",
        "lastEditedBy" : "73cba353-2317-4305-8981-830b29b34769",
        "tags" : [
        ]
      }
    ],
    "commit" : "d0ab1f06fb8fdbddbac28b55eb1a7f4a1abfb844",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +284,288 @@\t\tevicted if the taint is removed before toleration time ends.\n\t*/\n\tframework.ConformanceIt(\"removing taint cancels eviction [Disruptive]\", func() {\n\t\tpodName := \"taint-eviction-4\"\n\t\tpod := createPodForTaintsTest(true, 2*additionalWaitPerDeleteSeconds, podName, podName, ns)"
  },
  {
    "id" : "e85dcb4e-9be9-4782-9ad1-ccfecfb9a842",
    "prId" : 80879,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/80879#pullrequestreview-271061925",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0fdafecb-f1a2-4ce3-b31b-811cd78a762d",
        "parentId" : null,
        "authorId" : "15fb535e-c5be-47ce-a304-1cb5da5aca90",
        "body" : "The name of `RunPodAndGetNodeName` function is mis-leading. I initially thought we already check that the pods are running, but looks like that function only waits until the pod is scheduled. We should probably rename that function in a separate PR.",
        "createdAt" : "2019-08-05T22:38:27Z",
        "updatedAt" : "2019-08-05T22:39:34Z",
        "lastEditedBy" : "15fb535e-c5be-47ce-a304-1cb5da5aca90",
        "tags" : [
        ]
      },
      {
        "id" : "03300a16-5751-4a27-abb7-8bba64a6fc76",
        "parentId" : "0fdafecb-f1a2-4ce3-b31b-811cd78a762d",
        "authorId" : "38ca4f80-c365-4775-8981-1e56b713b07b",
        "body" : "Agreed, will change it in a another PR. Thanks :)",
        "createdAt" : "2019-08-06T00:13:08Z",
        "updatedAt" : "2019-08-06T00:13:08Z",
        "lastEditedBy" : "38ca4f80-c365-4775-8981-1e56b713b07b",
        "tags" : [
        ]
      }
    ],
    "commit" : "b4ea510529ade56e2f80cd3a7baac9b802e0efc1",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +429,433 @@\t\tframework.ExpectNoError(err)\n\t\t// Wait for pods to be running state before eviction happens\n\t\tframework.ExpectNoError(e2epod.WaitForPodRunningInNamespace(cs, pod1))\n\t\tframework.ExpectNoError(e2epod.WaitForPodRunningInNamespace(cs, pod2))\n\t\te2elog.Logf(\"Pod2 is running on %v. Tainting Node\", nodeName)"
  },
  {
    "id" : "efa8f3f4-0fb5-4c47-99d5-d127ab01920b",
    "prId" : 77427,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/77427#pullrequestreview-234201029",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6f7216be-d6e0-44b2-a9bf-188ac52ac7b6",
        "parentId" : null,
        "authorId" : "6dd71efb-88b1-4bb0-b30a-0df658362f14",
        "body" : "Keep these import separate",
        "createdAt" : "2019-05-06T17:21:36Z",
        "updatedAt" : "2019-05-07T00:15:42Z",
        "lastEditedBy" : "6dd71efb-88b1-4bb0-b30a-0df658362f14",
        "tags" : [
        ]
      },
      {
        "id" : "c92398a3-5885-4963-8a1b-a1d02fbeac0e",
        "parentId" : "6f7216be-d6e0-44b2-a9bf-188ac52ac7b6",
        "authorId" : "15fb535e-c5be-47ce-a304-1cb5da5aca90",
        "body" : "+1. Please add a blank line after these imports and we are good to go.",
        "createdAt" : "2019-05-06T21:03:30Z",
        "updatedAt" : "2019-05-07T00:15:42Z",
        "lastEditedBy" : "15fb535e-c5be-47ce-a304-1cb5da5aca90",
        "tags" : [
        ]
      }
    ],
    "commit" : "da7507500f4dd21a8dbb7e13b29812e495bd296c",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +21,25 @@\n\t. \"github.com/onsi/ginkgo\"\n\t_ \"github.com/stretchr/testify/assert\"\n\n\t\"k8s.io/api/core/v1\""
  },
  {
    "id" : "1bd1098b-f781-44dd-8e2b-11ade301ed58",
    "prId" : 77427,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/77427#pullrequestreview-234098827",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c15b94d2-be34-43f0-ac38-3a950d6fe403",
        "parentId" : null,
        "authorId" : "c2df03b8-26df-4018-9f8f-4ddea7f8f6cc",
        "body" : "Don't we need to put a blank line between `_ \"github.com/stretchr/testify/assert\"` and `\"k8s.io/api/core/v1\"` like test/e2e/scheduling/priorities.go ?",
        "createdAt" : "2019-05-06T17:25:46Z",
        "updatedAt" : "2019-05-07T00:15:42Z",
        "lastEditedBy" : "c2df03b8-26df-4018-9f8f-4ddea7f8f6cc",
        "tags" : [
        ]
      }
    ],
    "commit" : "da7507500f4dd21a8dbb7e13b29812e495bd296c",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +23,27 @@\t_ \"github.com/stretchr/testify/assert\"\n\n\t\"k8s.io/api/core/v1\"\n\tmetav1 \"k8s.io/apimachinery/pkg/apis/meta/v1\"\n\t\"k8s.io/apimachinery/pkg/labels\""
  },
  {
    "id" : "b4e65dc8-d340-4c3a-b445-47c791fd3847",
    "prId" : 75909,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/75909#pullrequestreview-221140035",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "afde9282-cbf2-46de-8a58-8a1dd4ee810f",
        "parentId" : null,
        "authorId" : "e7b8fd7e-f93b-44b6-b6d0-4331207d901c",
        "body" : "One suggestion.  You may need to move `framework.ExpectNoError(err)`  from line 419 to line 413 to check the error of `nodeName, err := testutils.RunPodAndGetNodeName(cs, pod1, 2*time.Minute)`",
        "createdAt" : "2019-04-01T14:19:06Z",
        "updatedAt" : "2019-04-01T14:19:06Z",
        "lastEditedBy" : "e7b8fd7e-f93b-44b6-b6d0-4331207d901c",
        "tags" : [
        ]
      }
    ],
    "commit" : "3a4a69280b28d1be16a360ee21fbca160a752d11",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +411,415 @@\t\tBy(\"Starting pods...\")\n\t\tnodeName, err := testutils.RunPodAndGetNodeName(cs, pod1, 2*time.Minute)\n\t\tnode, err := cs.CoreV1().Nodes().Get(nodeName, metav1.GetOptions{})\n\t\tframework.ExpectNoError(err)\n\t\tnodeHostNameLabel, ok := node.GetObjectMeta().GetLabels()[\"kubernetes.io/hostname\"]"
  }
]