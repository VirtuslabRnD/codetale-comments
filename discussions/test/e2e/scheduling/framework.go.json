[
  {
    "id" : "2fc2134b-70be-4b5e-8a05-fdfbac3cafb6",
    "prId" : 85226,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/85226#pullrequestreview-316477756",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4ef15772-5f7c-41af-89aa-ef84542f12f1",
        "parentId" : null,
        "authorId" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "body" : "just to double check my understanding, we could remove the ```&& !podTerminted``` condition and we would still be ok, right?",
        "createdAt" : "2019-11-13T18:40:30Z",
        "updatedAt" : "2019-11-13T19:39:22Z",
        "lastEditedBy" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "tags" : [
        ]
      },
      {
        "id" : "d36923f9-7613-4e1a-aa44-a2a43a5be88e",
        "parentId" : "4ef15772-5f7c-41af-89aa-ef84542f12f1",
        "authorId" : "0e2b7889-1224-444e-a36d-475f9edd0703",
        "body" : "could a pod have a deletiontimestamp set and not yet be in the succeeded/failed state? In that case it would still affect the pod counts",
        "createdAt" : "2019-11-13T18:53:01Z",
        "updatedAt" : "2019-11-13T19:39:22Z",
        "lastEditedBy" : "0e2b7889-1224-444e-a36d-475f9edd0703",
        "tags" : [
        ]
      },
      {
        "id" : "07a245ed-0a1c-45e8-9829-6c85130c4c7e",
        "parentId" : "4ef15772-5f7c-41af-89aa-ef84542f12f1",
        "authorId" : "31fbce73-ef64-43f8-9faa-047479d8fc32",
        "body" : "I'm not entirely sure. I imagine different controllers (kubelet or apiserver) might update the fields or remove the pods at different times.",
        "createdAt" : "2019-11-13T18:56:54Z",
        "updatedAt" : "2019-11-13T19:39:22Z",
        "lastEditedBy" : "31fbce73-ef64-43f8-9faa-047479d8fc32",
        "tags" : [
        ]
      }
    ],
    "commit" : "f6b460c9910a0579892395c4bdf4a3bfba85e71e",
    "line" : 91,
    "diffHunk" : "@@ -1,1 +100,104 @@\tvar deleting []v1.Pod\n\tfor _, p := range pods.Items {\n\t\tif p.ObjectMeta.DeletionTimestamp != nil && !podTerminated(p) {\n\t\t\tdeleting = append(deleting, p)\n\t\t}"
  },
  {
    "id" : "3b7f9781-1b6a-4af8-ac52-28fa5d1b3f9f",
    "prId" : 84806,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/84806#pullrequestreview-313368798",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7f3a35bf-39eb-4d6c-a415-437536293932",
        "parentId" : null,
        "authorId" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "body" : "can you factor this out to a function, perhaps ```allPods := getAllPods()``` and use it in both places.",
        "createdAt" : "2019-11-07T14:17:24Z",
        "updatedAt" : "2019-11-07T16:32:55Z",
        "lastEditedBy" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "tags" : [
        ]
      }
    ],
    "commit" : "a19d83494f5ba4f36bc0031f545e195533ccc3f0",
    "line" : 60,
    "diffHunk" : "@@ -1,1 +72,76 @@\n\t}\n\tallPods.Items = currentPods\n\treturn len(allPods.Items)\n}"
  },
  {
    "id" : "8ed18e59-a8f8-4f16-82e9-a651560509e6",
    "prId" : 84806,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/84806#pullrequestreview-313368798",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ac8f173b-b2b7-4e86-9ddf-46d00e8f7321",
        "parentId" : null,
        "authorId" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "body" : "ditto, factor out to a function that returns two ```int``` variables and use it in both places, inside and outside the loop: \r\n\r\n```\r\nscheduledSystemPods, notScheduledSystemPods := getSystemPods()\r\nallSystemPods := scheduledSystemPods + notScheduledSystemPods\r\n```\r\n\r\nand replace ```len(systemPods.Items) ``` with ```allSystemPods```\r\n\r\n",
        "createdAt" : "2019-11-07T14:21:57Z",
        "updatedAt" : "2019-11-07T16:32:55Z",
        "lastEditedBy" : "570b631b-84a0-4888-a815-ca0e7934e412",
        "tags" : [
        ]
      }
    ],
    "commit" : "a19d83494f5ba4f36bc0031f545e195533ccc3f0",
    "line" : 68,
    "diffHunk" : "@@ -1,1 +80,84 @@\tsystemPods, err := c.CoreV1().Pods(metav1.NamespaceSystem).List(metav1.ListOptions{})\n\tframework.ExpectNoError(err, \"listing all pods in kube-system namespace while waiting for stable cluster\")\n\tscheduledSystemPods, currentlyNotScheduledSystemPods := e2epod.GetPodsScheduled(masterNodes, systemPods)\n\treturn len(scheduledSystemPods), len(currentlyNotScheduledSystemPods)\n}"
  }
]