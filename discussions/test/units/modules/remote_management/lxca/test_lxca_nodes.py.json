[
  {
    "id" : "2ed366de-3e59-4bc8-9161-0812282d7f55",
    "prId" : 46767,
    "prUrl" : "https://github.com/ansible/ansible/pull/46767#pullrequestreview-171135376",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3c78a0e6-badb-4e11-8e55-c03c5f8ea646",
        "parentId" : null,
        "authorId" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "body" : "This doesn't check that a failure occurred because both `module.fail_json` and `module.exit_json` mpdules raise `SystemExit` exception. In order to check that, either use [`capfd`](https://github.com/ansible/ansible/blob/c53e3ca8e9834259b79c6b8dec9cf8219c4ae113/test/units/modules/packaging/os/test_rhn_register.py#L91) fixture or mock [`AnsibleModule`](https://github.com/ansible/ansible/blob/c53e3ca8e9834259b79c6b8dec9cf8219c4ae113/test/units/modules/source_control/test_gitlab_hooks.py#L72).\r\n\r\n* [X] Done",
        "createdAt" : "2018-10-31T11:14:00Z",
        "updatedAt" : "2018-11-27T10:34:25Z",
        "lastEditedBy" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "tags" : [
        ]
      },
      {
        "id" : "1107f8b6-f675-4d43-aaa2-fbe9374044aa",
        "parentId" : "3c78a0e6-badb-4e11-8e55-c03c5f8ea646",
        "authorId" : "8c80ba0c-ace6-47be-a9c6-3f6fc6d348b3",
        "body" : "used capfd and modified tests",
        "createdAt" : "2018-11-02T14:51:50Z",
        "updatedAt" : "2018-11-27T10:34:25Z",
        "lastEditedBy" : "8c80ba0c-ace6-47be-a9c6-3f6fc6d348b3",
        "tags" : [
        ]
      }
    ],
    "commit" : "4003a13bdace7ca435d8d0fdbbd7b6fdca46101a",
    "line" : 42,
    "diffHunk" : "@@ -1,1 +40,44 @@                                         mocker, capfd, setup_module):\n        \"\"\"Failure must occurs when all parameters are missing\"\"\"\n        with pytest.raises(SystemExit):\n            _setup_conn.return_value = \"Fake connection\"\n            _execute_module.return_value = \"Fake execution\""
  }
]