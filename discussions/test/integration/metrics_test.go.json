[
  {
    "id" : "a59b62df-e2da-4f4b-95fa-510ecdc6d25e",
    "prId" : 6941,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d6954805-825c-488e-adb7-716f34c37cc8",
        "parentId" : null,
        "authorId" : "c2b5c827-efcd-438f-8db5-52d917b1cde9",
        "body" : "Typically with helper functions in test cod you don't pass in the testing.T reference. Instead, just have the helper return an error and the caller can fail the test by checking the error result. \n",
        "createdAt" : "2015-04-17T18:51:17Z",
        "updatedAt" : "2015-04-17T19:31:43Z",
        "lastEditedBy" : "c2b5c827-efcd-438f-8db5-52d917b1cde9",
        "tags" : [
        ]
      },
      {
        "id" : "6b7b4aeb-65d4-415c-807b-18233b922e87",
        "parentId" : "d6954805-825c-488e-adb7-716f34c37cc8",
        "authorId" : "7766e039-aa4c-4476-9091-5cc8763fa8d6",
        "body" : "While that's true internally, it doesn't seem to be the case in this code base, and it's much more convenient do it this way because it allows us to spit out a separate error for every metric that's missing, rather than just the first one.\n\nI've changed scrapeMetrics() to return an error instead, but really prefer checkForExpectedMetrics like this.\n",
        "createdAt" : "2015-04-17T19:28:58Z",
        "updatedAt" : "2015-04-17T19:31:43Z",
        "lastEditedBy" : "7766e039-aa4c-4476-9091-5cc8763fa8d6",
        "tags" : [
        ]
      }
    ],
    "commit" : "fe262c0d98dca5eb050e7ce3d393cefa13c83f03",
    "line" : null,
    "diffHunk" : "@@ -1,1 +76,80 @@}\n\nfunc checkForExpectedMetrics(t *testing.T, metrics []*prometheuspb.MetricFamily, expectedMetrics []string) {\n\tfoundMetrics := make(map[string]bool)\n\tfor _, metric := range metrics {"
  },
  {
    "id" : "3d90389d-b1a3-49ac-9b91-5bee10aa66f2",
    "prId" : 6941,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "62dde4fe-5707-4f19-89f1-4ca42a377ced",
        "parentId" : null,
        "authorId" : "c2b5c827-efcd-438f-8db5-52d917b1cde9",
        "body" : "This might be simpler as:\n1. for each found metric, set foundMetrics[metric.GetName()] = true\n2. for each expected metric, if _, ok := foundMetrics[expected]; !ok { return error }\n\nThen you get rid of one of the loops and the map variable name makes a bit more sense. \n",
        "createdAt" : "2015-04-17T18:54:15Z",
        "updatedAt" : "2015-04-17T19:31:43Z",
        "lastEditedBy" : "c2b5c827-efcd-438f-8db5-52d917b1cde9",
        "tags" : [
        ]
      }
    ],
    "commit" : "fe262c0d98dca5eb050e7ce3d393cefa13c83f03",
    "line" : null,
    "diffHunk" : "@@ -1,1 +77,81 @@\nfunc checkForExpectedMetrics(t *testing.T, metrics []*prometheuspb.MetricFamily, expectedMetrics []string) {\n\tfoundMetrics := make(map[string]bool)\n\tfor _, metric := range metrics {\n\t\tfoundMetrics[metric.GetName()] = true"
  },
  {
    "id" : "dee846ce-781c-425f-95c6-7343a6a632bb",
    "prId" : 6694,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e0d39d0b-4abf-4148-890a-6127764ee3b9",
        "parentId" : null,
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "nit: missing blank line separating third_party deps.\n",
        "createdAt" : "2015-05-15T23:19:31Z",
        "updatedAt" : "2015-05-16T00:30:30Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      },
      {
        "id" : "267f77b4-73c5-44f7-8463-1f8be398029b",
        "parentId" : "e0d39d0b-4abf-4148-890a-6127764ee3b9",
        "authorId" : "395f4f9a-98be-4485-b436-51f0897d7c9f",
        "body" : "done\n",
        "createdAt" : "2015-05-16T00:10:40Z",
        "updatedAt" : "2015-05-16T00:30:30Z",
        "lastEditedBy" : "395f4f9a-98be-4485-b436-51f0897d7c9f",
        "tags" : [
        ]
      }
    ],
    "commit" : "4200033c0afd05b03a03b9f3a5443441e756f130",
    "line" : null,
    "diffHunk" : "@@ -1,1 +31,35 @@\t\"github.com/GoogleCloudPlatform/kubernetes/pkg/fields\"\n\t\"github.com/GoogleCloudPlatform/kubernetes/pkg/labels\"\n\t\"github.com/GoogleCloudPlatform/kubernetes/test/integration/framework\"\n\n\t\"github.com/golang/glog\""
  }
]