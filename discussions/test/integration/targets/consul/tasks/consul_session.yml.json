[
  {
    "id" : "589dbb04-413a-4310-bbfa-c265873f11a9",
    "prId" : 56392,
    "prUrl" : "https://github.com/ansible/ansible/pull/56392#pullrequestreview-256083896",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "42463ccc-fe54-4249-a212-1424022f373a",
        "parentId" : null,
        "authorId" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "body" : "You could get the Jinja version and conditionally run a task using the `selectattr` filter. May not be worth the extra complexity but just a thought.\r\n\r\n```yaml\r\n- name: Get Jinja version\r\n  command: \"{{ ansible_python_interpreter }} -c 'import jinja2; print(jinja2.__version__)'\"\r\n  register: jinja_version\r\n\r\n- assert:\r\n    that:\r\n      - (result['sessions'] | selectattr('ID', 'match', '^' ~ session_id ~ '$') | first)['Name'] == 'testsession'\r\n  when: jinja_version.stdout is version('2.7', '>=')\r\n```",
        "createdAt" : "2019-06-14T13:54:45Z",
        "updatedAt" : "2019-06-30T17:35:17Z",
        "lastEditedBy" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "tags" : [
        ]
      },
      {
        "id" : "d7f3953a-7578-4185-939f-bbefc5dc97d8",
        "parentId" : "42463ccc-fe54-4249-a212-1424022f373a",
        "authorId" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "body" : "I would rather use one implementation which works with all tested distributions. `selectattr` could be used once CentOS 6 isn't tested anymore.",
        "createdAt" : "2019-06-30T17:30:34Z",
        "updatedAt" : "2019-06-30T17:35:17Z",
        "lastEditedBy" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "tags" : [
        ]
      }
    ],
    "commit" : "a65313bfe1d95938a5328d3830cd9fd9f0f2265b",
    "line" : 39,
    "diffHunk" : "@@ -1,1 +37,41 @@      # selectattr not available on Jinja 2.2 provided by CentOS 6\n      # hence the two following tasks (set_fact/assert) are used\n      # - (result['sessions'] | selectattr('ID', 'match', '^' ~ session_id ~ '$') | first)['Name'] == 'testsession'\n\n- name: search created session"
  }
]