[
  {
    "id" : "d9bb8e7f-0a95-462b-8e78-bd95c8c3da3a",
    "prId" : 38678,
    "prUrl" : "https://github.com/ansible/ansible/pull/38678#pullrequestreview-117729299",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5b8b910b-e822-435b-9af0-8ad836519968",
        "parentId" : null,
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "This fails frequently for me:\r\n```\r\nTASK [ec2_group_loop : Purge rules, including the default] **********************************************************************************************************************************\r\ntask path: /Users/shertel/Workspace/ansible/test/integration/targets/ec2_group_loop/tasks/egress_tests.yml:67\r\nUsing module file /Users/shertel/Workspace/ansible/lib/ansible/modules/cloud/amazon/ec2_group.py\r\n<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: shertel\r\n<127.0.0.1> EXEC /bin/sh -c 'echo ~shertel && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p \"` echo /Users/shertel/.ansible/tmp/ansible-tmp-1524155927.242372-48593725135727 `\" && echo ansible-tmp-1524155927.242372-48593725135727=\"` echo /Users/shertel/.ansible/tmp/ansible-tmp-1524155927.242372-48593725135727 `\" ) && sleep 0'\r\n<127.0.0.1> PUT /Users/shertel/.ansible/tmp/ansible-local-585886_d9muu6/tmpen3y1gka TO /Users/shertel/.ansible/tmp/ansible-tmp-1524155927.242372-48593725135727/ec2_group.py\r\n<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/shertel/.ansible/tmp/ansible-tmp-1524155927.242372-48593725135727/ /Users/shertel/.ansible/tmp/ansible-tmp-1524155927.242372-48593725135727/ec2_group.py && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c '/tmp/ansible-test-coverage-mn9kltq2/coverage/injector.py /Users/shertel/.ansible/tmp/ansible-tmp-1524155927.242372-48593725135727/ec2_group.py && sleep 0'\r\n<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/shertel/.ansible/tmp/ansible-tmp-1524155927.242372-48593725135727/ > /dev/null 2>&1 && sleep 0'\r\n [WARNING]: Ran out of time waiting for sg-ee50c6a7 IpPermissionsEgress. Current: {Rule(port_range=(None, None), protocol='-1', target='0.0.0.0/0', target_type='ipv4', description=None)},\r\nDesired: []\r\n\r\nchanged: [localhost] => {\r\n    \"changed\": true,\r\n    \"description\": \"Created by ansible integration tests\",\r\n    \"group_id\": \"sg-ee50c6a7\",\r\n    \"group_name\": \"ansible-test-macbook-pro-21912085-egress-tests\",\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"aws_access_key\": \"ABIAJT7AJOLXTL7IVL5A\",\r\n            \"aws_secret_key\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n            \"description\": \"Created by ansible integration tests\",\r\n            \"ec2_url\": null,\r\n            \"group_id\": null,\r\n            \"name\": \"ansible-test-macbook-pro-21912085-egress-tests\",\r\n            \"profile\": null,\r\n            \"purge_rules\": true,\r\n            \"purge_rules_egress\": true,\r\n            \"purge_tags\": true,\r\n            \"region\": \"us-east-1\",\r\n            \"rules\": null,\r\n            \"rules_egress\": [],\r\n            \"security_token\": \"\",\r\n            \"state\": \"present\",\r\n            \"tags\": null,\r\n            \"validate_certs\": true,\r\n            \"vpc_id\": \"vpc-beb0f5c5\"\r\n        }\r\n    },\r\n    \"ip_permissions\": [],\r\n    \"ip_permissions_egress\": [\r\n        {\r\n            \"ip_protocol\": \"-1\",\r\n            \"ip_ranges\": [\r\n                {\r\n                    \"cidr_ip\": \"0.0.0.0/0\"\r\n                }\r\n            ],\r\n            \"ipv6_ranges\": [],\r\n            \"prefix_list_ids\": [],\r\n            \"user_id_group_pairs\": []\r\n        }\r\n    ],\r\n    \"owner_id\": \"448830907657\",\r\n    \"tags\": {},\r\n    \"vpc_id\": \"vpc-beb0f5c5\"\r\n}\r\n\r\nTASK [ec2_group_loop : assert default rule is not purged (expected changed=false)] **********************************************************************************************************\r\ntask path: /Users/shertel/Workspace/ansible/test/integration/targets/ec2_group_loop/tasks/egress_tests.yml:78\r\nfatal: [localhost]: FAILED! => {\r\n    \"assertion\": \"result.ip_permissions_egress|length == 0\",\r\n    \"changed\": false,\r\n    \"evaluated_to\": false\r\n}\r\n```",
        "createdAt" : "2018-04-19T16:41:59Z",
        "updatedAt" : "2018-05-18T17:41:10Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "830e149d-74fa-49d3-a39b-e8c3f65e003f",
        "parentId" : "5b8b910b-e822-435b-9af0-8ad836519968",
        "authorId" : "06ab4cf8-4a18-478e-93ee-69929f4bffc6",
        "body" : "Looks like this has stabilized after more patches. ",
        "createdAt" : "2018-05-04T19:17:10Z",
        "updatedAt" : "2018-05-18T17:41:10Z",
        "lastEditedBy" : "06ab4cf8-4a18-478e-93ee-69929f4bffc6",
        "tags" : [
        ]
      }
    ],
    "commit" : "ed659b55388599b3bed12506d19c4626b516d0b8",
    "line" : 67,
    "diffHunk" : "@@ -1,1 +65,69 @@          - result.ip_permissions_egress[0].ip_ranges[0].cidr_ip == '0.0.0.0/0'\n\n    - name: Purge rules, including the default\n      ec2_group:\n        name: '{{ec2_group_name}}-egress-tests'"
  }
]