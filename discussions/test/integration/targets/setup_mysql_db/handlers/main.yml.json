[
  {
    "id" : "95887a3b-86e1-4c36-9033-69cb12ee418d",
    "prId" : 63641,
    "prUrl" : "https://github.com/ansible/ansible/pull/63641#pullrequestreview-305347375",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fab927b6-be58-425f-86fd-8c92273d1bd8",
        "parentId" : null,
        "authorId" : "d2d80496-0795-4618-ba72-36ae6c5b52ef",
        "body" : "@samdoran , it is because the next (8.0) installation finds files after the previous installation in the default data directory and tries to upgrade them and fails\r\n```Status: \\\"Data Dictionary upgrade from MySQL 5.7 in progress```\r\n\r\nplease\r\na. remove from ```test/integration/targets/setup_mysql_db/handlers/main.yml```\r\n```\r\n- name: remove pip packages\r\n  pip:\r\n    name: mysql-python\r\n    state: absent\r\n```\r\nb. and add to there\r\n```\r\n 15 - name: remove mysql datadir\r\n 16   file:\r\n 17     path: \"{{ item }}\"\r\n 18     state: absent\r\n 19   loop:\r\n 20   - /var/lib/mysql\r\n 21   - /usr/mysql\r\n 22   listen: cleanup mysql\r\n```\r\nc. also change the block starting from line 9 in ```test/integration/targets/setup_mysql8/tasks/setup_mysql8.yml```\r\n```\r\n  9 - name: Install MySQL community server\r\n 10   yum:\r\n 11     name: '{{ item }}'\r\n 12   loop:\r\n 13   - '{{ mysql_package_name }}'\r\n 14   - 'MySQL-python'\r\n 15   notify: cleanup mysql8\r\n```\r\nit will work, i checked it by running tests you mentioned in your cloned branch",
        "createdAt" : "2019-10-21T07:12:46Z",
        "updatedAt" : "2019-10-23T14:21:18Z",
        "lastEditedBy" : "d2d80496-0795-4618-ba72-36ae6c5b52ef",
        "tags" : [
        ]
      },
      {
        "id" : "7d03dbd2-bc30-4789-b270-dfc9f849d718",
        "parentId" : "fab927b6-be58-425f-86fd-8c92273d1bd8",
        "authorId" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "body" : "> a. remove from test/integration/targets/setup_mysql_db/handlers/main.yml\r\nThe `pip` removal is needed to cleanup on FreeBSD.\r\n\r\nI added a task to cleanup the data dir. That seems to fix the conflict. ðŸ™Œ ",
        "createdAt" : "2019-10-22T16:34:20Z",
        "updatedAt" : "2019-10-23T14:21:18Z",
        "lastEditedBy" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "tags" : [
        ]
      }
    ],
    "commit" : "aed2a4a7b9f76a9336ce8942509660e6d836bf94",
    "line" : 24,
    "diffHunk" : "@@ -1,1 +22,26 @@- name: remove pip packages\n  pip:\n    name: mysql-python\n    state: absent"
  },
  {
    "id" : "5bd7962f-4e3c-4cad-b3c3-601da90f7f29",
    "prId" : 63641,
    "prUrl" : "https://github.com/ansible/ansible/pull/63641#pullrequestreview-305922387",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0605efa5-ae56-41b8-8938-855772f966e8",
        "parentId" : null,
        "authorId" : "d2d80496-0795-4618-ba72-36ae6c5b52ef",
        "body" : "```suggestion\r\n    state: absent\r\n    listen:  remove pip packages\r\n```",
        "createdAt" : "2019-10-23T10:12:52Z",
        "updatedAt" : "2019-10-23T14:21:18Z",
        "lastEditedBy" : "d2d80496-0795-4618-ba72-36ae6c5b52ef",
        "tags" : [
        ]
      },
      {
        "id" : "e6b0bf72-76f6-4d08-8294-add4ad03d113",
        "parentId" : "0605efa5-ae56-41b8-8938-855772f966e8",
        "authorId" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "body" : "I don't think this needs a `listen` statement since it's called referenced by name directly and we don't need any other handlers trigger for FreeBSD cleanup.",
        "createdAt" : "2019-10-23T14:11:03Z",
        "updatedAt" : "2019-10-23T14:21:18Z",
        "lastEditedBy" : "2f8132dc-12f8-44dc-8b97-1cf4c1616b68",
        "tags" : [
        ]
      }
    ],
    "commit" : "aed2a4a7b9f76a9336ce8942509660e6d836bf94",
    "line" : 25,
    "diffHunk" : "@@ -1,1 +23,27 @@  pip:\n    name: mysql-python\n    state: absent"
  }
]