[
  {
    "id" : "1ef0a631-275f-4491-88b9-eefdc7b0aa0d",
    "prId" : 42171,
    "prUrl" : "https://github.com/ansible/ansible/pull/42171#pullrequestreview-137277769",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0ed9fc3a-77da-4c39-9a6f-27b9cce5e4c8",
        "parentId" : null,
        "authorId" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "body" : "Ah, I think you had the extra ```or``` in the code to handle this test setting output_encoding=\"\".  Instead of changing the code like that, use this construct in the test's playbook:\r\n```\r\n- name: Generate the encoding_1252_* files from templates using various encoding combinations\r\n  template:\r\n    src: 'encoding_1252.j2'\r\n    dest: '{{ output_dir }}/encoding_1252_{{ item }}.txt'\r\n    output_encoding: '{{ item | default(omit, true) }}'\r\n```",
        "createdAt" : "2018-07-12T15:03:58Z",
        "updatedAt" : "2018-07-16T06:22:23Z",
        "lastEditedBy" : "838eb58c-0fa8-4742-994f-a407c7183e57",
        "tags" : [
        ]
      },
      {
        "id" : "4452533a-4795-43a0-bc0f-722c7d576ed7",
        "parentId" : "0ed9fc3a-77da-4c39-9a6f-27b9cce5e4c8",
        "authorId" : "d1acb4be-4191-4279-bcce-d91f60a967bf",
        "body" : "Actually, the extra or in template.py is to handle all potential cases: even if the output_encoding is sent as None or empty string from a template, I would like the internal to be an explicit 'utf-8'. This way, we keep to the pythonic way of 'explicit is better than implicit', and avoid side-effects with the rest of the code (we don't rely on other parts of the code using utf-8 as the default encoding).\r\n\r\nOf course, this is my reasoning, but you have the final word.\r\nLet me know if you still want me to remove the 'or' construction.",
        "createdAt" : "2018-07-15T20:42:58Z",
        "updatedAt" : "2018-07-16T06:22:23Z",
        "lastEditedBy" : "d1acb4be-4191-4279-bcce-d91f60a967bf",
        "tags" : [
        ]
      }
    ],
    "commit" : "71d43eea8bef0d73ed7b822d873d3cd41831fe85",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +635,639 @@    src: 'encoding_1252.j2'\n    dest: '{{ output_dir }}/encoding_1252_{{ item }}.txt'\n    output_encoding: '{{ item }}'\n  loop: '{{ template_encoding_1252_encodings }}'\n"
  }
]