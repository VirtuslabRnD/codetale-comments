[
  {
    "id" : "461bf651-725f-46eb-8f04-b8778714afc9",
    "prId" : 31284,
    "prUrl" : "https://github.com/ansible/ansible/pull/31284#pullrequestreview-89239894",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1352cc30-baa0-40d5-af19-a584dba8423c",
        "parentId" : null,
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "Having tests for this is wonderful, thanks for adding this. Fails here with\r\n```\r\nThe full traceback is:\r\nTraceback (most recent call last):\r\n  File \"/tmp/ansible_nk_UzU/ansible_module_cloudfront_distribution.py\", line 1179, in create_distribution\r\n    return client.create_distribution_with_tags(DistributionConfigWithTags=distribution_config_with_tags)['Distribution']\r\n  File \"/Users/shertel/Workspace/ansible/venv/python2.7/lib/python2.7/site-packages/botocore/client.py\", line 312, in _api_call\r\n    return self._make_api_call(operation_name, kwargs)\r\n  File \"/Users/shertel/Workspace/ansible/venv/python2.7/lib/python2.7/site-packages/botocore/client.py\", line 605, in _make_api_call\r\n    raise error_class(parsed_response, operation_name)\r\nInvalidArgument: An error occurred (InvalidArgument) when calling the CreateDistributionWithTags operation: The parameter CNAME contains one or more parameters that are not valid.\r\n\r\nfatal: [localhost]: FAILED! => {\r\n    \"changed\": false,\r\n    \"error\": {\r\n        \"code\": \"InvalidArgument\",\r\n        \"message\": \"The parameter CNAME contains one or more parameters that are not valid.\",\r\n        \"type\": \"Sender\"\r\n    },\r\n    \"invocation\": {\r\n        \"module_args\": {\r\n            \"alias\": \"ansible-test-shertel-OSX-2-2369800001.github.io\",\r\n            \"aliases\": [\r\n                \"ansible-test-shertel-OSX-2-2369800001.github.io\"\r\n            ],\r\n            \"aws_access_key\": \"ASIAJ5DRFDZSUCUBOJAA\",\r\n            \"aws_secret_key\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n            \"cache_behaviors\": null,\r\n            \"caller_reference\": null,\r\n            \"comment\": null,\r\n            \"custom_error_responses\": null,\r\n            \"default_cache_behavior\": {\r\n                \"compress\": false,\r\n                \"default_t_t_l\": 86400,\r\n                \"forwarded_values\": {\r\n                    \"cookies\": {\r\n                        \"forward\": \"none\"\r\n                    },\r\n                    \"headers\": {\r\n                        \"quantity\": 0\r\n                    },\r\n                    \"query_string\": true,\r\n                    \"query_string_cache_keys\": {\r\n                        \"quantity\": 0\r\n                    }\r\n                },\r\n                \"lambda_function_associations\": {\r\n                    \"quantity\": 0\r\n                },\r\n                \"max_t_t_l\": 31536000,\r\n                \"min_t_t_l\": 0,\r\n                \"smooth_streaming\": false,\r\n                \"target_origin_id\": \"ansible-test-shertel-OSX-2-2369800001-origin.example.com\",\r\n                \"trusted_signers\": {\r\n                    \"enabled\": false,\r\n                    \"quantity\": 0\r\n                },\r\n                \"viewer_protocol_policy\": \"allow-all\"\r\n            },\r\n            \"default_origin_domain_name\": null,\r\n            \"default_origin_path\": null,\r\n            \"default_root_object\": null,\r\n            \"distribution_id\": null,\r\n            \"e_tag\": null,\r\n            \"ec2_url\": null,\r\n            \"enabled\": null,\r\n            \"http_version\": null,\r\n            \"ipv6_enabled\": null,\r\n            \"logging\": null,\r\n            \"origins\": [\r\n                {\r\n                    \"custom_headers\": {\r\n                        \"quantity\": 0\r\n                    },\r\n                    \"custom_origin_config\": {\r\n                        \"h_t_t_p_port\": 80,\r\n                        \"h_t_t_p_s_port\": 443,\r\n                        \"origin_keepalive_timeout\": 5,\r\n                        \"origin_protocol_policy\": \"match-viewer\",\r\n                        \"origin_read_timeout\": 30,\r\n                        \"origin_ssl_protocols\": {\r\n                            \"items\": [\r\n                                \"TLSv1\",\r\n                                \"TLSv1.1\",\r\n                                \"TLSv1.2\"\r\n                            ],\r\n                            \"quantity\": 3\r\n                        }\r\n                    },\r\n                    \"domain_name\": \"ansible-test-shertel-OSX-2-2369800001-origin.example.com\",\r\n                    \"id\": \"ansible-test-shertel-OSX-2-2369800001-origin.example.com\",\r\n                    \"origin_path\": \"\"\r\n                }\r\n            ],\r\n            \"price_class\": null,\r\n            \"profile\": null,\r\n            \"purge_aliases\": false,\r\n            \"purge_cache_behaviors\": false,\r\n            \"purge_custom_error_responses\": false,\r\n            \"purge_origins\": true,\r\n            \"purge_tags\": false,\r\n            \"region\": null,\r\n            \"restrictions\": null,\r\n            \"security_token\": \"VALUE_SPECIFIED_IN_NO_LOG_PARAMETER\",\r\n            \"state\": \"present\",\r\n            \"tags\": {},\r\n            \"validate_certs\": true,\r\n            \"viewer_certificate\": null,\r\n            \"wait\": false,\r\n            \"wait_timeout\": 1800,\r\n            \"web_acl_id\": null\r\n        }\r\n    },\r\n    \"msg\": \"Error creating distribution: An error occurred (InvalidArgument) when calling the CreateDistributionWithTags operation: The parameter CNAME contains one or more parameters that are not valid.\",\r\n    \"response_metadata\": {\r\n        \"http_headers\": {\r\n            \"connection\": \"close\",\r\n            \"content-length\": \"320\",\r\n            \"content-type\": \"text/xml\",\r\n            \"date\": \"Tue, 21 Nov 2017 15:58:21 GMT\",\r\n            \"x-amzn-requestid\": \"cc4238b2-ced4-11e7-aecc-a983e62f2c9e\"\r\n        },\r\n        \"http_status_code\": 400,\r\n        \"request_id\": \"cc4238b2-ced4-11e7-aecc-a983e62f2c9e\",\r\n        \"retry_attempts\": 0\r\n    }\r\n}\r\n```",
        "createdAt" : "2017-11-21T15:52:21Z",
        "updatedAt" : "2018-01-16T21:16:48Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "5aec744e-ccf0-423f-ae1a-a00a5a01489a",
        "parentId" : "1352cc30-baa0-40d5-af19-a584dba8423c",
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "Fixed this by lowercasing the cloudfront_hostname and resource_prefix since there may be uppercase letters which are not allowed.",
        "createdAt" : "2018-01-16T19:49:05Z",
        "updatedAt" : "2018-01-16T21:16:48Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      },
      {
        "id" : "a5465a17-1ce2-48df-8e38-8af92d98b387",
        "parentId" : "1352cc30-baa0-40d5-af19-a584dba8423c",
        "authorId" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "body" : "Tests pass locally, though they take forever.",
        "createdAt" : "2018-01-16T20:37:27Z",
        "updatedAt" : "2018-01-16T21:16:48Z",
        "lastEditedBy" : "6b7e4265-ae86-4269-9bd7-f8ffa9085df6",
        "tags" : [
        ]
      }
    ],
    "commit" : "761a5e6eecd266eb0014ff975bfcbec2064c0b20",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +12,16 @@    no_log: yes\n\n  - name: create cloudfront distribution using defaults\n    cloudfront_distribution:\n      alias: \"{{ cloudfront_alias }}\""
  }
]