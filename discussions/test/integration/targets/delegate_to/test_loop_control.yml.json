[
  {
    "id" : "cb8cc0b1-5974-4575-a92d-fbb9ecdcbf38",
    "prId" : 33809,
    "prUrl" : "https://github.com/ansible/ansible/pull/33809#pullrequestreview-84510149",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a8e17fb5-b090-487a-a04f-2b76898182d3",
        "parentId" : null,
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "this would be incorrect as the label is not 'item' but the value of `{{item}}`",
        "createdAt" : "2017-12-18T21:29:46Z",
        "updatedAt" : "2018-01-11T22:05:36Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "d1562f58-4ad9-40c5-ada7-47f83d53f941",
        "parentId" : "a8e17fb5-b090-487a-a04f-2b76898182d3",
        "authorId" : "94ae5814-8889-4328-9b58-745772997928",
        "body" : "I am not sure I follow. The value of `{{ item }}` is `localhost` which is the host we're delegating to. The `item_var` is `item` and not `None` which is what this PR fixes. Am I missing something?",
        "createdAt" : "2017-12-18T22:07:01Z",
        "updatedAt" : "2018-01-11T22:05:36Z",
        "lastEditedBy" : "94ae5814-8889-4328-9b58-745772997928",
        "tags" : [
        ]
      },
      {
        "id" : "fea7542a-8d94-4b19-b5de-77946c290913",
        "parentId" : "a8e17fb5-b090-487a-a04f-2b76898182d3",
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "'{{ item }}' should have no value unless it is the loop var, which you  'are changing' to 'localhost'",
        "createdAt" : "2017-12-18T22:18:34Z",
        "updatedAt" : "2018-01-11T22:05:36Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "88a4045e-e9d3-4d4f-9126-704f87984495",
        "parentId" : "a8e17fb5-b090-487a-a04f-2b76898182d3",
        "authorId" : "94ae5814-8889-4328-9b58-745772997928",
        "body" : "I think I got confused, can you elaborate a bit more please? I was taking inspiration from the usage of `label` from http://docs.ansible.com/ansible/latest/playbooks_loops.html#loop-control, how do I use it differently?",
        "createdAt" : "2017-12-19T11:04:44Z",
        "updatedAt" : "2018-01-11T22:05:36Z",
        "lastEditedBy" : "94ae5814-8889-4328-9b58-745772997928",
        "tags" : [
        ]
      },
      {
        "id" : "48ed1ef6-9c1a-40d0-a744-67c95644d578",
        "parentId" : "a8e17fb5-b090-487a-a04f-2b76898182d3",
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "that uses it to resolve to the \"item's name\" in this case you are using it to resolve to the item itself and then try to use `item` again. And that is for label, not loop_var, only example there with loop_var uses `outer-item` not a templated reference of `item`.\r\n\r\nsooo, `loop_var: \"{{item}}\"'` makes the loop var a var named `localhost` but you still try to use a var named `item` to delegate to.",
        "createdAt" : "2017-12-19T15:10:35Z",
        "updatedAt" : "2018-01-11T22:05:36Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "22d57912-31cd-43af-a15a-908fc78836f5",
        "parentId" : "a8e17fb5-b090-487a-a04f-2b76898182d3",
        "authorId" : "94ae5814-8889-4328-9b58-745772997928",
        "body" : "okay, agreed, but I am using `label` and not `loop_var`, so I need to use `\"{{ item }}\"` so the label is templated and displayed as `localhost` (and whatever other values are in `with_items`). If I were to use `loop_var`, it would be just the var name, so `item`.\r\n\r\nThe usage of `label` is redundant, but it triggers the bug so. Any ideas on how to write the test better? Thanks!",
        "createdAt" : "2017-12-19T16:34:26Z",
        "updatedAt" : "2018-01-11T22:05:36Z",
        "lastEditedBy" : "94ae5814-8889-4328-9b58-745772997928",
        "tags" : [
        ]
      }
    ],
    "commit" : "30ef91c0d70666e1ead288783741d5f51fa40466",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +4,8 @@    - name: Test delegate_to with loop_control\n      ping:\n      delegate_to: \"{{ item }}\"\n      with_items:\n        - localhost"
  },
  {
    "id" : "6f37b3f2-2fa6-4a52-9059-ed46d526b1b1",
    "prId" : 33809,
    "prUrl" : "https://github.com/ansible/ansible/pull/33809#pullrequestreview-84360473",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "044ebfd1-8b47-45d7-9946-ea9afb4280ce",
        "parentId" : null,
        "authorId" : "aab62dc6-bfab-4709-b4e6-336cd4c0bc5f",
        "body" : "Just wondering, this test doesn't specifically address the bug in #33981 \r\nIs that okay?",
        "createdAt" : "2017-12-19T02:57:03Z",
        "updatedAt" : "2018-01-11T22:05:36Z",
        "lastEditedBy" : "aab62dc6-bfab-4709-b4e6-336cd4c0bc5f",
        "tags" : [
        ]
      },
      {
        "id" : "c77d8d6f-c4c6-4288-9191-ea6d0a851eed",
        "parentId" : "044ebfd1-8b47-45d7-9946-ea9afb4280ce",
        "authorId" : "94ae5814-8889-4328-9b58-745772997928",
        "body" : "Yeah, the root cause is the same. Thanks for verifying the fix!",
        "createdAt" : "2017-12-19T07:27:20Z",
        "updatedAt" : "2018-01-11T22:05:36Z",
        "lastEditedBy" : "94ae5814-8889-4328-9b58-745772997928",
        "tags" : [
        ]
      }
    ],
    "commit" : "30ef91c0d70666e1ead288783741d5f51fa40466",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +4,8 @@    - name: Test delegate_to with loop_control\n      ping:\n      delegate_to: \"{{ item }}\"\n      with_items:\n        - localhost"
  }
]