[
  {
    "id" : "ac749bb4-6108-483f-902a-a2507c42c37c",
    "prId" : 27935,
    "prUrl" : "https://github.com/ansible/ansible/pull/27935#pullrequestreview-55635588",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "54901ac5-7d31-4b64-b579-ee285fa405d2",
        "parentId" : null,
        "authorId" : "fc84e3a8-7a8a-45ea-ba68-7e6e0b604075",
        "body" : "This is failing on rerun (or on nxapi on the first run) because the address is already configured  to 20.20.20.20/24. Maybe configure it to something else first? Or is `Put interface {{testint1}} into default state` supposed to do something for that?",
        "createdAt" : "2017-08-09T20:08:52Z",
        "updatedAt" : "2017-08-11T19:06:09Z",
        "lastEditedBy" : "fc84e3a8-7a8a-45ea-ba68-7e6e0b604075",
        "tags" : [
        ]
      },
      {
        "id" : "42f0692a-4c7f-4ed2-80bd-ed7d4c60ffe0",
        "parentId" : "54901ac5-7d31-4b64-b579-ee285fa405d2",
        "authorId" : "8b097f02-b5f6-4772-bc37-19d07a2e4a52",
        "body" : "@Qalthos ... the tests are fine. It's the platform.\r\n\r\nHere are the results on the n9k vms and hardware:\r\n\r\nroot@agent-lab15-pm:~/agents-ci/ansible/test/integration# ansible-playbook -i ~/hosts nxos.yaml\r\n[DEPRECATION WARNING]: The use of 'include' for tasks has been deprecated. Use 'import_tasks' for static \r\ninclusions or 'include_tasks' for dynamic inclusions.\r\nThis feature will be removed in a future release. \r\nDeprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.\r\n\r\nPLAY [nxos] ****************************************************************************************************\r\n\r\nTASK [prepare_nxos_tests : Toggle feature nxapi - Disable] *****************************************************\r\nok: [evergreen-nx-xxx.example.com]\r\nok: [dplus-nx-xxx.example.com]\r\nok: [greensboro-nx-xxx.example.com]\r\nok: [freeport-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\n\r\nTASK [prepare_nxos_tests : pause] ******************************************************************************\r\nPausing for 3 seconds\r\n(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)\r\nok: [dplus-nx-xxx.example.com]\r\n\r\nTASK [prepare_nxos_tests : Toggle feature nxapi - Enable] ******************************************************\r\nchanged: [greensboro-nx-xxx.example.com]\r\nchanged: [dplus-nx-xxx.example.com]\r\nchanged: [evergreen-nx-xxx.example.com]\r\nchanged: [freeport-nx-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\n\r\nTASK [prepare_nxos_tests : pause] ******************************************************************************\r\nPausing for 3 seconds\r\n(ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)\r\nok: [dplus-nx-xxx.example.com]\r\n\r\nTASK [prepare_nxos_tests : Collect interface list] *************************************************************\r\n [WARNING]: argument timeout has been deprecated and will be removed in a future version\r\n\r\nok: [dplus-nx-xxx.example.com]\r\nok: [greensboro-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\nok: [freeport-nx-xxx.example.com]\r\nok: [evergreen-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\n\r\nTASK [prepare_nxos_tests : set_fact] ***************************************************************************\r\nok: [dplus-nx-xxx.example.com]\r\nok: [freeport-nx-xxx.example.com]\r\nok: [evergreen-nx-xxx.example.com]\r\nok: [greensboro-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\n\r\nTASK [prepare_nxos_tests : set_fact] ***************************************************************************\r\nok: [dplus-nx-xxx.example.com]\r\nok: [evergreen-nx-xxx.example.com]\r\nok: [freeport-nx-xxx.example.com]\r\nok: [greensboro-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\n\r\nTASK [prepare_nxos_tests : set_fact] ***************************************************************************\r\nok: [dplus-nx-xxx.example.com]\r\nok: [freeport-nx-xxx.example.com]\r\nok: [evergreen-nx-xxx.example.com]\r\nok: [greensboro-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\n\r\nTASK [prepare_nxos_tests : set_fact] ***************************************************************************\r\nok: [dplus-nx-xxx.example.com]\r\nok: [evergreen-nx-xxx.example.com]\r\nok: [greensboro-nx-xxx.example.com]\r\nok: [freeport-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\n\r\nTASK [prepare_nxos_tests : Gather platform info] ***************************************************************\r\nok: [freeport-nx-xxx.example.com]\r\nok: [dplus-nx-xxx.example.com]\r\nok: [evergreen-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\nok: [greensboro-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\n\r\nTASK [prepare_nxos_tests : set_fact] ***************************************************************************\r\nok: [freeport-nx-xxx.example.com]\r\nok: [evergreen-nx-xxx.example.com]\r\nok: [dplus-nx-xxx.example.com]\r\nok: [greensboro-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\n\r\nTASK [prepare_nxos_tests : set_fact] ***************************************************************************\r\nok: [dplus-nx-xxx.example.com]\r\nok: [evergreen-nx-xxx.example.com]\r\nok: [freeport-nx-xxx.example.com]\r\nok: [greensboro-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\n\r\nTASK [prepare_nxos_tests : set_fact] ***************************************************************************\r\nskipping: [dplus-nx-xxx.example.com]\r\nskipping: [freeport-nx-xxx.example.com]\r\nskipping: [evergreen-nx-xxx.example.com]\r\nskipping: [greensboro-nx-xxx.example.com]\r\nskipping: [n9k-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\n\r\nTASK [prepare_nxos_tests : set_fact] ***************************************************************************\r\nskipping: [evergreen-nx-xxx.example.com]\r\nskipping: [dplus-nx-xxx.example.com]\r\nskipping: [greensboro-nx-xxx.example.com]\r\nskipping: [freeport-nx-xxx.example.com]\r\nskipping: [n9k-xxx.example.com]\r\nskipping: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : collect all cli test cases] **********************************************************\r\nok: [freeport-nx-xxx.example.com]\r\nok: [evergreen-nx-xxx.example.com]\r\nok: [greensboro-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\nok: [dplus-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : set test_items] **********************************************************************\r\nok: [dplus-nx-xxx.example.com]\r\nok: [greensboro-nx-xxx.example.com]\r\nok: [freeport-nx-xxx.example.com]\r\nok: [evergreen-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : run test case] ***********************************************************************\r\nincluded: /root/agents-ci/ansible/test/integration/targets/nxos_ip_interface/tests/cli/sanity.yaml for dplus-nx-xxx.example.com, freeport-nx-xxx.example.com, evergreen-nx-xxx.example.com, greensboro-nx-xxx.example.com, n9k-xxx.example.com, n9k-xxx.example.com\r\n\r\nTASK [nxos_ip_interface : debug] *******************************************************************************\r\nok: [evergreen-nx-xxx.example.com] => {\r\n    \"msg\": \"START TRANSPORT:CLI nxos_ip_interface sanity test\"\r\n}\r\nok: [freeport-nx-xxx.example.com] => {\r\n    \"msg\": \"START TRANSPORT:CLI nxos_ip_interface sanity test\"\r\n}\r\nok: [greensboro-nx-xxx.example.com] => {\r\n    \"msg\": \"START TRANSPORT:CLI nxos_ip_interface sanity test\"\r\n}\r\nok: [dplus-nx-xxx.example.com] => {\r\n    \"msg\": \"START TRANSPORT:CLI nxos_ip_interface sanity test\"\r\n}\r\nok: [n9k-xxx.example.com] => {\r\n    \"msg\": \"START TRANSPORT:CLI nxos_ip_interface sanity test\"\r\n}\r\nok: [n9k-xxx.example.com] => {\r\n    \"msg\": \"START TRANSPORT:CLI nxos_ip_interface sanity test\"\r\n}\r\n\r\nTASK [nxos_ip_interface : set_fact] ****************************************************************************\r\nok: [dplus-nx-xxx.example.com]\r\nok: [freeport-nx-xxx.example.com]\r\nok: [greensboro-nx-xxx.example.com]\r\nok: [evergreen-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : set_fact] ****************************************************************************\r\nok: [dplus-nx-xxx.example.com]\r\nok: [freeport-nx-xxx.example.com]\r\nok: [evergreen-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\nok: [greensboro-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : Put interface Ethernet1/1 into default state] ****************************************\r\nchanged: [greensboro-nx-xxx.example.com]\r\nchanged: [dplus-nx-xxx.example.com]\r\nchanged: [freeport-nx-xxx.example.com]\r\nchanged: [evergreen-nx-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : Put interface Ethernet1/2 into default state] ****************************************\r\nchanged: [dplus-nx-xxx.example.com]\r\nchanged: [greensboro-nx-xxx.example.com]\r\nchanged: [evergreen-nx-xxx.example.com]\r\nchanged: [freeport-nx-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : Make Ethernet1/1 a layer3 interface] *************************************************\r\nchanged: [n9k-xxx.example.com]\r\nchanged: [dplus-nx-xxx.example.com]\r\nchanged: [evergreen-nx-xxx.example.com]\r\nchanged: [freeport-nx-xxx.example.com]\r\nchanged: [greensboro-nx-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : Make Ethernet1/2 a layer3 interface] *************************************************\r\nchanged: [dplus-nx-xxx.example.com]\r\nchanged: [evergreen-nx-xxx.example.com]\r\nchanged: [greensboro-nx-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\nchanged: [freeport-nx-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : Ensure ipv4 address is configured] ***************************************************\r\nchanged: [dplus-nx-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\nchanged: [freeport-nx-xxx.example.com]\r\nchanged: [greensboro-nx-xxx.example.com]\r\nchanged: [evergreen-nx-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : assert] ******************************************************************************\r\nok: [evergreen-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [dplus-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [n9k-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [freeport-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [n9k-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [greensboro-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\n\r\nTASK [nxos_ip_interface : Check Idempotence] *******************************************************************\r\nok: [n9k-xxx.example.com]\r\nok: [evergreen-nx-xxx.example.com]\r\nok: [greensboro-nx-xxx.example.com]\r\nok: [freeport-nx-xxx.example.com]\r\nok: [dplus-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : assert] ******************************************************************************\r\nok: [dplus-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [greensboro-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [freeport-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [evergreen-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [n9k-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [n9k-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\n\r\nTASK [nxos_ip_interface : Ensure ipv6 address is configured] ***************************************************\r\nchanged: [dplus-nx-xxx.example.com]\r\nchanged: [evergreen-nx-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\nchanged: [greensboro-nx-xxx.example.com]\r\nchanged: [freeport-nx-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : assert] ******************************************************************************\r\nok: [dplus-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [evergreen-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [freeport-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [greensboro-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [n9k-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [n9k-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\n\r\nTASK [nxos_ip_interface : Check Idempotence] *******************************************************************\r\nok: [dplus-nx-xxx.example.com]\r\nok: [greensboro-nx-xxx.example.com]\r\nok: [freeport-nx-xxx.example.com]\r\nok: [evergreen-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : assert] ******************************************************************************\r\nok: [dplus-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [evergreen-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [freeport-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [greensboro-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [n9k-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [n9k-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\n\r\nTASK [nxos_ip_interface : debug] *******************************************************************************\r\nok: [evergreen-nx-xxx.example.com] => {\r\n    \"msg\": \"END TRANSPORT:CLI nxos_ip_interface sanity test\"\r\n}\r\nok: [dplus-nx-xxx.example.com] => {\r\n    \"msg\": \"END TRANSPORT:CLI nxos_ip_interface sanity test\"\r\n}\r\nok: [freeport-nx-xxx.example.com] => {\r\n    \"msg\": \"END TRANSPORT:CLI nxos_ip_interface sanity test\"\r\n}\r\nok: [greensboro-nx-xxx.example.com] => {\r\n    \"msg\": \"END TRANSPORT:CLI nxos_ip_interface sanity test\"\r\n}\r\nok: [n9k-xxx.example.com] => {\r\n    \"msg\": \"END TRANSPORT:CLI nxos_ip_interface sanity test\"\r\n}\r\nok: [n9k-xxx.example.com] => {\r\n    \"msg\": \"END TRANSPORT:CLI nxos_ip_interface sanity test\"\r\n}\r\n\r\nTASK [nxos_ip_interface : collect all nxapi test cases] ********************************************************\r\nok: [greensboro-nx-xxx.example.com]\r\nok: [dplus-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\nok: [evergreen-nx-xxx.example.com]\r\nok: [freeport-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : set test_items] **********************************************************************\r\nok: [dplus-nx-xxx.example.com]\r\nok: [evergreen-nx-xxx.example.com]\r\nok: [freeport-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\nok: [greensboro-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : enable nxapi] ************************************************************************\r\nok: [evergreen-nx-xxx.example.com]\r\nok: [greensboro-nx-xxx.example.com]\r\nok: [dplus-nx-xxx.example.com]\r\nok: [freeport-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : run test case] ***********************************************************************\r\nincluded: /root/agents-ci/ansible/test/integration/targets/nxos_ip_interface/tests/nxapi/sanity.yaml for dplus-nx-xxx.example.com, evergreen-nx-xxx.example.com, greensboro-nx-xxx.example.com, freeport-nx-xxx.example.com, n9k-xxx.example.com, n9k-xxx.example.com\r\n\r\nTASK [nxos_ip_interface : debug] *******************************************************************************\r\nok: [dplus-nx-xxx.example.com] => {\r\n    \"msg\": \"START TRANSPORT:NXAPI nxos_ip_interface sanity test\"\r\n}\r\nok: [evergreen-nx-xxx.example.com] => {\r\n    \"msg\": \"START TRANSPORT:NXAPI nxos_ip_interface sanity test\"\r\n}\r\nok: [freeport-nx-xxx.example.com] => {\r\n    \"msg\": \"START TRANSPORT:NXAPI nxos_ip_interface sanity test\"\r\n}\r\nok: [greensboro-nx-xxx.example.com] => {\r\n    \"msg\": \"START TRANSPORT:NXAPI nxos_ip_interface sanity test\"\r\n}\r\nok: [n9k-xxx.example.com] => {\r\n    \"msg\": \"START TRANSPORT:NXAPI nxos_ip_interface sanity test\"\r\n}\r\nok: [n9k-xxx.example.com] => {\r\n    \"msg\": \"START TRANSPORT:NXAPI nxos_ip_interface sanity test\"\r\n}\r\n\r\nTASK [nxos_ip_interface : set_fact] ****************************************************************************\r\nok: [dplus-nx-xxx.example.com]\r\nok: [freeport-nx-xxx.example.com]\r\nok: [evergreen-nx-xxx.example.com]\r\nok: [greensboro-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : set_fact] ****************************************************************************\r\nok: [dplus-nx-xxx.example.com]\r\nok: [evergreen-nx-xxx.example.com]\r\nok: [freeport-nx-xxx.example.com]\r\nok: [greensboro-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : Put interface Ethernet1/1 into default state] ****************************************\r\nchanged: [dplus-nx-xxx.example.com]\r\nchanged: [greensboro-nx-xxx.example.com]\r\nchanged: [freeport-nx-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\nchanged: [evergreen-nx-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : Put interface Ethernet1/2 into default state] ****************************************\r\nchanged: [greensboro-nx-xxx.example.com]\r\nchanged: [dplus-nx-xxx.example.com]\r\nchanged: [freeport-nx-xxx.example.com]\r\nchanged: [evergreen-nx-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : Make Ethernet1/1 a layer3 interface] *************************************************\r\nchanged: [greensboro-nx-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\nchanged: [dplus-nx-xxx.example.com]\r\nchanged: [freeport-nx-xxx.example.com]\r\nchanged: [evergreen-nx-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : Make Ethernet1/2 a layer3 interface] *************************************************\r\nchanged: [greensboro-nx-xxx.example.com]\r\nchanged: [dplus-nx-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\nchanged: [freeport-nx-xxx.example.com]\r\nchanged: [evergreen-nx-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : Ensure ipv4 address is configured] ***************************************************\r\nchanged: [greensboro-nx-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\nchanged: [evergreen-nx-xxx.example.com]\r\nchanged: [dplus-nx-xxx.example.com]\r\nchanged: [freeport-nx-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : assert] ******************************************************************************\r\nok: [dplus-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [freeport-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [greensboro-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [evergreen-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [n9k-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [n9k-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\n\r\nTASK [nxos_ip_interface : Check Idempotence] *******************************************************************\r\nok: [greensboro-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\nok: [dplus-nx-xxx.example.com]\r\nok: [evergreen-nx-xxx.example.com]\r\nok: [freeport-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : assert] ******************************************************************************\r\nok: [dplus-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [evergreen-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [greensboro-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [freeport-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [n9k-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [n9k-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\n\r\nTASK [nxos_ip_interface : Ensure ipv6 address is configured] ***************************************************\r\nchanged: [greensboro-nx-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\nchanged: [evergreen-nx-xxx.example.com]\r\nchanged: [freeport-nx-xxx.example.com]\r\nchanged: [dplus-nx-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : assert] ******************************************************************************\r\nok: [evergreen-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [dplus-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [freeport-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [greensboro-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [n9k-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [n9k-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\n\r\nTASK [nxos_ip_interface : Check Idempotence] *******************************************************************\r\nok: [greensboro-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\nok: [freeport-nx-xxx.example.com]\r\nok: [dplus-nx-xxx.example.com]\r\nok: [evergreen-nx-xxx.example.com]\r\nok: [n9k-xxx.example.com]\r\n\r\nTASK [nxos_ip_interface : assert] ******************************************************************************\r\nok: [dplus-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [greensboro-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [freeport-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [evergreen-nx-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [n9k-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\nok: [n9k-xxx.example.com] => {\r\n    \"changed\": false, \r\n    \"failed\": false, \r\n    \"msg\": \"All assertions passed\"\r\n}\r\n\r\nTASK [nxos_ip_interface : debug] *******************************************************************************\r\nok: [dplus-nx-xxx.example.com] => {\r\n    \"msg\": \"END TRANSPORT:NXAPI nxos_ip_interface sanity test\"\r\n}\r\nok: [freeport-nx-xxx.example.com] => {\r\n    \"msg\": \"END TRANSPORT:NXAPI nxos_ip_interface sanity test\"\r\n}\r\nok: [evergreen-nx-xxx.example.com] => {\r\n    \"msg\": \"END TRANSPORT:NXAPI nxos_ip_interface sanity test\"\r\n}\r\nok: [greensboro-nx-xxx.example.com] => {\r\n    \"msg\": \"END TRANSPORT:NXAPI nxos_ip_interface sanity test\"\r\n}\r\nok: [n9k-xxx.example.com] => {\r\n    \"msg\": \"END TRANSPORT:NXAPI nxos_ip_interface sanity test\"\r\n}\r\nok: [n9k-xxx.example.com] => {\r\n    \"msg\": \"END TRANSPORT:NXAPI nxos_ip_interface sanity test\"\r\n}\r\n\r\nTASK [nxos_ip_interface : disable nxapi] ***********************************************************************\r\nchanged: [dplus-nx-xxx.example.com]\r\nchanged: [evergreen-nx-xxx.example.com]\r\nchanged: [freeport-nx-xxx.example.com]\r\nchanged: [greensboro-nx-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\nchanged: [n9k-xxx.example.com]\r\n\r\nPLAY RECAP *****************************************************************************************************\r\ndplus-nx-xxx.example.com       : ok=52   changed=14   unreachable=0    failed=0   \r\nevergreen-nx-xxx.example.com   : ok=50   changed=14   unreachable=0    failed=0   \r\nfreeport-nx-xxx.example.com    : ok=50   changed=14   unreachable=0    failed=0   \r\ngreensboro-nx-xxx.example.com  : ok=50   changed=14   unreachable=0    failed=0   \r\nn9k-xxx.example.com          : ok=50   changed=14   unreachable=0    failed=0   \r\nn9k-xxx.example.com          : ok=51   changed=14   unreachable=0    failed=0   \r\n\r\nroot@agent-lab15-pm:~/agents-ci/ansible/test/integration#",
        "createdAt" : "2017-08-10T06:28:22Z",
        "updatedAt" : "2018-06-07T17:30:31Z",
        "lastEditedBy" : "8b097f02-b5f6-4772-bc37-19d07a2e4a52",
        "tags" : [
        ]
      },
      {
        "id" : "f9f09156-1d7a-49de-94e3-aded1dd18383",
        "parentId" : "54901ac5-7d31-4b64-b579-ee285fa405d2",
        "authorId" : "fc84e3a8-7a8a-45ea-ba68-7e6e0b604075",
        "body" : "Right, I get that. I'm not expecting you to give me tests in a PR that are broken on your systems. What I am saying is that these are broken on our test platform, which is the only thing we have to test against, and which, even when we do get the 9k VM running, will still be used as a test image because (as far as I understand) there is literally nothing else for us to test with, and having the 7k gives us better coverage than not.\r\n\r\nI don't think I'm being unreasonable when I ask that the tests that we get pass on the platforms we can test on. I understand that this means the tests might have some odd workarounds in, (as long as it does not negatively impact the tests' performance on real hardware, of course). What I do not want is a situation where we look at all our tests, and nxos is failing, and the default response is \"Oh, that's alright, nxos is _always_ failing\" and then we end up in this whole mess again.\r\n\r\nWith that out of the way, all I am looking for is:\r\n* a setup task that sets the address to something other than 20.20.20.20 so that there is actually a change to detect\r\n* some handling of ipv6 not trying to delete itself before it exists with tag `0` in the module. That probably means introspecting `existing` around line 396 to see if delta is in there. That's how I brute-forced my way out of it, but that may not be the best way.",
        "createdAt" : "2017-08-10T15:46:13Z",
        "updatedAt" : "2017-08-11T19:06:09Z",
        "lastEditedBy" : "fc84e3a8-7a8a-45ea-ba68-7e6e0b604075",
        "tags" : [
        ]
      },
      {
        "id" : "f435998b-a993-40f1-a4b3-a71befa57fe9",
        "parentId" : "54901ac5-7d31-4b64-b579-ee285fa405d2",
        "authorId" : "8b097f02-b5f6-4772-bc37-19d07a2e4a52",
        "body" : "@Qalthos ... I would strongly discourage the use of titanium for further continued testing. It is not a platform we will support. Frankly, there are a lot of issues with the ansible modules right now and I'd rather put my time and attention to fixing those issues. Having said that, you are more than welcome to calibrate the tests for titanium.\r\n\r\nRegarding the improvements you are looking for:-\r\n- both interfaces are put into the default state prior to bring up. This clears any state on the interface including the ip address. This works on all hardware platforms and n9k virtual platforms.\r\n- I'm not sure I understand. That scenario would be taken care of just by idempotence right ?\r\nIn general these are basic IT we have added to just get bare minimal coverage. We have not reached the point where we are doing in depth testing. At some point in the future the tests will be enhanced. ",
        "createdAt" : "2017-08-10T19:11:29Z",
        "updatedAt" : "2017-08-11T19:06:09Z",
        "lastEditedBy" : "8b097f02-b5f6-4772-bc37-19d07a2e4a52",
        "tags" : [
        ]
      }
    ],
    "commit" : "02833d5b492792601251bf06c74e7bf9fc07576b",
    "line" : 71,
    "diffHunk" : "@@ -1,1 +69,73 @@- assert: &true\n    that:\n      - \"result.changed == true\"\n\n- name: \"Check Idempotence\""
  },
  {
    "id" : "3d6d6b7d-7b66-4f56-a30d-0ac5e725b9fd",
    "prId" : 27935,
    "prUrl" : "https://github.com/ansible/ansible/pull/27935#pullrequestreview-55860974",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "406f9b43-e454-4691-89dc-00ea5b30c235",
        "parentId" : null,
        "authorId" : "fc84e3a8-7a8a-45ea-ba68-7e6e0b604075",
        "body" : "This will work with the following added here without any checks:\r\n\r\n```\r\n- name: Clear interface v4\r\n  nxos_ip_interface:\r\n    interface: \"{{ testint1 }}\"\r\n    version: v4\r\n    state: absent\r\n    addr: 20.20.20.20\r\n    mask: 24\r\n    provider: \"{{ cli }}\"\r\n\r\n- name: Clear interface v6\r\n  nxos_ip_interface:\r\n    interface: \"{{ testint2 }}\"\r\n    version: v6\r\n    state: absent\r\n    addr: 'fd56:31f7:e4ad:5585::1'\r\n    mask: 64\r\n    provider: \"{{ cli }}\"\r\n```\r\n\r\nAnd then the equivalent on the nxos side",
        "createdAt" : "2017-08-11T17:37:10Z",
        "updatedAt" : "2017-08-11T19:06:09Z",
        "lastEditedBy" : "fc84e3a8-7a8a-45ea-ba68-7e6e0b604075",
        "tags" : [
        ]
      }
    ],
    "commit" : "02833d5b492792601251bf06c74e7bf9fc07576b",
    "line" : 29,
    "diffHunk" : "@@ -1,1 +36,40 @@    state: present\n    provider: \"{{ cli }}\"\n\n# For titanium\n- name: Clear interface v4"
  }
]