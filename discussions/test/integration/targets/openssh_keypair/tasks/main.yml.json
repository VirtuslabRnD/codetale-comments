[
  {
    "id" : "d5297e32-496f-48b3-95fe-6b91b3b3056b",
    "prId" : 46436,
    "prUrl" : "https://github.com/ansible/ansible/pull/46436#pullrequestreview-166213113",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "08c1568a-5469-41dd-a184-2f94bdc64484",
        "parentId" : null,
        "authorId" : "d10c46ef-3d4c-4766-bd09-d27ec4674a84",
        "body" : "I think you should also include at least one idempotency check for `state == present` and one for `state == absent`. Right now you're not testing the check code at all.",
        "createdAt" : "2018-10-18T11:31:33Z",
        "updatedAt" : "2018-10-22T09:12:17Z",
        "lastEditedBy" : "d10c46ef-3d4c-4766-bd09-d27ec4674a84",
        "tags" : [
        ]
      },
      {
        "id" : "6f34337c-3f9a-4836-bb1d-4858286c3360",
        "parentId" : "08c1568a-5469-41dd-a184-2f94bdc64484",
        "authorId" : "57db1e2a-9c1c-4c08-b54f-9731aff18e36",
        "body" : "The same issue exists for the other modules in the `crypto` namespace\r\n\r\ne.g.\r\n\r\nhttps://github.com/ansible/ansible/blob/03bccdda9223f8b6ab4bb38a264e07b67f4ed890/test/integration/targets/openssl_privatekey/tasks/main.yml#L15-L22\r\n\r\nand the check:\r\n\r\nhttps://github.com/ansible/ansible/blob/03bccdda9223f8b6ab4bb38a264e07b67f4ed890/test/integration/targets/openssl_privatekey/tests/validate.yml#L31-L39\r\n\r\nwhich doesn't check for idempotency of the absent state. I guess a followup PR could be made to fix all modules in the namespace at once (e.g. first checking for file existence and only reporting \"changed\" if they existed).\r\n",
        "createdAt" : "2018-10-18T12:45:59Z",
        "updatedAt" : "2018-10-22T09:12:17Z",
        "lastEditedBy" : "57db1e2a-9c1c-4c08-b54f-9731aff18e36",
        "tags" : [
        ]
      },
      {
        "id" : "c910befc-d8c1-41da-8ec9-3b8ec1c2a7ba",
        "parentId" : "08c1568a-5469-41dd-a184-2f94bdc64484",
        "authorId" : "d10c46ef-3d4c-4766-bd09-d27ec4674a84",
        "body" : "Yep, that's something we should change for all tests. Let's do that once this is merged.",
        "createdAt" : "2018-10-18T17:36:33Z",
        "updatedAt" : "2018-10-22T09:12:18Z",
        "lastEditedBy" : "d10c46ef-3d4c-4766-bd09-d27ec4674a84",
        "tags" : [
        ]
      }
    ],
    "commit" : "287d304445840afb2727c82b4c7d6156bad2442d",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +3,7 @@  openssh_keypair:\n    path: '{{ output_dir }}/privatekey1'\n\n- name: Generate privatekey2 - size 2048\n  openssh_keypair:"
  },
  {
    "id" : "0c99a526-89f1-48d2-8d2f-488e76c01923",
    "prId" : 57993,
    "prUrl" : "https://github.com/ansible/ansible/pull/57993#pullrequestreview-268272184",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f309df2d-f0e6-4079-a378-629e78850800",
        "parentId" : null,
        "authorId" : "d10c46ef-3d4c-4766-bd09-d27ec4674a84",
        "body" : "Maybe add another test here:\r\n a) copy `{{ output_dir }}/privatekey7` and its public key to `{{ output_dir }}/privatekey8`;\r\n b) run `openssh_keypair` again to change the comment to something else.\r\n\r\nThen in verification, check whether the public key (and thus the private key) itself (i.e. without the comment) stayed the same, and that only the comment changed.",
        "createdAt" : "2019-07-07T09:59:59Z",
        "updatedAt" : "2019-07-29T13:36:39Z",
        "lastEditedBy" : "d10c46ef-3d4c-4766-bd09-d27ec4674a84",
        "tags" : [
        ]
      },
      {
        "id" : "1decb2ea-fcbc-4fe5-a499-a9cc68510cc2",
        "parentId" : "f309df2d-f0e6-4079-a378-629e78850800",
        "authorId" : "0fc7b754-8ebf-4a03-becd-71c924b2854a",
        "body" : "ack",
        "createdAt" : "2019-07-10T07:57:07Z",
        "updatedAt" : "2019-07-29T13:36:39Z",
        "lastEditedBy" : "0fc7b754-8ebf-4a03-becd-71c924b2854a",
        "tags" : [
        ]
      },
      {
        "id" : "8bc543f1-9de5-4a9d-a7af-86e9d5f3bbf7",
        "parentId" : "f309df2d-f0e6-4079-a378-629e78850800",
        "authorId" : "0fc7b754-8ebf-4a03-becd-71c924b2854a",
        "body" : "I added the following test.\r\nCreate a key with comment. Change the comment of the key.\r\nVerify that the public key has not been changed.\r\n\r\nCurrently, I'm unable to test the comment as the return value will be in the other PR.",
        "createdAt" : "2019-07-18T20:22:14Z",
        "updatedAt" : "2019-07-29T13:36:39Z",
        "lastEditedBy" : "0fc7b754-8ebf-4a03-becd-71c924b2854a",
        "tags" : [
        ]
      },
      {
        "id" : "42fa1075-e44e-4229-9646-c797786e0780",
        "parentId" : "f309df2d-f0e6-4079-a378-629e78850800",
        "authorId" : "d10c46ef-3d4c-4766-bd09-d27ec4674a84",
        "body" : "You could test it by looking at the output file, or by calling ssh-keygen yourself and extract the comment from its output.",
        "createdAt" : "2019-07-18T20:27:36Z",
        "updatedAt" : "2019-07-29T13:36:39Z",
        "lastEditedBy" : "d10c46ef-3d4c-4766-bd09-d27ec4674a84",
        "tags" : [
        ]
      },
      {
        "id" : "049b8a2a-8b19-4113-a133-ce2a2571ada8",
        "parentId" : "f309df2d-f0e6-4079-a378-629e78850800",
        "authorId" : "0fc7b754-8ebf-4a03-becd-71c924b2854a",
        "body" : "If I call ssh-keygen to show the public file, I will get just the public key without the comment.\r\nI thought to add the test for the comment when the second PR (#59268) will get accepted.\r\nWhat do you think?",
        "createdAt" : "2019-07-18T21:00:17Z",
        "updatedAt" : "2019-07-29T13:36:39Z",
        "lastEditedBy" : "0fc7b754-8ebf-4a03-becd-71c924b2854a",
        "tags" : [
        ]
      },
      {
        "id" : "d238f904-8a57-40aa-82ac-cc1db2fcb76e",
        "parentId" : "f309df2d-f0e6-4079-a378-629e78850800",
        "authorId" : "d10c46ef-3d4c-4766-bd09-d27ec4674a84",
        "body" : "Sounds good as well.",
        "createdAt" : "2019-07-30T09:39:18Z",
        "updatedAt" : "2019-07-30T09:39:18Z",
        "lastEditedBy" : "d10c46ef-3d4c-4766-bd09-d27ec4674a84",
        "tags" : [
        ]
      }
    ],
    "commit" : "7d7d0b81fff94ddcf7e62e530cfd083d90edd49d",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +73,77 @@    comment: 'test@privatekey7'\n  register: privatekey7_result\n\n- name: Modify privatekey7 comment\n  openssh_keypair:"
  }
]