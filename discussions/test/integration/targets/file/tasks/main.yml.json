[
  {
    "id" : "05eac8cc-8d33-416a-9140-e6e6d7b08e67",
    "prId" : 18731,
    "prUrl" : "https://github.com/ansible/ansible/pull/18731#pullrequestreview-83185550",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4cfa968c-e266-4cbe-9773-12271b1c7817",
        "parentId" : null,
        "authorId" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "body" : "Should not an assertion be added there (then `when:` attribute of tasks below could be removed) ?\r\n```\r\nassert:\r\n  that:\r\n    file_attributes_result|changed\r\n```",
        "createdAt" : "2017-12-11T12:53:37Z",
        "updatedAt" : "2017-12-14T13:08:01Z",
        "lastEditedBy" : "d4c7fda6-9311-4eb9-91ca-d3f1cbccd288",
        "tags" : [
        ]
      },
      {
        "id" : "2dd90248-4d5f-444e-b283-c9f0577708cd",
        "parentId" : "4cfa968c-e266-4cbe-9773-12271b1c7817",
        "authorId" : "2cc098a3-7926-4651-8261-412e9ac59899",
        "body" : "No, the file module is [designed to fail](https://github.com/tchernomax/ansible/blob/devel/lib/ansible/module_utils/basic.py#L1282) if the extended attribute can't be applied.\r\nOn the contrary the get_file_attributes is [designed not to fail](https://github.com/tchernomax/ansible/blob/devel/lib/ansible/module_utils/basic.py#L1299) if `lsattr` isn't present or plate-forme doesn't support extended attributes.\r\n\r\nIf I where to replate `ignore_errors: True` with what you propose, the test would fail on all the plate-forme which doesn't support `chattr` or the 'A' extended attributes.\r\n\r\nWhat I want to test is: **if** the plate-forme support the 'A' extended attribute **and** this attribute is already set ; the file module should **not** change the file.",
        "createdAt" : "2017-12-13T14:21:23Z",
        "updatedAt" : "2017-12-14T13:08:01Z",
        "lastEditedBy" : "2cc098a3-7926-4651-8261-412e9ac59899",
        "tags" : [
        ]
      }
    ],
    "commit" : "010a0d7f55b526488c8317b0041faa5abf95e5fe",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +67,71 @@  register: file_attributes_result\n  ignore_errors: True\n\n- name: reapply file attribute \"A\"\n  file: path={{output_dir}}/baz.txt attributes=A"
  }
]