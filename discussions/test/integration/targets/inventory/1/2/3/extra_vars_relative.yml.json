[
  {
    "id" : "2924998a-d935-47bd-bcc1-4d5ca04acf9b",
    "prId" : 75127,
    "prUrl" : "https://github.com/ansible/ansible/pull/75127#pullrequestreview-695138773",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3755cb40-ba62-404f-a2cc-b2670cca228d",
        "parentId" : null,
        "authorId" : "d3dac403-d9ed-45a1-86de-77ac9cf45662",
        "body" : "We should make sure the reload did succeed with some additional asserts:\r\n\r\n```suggestion\r\n    - name: Make sure inventory was loaded properly\r\n      assert: &inventory_load_assert_condition\r\n        that:\r\n          - \"'webservers' in groups\"\r\n          - \"'web_host.example.com' in groups['webservers']\"\r\n\r\n    - name: Reload inventory, forces extra vars re-eval from diff basedir\r\n      meta: refresh_inventory\r\n      \r\n    - name: Make sure inventory was reloaded properly\r\n      assert: *inventory_load_assert_condition\r\n```\r\n\r\nIn order to make this work, we will also need some additional inventory sources. A simple `base_inventory.ini` containing the `web_host.example.com` line should work just fine.",
        "createdAt" : "2021-06-29T09:25:30Z",
        "updatedAt" : "2021-06-29T09:27:02Z",
        "lastEditedBy" : "d3dac403-d9ed-45a1-86de-77ac9cf45662",
        "tags" : [
        ]
      },
      {
        "id" : "4f074e64-fe15-472a-9500-bc23d017938e",
        "parentId" : "3755cb40-ba62-404f-a2cc-b2670cca228d",
        "authorId" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "body" : "not sure why you need 2nd inventory, it will behave the same as with the first",
        "createdAt" : "2021-06-29T14:29:05Z",
        "updatedAt" : "2021-06-29T14:29:05Z",
        "lastEditedBy" : "30fc1801-f8f1-4cc4-9690-e31e203f4f6d",
        "tags" : [
        ]
      },
      {
        "id" : "082061af-adc2-41df-aa85-7b7d57532564",
        "parentId" : "3755cb40-ba62-404f-a2cc-b2670cca228d",
        "authorId" : "d3dac403-d9ed-45a1-86de-77ac9cf45662",
        "body" : "If there is no \"base\" inventory, the constructed plugin has nothing to chew and will not produce a webservers group. This basic inventory provides some data for the plugin and allows us to determine if the constructed plugin did its thing successfully.",
        "createdAt" : "2021-06-29T14:47:51Z",
        "updatedAt" : "2021-06-29T14:47:51Z",
        "lastEditedBy" : "d3dac403-d9ed-45a1-86de-77ac9cf45662",
        "tags" : [
        ]
      }
    ],
    "commit" : "9b80d0187f0753bcf83a65febd3415607e4a495b",
    "line" : 15,
    "diffHunk" : "@@ -1,1 +13,17 @@\n    - name: Reload inventory, forces extra vars re-eval from diff basedir\n      meta: refresh_inventory\n\n    - name: Make sure all is loaded, again"
  }
]