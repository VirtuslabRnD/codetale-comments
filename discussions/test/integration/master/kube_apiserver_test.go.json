[
  {
    "id" : "84fb5bd1-5b5c-4c26-8b27-f91fdac6fe5c",
    "prId" : 93721,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/93721#pullrequestreview-463473597",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9b6d3488-82ec-469e-bf00-cbc6c1ba99e4",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "nit, do `defer wg.Done()` at the top of the method (applies to all)",
        "createdAt" : "2020-08-07T17:13:37Z",
        "updatedAt" : "2020-08-17T14:31:50Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "11b347ca1d0a51eb13dc3ba5027289e0c2ff7f2a",
    "line" : 35,
    "diffHunk" : "@@ -1,1 +430,434 @@\t\t// start master count api server\n\t\twg.Add(1)\n\t\tgo func(i int) {\n\t\t\tdefer wg.Done()\n\t\t\tserver := kubeapiservertesting.StartTestServerOrDie(t, instanceOptions, []string{"
  },
  {
    "id" : "1184d92b-5145-44ef-93a3-fd90e5c26093",
    "prId" : 92644,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/92644#pullrequestreview-440271026",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f43ae309-1081-4bc2-b037-40ab17b47c07",
        "parentId" : null,
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "If we're going to do this, then we should probably just fully convert this function so that it doesn't return the bool. \r\n\r\n```\r\nif err != nil || status != http.StatusOK {\r\n   t.Fatalf(\"got %v but wanted 200, error: %v\", status, err)\r\n}\r\n```\r\n",
        "createdAt" : "2020-06-30T17:01:10Z",
        "updatedAt" : "2020-07-01T05:40:54Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      },
      {
        "id" : "20302502-8f98-40eb-acff-b6f39d15de3b",
        "parentId" : "f43ae309-1081-4bc2-b037-40ab17b47c07",
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "And then the calls on 121 and 124 don't have to be in conditional form. ",
        "createdAt" : "2020-06-30T17:02:00Z",
        "updatedAt" : "2020-07-01T05:40:54Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      },
      {
        "id" : "4e6d21a2-6178-4cb3-8ed2-95b7ca38619e",
        "parentId" : "f43ae309-1081-4bc2-b037-40ab17b47c07",
        "authorId" : "24302707-9254-48df-89a5-cbcc349462b8",
        "body" : "changed the function to return error actually",
        "createdAt" : "2020-06-30T18:20:38Z",
        "updatedAt" : "2020-07-01T05:40:54Z",
        "lastEditedBy" : "24302707-9254-48df-89a5-cbcc349462b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "3f680002038c81b02541e4cc4bd7c019b7e7d6e6",
    "line" : 12,
    "diffHunk" : "@@ -1,1 +104,108 @@\tres.StatusCode(&status)\n\t_, err := res.Raw()\n\tif err != nil {\n\t\treturn false, err\n\t}"
  },
  {
    "id" : "8604173a-0c55-4b2d-a0fd-c5215f82672f",
    "prId" : 89937,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/89937#pullrequestreview-390381966",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ca35ff6c-455a-4b0a-a793-7c134db1fcf3",
        "parentId" : null,
        "authorId" : "203dfb85-d185-4057-88b3-a1b4f09fd1fd",
        "body" : "this is exactly the scenario described in https://github.com/kubernetes/kubernetes/issues/85894",
        "createdAt" : "2020-04-08T22:45:52Z",
        "updatedAt" : "2020-04-20T07:50:32Z",
        "lastEditedBy" : "203dfb85-d185-4057-88b3-a1b4f09fd1fd",
        "tags" : [
        ]
      }
    ],
    "commit" : "e3df13439a72888cd83ed9896359d75e1787d2fc",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +497,501 @@}\n\nfunc TestMultiMasterNodePortAllocation(t *testing.T) {\n\tvar kubeAPIServers []*kubeapiservertesting.TestServer\n\tvar clientAPIServers []*kubernetes.Clientset"
  },
  {
    "id" : "bab4b503-953f-4e2c-9a15-065b41cb08ec",
    "prId" : 81436,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/81436#pullrequestreview-281240439",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c52bd05c-c23f-44b1-b66b-cb18d5e94364",
        "parentId" : null,
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "nit: empty line above these blocks with comments.",
        "createdAt" : "2019-08-29T06:24:01Z",
        "updatedAt" : "2019-08-29T11:25:36Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      }
    ],
    "commit" : "2a10b0dc3158d714214c7364de0277f8146dd202",
    "line" : 56,
    "diffHunk" : "@@ -1,1 +217,221 @@\t}\n\n\t// Create a CRD that overlaps OpenAPI path with the CRD API\n\tcrd := &apiextensionsv1beta1.CustomResourceDefinition{\n\t\tObjectMeta: metav1.ObjectMeta{"
  },
  {
    "id" : "53fb0b9a-88bd-484d-8cfc-3f0e5282420d",
    "prId" : 81436,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/81436#pullrequestreview-281381801",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7bfda896-069a-45ca-a543-ca3d614c5fb2",
        "parentId" : null,
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "follow-up: we shouldn't retrieve the spec twice, for path and definition (and the probe, so even three times).",
        "createdAt" : "2019-08-29T11:08:51Z",
        "updatedAt" : "2019-08-29T11:25:36Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      }
    ],
    "commit" : "2a10b0dc3158d714214c7364de0277f8146dd202",
    "line" : 208,
    "diffHunk" : "@@ -1,1 +369,373 @@\nfunc getOpenAPIPath(clientset *apiextensionsclientset.Clientset, path string) (spec.PathItem, bool, error) {\n\tbs, err := clientset.RESTClient().Get().AbsPath(\"openapi\", \"v2\").DoRaw()\n\tif err != nil {\n\t\treturn spec.PathItem{}, false, err"
  },
  {
    "id" : "255564b3-cfee-47be-a21f-6e8fcd731c9e",
    "prId" : 78458,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/78458#pullrequestreview-243864285",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1c9a1de5-e707-4cef-8805-38afe18a692a",
        "parentId" : null,
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "golang‚Äòism: move helpers to the bottom",
        "createdAt" : "2019-05-30T15:31:07Z",
        "updatedAt" : "2019-06-17T18:16:46Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "2f8ce7a1-c702-4e77-87dd-9d3ba47ecf81",
        "parentId" : "1c9a1de5-e707-4cef-8805-38afe18a692a",
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "üëç",
        "createdAt" : "2019-05-30T15:31:55Z",
        "updatedAt" : "2019-06-17T18:16:46Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      }
    ],
    "commit" : "54dcf5c9c46fc4782d4861936309349b5a71a1ac",
    "line" : 11,
    "diffHunk" : "@@ -1,1 +86,90 @@\t}\n}\n\nfunc endpointReturnsStatusOK(client *kubernetes.Clientset, path string) bool {\n\tres := client.CoreV1().RESTClient().Get().AbsPath(path).Do()"
  },
  {
    "id" : "9da9f685-61dd-4642-a7d6-5e2ed2ab94c3",
    "prId" : 78458,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/78458#pullrequestreview-243881633",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "90814bb8-fb44-460f-b46c-a21bc3991310",
        "parentId" : null,
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "how about a helper to condense those repeated 7 lines to one?",
        "createdAt" : "2019-05-30T15:31:56Z",
        "updatedAt" : "2019-06-17T18:16:46Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "467d5e55-4765-4a74-91c6-611f73e77689",
        "parentId" : "90814bb8-fb44-460f-b46c-a21bc3991310",
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "so funny, i actually had this last night but it was lost in one of my changes. ",
        "createdAt" : "2019-05-30T16:10:40Z",
        "updatedAt" : "2019-06-17T18:16:46Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      }
    ],
    "commit" : "54dcf5c9c46fc4782d4861936309349b5a71a1ac",
    "line" : 34,
    "diffHunk" : "@@ -1,1 +109,113 @@\tif endpointReturnsStatusOK(client, \"/readyz\") {\n\t\tt.Fatalf(\"readyz should start unready\")\n\t}\n\t// we need to wait longer than our grace period\n\terr = wait.Poll(100*time.Millisecond, wait.ForeverTestTimeout, func() (bool, error) {"
  },
  {
    "id" : "9a21ad0f-b768-42ae-a585-491955fee4e0",
    "prId" : 78458,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/78458#pullrequestreview-245796268",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ebedbb35-57cb-49c3-b6cd-d5c92795b41a",
        "parentId" : null,
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "but... but... you used a clock earlier?",
        "createdAt" : "2019-05-30T23:43:07Z",
        "updatedAt" : "2019-06-17T18:16:46Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      },
      {
        "id" : "c9c07b83-6bb8-4c43-940d-772470b57d60",
        "parentId" : "ebedbb35-57cb-49c3-b6cd-d5c92795b41a",
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "Yeah, I can rewrite this to leverage the clock. ",
        "createdAt" : "2019-05-31T00:19:34Z",
        "updatedAt" : "2019-06-17T18:16:46Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      },
      {
        "id" : "2eb0c252-a3d2-4bc2-a5b9-1ee047bb3ed2",
        "parentId" : "ebedbb35-57cb-49c3-b6cd-d5c92795b41a",
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "I am going to avoid doing this, because I can't think of a good way to plumb the clock through the  integration testserver, without adding some additional stuff to the testserver setup, something which @sttts has indicated as undesirable. ",
        "createdAt" : "2019-06-04T23:16:43Z",
        "updatedAt" : "2019-06-17T18:16:46Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      },
      {
        "id" : "e9462c61-26f4-4224-873b-c0573ecf950c",
        "parentId" : "ebedbb35-57cb-49c3-b6cd-d5c92795b41a",
        "authorId" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "body" : "no clock magic here. This is an (e2e-like) integration test. We want the normal timing behaviour.",
        "createdAt" : "2019-06-05T03:14:40Z",
        "updatedAt" : "2019-06-17T18:16:46Z",
        "lastEditedBy" : "f0985d19-4073-49b4-832a-0b89b15a1431",
        "tags" : [
        ]
      },
      {
        "id" : "a7455027-525b-4a5d-9239-4156fd53fb56",
        "parentId" : "ebedbb35-57cb-49c3-b6cd-d5c92795b41a",
        "authorId" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "body" : "üëç ",
        "createdAt" : "2019-06-05T03:38:15Z",
        "updatedAt" : "2019-06-17T18:16:46Z",
        "lastEditedBy" : "09e31512-b413-47a1-bc83-20b5a77064ee",
        "tags" : [
        ]
      }
    ],
    "commit" : "54dcf5c9c46fc4782d4861936309349b5a71a1ac",
    "line" : 36,
    "diffHunk" : "@@ -1,1 +111,115 @@\t}\n\t// we need to wait longer than our grace period\n\terr = wait.Poll(100*time.Millisecond, wait.ForeverTestTimeout, func() (bool, error) {\n\t\treturn !endpointReturnsStatusOK(client, \"/healthz\"), nil\n\t})"
  },
  {
    "id" : "e293d808-1f23-43df-8f8f-7cb7a54c8719",
    "prId" : 78458,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/78458#pullrequestreview-250757521",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6a90fcfd-a139-4748-a637-197449129ef1",
        "parentId" : null,
        "authorId" : "42b1e004-4fa7-4e43-84cf-5378839b49ad",
        "body" : "If healthLock is RWMutex, we can take RLock in this func, making the check more efficient.",
        "createdAt" : "2019-06-17T21:31:15Z",
        "updatedAt" : "2019-06-17T21:31:16Z",
        "lastEditedBy" : "42b1e004-4fa7-4e43-84cf-5378839b49ad",
        "tags" : [
        ]
      }
    ],
    "commit" : "54dcf5c9c46fc4782d4861936309349b5a71a1ac",
    "line" : 73,
    "diffHunk" : "@@ -1,1 +309,313 @@func (h *delayedCheck) Check(req *http.Request) error {\n\th.healthLock.Lock()\n\tdefer h.healthLock.Unlock()\n\tif h.isHealthy {\n\t\treturn nil"
  },
  {
    "id" : "a034f754-6c01-472c-aef7-f92618947fbc",
    "prId" : 60890,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/60890#pullrequestreview-102759007",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c647874e-d233-49b5-a231-020518374d4e",
        "parentId" : null,
        "authorId" : "0af48e59-4be9-46ce-9275-aa218813b6fd",
        "body" : "Need to sort the strings list before comparing them with DeepEqual.",
        "createdAt" : "2018-03-09T18:45:28Z",
        "updatedAt" : "2018-04-27T18:04:02Z",
        "lastEditedBy" : "0af48e59-4be9-46ce-9275-aa218813b6fd",
        "tags" : [
        ]
      },
      {
        "id" : "9995628f-c11f-428d-b9ec-e95381d3c0fb",
        "parentId" : "c647874e-d233-49b5-a231-020518374d4e",
        "authorId" : "3eccedfc-5c53-4555-94cb-69f2b56e485c",
        "body" : "Thanks! Fixed!",
        "createdAt" : "2018-03-09T19:20:07Z",
        "updatedAt" : "2018-04-27T18:04:02Z",
        "lastEditedBy" : "3eccedfc-5c53-4555-94cb-69f2b56e485c",
        "tags" : [
        ]
      }
    ],
    "commit" : "efe19e4acbe2b9a96fe855ea545b340861c55feb",
    "line" : 62,
    "diffHunk" : "@@ -1,1 +165,169 @@\t\tlistenAddresses = append(listenAddresses, server.ServerOpts.GenericServerRunOptions.AdvertiseAddress.String())\n\t}\n\treturn reflect.DeepEqual(listenAddresses, ips)\n}\n"
  },
  {
    "id" : "ea7be414-8565-41a4-8ec8-138ac1bd84ac",
    "prId" : 60890,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/60890#pullrequestreview-115986435",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3ea6aa89-105b-43b1-a549-58474235fa02",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "thanks, this is looking really good. a couple tweaks and this will be ready.\r\n\r\nI'd expect the most common scenario by far to be moving from master-count reconciliation to lease reconciliation... let's order the test to do that.\r\n\r\n1. first spin up masterCountServers\r\n2. wait until a verifyEndpointsWithIPs check demonstrates all of them have registered their IPs (same check you currently have for leaseServers, done for masterCountServers)\r\n3. then start up leaseServers, pause for a moment, then shut down masterCountServers\r\n4. continue with the existing verifyEndpointsWithIPs check you have to verify leaseServers",
        "createdAt" : "2018-04-27T15:42:13Z",
        "updatedAt" : "2018-04-27T18:04:02Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "efe19e4acbe2b9a96fe855ea545b340861c55feb",
    "line" : 73,
    "diffHunk" : "@@ -1,1 +176,180 @@\t\tDisableStorageCleanup: true,\n\t}\n\n\t// cleanup the registry storage\n\tdefer registry.CleanupStorage()"
  }
]