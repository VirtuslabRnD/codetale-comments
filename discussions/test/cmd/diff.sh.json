[
  {
    "id" : "f3a18f98-38b8-4d76-afe2-7067e6ea5b8f",
    "prId" : 89795,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/89795#pullrequestreview-386793252",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a4b6e025-5be1-4bd9-87ba-550c4e9bdbbf",
        "parentId" : null,
        "authorId" : "a139439a-9f9e-4518-b4f3-9c602d956c57",
        "body" : "Can we make sure that both server-side and client-side dry-run are working properly? They both do things a different way so there is a possibility for a bug to creep-in one of the two.",
        "createdAt" : "2020-04-02T21:20:20Z",
        "updatedAt" : "2020-04-02T23:23:48Z",
        "lastEditedBy" : "a139439a-9f9e-4518-b4f3-9c602d956c57",
        "tags" : [
        ]
      },
      {
        "id" : "4e6f559a-94fd-4567-9b7f-7ab1c0acf504",
        "parentId" : "a4b6e025-5be1-4bd9-87ba-550c4e9bdbbf",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "also, grabbing the resourceVersion before/after and ensuring it didn't change would be a more reliable way of making sure nothing was persisted (assuming nothing else is touching pods)",
        "createdAt" : "2020-04-02T21:34:03Z",
        "updatedAt" : "2020-04-02T23:23:48Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "9c0320f1bfd8edfb11c283b3fd422dc6e49360c5",
    "line" : 19,
    "diffHunk" : "@@ -1,1 +50,54 @@    kube::test::if_has_string \"${output_message}\" 'k8s.gcr.io/pause:3.0'\n\n    # Ensure diff only dry-runs and doesn't persist change\n    resourceVersion=$(kubectl get \"${kube_flags[@]:?}\" -f hack/testdata/pod.yaml -o go-template='{{ .metadata.resourceVersion }}')\n    kube::test::if_has_string \"${resourceVersion}\" \"${initialResourceVersion}\""
  },
  {
    "id" : "db8ad5c3-da8e-46db-9586-19e55d3b7771",
    "prId" : 88739,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/88739#pullrequestreview-371556992",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "70dd6eb6-74ee-469b-862b-d9ada9c5ae23",
        "parentId" : null,
        "authorId" : "a139439a-9f9e-4518-b4f3-9c602d956c57",
        "body" : "I wasn't expecting to find the `test $? -eq 1`, I'm not sure what you're trying to do here?",
        "createdAt" : "2020-03-05T16:52:37Z",
        "updatedAt" : "2020-03-05T16:52:37Z",
        "lastEditedBy" : "a139439a-9f9e-4518-b4f3-9c602d956c57",
        "tags" : [
        ]
      },
      {
        "id" : "4cad6251-87c5-4d76-8ce9-c2faa4536eff",
        "parentId" : "70dd6eb6-74ee-469b-862b-d9ada9c5ae23",
        "authorId" : "f40287b7-c508-4d95-b3ad-07d0de320962",
        "body" : "Oh this is for a diff between `hack/testdata/pod.yaml` (CSA) and `hack/testdata/pod-changed.yaml` (SSA).\r\n\r\nThis exercises `kubectl diff --server-side` to validate that the original issue is fixed and `kubectl diff --server-side` is usuable since now we pass fieldManager",
        "createdAt" : "2020-03-05T17:08:54Z",
        "updatedAt" : "2020-03-05T17:08:54Z",
        "lastEditedBy" : "f40287b7-c508-4d95-b3ad-07d0de320962",
        "tags" : [
        ]
      },
      {
        "id" : "bb001df1-2716-4b26-9d02-c17b6d5be5ee",
        "parentId" : "70dd6eb6-74ee-469b-862b-d9ada9c5ae23",
        "authorId" : "f40287b7-c508-4d95-b3ad-07d0de320962",
        "body" : "I think it's confusing that I added `kubectl apply -f hack/testdata/pod.yaml` first, even though we have that already",
        "createdAt" : "2020-03-05T17:35:33Z",
        "updatedAt" : "2020-03-05T17:35:50Z",
        "lastEditedBy" : "f40287b7-c508-4d95-b3ad-07d0de320962",
        "tags" : [
        ]
      },
      {
        "id" : "21be6831-2575-444d-816b-fe9506d049c1",
        "parentId" : "70dd6eb6-74ee-469b-862b-d9ada9c5ae23",
        "authorId" : "b86e7e78-bb07-417f-8470-39407559c779",
        "body" : "You're doing this in a subshell, does it propagate and cause a failure when triggered?",
        "createdAt" : "2020-03-09T17:45:00Z",
        "updatedAt" : "2020-03-09T17:45:01Z",
        "lastEditedBy" : "b86e7e78-bb07-417f-8470-39407559c779",
        "tags" : [
        ]
      },
      {
        "id" : "d9433669-896d-4179-90d8-38fb698de090",
        "parentId" : "70dd6eb6-74ee-469b-862b-d9ada9c5ae23",
        "authorId" : "a139439a-9f9e-4518-b4f3-9c602d956c57",
        "body" : "Yeah, the test fails even if the error is in the sub-shell",
        "createdAt" : "2020-03-09T21:57:17Z",
        "updatedAt" : "2020-03-09T21:57:18Z",
        "lastEditedBy" : "a139439a-9f9e-4518-b4f3-9c602d956c57",
        "tags" : [
        ]
      }
    ],
    "commit" : "bacc2c49605f608d3f919109e0c37ebf6e1d7036",
    "line" : 18,
    "diffHunk" : "@@ -1,1 +47,51 @@    # Test found diff with server-side apply\n    kubectl apply -f hack/testdata/pod.yaml\n    output_message=$(kubectl diff -f hack/testdata/pod-changed.yaml --server-side --force-conflicts || test $? -eq 1)\n    kube::test::if_has_string \"${output_message}\" 'k8s.gcr.io/pause:3.0'\n"
  },
  {
    "id" : "a8c1e6c8-ff77-4fc4-935f-db6441a3b95d",
    "prId" : 68525,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/68525#pullrequestreview-159184868",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "e152415e-6e49-449c-a5b8-c3604a08e62c",
        "parentId" : null,
        "authorId" : "b7d2a698-a6e1-4031-bb69-8b45505badb5",
        "body" : "I'd like to also see some more tests around this functionality as well. ",
        "createdAt" : "2018-09-26T20:31:30Z",
        "updatedAt" : "2018-09-26T20:31:47Z",
        "lastEditedBy" : "b7d2a698-a6e1-4031-bb69-8b45505badb5",
        "tags" : [
        ]
      }
    ],
    "commit" : "0db62497401fe98106135b783288d30dc6780cab",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +33,37 @@    kubectl apply -f hack/testdata/pod.yaml\n\n    output_message=$(kubectl alpha diff -f hack/testdata/pod-changed.yaml)\n    kube::test::if_has_string \"${output_message}\" 'k8s.gcr.io/pause:3.0'\n"
  }
]