[
  {
    "id" : "377cee12-401b-4ba9-a00c-01a7f80598b1",
    "prId" : 98883,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/98883#pullrequestreview-593666761",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "07f615e0-620b-4b54-b44f-62ba390caaf6",
        "parentId" : null,
        "authorId" : "203dfb85-d185-4057-88b3-a1b4f09fd1fd",
        "body" : "I think that SCTP is stateless and will have the same issue, no?\r\nI think we should pass the listen addresses too\r\n\r\nat least here is failing because only the pod from the other node replies, but not in the same node\r\nhttps://prow.k8s.io/view/gcs/kubernetes-jenkins/logs/ci-dualstack-azure-e2e-master-iptables/1362333391973781504",
        "createdAt" : "2021-02-18T21:38:18Z",
        "updatedAt" : "2021-03-05T09:57:06Z",
        "lastEditedBy" : "203dfb85-d185-4057-88b3-a1b4f09fd1fd",
        "tags" : [
        ]
      }
    ],
    "commit" : "f6451c93b132236161a17eabd1584cf490848d6a",
    "line" : 54,
    "diffHunk" : "@@ -1,1 +177,181 @@\t}\n\tif sctpPort != -1 {\n\t\tgo startSCTPServer(sctpPort)\n\t}\n"
  },
  {
    "id" : "c70ffd9f-96dd-48a6-b9cb-257a86999608",
    "prId" : 92850,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/92850#pullrequestreview-450069858",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "2c9b3258-f7ca-4b09-987a-270774d4e97e",
        "parentId" : null,
        "authorId" : "8b178e45-b16b-405a-a22d-44899bf0bd64",
        "body" : "Could you also add some information about this flag in the agnhost README file? The usage should get updated in the readme as well.",
        "createdAt" : "2020-07-14T12:43:28Z",
        "updatedAt" : "2020-11-02T21:31:11Z",
        "lastEditedBy" : "8b178e45-b16b-405a-a22d-44899bf0bd64",
        "tags" : [
        ]
      },
      {
        "id" : "461d2c16-f05e-4794-9f4c-dd8c017e3e2f",
        "parentId" : "2c9b3258-f7ca-4b09-987a-270774d4e97e",
        "authorId" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "body" : "Done. I also noticed the TLS flags were missing from the usage string and added them there.",
        "createdAt" : "2020-07-16T17:37:32Z",
        "updatedAt" : "2020-11-02T21:31:11Z",
        "lastEditedBy" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "tags" : [
        ]
      }
    ],
    "commit" : "c05a350b4f16bbf1a709b82a97584efd153e6a8e",
    "line" : 58,
    "diffHunk" : "@@ -1,1 +123,127 @@\tCmdNetexec.Flags().IntVar(&udpPort, \"udp-port\", 8081, \"UDP Listen Port\")\n\tCmdNetexec.Flags().IntVar(&sctpPort, \"sctp-port\", -1, \"SCTP Listen Port\")\n\tCmdNetexec.Flags().StringVar(&httpOverride, \"http-override\", \"\", \"Override the HTTP handler to always respond as if it were a GET with this path & params\")\n}\n"
  },
  {
    "id" : "007e31f3-cb5a-4b59-8644-7eaf0c8e66ae",
    "prId" : 89547,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/89547#pullrequestreview-397694630",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "19432c44-3ac4-485d-9e6c-6fa13d4d8bd4",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "is the `server.Shutdown` call the only way we could get here? want to avoid blocking on the select{} if exitCh wasn't actually closed",
        "createdAt" : "2020-04-21T20:04:30Z",
        "updatedAt" : "2020-05-07T13:18:39Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "9e51a310-9cc5-43a0-963b-cb0f98ecac55",
        "parentId" : "19432c44-3ac4-485d-9e6c-6fa13d4d8bd4",
        "authorId" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "body" : "Yes.  There is no way to get ErrServerClosed without Shutdown.",
        "createdAt" : "2020-04-21T21:37:32Z",
        "updatedAt" : "2020-05-07T13:18:39Z",
        "lastEditedBy" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "tags" : [
        ]
      }
    ],
    "commit" : "3c9959a5d421f945c25653573808d4685c2d1053",
    "line" : 79,
    "diffHunk" : "@@ -1,1 +177,181 @@\n\tif err := fn(); err != nil {\n\t\tif err == http.ErrServerClosed {\n\t\t\t// wait until the goroutine calls os.Exit()\n\t\t\tselect {}"
  },
  {
    "id" : "2e1556a5-82d9-4c02-8741-ee3338ad82a3",
    "prId" : 89547,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/89547#pullrequestreview-397636016",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f06fe86f-6e34-4d6b-b886-183f81c69531",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "maybe do this to protect against hanging forever if exitCh wasn't what triggered the shutdown?\r\n```\r\nselect {\r\ncase <-exitCh:\r\n  // graceful exit, wait until the goroutine calls os.Exit()\r\n  select {}\r\ndefault:\r\n  // exiting for some other reason\r\n}\r\n```",
        "createdAt" : "2020-04-21T20:05:49Z",
        "updatedAt" : "2020-05-07T13:18:39Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "a17aa208-a1b7-4757-910e-37a1b4f3f256",
        "parentId" : "f06fe86f-6e34-4d6b-b886-183f81c69531",
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "oh, exitCh isn't a close channel... hmm",
        "createdAt" : "2020-04-21T20:06:58Z",
        "updatedAt" : "2020-05-07T13:18:39Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "3c9959a5d421f945c25653573808d4685c2d1053",
    "line" : 81,
    "diffHunk" : "@@ -1,1 +179,183 @@\t\tif err == http.ErrServerClosed {\n\t\t\t// wait until the goroutine calls os.Exit()\n\t\t\tselect {}\n\t\t}\n\t\tlog.Fatal(err)"
  },
  {
    "id" : "9faf21f7-f4cf-4820-a91c-2678e31f2743",
    "prId" : 89547,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/89547#pullrequestreview-398481691",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "27f6f453-e248-44b5-8e19-6381a6caa20b",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "if two requests are made to /exit, this will block the second",
        "createdAt" : "2020-04-22T13:00:10Z",
        "updatedAt" : "2020-05-07T13:18:39Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "c754dfc9-4caa-4120-8fbc-0f9809120cdd",
        "parentId" : "27f6f453-e248-44b5-8e19-6381a6caa20b",
        "authorId" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "body" : "But exit always terminates the process, so the second request is irrelevant?",
        "createdAt" : "2020-04-22T18:51:29Z",
        "updatedAt" : "2020-05-07T13:18:39Z",
        "lastEditedBy" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "tags" : [
        ]
      },
      {
        "id" : "adcb5859-9d4b-4f21-852f-11d12f7c4526",
        "parentId" : "27f6f453-e248-44b5-8e19-6381a6caa20b",
        "authorId" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "body" : "also you can't make requests during shutdown ;)",
        "createdAt" : "2020-04-22T18:51:48Z",
        "updatedAt" : "2020-05-07T13:18:39Z",
        "lastEditedBy" : "6e2b5eda-1533-4798-a56c-432faaf38480",
        "tags" : [
        ]
      }
    ],
    "commit" : "3c9959a5d421f945c25653573808d4685c2d1053",
    "line" : 127,
    "diffHunk" : "@@ -1,1 +230,234 @@\t\tos.Exit(code)\n\t}\n\texitCh <- shutdownRequest{code: code, timeout: timeout}\n}\n"
  },
  {
    "id" : "a0ef902a-5b68-4f67-a852-586f6f714194",
    "prId" : 89547,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/89547#pullrequestreview-399232636",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "744ee908-6098-405b-b351-d9cab337f7ff",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "update test/images/agnhost/README.md as well",
        "createdAt" : "2020-04-23T15:45:14Z",
        "updatedAt" : "2020-05-07T13:18:39Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      }
    ],
    "commit" : "3c9959a5d421f945c25653573808d4685c2d1053",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +71,75 @@  - \"tries\": The number of times the request will be performed. Default value: \"1\".\n- \"/echo\": Returns the given \"msg\" (\"/echo?msg=echoed_msg\")\n- \"/exit\": Closes the server with the given code and graceful shutdown. The endpoint's parameters\n\tare:\n\t- \"code\": The exit code for the process. Default value: 0. Allows an integer [0-127]."
  },
  {
    "id" : "e1830dc5-8ac1-441e-b3dc-865cae4d53af",
    "prId" : 81895,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/81895#pullrequestreview-332022783",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "757fa2ab-1be9-4fee-b961-f65621ba03cc",
        "parentId" : null,
        "authorId" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "body" : "Should return after this",
        "createdAt" : "2019-12-05T22:43:10Z",
        "updatedAt" : "2019-12-15T21:34:34Z",
        "lastEditedBy" : "9f030d50-62db-4b00-a28c-847709b74d97",
        "tags" : [
        ]
      },
      {
        "id" : "b69cc80d-01ca-4309-a6bb-2c83c90e32c9",
        "parentId" : "757fa2ab-1be9-4fee-b961-f65621ba03cc",
        "authorId" : "da08428a-7a79-4f6f-8f27-373f0802426a",
        "body" : "Done!",
        "createdAt" : "2019-12-13T17:53:35Z",
        "updatedAt" : "2019-12-15T21:34:34Z",
        "lastEditedBy" : "da08428a-7a79-4f6f-8f27-373f0802426a",
        "tags" : [
        ]
      }
    ],
    "commit" : "a634e254c16cac1b8a7351f27fc0c6bf4e355148",
    "line" : 69,
    "diffHunk" : "@@ -1,1 +380,384 @@\tbytes, err := json.Marshal(result)\n\tif err != nil {\n\t\thttp.Error(w, fmt.Sprintf(\"%s. Also unable to serialize output. %v\", result[\"error\"], err), http.StatusInternalServerError)\n\t\treturn\n\t}"
  }
]