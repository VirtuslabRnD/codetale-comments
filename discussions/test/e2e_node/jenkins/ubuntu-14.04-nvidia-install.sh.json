[
  {
    "id" : "c72f467a-9a4a-496a-b05a-6a927bcb8e15",
    "prId" : 45430,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/45430#pullrequestreview-37142771",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1f7dafeb-3630-411c-bfa2-c837cde4508c",
        "parentId" : null,
        "authorId" : "87ab1d19-ad39-40d0-a045-817039414280",
        "body" : "Should we install headers prior to the nvidia setup?",
        "createdAt" : "2017-05-08T19:03:51Z",
        "updatedAt" : "2017-05-13T23:36:09Z",
        "lastEditedBy" : "87ab1d19-ad39-40d0-a045-817039414280",
        "tags" : [
        ]
      },
      {
        "id" : "0b1b4441-55aa-49f5-87cc-28e005fe5f5a",
        "parentId" : "1f7dafeb-3630-411c-bfa2-c837cde4508c",
        "authorId" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "body" : "This is the setup provided by GCE and it works. ",
        "createdAt" : "2017-05-09T20:16:48Z",
        "updatedAt" : "2017-05-13T23:36:09Z",
        "lastEditedBy" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "tags" : [
        ]
      }
    ],
    "commit" : "d1b4dba4409e90b750d340d7389b289294495bf9",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +24,28 @@  apt-get update\n  apt-get install cuda -y\n  apt-get install linux-headers-$(uname -r) -y\nfi\n## Pre-loads kernel modules"
  },
  {
    "id" : "4c1c70c5-1a14-4be3-82b9-9992587bcfe3",
    "prId" : 45430,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/45430#pullrequestreview-37142691",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "eca7ac1b-f355-44cc-ba71-4807caeedc63",
        "parentId" : null,
        "authorId" : "87ab1d19-ad39-40d0-a045-817039414280",
        "body" : "Do we also want the nvidia drivers or should that be through the daemonset?",
        "createdAt" : "2017-05-08T19:05:44Z",
        "updatedAt" : "2017-05-13T23:36:09Z",
        "lastEditedBy" : "87ab1d19-ad39-40d0-a045-817039414280",
        "tags" : [
        ]
      },
      {
        "id" : "27901a4c-6022-4e1a-8f8d-4e08dab14c9a",
        "parentId" : "eca7ac1b-f355-44cc-ba71-4807caeedc63",
        "authorId" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "body" : "This is for Node e2e. It is not possible to run daemonsets in node e2e.",
        "createdAt" : "2017-05-09T20:16:29Z",
        "updatedAt" : "2017-05-13T23:36:09Z",
        "lastEditedBy" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "tags" : [
        ]
      }
    ],
    "commit" : "d1b4dba4409e90b750d340d7389b289294495bf9",
    "line" : 25,
    "diffHunk" : "@@ -1,1 +23,27 @@  dpkg -i ./cuda-repo-ubuntu1404_8.0.61-1_amd64.deb\n  apt-get update\n  apt-get install cuda -y\n  apt-get install linux-headers-$(uname -r) -y\nfi"
  },
  {
    "id" : "a831995f-db26-4a2c-8d01-fb0035ad523b",
    "prId" : 45430,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/45430#pullrequestreview-37426454",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "61e1b286-5e08-426b-9f00-d319c24b2b49",
        "parentId" : null,
        "authorId" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "body" : "This creates the device files too right? Maybe add that to the comment above.",
        "createdAt" : "2017-05-09T22:56:13Z",
        "updatedAt" : "2017-05-13T23:36:09Z",
        "lastEditedBy" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "tags" : [
        ]
      },
      {
        "id" : "3846d7a8-f4a6-4d63-bf47-76abc5d79fcb",
        "parentId" : "61e1b286-5e08-426b-9f00-d319c24b2b49",
        "authorId" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "body" : "The act of loading kernel modules will create device files. This is my understanding.",
        "createdAt" : "2017-05-09T23:17:56Z",
        "updatedAt" : "2017-05-13T23:36:09Z",
        "lastEditedBy" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "tags" : [
        ]
      },
      {
        "id" : "34bcd5aa-f470-4d2a-87d6-aa408861425d",
        "parentId" : "61e1b286-5e08-426b-9f00-d319c24b2b49",
        "authorId" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "body" : "Maybe worth double checking whether this happens as part of `modprobe` or if something else needs to do it out of band (running `nvidia-smi` as root works, but I don't think it's just because it loads the modules).\r\n\r\nSlightly older versions of nvidia's Linux getting-started guides recommend (for systems where applications can't use `nvidia-modprobe` due to setuid restrictions) running (as root at boot) `nvidia-smi` or running a shell script that `modprobe`s each module and then manually does `mknod`. Newer versions of the guides are just recommending the shell script, which makes me wonder why they stopped recommending `nvidia-smi`.\r\nOlder: http://developer.download.nvidia.com/compute/cuda/7_0/Prod/doc/CUDA_Getting_Started_Linux.pdf\r\nNewer: http://developer.download.nvidia.com/compute/cuda/7.5/Prod/docs/sidebar/CUDA_Installation_Guide_Linux.pdf\r\nGrep for `4.4. Device Node Verification` in either of those.\r\n\r\nI know, for example, on my home setup, where I use NixOS, I don't have `nvidia-modprobe` but the nix configuration for the nvidia drivers is set up to create the node for nvidia-uvm: https://github.com/NixOS/nixpkgs/blob/master/nixos/modules/hardware/video/nvidia.nix#L69\r\n\r\nGranted, you've probably already seen all this so if that's the case then no worries. I still think it may be worth noting the device file creation in a comment.",
        "createdAt" : "2017-05-10T14:52:43Z",
        "updatedAt" : "2017-05-13T23:36:09Z",
        "lastEditedBy" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "tags" : [
        ]
      },
      {
        "id" : "68fe51d2-418d-48c0-bb6e-bc06742663d4",
        "parentId" : "61e1b286-5e08-426b-9f00-d319c24b2b49",
        "authorId" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "body" : "The driver version linked here handles device file creation.",
        "createdAt" : "2017-05-10T18:09:59Z",
        "updatedAt" : "2017-05-13T23:36:09Z",
        "lastEditedBy" : "c4b970b3-3b9c-4773-bc9b-f8d005b15fd1",
        "tags" : [
        ]
      },
      {
        "id" : "f9914ec9-3d99-4d4f-9658-a399f58075d2",
        "parentId" : "61e1b286-5e08-426b-9f00-d319c24b2b49",
        "authorId" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "body" : "Ah, ok then.",
        "createdAt" : "2017-05-10T20:56:20Z",
        "updatedAt" : "2017-05-13T23:36:09Z",
        "lastEditedBy" : "881df817-68e6-43dd-b4ea-f0b973f7dc41",
        "tags" : [
        ]
      }
    ],
    "commit" : "d1b4dba4409e90b750d340d7389b289294495bf9",
    "line" : 29,
    "diffHunk" : "@@ -1,1 +27,31 @@fi\n## Pre-loads kernel modules\nnvidia-smi"
  }
]