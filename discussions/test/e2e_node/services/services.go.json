[
  {
    "id" : "f866bcf0-d813-4e0a-96f6-529126ea639b",
    "prId" : 96128,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/96128#pullrequestreview-522672358",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a80d62e9-1ad4-4c6c-8a7e-517cfcac52d4",
        "parentId" : null,
        "authorId" : "4ff6be29-02e8-4f7f-8b4d-a207c13aeecd",
        "body" : "At this point, the Kubelet is already started without a Bearer Token in the configuration for conformance, maybe the token must be generated on ```test/e2e_node/services/services.go``` and passed down the stack.",
        "createdAt" : "2020-11-02T23:44:00Z",
        "updatedAt" : "2020-11-03T18:10:17Z",
        "lastEditedBy" : "4ff6be29-02e8-4f7f-8b4d-a207c13aeecd",
        "tags" : [
        ]
      },
      {
        "id" : "95925271-e4ba-471b-95e9-fdab8b5c4f19",
        "parentId" : "a80d62e9-1ad4-4c6c-8a7e-517cfcac52d4",
        "authorId" : "698f4eb2-501b-44f5-9ff2-a2d82e9ac4f7",
        "body" : "Yes, I think something like this is the case. I am taking a break from this for the moment, and have not started looking at the details. If someone else wants to keep looking for today, I'm happy to let them continue, otherwise I'll start again tomorrow. ",
        "createdAt" : "2020-11-02T23:47:27Z",
        "updatedAt" : "2020-11-03T18:10:17Z",
        "lastEditedBy" : "698f4eb2-501b-44f5-9ff2-a2d82e9ac4f7",
        "tags" : [
        ]
      },
      {
        "id" : "0d00f7e8-54fd-46a5-8afe-2d22998a079b",
        "parentId" : "a80d62e9-1ad4-4c6c-8a7e-517cfcac52d4",
        "authorId" : "9e6ce3ed-e2f7-40ea-b6d7-b1b04fc48f70",
        "body" : "Perhaps I am missing something, I think this is correct. \r\n\r\n> At this point, the Kubelet is already started without a Bearer Token in the configuration for conformance\r\n\r\nkubelet has not been started until line 73. \r\n\r\nThe bearer token would be generated at run time if it is not specified: \r\nhttps://github.com/kubernetes/kubernetes/blob/f0dfa55de5d8e234acd0fe7cd42667ec88703318/test/e2e/framework/test_context.go#L441-L447\r\n",
        "createdAt" : "2020-11-03T05:51:59Z",
        "updatedAt" : "2020-11-03T18:10:17Z",
        "lastEditedBy" : "9e6ce3ed-e2f7-40ea-b6d7-b1b04fc48f70",
        "tags" : [
        ]
      },
      {
        "id" : "85de6ddd-a47a-4cb5-ae6e-5d6d4dc4551e",
        "parentId" : "a80d62e9-1ad4-4c6c-8a7e-517cfcac52d4",
        "authorId" : "4ff6be29-02e8-4f7f-8b4d-a207c13aeecd",
        "body" : "Running remote with the PR, This is the Kubeconfig:\r\n\r\n```\r\n@test-cos-beta-85-13310-1041-1 /tmp/node-e2e-20201103T122457 $ cat kubeconfig\r\napiVersion: v1\r\nkind: Config\r\nusers:\r\n- name: kubelet\r\n  user:\r\n    token: loiXGCHWaBpe9m94\r\nclusters:\r\n- cluster:\r\n    server: https://127.0.0.1:6443\r\n    insecure-skip-tls-verify: true\r\n  name: local\r\ncontexts:\r\n- context:\r\n    cluster: local\r\n    user: kubelet\r\n  name: local-context\r\n```\r\n\r\nThis is the run-services-mode rerun:\r\n```\r\n/usr/local/bin/e2e_node.test --run-services-mode --bearer-token=mjBCSf8Jd_N0FSTb ... \r\n```\r\n\r\nStill breaking on both API server and Kubelet due to different tokens:\r\n\r\n```\r\n# services.log\r\nE1103 12:31:43.827172     103 authentication.go:53] Unable to authenticate the request due to an error: invalid bearer token\r\n\r\n# tests\r\nFailure [156.890 seconds]\r\n[BeforeSuite] BeforeSuite\r\n_output/local/go/src/k8s.io/kubernetes/test/e2e_node/e2e_node_suite_test.go:177\r\n\r\n  Timed out after 120.000s.\r\n  Expected success, but got an error:\r\n      <*errors.errorString | 0xc000926690>: {\r\n          s: \"failed to get node: empty node list: &NodeList{ListMeta:{ 58  <nil>},Items:[]Node{},}\",\r\n      }\r\n      failed to get node: empty node list: &NodeList{ListMeta:{ 58  <nil>},Items:[]Node{},}\r\n\r\n  _output/local/go/src/k8s.io/kubernetes/test/e2e_node/e2e_node_suite_test.go:281\r\n```",
        "createdAt" : "2020-11-03T12:39:52Z",
        "updatedAt" : "2020-11-03T18:10:17Z",
        "lastEditedBy" : "4ff6be29-02e8-4f7f-8b4d-a207c13aeecd",
        "tags" : [
        ]
      },
      {
        "id" : "c7da6655-6e5a-4efc-8652-c32535d48b29",
        "parentId" : "a80d62e9-1ad4-4c6c-8a7e-517cfcac52d4",
        "authorId" : "9e6ce3ed-e2f7-40ea-b6d7-b1b04fc48f70",
        "body" : "hmm I guess this has something to do with how ginkgo run the tests https://github.com/kubernetes/kubernetes/pull/94723#issuecomment-700512458, I would take a deeper look, thanks for pointing it out.",
        "createdAt" : "2020-11-03T13:38:33Z",
        "updatedAt" : "2020-11-03T18:10:17Z",
        "lastEditedBy" : "9e6ce3ed-e2f7-40ea-b6d7-b1b04fc48f70",
        "tags" : [
        ]
      },
      {
        "id" : "33cf90bf-9af8-4f07-a292-1ce9db00f1a1",
        "parentId" : "a80d62e9-1ad4-4c6c-8a7e-517cfcac52d4",
        "authorId" : "698f4eb2-501b-44f5-9ff2-a2d82e9ac4f7",
        "body" : "yes, when started, we're outside of the ginkgo runner.",
        "createdAt" : "2020-11-03T16:30:53Z",
        "updatedAt" : "2020-11-03T18:10:17Z",
        "lastEditedBy" : "698f4eb2-501b-44f5-9ff2-a2d82e9ac4f7",
        "tags" : [
        ]
      }
    ],
    "commit" : "9b8c1dcd193c3612bc018d5826893d4ce6064c7c",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +65,69 @@func (e *E2EServices) Start() error {\n\tvar err error\n\tif e.services, err = e.startInternalServices(); err != nil {\n\t\treturn fmt.Errorf(\"failed to start internal services: %v\", err)\n\t}"
  },
  {
    "id" : "e12b1273-877c-4ceb-94ef-6f1cdcc40f79",
    "prId" : 94723,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/94723#pullrequestreview-522095924",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0baeb61a-c869-4726-bff6-6b9b2f63c448",
        "parentId" : null,
        "authorId" : "698f4eb2-501b-44f5-9ff2-a2d82e9ac4f7",
        "body" : "I think our problem for #95877, we don't even start the services in conformance mode now. ",
        "createdAt" : "2020-11-02T22:48:14Z",
        "updatedAt" : "2020-11-02T22:48:15Z",
        "lastEditedBy" : "698f4eb2-501b-44f5-9ff2-a2d82e9ac4f7",
        "tags" : [
        ]
      },
      {
        "id" : "bdb98269-9e10-4080-8c99-c56b02a01005",
        "parentId" : "0baeb61a-c869-4726-bff6-6b9b2f63c448",
        "authorId" : "26c548e7-f891-4302-8cf8-20a932e416ed",
        "body" : "Perhaps this was moved because we start the kubelet [here in conformance tests?](https://github.com/kubernetes/kubernetes/blob/master/test/e2e_node/remote/node_conformance.go#L176) So I guess we need to separate starting the internal services.",
        "createdAt" : "2020-11-02T22:59:57Z",
        "updatedAt" : "2020-11-02T22:59:57Z",
        "lastEditedBy" : "26c548e7-f891-4302-8cf8-20a932e416ed",
        "tags" : [
        ]
      },
      {
        "id" : "13bef6e8-c67d-4e54-ab36-8382dffecc32",
        "parentId" : "0baeb61a-c869-4726-bff6-6b9b2f63c448",
        "authorId" : "698f4eb2-501b-44f5-9ff2-a2d82e9ac4f7",
        "body" : "Ya, that's why the kubelet start is inside.\r\n\r\nBut there isn't any change to node_conformance to start the services.",
        "createdAt" : "2020-11-02T23:09:14Z",
        "updatedAt" : "2020-11-02T23:09:15Z",
        "lastEditedBy" : "698f4eb2-501b-44f5-9ff2-a2d82e9ac4f7",
        "tags" : [
        ]
      }
    ],
    "commit" : "d321ac52a2513d5416053e179c5dcdf5e0378d0e",
    "line" : 26,
    "diffHunk" : "@@ -1,1 +75,79 @@\t\t}\n\t}\n\treturn nil\n}\n"
  },
  {
    "id" : "1045a19f-ecf2-4558-b469-c14a64056f24",
    "prId" : 35724,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/35724#pullrequestreview-7286386",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6ce261f6-1864-43b9-be7c-50022e5afda6",
        "parentId" : null,
        "authorId" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "body" : "Not blocking this PR, just a nit: it'd be nice to add a link to a github issue to explain the reasons and track when we can re-enable it.\n",
        "createdAt" : "2016-11-04T21:17:59Z",
        "updatedAt" : "2016-11-04T21:17:59Z",
        "lastEditedBy" : "1bd2d65a-7c93-4c22-b408-c7794d037dc5",
        "tags" : [
        ]
      }
    ],
    "commit" : "c76c9c5330d8afc267e2054161355020d92b3bd0",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +213,217 @@\t\t\"--v\", LOG_VERBOSITY_LEVEL, \"--logtostderr\",\n\n\t\t// Temporarily disabled:\n\t\t// \"--experimental-mounter-path\", framework.TestContext.MounterPath,\n\t\t// \"--experimental-mounter-rootfs-path\", framework.TestContext.MounterRootfsPath,"
  },
  {
    "id" : "69445921-68c6-4bff-b942-bb605207f1e8",
    "prId" : 31093,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/31093#pullrequestreview-7516008",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a8210fa0-0656-49a2-83a6-0dd2ce0c1b0b",
        "parentId" : null,
        "authorId" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "body" : "ditto re:flags\n",
        "createdAt" : "2016-11-07T20:02:13Z",
        "updatedAt" : "2016-11-07T23:28:08Z",
        "lastEditedBy" : "0adf587c-aaa2-4e47-be0f-a26d4fde14ac",
        "tags" : [
        ]
      },
      {
        "id" : "c3f54e66-ff18-477d-8091-4a5d00c2a97c",
        "parentId" : "a8210fa0-0656-49a2-83a6-0dd2ce0c1b0b",
        "authorId" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "body" : "ACK\n",
        "createdAt" : "2016-11-07T22:04:44Z",
        "updatedAt" : "2016-11-07T23:28:08Z",
        "lastEditedBy" : "4e418bc8-21fb-4523-80c1-9c751c193126",
        "tags" : [
        ]
      }
    ],
    "commit" : "9345e12bc9dc3a233aa0aa002624f9b78bb7d264",
    "line" : null,
    "diffHunk" : "@@ -1,1 +150,154 @@\t}\n\t// Pass all flags into the child process, so that it will see the same flag set.\n\tstartCmd := exec.Command(testBin, append([]string{\"--run-services-mode\"}, os.Args[1:]...)...)\n\tserver := newServer(\"services\", startCmd, nil, nil, getServicesHealthCheckURLs(), servicesLogFile, e.monitorParent, false)\n\treturn server, server.start()"
  }
]