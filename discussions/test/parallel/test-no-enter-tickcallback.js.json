[
  {
    "id" : "ae221105-a2a0-4e13-b355-ff3c2f87377c",
    "prId" : 10274,
    "prUrl" : "https://github.com/nodejs/node/pull/10274#pullrequestreview-13664110",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "40a71e9e-e0b6-4629-a42e-24e871b3d0e5",
        "parentId" : null,
        "authorId" : "c8ef07ae-30f6-4919-9aa8-bf0160bbd4a0",
        "body" : "Could these conditions be checked by adding a test for the reverse situation? I.e. making sure that if there are ticks pending, the `_tickDomainCallback` is actually executed?",
        "createdAt" : "2016-12-15T14:12:49Z",
        "updatedAt" : "2016-12-21T22:57:09Z",
        "lastEditedBy" : "c8ef07ae-30f6-4919-9aa8-bf0160bbd4a0",
        "tags" : [
        ]
      },
      {
        "id" : "4f10f436-9edb-4a7a-bde8-d953850a306e",
        "parentId" : "40a71e9e-e0b6-4629-a42e-24e871b3d0e5",
        "authorId" : "7490b440-07c7-4433-856f-3720a914a77a",
        "body" : "This seems like a good idea. @trevnorris?",
        "createdAt" : "2016-12-19T18:13:54Z",
        "updatedAt" : "2016-12-21T22:57:09Z",
        "lastEditedBy" : "7490b440-07c7-4433-856f-3720a914a77a",
        "tags" : [
        ]
      },
      {
        "id" : "095c3355-2489-4dc9-931b-fc1be8a14832",
        "parentId" : "40a71e9e-e0b6-4629-a42e-24e871b3d0e5",
        "authorId" : "c8ef07ae-30f6-4919-9aa8-bf0160bbd4a0",
        "body" : "@Fishrock123 In response to my suggestion @trevnorris added the second (nested) `setImmediate` call below (which seems sufficient to me)",
        "createdAt" : "2016-12-19T23:23:01Z",
        "updatedAt" : "2016-12-21T22:57:09Z",
        "lastEditedBy" : "c8ef07ae-30f6-4919-9aa8-bf0160bbd4a0",
        "tags" : [
        ]
      }
    ],
    "commit" : "8f8db142fa2b2699b30b3827f7c71bff07cb1869",
    "line" : 20,
    "diffHunk" : "@@ -1,1 +18,22 @@ *    node::AsyncWrap::MakeCallback(). Otherwise the test will always pass.\n *    Have not found a way to verify that node::MakeCallback() is used.\n */\nprocess._tickDomainCallback = function _tickDomainCallback() {\n  assert.ok(allsGood, '_tickDomainCallback should not have been called');"
  },
  {
    "id" : "1550f9c7-0008-400f-94f0-634df667613b",
    "prId" : 10274,
    "prUrl" : "https://github.com/nodejs/node/pull/10274#pullrequestreview-13435798",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8990e431-7692-4a14-ae59-97802c4216d9",
        "parentId" : null,
        "authorId" : "c8ef07ae-30f6-4919-9aa8-bf0160bbd4a0",
        "body" : "If you think being stricter is okay, we could just wrap the fake `_tickDomainCallback` in `common.mustCall(Â·, 2)` (You can probably judge whether the number of calls is likely to change).",
        "createdAt" : "2016-12-16T00:51:29Z",
        "updatedAt" : "2016-12-21T22:57:09Z",
        "lastEditedBy" : "c8ef07ae-30f6-4919-9aa8-bf0160bbd4a0",
        "tags" : [
        ]
      },
      {
        "id" : "d9d4a8a0-5579-4070-8c0c-669877f21a3c",
        "parentId" : "8990e431-7692-4a14-ae59-97802c4216d9",
        "authorId" : "ec4d48db-e488-47ba-b17d-0da1c3b9df08",
        "body" : "@addaleax Though on my machine it would be `common.mustCall(., 3)`. Because we can't actually process the `nextTickQueue` when overriding `_tickDomainCallback()` we can only guarantee it will be called at least once. I don't feel that being any stricter than that is possible w/o making some shaky assumptions on how the internals work.",
        "createdAt" : "2016-12-16T17:19:40Z",
        "updatedAt" : "2016-12-21T22:57:09Z",
        "lastEditedBy" : "ec4d48db-e488-47ba-b17d-0da1c3b9df08",
        "tags" : [
        ]
      },
      {
        "id" : "784c8190-977c-41fd-8bdd-8a72bd899c6a",
        "parentId" : "8990e431-7692-4a14-ae59-97802c4216d9",
        "authorId" : "ec4d48db-e488-47ba-b17d-0da1c3b9df08",
        "body" : "Likewise, adding `mustCall()` to `process.on('exit'` is pointless since `mustCall` callbacks are checked during `'exit'`.",
        "createdAt" : "2016-12-16T17:21:17Z",
        "updatedAt" : "2016-12-21T22:57:09Z",
        "lastEditedBy" : "ec4d48db-e488-47ba-b17d-0da1c3b9df08",
        "tags" : [
        ]
      },
      {
        "id" : "e3edf8e8-7004-444d-9158-229c1191d445",
        "parentId" : "8990e431-7692-4a14-ae59-97802c4216d9",
        "authorId" : "c8ef07ae-30f6-4919-9aa8-bf0160bbd4a0",
        "body" : "> Though on my machine it would be `common.mustCall(., 3)`\r\n\r\nI think that settles it, thanks for checking!",
        "createdAt" : "2016-12-17T01:00:29Z",
        "updatedAt" : "2016-12-21T22:57:09Z",
        "lastEditedBy" : "c8ef07ae-30f6-4919-9aa8-bf0160bbd4a0",
        "tags" : [
        ]
      }
    ],
    "commit" : "8f8db142fa2b2699b30b3827f7c71bff07cb1869",
    "line" : 10,
    "diffHunk" : "@@ -1,1 +8,12 @@process.on('exit', () => {\n  assert.ok(cntr > 0, '_tickDomainCallback was never called');\n});\n\n/**"
  }
]