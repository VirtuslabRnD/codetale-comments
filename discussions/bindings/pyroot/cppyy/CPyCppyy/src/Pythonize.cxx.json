[
  {
    "id" : "108bbd61-eee2-4c5c-9708-f0eb881da39a",
    "prId" : 7071,
    "prUrl" : "https://github.com/root-project/root/pull/7071#pullrequestreview-575443702",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "69e550fe-a35b-431d-8d98-4992ddef3f99",
        "parentId" : null,
        "authorId" : "3fcf578f-7d83-494c-917c-61c04f4fb016",
        "body" : "Why not adding this as a pythonization in Python via the PyROOT layer? Is this also there in upstream?",
        "createdAt" : "2021-01-21T10:28:12Z",
        "updatedAt" : "2021-01-21T10:30:37Z",
        "lastEditedBy" : "3fcf578f-7d83-494c-917c-61c04f4fb016",
        "tags" : [
        ]
      },
      {
        "id" : "da7d4815-e95a-48b4-b9a2-f892d67fd098",
        "parentId" : "69e550fe-a35b-431d-8d98-4992ddef3f99",
        "authorId" : "4c541c6e-f658-422b-9f5a-7ae0b2a9a1f5",
        "body" : "> Why not adding this as a pythonization in Python via the PyROOT layer? Is this also there in upstream?\r\n\r\nAnswered by the PR description, already seen by @stwunsch !",
        "createdAt" : "2021-01-25T14:23:35Z",
        "updatedAt" : "2021-01-25T14:23:35Z",
        "lastEditedBy" : "4c541c6e-f658-422b-9f5a-7ae0b2a9a1f5",
        "tags" : [
        ]
      }
    ],
    "commit" : "c92cf8e9601fe0a4b37ac046edaf158d9013db40",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +842,846 @@CPPYY_IMPL_STRING_PYTHONIZATION_CMP(std::wstring, StlW)\n\nPy_hash_t StlStringHash(PyObject* self)\n{\n// std::string objects hash to the same values as Python strings to allow"
  },
  {
    "id" : "06045574-fd33-4acf-8fe3-f8cf5588c023",
    "prId" : 7071,
    "prUrl" : "https://github.com/root-project/root/pull/7071#pullrequestreview-575449575",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cf53f942-d9f3-4537-9cc0-bd3af86d11ef",
        "parentId" : null,
        "authorId" : "3fcf578f-7d83-494c-917c-61c04f4fb016",
        "body" : "Does `StlStringGetData` has a reference?",
        "createdAt" : "2021-01-21T10:28:33Z",
        "updatedAt" : "2021-01-21T10:30:37Z",
        "lastEditedBy" : "3fcf578f-7d83-494c-917c-61c04f4fb016",
        "tags" : [
        ]
      },
      {
        "id" : "a0de3c9f-f09e-4c5e-84ca-5a48177d6133",
        "parentId" : "cf53f942-d9f3-4537-9cc0-bd3af86d11ef",
        "authorId" : "4c541c6e-f658-422b-9f5a-7ae0b2a9a1f5",
        "body" : "Looks like it's the caller who needs to decref it, see [this](https://github.com/root-project/root/blob/c92cf8e9601fe0a4b37ac046edaf158d9013db40/bindings/pyroot/cppyy/CPyCppyy/src/Pythonize.cxx#L782-L785).",
        "createdAt" : "2021-01-25T14:29:25Z",
        "updatedAt" : "2021-01-25T14:29:26Z",
        "lastEditedBy" : "4c541c6e-f658-422b-9f5a-7ae0b2a9a1f5",
        "tags" : [
        ]
      }
    ],
    "commit" : "c92cf8e9601fe0a4b37ac046edaf158d9013db40",
    "line" : 8,
    "diffHunk" : "@@ -1,1 +846,850 @@// std::string objects hash to the same values as Python strings to allow\n// matches in dictionaries etc.\n    PyObject* data = StlStringGetData(self);\n    Py_hash_t h = CPyCppyy_PyText_Type.tp_hash(data);\n    Py_DECREF(data);"
  },
  {
    "id" : "10bb7c93-35b5-4811-9556-ab8fa69ddc2b",
    "prId" : 7071,
    "prUrl" : "https://github.com/root-project/root/pull/7071#pullrequestreview-575452196",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "29f7db16-0410-481d-bab5-716be9721626",
        "parentId" : null,
        "authorId" : "3fcf578f-7d83-494c-917c-61c04f4fb016",
        "body" : "Is `tp_hash` taking a reference?",
        "createdAt" : "2021-01-21T10:29:01Z",
        "updatedAt" : "2021-01-21T10:30:37Z",
        "lastEditedBy" : "3fcf578f-7d83-494c-917c-61c04f4fb016",
        "tags" : [
        ]
      },
      {
        "id" : "ba787a0d-961a-4a66-b3d8-39d379b4bebb",
        "parentId" : "29f7db16-0410-481d-bab5-716be9721626",
        "authorId" : "4c541c6e-f658-422b-9f5a-7ae0b2a9a1f5",
        "body" : "No I don't think so, see [this](https://docs.python.org/3/c-api/typeobj.html#c.PyTypeObject.tp_hash). It's just returning the hash of the pyobject.",
        "createdAt" : "2021-01-25T14:32:05Z",
        "updatedAt" : "2021-01-25T14:32:06Z",
        "lastEditedBy" : "4c541c6e-f658-422b-9f5a-7ae0b2a9a1f5",
        "tags" : [
        ]
      }
    ],
    "commit" : "c92cf8e9601fe0a4b37ac046edaf158d9013db40",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +847,851 @@// matches in dictionaries etc.\n    PyObject* data = StlStringGetData(self);\n    Py_hash_t h = CPyCppyy_PyText_Type.tp_hash(data);\n    Py_DECREF(data);\n    return h;"
  },
  {
    "id" : "c29e68ab-f35e-49ba-b297-1aa0ec33bdd0",
    "prId" : 7071,
    "prUrl" : "https://github.com/root-project/root/pull/7071#pullrequestreview-575444126",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3bf78a0d-05f0-4d8e-92c5-44e1507dda50",
        "parentId" : null,
        "authorId" : "3fcf578f-7d83-494c-917c-61c04f4fb016",
        "body" : "We could also implement `__hash__` in Python, or expose it here via the `AddToClass` utility.",
        "createdAt" : "2021-01-21T10:29:51Z",
        "updatedAt" : "2021-01-21T10:30:37Z",
        "lastEditedBy" : "3fcf578f-7d83-494c-917c-61c04f4fb016",
        "tags" : [
        ]
      },
      {
        "id" : "682e3129-ee85-425f-81ae-9fefb501b1b9",
        "parentId" : "3bf78a0d-05f0-4d8e-92c5-44e1507dda50",
        "authorId" : "4c541c6e-f658-422b-9f5a-7ae0b2a9a1f5",
        "body" : "Answered by the PR description, already seen by @stwunsch !",
        "createdAt" : "2021-01-25T14:24:00Z",
        "updatedAt" : "2021-01-25T14:24:00Z",
        "lastEditedBy" : "4c541c6e-f658-422b-9f5a-7ae0b2a9a1f5",
        "tags" : [
        ]
      }
    ],
    "commit" : "c92cf8e9601fe0a4b37ac046edaf158d9013db40",
    "line" : 21,
    "diffHunk" : "@@ -1,1 +1168,1172 @@        Utility::AddToClass(pyclass, \"__eq__\",   (PyCFunction)StlStringIsEqual, METH_O);\n        Utility::AddToClass(pyclass, \"__ne__\",   (PyCFunction)StlStringIsNotEqual, METH_O);\n        ((PyTypeObject*)pyclass)->tp_hash = (hashfunc)StlStringHash;\n    }\n"
  }
]