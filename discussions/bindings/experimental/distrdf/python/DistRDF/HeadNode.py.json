[
  {
    "id" : "c240e78e-d539-45b8-b310-4c32630a8a13",
    "prId" : 8485,
    "prUrl" : "https://github.com/root-project/root/pull/8485#pullrequestreview-689443399",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "43c55bdb-e378-49b8-aebf-ec1f976acbc5",
        "parentId" : null,
        "authorId" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "body" : "here, because of the `self.npartitions = 2` above, we warn in case of `nentries == 1` but I think that is a valid (toy/test) usecase",
        "createdAt" : "2021-06-22T11:55:53Z",
        "updatedAt" : "2021-06-22T12:20:26Z",
        "lastEditedBy" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "tags" : [
        ]
      },
      {
        "id" : "57e51ada-b88e-40f2-a704-5cffb2bd6377",
        "parentId" : "43c55bdb-e378-49b8-aebf-ec1f976acbc5",
        "authorId" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "body" : "(you mentioned [here](https://github.com/root-project/root/pull/8391#discussion_r654544704) that distRDF is also not ok with `nentries == 0`: that case should probably also just work (just run locally and produce a bunch of empty histograms, _maybe_ with a warning) but i'm also ok with leaving that behavior as it is. on the other hand, warning on 1 entry but being ok with 3 is weird)",
        "createdAt" : "2021-06-22T12:25:57Z",
        "updatedAt" : "2021-06-22T12:25:57Z",
        "lastEditedBy" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "tags" : [
        ]
      },
      {
        "id" : "8475d405-a918-46ba-b72a-0f76db8366b8",
        "parentId" : "43c55bdb-e378-49b8-aebf-ec1f976acbc5",
        "authorId" : "82ce2c80-31ff-4f7b-91f0-fff78777d7f9",
        "body" : "This depends on whether we can always guarantee that backends will be able to process the case of `npartitions == 1`. I think it can be done in general, not sure that is for this PR",
        "createdAt" : "2021-06-22T12:32:23Z",
        "updatedAt" : "2021-06-22T12:32:24Z",
        "lastEditedBy" : "82ce2c80-31ff-4f7b-91f0-fff78777d7f9",
        "tags" : [
        ]
      }
    ],
    "commit" : "6110909400f3f0a8c8373984218061a5cd4f4aa7",
    "line" : 131,
    "diffHunk" : "@@ -1,1 +129,133 @@            msg = (\"Number of partitions {0} is greater than number of entries {1} \"\n                   \"in the dataframe. Using {1} partition(s)\".format(self.npartitions, self.nentries))\n            warnings.warn(msg, UserWarning, stacklevel=2)\n            self.npartitions = self.nentries\n        return Node.RangesBuilder(self)._get_balanced_ranges(self.nentries)"
  },
  {
    "id" : "3819a966-b86e-44d6-a598-a1ee4450badc",
    "prId" : 8485,
    "prUrl" : "https://github.com/root-project/root/pull/8485#pullrequestreview-689585261",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8fa0857b-e1f8-45ff-beac-1a0d2784b263",
        "parentId" : null,
        "authorId" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "body" : "as it will be addressed in another PR, please add a TODO/FIXME about not needing both properties _and_ getters",
        "createdAt" : "2021-06-22T11:59:27Z",
        "updatedAt" : "2021-06-22T12:20:05Z",
        "lastEditedBy" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "tags" : [
        ]
      },
      {
        "id" : "c10ebec0-cdec-4f6c-8578-0bb5e5665074",
        "parentId" : "8fa0857b-e1f8-45ff-beac-1a0d2784b263",
        "authorId" : "82ce2c80-31ff-4f7b-91f0-fff78777d7f9",
        "body" : "Done in latest commit",
        "createdAt" : "2021-06-22T14:29:15Z",
        "updatedAt" : "2021-06-22T14:29:16Z",
        "lastEditedBy" : "82ce2c80-31ff-4f7b-91f0-fff78777d7f9",
        "tags" : [
        ]
      }
    ],
    "commit" : "6110909400f3f0a8c8373984218061a5cd4f4aa7",
    "line" : 201,
    "diffHunk" : "@@ -1,1 +199,203 @@    def inputfiles(self):\n        \"\"\"List of input files of the dataset.\"\"\"\n        return self.get_inputfiles()\n\n    # TODO: Decide whether to remove/change the property or the getter"
  },
  {
    "id" : "dc5b3f0b-35d3-4027-95e0-24d320ed2ce5",
    "prId" : 8485,
    "prUrl" : "https://github.com/root-project/root/pull/8485#pullrequestreview-689585096",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "aa2056a5-16f0-4038-81f9-6bc741831279",
        "parentId" : null,
        "authorId" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "body" : "this is super costly to do at every call, please add a TODO/FIXME",
        "createdAt" : "2021-06-22T12:04:28Z",
        "updatedAt" : "2021-06-22T12:20:05Z",
        "lastEditedBy" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "tags" : [
        ]
      },
      {
        "id" : "60ec7407-fd0e-4a1f-92a8-e42b5d987e8a",
        "parentId" : "aa2056a5-16f0-4038-81f9-6bc741831279",
        "authorId" : "82ce2c80-31ff-4f7b-91f0-fff78777d7f9",
        "body" : "Done in latest commit",
        "createdAt" : "2021-06-22T14:29:08Z",
        "updatedAt" : "2021-06-22T14:29:09Z",
        "lastEditedBy" : "82ce2c80-31ff-4f7b-91f0-fff78777d7f9",
        "tags" : [
        ]
      }
    ],
    "commit" : "6110909400f3f0a8c8373984218061a5cd4f4aa7",
    "line" : 248,
    "diffHunk" : "@@ -1,1 +246,250 @@                chain.Add(fname)\n\n            return chain.GetEntries()\n\n    def get_treename(self):"
  },
  {
    "id" : "bfb7ba98-869c-4488-a3d6-820387921543",
    "prId" : 8534,
    "prUrl" : "https://github.com/root-project/root/pull/8534#pullrequestreview-698257594",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0d098793-871e-4a9c-8f1f-167fdb9e715a",
        "parentId" : null,
        "authorId" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "body" : "I still don't think `ROOT.RDataFrame(1)...Histo1D(...).GetValue()` should yield a warning, see discussion in the previous PR. If we can make it work, we should make it work. If it can't work, than it should be a hard error.",
        "createdAt" : "2021-06-24T16:01:31Z",
        "updatedAt" : "2021-06-25T06:47:40Z",
        "lastEditedBy" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "tags" : [
        ]
      },
      {
        "id" : "44dfa91c-95ca-47f9-b184-9e68efff14e5",
        "parentId" : "0d098793-871e-4a9c-8f1f-167fdb9e715a",
        "authorId" : "4c541c6e-f658-422b-9f5a-7ae0b2a9a1f5",
        "body" : "@eguiraud your example would not run the code here, would it? Here it's `TTreeHeadNode`, not `EmptySourceHeadNode`.\r\n\r\nAnd for the TTree case this looks like a scenario where we can go on (and that's why we issue a warning). The requested number of partitions is higher than the real number of clusters, so we warn the user of that fact and we partition based on the number of clusters.",
        "createdAt" : "2021-06-25T14:13:44Z",
        "updatedAt" : "2021-06-25T14:13:45Z",
        "lastEditedBy" : "4c541c6e-f658-422b-9f5a-7ae0b2a9a1f5",
        "tags" : [
        ]
      },
      {
        "id" : "b8cd3895-d5b8-4b57-8e99-07902416578b",
        "parentId" : "0d098793-871e-4a9c-8f1f-167fdb9e715a",
        "authorId" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "body" : "fair enough, instead of `1` in my example put a tree with one cluster. why does that warrant a warning?",
        "createdAt" : "2021-06-25T14:25:05Z",
        "updatedAt" : "2021-06-25T14:25:05Z",
        "lastEditedBy" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "tags" : [
        ]
      },
      {
        "id" : "4426a82e-7305-4874-b97b-3871774275ee",
        "parentId" : "0d098793-871e-4a9c-8f1f-167fdb9e715a",
        "authorId" : "4c541c6e-f658-422b-9f5a-7ae0b2a9a1f5",
        "body" : "If you have a tree with 1 cluster and ask DistRDF to create 2 partitions, DistRDF warns you that 2 > 1 and that it'll just use 1 partition, and then it goes on with running your app. What you are saying is that you'd prefer to fail if the partitioning requirements of the user cannot be met?",
        "createdAt" : "2021-06-25T15:15:01Z",
        "updatedAt" : "2021-06-25T15:15:01Z",
        "lastEditedBy" : "4c541c6e-f658-422b-9f5a-7ae0b2a9a1f5",
        "tags" : [
        ]
      },
      {
        "id" : "e866d16a-2437-4d18-84cb-6a93e265be9f",
        "parentId" : "0d098793-871e-4a9c-8f1f-167fdb9e715a",
        "authorId" : "82ce2c80-31ff-4f7b-91f0-fff78777d7f9",
        "body" : "I think Enrico's point is more towards the default amount of partitions being set to `2`. Also that could be changed to 1 or `None` and we could just ask the user for the partitions. But this change first needs a more robust reducer that would smartly become a no-op in case of only 1 partition",
        "createdAt" : "2021-07-02T09:58:52Z",
        "updatedAt" : "2021-07-02T09:58:52Z",
        "lastEditedBy" : "82ce2c80-31ff-4f7b-91f0-fff78777d7f9",
        "tags" : [
        ]
      },
      {
        "id" : "984f2243-8d83-4649-a339-b99aa86ef7ef",
        "parentId" : "0d098793-871e-4a9c-8f1f-167fdb9e715a",
        "authorId" : "82ce2c80-31ff-4f7b-91f0-fff78777d7f9",
        "body" : "I have added a TODO here as well",
        "createdAt" : "2021-07-02T13:22:37Z",
        "updatedAt" : "2021-07-02T13:22:38Z",
        "lastEditedBy" : "82ce2c80-31ff-4f7b-91f0-fff78777d7f9",
        "tags" : [
        ]
      },
      {
        "id" : "0c2cace6-0097-4e40-920f-1d052cf8dd33",
        "parentId" : "0d098793-871e-4a9c-8f1f-167fdb9e715a",
        "authorId" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "body" : "Sorry I missed Enric's last reply, it's totally fair to warn users if _they_ specified they want N partitions, but not if they didn't specify anything",
        "createdAt" : "2021-07-02T14:42:59Z",
        "updatedAt" : "2021-07-02T14:42:59Z",
        "lastEditedBy" : "f2c15ca6-f995-45d3-a26d-40d002e52d07",
        "tags" : [
        ]
      }
    ],
    "commit" : "303929c7256f90e3c2ecd9ffd7974e47845168c6",
    "line" : 45,
    "diffHunk" : "@@ -1,1 +408,412 @@            msg = (\"Number of partitions is greater than number of clusters \"\n                   \"in the dataset. Using {} partition(s)\".format(numclusters))\n            warnings.warn(msg, UserWarning, stacklevel=2)\n            self.npartitions = numclusters\n"
  },
  {
    "id" : "d1de518a-2d95-49ee-ae4e-6feed1aed949",
    "prId" : 8605,
    "prUrl" : "https://github.com/root-project/root/pull/8605#pullrequestreview-699286154",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8e22e45d-698a-473f-af70-6e3be724f983",
        "parentId" : null,
        "authorId" : "4c541c6e-f658-422b-9f5a-7ae0b2a9a1f5",
        "body" : "Nice that we get rid of all that clutter...!",
        "createdAt" : "2021-07-05T15:32:20Z",
        "updatedAt" : "2021-07-05T15:32:20Z",
        "lastEditedBy" : "4c541c6e-f658-422b-9f5a-7ae0b2a9a1f5",
        "tags" : [
        ]
      }
    ],
    "commit" : "8e871da9ace6af0e5647c116f0e8371ce0e35dcd",
    "line" : 117,
    "diffHunk" : "@@ -1,1 +256,260 @@        if isinstance(self.args[0], ROOT.TTree):\n            # Extract file names from a given TTree or TChain\n            filenames = ROOT.Internal.TreeUtils.GetFileNamesFromTree(self.args[0])\n            return [str(filename) for filename in filenames]\n"
  }
]