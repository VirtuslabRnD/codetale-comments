[
  {
    "id" : "d98785e2-9941-4915-8b85-c28ce9c05e0a",
    "prId" : 7875,
    "prUrl" : "https://github.com/redis/redis/pull/7875#pullrequestreview-500346830",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d23cf9f5-fc49-46a4-80d1-c1f7f11e5be0",
        "parentId" : null,
        "authorId" : "b35f6f04-eae9-4f88-8265-08b19050f11b",
        "body" : "@oranagra Is there a particular reason `zfree_usable()` can't simply return `usable` as a return value? Might be simpler and even more efficient.",
        "createdAt" : "2020-10-01T13:17:44Z",
        "updatedAt" : "2020-10-01T13:19:04Z",
        "lastEditedBy" : "b35f6f04-eae9-4f88-8265-08b19050f11b",
        "tags" : [
        ]
      },
      {
        "id" : "b20d0dc2-d9c7-4e59-a0c6-0b18e9e862ba",
        "parentId" : "d23cf9f5-fc49-46a4-80d1-c1f7f11e5be0",
        "authorId" : "02e243fa-aeed-4b15-9e9e-405ca1702d7e",
        "body" : "i think it's more consistent with zmalloc_usable, etc.\r\nnot sure why it's more efficient, certainly not measurable ",
        "createdAt" : "2020-10-01T13:29:13Z",
        "updatedAt" : "2020-10-01T13:29:13Z",
        "lastEditedBy" : "02e243fa-aeed-4b15-9e9e-405ca1702d7e",
        "tags" : [
        ]
      }
    ],
    "commit" : "251a80b57258b58d1923e6e752cbb6c1e717657d",
    "line" : 100,
    "diffHunk" : "@@ -1,1 +266,270 @@\n/* Similar to zfree, '*usable' is set to the usable size being freed. */\nvoid zfree_usable(void *ptr, size_t *usable) {\n#ifndef HAVE_MALLOC_SIZE\n    void *realptr;"
  },
  {
    "id" : "0589572b-f317-4be8-9876-fa72906f59d1",
    "prId" : 7875,
    "prUrl" : "https://github.com/redis/redis/pull/7875#pullrequestreview-500347976",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0fcbba89-46a0-4ac4-80ac-6ebafe90e8b0",
        "parentId" : null,
        "authorId" : "b35f6f04-eae9-4f88-8265-08b19050f11b",
        "body" : "@oranagra Are there real systems we know of that still don't have malloc_size? Not even sure there's good testing coverage for this.",
        "createdAt" : "2020-10-01T13:18:29Z",
        "updatedAt" : "2020-10-01T13:19:04Z",
        "lastEditedBy" : "b35f6f04-eae9-4f88-8265-08b19050f11b",
        "tags" : [
        ]
      },
      {
        "id" : "7efe6ec8-dd0f-4e4e-9a69-e3b4914dbc5e",
        "parentId" : "0fcbba89-46a0-4ac4-80ac-6ebafe90e8b0",
        "authorId" : "02e243fa-aeed-4b15-9e9e-405ca1702d7e",
        "body" : "our valgrind build used to use it but i think i fixed it a while back.\r\ni think it's not covered by our CI.",
        "createdAt" : "2020-10-01T13:30:22Z",
        "updatedAt" : "2020-10-01T13:30:22Z",
        "lastEditedBy" : "02e243fa-aeed-4b15-9e9e-405ca1702d7e",
        "tags" : [
        ]
      }
    ],
    "commit" : "251a80b57258b58d1923e6e752cbb6c1e717657d",
    "line" : 62,
    "diffHunk" : "@@ -1,1 +209,213 @@    }\n    if (ptr == NULL) return zmalloc_usable(size, usable);\n#ifdef HAVE_MALLOC_SIZE\n    oldsize = zmalloc_size(ptr);\n    newptr = realloc(ptr,size);"
  },
  {
    "id" : "beafd241-9b98-4bef-8e3a-5ea427d7af88",
    "prId" : 8974,
    "prUrl" : "https://github.com/redis/redis/pull/8974#pullrequestreview-719868410",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4101be63-716c-4ae6-8dd9-39ba36127e82",
        "parentId" : null,
        "authorId" : "b35f6f04-eae9-4f88-8265-08b19050f11b",
        "body" : "Is there a particular reason for moving these private headers first? Over time it tends to be trouble, so if it must be done I think we should have a single designated `config.h` for that.",
        "createdAt" : "2021-08-02T06:15:59Z",
        "updatedAt" : "2021-08-02T06:52:14Z",
        "lastEditedBy" : "b35f6f04-eae9-4f88-8265-08b19050f11b",
        "tags" : [
        ]
      },
      {
        "id" : "655a1448-3241-4d31-9a10-64b62cc9b74a",
        "parentId" : "4101be63-716c-4ae6-8dd9-39ba36127e82",
        "authorId" : "02e243fa-aeed-4b15-9e9e-405ca1702d7e",
        "body" : "we copied that block from `server.h` since we needed this part of `fmacros.h`\r\n```c\r\n#if defined(__linux__)\r\n#define _GNU_SOURCE\r\n#define _DEFAULT_SOURCE\r\n#endif\r\n```\r\nwithout it `madvise` didn't wanna play ball...\r\n\r\nin server.h this pile of compatibility headers are included first, so we thought we can copy that entire block here too.\r\n\r\n@yossigo what do you suggest? moving `fmacros.h` and `solarisfixes.h` to be part of `config.h`?",
        "createdAt" : "2021-08-02T07:20:27Z",
        "updatedAt" : "2021-08-02T07:20:27Z",
        "lastEditedBy" : "02e243fa-aeed-4b15-9e9e-405ca1702d7e",
        "tags" : [
        ]
      }
    ],
    "commit" : "9960985886855c05e027ab9ebf3cb312bf739b18",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +31,35 @@#include \"fmacros.h\"\n#include \"config.h\"\n#include \"solarisfixes.h\"\n\n#include <stdio.h>"
  },
  {
    "id" : "c6f4d76e-48ed-4099-bc50-f84e22077f5e",
    "prId" : 8974,
    "prUrl" : "https://github.com/redis/redis/pull/8974#pullrequestreview-719868410",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f34e3b3f-e6e2-4fb0-9d7b-74a4e2241a02",
        "parentId" : null,
        "authorId" : "b35f6f04-eae9-4f88-8265-08b19050f11b",
        "body" : "Is there a particular reason for moving these private headers first? Over time it tends to be trouble, so if it must be done I think we should have a single designated `config.h` for that.",
        "createdAt" : "2021-08-02T06:15:59Z",
        "updatedAt" : "2021-08-02T06:52:14Z",
        "lastEditedBy" : "b35f6f04-eae9-4f88-8265-08b19050f11b",
        "tags" : [
        ]
      },
      {
        "id" : "00a128b8-ebcd-40a9-98a9-0980a50768ea",
        "parentId" : "f34e3b3f-e6e2-4fb0-9d7b-74a4e2241a02",
        "authorId" : "02e243fa-aeed-4b15-9e9e-405ca1702d7e",
        "body" : "we copied that block from `server.h` since we needed this part of `fmacros.h`\r\n```c\r\n#if defined(__linux__)\r\n#define _GNU_SOURCE\r\n#define _DEFAULT_SOURCE\r\n#endif\r\n```\r\nwithout it `madvise` didn't wanna play ball...\r\n\r\nin server.h this pile of compatibility headers are included first, so we thought we can copy that entire block here too.\r\n\r\n@yossigo what do you suggest? moving `fmacros.h` and `solarisfixes.h` to be part of `config.h`?",
        "createdAt" : "2021-08-02T07:20:27Z",
        "updatedAt" : "2021-08-02T07:20:27Z",
        "lastEditedBy" : "02e243fa-aeed-4b15-9e9e-405ca1702d7e",
        "tags" : [
        ]
      }
    ],
    "commit" : "9960985886855c05e027ab9ebf3cb312bf739b18",
    "line" : 6,
    "diffHunk" : "@@ -1,1 +31,35 @@#include \"fmacros.h\"\n#include \"config.h\"\n#include \"solarisfixes.h\"\n\n#include <stdio.h>"
  }
]