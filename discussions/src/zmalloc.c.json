[
  {
    "id" : "d98785e2-9941-4915-8b85-c28ce9c05e0a",
    "prId" : 7875,
    "prUrl" : "https://github.com/redis/redis/pull/7875#pullrequestreview-500346830",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d23cf9f5-fc49-46a4-80d1-c1f7f11e5be0",
        "parentId" : null,
        "authorId" : "b35f6f04-eae9-4f88-8265-08b19050f11b",
        "body" : "@oranagra Is there a particular reason `zfree_usable()` can't simply return `usable` as a return value? Might be simpler and even more efficient.",
        "createdAt" : "2020-10-01T13:17:44Z",
        "updatedAt" : "2020-10-01T13:19:04Z",
        "lastEditedBy" : "b35f6f04-eae9-4f88-8265-08b19050f11b",
        "tags" : [
        ]
      },
      {
        "id" : "b20d0dc2-d9c7-4e59-a0c6-0b18e9e862ba",
        "parentId" : "d23cf9f5-fc49-46a4-80d1-c1f7f11e5be0",
        "authorId" : "02e243fa-aeed-4b15-9e9e-405ca1702d7e",
        "body" : "i think it's more consistent with zmalloc_usable, etc.\r\nnot sure why it's more efficient, certainly not measurable ",
        "createdAt" : "2020-10-01T13:29:13Z",
        "updatedAt" : "2020-10-01T13:29:13Z",
        "lastEditedBy" : "02e243fa-aeed-4b15-9e9e-405ca1702d7e",
        "tags" : [
        ]
      }
    ],
    "commit" : "251a80b57258b58d1923e6e752cbb6c1e717657d",
    "line" : 100,
    "diffHunk" : "@@ -1,1 +266,270 @@\n/* Similar to zfree, '*usable' is set to the usable size being freed. */\nvoid zfree_usable(void *ptr, size_t *usable) {\n#ifndef HAVE_MALLOC_SIZE\n    void *realptr;"
  },
  {
    "id" : "0589572b-f317-4be8-9876-fa72906f59d1",
    "prId" : 7875,
    "prUrl" : "https://github.com/redis/redis/pull/7875#pullrequestreview-500347976",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0fcbba89-46a0-4ac4-80ac-6ebafe90e8b0",
        "parentId" : null,
        "authorId" : "b35f6f04-eae9-4f88-8265-08b19050f11b",
        "body" : "@oranagra Are there real systems we know of that still don't have malloc_size? Not even sure there's good testing coverage for this.",
        "createdAt" : "2020-10-01T13:18:29Z",
        "updatedAt" : "2020-10-01T13:19:04Z",
        "lastEditedBy" : "b35f6f04-eae9-4f88-8265-08b19050f11b",
        "tags" : [
        ]
      },
      {
        "id" : "7efe6ec8-dd0f-4e4e-9a69-e3b4914dbc5e",
        "parentId" : "0fcbba89-46a0-4ac4-80ac-6ebafe90e8b0",
        "authorId" : "02e243fa-aeed-4b15-9e9e-405ca1702d7e",
        "body" : "our valgrind build used to use it but i think i fixed it a while back.\r\ni think it's not covered by our CI.",
        "createdAt" : "2020-10-01T13:30:22Z",
        "updatedAt" : "2020-10-01T13:30:22Z",
        "lastEditedBy" : "02e243fa-aeed-4b15-9e9e-405ca1702d7e",
        "tags" : [
        ]
      }
    ],
    "commit" : "251a80b57258b58d1923e6e752cbb6c1e717657d",
    "line" : 62,
    "diffHunk" : "@@ -1,1 +209,213 @@    }\n    if (ptr == NULL) return zmalloc_usable(size, usable);\n#ifdef HAVE_MALLOC_SIZE\n    oldsize = zmalloc_size(ptr);\n    newptr = realloc(ptr,size);"
  }
]