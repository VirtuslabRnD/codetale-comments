[
  {
    "id" : "23c4a3d0-500f-4e8e-b01f-fcfbba9f7412",
    "prId" : 40055,
    "prUrl" : "https://github.com/microsoft/TypeScript/pull/40055#pullrequestreview-467860369",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fca78f23-f856-449b-b051-5e57b2a5cad2",
        "parentId" : null,
        "authorId" : "6fbbaeca-aadd-4933-9a71-76c048cf9ccb",
        "body" : "Implementation note: this could alternatively be done without a full cache, using just a single MRU fileName/sourceIndex. That does however require that the second call to `setSourceMapSource` in `emitSourcePos` has to take an additional parameter to not even call `addSource` (which is safe as reverting to the prior source map source is known to have been added) as otherwise 2 MRU items are needed:\r\n\r\nhttps://github.com/microsoft/TypeScript/blob/a7d801176ca6cdfe45162c7d7cc80b2fdd144240/src/compiler/emitter.ts#L5290-L5300\r\n\r\nThis alternative would also mitigate the issue (I verified that) as it's typical for a single external source map source to be applied on nodes without interference from nodes that have a different external source map source, so a single MRU cache entry is sufficient.",
        "createdAt" : "2020-08-14T20:35:26Z",
        "updatedAt" : "2020-08-15T17:14:07Z",
        "lastEditedBy" : "6fbbaeca-aadd-4933-9a71-76c048cf9ccb",
        "tags" : [
        ]
      }
    ],
    "commit" : "4b4a156d5e31976e1241ff4fc61965f2f1965265",
    "line" : 12,
    "diffHunk" : "@@ -1,1 +53,57 @@        function addSource(fileName: string) {\n            enter();\n            const sourceIndexByFileName = fileNameToSourceIndexMap.get(fileName);\n            if (sourceIndexByFileName !== undefined) {\n                return sourceIndexByFileName;"
  },
  {
    "id" : "9afc69f2-d19e-4446-b96b-bd1833c07087",
    "prId" : 28886,
    "prUrl" : "https://github.com/microsoft/TypeScript/pull/28886#pullrequestreview-182515122",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "dbdb0cbe-442d-4932-b833-14554674b796",
        "parentId" : null,
        "authorId" : "f7813195-22a2-4200-9f53-7aadb83a2cc9",
        "body" : "I'd comment that this is only true so long as we continue to pre-group all mappings by source index - otherwise we'd need to sort by both.",
        "createdAt" : "2018-12-07T00:54:28Z",
        "updatedAt" : "2018-12-12T18:48:50Z",
        "lastEditedBy" : "f7813195-22a2-4200-9f53-7aadb83a2cc9",
        "tags" : [
        ]
      }
    ],
    "commit" : "c156c9377a410ce50457ed8f5243bfbe063445d7",
    "line" : 37,
    "diffHunk" : "@@ -1,1 +586,590 @@        // Compares sourcePosition without comparing sourceIndex\n        // since the mappings are grouped by sourceIndex\n        Debug.assert(left.sourceIndex === right.sourceIndex);\n        return compareValues(left.sourcePosition, right.sourcePosition);\n    }"
  },
  {
    "id" : "2cdd469b-4d82-47b2-9a3c-8e3c2e207005",
    "prId" : 24917,
    "prUrl" : "https://github.com/microsoft/TypeScript/pull/24917#pullrequestreview-128194617",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5a9b405f-7957-4ea3-9d88-0b5a82a20190",
        "parentId" : null,
        "authorId" : "1eec7f68-de25-4f88-827c-00769c75a2d7",
        "body" : "Since we aren't doing indexed maps any more, we should probably remove references to names like \"Section\", etc.",
        "createdAt" : "2018-06-13T00:35:55Z",
        "updatedAt" : "2018-06-14T01:33:03Z",
        "lastEditedBy" : "1eec7f68-de25-4f88-827c-00769c75a2d7",
        "tags" : [
        ]
      }
    ],
    "commit" : "fa31e134745a5a72a386ebf4db9d846b73c573a2",
    "line" : 199,
    "diffHunk" : "@@ -1,1 +550,554 @@            encodeLastRecordedSourceMapSpan();\n\n            return JSON.stringify(captureSection());\n        }\n"
  },
  {
    "id" : "7366026e-1cbc-490b-a01c-c9c83e653f63",
    "prId" : 24704,
    "prUrl" : "https://github.com/microsoft/TypeScript/pull/24704#pullrequestreview-126994803",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "f059e10f-231a-4fdc-b714-1b23a82321a5",
        "parentId" : null,
        "authorId" : "1eec7f68-de25-4f88-827c-00769c75a2d7",
        "body" : "Would it make sense for us to handle this kind of validation early on when we get the source maps from project references? Instead of storing `sourceMapText` we could have already validated and parsed the source map.",
        "createdAt" : "2018-06-07T23:53:02Z",
        "updatedAt" : "2018-06-07T23:56:54Z",
        "lastEditedBy" : "1eec7f68-de25-4f88-827c-00769c75a2d7",
        "tags" : [
        ]
      }
    ],
    "commit" : "eb1973a4fd129eb7deb5aad5a4f376bba396c21b",
    "line" : 137,
    "diffHunk" : "@@ -1,1 +428,432 @@                            offset,\n                            // This is just passes the buck on sourcemaps we don't really understand, instead of issuing an error (which would be difficult this late)\n                            url: `data:application/json;charset=utf-8;base64,${base64encode(sys, text)}`\n                        }\n                    );"
  },
  {
    "id" : "7686387a-73ae-43f5-ba2d-7a65d0896bbe",
    "prId" : 11165,
    "prUrl" : "https://github.com/microsoft/TypeScript/pull/11165#pullrequestreview-2049383",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4f9be6a6-61cc-4e65-987c-1228f29cc199",
        "parentId" : null,
        "authorId" : "26699569-4335-45b0-a775-bfd0a044730b",
        "body" : "`Emits a token of a node ...` instead of `Emits a token of a node node ...`\n",
        "createdAt" : "2016-09-28T23:29:16Z",
        "updatedAt" : "2016-09-30T00:32:22Z",
        "lastEditedBy" : "26699569-4335-45b0-a775-bfd0a044730b",
        "tags" : [
        ]
      }
    ],
    "commit" : "e151401333ca0d6aac1a3647ceb8cf5f552afb0a",
    "line" : 112,
    "diffHunk" : "@@ -1,1 +46,50 @@\n        /**\n         * Emits a token of a node node with possible leading and trailing source maps.\n         *\n         * @param node The node containing the token."
  },
  {
    "id" : "617f6c4d-d018-4fff-87b1-bcc4cc5f455a",
    "prId" : 8598,
    "prUrl" : null,
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "4f2f1c0f-71cb-44da-9f7a-7a6469b13ee8",
        "parentId" : null,
        "authorId" : "2b0d3f17-3eae-4173-ad8a-73c9440bf608",
        "body" : "has this already shipped? Can you just get rid of it?\n",
        "createdAt" : "2016-05-18T22:48:08Z",
        "updatedAt" : "2016-05-19T22:39:52Z",
        "lastEditedBy" : "2b0d3f17-3eae-4173-ad8a-73c9440bf608",
        "tags" : [
        ]
      },
      {
        "id" : "735e43b7-bbe0-4703-9114-e637cd739de3",
        "parentId" : "4f2f1c0f-71cb-44da-9f7a-7a6469b13ee8",
        "authorId" : "1eec7f68-de25-4f88-827c-00769c75a2d7",
        "body" : "It is used by the old emitter, and will be removed when the old emitter is removed.\n",
        "createdAt" : "2016-05-19T22:38:02Z",
        "updatedAt" : "2016-05-19T22:39:52Z",
        "lastEditedBy" : "1eec7f68-de25-4f88-827c-00769c75a2d7",
        "tags" : [
        ]
      }
    ],
    "commit" : "150cecbaf37b959ead6ac1aa3b628d2385e02418",
    "line" : 513,
    "diffHunk" : "@@ -1,1 +675,679 @@\n\n        // @deprecated\n        function changeEmitSourcePos() {\n            Debug.assert(!modifyLastSourcePos);"
  }
]