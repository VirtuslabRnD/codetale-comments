[
  {
    "id" : "2d0f60a1-7586-4170-a2ed-ce09a1b14d08",
    "prId" : 779,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/779#pullrequestreview-188246966",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6bdbbb3c-6dc4-4457-aefb-6d7481dfb0b0",
        "parentId" : null,
        "authorId" : "6e958077-8d60-494d-8079-e77af3a2951f",
        "body" : "There are a couple instances of `os.path` in this file",
        "createdAt" : "2018-12-28T00:19:32Z",
        "updatedAt" : "2019-01-05T05:04:04Z",
        "lastEditedBy" : "6e958077-8d60-494d-8079-e77af3a2951f",
        "tags" : [
        ]
      },
      {
        "id" : "f0ec4114-7c35-4f52-9472-e3d3ab0401fc",
        "parentId" : "6bdbbb3c-6dc4-4457-aefb-6d7481dfb0b0",
        "authorId" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "body" : "Thanks! Replaced them with `get_path_module()`",
        "createdAt" : "2018-12-28T08:56:06Z",
        "updatedAt" : "2019-01-05T05:04:04Z",
        "lastEditedBy" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "tags" : [
        ]
      }
    ],
    "commit" : "4f2f339e6dc13da1c62eafb5f9da9da4dc4db1c7",
    "line" : 18,
    "diffHunk" : "@@ -1,1 +58,62 @@\n    def get_path_module(self):\n        import posixpath\n        return posixpath\n"
  },
  {
    "id" : "87b077c1-97bc-4aa9-84bc-8d63a89bdb35",
    "prId" : 769,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/769#pullrequestreview-187246261",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "ec492e19-5b67-45be-a1a1-64ff782a8638",
        "parentId" : null,
        "authorId" : "585a7aa0-77e3-46ce-95a0-4a8de00c6c4a",
        "body" : "`posixpath.relpath` wrangling is common for both `if ... else` paths rite? Can that be shared? You can take care of that later one... won't block you",
        "createdAt" : "2018-12-21T01:26:19Z",
        "updatedAt" : "2018-12-21T18:57:14Z",
        "lastEditedBy" : "585a7aa0-77e3-46ce-95a0-4a8de00c6c4a",
        "tags" : [
        ]
      },
      {
        "id" : "480e8b26-218f-431b-8cc6-ee9fb3e592ba",
        "parentId" : "ec492e19-5b67-45be-a1a1-64ff782a8638",
        "authorId" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "body" : "Yep! Good catch - thanks!",
        "createdAt" : "2018-12-21T01:30:03Z",
        "updatedAt" : "2018-12-21T18:57:14Z",
        "lastEditedBy" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "tags" : [
        ]
      }
    ],
    "commit" : "68f36f084c71936c71fa462b5e91a6b20b990e3b",
    "line" : 13,
    "diffHunk" : "@@ -1,1 +102,106 @@                    # Separator needs to be fixed as '/' because of azure blob storage pattern.\n                    # Do not change to os.relpath because in Windows system path separator is '\\'\n                    subdir = posixpath.relpath(path=r.name, start=artifact_path)\n                    if subdir.endswith(\"/\"):\n                        subdir = subdir[:-1]"
  },
  {
    "id" : "e418e225-d195-4729-93d5-923eb0649a9a",
    "prId" : 206,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/206#pullrequestreview-141759596",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3de2053d-f765-42e0-9016-8e45e7f4e8c6",
        "parentId" : null,
        "authorId" : "6e958077-8d60-494d-8079-e77af3a2951f",
        "body" : "I noticed that if this is misconfigured by virtue of not providing an account key, we get this error:\r\n\r\n```\r\nazure.common.AzureMissingResourceHttpError: The specified resource does not exist.\r\n<?xml version=\"1.0\" encoding=\"utf-8\"?><Error><Code>ResourceNotFound</Code><Message>The specified resource does not exist.\r\n```\r\n\r\nDo you think it would be useful to catch AzureMissingResourceHttpError and potentially provide a better error, or perhaos to require AZURE_STORAGE_ACCESS_KEY be provided (or at least warn if it's not present)?",
        "createdAt" : "2018-07-30T23:46:32Z",
        "updatedAt" : "2018-07-31T18:23:52Z",
        "lastEditedBy" : "6e958077-8d60-494d-8079-e77af3a2951f",
        "tags" : [
        ]
      },
      {
        "id" : "3b041504-4b9a-43e6-b8c9-c0cdd9c515b3",
        "parentId" : "3de2053d-f765-42e0-9016-8e45e7f4e8c6",
        "authorId" : "b2c1789f-eaaf-4ce0-9ad7-695c9467c3cc",
        "body" : "Makes sense. Actually I'll also add support for the AZURE_STORAGE_CONNECTION_STRING environment variable since this is another recommended way to connect.",
        "createdAt" : "2018-07-30T23:57:29Z",
        "updatedAt" : "2018-07-31T18:23:52Z",
        "lastEditedBy" : "b2c1789f-eaaf-4ce0-9ad7-695c9467c3cc",
        "tags" : [
        ]
      }
    ],
    "commit" : "367ad263c26866d1aa57e9382347d80effbe9a02",
    "line" : 65,
    "diffHunk" : "@@ -1,1 +63,67 @@            dest_path = build_path(dest_path, artifact_path)\n        dest_path = build_path(dest_path, os.path.basename(local_file))\n        self.client.create_blob_from_path(container, dest_path, local_file)\n\n    def log_artifacts(self, local_dir, artifact_path=None):"
  },
  {
    "id" : "fe7a9764-973e-45cf-9f89-40d53e685c3e",
    "prId" : 206,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/206#pullrequestreview-141767324",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "0b15dfed-cd96-424e-a1a9-22eb020fa745",
        "parentId" : null,
        "authorId" : "6e958077-8d60-494d-8079-e77af3a2951f",
        "body" : "Btw, the Hadoop FS scheme is just [wasb://](https://hadoop.apache.org/docs/current/hadoop-azure/index.html). We may want to use that scheme instead.",
        "createdAt" : "2018-07-30T23:48:32Z",
        "updatedAt" : "2018-07-31T18:23:52Z",
        "lastEditedBy" : "6e958077-8d60-494d-8079-e77af3a2951f",
        "tags" : [
        ]
      },
      {
        "id" : "54bcd700-f973-4d33-966c-1c06a5bb33bf",
        "parentId" : "0b15dfed-cd96-424e-a1a9-22eb020fa745",
        "authorId" : "b2c1789f-eaaf-4ce0-9ad7-695c9467c3cc",
        "body" : "They also have wasbs:// for a TLS-secured connection, and recommend that by default: https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-hadoop-use-blob-storage#address-files-in-azure-storage. We actually also recommend that in the Azure DB docs.",
        "createdAt" : "2018-07-30T23:53:17Z",
        "updatedAt" : "2018-07-31T18:23:52Z",
        "lastEditedBy" : "b2c1789f-eaaf-4ce0-9ad7-695c9467c3cc",
        "tags" : [
        ]
      },
      {
        "id" : "61a56681-bf91-443b-8cf4-d8d3628f691f",
        "parentId" : "0b15dfed-cd96-424e-a1a9-22eb020fa745",
        "authorId" : "6e958077-8d60-494d-8079-e77af3a2951f",
        "body" : "Wow, did not realize there is an \"unencrypted\" endpoint. Sounds good.",
        "createdAt" : "2018-07-31T00:46:36Z",
        "updatedAt" : "2018-07-31T18:23:52Z",
        "lastEditedBy" : "6e958077-8d60-494d-8079-e77af3a2951f",
        "tags" : [
        ]
      }
    ],
    "commit" : "367ad263c26866d1aa57e9382347d80effbe9a02",
    "line" : 16,
    "diffHunk" : "@@ -1,1 +14,18 @@\n    This repository is used with URIs of the form\n    ``wasbs://<container-name>@<ystorage-account-name>.blob.core.windows.net/<path>``,\n    following the same URI scheme as Hadoop on Azure blob storage. It requires that your Azure\n    storage access key be available in the environment variable ``AZURE_STORAGE_ACCESS_KEY``."
  },
  {
    "id" : "f7ce3a30-311b-40f4-a036-697f92d4a3c7",
    "prId" : 206,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/206#pullrequestreview-141777049",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "518575c8-345c-4c1c-bc77-7379acd178a3",
        "parentId" : null,
        "authorId" : "6e958077-8d60-494d-8079-e77af3a2951f",
        "body" : "If it doesn't end with a `/`, we just ignore it?",
        "createdAt" : "2018-07-30T23:55:59Z",
        "updatedAt" : "2018-07-31T18:23:52Z",
        "lastEditedBy" : "6e958077-8d60-494d-8079-e77af3a2951f",
        "tags" : [
        ]
      },
      {
        "id" : "5ec8d822-0141-4f97-b46e-30be7b1275f2",
        "parentId" : "518575c8-345c-4c1c-bc77-7379acd178a3",
        "authorId" : "b2c1789f-eaaf-4ce0-9ad7-695c9467c3cc",
        "body" : "This is to check whether it starts with /. The path can also be the empty string if you just wrote wasbs://whatever@whatever.blob.core.windows.net, and in that case we still want to use the whole bucket. We join paths with os.path.join so we should handle a trailing slash correctly.",
        "createdAt" : "2018-07-31T01:52:25Z",
        "updatedAt" : "2018-07-31T18:23:52Z",
        "lastEditedBy" : "b2c1789f-eaaf-4ce0-9ad7-695c9467c3cc",
        "tags" : [
        ]
      }
    ],
    "commit" : "367ad263c26866d1aa57e9382347d80effbe9a02",
    "line" : 57,
    "diffHunk" : "@@ -1,1 +55,59 @@        path = parsed.path\n        if path.startswith('/'):\n            path = path[1:]\n        return container, storage_account, path\n"
  },
  {
    "id" : "f204b219-145c-415e-bbec-308a3524388d",
    "prId" : 206,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/206#pullrequestreview-142033577",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "93b50f83-52b5-4aed-9f6b-8348b9cd696d",
        "parentId" : null,
        "authorId" : "6e958077-8d60-494d-8079-e77af3a2951f",
        "body" : "This seems a bit complicated (but necessarily so) -- is there a unit test covering the case where `root == local_dir` and where `root != local_dir`? I guess this should be included as long as the unit test includes a subdirectory.",
        "createdAt" : "2018-07-31T16:15:00Z",
        "updatedAt" : "2018-07-31T18:23:52Z",
        "lastEditedBy" : "6e958077-8d60-494d-8079-e77af3a2951f",
        "tags" : [
        ]
      }
    ],
    "commit" : "367ad263c26866d1aa57e9382347d80effbe9a02",
    "line" : 74,
    "diffHunk" : "@@ -1,1 +72,76 @@        for (root, _, filenames) in os.walk(local_dir):\n            upload_path = dest_path\n            if root != local_dir:\n                rel_path = get_relative_path(local_dir, root)\n                upload_path = build_path(dest_path, rel_path)"
  }
]