[
  {
    "id" : "32b00b4e-dcb4-4e7d-a971-c50dd6563344",
    "prId" : 4311,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/4311#pullrequestreview-651746084",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "8bb01288-13a8-41b5-9886-ed4ae3329eb6",
        "parentId" : null,
        "authorId" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "body" : "Use `thenAnswer` instead of `thenReturn` to ensure that a new `ByteArrayInputStream` is constructed each time there's an interaction with the mock (otherwise, the stream content will only available to the first caller of the mock who consumes it). For more context, see https://stacktraceguru.com/unittest/thenreturn-vs-thenanswer",
        "createdAt" : "2021-05-04T23:23:06Z",
        "updatedAt" : "2021-05-04T23:25:38Z",
        "lastEditedBy" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "tags" : [
        ]
      }
    ],
    "commit" : "3dd96b312ba15be9430940e512065781a64c4eea",
    "line" : 48,
    "diffHunk" : "@@ -1,1 +58,62 @@    when(entity429.getContent()).thenAnswer(\n      i -> new ByteArrayInputStream(expectedResponseText.getBytes(StandardCharsets.UTF_8))\n    );\n    when(response429.getEntity()).thenReturn(entity429);\n    when(statusLine500.getStatusCode()).thenReturn(500);"
  }
]