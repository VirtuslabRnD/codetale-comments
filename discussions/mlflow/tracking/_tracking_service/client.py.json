[
  {
    "id" : "6ecff9ff-91fc-4420-9f34-466447ef0370",
    "prId" : 4261,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/4261#pullrequestreview-655495156",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c5d9d900-c965-4685-a749-deeec58fdb5c",
        "parentId" : null,
        "authorId" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "body" : "@apurva-koti Can we add a unit test here to ensure that the same object is fetched every time `_get_artifact_repo` is called with a particular run ID?",
        "createdAt" : "2021-05-08T16:52:38Z",
        "updatedAt" : "2021-05-11T06:38:22Z",
        "lastEditedBy" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "tags" : [
        ]
      },
      {
        "id" : "6570b99b-b6e3-4535-9cf5-f4f72d524acb",
        "parentId" : "c5d9d900-c965-4685-a749-deeec58fdb5c",
        "authorId" : "9b00f760-3323-47e3-bb69-3add3073befc",
        "body" : "Done!",
        "createdAt" : "2021-05-10T10:36:12Z",
        "updatedAt" : "2021-05-11T06:38:22Z",
        "lastEditedBy" : "9b00f760-3323-47e3-bb69-3add3073befc",
        "tags" : [
        ]
      }
    ],
    "commit" : "4bc22002cfcc414840dec59657a804bb912d3350",
    "line" : 20,
    "diffHunk" : "@@ -1,1 +258,262 @@        self.store.record_logged_model(run_id, mlflow_model)\n\n    def _get_artifact_repo(self, run_id):\n        # Attempt to fetch the artifact repo from a local cache\n        cached_repo = TrackingServiceClient._artifact_repos_cache.get(run_id)"
  },
  {
    "id" : "a9f78b70-4c0c-48bf-b069-49e356b832b6",
    "prId" : 3220,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/3220#pullrequestreview-463087458",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6b6e68d8-b6e1-4c54-8699-a109af309b93",
        "parentId" : null,
        "authorId" : "436a8363-a9c6-409f-a948-2be39402f59c",
        "body" : "Are there client tests that we can add to this to verify the behavior?",
        "createdAt" : "2020-08-07T06:54:45Z",
        "updatedAt" : "2020-08-07T09:24:31Z",
        "lastEditedBy" : "436a8363-a9c6-409f-a948-2be39402f59c",
        "tags" : [
        ]
      },
      {
        "id" : "5fdb88bd-521b-41ff-b5d0-6372f1eb14bb",
        "parentId" : "6b6e68d8-b6e1-4c54-8699-a109af309b93",
        "authorId" : "672c9aff-2ae2-4b23-92a1-3e0ef1c935e9",
        "body" : "We could add some unit tests for `_get_artifact_repo` to make sure we call `get_artifact_repository` with the correct URI (once a `dbfs` URI is passed into `get_artifact_repository`, the behavior for returning the correct type of DBFS artifact repository and setting their tracking URIs correctly is pretty well unit-tested). `_get_artifact_repo` is quite trivial currently but since it can change I will add some unit tests.\r\n\r\nFor artifact URIs that shouldn't be affected by this change, there is some sanity check here for `LocalArtifactRepository`: https://github.com/mlflow/mlflow/blob/55ae14c03d369af10e2a9e975100dfbf86b90d58/tests/tracking/test_rest_tracking.py#L392-L406. ",
        "createdAt" : "2020-08-07T07:18:29Z",
        "updatedAt" : "2020-08-07T09:24:31Z",
        "lastEditedBy" : "672c9aff-2ae2-4b23-92a1-3e0ef1c935e9",
        "tags" : [
        ]
      }
    ],
    "commit" : "bf489b8c6f1bc72ac83a2ff9f2b434ebaa875f45",
    "line" : 29,
    "diffHunk" : "@@ -1,1 +254,258 @@        :param artifact_path: If provided, the directory in ``artifact_uri`` to write to.\n        \"\"\"\n        artifact_repo = self._get_artifact_repo(run_id)\n        if os.path.isdir(local_path):\n            dir_name = os.path.basename(os.path.normpath(local_path))"
  },
  {
    "id" : "1e64572a-9415-46e5-b087-89c06b4b164f",
    "prId" : 3119,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/3119#pullrequestreview-460209806",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "670f1f81-8208-411a-87e3-9bf7ba7d53da",
        "parentId" : null,
        "authorId" : "436a8363-a9c6-409f-a948-2be39402f59c",
        "body" : "Do we have a follow-on task to track this change/is it needed soon?",
        "createdAt" : "2020-08-03T16:52:12Z",
        "updatedAt" : "2020-08-03T17:30:02Z",
        "lastEditedBy" : "436a8363-a9c6-409f-a948-2be39402f59c",
        "tags" : [
        ]
      },
      {
        "id" : "1b18489d-7552-4186-9aee-67bf9a291acf",
        "parentId" : "670f1f81-8208-411a-87e3-9bf7ba7d53da",
        "authorId" : "672c9aff-2ae2-4b23-92a1-3e0ef1c935e9",
        "body" : "yep - it's not absolutely required but very useful for running tests for different (from, to) configurations so I will probably do it soon.",
        "createdAt" : "2020-08-03T17:30:59Z",
        "updatedAt" : "2020-08-03T17:30:59Z",
        "lastEditedBy" : "672c9aff-2ae2-4b23-92a1-3e0ef1c935e9",
        "tags" : [
        ]
      }
    ],
    "commit" : "d857badd9b4f4e208367ba1e6c5b96e7c80b8a2b",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +248,252 @@        \"\"\"\n        run = self.get_run(run_id)\n        # TODO: use add_databricks_profile_info_to_artifact_uri(artifact_root, self.tracking_uri)\n        #   for DBFS artifact repositories to use the correct tracking URI.\n        artifact_repo = get_artifact_repository(run.info.artifact_uri)"
  }
]