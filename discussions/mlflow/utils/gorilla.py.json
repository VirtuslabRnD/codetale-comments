[
  {
    "id" : "80043935-ff75-41c6-af10-05584e8ad43e",
    "prId" : 4405,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/4405#pullrequestreview-674706891",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a3ea2cb0-2370-4327-aab4-5984c31280e3",
        "parentId" : null,
        "authorId" : "c7dda55d-9e2b-478f-9c63-d6cdec83a883",
        "body" : "Only delete added attributes by gorilla monkey-patching, if attribute is defined on the class as opposed to inherited from a parent class.",
        "createdAt" : "2021-06-01T17:02:21Z",
        "updatedAt" : "2021-06-01T17:02:21Z",
        "lastEditedBy" : "c7dda55d-9e2b-478f-9c63-d6cdec83a883",
        "tags" : [
        ]
      },
      {
        "id" : "86b47f9f-8520-428c-a98a-955da318ef55",
        "parentId" : "a3ea2cb0-2370-4327-aab4-5984c31280e3",
        "authorId" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "body" : "Awesome solution! In accordance with that StackOverflow comment that we discussed offline, can we also add a `hasattr` check here too?",
        "createdAt" : "2021-06-01T18:49:20Z",
        "updatedAt" : "2021-06-01T18:49:20Z",
        "lastEditedBy" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "tags" : [
        ]
      },
      {
        "id" : "c68b8c28-047d-4b73-8c0f-d87412fc45ff",
        "parentId" : "a3ea2cb0-2370-4327-aab4-5984c31280e3",
        "authorId" : "c7dda55d-9e2b-478f-9c63-d6cdec83a883",
        "body" : "For class attributes stored in [slots](https://stackoverflow.com/questions/472000/usage-of-slots), if no additional attrbiutes are added then there will be no __dict__. Any [monkey patching will add attributes ](https://github.com/mlflow/mlflow/blob/de01ccf24474d8f9479851838292caa0d62865ec/mlflow/utils/gorilla.py#L334)forcing the class to have a __dict__ field on the class. If no code was mokey patched and the slight possibility of class to only have attributes defined via slots, i.e. __dict__  is undefined then the [getattr](https://github.com/mlflow/mlflow/blob/de01ccf24474d8f9479851838292caa0d62865ec/mlflow/utils/gorilla.py#L348) in the beginning of the method will short circuit. \r\n\r\nTLDR: No need to add  hasattr check for slots edge case.",
        "createdAt" : "2021-06-02T21:41:56Z",
        "updatedAt" : "2021-06-02T21:41:57Z",
        "lastEditedBy" : "c7dda55d-9e2b-478f-9c63-d6cdec83a883",
        "tags" : [
        ]
      }
    ],
    "commit" : "44ad5946dfab1f6bf928c8b1c19a3af8d5411d2f",
    "line" : 93,
    "diffHunk" : "@@ -1,1 +376,380 @@    # We are only deleting the attribute if it is defined on the\n    # destination class as opposed to being inherited from parent class.\n    if original_name in patch.destination.__dict__:\n        delattr(patch.destination, original_name)\n    # If an curr_active_patch has been set on the destination class,"
  },
  {
    "id" : "8bacd7d4-bb46-41b1-bcbd-203612529753",
    "prId" : 4405,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/4405#pullrequestreview-684791009",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "5740a55e-0dda-4b5c-abc6-0f48d554dd63",
        "parentId" : null,
        "authorId" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "body" : "Can we add a notice to this method's docstring indicating that the method is taken from https://github.com/christophercrouzet/gorilla/blob/4dfa7215b8abacbdbd91e784da3d61d671a3a510/gorilla.py#L318-L351 with small additions for MLflow patching use cases?\r\n\r\nCan we also add an inline comment above the new code that we've added, similar to https://github.com/mlflow/mlflow/blob/5508e6784afe0442705471bf4c10cd1ca13bafe3/mlflow/utils/gorilla.py#L312-L321?",
        "createdAt" : "2021-06-01T18:51:06Z",
        "updatedAt" : "2021-06-01T18:51:52Z",
        "lastEditedBy" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "tags" : [
        ]
      },
      {
        "id" : "eac68720-5405-451c-b9d9-dbf5989e19f7",
        "parentId" : "5740a55e-0dda-4b5c-abc6-0f48d554dd63",
        "authorId" : "c7dda55d-9e2b-478f-9c63-d6cdec83a883",
        "body" : "Done below",
        "createdAt" : "2021-06-16T06:59:42Z",
        "updatedAt" : "2021-06-16T06:59:42Z",
        "lastEditedBy" : "c7dda55d-9e2b-478f-9c63-d6cdec83a883",
        "tags" : [
        ]
      }
    ],
    "commit" : "44ad5946dfab1f6bf928c8b1c19a3af8d5411d2f",
    "line" : 54,
    "diffHunk" : "@@ -1,1 +337,341 @@\n\ndef revert(patch):\n    \"\"\"Revert a patch.\n    Parameters"
  },
  {
    "id" : "709fbbe9-40b4-4665-ad41-cc887cd6cab2",
    "prId" : 4405,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/4405#pullrequestreview-684791239",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "cf6b3cff-b7a7-4674-a415-74cc715e68bf",
        "parentId" : null,
        "authorId" : "c7dda55d-9e2b-478f-9c63-d6cdec83a883",
        "body" : "docstring comment",
        "createdAt" : "2021-06-16T06:59:59Z",
        "updatedAt" : "2021-06-16T06:59:59Z",
        "lastEditedBy" : "c7dda55d-9e2b-478f-9c63-d6cdec83a883",
        "tags" : [
        ]
      }
    ],
    "commit" : "44ad5946dfab1f6bf928c8b1c19a3af8d5411d2f",
    "line" : 65,
    "diffHunk" : "@@ -1,1 +348,352 @@    to ``True`` when applying the patch and overriding an existing attribute.\n\n    Notice:\n    This method is taken from\n    https://github.com/christophercrouzet/gorilla/blob/v0.4.0/gorilla.py#L318-L351"
  },
  {
    "id" : "046e93ea-38cb-4ae7-9003-6fbca14c0743",
    "prId" : 3582,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/3582#pullrequestreview-517131237",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "80f867fe-3683-4fd8-9f1f-5d99c65a7cde",
        "parentId" : null,
        "authorId" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "body" : "@harupy These are the critical portions of the change to address problem (1) from https://github.com/mlflow/mlflow/issues/3574#issuecomment-714994583.\r\n\r\nWe now retain a reference to the previous patch that was applied to a class or one of its super classes, and, if  the patch was applied to a super class, we overwrite it with the patch that's being applied to this class directly. See https://github.com/christophercrouzet/gorilla/blob/0045a7f4b5c46bda208dbce9e628f97bc9e551e0/gorilla.py#L295-L300 for the original implementation.",
        "createdAt" : "2020-10-26T20:01:59Z",
        "updatedAt" : "2020-10-27T05:56:11Z",
        "lastEditedBy" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "tags" : [
        ]
      }
    ],
    "commit" : "daa732b926250deaa72a1c86ee2b6f09b0370e00",
    "line" : 331,
    "diffHunk" : "@@ -1,1 +329,333 @@\n    setattr(patch.destination, patch.name, patch.obj)\n    setattr(patch.destination, _ACTIVE_PATCH, patch)\n\n"
  },
  {
    "id" : "5ffa7a5d-38fb-44ce-952a-3f6174ee2009",
    "prId" : 3582,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/3582#pullrequestreview-517135251",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a9c2e71b-09d4-4e0b-9b76-8335765070e9",
        "parentId" : null,
        "authorId" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "body" : "We inline gorilla to make the change described here: https://github.com/mlflow/mlflow/pull/3582/files#r512233266",
        "createdAt" : "2020-10-26T20:07:53Z",
        "updatedAt" : "2020-10-27T05:56:11Z",
        "lastEditedBy" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "tags" : [
        ]
      }
    ],
    "commit" : "daa732b926250deaa72a1c86ee2b6f09b0370e00",
    "line" : 1,
    "diffHunk" : "@@ -1,1 +-1,3 @@#                     __ __ __\n#   .-----.-----.----|__|  |  .---.-.\n#   |  _  |  _  |   _|  |  |  |  _  |"
  }
]