[
  {
    "id" : "a306807f-0933-49e2-b674-08c3b5ad81b5",
    "prId" : 4200,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/4200#pullrequestreview-620079196",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d7582114-e66c-4a7b-aa1e-b5c0f14426d4",
        "parentId" : null,
        "authorId" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "body" : "Ending the run with status `FAILED` in response to a keyboard interrupt is consistent with the behavior of `with mlflow.start_run()` (see https://github.com/mlflow/mlflow/blob/b57f95498ac11d70d3d153ce5e0895a7ab4ab7e9/mlflow/tracking/fluent.py#L100).\r\n\r\nWhile `KILLED` may make more sense, I'd rather maintain consistency and avoid making backwards-incompatible changes.",
        "createdAt" : "2021-03-24T18:10:18Z",
        "updatedAt" : "2021-03-24T18:10:19Z",
        "lastEditedBy" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "tags" : [
        ]
      }
    ],
    "commit" : "82983675ed5bd9d7d72473d2cfb98ca06abb9ea9",
    "line" : 31,
    "diffHunk" : "@@ -1,1 +961,965 @@                # (e.g. via sigint / ctrl-c)\n                if managed_run:\n                    try_mlflow_log(mlflow.end_run, RunStatus.to_string(RunStatus.FAILED))\n                raise\n            else:"
  },
  {
    "id" : "3b907b19-4aa7-4070-87d8-ae1088e840b2",
    "prId" : 4200,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/4200#pullrequestreview-620090322",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c3dd74e3-a64a-44bb-88a8-a3408af84056",
        "parentId" : null,
        "authorId" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "body" : "Instead of handling `KeyboardInterrupt`, I also considered handling SIGINTS via `signal.signal` (https://docs.python.org/3/library/signal.html#signal.signal). However, performing cleanup logic in `signal.signal` has some scary implications (e.g., it can lead to deadlock if the cleanup operating makes use of `logger` since `logger` uses a non-reetrant lock & a signal handler may be called in the middle of another logging statement).\r\n\r\nWhile `KeyboardInterrupt` isn't guaranteed to fire 100% of the time on a SIGINT, it should be \"good enough\" for most practical cases (e.g. cell cancellation in a Databricks or Jupyter notebook).",
        "createdAt" : "2021-03-24T18:15:21Z",
        "updatedAt" : "2021-03-24T18:15:50Z",
        "lastEditedBy" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "tags" : [
        ]
      }
    ],
    "commit" : "82983675ed5bd9d7d72473d2cfb98ca06abb9ea9",
    "line" : 17,
    "diffHunk" : "@@ -1,1 +620,624 @@        try:\n            return self._patch_implementation(original, *args, **kwargs)\n        except (Exception, KeyboardInterrupt) as e:\n            try:\n                self._on_exception(e)"
  },
  {
    "id" : "2ea8c9ca-c353-4ac3-9352-5edefd970a0f",
    "prId" : 4184,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/4184#pullrequestreview-614486238",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "85cb3cd4-0ff6-4d4f-939c-c0de1d341857",
        "parentId" : null,
        "authorId" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "body" : "Move `mlflow/utils/autologging_utils.py` to `mlflow/utils/autologging/__init__.py`, allowing us to add autologging utility modules as separate file(s) in the new `mlflow/utils/autologging` directory in the future.\r\n\r\nAlso address a TODO in the docstring of the `wrap_patch` function.",
        "createdAt" : "2021-03-17T15:47:08Z",
        "updatedAt" : "2021-03-22T16:26:18Z",
        "lastEditedBy" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "tags" : [
        ]
      }
    ],
    "commit" : "322f4433b6ee1cf3ffb49ccf324d20d51e75aa1f",
    "line" : 1,
    "diffHunk" : "@@ -1,1 +108,112 @@    except Exception:\n        _logger.debug(\"Failed to restore original signature for wrapper around %s\", wrapped)\n    return updated_wrapper\n\n"
  },
  {
    "id" : "081a5805-b6f6-4ce6-90e1-8cb4f3c2be3c",
    "prId" : 4184,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/4184#pullrequestreview-614486929",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "6c3a77eb-2d22-47b8-80db-e66fa0e77d2e",
        "parentId" : null,
        "authorId" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "body" : "As a result of https://github.com/mlflow/mlflow/pull/4184/files#r596149139, `ml-package-versions.yml` is now an additional directory above this module.",
        "createdAt" : "2021-03-17T15:47:43Z",
        "updatedAt" : "2021-03-22T16:26:18Z",
        "lastEditedBy" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "tags" : [
        ]
      }
    ],
    "commit" : "322f4433b6ee1cf3ffb49ccf324d20d51e75aa1f",
    "line" : 20,
    "diffHunk" : "@@ -1,1 +313,317 @@\ndef _load_version_file_as_dict():\n    version_file_path = resource_filename(__name__, \"../../ml-package-versions.yml\")\n    with open(version_file_path) as f:\n        return yaml.load(f, Loader=yaml.SafeLoader)"
  },
  {
    "id" : "d40c3171-3e55-4125-afbb-d99477bea339",
    "prId" : 4184,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/4184#pullrequestreview-614651628",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "7438dc7b-5d39-4f88-afa7-0d4f84908479",
        "parentId" : null,
        "authorId" : "c7dda55d-9e2b-478f-9c63-d6cdec83a883",
        "body" : "I just confirmed on master branch that wrap_patch is not called outside of autologging_utils and test_autologging_utils files",
        "createdAt" : "2021-03-17T18:21:53Z",
        "updatedAt" : "2021-03-22T16:26:18Z",
        "lastEditedBy" : "c7dda55d-9e2b-478f-9c63-d6cdec83a883",
        "tags" : [
        ]
      }
    ],
    "commit" : "322f4433b6ee1cf3ffb49ccf324d20d51e75aa1f",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +111,115 @@\n\ndef _wrap_patch(destination, name, patch, settings=None):\n    \"\"\"\n    Apply a patch while preserving the attributes (e.g. __doc__) of an original function."
  }
]