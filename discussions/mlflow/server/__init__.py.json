[
  {
    "id" : "d08d07d6-8720-44cd-afcc-86061f5aa21b",
    "prId" : 1413,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/1413#pullrequestreview-253693842",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "87ccefa7-38be-405d-a4e7-20443f64999b",
        "parentId" : null,
        "authorId" : "bd3067fd-855b-4bd1-898d-ca29199fd092",
        "body" : "@xhochy I think this change actually makes more conceptual sense than the one I proposed in https://github.com/mlflow/mlflow/pull/1413#pullrequestreview-249034945 (prefixing only `ajax-api` endpoints with the static prefix), but unfortunately I think it's a breaking change if we make the `--static-prefix` change the standard REST API endpoints in addition to the ajax-api endpoints. Thus maybe we can stick with modifying [this  line](https://github.com/mlflow/mlflow/blob/fcb6fa8d18c3f8981806f220f65c3888f99a8046/mlflow/server/handlers.py#L373) to add the static prefix only to the ajax-api endpoints. Otherwise the PR LGTM!",
        "createdAt" : "2019-06-20T05:42:08Z",
        "updatedAt" : "2019-06-28T15:35:49Z",
        "lastEditedBy" : "bd3067fd-855b-4bd1-898d-ca29199fd092",
        "tags" : [
        ]
      },
      {
        "id" : "e16c447a-85b2-4055-9fa4-b329f5746d54",
        "parentId" : "87ccefa7-38be-405d-a4e7-20443f64999b",
        "authorId" : "5ccbeff7-66cf-4c95-92d6-63e01ea7f84b",
        "body" : "Do you mean that I should add the following to also support the old API paths?\r\n```suggestion\r\nfor http_path, handler, methods in handlers.get_endpoints():\r\n    app.add_url_rule(http_path, handler.__name__, handler, methods=methods)\r\n```",
        "createdAt" : "2019-06-21T12:45:12Z",
        "updatedAt" : "2019-06-28T15:35:49Z",
        "lastEditedBy" : "5ccbeff7-66cf-4c95-92d6-63e01ea7f84b",
        "tags" : [
        ]
      },
      {
        "id" : "c3b6b257-88d8-43e0-beb6-d127506fc94a",
        "parentId" : "87ccefa7-38be-405d-a4e7-20443f64999b",
        "authorId" : "bd3067fd-855b-4bd1-898d-ca29199fd092",
        "body" : "I was actually thinking we'd change `_get_paths` to be:\r\n\r\n```\r\ndef _get_paths(base_path):\r\n    \"\"\"\r\n    A service endpoints base path is typically something like /preview/mlflow/experiment.\r\n    We should register paths like /api/2.0/preview/mlflow/experiment and\r\n    /ajax-api/2.0/preview/mlflow/experiment in the Flask router.\r\n    \"\"\"\r\n    return ['/api/2.0{}'.format(base_path), _add_static_prefix('/ajax-api/2.0{}'.format(base_path))]\r\n```\r\n\r\nThe only difference from your proposed change is that we only serve the REST API from `/api/2.0/...` rather than serving from both `/api/2.0/...` and `<static-prefix>/api/2.0/...`",
        "createdAt" : "2019-06-24T22:39:40Z",
        "updatedAt" : "2019-06-28T15:35:49Z",
        "lastEditedBy" : "bd3067fd-855b-4bd1-898d-ca29199fd092",
        "tags" : [
        ]
      }
    ],
    "commit" : "5d7c41c461e7d99ec4008c6e448ee23658d06dfe",
    "line" : 20,
    "diffHunk" : "@@ -1,1 +19,23 @@\n\nfor http_path, handler, methods in handlers.get_endpoints():\n    app.add_url_rule(http_path, handler.__name__, handler, methods=methods)\n"
  },
  {
    "id" : "9bbd27db-672f-40d3-b7d9-6834267be98b",
    "prId" : 1268,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/1268#pullrequestreview-237410788",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "10b586e9-d7d7-4cdd-a1e3-b6ec64307b29",
        "parentId" : null,
        "authorId" : "6e958077-8d60-494d-8079-e77af3a2951f",
        "body" : "These are not the best environment variable names, but they are not user-facing and have no bearing other than being unique, so I just prefixed them with \"_\" to help indicate privacy.",
        "createdAt" : "2019-05-14T18:00:22Z",
        "updatedAt" : "2019-05-15T02:42:25Z",
        "lastEditedBy" : "6e958077-8d60-494d-8079-e77af3a2951f",
        "tags" : [
        ]
      }
    ],
    "commit" : "83b058203501436cbd1170362a16b415d50417cf",
    "line" : 9,
    "diffHunk" : "@@ -1,1 +10,14 @@# NB: These are intenrnal environment variables used for communication between\n# the cli and the forked gunicorn processes.\nBACKEND_STORE_URI_ENV_VAR = \"_MLFLOW_SERVER_FILE_STORE\"\nARTIFACT_ROOT_ENV_VAR = \"_MLFLOW_SERVER_ARTIFACT_ROOT\"\nSTATIC_PREFIX_ENV_VAR = \"_MLFLOW_STATIC_PREFIX\""
  },
  {
    "id" : "313a4987-4820-402f-9551-5c22f6201466",
    "prId" : 1080,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/1080#pullrequestreview-233162769",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "d916d837-e8f2-473e-b5b5-45765f56530d",
        "parentId" : null,
        "authorId" : "d79ebb0f-0833-4329-8a37-7ae540003587",
        "body" : "is this understood by waitress as well? ",
        "createdAt" : "2019-05-02T18:25:19Z",
        "updatedAt" : "2019-06-21T04:15:23Z",
        "lastEditedBy" : "d79ebb0f-0833-4329-8a37-7ae540003587",
        "tags" : [
        ]
      }
    ],
    "commit" : "5b546418d7faac06e9cd9350b1060c8368216114",
    "line" : 41,
    "diffHunk" : "@@ -1,1 +81,85 @@        env_map[ARTIFACT_ROOT_ENV_VAR] = default_artifact_root\n    if static_prefix:\n        env_map[STATIC_PREFIX_ENV_VAR] = static_prefix\n\n    # TODO: eventually may want waitress on non-win32"
  },
  {
    "id" : "642a7260-811a-431e-b399-f64a7bfe4ed2",
    "prId" : 626,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/626#pullrequestreview-164839924",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "fe254681-54b6-4dee-b3f1-dc7394a59a7a",
        "parentId" : null,
        "authorId" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "body" : "Out of curiosity, what happens if the user-specified `gunicorn_opts` contains a bind address or worker specification?",
        "createdAt" : "2018-10-12T21:49:09Z",
        "updatedAt" : "2018-10-15T18:34:52Z",
        "lastEditedBy" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "tags" : [
        ]
      },
      {
        "id" : "46622f67-c8c6-42ac-bba4-d0fbe0b04345",
        "parentId" : "fe254681-54b6-4dee-b3f1-dc7394a59a7a",
        "authorId" : "585a7aa0-77e3-46ce-95a0-4a8de00c6c4a",
        "body" : "good question. Can we target this as another PR. Maybe we can swap out `subprocess` with something like this http://docs.gunicorn.org/en/latest/custom.html",
        "createdAt" : "2018-10-12T22:51:23Z",
        "updatedAt" : "2018-10-15T18:34:52Z",
        "lastEditedBy" : "585a7aa0-77e3-46ce-95a0-4a8de00c6c4a",
        "tags" : [
        ]
      },
      {
        "id" : "5b45740b-8a17-4335-bee8-6bd8f274cead",
        "parentId" : "fe254681-54b6-4dee-b3f1-dc7394a59a7a",
        "authorId" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "body" : "Sounds good! Can you file an issue to make sure that this is tracked?",
        "createdAt" : "2018-10-13T00:10:43Z",
        "updatedAt" : "2018-10-15T18:34:52Z",
        "lastEditedBy" : "3f60ced2-d2f0-4cc5-9898-5aefe16e0be8",
        "tags" : [
        ]
      },
      {
        "id" : "7d0925c6-fff7-4140-a07b-28fe0c1f1a93",
        "parentId" : "fe254681-54b6-4dee-b3f1-dc7394a59a7a",
        "authorId" : "585a7aa0-77e3-46ce-95a0-4a8de00c6c4a",
        "body" : "done #630 ",
        "createdAt" : "2018-10-15T18:33:37Z",
        "updatedAt" : "2018-10-15T18:34:52Z",
        "lastEditedBy" : "585a7aa0-77e3-46ce-95a0-4a8de00c6c4a",
        "tags" : [
        ]
      }
    ],
    "commit" : "9471d86da1fd67e43186c76bd3bda500d166e1ab",
    "line" : 25,
    "diffHunk" : "@@ -1,1 +69,73 @@    bind_address = \"%s:%s\" % (host, port)\n    opts = shlex.split(gunicorn_opts) if gunicorn_opts else []\n    exec_cmd([\"gunicorn\"] + opts + [\"-b\", bind_address, \"-w\", \"%s\" % workers, \"mlflow.server:app\"],\n             env=env_map, stream_output=True)"
  }
]