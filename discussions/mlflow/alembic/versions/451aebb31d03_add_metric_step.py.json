[
  {
    "id" : "7889dc41-0458-42ab-b3c8-287bdf65e812",
    "prId" : 1155,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/1155#pullrequestreview-233280202",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "dbcb6c1a-7651-4968-ab88-23ead8b99d6c",
        "parentId" : null,
        "authorId" : "bd3067fd-855b-4bd1-898d-ca29199fd092",
        "body" : "Should be reviewed, adds metric step column",
        "createdAt" : "2019-04-30T07:21:51Z",
        "updatedAt" : "2019-05-07T02:33:19Z",
        "lastEditedBy" : "bd3067fd-855b-4bd1-898d-ca29199fd092",
        "tags" : [
        ]
      },
      {
        "id" : "12a37d84-0850-40c2-8027-9eaa7a66ed04",
        "parentId" : "dbcb6c1a-7651-4968-ab88-23ead8b99d6c",
        "authorId" : "6e958077-8d60-494d-8079-e77af3a2951f",
        "body" : "What was the process (i.e., set of commands) by which you generated this?",
        "createdAt" : "2019-05-01T17:37:03Z",
        "updatedAt" : "2019-05-07T02:33:19Z",
        "lastEditedBy" : "6e958077-8d60-494d-8079-e77af3a2951f",
        "tags" : [
        ]
      },
      {
        "id" : "709fc943-9114-4bb1-83ce-88159350fc2f",
        "parentId" : "dbcb6c1a-7651-4968-ab88-23ead8b99d6c",
        "authorId" : "6e958077-8d60-494d-8079-e77af3a2951f",
        "body" : "(Or was it really just run the one `alembic revision` command and then the rest by hand?)",
        "createdAt" : "2019-05-01T17:42:36Z",
        "updatedAt" : "2019-05-07T02:33:19Z",
        "lastEditedBy" : "6e958077-8d60-494d-8079-e77af3a2951f",
        "tags" : [
        ]
      },
      {
        "id" : "d89412dd-c501-4347-86a2-a15452e3bb65",
        "parentId" : "dbcb6c1a-7651-4968-ab88-23ead8b99d6c",
        "authorId" : "bd3067fd-855b-4bd1-898d-ca29199fd092",
        "body" : "It was essentially running `alembic revision` & adding the actual migration logic by hand - I initially used `alembic revision --autogenerate`, which produced the `op.add_column('metrics', sa.Column('step', sa.BigInteger(), nullable=False, server_default='0'))` command, but had to add the `batch_op` stuff myself (alembic's autogeneration didn't include batch mode or the primary key change)",
        "createdAt" : "2019-05-02T23:23:59Z",
        "updatedAt" : "2019-05-07T02:33:19Z",
        "lastEditedBy" : "bd3067fd-855b-4bd1-898d-ca29199fd092",
        "tags" : [
        ]
      }
    ],
    "commit" : "6c797a7ace43cc6ee2842f1c9daf8a35e1fc1fd5",
    "line" : 1,
    "diffHunk" : "@@ -1,1 +-1,3 @@\"\"\"add metric step\n\nRevision ID: 451aebb31d03"
  },
  {
    "id" : "dc01611b-9440-4cad-8688-a392e39d4546",
    "prId" : 1155,
    "prUrl" : "https://github.com/mlflow/mlflow/pull/1155#pullrequestreview-232671142",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "44789c60-096b-48ec-8e24-744e262b03cc",
        "parentId" : null,
        "authorId" : "6e958077-8d60-494d-8079-e77af3a2951f",
        "body" : "Do we have a test which verifies that the final state of the SQL schema is some expected value? This helps ensure that we have the full schema documented somewhere (initial + updates); otherwise, it's kind of hard to reconstruct.",
        "createdAt" : "2019-05-01T17:37:50Z",
        "updatedAt" : "2019-05-07T02:33:19Z",
        "lastEditedBy" : "6e958077-8d60-494d-8079-e77af3a2951f",
        "tags" : [
        ]
      }
    ],
    "commit" : "6c797a7ace43cc6ee2842f1c9daf8a35e1fc1fd5",
    "line" : 22,
    "diffHunk" : "@@ -1,1 +20,24 @@    op.add_column('metrics', sa.Column('step', sa.BigInteger(), nullable=False, server_default='0'))\n    # Use batch mode so that we can run \"ALTER TABLE\" statements against SQLite\n    # databases (see more info at https://alembic.sqlalchemy.org/en/latest/\n    # batch.html#running-batch-migrations-for-sqlite-and-other-databases)\n    with op.batch_alter_table(\"metrics\") as batch_op:"
  }
]