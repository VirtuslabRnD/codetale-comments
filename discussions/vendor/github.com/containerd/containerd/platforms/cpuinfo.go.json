[
  {
    "id" : "757d3160-791b-40bf-a397-09896dad7ce4",
    "prId" : 99875,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/99875#pullrequestreview-607566034",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "9817fe51-13de-48c9-8caa-f1def36654db",
        "parentId" : null,
        "authorId" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "body" : "this makes calls that can return errors and log... is that expected on startup for the kubelet (it could happen when running things like `kubelet --help`)?",
        "createdAt" : "2021-03-09T04:23:08Z",
        "updatedAt" : "2021-03-09T06:10:44Z",
        "lastEditedBy" : "8be927c4-cfb4-4077-b355-f4f3d84849b8",
        "tags" : [
        ]
      },
      {
        "id" : "ec15b54a-ce51-4263-af52-c61f4526fd01",
        "parentId" : "9817fe51-13de-48c9-8caa-f1def36654db",
        "authorId" : "db4d847e-0006-4342-9243-2f3f71f190b9",
        "body" : "Thanks for looking through the dep changes.\r\n\r\nWith regards to this `init()` function, looks like this was refactored in https://github.com/containerd/containerd/pull/4953 and moved out of init(), but the change isn't in containerd v1.4.4 (only in unreleased containerd v1.5).\r\n\r\nIt looks like the main place error can happen here is if it can't open `/proc/cpuinfo` (https://github.com/containerd/containerd/blob/release%2F1.4/platforms/cpuinfo.go#L49-L53) which is hopefully unlikely :). Not clear what we can do here unfortunately considering we can't move to containerd v1.5 yet...",
        "createdAt" : "2021-03-09T07:36:00Z",
        "updatedAt" : "2021-03-09T07:36:01Z",
        "lastEditedBy" : "db4d847e-0006-4342-9243-2f3f71f190b9",
        "tags" : [
        ]
      },
      {
        "id" : "615ae029-d93a-4f78-b420-4caff0229660",
        "parentId" : "9817fe51-13de-48c9-8caa-f1def36654db",
        "authorId" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "body" : "> It looks like the main place error can happen here is if it can't open /proc/cpuinfo (https://github.com/containerd/containerd/blob/release%2F1.4/platforms/cpuinfo.go#L49-L53) which is hopefully unlikely\r\n\r\nif this code path happens on Windows, there is no /proc/ there.\r\n",
        "createdAt" : "2021-03-09T13:31:04Z",
        "updatedAt" : "2021-03-09T13:31:04Z",
        "lastEditedBy" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "tags" : [
        ]
      },
      {
        "id" : "d0c56b3f-de3e-493d-843d-4be37586ff98",
        "parentId" : "9817fe51-13de-48c9-8caa-f1def36654db",
        "authorId" : "121c614b-6f30-46c9-901d-8c7a13a28c62",
        "body" : "This is ARM-only. Windows Server on ARM is still in Insider Preview, does Kubernetes support such configuration?",
        "createdAt" : "2021-03-09T15:25:21Z",
        "updatedAt" : "2021-03-09T15:25:21Z",
        "lastEditedBy" : "121c614b-6f30-46c9-901d-8c7a13a28c62",
        "tags" : [
        ]
      },
      {
        "id" : "06d298f4-9993-4c7b-8969-ffd7ad89d48e",
        "parentId" : "9817fe51-13de-48c9-8caa-f1def36654db",
        "authorId" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "body" : "my comment was more of a remark that code should be written as preemptively OS-portable.\r\n\r\nk8s doesn't produce ARM binaries for Windows. by the time (and if) we start doing that, the containerd version will likely be bumped to not have this init() code.\r\n",
        "createdAt" : "2021-03-09T15:50:51Z",
        "updatedAt" : "2021-03-09T15:50:51Z",
        "lastEditedBy" : "2ce2b44c-9841-49e7-983e-fb7696974908",
        "tags" : [
        ]
      }
    ],
    "commit" : "904cb67267d5d6dff5f1b34f3d0999530ba4cce3",
    "line" : 35,
    "diffHunk" : "@@ -1,1 +33,37 @@func init() {\n\tif isArmArch(runtime.GOARCH) {\n\t\tcpuVariant = getCPUVariant()\n\t} else {\n\t\tcpuVariant = \"\""
  }
]