[
  {
    "id" : "bb12c245-61af-4954-9e96-aa2fbfbe4912",
    "prId" : 79287,
    "prUrl" : "https://github.com/kubernetes/kubernetes/pull/79287#pullrequestreview-253153455",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a156eb7a-c1de-42e3-bf56-fff6c7fecf98",
        "parentId" : null,
        "authorId" : "b7c04289-77b0-4d05-90b7-3bde23e2b0bf",
        "body" : "This will still give a couple of lines with warnings that say `error`, when running update-bazel.sh.\r\n\r\n```bash\r\n> ./hack/update-bazel.sh                      \r\n~/go/src/k8s.io/kubernetes/vendor ~/go/src/k8s.io/kubernetes\r\n~/go/src/k8s.io/kubernetes\r\ngazelle: /home/odin/go/src/k8s.io/kubernetes/vendor/github.com/seccomp/libseccomp-golang/seccomp.go: error reading go file: /home/odin/go/src/k8s.io/kubernetes/vendor/github.com/seccomp/libseccomp-golang/seccomp.go: pkg-config not supported: #cgo pkg-config: libseccomp\r\ngazelle: /home/odin/go/src/k8s.io/kubernetes/vendor/github.com/seccomp/libseccomp-golang/seccomp_internal.go: error reading go file: /home/odin/go/src/k8s.io/kubernetes/vendor/github.com/seccomp/libseccomp-golang/seccomp_internal.go: pkg-config not supported: #cgo pkg-config: libseccomp\r\n```\r\n\r\nI think that it may look like errors for people without the insight into this.. Should we filter them out (hide them from the user), or should we just leave them for now? I am leaning towards filtering it out, since it annoys me quite a bit...",
        "createdAt" : "2019-06-23T18:40:01Z",
        "updatedAt" : "2019-06-24T18:11:52Z",
        "lastEditedBy" : "b7c04289-77b0-4d05-90b7-3bde23e2b0bf",
        "tags" : [
        ]
      },
      {
        "id" : "3d56831d-ae35-49c1-bbbd-674de25f87e4",
        "parentId" : "a156eb7a-c1de-42e3-bf56-fff6c7fecf98",
        "authorId" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "body" : "I'm not sure what we should do here tbh. This is a bit annoying but the warnings are legitimate, it might be ok if we specifically filtered the warning for this package since we have a work around, but it probably would be a bad idea to generally hide them from all packages... ðŸ¤” ",
        "createdAt" : "2019-06-23T19:18:11Z",
        "updatedAt" : "2019-06-24T18:11:52Z",
        "lastEditedBy" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "tags" : [
        ]
      },
      {
        "id" : "a6d10856-ce27-42d8-9aa5-ef376353c5f5",
        "parentId" : "a156eb7a-c1de-42e3-bf56-fff6c7fecf98",
        "authorId" : "b7c04289-77b0-4d05-90b7-3bde23e2b0bf",
        "body" : "Yes, it feel a bit hacky, but since we already do some funky stuff with the ldflags, i guess filtering out this warning/error is reasonable atm. Doing something like this to explicitly filter out warnings from the two files:\r\n\r\n```bash\r\n$ gazelle fix \"....\" 2>&1 | grep -Ev \"vendor/github.com/seccomp/libseccomp-golang/seccomp(_internal)?.go: pkg-config not supported: #cgo pkg-config: libseccomp\"\r\n```\r\n\r\nThe PR in libseccomp-golang introducting this, https://github.com/seccomp/libseccomp-golang/pull/8, only says _Not all distributions package libseccomp in the same way, but pkg-config\r\nallows the same configuration to work on different distributions_, but we have never had any problems with this (the old one), so it looks like all distros use the same ldflag. Maybe we can ask them to switch back? I agree that `pkg-config` is nice when dealing with different operating systems, or with more advanced stuff that require a lot of ld- and libflags, but this code will only run on linux, and is quite simple with its single ldflag... :thinking: ",
        "createdAt" : "2019-06-23T19:30:35Z",
        "updatedAt" : "2019-06-24T18:11:52Z",
        "lastEditedBy" : "b7c04289-77b0-4d05-90b7-3bde23e2b0bf",
        "tags" : [
        ]
      },
      {
        "id" : "7a9b209a-fd6a-4d79-8f31-195845947ab9",
        "parentId" : "a156eb7a-c1de-42e3-bf56-fff6c7fecf98",
        "authorId" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "body" : "Yeah. We could certainly try asking them to switch, but from their POV the `pkg-config` should technically be more correct and they probably aren't using bazel, I wouldn't bet on it... ðŸ¤” \r\n\r\nI'll let the other reviewers decide on the filtering or let that be another PR, I'd be happy to add it but I'm not sure if we should and it's not strictly necessary to get this fix ðŸ˜… ",
        "createdAt" : "2019-06-23T23:00:26Z",
        "updatedAt" : "2019-06-24T18:11:52Z",
        "lastEditedBy" : "46e1ba13-482b-4bcd-8fb1-be821bac3b04",
        "tags" : [
        ]
      }
    ],
    "commit" : "d5960939255e548e4c11b0fded47d9a309005f25",
    "line" : 14,
    "diffHunk" : "@@ -1,1 +21,25 @@// C wrapping code\n\n// #cgo pkg-config: libseccomp\n// #include <stdlib.h>\n// #include <seccomp.h>"
  }
]