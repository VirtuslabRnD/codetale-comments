[
  {
    "id" : "aae85a89-336b-4dd0-95db-37503cd49d7c",
    "prId" : 1877,
    "prUrl" : "https://github.com/scala-native/scala-native/pull/1877#pullrequestreview-471636033",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "c5f5da40-268a-4bf2-9d2d-bf1f658bf529",
        "parentId" : null,
        "authorId" : "ae189121-dea4-445f-87d0-303740ceff41",
        "body" : "You should probably keep *both* here, and use `++$TRAVIS_SCALA_VERSION` in the invocations of sbt. That way you'll expand the CI matrix to cover all versions.",
        "createdAt" : "2020-08-20T13:52:07Z",
        "updatedAt" : "2020-10-06T16:52:57Z",
        "lastEditedBy" : "ae189121-dea4-445f-87d0-303740ceff41",
        "tags" : [
        ]
      }
    ],
    "commit" : "fce1234368bb0af02f2e0a329da7a4054b4e52b9",
    "line" : 4,
    "diffHunk" : "@@ -1,1 +3,7 @@scala:\n  - \"2.11.12\"\n  - \"2.12.12\"\n\nos: linux"
  },
  {
    "id" : "0d644f39-e2d2-4144-a162-adc44a58b3a2",
    "prId" : 1302,
    "prUrl" : "https://github.com/scala-native/scala-native/pull/1302#pullrequestreview-157507409",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1cce1b08-2974-4e28-b8a1-b598f0048f96",
        "parentId" : null,
        "authorId" : "d1cbb5a4-1605-48d2-8efe-eeb6295c931f",
        "body" : "Do you have an idea about how much time this saves? For scala-native-bindgen this ended up adding 1+ gigabyte to the build cache and the docker image import took around 2 minutes.",
        "createdAt" : "2018-09-21T00:00:00Z",
        "updatedAt" : "2018-09-25T23:36:29Z",
        "lastEditedBy" : "d1cbb5a4-1605-48d2-8efe-eeb6295c931f",
        "tags" : [
        ]
      }
    ],
    "commit" : "ebea06fed4bd9bbf3ec373f772d5a3cde47fa92d",
    "line" : 78,
    "diffHunk" : "@@ -1,1 +47,51 @@  - rm -rf $HOME/.ivy2/{cache,local}/org.scala-native/\n  - mkdir -p $HOME/docker && docker images -a --filter=reference=\"scala-native-testing:*\" --format '{{.Repository}}:{{.Tag}} {{.ID}}'\n    | xargs -n 2 -t sh -c 'test -e $HOME/docker/$1.tar.gz || docker save $0 | gzip -2 > $HOME/docker/$1.tar.gz'\n\ncache:"
  },
  {
    "id" : "70c8a73b-83f0-4bbd-9d01-fad4a6bb5a12",
    "prId" : 1302,
    "prUrl" : "https://github.com/scala-native/scala-native/pull/1302#pullrequestreview-159084768",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "67dc9f50-a0ff-4dcc-a475-f034ed3c8e15",
        "parentId" : null,
        "authorId" : "d1cbb5a4-1605-48d2-8efe-eeb6295c931f",
        "body" : "Have you considered using docker-compose to manage the environment variable and what scripts get run? It makes it very easy to run a specific build job locally and potentially remove the need for `run-test-travis.sh`.",
        "createdAt" : "2018-09-21T01:36:13Z",
        "updatedAt" : "2018-09-25T23:36:29Z",
        "lastEditedBy" : "d1cbb5a4-1605-48d2-8efe-eeb6295c931f",
        "tags" : [
        ]
      },
      {
        "id" : "f0c3e21b-0f21-4a41-8d93-02ae42bb16e8",
        "parentId" : "67dc9f50-a0ff-4dcc-a475-f034ed3c8e15",
        "authorId" : "d1cbb5a4-1605-48d2-8efe-eeb6295c931f",
        "body" : "Also showing the docker-compose service names in the Travis CI matrix's environment setting makes it very easy to reproduce a specific build job locally:\r\n\r\n - `sbt-1.2.3-gc-boehm-arch-x86_64`\r\n - `sbt-0.13.17-gc-immix-arch-x86_32`",
        "createdAt" : "2018-09-21T02:24:57Z",
        "updatedAt" : "2018-09-25T23:36:29Z",
        "lastEditedBy" : "d1cbb5a4-1605-48d2-8efe-eeb6295c931f",
        "tags" : [
        ]
      },
      {
        "id" : "8a6b3a38-0333-4bd1-9d7f-d7417fae73cc",
        "parentId" : "67dc9f50-a0ff-4dcc-a475-f034ed3c8e15",
        "authorId" : "9560e292-64a8-4bb0-8df4-911ec695a963",
        "body" : "The main reason I didn't go with that approach was to prevent duplication with definition of environment variables inside the docker-compose config but also referencing the same information when identifying which container to run in Travis. I'll look at setting up a script that automatically builds and runs a specific platform test though.",
        "createdAt" : "2018-09-25T18:43:57Z",
        "updatedAt" : "2018-09-25T23:36:29Z",
        "lastEditedBy" : "9560e292-64a8-4bb0-8df4-911ec695a963",
        "tags" : [
        ]
      },
      {
        "id" : "4b174e2f-b100-445f-a665-2b84e7ab912e",
        "parentId" : "67dc9f50-a0ff-4dcc-a475-f034ed3c8e15",
        "authorId" : "d1cbb5a4-1605-48d2-8efe-eeb6295c931f",
        "body" : "As I see it you either duplicate it in `.travis.yml` or in the docker-compose.yml file. To me the whole point of using docker is to allow reproducing the build environment everywhere, not just in Travis. Anyway, we will only need docker images for each combination of `x86_64`/`x86_32` and LLVM version. The rest can be managed with environment variables.",
        "createdAt" : "2018-09-26T15:39:16Z",
        "updatedAt" : "2018-09-26T15:39:16Z",
        "lastEditedBy" : "d1cbb5a4-1605-48d2-8efe-eeb6295c931f",
        "tags" : [
        ]
      },
      {
        "id" : "d4dbedde-8a7f-4e6e-aae7-1fc2ac8d6170",
        "parentId" : "67dc9f50-a0ff-4dcc-a475-f034ed3c8e15",
        "authorId" : "9560e292-64a8-4bb0-8df4-911ec695a963",
        "body" : "The duplication I see is with `.travis.yml` having to identify which container to use but also having the actual details of each container in the `docker-compose.yml`. I'm also imagining having a lot more containers in the future with support for ARM and beyond, this approach is actually very much based off what Rust does (https://travis-ci.org/rust-lang/rust/builds/433482440).",
        "createdAt" : "2018-09-26T16:22:02Z",
        "updatedAt" : "2018-09-26T16:22:02Z",
        "lastEditedBy" : "9560e292-64a8-4bb0-8df4-911ec695a963",
        "tags" : [
        ]
      }
    ],
    "commit" : "ebea06fed4bd9bbf3ec373f772d5a3cde47fa92d",
    "line" : 68,
    "diffHunk" : "@@ -1,1 +38,42 @@      docker run --rm --privileged multiarch/qemu-user-static:register;\n      docker build --cache-from scala-native-testing:linux-$TARGET_DOCKER_PLATFORM -t scala-native-testing:linux-$TARGET_DOCKER_PLATFORM --build-arg TARGET_DOCKER_PLATFORM=$TARGET_DOCKER_PLATFORM --build-arg HOST_ARCHITECTURE=amd64 --cpuset-cpus=0 ci-docker;\n      ./ci-docker/run-test-travis.sh;\n    fi\n"
  },
  {
    "id" : "e54c0ff9-037d-4d93-a113-fbf8a77eab20",
    "prId" : 773,
    "prUrl" : "https://github.com/scala-native/scala-native/pull/773#pullrequestreview-42360650",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "a1f32ba5-9f43-4445-aafa-72be43536a7a",
        "parentId" : null,
        "authorId" : "0f96d83b-618e-4d06-9aeb-e1d46fa92077",
        "body" : "Please exclude `.ivy2/cache/org.scala-native/` and `.ivy2/local/org.scala-native/` here. Those should always be rebuild from source and never cached. ",
        "createdAt" : "2017-06-06T15:51:34Z",
        "updatedAt" : "2017-06-06T16:10:41Z",
        "lastEditedBy" : "0f96d83b-618e-4d06-9aeb-e1d46fa92077",
        "tags" : [
        ]
      }
    ],
    "commit" : "97f3b024b8cb11c6c2f3a14d6f5866f33767ccc3",
    "line" : 7,
    "diffHunk" : "@@ -1,1 +69,73 @@before_cache:\n  - find $HOME/.sbt -name \"*.lock\" | xargs rm\n  - find $HOME/.ivy2 -name \"ivydata-*.properties\" | xargs rm\n  - rm -rf $HOME/.ivy2/{cache,local}/org.scala-native/\n"
  },
  {
    "id" : "ae20e5fe-d3f4-4e18-8c4f-8ab57539fdc4",
    "prId" : 525,
    "prUrl" : "https://github.com/scala-native/scala-native/pull/525#pullrequestreview-23340998",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "1e3ebe26-4c39-4741-9b32-f525ea62b3c3",
        "parentId" : null,
        "authorId" : "0f96d83b-618e-4d06-9aeb-e1d46fa92077",
        "body" : "No more snapshot hell. I tried it once, it was terrible. ",
        "createdAt" : "2017-02-22T21:39:59Z",
        "updatedAt" : "2017-02-22T21:40:00Z",
        "lastEditedBy" : "0f96d83b-618e-4d06-9aeb-e1d46fa92077",
        "tags" : [
        ]
      }
    ],
    "commit" : "a78405150fb7df46c9d88036f7db3167c553a844",
    "line" : 5,
    "diffHunk" : "@@ -1,1 +52,56 @@  - java -version\n  - bin/scalafmt --test\n  - sbt \";rebuild ;test-all\""
  },
  {
    "id" : "e1cffb5a-8840-488f-98a7-a1b709d7e1d8",
    "prId" : 403,
    "prUrl" : "https://github.com/scala-native/scala-native/pull/403#pullrequestreview-10006223",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "26572dee-06b8-43b8-9ca3-5f8b2eaf9f85",
        "parentId" : null,
        "authorId" : "0f96d83b-618e-4d06-9aeb-e1d46fa92077",
        "body" : "Is there a way to auto-install, so that you have just a single command that will check if it's installed or not and run the next script? Extra step, means extra step people can and will get wrong. ",
        "createdAt" : "2016-11-24T09:35:39Z",
        "updatedAt" : "2016-11-24T14:28:59Z",
        "lastEditedBy" : "0f96d83b-618e-4d06-9aeb-e1d46fa92077",
        "tags" : [
        ]
      }
    ],
    "commit" : "e0ca4e18a885cddc80b3e2b601a1b731e9393157",
    "line" : null,
    "diffHunk" : "@@ -1,1 +55,59 @@script:\n  - java -version\n  - bin/scalafmt --test\n  - sbt 'cleanCache' 'cleanLocal' 'nscplugin/publishLocal' 'nativelib/publishLocal' 'publishLocal' 'sandbox/run' 'demoNative/run' 'tests/run' 'tools/test' 'benchmarks/run' 'scripted' 'publishSnapshot'\n "
  }
]