[
  {
    "id" : "68a7be28-51f6-4581-a548-87ef8306a2b1",
    "prId" : 23278,
    "prUrl" : "https://github.com/flutter/flutter/pull/23278#pullrequestreview-167022554",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "78cb4f50-87cf-4bfa-8e73-bf3da246c11b",
        "parentId" : null,
        "authorId" : "d61ab95a-0bf0-4571-9098-19991dd821ca",
        "body" : "Does this actually work on a clean checkout? I'd expect that flutter tools does get build the first time you run flutter, no?",
        "createdAt" : "2018-10-19T08:26:02Z",
        "updatedAt" : "2018-10-19T08:26:02Z",
        "lastEditedBy" : "d61ab95a-0bf0-4571-9098-19991dd821ca",
        "tags" : [
        ]
      },
      {
        "id" : "c59cf088-4f7c-4eb2-98f6-d1de57410d39",
        "parentId" : "78cb4f50-87cf-4bfa-8e73-bf3da246c11b",
        "authorId" : "adb5cc5c-9d1c-4103-8ffa-619d28e09399",
        "body" : "My reasoning is that the steps in the [beta release process](https://github.com/flutter/flutter/wiki/Release-process) describe checking out an arbitrary tag and verifying that `flutter create --offline` doesn't rebuild anything on it. The tag refs are just regular commits like anything else, as far as I can tell. I don't see a reason they would be different from non-tagged refs.\r\n\r\nI may be totally missing something here though, I'm unfortunately not seeing a way to totally verify these tests work until after they're merged.\r\n\r\nI can't run any of the devicelab tests on a completely clean checkout:\r\n\r\n```\r\n$ dart bin/run.dart -t smoke_test_success\r\nError: Could not resolve the package 'args' in 'package:args/args.dart'.\r\nError: Could not resolve the package 'path' in 'package:path/path.dart'.\r\nError: Could not resolve the package 'flutter_devicelab' in 'package:flutter_devicelab/framework/manifest.dart'.\r\nError: Could not resolve the package 'flutter_devicelab' in 'package:flutter_devicelab/framework/runner.dart'.\r\nError: Could not resolve the package 'flutter_devicelab' in 'package:flutter_devicelab/framework/utils.dart'\r\n```\r\n\r\nAfter running `flutter update-packages` in the checkout this passes.",
        "createdAt" : "2018-10-19T17:03:11Z",
        "updatedAt" : "2018-10-19T17:03:19Z",
        "lastEditedBy" : "adb5cc5c-9d1c-4103-8ffa-619d28e09399",
        "tags" : [
        ]
      },
      {
        "id" : "47d57c7f-0006-4740-ba40-e33168a7429b",
        "parentId" : "78cb4f50-87cf-4bfa-8e73-bf3da246c11b",
        "authorId" : "d61ab95a-0bf0-4571-9098-19991dd821ca",
        "body" : "On a clean checkout, `flutter update-packages` builds the flutter tool. That's why it doesn't get rebuild when you run the tests and they pass.\r\n\r\nI guess, it's ok then because you can't run the tests without running `flutter update-packages`. ",
        "createdAt" : "2018-10-22T17:33:40Z",
        "updatedAt" : "2018-10-22T17:33:40Z",
        "lastEditedBy" : "d61ab95a-0bf0-4571-9098-19991dd821ca",
        "tags" : [
        ]
      }
    ],
    "commit" : "c458b43c21738fcfd060da2d7f33fc337a2aae4b",
    "line" : 21,
    "diffHunk" : "@@ -1,1 +69,73 @@      output = await eval(path.join(flutterDirectory.path, 'bin', 'flutter'), <String>['create', '--offline', 'flutter_create_test']);\n    });\n    if (output.contains(RegExp('building flutter tool', caseSensitive: false))) {\n      return TaskResult.failure('`flutter create --offline` should not rebuild flutter tool');\n    } else if (!output.contains('All done!')) {"
  }
]