[
  {
    "id" : "c0335e49-3e76-4970-86d5-f405e0e84b61",
    "prId" : 13225,
    "prUrl" : "https://github.com/flutter/flutter/pull/13225#pullrequestreview-80639156",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "3a60d5d4-10c4-441c-a560-218263dfd89b",
        "parentId" : null,
        "authorId" : "324f8243-b35a-40e4-a3a7-2939450eef90",
        "body" : "`dart2` suffix is different from `preview_dart_2` we are using for hot mode tests, which makes it slightly more difficult to see all dart 2.0 benchmarks.  Can you consider changing it?\r\n\r\nAlso, for hot mode benchmarks, `preview_dart_2` goes into the name of the benchmark, rather into the name of the result. Not sure if these microbenchmarks can be made consistent with hot mode ones in that regard as well.",
        "createdAt" : "2017-11-30T21:23:46Z",
        "updatedAt" : "2017-11-30T21:23:46Z",
        "lastEditedBy" : "324f8243-b35a-40e4-a3a7-2939450eef90",
        "tags" : [
        ]
      },
      {
        "id" : "e72f64a9-6d0a-4552-b998-dca9887902db",
        "parentId" : "3a60d5d4-10c4-441c-a560-218263dfd89b",
        "authorId" : "48f8d3e5-55d5-44a0-a521-e9a89f32d373",
        "body" : "@aam, I did exactly what you are suggesting in the [first version](https://github.com/flutter/flutter/pull/13225/commits/d3c6cd83bcb0f1e4ad1b831b0873ae67f4b2a69f) of the change.\r\n\r\n@yjbanov asked me to change it in the [review](https://github.com/flutter/flutter/pull/13225#discussion_r153613625).\r\n\r\nI think it's OK to change the suffix in the result to 'preview_dart_2', but creating a benchmark with different name wastes horizontal space on the dashboard and should be avoided.\r\n\r\nAlso, I see other benchmarks such as 'flutter_gallery_win__compile' which have both default mode and '_preview_dart_2' results.",
        "createdAt" : "2017-11-30T22:13:18Z",
        "updatedAt" : "2017-11-30T22:13:18Z",
        "lastEditedBy" : "48f8d3e5-55d5-44a0-a521-e9a89f32d373",
        "tags" : [
        ]
      },
      {
        "id" : "514ecf8c-5c01-4b5a-ad11-2692f26eb58a",
        "parentId" : "3a60d5d4-10c4-441c-a560-218263dfd89b",
        "authorId" : "324f8243-b35a-40e4-a3a7-2939450eef90",
        "body" : "Ah, thanks @alexmarkov , didn't see @yjbanov review comments regarding that. \r\n\r\n>I think it's OK to change the suffix in the result to 'preview_dart_2', but creating a benchmark with different name wastes horizontal space on the dashboard and should be avoided.\r\n\r\nAre you talking https://flutter-dashboard.appspot.com/benchmarks.html dashboard? Not sure how it works but it looks max of benchmark name and result name that determines card width. I would argue that you can reduce font size if you want to fit more benchmarks on the screen. Consistency in benchmarks naming(especially considering filtering that is done using name text) seems more important.\r\n\r\n> Also, I see other benchmarks such as 'flutter_gallery_win__compile' which have both default mode and '_preview_dart_2' results.\r\n\r\nYes, I see it now. I think it's unfortunate because the name of the result(`aot_snapshot_size`, for example) is the same, it's the benchmark(`win_compile with preview_dart_2`) that is different. Not sure whether there was some particular reason for attributing result name, rather than the benchmark, @Hixie ?\r\n",
        "createdAt" : "2017-11-30T22:30:59Z",
        "updatedAt" : "2017-11-30T22:30:59Z",
        "lastEditedBy" : "324f8243-b35a-40e4-a3a7-2939450eef90",
        "tags" : [
        ]
      },
      {
        "id" : "e099c6ef-63b3-41f4-ae57-e8c0246bed2a",
        "parentId" : "3a60d5d4-10c4-441c-a560-218263dfd89b",
        "authorId" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "body" : "The benchmark numbers for dart2 for compiling are just obtained at the same time as we do all the other compiling benchmarks (debug, release, aot size, binary size, etc). It's all just one big benchmark, run on three platforms, for each of three apps.\r\n\r\nWe should probably just move the hot mode dart2 benchmarks into the one hot mode test in the same way (not that it really matters either way).",
        "createdAt" : "2017-11-30T22:55:29Z",
        "updatedAt" : "2017-11-30T22:55:29Z",
        "lastEditedBy" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "tags" : [
        ]
      },
      {
        "id" : "427eed86-74f7-4013-bf01-f03291a7e65b",
        "parentId" : "3a60d5d4-10c4-441c-a560-218263dfd89b",
        "authorId" : "324f8243-b35a-40e4-a3a7-2939450eef90",
        "body" : "Look at it differently - running flutter in preview-dart-2 mode can behave(pass/fail) differently from base mode. Grouping them together will be misleading.\r\nResults of the run(if the run was successful) are named the same(aot size, compile time, run time), but have to grouped in such a fashion that it is clear what run({base|preview-dart-2} x {ios|android} x {linux|win|mac}) they belong to.",
        "createdAt" : "2017-11-30T23:15:25Z",
        "updatedAt" : "2017-11-30T23:15:25Z",
        "lastEditedBy" : "324f8243-b35a-40e4-a3a7-2939450eef90",
        "tags" : [
        ]
      },
      {
        "id" : "970ebede-7458-4441-857d-5f458dbb1961",
        "parentId" : "3a60d5d4-10c4-441c-a560-218263dfd89b",
        "authorId" : "ac2c92fd-803c-4666-96b1-db1044c762c5",
        "body" : "Let's keep the \"dart2\" benchmark IDs. I'll update the UI labels (this is done in the database, not in code)",
        "createdAt" : "2017-11-30T23:16:08Z",
        "updatedAt" : "2017-11-30T23:16:08Z",
        "lastEditedBy" : "ac2c92fd-803c-4666-96b1-db1044c762c5",
        "tags" : [
        ]
      },
      {
        "id" : "72585bad-1d4d-44d2-80ba-4905ad5405e5",
        "parentId" : "3a60d5d4-10c4-441c-a560-218263dfd89b",
        "authorId" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "body" : "> Look at it differently - running flutter in preview-dart-2 mode can behave(pass/fail) differently from base mode. Grouping them together will be misleading.\r\n\r\nI don't really see why. Either the build is green or the build is red; if the build is red we should back out what made it red. Doesn't really matter what exactly caused it to go red.\r\n\r\n> Results of the run(if the run was successful) are named the same(aot size, compile time, run time), but have to grouped in such a fashion that it is clear what run({base|preview-dart-2} x {ios|android} x {linux|win|mac}) they belong to.\r\n\r\nThey are (insofar as anything can be grouped across multiple dimensions when it's a single list). The names are very consistent now for all these.",
        "createdAt" : "2017-11-30T23:17:20Z",
        "updatedAt" : "2017-11-30T23:17:20Z",
        "lastEditedBy" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "tags" : [
        ]
      },
      {
        "id" : "49f2a005-b500-43c5-b168-fd91a8d68461",
        "parentId" : "3a60d5d4-10c4-441c-a560-218263dfd89b",
        "authorId" : "324f8243-b35a-40e4-a3a7-2939450eef90",
        "body" : "> I don't really see why. Either the build is green or the build is red; if the build is red we should back out what made it red. Doesn't really matter what exactly caused it to go red.\r\n\r\nI think preview-dart-2 builds have more leeway regarding being red. Just recently(during last dart roll) we have marked preview-dart-2 hot reload flaky because it was broken(even if just for one evening) by dart roll, but we didn't want to keep rope red because of that.",
        "createdAt" : "2017-11-30T23:22:15Z",
        "updatedAt" : "2017-11-30T23:22:15Z",
        "lastEditedBy" : "324f8243-b35a-40e4-a3a7-2939450eef90",
        "tags" : [
        ]
      },
      {
        "id" : "b4fe05e3-c304-447d-b921-093ec4cdf602",
        "parentId" : "3a60d5d4-10c4-441c-a560-218263dfd89b",
        "authorId" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "body" : "If the code is in, it should work. We don't give more leeway for other not-yet-final parts of the code, why would dart2 be special?",
        "createdAt" : "2017-11-30T23:24:41Z",
        "updatedAt" : "2017-11-30T23:24:41Z",
        "lastEditedBy" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "tags" : [
        ]
      },
      {
        "id" : "80c1bb65-d5f2-4256-be32-cf4b34e73562",
        "parentId" : "3a60d5d4-10c4-441c-a560-218263dfd89b",
        "authorId" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "body" : "> Let's keep the \"dart2\" benchmark IDs. I'll update the UI labels (this is done in the database, not in code)\r\n \r\nFWIW, I find it really confusing when the labels don't match the code (because I can't search for the label in the code).",
        "createdAt" : "2017-11-30T23:25:17Z",
        "updatedAt" : "2017-11-30T23:25:17Z",
        "lastEditedBy" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "tags" : [
        ]
      },
      {
        "id" : "a06c7e84-4d6a-4224-a20e-83fa3cba4b59",
        "parentId" : "3a60d5d4-10c4-441c-a560-218263dfd89b",
        "authorId" : "ac2c92fd-803c-4666-96b1-db1044c762c5",
        "body" : "What if we add labels to `manifest.yaml` and use stable numeric IDs for all benchmarks? Then there will be _one_ name both in code and on the UI. WDYT?",
        "createdAt" : "2017-11-30T23:32:06Z",
        "updatedAt" : "2017-11-30T23:32:06Z",
        "lastEditedBy" : "ac2c92fd-803c-4666-96b1-db1044c762c5",
        "tags" : [
        ]
      },
      {
        "id" : "eb01a88b-9bf8-4b39-a0e0-958239a8997e",
        "parentId" : "3a60d5d4-10c4-441c-a560-218263dfd89b",
        "authorId" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "body" : "That could work.",
        "createdAt" : "2017-12-01T22:26:48Z",
        "updatedAt" : "2017-12-01T22:26:48Z",
        "lastEditedBy" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "tags" : [
        ]
      }
    ],
    "commit" : "3a3785690877b8cc3d35638497e04ca2c493b519",
    "line" : 46,
    "diffHunk" : "@@ -1,1 +65,69 @@    void addDart2Results(Map<String, double> benchmarkResults) {\n      benchmarkResults.forEach((String key, double result) {\n        allResults[key + '_dart2'] = result;\n      });\n    }"
  }
]