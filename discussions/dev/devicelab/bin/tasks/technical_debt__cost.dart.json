[
  {
    "id" : "12e2aac9-15a5-4503-a75d-34586d86db6d",
    "prId" : 7667,
    "prUrl" : "https://github.com/flutter/flutter/pull/7667#pullrequestreview-18739145",
    "prSource" : "GitHub",
    "comments" : [
      {
        "id" : "eec8cb2c-d749-4d33-9386-742b341f5e5a",
        "parentId" : null,
        "authorId" : "ac2c92fd-803c-4666-96b1-db1044c762c5",
        "body" : "Not entirely sure about it, but `await for` might be appropriate here ([example](https://github.com/flutter/cocoon/blob/master/app/bin/dev_server.dart#L97)). It should track subscriptions for you and cancel them automatically when errors happen.",
        "createdAt" : "2017-01-26T21:38:46Z",
        "updatedAt" : "2017-01-26T22:24:41Z",
        "lastEditedBy" : "ac2c92fd-803c-4666-96b1-db1044c762c5",
        "tags" : [
        ]
      },
      {
        "id" : "5c346e92-d352-4b4a-a1fd-c7475fdd7ce9",
        "parentId" : "eec8cb2c-d749-4d33-9386-742b341f5e5a",
        "authorId" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "body" : "That would prevent the async work from happening in parallel, unless I misunderstand where you want the await.",
        "createdAt" : "2017-01-26T21:55:45Z",
        "updatedAt" : "2017-01-26T22:24:41Z",
        "lastEditedBy" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "tags" : [
        ]
      },
      {
        "id" : "a04478a0-1ac8-4cb3-a93f-32da8806e812",
        "parentId" : "eec8cb2c-d749-4d33-9386-742b341f5e5a",
        "authorId" : "ac2c92fd-803c-4666-96b1-db1044c762c5",
        "body" : "I think it can be used inside `findCostsForFile` for iterating over lines and on this line. But you are right, if we use it to iterate over files, it will prevent parallelism across files.",
        "createdAt" : "2017-01-26T22:02:28Z",
        "updatedAt" : "2017-01-26T22:24:41Z",
        "lastEditedBy" : "ac2c92fd-803c-4666-96b1-db1044c762c5",
        "tags" : [
        ]
      },
      {
        "id" : "a621e802-7f91-4916-82ca-e41348443915",
        "parentId" : "eec8cb2c-d749-4d33-9386-742b341f5e5a",
        "authorId" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "body" : "i'll just stick to the current pattern here, so it's consistent",
        "createdAt" : "2017-01-26T22:21:37Z",
        "updatedAt" : "2017-01-26T22:24:41Z",
        "lastEditedBy" : "9b5a6de7-1648-432f-a400-7a47bea935d8",
        "tags" : [
        ]
      }
    ],
    "commit" : "8110f6f770b69e1906f47c1f02ae59dca2ff110c",
    "line" : 54,
    "diffHunk" : "@@ -1,1 +52,56 @@      if (entity is File) {\n        StreamSubscription<double> subscription;\n        subscription = findCostsForFile(entity)?.listen((double cost) {\n          result.add(cost);\n        }, onDone: () { checkDone(subscription, name); });"
  }
]